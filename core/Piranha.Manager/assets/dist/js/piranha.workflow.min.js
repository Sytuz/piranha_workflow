piranha.workflow=new Vue({el:"#workflow",data:{loading:!0,loadingFailed:!1,items:[],currentWorkflowId:null},methods:{load:function(){var o=this;o.loading=!0,o.loadingFailed=!1,fetch(piranha.baseUrl+"manager/api/workflow/list").then((function(o){if(!o.ok)throw new Error("Server returned status: "+o.status);return o.json()})).then((function(r){o.items=r,o.loading=!1})).catch((function(r){console.log("Error loading workflows:",r),o.loading=!1,o.loadingFailed=!0,piranha.notifications.push({body:"Failed to load workflows. Please try again or contact your administrator.",type:"danger"})}))},retry:function(){this.load()},remove:function(o){this.currentWorkflowId=o,piranha.alert.open({title:piranha.resources.texts.delete,body:"Are you sure you want to delete this workflow?",confirmCss:"btn-danger",confirmIcon:"fas fa-trash",confirmText:piranha.resources.texts.delete,onConfirm:this.removeConfirm})},removeConfirm:function(){var o=this;fetch(piranha.baseUrl+"manager/api/workflow/"+this.currentWorkflowId,{method:"DELETE"}).then((function(r){if(!r.ok)return r.json().then((function(o){throw new Error(o.body||"An error occurred while deleting the workflow")}));o.load(),o.currentWorkflowId=null,piranha.notifications.push({body:"The workflow was successfully deleted",type:"success"})})).catch((function(o){console.log("Error deleting workflow:",o),piranha.notifications.push({body:o.message||"An error occurred while deleting the workflow",type:"danger"})}))}}}),$(document).ready((function(){piranha.workflow.load()}));