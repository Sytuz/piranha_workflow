/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */
!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,(function(t,e){"use strict";var i=[],n=Object.getPrototypeOf,s=i.slice,r=i.flat?function(t){return i.flat.call(t)}:function(t){return i.concat.apply([],t)},o=i.push,a=i.indexOf,l={},h=l.toString,u=l.hasOwnProperty,c=u.toString,d=c.call(Object),f={},p=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},g=function(t){return null!=t&&t===t.window},m=t.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function v(t,e,i){var n,s,r=(i=i||m).createElement("script");if(r.text=t,e)for(n in y)(s=e[n]||e.getAttribute&&e.getAttribute(n))&&r.setAttribute(n,s);i.head.appendChild(r).parentNode.removeChild(r)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[h.call(t)]||"object":typeof t}var b="3.7.1",w=/HTML$/i,k=function(t,e){return new k.fn.init(t,e)};function S(t){var e=!!t&&"length"in t&&t.length,i=x(t);return!p(t)&&!g(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function C(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}k.fn=k.prototype={jquery:b,constructor:k,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=k.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return k.each(this,t)},map:function(t){return this.pushStack(k.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(k.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(k.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:i.sort,splice:i.splice},k.extend=k.fn.extend=function(){var t,e,i,n,s,r,o=arguments[0]||{},a=1,l=arguments.length,h=!1;for("boolean"==typeof o&&(h=o,o=arguments[a]||{},a++),"object"==typeof o||p(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=t[e],"__proto__"!==e&&o!==n&&(h&&n&&(k.isPlainObject(n)||(s=Array.isArray(n)))?(i=o[e],r=s&&!Array.isArray(i)?[]:s||k.isPlainObject(i)?i:{},s=!1,o[e]=k.extend(h,r,n)):void 0!==n&&(o[e]=n));return o},k.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==h.call(t))&&(!(e=n(t))||"function"==typeof(i=u.call(e,"constructor")&&e.constructor)&&c.call(i)===d)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){v(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,n=0;if(S(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},text:function(t){var e,i="",n=0,s=t.nodeType;if(!s)for(;e=t[n++];)i+=k.text(e);return 1===s||11===s?t.textContent:9===s?t.documentElement.textContent:3===s||4===s?t.nodeValue:i},makeArray:function(t,e){var i=e||[];return null!=t&&(S(Object(t))?k.merge(i,"string"==typeof t?[t]:t):o.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:a.call(e,t,i)},isXMLDoc:function(t){var e=t&&t.namespaceURI,i=t&&(t.ownerDocument||t).documentElement;return!w.test(e||i&&i.nodeName||"HTML")},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;n<i;n++)t[s++]=e[n];return t.length=s,t},grep:function(t,e,i){for(var n=[],s=0,r=t.length,o=!i;s<r;s++)!e(t[s],s)!==o&&n.push(t[s]);return n},map:function(t,e,i){var n,s,o=0,a=[];if(S(t))for(n=t.length;o<n;o++)null!=(s=e(t[o],o,i))&&a.push(s);else for(o in t)null!=(s=e(t[o],o,i))&&a.push(s);return r(a)},guid:1,support:f}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=i[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){l["[object "+e+"]"]=e.toLowerCase()}));var M=i.pop,T=i.sort,A=i.splice,P="[\\x20\\t\\r\\n\\f]",N=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g");k.contains=function(t,e){var i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(t.contains?t.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))};var D=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function L(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}k.escapeSelector=function(t){return(t+"").replace(D,L)};var E=m,_=o;!function(){var e,n,r,o,l,h,c,d,p,g,m=_,y=k.expando,v=0,x=0,b=tt(),w=tt(),S=tt(),D=tt(),L=function(t,e){return t===e&&(l=!0),0},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="(?:\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",R="\\["+P+"*("+F+")(?:"+P+"*([*^$|!~]?=)"+P+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+P+"*\\]",I=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",B=new RegExp(P+"+","g"),j=new RegExp("^"+P+"*,"+P+"*"),z=new RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),H=new RegExp(P+"|>"),U=new RegExp(I),V=new RegExp("^"+F+"$"),Y={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+I),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},q=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,W=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/[+~]/,X=new RegExp("\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\([^\\r\\n\\f])","g"),K=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},J=function(){lt()},Z=dt((function(t){return!0===t.disabled&&C(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(i=s.call(E.childNodes),E.childNodes),i[E.childNodes.length].nodeType}catch(t){m={apply:function(t,e){_.apply(t,s.call(e))},call:function(t){_.apply(t,s.call(arguments,1))}}}function Q(t,e,i,n){var s,r,o,a,l,u,c,g=e&&e.ownerDocument,v=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==v&&9!==v&&11!==v)return i;if(!n&&(lt(e),e=e||h,d)){if(11!==v&&(l=W.exec(t)))if(s=l[1]){if(9===v){if(!(o=e.getElementById(s)))return i;if(o.id===s)return m.call(i,o),i}else if(g&&(o=g.getElementById(s))&&Q.contains(e,o)&&o.id===s)return m.call(i,o),i}else{if(l[2])return m.apply(i,e.getElementsByTagName(t)),i;if((s=l[3])&&e.getElementsByClassName)return m.apply(i,e.getElementsByClassName(s)),i}if(!(D[t+" "]||p&&p.test(t))){if(c=t,g=e,1===v&&(H.test(t)||z.test(t))){for((g=G.test(t)&&at(e.parentNode)||e)==e&&f.scope||((a=e.getAttribute("id"))?a=k.escapeSelector(a):e.setAttribute("id",a=y)),r=(u=ut(t)).length;r--;)u[r]=(a?"#"+a:":scope")+" "+ct(u[r]);c=u.join(",")}try{return m.apply(i,g.querySelectorAll(c)),i}catch(e){D(t,!0)}finally{a===y&&e.removeAttribute("id")}}}return vt(t.replace(N,"$1"),e,i,n)}function tt(){var t=[];return function e(i,s){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=s}}function et(t){return t[y]=!0,t}function it(t){var e=h.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function nt(t){return function(e){return C(e,"input")&&e.type===t}}function st(t){return function(e){return(C(e,"input")||C(e,"button"))&&e.type===t}}function rt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Z(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ot(t){return et((function(e){return e=+e,et((function(i,n){for(var s,r=t([],i.length,e),o=r.length;o--;)i[s=r[o]]&&(i[s]=!(n[s]=i[s]))}))}))}function at(t){return t&&void 0!==t.getElementsByTagName&&t}function lt(t){var e,i=t?t.ownerDocument||t:E;return i!=h&&9===i.nodeType&&i.documentElement?(c=(h=i).documentElement,d=!k.isXMLDoc(h),g=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&E!=h&&(e=h.defaultView)&&e.top!==e&&e.addEventListener("unload",J),f.getById=it((function(t){return c.appendChild(t).id=k.expando,!h.getElementsByName||!h.getElementsByName(k.expando).length})),f.disconnectedMatch=it((function(t){return g.call(t,"*")})),f.scope=it((function(){return h.querySelectorAll(":scope")})),f.cssHas=it((function(){try{return h.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),f.getById?(n.filter.ID=function(t){var e=t.replace(X,K);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&d){var i=e.getElementById(t);return i?[i]:[]}}):(n.filter.ID=function(t){var e=t.replace(X,K);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&d){var i,n,s,r=e.getElementById(t);if(r){if((i=r.getAttributeNode("id"))&&i.value===t)return[r];for(s=e.getElementsByName(t),n=0;r=s[n++];)if((i=r.getAttributeNode("id"))&&i.value===t)return[r]}return[]}}),n.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},n.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&d)return e.getElementsByClassName(t)},p=[],it((function(t){var e;c.appendChild(t).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||p.push("\\["+P+"*(?:value|"+O+")"),t.querySelectorAll("[id~="+y+"-]").length||p.push("~="),t.querySelectorAll("a#"+y+"+*").length||p.push(".#.+[+~]"),t.querySelectorAll(":checked").length||p.push(":checked"),(e=h.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),c.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&p.push(":enabled",":disabled"),(e=h.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||p.push("\\["+P+"*name"+P+"*="+P+"*(?:''|\"\")")})),f.cssHas||p.push(":has"),p=p.length&&new RegExp(p.join("|")),L=function(t,e){if(t===e)return l=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!f.sortDetached&&e.compareDocumentPosition(t)===i?t===h||t.ownerDocument==E&&Q.contains(E,t)?-1:e===h||e.ownerDocument==E&&Q.contains(E,e)?1:o?a.call(o,t)-a.call(o,e):0:4&i?-1:1)},h):h}for(e in Q.matches=function(t,e){return Q(t,null,null,e)},Q.matchesSelector=function(t,e){if(lt(t),d&&!D[e+" "]&&(!p||!p.test(e)))try{var i=g.call(t,e);if(i||f.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){D(e,!0)}return Q(e,h,null,[t]).length>0},Q.contains=function(t,e){return(t.ownerDocument||t)!=h&&lt(t),k.contains(t,e)},Q.attr=function(t,e){(t.ownerDocument||t)!=h&&lt(t);var i=n.attrHandle[e.toLowerCase()],s=i&&u.call(n.attrHandle,e.toLowerCase())?i(t,e,!d):void 0;return void 0!==s?s:t.getAttribute(e)},Q.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},k.uniqueSort=function(t){var e,i=[],n=0,r=0;if(l=!f.sortStable,o=!f.sortStable&&s.call(t,0),T.call(t,L),l){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)A.call(t,i[n],1)}return o=null,t},k.fn.uniqueSort=function(){return this.pushStack(k.uniqueSort(s.apply(this)))},n=k.expr={cacheLength:50,createPseudo:et,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(X,K),t[3]=(t[3]||t[4]||t[5]||"").replace(X,K),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Q.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Q.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&U.test(i)&&(e=ut(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(X,K).toLowerCase();return"*"===t?function(){return!0}:function(t){return C(t,e)}},CLASS:function(t){var e=b[t+" "];return e||(e=new RegExp("(^|"+P+")"+t+"("+P+"|$)"))&&b(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var s=Q.attr(n,t);return null==s?"!="===e:!e||(s+="","="===e?s===i:"!="===e?s!==i:"^="===e?i&&0===s.indexOf(i):"*="===e?i&&s.indexOf(i)>-1:"$="===e?i&&s.slice(-i.length)===i:"~="===e?(" "+s.replace(B," ")+" ").indexOf(i)>-1:"|="===e&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,s){var r="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,l){var h,u,c,d,f,p=r!==o?"nextSibling":"previousSibling",g=e.parentNode,m=a&&e.nodeName.toLowerCase(),x=!l&&!a,b=!1;if(g){if(r){for(;p;){for(c=e;c=c[p];)if(a?C(c,m):1===c.nodeType)return!1;f=p="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&x){for(b=(d=(h=(u=g[y]||(g[y]={}))[t]||[])[0]===v&&h[1])&&h[2],c=d&&g.childNodes[d];c=++d&&c&&c[p]||(b=d=0)||f.pop();)if(1===c.nodeType&&++b&&c===e){u[t]=[v,d,b];break}}else if(x&&(b=d=(h=(u=e[y]||(e[y]={}))[t]||[])[0]===v&&h[1]),!1===b)for(;(c=++d&&c&&c[p]||(b=d=0)||f.pop())&&(!(a?C(c,m):1===c.nodeType)||!++b||(x&&((u=c[y]||(c[y]={}))[t]=[v,b]),c!==e)););return(b-=s)===n||b%n===0&&b/n>=0}}},PSEUDO:function(t,e){var i,s=n.pseudos[t]||n.setFilters[t.toLowerCase()]||Q.error("unsupported pseudo: "+t);return s[y]?s(e):s.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,i){for(var n,r=s(t,e),o=r.length;o--;)t[n=a.call(t,r[o])]=!(i[n]=r[o])})):function(t){return s(t,0,i)}):s}},pseudos:{not:et((function(t){var e=[],i=[],n=yt(t.replace(N,"$1"));return n[y]?et((function(t,e,i,s){for(var r,o=n(t,null,s,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))})):function(t,s,r){return e[0]=t,n(e,null,r,i),e[0]=null,!i.pop()}})),has:et((function(t){return function(e){return Q(t,e).length>0}})),contains:et((function(t){return t=t.replace(X,K),function(e){return(e.textContent||k.text(e)).indexOf(t)>-1}})),lang:et((function(t){return V.test(t||"")||Q.error("unsupported lang: "+t),t=t.replace(X,K).toLowerCase(),function(e){var i;do{if(i=d?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===c},focus:function(t){return t===function(){try{return h.activeElement}catch(t){}}()&&h.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:rt(!1),disabled:rt(!0),checked:function(t){return C(t,"input")&&!!t.checked||C(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return q.test(t.nodeName)},button:function(t){return C(t,"input")&&"button"===t.type||C(t,"button")},text:function(t){var e;return C(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ot((function(){return[0]})),last:ot((function(t,e){return[e-1]})),eq:ot((function(t,e,i){return[i<0?i+e:i]})),even:ot((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:ot((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:ot((function(t,e,i){var n;for(n=i<0?i+e:i>e?e:i;--n>=0;)t.push(n);return t})),gt:ot((function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=nt(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=st(e);function ht(){}function ut(t,e){var i,s,r,o,a,l,h,u=w[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],h=n.preFilter;a;){for(o in i&&!(s=j.exec(a))||(s&&(a=a.slice(s[0].length)||a),l.push(r=[])),i=!1,(s=z.exec(a))&&(i=s.shift(),r.push({value:i,type:s[0].replace(N," ")}),a=a.slice(i.length)),n.filter)!(s=Y[o].exec(a))||h[o]&&!(s=h[o](s))||(i=s.shift(),r.push({value:i,type:o,matches:s}),a=a.slice(i.length));if(!i)break}return e?a.length:a?Q.error(t):w(t,l).slice(0)}function ct(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function dt(t,e,i){var n=e.dir,s=e.next,r=s||n,o=i&&"parentNode"===r,a=x++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,s);return!1}:function(e,i,l){var h,u,c=[v,a];if(l){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||o)if(u=e[y]||(e[y]={}),s&&C(e,s))e=e[n]||e;else{if((h=u[r])&&h[0]===v&&h[1]===a)return c[2]=h[2];if(u[r]=c,c[2]=t(e,i,l))return!0}return!1}}function ft(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function pt(t,e,i,n,s){for(var r,o=[],a=0,l=t.length,h=null!=e;a<l;a++)(r=t[a])&&(i&&!i(r,n,s)||(o.push(r),h&&e.push(a)));return o}function gt(t,e,i,n,s,r){return n&&!n[y]&&(n=gt(n)),s&&!s[y]&&(s=gt(s,r)),et((function(r,o,l,h){var u,c,d,f,p=[],g=[],y=o.length,v=r||function(t,e,i){for(var n=0,s=e.length;n<s;n++)Q(t,e[n],i);return i}(e||"*",l.nodeType?[l]:l,[]),x=!t||!r&&e?v:pt(v,p,t,l,h);if(i?i(x,f=s||(r?t:y||n)?[]:o,l,h):f=x,n)for(u=pt(f,g),n(u,[],l,h),c=u.length;c--;)(d=u[c])&&(f[g[c]]=!(x[g[c]]=d));if(r){if(s||t){if(s){for(u=[],c=f.length;c--;)(d=f[c])&&u.push(x[c]=d);s(null,f=[],u,h)}for(c=f.length;c--;)(d=f[c])&&(u=s?a.call(r,d):p[c])>-1&&(r[u]=!(o[u]=d))}}else f=pt(f===o?f.splice(y,f.length):f),s?s(null,o,f,h):m.apply(o,f)}))}function mt(t){for(var e,i,s,o=t.length,l=n.relative[t[0].type],h=l||n.relative[" "],u=l?1:0,c=dt((function(t){return t===e}),h,!0),d=dt((function(t){return a.call(e,t)>-1}),h,!0),f=[function(t,i,n){var s=!l&&(n||i!=r)||((e=i).nodeType?c(t,i,n):d(t,i,n));return e=null,s}];u<o;u++)if(i=n.relative[t[u].type])f=[dt(ft(f),i)];else{if((i=n.filter[t[u].type].apply(null,t[u].matches))[y]){for(s=++u;s<o&&!n.relative[t[s].type];s++);return gt(u>1&&ft(f),u>1&&ct(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(N,"$1"),i,u<s&&mt(t.slice(u,s)),s<o&&mt(t=t.slice(s)),s<o&&ct(t))}f.push(i)}return ft(f)}function yt(t,e){var i,s=[],o=[],a=S[t+" "];if(!a){for(e||(e=ut(t)),i=e.length;i--;)(a=mt(e[i]))[y]?s.push(a):o.push(a);a=S(t,function(t,e){var i=e.length>0,s=t.length>0,o=function(o,a,l,u,c){var f,p,g,y=0,x="0",b=o&&[],w=[],S=r,C=o||s&&n.find.TAG("*",c),T=v+=null==S?1:Math.random()||.1,A=C.length;for(c&&(r=a==h||a||c);x!==A&&null!=(f=C[x]);x++){if(s&&f){for(p=0,a||f.ownerDocument==h||(lt(f),l=!d);g=t[p++];)if(g(f,a||h,l)){m.call(u,f);break}c&&(v=T)}i&&((f=!g&&f)&&y--,o&&b.push(f))}if(y+=x,i&&x!==y){for(p=0;g=e[p++];)g(b,w,a,l);if(o){if(y>0)for(;x--;)b[x]||w[x]||(w[x]=M.call(u));w=pt(w)}m.apply(u,w),c&&!o&&w.length>0&&y+e.length>1&&k.uniqueSort(u)}return c&&(v=T,r=S),b};return i?et(o):o}(o,s)),a.selector=t}return a}function vt(t,e,i,s){var r,o,a,l,h,u="function"==typeof t&&t,c=!s&&ut(t=u.selector||t);if(i=i||[],1===c.length){if((o=c[0]=c[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===e.nodeType&&d&&n.relative[o[1].type]){if(!(e=(n.find.ID(a.matches[0].replace(X,K),e)||[])[0]))return i;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=Y.needsContext.test(t)?0:o.length;r--&&(a=o[r],!n.relative[l=a.type]);)if((h=n.find[l])&&(s=h(a.matches[0].replace(X,K),G.test(o[0].type)&&at(e.parentNode)||e))){if(o.splice(r,1),!(t=s.length&&ct(o)))return m.apply(i,s),i;break}}return(u||yt(t,c))(s,e,!d,i,!e||G.test(t)&&at(e.parentNode)||e),i}ht.prototype=n.filters=n.pseudos,n.setFilters=new ht,f.sortStable=y.split("").sort(L).join("")===y,lt(),f.sortDetached=it((function(t){return 1&t.compareDocumentPosition(h.createElement("fieldset"))})),k.find=Q,k.expr[":"]=k.expr.pseudos,k.unique=k.uniqueSort,Q.compile=yt,Q.select=vt,Q.setDocument=lt,Q.tokenize=ut,Q.escape=k.escapeSelector,Q.getText=k.text,Q.isXML=k.isXMLDoc,Q.selectors=k.expr,Q.support=k.support,Q.uniqueSort=k.uniqueSort}();var O=function(t,e,i){for(var n=[],s=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&k(t).is(i))break;n.push(t)}return n},F=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},R=k.expr.match.needsContext,I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function B(t,e,i){return p(e)?k.grep(t,(function(t,n){return!!e.call(t,n,t)!==i})):e.nodeType?k.grep(t,(function(t){return t===e!==i})):"string"!=typeof e?k.grep(t,(function(t){return a.call(e,t)>-1!==i})):k.filter(e,t,i)}k.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?k.find.matchesSelector(n,t)?[n]:[]:k.find.matches(t,k.grep(e,(function(t){return 1===t.nodeType})))},k.fn.extend({find:function(t){var e,i,n=this.length,s=this;if("string"!=typeof t)return this.pushStack(k(t).filter((function(){for(e=0;e<n;e++)if(k.contains(s[e],this))return!0})));for(i=this.pushStack([]),e=0;e<n;e++)k.find(t,s[e],i);return n>1?k.uniqueSort(i):i},filter:function(t){return this.pushStack(B(this,t||[],!1))},not:function(t){return this.pushStack(B(this,t||[],!0))},is:function(t){return!!B(this,"string"==typeof t&&R.test(t)?k(t):t||[],!1).length}});var j,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(t,e,i){var n,s;if(!t)return this;if(i=i||j,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:z.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof k?e[0]:e,k.merge(this,k.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:m,!0)),I.test(n[1])&&k.isPlainObject(e))for(n in e)p(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(s=m.getElementById(n[2]))&&(this[0]=s,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):p(t)?void 0!==i.ready?i.ready(t):t(k):k.makeArray(t,this)}).prototype=k.fn,j=k(m);var H=/^(?:parents|prev(?:Until|All))/,U={children:!0,contents:!0,next:!0,prev:!0};function V(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}k.fn.extend({has:function(t){var e=k(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(k.contains(this,e[t]))return!0}))},closest:function(t,e){var i,n=0,s=this.length,r=[],o="string"!=typeof t&&k(t);if(!R.test(t))for(;n<s;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&k.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(r.length>1?k.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?a.call(k(t),this[0]):a.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),k.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return O(t,"parentNode")},parentsUntil:function(t,e,i){return O(t,"parentNode",i)},next:function(t){return V(t,"nextSibling")},prev:function(t){return V(t,"previousSibling")},nextAll:function(t){return O(t,"nextSibling")},prevAll:function(t){return O(t,"previousSibling")},nextUntil:function(t,e,i){return O(t,"nextSibling",i)},prevUntil:function(t,e,i){return O(t,"previousSibling",i)},siblings:function(t){return F((t.parentNode||{}).firstChild,t)},children:function(t){return F(t.firstChild)},contents:function(t){return null!=t.contentDocument&&n(t.contentDocument)?t.contentDocument:(C(t,"template")&&(t=t.content||t),k.merge([],t.childNodes))}},(function(t,e){k.fn[t]=function(i,n){var s=k.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=k.filter(n,s)),this.length>1&&(U[t]||k.uniqueSort(s),H.test(t)&&s.reverse()),this.pushStack(s)}}));var Y=/[^\x20\t\r\n\f]+/g;function q(t){return t}function $(t){throw t}function W(t,e,i,n){var s;try{t&&p(s=t.promise)?s.call(t).done(e).fail(i):t&&p(s=t.then)?s.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}k.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return k.each(t.match(Y)||[],(function(t,i){e[i]=!0})),e}(t):k.extend({},t);var e,i,n,s,r=[],o=[],a=-1,l=function(){for(s=s||t.once,n=e=!0;o.length;a=-1)for(i=o.shift();++a<r.length;)!1===r[a].apply(i[0],i[1])&&t.stopOnFalse&&(a=r.length,i=!1);t.memory||(i=!1),e=!1,s&&(r=i?[]:"")},h={add:function(){return r&&(i&&!e&&(a=r.length-1,o.push(i)),function e(i){k.each(i,(function(i,n){p(n)?t.unique&&h.has(n)||r.push(n):n&&n.length&&"string"!==x(n)&&e(n)}))}(arguments),i&&!e&&l()),this},remove:function(){return k.each(arguments,(function(t,e){for(var i;(i=k.inArray(e,r,i))>-1;)r.splice(i,1),i<=a&&a--})),this},has:function(t){return t?k.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return s=o=[],r=i="",this},disabled:function(){return!r},lock:function(){return s=o=[],i||e||(r=i=""),this},locked:function(){return!!s},fireWith:function(t,i){return s||(i=[t,(i=i||[]).slice?i.slice():i],o.push(i),e||l()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},k.extend({Deferred:function(e){var i=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],n="pending",s={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var t=arguments;return k.Deferred((function(e){k.each(i,(function(i,n){var s=p(t[n[4]])&&t[n[4]];r[n[1]]((function(){var t=s&&s.apply(this,arguments);t&&p(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,s?[t]:arguments)}))})),t=null})).promise()},then:function(e,n,s){var r=0;function o(e,i,n,s){return function(){var a=this,l=arguments,h=function(){var t,h;if(!(e<r)){if((t=n.apply(a,l))===i.promise())throw new TypeError("Thenable self-resolution");h=t&&("object"==typeof t||"function"==typeof t)&&t.then,p(h)?s?h.call(t,o(r,i,q,s),o(r,i,$,s)):(r++,h.call(t,o(r,i,q,s),o(r,i,$,s),o(r,i,q,i.notifyWith))):(n!==q&&(a=void 0,l=[t]),(s||i.resolveWith)(a,l))}},u=s?h:function(){try{h()}catch(t){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(t,u.error),e+1>=r&&(n!==$&&(a=void 0,l=[t]),i.rejectWith(a,l))}};e?u():(k.Deferred.getErrorHook?u.error=k.Deferred.getErrorHook():k.Deferred.getStackHook&&(u.error=k.Deferred.getStackHook()),t.setTimeout(u))}}return k.Deferred((function(t){i[0][3].add(o(0,t,p(s)?s:q,t.notifyWith)),i[1][3].add(o(0,t,p(e)?e:q)),i[2][3].add(o(0,t,p(n)?n:$))})).promise()},promise:function(t){return null!=t?k.extend(t,s):s}},r={};return k.each(i,(function(t,e){var o=e[2],a=e[5];s[e[1]]=o.add,a&&o.add((function(){n=a}),i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),o.add(e[3].fire),r[e[0]]=function(){return r[e[0]+"With"](this===r?void 0:this,arguments),this},r[e[0]+"With"]=o.fireWith})),s.promise(r),e&&e.call(r,r),r},when:function(t){var e=arguments.length,i=e,n=Array(i),r=s.call(arguments),o=k.Deferred(),a=function(t){return function(i){n[t]=this,r[t]=arguments.length>1?s.call(arguments):i,--e||o.resolveWith(n,r)}};if(e<=1&&(W(t,o.done(a(i)).resolve,o.reject,!e),"pending"===o.state()||p(r[i]&&r[i].then)))return o.then();for(;i--;)W(r[i],a(i),o.reject);return o.promise()}});var G=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&G.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},k.readyException=function(e){t.setTimeout((function(){throw e}))};var X=k.Deferred();function K(){m.removeEventListener("DOMContentLoaded",K),t.removeEventListener("load",K),k.ready()}k.fn.ready=function(t){return X.then(t).catch((function(t){k.readyException(t)})),this},k.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--k.readyWait:k.isReady)||(k.isReady=!0,!0!==t&&--k.readyWait>0||X.resolveWith(m,[k]))}}),k.ready.then=X.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?t.setTimeout(k.ready):(m.addEventListener("DOMContentLoaded",K),t.addEventListener("load",K));var J=function(t,e,i,n,s,r,o){var a=0,l=t.length,h=null==i;if("object"===x(i))for(a in s=!0,i)J(t,e,a,i[a],!0,r,o);else if(void 0!==n&&(s=!0,p(n)||(o=!0),h&&(o?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(k(t),i)})),e))for(;a<l;a++)e(t[a],i,o?n:n.call(t[a],a,e(t[a],i)));return s?t:h?e.call(t):l?e(t[0],i):r},Z=/^-ms-/,Q=/-([a-z])/g;function tt(t,e){return e.toUpperCase()}function et(t){return t.replace(Z,"ms-").replace(Q,tt)}var it=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function nt(){this.expando=k.expando+nt.uid++}nt.uid=1,nt.prototype={cache:function(t){var e=t[this.expando];return e||(e={},it(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,s=this.cache(t);if("string"==typeof e)s[et(e)]=i;else for(n in e)s[et(n)]=e[n];return s},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][et(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(et):(e=et(e))in n?[e]:e.match(Y)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||k.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!k.isEmptyObject(e)}};var st=new nt,rt=new nt,ot=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,at=/[A-Z]/g;function lt(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(at,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:ot.test(t)?JSON.parse(t):t)}(i)}catch(t){}rt.set(t,e,i)}else i=void 0;return i}k.extend({hasData:function(t){return rt.hasData(t)||st.hasData(t)},data:function(t,e,i){return rt.access(t,e,i)},removeData:function(t,e){rt.remove(t,e)},_data:function(t,e,i){return st.access(t,e,i)},_removeData:function(t,e){st.remove(t,e)}}),k.fn.extend({data:function(t,e){var i,n,s,r=this[0],o=r&&r.attributes;if(void 0===t){if(this.length&&(s=rt.get(r),1===r.nodeType&&!st.get(r,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&(n=et(n.slice(5)),lt(r,n,s[n]));st.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each((function(){rt.set(this,t)})):J(this,(function(e){var i;if(r&&void 0===e)return void 0!==(i=rt.get(r,t))||void 0!==(i=lt(r,t))?i:void 0;this.each((function(){rt.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){rt.remove(this,t)}))}}),k.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=st.get(t,e),i&&(!n||Array.isArray(i)?n=st.access(t,e,k.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=k.queue(t,e),n=i.length,s=i.shift(),r=k._queueHooks(t,e);"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete r.stop,s.call(t,(function(){k.dequeue(t,e)}),r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return st.get(t,i)||st.access(t,i,{empty:k.Callbacks("once memory").add((function(){st.remove(t,[e+"queue",i])}))})}}),k.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?k.queue(this[0],t):void 0===e?this:this.each((function(){var i=k.queue(this,t,e);k._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&k.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){k.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=k.Deferred(),r=this,o=this.length,a=function(){--n||s.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(i=st.get(r[o],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var ht=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ut=new RegExp("^(?:([+-])=|)("+ht+")([a-z%]*)$","i"),ct=["Top","Right","Bottom","Left"],dt=m.documentElement,ft=function(t){return k.contains(t.ownerDocument,t)},pt={composed:!0};dt.getRootNode&&(ft=function(t){return k.contains(t.ownerDocument,t)||t.getRootNode(pt)===t.ownerDocument});var gt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ft(t)&&"none"===k.css(t,"display")};function mt(t,e,i,n){var s,r,o=20,a=n?function(){return n.cur()}:function(){return k.css(t,e,"")},l=a(),h=i&&i[3]||(k.cssNumber[e]?"":"px"),u=t.nodeType&&(k.cssNumber[e]||"px"!==h&&+l)&&ut.exec(k.css(t,e));if(u&&u[3]!==h){for(l/=2,h=h||u[3],u=+l||1;o--;)k.style(t,e,u+h),(1-r)*(1-(r=a()/l||.5))<=0&&(o=0),u/=r;u*=2,k.style(t,e,u+h),i=i||[]}return i&&(u=+u||+l||0,s=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=u,n.end=s)),s}var yt={};function vt(t){var e,i=t.ownerDocument,n=t.nodeName,s=yt[n];return s||(e=i.body.appendChild(i.createElement(n)),s=k.css(e,"display"),e.parentNode.removeChild(e),"none"===s&&(s="block"),yt[n]=s,s)}function xt(t,e){for(var i,n,s=[],r=0,o=t.length;r<o;r++)(n=t[r]).style&&(i=n.style.display,e?("none"===i&&(s[r]=st.get(n,"display")||null,s[r]||(n.style.display="")),""===n.style.display&&gt(n)&&(s[r]=vt(n))):"none"!==i&&(s[r]="none",st.set(n,"display",i)));for(r=0;r<o;r++)null!=s[r]&&(t[r].style.display=s[r]);return t}k.fn.extend({show:function(){return xt(this,!0)},hide:function(){return xt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){gt(this)?k(this).show():k(this).hide()}))}});var bt,wt,kt=/^(?:checkbox|radio)$/i,St=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ct=/^$|^module$|\/(?:java|ecma)script/i;bt=m.createDocumentFragment().appendChild(m.createElement("div")),(wt=m.createElement("input")).setAttribute("type","radio"),wt.setAttribute("checked","checked"),wt.setAttribute("name","t"),bt.appendChild(wt),f.checkClone=bt.cloneNode(!0).cloneNode(!0).lastChild.checked,bt.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!bt.cloneNode(!0).lastChild.defaultValue,bt.innerHTML="<option></option>",f.option=!!bt.lastChild;var Mt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Tt(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&C(t,e)?k.merge([t],i):i}function At(t,e){for(var i=0,n=t.length;i<n;i++)st.set(t[i],"globalEval",!e||st.get(e[i],"globalEval"))}Mt.tbody=Mt.tfoot=Mt.colgroup=Mt.caption=Mt.thead,Mt.th=Mt.td,f.option||(Mt.optgroup=Mt.option=[1,"<select multiple='multiple'>","</select>"]);var Pt=/<|&#?\w+;/;function Nt(t,e,i,n,s){for(var r,o,a,l,h,u,c=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((r=t[f])||0===r)if("object"===x(r))k.merge(d,r.nodeType?[r]:r);else if(Pt.test(r)){for(o=o||c.appendChild(e.createElement("div")),a=(St.exec(r)||["",""])[1].toLowerCase(),l=Mt[a]||Mt._default,o.innerHTML=l[1]+k.htmlPrefilter(r)+l[2],u=l[0];u--;)o=o.lastChild;k.merge(d,o.childNodes),(o=c.firstChild).textContent=""}else d.push(e.createTextNode(r));for(c.textContent="",f=0;r=d[f++];)if(n&&k.inArray(r,n)>-1)s&&s.push(r);else if(h=ft(r),o=Tt(c.appendChild(r),"script"),h&&At(o),i)for(u=0;r=o[u++];)Ct.test(r.type||"")&&i.push(r);return c}var Dt=/^([^.]*)(?:\.(.+)|)/;function Lt(){return!0}function Et(){return!1}function _t(t,e,i,n,s,r){var o,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)_t(t,a,i,n,e[a],r);return t}if(null==n&&null==s?(s=i,n=i=void 0):null==s&&("string"==typeof i?(s=n,n=void 0):(s=n,n=i,i=void 0)),!1===s)s=Et;else if(!s)return t;return 1===r&&(o=s,s=function(t){return k().off(t),o.apply(this,arguments)},s.guid=o.guid||(o.guid=k.guid++)),t.each((function(){k.event.add(this,e,s,n,i)}))}function Ot(t,e,i){i?(st.set(t,e,!1),k.event.add(t,e,{namespace:!1,handler:function(t){var i,n=st.get(this,e);if(1&t.isTrigger&&this[e]){if(n)(k.event.special[e]||{}).delegateType&&t.stopPropagation();else if(n=s.call(arguments),st.set(this,e,n),this[e](),i=st.get(this,e),st.set(this,e,!1),n!==i)return t.stopImmediatePropagation(),t.preventDefault(),i}else n&&(st.set(this,e,k.event.trigger(n[0],n.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Lt)}})):void 0===st.get(t,e)&&k.event.add(t,e,Lt)}k.event={global:{},add:function(t,e,i,n,s){var r,o,a,l,h,u,c,d,f,p,g,m=st.get(t);if(it(t))for(i.handler&&(i=(r=i).handler,s=r.selector),s&&k.find.matchesSelector(dt,s),i.guid||(i.guid=k.guid++),(l=m.events)||(l=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(e){return void 0!==k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),h=(e=(e||"").match(Y)||[""]).length;h--;)f=g=(a=Dt.exec(e[h])||[])[1],p=(a[2]||"").split(".").sort(),f&&(c=k.event.special[f]||{},f=(s?c.delegateType:c.bindType)||f,c=k.event.special[f]||{},u=k.extend({type:f,origType:g,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&k.expr.match.needsContext.test(s),namespace:p.join(".")},r),(d=l[f])||((d=l[f]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,n,p,o)||t.addEventListener&&t.addEventListener(f,o)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),s?d.splice(d.delegateCount++,0,u):d.push(u),k.event.global[f]=!0)},remove:function(t,e,i,n,s){var r,o,a,l,h,u,c,d,f,p,g,m=st.hasData(t)&&st.get(t);if(m&&(l=m.events)){for(h=(e=(e||"").match(Y)||[""]).length;h--;)if(f=g=(a=Dt.exec(e[h])||[])[1],p=(a[2]||"").split(".").sort(),f){for(c=k.event.special[f]||{},d=l[f=(n?c.delegateType:c.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=d.length;r--;)u=d[r],!s&&g!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,c.remove&&c.remove.call(t,u));o&&!d.length&&(c.teardown&&!1!==c.teardown.call(t,p,m.handle)||k.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)k.event.remove(t,f+e[h],i,n,!0);k.isEmptyObject(l)&&st.remove(t,"handle events")}},dispatch:function(t){var e,i,n,s,r,o,a=new Array(arguments.length),l=k.event.fix(t),h=(st.get(this,"events")||Object.create(null))[l.type]||[],u=k.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(o=k.event.handlers.call(this,l,h),e=0;(s=o[e++])&&!l.isPropagationStopped();)for(l.currentTarget=s.elem,i=0;(r=s.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(n=((k.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,a))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(t,e){var i,n,s,r,o,a=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&t.button>=1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(r=[],o={},i=0;i<l;i++)void 0===o[s=(n=e[i]).selector+" "]&&(o[s]=n.needsContext?k(s,this).index(h)>-1:k.find(s,this,null,[h]).length),o[s]&&r.push(n);r.length&&a.push({elem:h,handlers:r})}return h=this,l<e.length&&a.push({elem:h,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:p(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[k.expando]?t:new k.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return kt.test(e.type)&&e.click&&C(e,"input")&&Ot(e,"click",!0),!1},trigger:function(t){var e=this||t;return kt.test(e.type)&&e.click&&C(e,"input")&&Ot(e,"click"),!0},_default:function(t){var e=t.target;return kt.test(e.type)&&e.click&&C(e,"input")&&st.get(e,"click")||C(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},k.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},k.Event=function(t,e){if(!(this instanceof k.Event))return new k.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Lt:Et,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&k.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Et,isPropagationStopped:Et,isImmediatePropagationStopped:Et,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Lt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Lt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Lt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},(function(t,e){function i(t){if(m.documentMode){var i=st.get(this,"handle"),n=k.event.fix(t);n.type="focusin"===t.type?"focus":"blur",n.isSimulated=!0,i(t),n.target===n.currentTarget&&i(n)}else k.event.simulate(e,t.target,k.event.fix(t))}k.event.special[t]={setup:function(){var n;if(Ot(this,t,!0),!m.documentMode)return!1;(n=st.get(this,e))||this.addEventListener(e,i),st.set(this,e,(n||0)+1)},trigger:function(){return Ot(this,t),!0},teardown:function(){var t;if(!m.documentMode)return!1;(t=st.get(this,e)-1)?st.set(this,e,t):(this.removeEventListener(e,i),st.remove(this,e))},_default:function(e){return st.get(e.target,t)},delegateType:e},k.event.special[e]={setup:function(){var n=this.ownerDocument||this.document||this,s=m.documentMode?this:n,r=st.get(s,e);r||(m.documentMode?this.addEventListener(e,i):n.addEventListener(t,i,!0)),st.set(s,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,s=m.documentMode?this:n,r=st.get(s,e)-1;r?st.set(s,e,r):(m.documentMode?this.removeEventListener(e,i):n.removeEventListener(t,i,!0),st.remove(s,e))}}})),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){k.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=t.relatedTarget,s=t.handleObj;return n&&(n===this||k.contains(this,n))||(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}})),k.fn.extend({on:function(t,e,i,n){return _t(this,t,e,i,n)},one:function(t,e,i,n){return _t(this,t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,k(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=Et),this.each((function(){k.event.remove(this,t,i,e)}))}});var Ft=/<script|<style|<link/i,Rt=/checked\s*(?:[^=]|=\s*.checked.)/i,It=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Bt(t,e){return C(t,"table")&&C(11!==e.nodeType?e:e.firstChild,"tr")&&k(t).children("tbody")[0]||t}function jt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function zt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ht(t,e){var i,n,s,r,o,a;if(1===e.nodeType){if(st.hasData(t)&&(a=st.get(t).events))for(s in st.remove(e,"handle events"),a)for(i=0,n=a[s].length;i<n;i++)k.event.add(e,s,a[s][i]);rt.hasData(t)&&(r=rt.access(t),o=k.extend({},r),rt.set(e,o))}}function Ut(t,e){var i=e.nodeName.toLowerCase();"input"===i&&kt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Vt(t,e,i,n){e=r(e);var s,o,a,l,h,u,c=0,d=t.length,g=d-1,m=e[0],y=p(m);if(y||d>1&&"string"==typeof m&&!f.checkClone&&Rt.test(m))return t.each((function(s){var r=t.eq(s);y&&(e[0]=m.call(this,s,r.html())),Vt(r,e,i,n)}));if(d&&(o=(s=Nt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===s.childNodes.length&&(s=o),o||n)){for(l=(a=k.map(Tt(s,"script"),jt)).length;c<d;c++)h=s,c!==g&&(h=k.clone(h,!0,!0),l&&k.merge(a,Tt(h,"script"))),i.call(t[c],h,c);if(l)for(u=a[a.length-1].ownerDocument,k.map(a,zt),c=0;c<l;c++)h=a[c],Ct.test(h.type||"")&&!st.access(h,"globalEval")&&k.contains(u,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?k._evalUrl&&!h.noModule&&k._evalUrl(h.src,{nonce:h.nonce||h.getAttribute("nonce")},u):v(h.textContent.replace(It,""),h,u))}return t}function Yt(t,e,i){for(var n,s=e?k.filter(e,t):t,r=0;null!=(n=s[r]);r++)i||1!==n.nodeType||k.cleanData(Tt(n)),n.parentNode&&(i&&ft(n)&&At(Tt(n,"script")),n.parentNode.removeChild(n));return t}k.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var n,s,r,o,a=t.cloneNode(!0),l=ft(t);if(!(f.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||k.isXMLDoc(t)))for(o=Tt(a),n=0,s=(r=Tt(t)).length;n<s;n++)Ut(r[n],o[n]);if(e)if(i)for(r=r||Tt(t),o=o||Tt(a),n=0,s=r.length;n<s;n++)Ht(r[n],o[n]);else Ht(t,a);return(o=Tt(a,"script")).length>0&&At(o,!l&&Tt(t,"script")),a},cleanData:function(t){for(var e,i,n,s=k.event.special,r=0;void 0!==(i=t[r]);r++)if(it(i)){if(e=i[st.expando]){if(e.events)for(n in e.events)s[n]?k.event.remove(i,n):k.removeEvent(i,n,e.handle);i[st.expando]=void 0}i[rt.expando]&&(i[rt.expando]=void 0)}}}),k.fn.extend({detach:function(t){return Yt(this,t,!0)},remove:function(t){return Yt(this,t)},text:function(t){return J(this,(function(t){return void 0===t?k.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Vt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Bt(this,t).appendChild(t)}))},prepend:function(){return Vt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Bt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Vt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Vt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(k.cleanData(Tt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return k.clone(this,t,e)}))},html:function(t){return J(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ft.test(t)&&!Mt[(St.exec(t)||["",""])[1].toLowerCase()]){t=k.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(k.cleanData(Tt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Vt(this,arguments,(function(e){var i=this.parentNode;k.inArray(this,t)<0&&(k.cleanData(Tt(this)),i&&i.replaceChild(e,this))}),t)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){k.fn[t]=function(t){for(var i,n=[],s=k(t),r=s.length-1,a=0;a<=r;a++)i=a===r?this:this.clone(!0),k(s[a])[e](i),o.apply(n,i.get());return this.pushStack(n)}}));var qt=new RegExp("^("+ht+")(?!px)[a-z%]+$","i"),$t=/^--/,Wt=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},Gt=function(t,e,i){var n,s,r={};for(s in e)r[s]=t.style[s],t.style[s]=e[s];for(s in n=i.call(t),e)t.style[s]=r[s];return n},Xt=new RegExp(ct.join("|"),"i");function Kt(t,e,i){var n,s,r,o,a=$t.test(e),l=t.style;return(i=i||Wt(t))&&(o=i.getPropertyValue(e)||i[e],a&&o&&(o=o.replace(N,"$1")||void 0),""!==o||ft(t)||(o=k.style(t,e)),!f.pixelBoxStyles()&&qt.test(o)&&Xt.test(e)&&(n=l.width,s=l.minWidth,r=l.maxWidth,l.minWidth=l.maxWidth=l.width=o,o=i.width,l.width=n,l.minWidth=s,l.maxWidth=r)),void 0!==o?o+"":o}function Jt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){h.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",dt.appendChild(h).appendChild(u);var e=t.getComputedStyle(u);n="1%"!==e.top,l=12===i(e.marginLeft),u.style.right="60%",o=36===i(e.right),s=36===i(e.width),u.style.position="absolute",r=12===i(u.offsetWidth/3),dt.removeChild(h),u=null}}function i(t){return Math.round(parseFloat(t))}var n,s,r,o,a,l,h=m.createElement("div"),u=m.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(f,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),r},reliableTrDimensions:function(){var e,i,n,s;return null==a&&(e=m.createElement("table"),i=m.createElement("tr"),n=m.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",i.style.cssText="box-sizing:content-box;border:1px solid",i.style.height="1px",n.style.height="9px",n.style.display="block",dt.appendChild(e).appendChild(i).appendChild(n),s=t.getComputedStyle(i),a=parseInt(s.height,10)+parseInt(s.borderTopWidth,10)+parseInt(s.borderBottomWidth,10)===i.offsetHeight,dt.removeChild(e)),a}}))}();var Zt=["Webkit","Moz","ms"],Qt=m.createElement("div").style,te={};function ee(t){var e=k.cssProps[t]||te[t];return e||(t in Qt?t:te[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=Zt.length;i--;)if((t=Zt[i]+e)in Qt)return t}(t)||t)}var ie=/^(none|table(?!-c[ea]).+)/,ne={position:"absolute",visibility:"hidden",display:"block"},se={letterSpacing:"0",fontWeight:"400"};function re(t,e,i){var n=ut.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function oe(t,e,i,n,s,r){var o="width"===e?1:0,a=0,l=0,h=0;if(i===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===i&&(h+=k.css(t,i+ct[o],!0,s)),n?("content"===i&&(l-=k.css(t,"padding"+ct[o],!0,s)),"margin"!==i&&(l-=k.css(t,"border"+ct[o]+"Width",!0,s))):(l+=k.css(t,"padding"+ct[o],!0,s),"padding"!==i?l+=k.css(t,"border"+ct[o]+"Width",!0,s):a+=k.css(t,"border"+ct[o]+"Width",!0,s));return!n&&r>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-a-.5))||0),l+h}function ae(t,e,i){var n=Wt(t),s=(!f.boxSizingReliable()||i)&&"border-box"===k.css(t,"boxSizing",!1,n),r=s,o=Kt(t,e,n),a="offset"+e[0].toUpperCase()+e.slice(1);if(qt.test(o)){if(!i)return o;o="auto"}return(!f.boxSizingReliable()&&s||!f.reliableTrDimensions()&&C(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===k.css(t,"display",!1,n))&&t.getClientRects().length&&(s="border-box"===k.css(t,"boxSizing",!1,n),(r=a in t)&&(o=t[a])),(o=parseFloat(o)||0)+oe(t,e,i||(s?"border":"content"),r,n,o)+"px"}function le(t,e,i,n,s){return new le.prototype.init(t,e,i,n,s)}k.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Kt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,r,o,a=et(e),l=$t.test(e),h=t.style;if(l||(e=ee(a)),o=k.cssHooks[e]||k.cssHooks[a],void 0===i)return o&&"get"in o&&void 0!==(s=o.get(t,!1,n))?s:h[e];"string"===(r=typeof i)&&(s=ut.exec(i))&&s[1]&&(i=mt(t,e,s),r="number"),null!=i&&i==i&&("number"!==r||l||(i+=s&&s[3]||(k.cssNumber[a]?"":"px")),f.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),o&&"set"in o&&void 0===(i=o.set(t,i,n))||(l?h.setProperty(e,i):h[e]=i))}},css:function(t,e,i,n){var s,r,o,a=et(e);return $t.test(e)||(e=ee(a)),(o=k.cssHooks[e]||k.cssHooks[a])&&"get"in o&&(s=o.get(t,!0,i)),void 0===s&&(s=Kt(t,e,n)),"normal"===s&&e in se&&(s=se[e]),""===i||i?(r=parseFloat(s),!0===i||isFinite(r)?r||0:s):s}}),k.each(["height","width"],(function(t,e){k.cssHooks[e]={get:function(t,i,n){if(i)return!ie.test(k.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ae(t,e,n):Gt(t,ne,(function(){return ae(t,e,n)}))},set:function(t,i,n){var s,r=Wt(t),o=!f.scrollboxSize()&&"absolute"===r.position,a=(o||n)&&"border-box"===k.css(t,"boxSizing",!1,r),l=n?oe(t,e,n,a,r):0;return a&&o&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-oe(t,e,"border",!1,r)-.5)),l&&(s=ut.exec(i))&&"px"!==(s[3]||"px")&&(t.style[e]=i,i=k.css(t,e)),re(0,i,l)}}})),k.cssHooks.marginLeft=Jt(f.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Kt(t,"marginLeft"))||t.getBoundingClientRect().left-Gt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),k.each({margin:"",padding:"",border:"Width"},(function(t,e){k.cssHooks[t+e]={expand:function(i){for(var n=0,s={},r="string"==typeof i?i.split(" "):[i];n<4;n++)s[t+ct[n]+e]=r[n]||r[n-2]||r[0];return s}},"margin"!==t&&(k.cssHooks[t+e].set=re)})),k.fn.extend({css:function(t,e){return J(this,(function(t,e,i){var n,s,r={},o=0;if(Array.isArray(e)){for(n=Wt(t),s=e.length;o<s;o++)r[e[o]]=k.css(t,e[o],!1,n);return r}return void 0!==i?k.style(t,e,i):k.css(t,e)}),t,e,arguments.length>1)}}),k.Tween=le,le.prototype={constructor:le,init:function(t,e,i,n,s,r){this.elem=t,this.prop=i,this.easing=s||k.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(k.cssNumber[i]?"":"px")},cur:function(){var t=le.propHooks[this.prop];return t&&t.get?t.get(this):le.propHooks._default.get(this)},run:function(t){var e,i=le.propHooks[this.prop];return this.options.duration?this.pos=e=k.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):le.propHooks._default.set(this),this}},le.prototype.init.prototype=le.prototype,le.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=k.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){k.fx.step[t.prop]?k.fx.step[t.prop](t):1!==t.elem.nodeType||!k.cssHooks[t.prop]&&null==t.elem.style[ee(t.prop)]?t.elem[t.prop]=t.now:k.style(t.elem,t.prop,t.now+t.unit)}}},le.propHooks.scrollTop=le.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},k.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},k.fx=le.prototype.init,k.fx.step={};var he,ue,ce=/^(?:toggle|show|hide)$/,de=/queueHooks$/;function fe(){ue&&(!1===m.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(fe):t.setTimeout(fe,k.fx.interval),k.fx.tick())}function pe(){return t.setTimeout((function(){he=void 0})),he=Date.now()}function ge(t,e){var i,n=0,s={height:t};for(e=e?1:0;n<4;n+=2-e)s["margin"+(i=ct[n])]=s["padding"+i]=t;return e&&(s.opacity=s.width=t),s}function me(t,e,i){for(var n,s=(ye.tweeners[e]||[]).concat(ye.tweeners["*"]),r=0,o=s.length;r<o;r++)if(n=s[r].call(i,e,t))return n}function ye(t,e,i){var n,s,r=0,o=ye.prefilters.length,a=k.Deferred().always((function(){delete l.elem})),l=function(){if(s)return!1;for(var e=he||pe(),i=Math.max(0,h.startTime+h.duration-e),n=1-(i/h.duration||0),r=0,o=h.tweens.length;r<o;r++)h.tweens[r].run(n);return a.notifyWith(t,[h,n,i]),n<1&&o?i:(o||a.notifyWith(t,[h,1,0]),a.resolveWith(t,[h]),!1)},h=a.promise({elem:t,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},i),originalProperties:e,originalOptions:i,startTime:he||pe(),duration:i.duration,tweens:[],createTween:function(e,i){var n=k.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)h.tweens[i].run(1);return e?(a.notifyWith(t,[h,1,0]),a.resolveWith(t,[h,e])):a.rejectWith(t,[h,e]),this}}),u=h.props;for(!function(t,e){var i,n,s,r,o;for(i in t)if(s=e[n=et(i)],r=t[i],Array.isArray(r)&&(s=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),(o=k.cssHooks[n])&&"expand"in o)for(i in r=o.expand(r),delete t[n],r)i in t||(t[i]=r[i],e[i]=s);else e[n]=s}(u,h.opts.specialEasing);r<o;r++)if(n=ye.prefilters[r].call(h,t,u,h.opts))return p(n.stop)&&(k._queueHooks(h.elem,h.opts.queue).stop=n.stop.bind(n)),n;return k.map(u,me,h),p(h.opts.start)&&h.opts.start.call(t,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),k.fx.timer(k.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h}k.Animation=k.extend(ye,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return mt(i.elem,t,ut.exec(e),i),i}]},tweener:function(t,e){p(t)?(e=t,t=["*"]):t=t.match(Y);for(var i,n=0,s=t.length;n<s;n++)i=t[n],ye.tweeners[i]=ye.tweeners[i]||[],ye.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,s,r,o,a,l,h,u,c="width"in e||"height"in e,d=this,f={},p=t.style,g=t.nodeType&&gt(t),m=st.get(t,"fxshow");for(n in i.queue||(null==(o=k._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,k.queue(t,"fx").length||o.empty.fire()}))}))),e)if(s=e[n],ce.test(s)){if(delete e[n],r=r||"toggle"===s,s===(g?"hide":"show")){if("show"!==s||!m||void 0===m[n])continue;g=!0}f[n]=m&&m[n]||k.style(t,n)}if((l=!k.isEmptyObject(e))||!k.isEmptyObject(f))for(n in c&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(h=m&&m.display)&&(h=st.get(t,"display")),"none"===(u=k.css(t,"display"))&&(h?u=h:(xt([t],!0),h=t.style.display||h,u=k.css(t,"display"),xt([t]))),("inline"===u||"inline-block"===u&&null!=h)&&"none"===k.css(t,"float")&&(l||(d.done((function(){p.display=h})),null==h&&(u=p.display,h="none"===u?"":u)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}))),l=!1,f)l||(m?"hidden"in m&&(g=m.hidden):m=st.access(t,"fxshow",{display:h}),r&&(m.hidden=!g),g&&xt([t],!0),d.done((function(){for(n in g||xt([t]),st.remove(t,"fxshow"),f)k.style(t,n,f[n])}))),l=me(g?m[n]:0,n,d),n in m||(m[n]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ye.prefilters.unshift(t):ye.prefilters.push(t)}}),k.speed=function(t,e,i){var n=t&&"object"==typeof t?k.extend({},t):{complete:i||!i&&e||p(t)&&t,duration:t,easing:i&&e||e&&!p(e)&&e};return k.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in k.fx.speeds?n.duration=k.fx.speeds[n.duration]:n.duration=k.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){p(n.old)&&n.old.call(this),n.queue&&k.dequeue(this,n.queue)},n},k.fn.extend({fadeTo:function(t,e,i,n){return this.filter(gt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=k.isEmptyObject(t),r=k.speed(e,i,n),o=function(){var e=ye(this,k.extend({},t),r);(s||st.get(this,"finish"))&&e.stop(!0)};return o.finish=o,s||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,s=null!=t&&t+"queueHooks",r=k.timers,o=st.get(this);if(s)o[s]&&o[s].stop&&n(o[s]);else for(s in o)o[s]&&o[s].stop&&de.test(s)&&n(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=t&&r[s].queue!==t||(r[s].anim.stop(i),e=!1,r.splice(s,1));!e&&i||k.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=st.get(this),n=i[t+"queue"],s=i[t+"queueHooks"],r=k.timers,o=n?n.length:0;for(i.finish=!0,k.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),k.each(["toggle","show","hide"],(function(t,e){var i=k.fn[e];k.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ge(e,!0),t,n,s)}})),k.each({slideDown:ge("show"),slideUp:ge("hide"),slideToggle:ge("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){k.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),k.timers=[],k.fx.tick=function(){var t,e=0,i=k.timers;for(he=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||k.fx.stop(),he=void 0},k.fx.timer=function(t){k.timers.push(t),k.fx.start()},k.fx.interval=13,k.fx.start=function(){ue||(ue=!0,fe())},k.fx.stop=function(){ue=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(e,i){return e=k.fx&&k.fx.speeds[e]||e,i=i||"fx",this.queue(i,(function(i,n){var s=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(s)}}))},function(){var t=m.createElement("input"),e=m.createElement("select").appendChild(m.createElement("option"));t.type="checkbox",f.checkOn=""!==t.value,f.optSelected=e.selected,(t=m.createElement("input")).value="t",t.type="radio",f.radioValue="t"===t.value}();var ve,xe=k.expr.attrHandle;k.fn.extend({attr:function(t,e){return J(this,k.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){k.removeAttr(this,t)}))}}),k.extend({attr:function(t,e,i){var n,s,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?k.prop(t,e,i):(1===r&&k.isXMLDoc(t)||(s=k.attrHooks[e.toLowerCase()]||(k.expr.match.bool.test(e)?ve:void 0)),void 0!==i?null===i?void k.removeAttr(t,e):s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:(t.setAttribute(e,i+""),i):s&&"get"in s&&null!==(n=s.get(t,e))?n:null==(n=k.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!f.radioValue&&"radio"===e&&C(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,s=e&&e.match(Y);if(s&&1===t.nodeType)for(;i=s[n++];)t.removeAttribute(i)}}),ve={set:function(t,e,i){return!1===e?k.removeAttr(t,i):t.setAttribute(i,i),i}},k.each(k.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=xe[e]||k.find.attr;xe[e]=function(t,e,n){var s,r,o=e.toLowerCase();return n||(r=xe[o],xe[o]=s,s=null!=i(t,e,n)?o:null,xe[o]=r),s}}));var be=/^(?:input|select|textarea|button)$/i,we=/^(?:a|area)$/i;function ke(t){return(t.match(Y)||[]).join(" ")}function Se(t){return t.getAttribute&&t.getAttribute("class")||""}function Ce(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(Y)||[]}k.fn.extend({prop:function(t,e){return J(this,k.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[k.propFix[t]||t]}))}}),k.extend({prop:function(t,e,i){var n,s,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&k.isXMLDoc(t)||(e=k.propFix[e]||e,s=k.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=k.find.attr(t,"tabindex");return e?parseInt(e,10):be.test(t.nodeName)||we.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(k.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){k.propFix[this.toLowerCase()]=this})),k.fn.extend({addClass:function(t){var e,i,n,s,r,o;return p(t)?this.each((function(e){k(this).addClass(t.call(this,e,Se(this)))})):(e=Ce(t)).length?this.each((function(){if(n=Se(this),i=1===this.nodeType&&" "+ke(n)+" "){for(r=0;r<e.length;r++)s=e[r],i.indexOf(" "+s+" ")<0&&(i+=s+" ");o=ke(i),n!==o&&this.setAttribute("class",o)}})):this},removeClass:function(t){var e,i,n,s,r,o;return p(t)?this.each((function(e){k(this).removeClass(t.call(this,e,Se(this)))})):arguments.length?(e=Ce(t)).length?this.each((function(){if(n=Se(this),i=1===this.nodeType&&" "+ke(n)+" "){for(r=0;r<e.length;r++)for(s=e[r];i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");o=ke(i),n!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(t,e){var i,n,s,r,o=typeof t,a="string"===o||Array.isArray(t);return p(t)?this.each((function(i){k(this).toggleClass(t.call(this,i,Se(this),e),e)})):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(i=Ce(t),this.each((function(){if(a)for(r=k(this),s=0;s<i.length;s++)n=i[s],r.hasClass(n)?r.removeClass(n):r.addClass(n);else void 0!==t&&"boolean"!==o||((n=Se(this))&&st.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===t?"":st.get(this,"__className__")||""))})))},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+ke(Se(i))+" ").indexOf(e)>-1)return!0;return!1}});var Me=/\r/g;k.fn.extend({val:function(t){var e,i,n,s=this[0];return arguments.length?(n=p(t),this.each((function(i){var s;1===this.nodeType&&(null==(s=n?t.call(this,i,k(this).val()):t)?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=k.map(s,(function(t){return null==t?"":t+""}))),(e=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))}))):s?(e=k.valHooks[s.type]||k.valHooks[s.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:"string"==typeof(i=s.value)?i.replace(Me,""):null==i?"":i:void 0}}),k.extend({valHooks:{option:{get:function(t){var e=k.find.attr(t,"value");return null!=e?e:ke(k.text(t))}},select:{get:function(t){var e,i,n,s=t.options,r=t.selectedIndex,o="select-one"===t.type,a=o?null:[],l=o?r+1:s.length;for(n=r<0?l:o?r:0;n<l;n++)if(((i=s[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!C(i.parentNode,"optgroup"))){if(e=k(i).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var i,n,s=t.options,r=k.makeArray(e),o=s.length;o--;)((n=s[o]).selected=k.inArray(k.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),k.each(["radio","checkbox"],(function(){k.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=k.inArray(k(t).val(),e)>-1}},f.checkOn||(k.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Te=t.location,Ae={guid:Date.now()},Pe=/\?/;k.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){}return n=i&&i.getElementsByTagName("parsererror")[0],i&&!n||k.error("Invalid XML: "+(n?k.map(n.childNodes,(function(t){return t.textContent})).join("\n"):e)),i};var Ne=/^(?:focusinfocus|focusoutblur)$/,De=function(t){t.stopPropagation()};k.extend(k.event,{trigger:function(e,i,n,s){var r,o,a,l,h,c,d,f,y=[n||m],v=u.call(e,"type")?e.type:e,x=u.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||m,3!==n.nodeType&&8!==n.nodeType&&!Ne.test(v+k.event.triggered)&&(v.indexOf(".")>-1&&(x=v.split("."),v=x.shift(),x.sort()),h=v.indexOf(":")<0&&"on"+v,(e=e[k.expando]?e:new k.Event(v,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=x.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:k.makeArray(i,[e]),d=k.event.special[v]||{},s||!d.trigger||!1!==d.trigger.apply(n,i))){if(!s&&!d.noBubble&&!g(n)){for(l=d.delegateType||v,Ne.test(l+v)||(o=o.parentNode);o;o=o.parentNode)y.push(o),a=o;a===(n.ownerDocument||m)&&y.push(a.defaultView||a.parentWindow||t)}for(r=0;(o=y[r++])&&!e.isPropagationStopped();)f=o,e.type=r>1?l:d.bindType||v,(c=(st.get(o,"events")||Object.create(null))[e.type]&&st.get(o,"handle"))&&c.apply(o,i),(c=h&&o[h])&&c.apply&&it(o)&&(e.result=c.apply(o,i),!1===e.result&&e.preventDefault());return e.type=v,s||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(y.pop(),i)||!it(n)||h&&p(n[v])&&!g(n)&&((a=n[h])&&(n[h]=null),k.event.triggered=v,e.isPropagationStopped()&&f.addEventListener(v,De),n[v](),e.isPropagationStopped()&&f.removeEventListener(v,De),k.event.triggered=void 0,a&&(n[h]=a)),e.result}},simulate:function(t,e,i){var n=k.extend(new k.Event,i,{type:t,isSimulated:!0});k.event.trigger(n,null,e)}}),k.fn.extend({trigger:function(t,e){return this.each((function(){k.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return k.event.trigger(t,e,i,!0)}});var Le=/\[\]$/,Ee=/\r?\n/g,_e=/^(?:submit|button|image|reset|file)$/i,Oe=/^(?:input|select|textarea|keygen)/i;function Fe(t,e,i,n){var s;if(Array.isArray(e))k.each(e,(function(e,s){i||Le.test(t)?n(t,s):Fe(t+"["+("object"==typeof s&&null!=s?e:"")+"]",s,i,n)}));else if(i||"object"!==x(e))n(t,e);else for(s in e)Fe(t+"["+s+"]",e[s],i,n)}k.param=function(t,e){var i,n=[],s=function(t,e){var i=p(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!k.isPlainObject(t))k.each(t,(function(){s(this.name,this.value)}));else for(i in t)Fe(i,t[i],e,s);return n.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=k.prop(this,"elements");return t?k.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!k(this).is(":disabled")&&Oe.test(this.nodeName)&&!_e.test(t)&&(this.checked||!kt.test(t))})).map((function(t,e){var i=k(this).val();return null==i?null:Array.isArray(i)?k.map(i,(function(t){return{name:e.name,value:t.replace(Ee,"\r\n")}})):{name:e.name,value:i.replace(Ee,"\r\n")}})).get()}});var Re=/%20/g,Ie=/#.*$/,Be=/([?&])_=[^&]*/,je=/^(.*?):[ \t]*([^\r\n]*)$/gm,ze=/^(?:GET|HEAD)$/,He=/^\/\//,Ue={},Ve={},Ye="*/".concat("*"),qe=m.createElement("a");function $e(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,r=e.toLowerCase().match(Y)||[];if(p(i))for(;n=r[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function We(t,e,i,n){var s={},r=t===Ve;function o(a){var l;return s[a]=!0,k.each(t[a]||[],(function(t,a){var h=a(e,i,n);return"string"!=typeof h||r||s[h]?r?!(l=h):void 0:(e.dataTypes.unshift(h),o(h),!1)})),l}return o(e.dataTypes[0])||!s["*"]&&o("*")}function Ge(t,e){var i,n,s=k.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((s[i]?t:n||(n={}))[i]=e[i]);return n&&k.extend(!0,t,n),t}qe.href=Te.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Te.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Te.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ye,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ge(Ge(t,k.ajaxSettings),e):Ge(k.ajaxSettings,t)},ajaxPrefilter:$e(Ue),ajaxTransport:$e(Ve),ajax:function(e,i){"object"==typeof e&&(i=e,e=void 0),i=i||{};var n,s,r,o,a,l,h,u,c,d,f=k.ajaxSetup({},i),p=f.context||f,g=f.context&&(p.nodeType||p.jquery)?k(p):k.event,y=k.Deferred(),v=k.Callbacks("once memory"),x=f.statusCode||{},b={},w={},S="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(h){if(!o)for(o={};e=je.exec(r);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return h?r:null},setRequestHeader:function(t,e){return null==h&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==h&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(h)C.always(t[C.status]);else for(e in t)x[e]=[x[e],t[e]];return this},abort:function(t){var e=t||S;return n&&n.abort(e),M(0,e),this}};if(y.promise(C),f.url=((e||f.url||Te.href)+"").replace(He,Te.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(Y)||[""],null==f.crossDomain){l=m.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=qe.protocol+"//"+qe.host!=l.protocol+"//"+l.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=k.param(f.data,f.traditional)),We(Ue,f,i,C),h)return C;for(c in(u=k.event&&f.global)&&0===k.active++&&k.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!ze.test(f.type),s=f.url.replace(Ie,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Re,"+")):(d=f.url.slice(s.length),f.data&&(f.processData||"string"==typeof f.data)&&(s+=(Pe.test(s)?"&":"?")+f.data,delete f.data),!1===f.cache&&(s=s.replace(Be,"$1"),d=(Pe.test(s)?"&":"?")+"_="+Ae.guid+++d),f.url=s+d),f.ifModified&&(k.lastModified[s]&&C.setRequestHeader("If-Modified-Since",k.lastModified[s]),k.etag[s]&&C.setRequestHeader("If-None-Match",k.etag[s])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ye+"; q=0.01":""):f.accepts["*"]),f.headers)C.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(!1===f.beforeSend.call(p,C,f)||h))return C.abort();if(S="abort",v.add(f.complete),C.done(f.success),C.fail(f.error),n=We(Ve,f,i,C)){if(C.readyState=1,u&&g.trigger("ajaxSend",[C,f]),h)return C;f.async&&f.timeout>0&&(a=t.setTimeout((function(){C.abort("timeout")}),f.timeout));try{h=!1,n.send(b,M)}catch(t){if(h)throw t;M(-1,t)}}else M(-1,"No Transport");function M(e,i,o,l){var c,d,m,b,w,S=i;h||(h=!0,a&&t.clearTimeout(a),n=void 0,r=l||"",C.readyState=e>0?4:0,c=e>=200&&e<300||304===e,o&&(b=function(t,e,i){for(var n,s,r,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){l.unshift(s);break}if(l[0]in i)r=l[0];else{for(s in i){if(!l[0]||t.converters[s+" "+l[0]]){r=s;break}o||(o=s)}r=r||o}if(r)return r!==l[0]&&l.unshift(r),i[r]}(f,C,o)),!c&&k.inArray("script",f.dataTypes)>-1&&k.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),b=function(t,e,i,n){var s,r,o,a,l,h={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)h[o.toLowerCase()]=t.converters[o];for(r=u.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(o=h[l+" "+r]||h["* "+r]))for(s in h)if((a=s.split(" "))[1]===r&&(o=h[l+" "+a[0]]||h["* "+a[0]])){!0===o?o=h[s]:!0!==h[s]&&(r=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(f,b,C,c),c?(f.ifModified&&((w=C.getResponseHeader("Last-Modified"))&&(k.lastModified[s]=w),(w=C.getResponseHeader("etag"))&&(k.etag[s]=w)),204===e||"HEAD"===f.type?S="nocontent":304===e?S="notmodified":(S=b.state,d=b.data,c=!(m=b.error))):(m=S,!e&&S||(S="error",e<0&&(e=0))),C.status=e,C.statusText=(i||S)+"",c?y.resolveWith(p,[d,S,C]):y.rejectWith(p,[C,S,m]),C.statusCode(x),x=void 0,u&&g.trigger(c?"ajaxSuccess":"ajaxError",[C,f,c?d:m]),v.fireWith(p,[C,S]),u&&(g.trigger("ajaxComplete",[C,f]),--k.active||k.event.trigger("ajaxStop")))}return C},getJSON:function(t,e,i){return k.get(t,e,i,"json")},getScript:function(t,e){return k.get(t,void 0,e,"script")}}),k.each(["get","post"],(function(t,e){k[e]=function(t,i,n,s){return p(i)&&(s=s||n,n=i,i=void 0),k.ajax(k.extend({url:t,type:e,dataType:s,data:i,success:n},k.isPlainObject(t)&&t))}})),k.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),k._evalUrl=function(t,e,i){return k.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){k.globalEval(t,e,i)}})},k.fn.extend({wrapAll:function(t){var e;return this[0]&&(p(t)&&(t=t.call(this[0])),e=k(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return p(t)?this.each((function(e){k(this).wrapInner(t.call(this,e))})):this.each((function(){var e=k(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=p(t);return this.each((function(i){k(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){k(this).replaceWith(this.childNodes)})),this}}),k.expr.pseudos.hidden=function(t){return!k.expr.pseudos.visible(t)},k.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Xe={0:200,1223:204},Ke=k.ajaxSettings.xhr();f.cors=!!Ke&&"withCredentials"in Ke,f.ajax=Ke=!!Ke,k.ajaxTransport((function(e){var i,n;if(f.cors||Ke&&!e.crossDomain)return{send:function(s,r){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),s)a.setRequestHeader(o,s[o]);i=function(t){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Xe[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=a.ontimeout=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout((function(){i&&n()}))},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(i)throw t}},abort:function(){i&&i()}}})),k.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return k.globalEval(t),t}}}),k.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),k.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(n,s){e=k("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&s("error"===t.type?404:200,t.type)}),m.head.appendChild(e[0])},abort:function(){i&&i()}}}));var Je,Ze=[],Qe=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ze.pop()||k.expando+"_"+Ae.guid++;return this[t]=!0,t}}),k.ajaxPrefilter("json jsonp",(function(e,i,n){var s,r,o,a=!1!==e.jsonp&&(Qe.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qe.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=p(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Qe,"$1"+s):!1!==e.jsonp&&(e.url+=(Pe.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return o||k.error(s+" was not called"),o[0]},e.dataTypes[0]="json",r=t[s],t[s]=function(){o=arguments},n.always((function(){void 0===r?k(t).removeProp(s):t[s]=r,e[s]&&(e.jsonpCallback=i.jsonpCallback,Ze.push(s)),o&&p(r)&&r(o[0]),o=r=void 0})),"script"})),f.createHTMLDocument=((Je=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Je.childNodes.length),k.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(f.createHTMLDocument?((n=(e=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,e.head.appendChild(n)):e=m),r=!i&&[],(s=I.exec(t))?[e.createElement(s[1])]:(s=Nt([t],e,r),r&&r.length&&k(r).remove(),k.merge([],s.childNodes)));var n,s,r},k.fn.load=function(t,e,i){var n,s,r,o=this,a=t.indexOf(" ");return a>-1&&(n=ke(t.slice(a)),t=t.slice(0,a)),p(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),o.length>0&&k.ajax({url:t,type:s||"GET",dataType:"html",data:e}).done((function(t){r=arguments,o.html(n?k("<div>").append(k.parseHTML(t)).find(n):t)})).always(i&&function(t,e){o.each((function(){i.apply(this,r||[t.responseText,e,t])}))}),this},k.expr.pseudos.animated=function(t){return k.grep(k.timers,(function(e){return t===e.elem})).length},k.offset={setOffset:function(t,e,i){var n,s,r,o,a,l,h=k.css(t,"position"),u=k(t),c={};"static"===h&&(t.style.position="relative"),a=u.offset(),r=k.css(t,"top"),l=k.css(t,"left"),("absolute"===h||"fixed"===h)&&(r+l).indexOf("auto")>-1?(o=(n=u.position()).top,s=n.left):(o=parseFloat(r)||0,s=parseFloat(l)||0),p(e)&&(e=e.call(t,i,k.extend({},a))),null!=e.top&&(c.top=e.top-a.top+o),null!=e.left&&(c.left=e.left-a.left+s),"using"in e?e.using.call(t,c):u.css(c)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){k.offset.setOffset(this,t,e)}));var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],s={top:0,left:0};if("fixed"===k.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===k.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((s=k(t).offset()).top+=k.css(t,"borderTopWidth",!0),s.left+=k.css(t,"borderLeftWidth",!0))}return{top:e.top-s.top-k.css(n,"marginTop",!0),left:e.left-s.left-k.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===k.css(t,"position");)t=t.offsetParent;return t||dt}))}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;k.fn[t]=function(n){return J(this,(function(t,n,s){var r;if(g(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===s)return r?r[e]:t[n];r?r.scrollTo(i?r.pageXOffset:s,i?s:r.pageYOffset):t[n]=s}),t,n,arguments.length)}})),k.each(["top","left"],(function(t,e){k.cssHooks[e]=Jt(f.pixelPosition,(function(t,i){if(i)return i=Kt(t,e),qt.test(i)?k(t).position()[e]+"px":i}))})),k.each({Height:"height",Width:"width"},(function(t,e){k.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){k.fn[n]=function(s,r){var o=arguments.length&&(i||"boolean"!=typeof s),a=i||(!0===s||!0===r?"margin":"border");return J(this,(function(e,i,s){var r;return g(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===s?k.css(e,i,a):k.style(e,i,s,a)}),e,o?s:void 0,o)}}))})),k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){k.fn[e]=function(t){return this.on(e,t)}})),k.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){k.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}));var ti=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;k.proxy=function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),p(t))return n=s.call(arguments,2),r=function(){return t.apply(e||this,n.concat(s.call(arguments)))},r.guid=t.guid=t.guid||k.guid++,r},k.holdReady=function(t){t?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=C,k.isFunction=p,k.isWindow=g,k.camelCase=et,k.type=x,k.now=Date.now,k.isNumeric=function(t){var e=k.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},k.trim=function(t){return null==t?"":(t+"").replace(ti,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return k}));var ei=t.jQuery,ii=t.$;return k.noConflict=function(e){return t.$===k&&(t.$=ii),e&&t.jQuery===k&&(t.jQuery=ei),k},void 0===e&&(t.jQuery=t.$=k),k})),
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.0
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Popper=e()}(this,(function(){"use strict";var t="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,e=function(){for(var e=["Edge","Trident","Firefox"],i=0;i<e.length;i+=1)if(t&&navigator.userAgent.indexOf(e[i])>=0)return 1;return 0}();var i=t&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}:function(t){var i=!1;return function(){i||(i=!0,setTimeout((function(){i=!1,t()}),e))}};function n(t){return t&&"[object Function]"==={}.toString.call(t)}function s(t,e){if(1!==t.nodeType)return[];var i=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?i[e]:i}function r(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function o(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=s(t),i=e.overflow,n=e.overflowX,a=e.overflowY;return/(auto|scroll|overlay)/.test(i+a+n)?t:o(r(t))}function a(t){return t&&t.referenceNode?t.referenceNode:t}var l=t&&!(!window.MSInputMethodContext||!document.documentMode),h=t&&/MSIE 10/.test(navigator.userAgent);function u(t){return 11===t?l:10===t?h:l||h}function c(t){if(!t)return document.documentElement;for(var e=u(10)?document.body:null,i=t.offsetParent||null;i===e&&t.nextElementSibling;)i=(t=t.nextElementSibling).offsetParent;var n=i&&i.nodeName;return n&&"BODY"!==n&&"HTML"!==n?-1!==["TH","TD","TABLE"].indexOf(i.nodeName)&&"static"===s(i,"position")?c(i):i:t?t.ownerDocument.documentElement:document.documentElement}function d(t){return null!==t.parentNode?d(t.parentNode):t}function f(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var i=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,n=i?t:e,s=i?e:t,r=document.createRange();r.setStart(n,0),r.setEnd(s,0);var o,a,l=r.commonAncestorContainer;if(t!==l&&e!==l||n.contains(s))return"BODY"===(a=(o=l).nodeName)||"HTML"!==a&&c(o.firstElementChild)!==o?c(l):l;var h=d(t);return h.host?f(h.host,e):f(t,d(e).host)}function p(t){var e="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",i=t.nodeName;if("BODY"===i||"HTML"===i){var n=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||n)[e]}return t[e]}function g(t,e){var i="x"===e?"Left":"Top",n="Left"===i?"Right":"Bottom";return parseFloat(t["border"+i+"Width"],10)+parseFloat(t["border"+n+"Width"],10)}function m(t,e,i,n){return Math.max(e["offset"+t],e["scroll"+t],i["client"+t],i["offset"+t],i["scroll"+t],u(10)?parseInt(i["offset"+t])+parseInt(n["margin"+("Height"===t?"Top":"Left")])+parseInt(n["margin"+("Height"===t?"Bottom":"Right")]):0)}function y(t){var e=t.body,i=t.documentElement,n=u(10)&&getComputedStyle(i);return{height:m("Height",e,i,n),width:m("Width",e,i,n)}}var v=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),x=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};function w(t){return b({},t,{right:t.left+t.width,bottom:t.top+t.height})}function k(t){var e={};try{if(u(10)){e=t.getBoundingClientRect();var i=p(t,"top"),n=p(t,"left");e.top+=i,e.left+=n,e.bottom+=i,e.right+=n}else e=t.getBoundingClientRect()}catch(t){}var r={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?y(t.ownerDocument):{},a=o.width||t.clientWidth||r.width,l=o.height||t.clientHeight||r.height,h=t.offsetWidth-a,c=t.offsetHeight-l;if(h||c){var d=s(t);h-=g(d,"x"),c-=g(d,"y"),r.width-=h,r.height-=c}return w(r)}function S(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=u(10),r="HTML"===e.nodeName,a=k(t),l=k(e),h=o(t),c=s(e),d=parseFloat(c.borderTopWidth,10),f=parseFloat(c.borderLeftWidth,10);i&&r&&(l.top=Math.max(l.top,0),l.left=Math.max(l.left,0));var g=w({top:a.top-l.top-d,left:a.left-l.left-f,width:a.width,height:a.height});if(g.marginTop=0,g.marginLeft=0,!n&&r){var m=parseFloat(c.marginTop,10),y=parseFloat(c.marginLeft,10);g.top-=d-m,g.bottom-=d-m,g.left-=f-y,g.right-=f-y,g.marginTop=m,g.marginLeft=y}return(n&&!i?e.contains(h):e===h&&"BODY"!==h.nodeName)&&(g=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=p(e,"top"),s=p(e,"left"),r=i?-1:1;return t.top+=n*r,t.bottom+=n*r,t.left+=s*r,t.right+=s*r,t}(g,e)),g}function C(t){var e=t.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===s(t,"position"))return!0;var i=r(t);return!!i&&C(i)}function M(t){if(!t||!t.parentElement||u())return document.documentElement;for(var e=t.parentElement;e&&"none"===s(e,"transform");)e=e.parentElement;return e||document.documentElement}function T(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l={top:0,left:0},h=s?M(t):f(t,a(e));if("viewport"===n)l=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.ownerDocument.documentElement,n=S(t,i),s=Math.max(i.clientWidth,window.innerWidth||0),r=Math.max(i.clientHeight,window.innerHeight||0),o=e?0:p(i),a=e?0:p(i,"left");return w({top:o-n.top+n.marginTop,left:a-n.left+n.marginLeft,width:s,height:r})}(h,s);else{var u=void 0;"scrollParent"===n?"BODY"===(u=o(r(e))).nodeName&&(u=t.ownerDocument.documentElement):u="window"===n?t.ownerDocument.documentElement:n;var c=S(u,h,s);if("HTML"!==u.nodeName||C(h))l=c;else{var d=y(t.ownerDocument),g=d.height,m=d.width;l.top+=c.top-c.marginTop,l.bottom=g+c.top,l.left+=c.left-c.marginLeft,l.right=m+c.left}}var v="number"==typeof(i=i||0);return l.left+=v?i:i.left||0,l.top+=v?i:i.top||0,l.right-=v?i:i.right||0,l.bottom-=v?i:i.bottom||0,l}function A(t,e,i,n,s){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var o=T(i,n,r,s),a={top:{width:o.width,height:e.top-o.top},right:{width:o.right-e.right,height:o.height},bottom:{width:o.width,height:o.bottom-e.bottom},left:{width:e.left-o.left,height:o.height}},l=Object.keys(a).map((function(t){return b({key:t},a[t],{area:(e=a[t],e.width*e.height)});var e})).sort((function(t,e){return e.area-t.area})),h=l.filter((function(t){var e=t.width,n=t.height;return e>=i.clientWidth&&n>=i.clientHeight})),u=h.length>0?h[0].key:l[0].key,c=t.split("-")[1];return u+(c?"-"+c:"")}function P(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return S(i,n?M(e):f(e,a(i)),n)}function N(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),i=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),n=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+n,height:t.offsetHeight+i}}function D(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function L(t,e,i){i=i.split("-")[0];var n=N(t),s={width:n.width,height:n.height},r=-1!==["right","left"].indexOf(i),o=r?"top":"left",a=r?"left":"top",l=r?"height":"width",h=r?"width":"height";return s[o]=e[o]+e[l]/2-n[l]/2,s[a]=i===a?e[a]-n[h]:e[D(a)],s}function E(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function _(t,e,i){return(void 0===i?t:t.slice(0,function(t,e,i){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===i}));var n=E(t,(function(t){return t[e]===i}));return t.indexOf(n)}(t,"name",i))).forEach((function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=t.function||t.fn;t.enabled&&n(i)&&(e.offsets.popper=w(e.offsets.popper),e.offsets.reference=w(e.offsets.reference),e=i(e,t))})),e}function O(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=P(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=A(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=L(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=_(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function F(t,e){return t.some((function(t){var i=t.name;return t.enabled&&i===e}))}function R(t){for(var e=[!1,"ms","Webkit","Moz","O"],i=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<e.length;n++){var s=e[n],r=s?""+s+i:t;if(void 0!==document.body.style[r])return r}return null}function I(){return this.state.isDestroyed=!0,F(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[R("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function B(t){var e=t.ownerDocument;return e?e.defaultView:window}function j(t,e,i,n){var s="BODY"===t.nodeName,r=s?t.ownerDocument.defaultView:t;r.addEventListener(e,i,{passive:!0}),s||j(o(r.parentNode),e,i,n),n.push(r)}function z(t,e,i,n){i.updateBound=n,B(t).addEventListener("resize",i.updateBound,{passive:!0});var s=o(t);return j(s,"scroll",i.updateBound,i.scrollParents),i.scrollElement=s,i.eventsEnabled=!0,i}function H(){this.state.eventsEnabled||(this.state=z(this.reference,this.options,this.state,this.scheduleUpdate))}function U(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,B(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function V(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function Y(t,e){Object.keys(e).forEach((function(i){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&V(e[i])&&(n="px"),t.style[i]=e[i]+n}))}var q=t&&/Firefox/i.test(navigator.userAgent);function $(t,e,i){var n=E(t,(function(t){return t.name===e})),s=!!n&&t.some((function(t){return t.name===i&&t.enabled&&t.order<n.order}));if(!s){var r="`"+e+"`",o="`"+i+"`";console.warn(o+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return s}var W=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],G=W.slice(3);function X(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=G.indexOf(t),n=G.slice(i+1).concat(G.slice(0,i));return e?n.reverse():n}var K="flip",J="clockwise",Z="counterclockwise";function Q(t,e,i,n){var s=[0,0],r=-1!==["right","left"].indexOf(n),o=t.split(/(\+|\-)/).map((function(t){return t.trim()})),a=o.indexOf(E(o,(function(t){return-1!==t.search(/,|\s/)})));o[a]&&-1===o[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,h=-1!==a?[o.slice(0,a).concat([o[a].split(l)[0]]),[o[a].split(l)[1]].concat(o.slice(a+1))]:[o];return h=h.map((function(t,n){var s=(1===n?!r:r)?"height":"width",o=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,o=!0,t):o?(t[t.length-1]+=e,o=!1,t):t.concat(e)}),[]).map((function(t){return function(t,e,i,n){var s=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+s[1],o=s[2];if(!r)return t;if(0===o.indexOf("%")){return w("%p"===o?i:n)[e]/100*r}if("vh"===o||"vw"===o)return("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*r;return r}(t,s,e,i)}))})),h.forEach((function(t,e){t.forEach((function(i,n){V(i)&&(s[e]+=i*("-"===t[n-1]?-1:1))}))})),s}var tt={shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,i=e.split("-")[0],n=e.split("-")[1];if(n){var s=t.offsets,r=s.reference,o=s.popper,a=-1!==["bottom","top"].indexOf(i),l=a?"left":"top",h=a?"width":"height",u={start:x({},l,r[l]),end:x({},l,r[l]+r[h]-o[h])};t.offsets.popper=b({},o,u[n])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var i=e.offset,n=t.placement,s=t.offsets,r=s.popper,o=s.reference,a=n.split("-")[0],l=void 0;return l=V(+i)?[+i,0]:Q(i,r,o,a),"left"===a?(r.top+=l[0],r.left-=l[1]):"right"===a?(r.top+=l[0],r.left+=l[1]):"top"===a?(r.left+=l[0],r.top-=l[1]):"bottom"===a&&(r.left+=l[0],r.top+=l[1]),t.popper=r,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var i=e.boundariesElement||c(t.instance.popper);t.instance.reference===i&&(i=c(i));var n=R("transform"),s=t.instance.popper.style,r=s.top,o=s.left,a=s[n];s.top="",s.left="",s[n]="";var l=T(t.instance.popper,t.instance.reference,e.padding,i,t.positionFixed);s.top=r,s.left=o,s[n]=a,e.boundaries=l;var h=e.priority,u=t.offsets.popper,d={primary:function(t){var i=u[t];return u[t]<l[t]&&!e.escapeWithReference&&(i=Math.max(u[t],l[t])),x({},t,i)},secondary:function(t){var i="right"===t?"left":"top",n=u[i];return u[t]>l[t]&&!e.escapeWithReference&&(n=Math.min(u[i],l[t]-("right"===t?u.width:u.height))),x({},i,n)}};return h.forEach((function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";u=b({},u,d[e](t))})),t.offsets.popper=u,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,i=e.popper,n=e.reference,s=t.placement.split("-")[0],r=Math.floor,o=-1!==["top","bottom"].indexOf(s),a=o?"right":"bottom",l=o?"left":"top",h=o?"width":"height";return i[a]<r(n[l])&&(t.offsets.popper[l]=r(n[l])-i[h]),i[l]>r(n[a])&&(t.offsets.popper[l]=r(n[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var i;if(!$(t.instance.modifiers,"arrow","keepTogether"))return t;var n=e.element;if("string"==typeof n){if(!(n=t.instance.popper.querySelector(n)))return t}else if(!t.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var r=t.placement.split("-")[0],o=t.offsets,a=o.popper,l=o.reference,h=-1!==["left","right"].indexOf(r),u=h?"height":"width",c=h?"Top":"Left",d=c.toLowerCase(),f=h?"left":"top",p=h?"bottom":"right",g=N(n)[u];l[p]-g<a[d]&&(t.offsets.popper[d]-=a[d]-(l[p]-g)),l[d]+g>a[p]&&(t.offsets.popper[d]+=l[d]+g-a[p]),t.offsets.popper=w(t.offsets.popper);var m=l[d]+l[u]/2-g/2,y=s(t.instance.popper),v=parseFloat(y["margin"+c],10),b=parseFloat(y["border"+c+"Width"],10),k=m-t.offsets.popper[d]-v-b;return k=Math.max(Math.min(a[u]-g,k),0),t.arrowElement=n,t.offsets.arrow=(x(i={},d,Math.round(k)),x(i,f,""),i),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(F(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var i=T(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),n=t.placement.split("-")[0],s=D(n),r=t.placement.split("-")[1]||"",o=[];switch(e.behavior){case K:o=[n,s];break;case J:o=X(n);break;case Z:o=X(n,!0);break;default:o=e.behavior}return o.forEach((function(a,l){if(n!==a||o.length===l+1)return t;n=t.placement.split("-")[0],s=D(n);var h=t.offsets.popper,u=t.offsets.reference,c=Math.floor,d="left"===n&&c(h.right)>c(u.left)||"right"===n&&c(h.left)<c(u.right)||"top"===n&&c(h.bottom)>c(u.top)||"bottom"===n&&c(h.top)<c(u.bottom),f=c(h.left)<c(i.left),p=c(h.right)>c(i.right),g=c(h.top)<c(i.top),m=c(h.bottom)>c(i.bottom),y="left"===n&&f||"right"===n&&p||"top"===n&&g||"bottom"===n&&m,v=-1!==["top","bottom"].indexOf(n),x=!!e.flipVariations&&(v&&"start"===r&&f||v&&"end"===r&&p||!v&&"start"===r&&g||!v&&"end"===r&&m),w=!!e.flipVariationsByContent&&(v&&"start"===r&&p||v&&"end"===r&&f||!v&&"start"===r&&m||!v&&"end"===r&&g),k=x||w;(d||y||k)&&(t.flipped=!0,(d||y)&&(n=o[l+1]),k&&(r=function(t){return"end"===t?"start":"start"===t?"end":t}(r)),t.placement=n+(r?"-"+r:""),t.offsets.popper=b({},t.offsets.popper,L(t.instance.popper,t.offsets.reference,t.placement)),t=_(t.instance.modifiers,t,"flip"))})),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,i=e.split("-")[0],n=t.offsets,s=n.popper,r=n.reference,o=-1!==["left","right"].indexOf(i),a=-1===["top","left"].indexOf(i);return s[o?"left":"top"]=r[i]-(a?s[o?"width":"height"]:0),t.placement=D(e),t.offsets.popper=w(s),t}},hide:{order:800,enabled:!0,fn:function(t){if(!$(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,i=E(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<i.top||e.left>i.right||e.top>i.bottom||e.right<i.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var i=e.x,n=e.y,s=t.offsets.popper,r=E(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==r&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=void 0!==r?r:e.gpuAcceleration,a=c(t.instance.popper),l=k(a),h={position:s.position},u=function(t,e){var i=t.offsets,n=i.popper,s=i.reference,r=Math.round,o=Math.floor,a=function(t){return t},l=r(s.width),h=r(n.width),u=-1!==["left","right"].indexOf(t.placement),c=-1!==t.placement.indexOf("-"),d=e?u||c||l%2==h%2?r:o:a,f=e?r:a;return{left:d(l%2==1&&h%2==1&&!c&&e?n.left-1:n.left),top:f(n.top),bottom:f(n.bottom),right:d(n.right)}}(t,window.devicePixelRatio<2||!q),d="bottom"===i?"top":"bottom",f="right"===n?"left":"right",p=R("transform"),g=void 0,m=void 0;if(m="bottom"===d?"HTML"===a.nodeName?-a.clientHeight+u.bottom:-l.height+u.bottom:u.top,g="right"===f?"HTML"===a.nodeName?-a.clientWidth+u.right:-l.width+u.right:u.left,o&&p)h[p]="translate3d("+g+"px, "+m+"px, 0)",h[d]=0,h[f]=0,h.willChange="transform";else{var y="bottom"===d?-1:1,v="right"===f?-1:1;h[d]=m*y,h[f]=g*v,h.willChange=d+", "+f}var x={"x-placement":t.placement};return t.attributes=b({},x,t.attributes),t.styles=b({},h,t.styles),t.arrowStyles=b({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,i;return Y(t.instance.popper,t.styles),e=t.instance.popper,i=t.attributes,Object.keys(i).forEach((function(t){!1!==i[t]?e.setAttribute(t,i[t]):e.removeAttribute(t)})),t.arrowElement&&Object.keys(t.arrowStyles).length&&Y(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,i,n,s){var r=P(s,e,t,i.positionFixed),o=A(i.placement,r,e,t,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return e.setAttribute("x-placement",o),Y(e,{position:i.positionFixed?"fixed":"absolute"}),i},gpuAcceleration:void 0}},et={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:tt},it=function(){function t(e,s){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=i(this.update.bind(this)),this.options=b({},t.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=s&&s.jquery?s[0]:s,this.options.modifiers={},Object.keys(b({},t.Defaults.modifiers,o.modifiers)).forEach((function(e){r.options.modifiers[e]=b({},t.Defaults.modifiers[e]||{},o.modifiers?o.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return b({name:t},r.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(t){t.enabled&&n(t.onLoad)&&t.onLoad(r.reference,r.popper,r.options,t,r.state)})),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return v(t,[{key:"update",value:function(){return O.call(this)}},{key:"destroy",value:function(){return I.call(this)}},{key:"enableEventListeners",value:function(){return H.call(this)}},{key:"disableEventListeners",value:function(){return U.call(this)}}]),t}();return it.Utils=("undefined"!=typeof window?window:global).PopperUtils,it.placements=W,it.Defaults=et,it})),
/*!
  * Bootstrap v4.4.1 (https://getbootstrap.com/)
  * Copyright 2011-2019 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */
function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],e):e((t=t||self).bootstrap={},t.jQuery,t.Popper)}(this,(function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e=e&&e.hasOwnProperty("default")?e.default:e,i=i&&i.hasOwnProperty("default")?i.default:i;var l="transitionend";function h(t){var i=this,n=!1;return e(this).one(u.TRANSITION_END,(function(){n=!0})),setTimeout((function(){n||u.triggerTransitionEnd(i)}),t),this}var u={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var i=t.getAttribute("href");e=i&&"#"!==i?i.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var i=e(t).css("transition-duration"),n=e(t).css("transition-delay"),s=parseFloat(i),r=parseFloat(n);return s||r?(i=i.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(i)+parseFloat(n))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){e(t).trigger(l)},supportsTransitionEnd:function(){return Boolean(l)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,i){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var s=i[n],r=e[n],o=r&&u.isElement(r)?"element":(a=r,{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(s).test(o))throw new Error(t.toUpperCase()+': Option "'+n+'" provided type "'+o+'" but expected type "'+s+'".')}var a},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){var e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?u.findShadowRoot(t.parentNode):null},jQueryDetection:function(){if(void 0===e)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||t[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};u.jQueryDetection(),e.fn.emulateTransitionEnd=h,e.event.special[u.TRANSITION_END]={bindType:l,delegateType:l,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var c="alert",d="bs.alert",f="."+d,p=e.fn[c],g={CLOSE:"close"+f,CLOSED:"closed"+f,CLICK_DATA_API:"click"+f+".data-api"},m="alert",y="fade",v="show",x=function(){function t(t){this._element=t}var i=t.prototype;return i.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},i.dispose=function(){e.removeData(this._element,d),this._element=null},i._getRootElement=function(t){var i=u.getSelectorFromElement(t),n=!1;return i&&(n=document.querySelector(i)),n||(n=e(t).closest("."+m)[0]),n},i._triggerCloseEvent=function(t){var i=e.Event(g.CLOSE);return e(t).trigger(i),i},i._removeElement=function(t){var i=this;if(e(t).removeClass(v),e(t).hasClass(y)){var n=u.getTransitionDurationFromElement(t);e(t).one(u.TRANSITION_END,(function(e){return i._destroyElement(t,e)})).emulateTransitionEnd(n)}else this._destroyElement(t)},i._destroyElement=function(t){e(t).detach().trigger(g.CLOSED).remove()},t._jQueryInterface=function(i){return this.each((function(){var n=e(this),s=n.data(d);s||(s=new t(this),n.data(d,s)),"close"===i&&s[i](this)}))},t._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},s(t,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),t}();e(document).on(g.CLICK_DATA_API,'[data-dismiss="alert"]',x._handleDismiss(new x)),e.fn[c]=x._jQueryInterface,e.fn[c].Constructor=x,e.fn[c].noConflict=function(){return e.fn[c]=p,x._jQueryInterface};var b="button",w="bs.button",k="."+w,S=".data-api",C=e.fn[b],M="active",T="btn",A="focus",P='[data-toggle^="button"]',N='[data-toggle="buttons"]',D='[data-toggle="button"]',L='[data-toggle="buttons"] .btn',E='input:not([type="hidden"])',_=".active",O=".btn",F={CLICK_DATA_API:"click"+k+S,FOCUS_BLUR_DATA_API:"focus"+k+S+" blur"+k+S,LOAD_DATA_API:"load"+k+S},R=function(){function t(t){this._element=t}var i=t.prototype;return i.toggle=function(){var t=!0,i=!0,n=e(this._element).closest(N)[0];if(n){var s=this._element.querySelector(E);if(s){if("radio"===s.type)if(s.checked&&this._element.classList.contains(M))t=!1;else{var r=n.querySelector(_);r&&e(r).removeClass(M)}else"checkbox"===s.type?"LABEL"===this._element.tagName&&s.checked===this._element.classList.contains(M)&&(t=!1):t=!1;t&&(s.checked=!this._element.classList.contains(M),e(s).trigger("change")),s.focus(),i=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(i&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(M)),t&&e(this._element).toggleClass(M))},i.dispose=function(){e.removeData(this._element,w),this._element=null},t._jQueryInterface=function(i){return this.each((function(){var n=e(this).data(w);n||(n=new t(this),e(this).data(w,n)),"toggle"===i&&n[i]()}))},s(t,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),t}();e(document).on(F.CLICK_DATA_API,P,(function(t){var i=t.target;if(e(i).hasClass(T)||(i=e(i).closest(O)[0]),!i||i.hasAttribute("disabled")||i.classList.contains("disabled"))t.preventDefault();else{var n=i.querySelector(E);if(n&&(n.hasAttribute("disabled")||n.classList.contains("disabled")))return void t.preventDefault();R._jQueryInterface.call(e(i),"toggle")}})).on(F.FOCUS_BLUR_DATA_API,P,(function(t){var i=e(t.target).closest(O)[0];e(i).toggleClass(A,/^focus(in)?$/.test(t.type))})),e(window).on(F.LOAD_DATA_API,(function(){for(var t=[].slice.call(document.querySelectorAll(L)),e=0,i=t.length;e<i;e++){var n=t[e],s=n.querySelector(E);s.checked||s.hasAttribute("checked")?n.classList.add(M):n.classList.remove(M)}for(var r=0,o=(t=[].slice.call(document.querySelectorAll(D))).length;r<o;r++){var a=t[r];"true"===a.getAttribute("aria-pressed")?a.classList.add(M):a.classList.remove(M)}})),e.fn[b]=R._jQueryInterface,e.fn[b].Constructor=R,e.fn[b].noConflict=function(){return e.fn[b]=C,R._jQueryInterface};var I="carousel",B="bs.carousel",j="."+B,z=".data-api",H=e.fn[I],U={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},V={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Y="next",q="prev",$="left",W="right",G={SLIDE:"slide"+j,SLID:"slid"+j,KEYDOWN:"keydown"+j,MOUSEENTER:"mouseenter"+j,MOUSELEAVE:"mouseleave"+j,TOUCHSTART:"touchstart"+j,TOUCHMOVE:"touchmove"+j,TOUCHEND:"touchend"+j,POINTERDOWN:"pointerdown"+j,POINTERUP:"pointerup"+j,DRAG_START:"dragstart"+j,LOAD_DATA_API:"load"+j+z,CLICK_DATA_API:"click"+j+z},X="carousel",K="active",J="slide",Z="carousel-item-right",Q="carousel-item-left",tt="carousel-item-next",et="carousel-item-prev",it="pointer-event",nt=".active",st=".active.carousel-item",rt=".carousel-item",ot=".carousel-item img",at=".carousel-item-next, .carousel-item-prev",lt=".carousel-indicators",ht="[data-slide], [data-slide-to]",ut='[data-ride="carousel"]',ct={TOUCH:"touch",PEN:"pen"},dt=function(){function t(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(lt),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var i=t.prototype;return i.next=function(){this._isSliding||this._slide(Y)},i.nextWhenVisible=function(){!document.hidden&&e(this._element).is(":visible")&&"hidden"!==e(this._element).css("visibility")&&this.next()},i.prev=function(){this._isSliding||this._slide(q)},i.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(at)&&(u.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},i.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},i.to=function(t){var i=this;this._activeElement=this._element.querySelector(st);var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)e(this._element).one(G.SLID,(function(){return i.to(t)}));else{if(n===t)return this.pause(),void this.cycle();var s=t>n?Y:q;this._slide(s,this._items[t])}},i.dispose=function(){e(this._element).off(j),e.removeData(this._element,B),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},i._getConfig=function(t){return t=a({},U,{},t),u.typeCheckConfig(I,t,V),t},i._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;this.touchDeltaX=0,e>0&&this.prev(),e<0&&this.next()}},i._addEventListeners=function(){var t=this;this._config.keyboard&&e(this._element).on(G.KEYDOWN,(function(e){return t._keydown(e)})),"hover"===this._config.pause&&e(this._element).on(G.MOUSEENTER,(function(e){return t.pause(e)})).on(G.MOUSELEAVE,(function(e){return t.cycle(e)})),this._config.touch&&this._addTouchEventListeners()},i._addTouchEventListeners=function(){var t=this;if(this._touchSupported){var i=function(e){t._pointerEvent&&ct[e.originalEvent.pointerType.toUpperCase()]?t.touchStartX=e.originalEvent.clientX:t._pointerEvent||(t.touchStartX=e.originalEvent.touches[0].clientX)},n=function(e){t._pointerEvent&&ct[e.originalEvent.pointerType.toUpperCase()]&&(t.touchDeltaX=e.originalEvent.clientX-t.touchStartX),t._handleSwipe(),"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout((function(e){return t.cycle(e)}),500+t._config.interval))};e(this._element.querySelectorAll(ot)).on(G.DRAG_START,(function(t){return t.preventDefault()})),this._pointerEvent?(e(this._element).on(G.POINTERDOWN,(function(t){return i(t)})),e(this._element).on(G.POINTERUP,(function(t){return n(t)})),this._element.classList.add(it)):(e(this._element).on(G.TOUCHSTART,(function(t){return i(t)})),e(this._element).on(G.TOUCHMOVE,(function(e){return function(e){e.originalEvent.touches&&e.originalEvent.touches.length>1?t.touchDeltaX=0:t.touchDeltaX=e.originalEvent.touches[0].clientX-t.touchStartX}(e)})),e(this._element).on(G.TOUCHEND,(function(t){return n(t)})))}},i._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},i._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(rt)):[],this._items.indexOf(t)},i._getItemByDirection=function(t,e){var i=t===Y,n=t===q,s=this._getItemIndex(e),r=this._items.length-1;if((n&&0===s||i&&s===r)&&!this._config.wrap)return e;var o=(s+(t===q?-1:1))%this._items.length;return-1===o?this._items[this._items.length-1]:this._items[o]},i._triggerSlideEvent=function(t,i){var n=this._getItemIndex(t),s=this._getItemIndex(this._element.querySelector(st)),r=e.Event(G.SLIDE,{relatedTarget:t,direction:i,from:s,to:n});return e(this._element).trigger(r),r},i._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var i=[].slice.call(this._indicatorsElement.querySelectorAll(nt));e(i).removeClass(K);var n=this._indicatorsElement.children[this._getItemIndex(t)];n&&e(n).addClass(K)}},i._slide=function(t,i){var n,s,r,o=this,a=this._element.querySelector(st),l=this._getItemIndex(a),h=i||a&&this._getItemByDirection(t,a),c=this._getItemIndex(h),d=Boolean(this._interval);if(t===Y?(n=Q,s=tt,r=$):(n=Z,s=et,r=W),h&&e(h).hasClass(K))this._isSliding=!1;else if(!this._triggerSlideEvent(h,r).isDefaultPrevented()&&a&&h){this._isSliding=!0,d&&this.pause(),this._setActiveIndicatorElement(h);var f=e.Event(G.SLID,{relatedTarget:h,direction:r,from:l,to:c});if(e(this._element).hasClass(J)){e(h).addClass(s),u.reflow(h),e(a).addClass(n),e(h).addClass(n);var p=parseInt(h.getAttribute("data-interval"),10);p?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=p):this._config.interval=this._config.defaultInterval||this._config.interval;var g=u.getTransitionDurationFromElement(a);e(a).one(u.TRANSITION_END,(function(){e(h).removeClass(n+" "+s).addClass(K),e(a).removeClass(K+" "+s+" "+n),o._isSliding=!1,setTimeout((function(){return e(o._element).trigger(f)}),0)})).emulateTransitionEnd(g)}else e(a).removeClass(K),e(h).addClass(K),this._isSliding=!1,e(this._element).trigger(f);d&&this.cycle()}},t._jQueryInterface=function(i){return this.each((function(){var n=e(this).data(B),s=a({},U,{},e(this).data());"object"==typeof i&&(s=a({},s,{},i));var r="string"==typeof i?i:s.slide;if(n||(n=new t(this,s),e(this).data(B,n)),"number"==typeof i)n.to(i);else if("string"==typeof r){if(void 0===n[r])throw new TypeError('No method named "'+r+'"');n[r]()}else s.interval&&s.ride&&(n.pause(),n.cycle())}))},t._dataApiClickHandler=function(i){var n=u.getSelectorFromElement(this);if(n){var s=e(n)[0];if(s&&e(s).hasClass(X)){var r=a({},e(s).data(),{},e(this).data()),o=this.getAttribute("data-slide-to");o&&(r.interval=!1),t._jQueryInterface.call(e(s),r),o&&e(s).data(B).to(o),i.preventDefault()}}},s(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return U}}]),t}();e(document).on(G.CLICK_DATA_API,ht,dt._dataApiClickHandler),e(window).on(G.LOAD_DATA_API,(function(){for(var t=[].slice.call(document.querySelectorAll(ut)),i=0,n=t.length;i<n;i++){var s=e(t[i]);dt._jQueryInterface.call(s,s.data())}})),e.fn[I]=dt._jQueryInterface,e.fn[I].Constructor=dt,e.fn[I].noConflict=function(){return e.fn[I]=H,dt._jQueryInterface};var ft="collapse",pt="bs.collapse",gt="."+pt,mt=e.fn[ft],yt={toggle:!0,parent:""},vt={toggle:"boolean",parent:"(string|element)"},xt={SHOW:"show"+gt,SHOWN:"shown"+gt,HIDE:"hide"+gt,HIDDEN:"hidden"+gt,CLICK_DATA_API:"click"+gt+".data-api"},bt="show",wt="collapse",kt="collapsing",St="collapsed",Ct="width",Mt="height",Tt=".show, .collapsing",At='[data-toggle="collapse"]',Pt=function(){function t(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var i=[].slice.call(document.querySelectorAll(At)),n=0,s=i.length;n<s;n++){var r=i[n],o=u.getSelectorFromElement(r),a=[].slice.call(document.querySelectorAll(o)).filter((function(e){return e===t}));null!==o&&a.length>0&&(this._selector=o,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var i=t.prototype;return i.toggle=function(){e(this._element).hasClass(bt)?this.hide():this.show()},i.show=function(){var i,n,s=this;if(!this._isTransitioning&&!e(this._element).hasClass(bt)&&(this._parent&&0===(i=[].slice.call(this._parent.querySelectorAll(Tt)).filter((function(t){return"string"==typeof s._config.parent?t.getAttribute("data-parent")===s._config.parent:t.classList.contains(wt)}))).length&&(i=null),!(i&&(n=e(i).not(this._selector).data(pt))&&n._isTransitioning))){var r=e.Event(xt.SHOW);if(e(this._element).trigger(r),!r.isDefaultPrevented()){i&&(t._jQueryInterface.call(e(i).not(this._selector),"hide"),n||e(i).data(pt,null));var o=this._getDimension();e(this._element).removeClass(wt).addClass(kt),this._element.style[o]=0,this._triggerArray.length&&e(this._triggerArray).removeClass(St).attr("aria-expanded",!0),this.setTransitioning(!0);var a="scroll"+(o[0].toUpperCase()+o.slice(1)),l=u.getTransitionDurationFromElement(this._element);e(this._element).one(u.TRANSITION_END,(function(){e(s._element).removeClass(kt).addClass(wt).addClass(bt),s._element.style[o]="",s.setTransitioning(!1),e(s._element).trigger(xt.SHOWN)})).emulateTransitionEnd(l),this._element.style[o]=this._element[a]+"px"}}},i.hide=function(){var t=this;if(!this._isTransitioning&&e(this._element).hasClass(bt)){var i=e.Event(xt.HIDE);if(e(this._element).trigger(i),!i.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",u.reflow(this._element),e(this._element).addClass(kt).removeClass(wt).removeClass(bt);var s=this._triggerArray.length;if(s>0)for(var r=0;r<s;r++){var o=this._triggerArray[r],a=u.getSelectorFromElement(o);if(null!==a)e([].slice.call(document.querySelectorAll(a))).hasClass(bt)||e(o).addClass(St).attr("aria-expanded",!1)}this.setTransitioning(!0);this._element.style[n]="";var l=u.getTransitionDurationFromElement(this._element);e(this._element).one(u.TRANSITION_END,(function(){t.setTransitioning(!1),e(t._element).removeClass(kt).addClass(wt).trigger(xt.HIDDEN)})).emulateTransitionEnd(l)}}},i.setTransitioning=function(t){this._isTransitioning=t},i.dispose=function(){e.removeData(this._element,pt),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},i._getConfig=function(t){return(t=a({},yt,{},t)).toggle=Boolean(t.toggle),u.typeCheckConfig(ft,t,vt),t},i._getDimension=function(){return e(this._element).hasClass(Ct)?Ct:Mt},i._getParent=function(){var i,n=this;u.isElement(this._config.parent)?(i=this._config.parent,void 0!==this._config.parent.jquery&&(i=this._config.parent[0])):i=document.querySelector(this._config.parent);var s='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',r=[].slice.call(i.querySelectorAll(s));return e(r).each((function(e,i){n._addAriaAndCollapsedClass(t._getTargetFromElement(i),[i])})),i},i._addAriaAndCollapsedClass=function(t,i){var n=e(t).hasClass(bt);i.length&&e(i).toggleClass(St,!n).attr("aria-expanded",n)},t._getTargetFromElement=function(t){var e=u.getSelectorFromElement(t);return e?document.querySelector(e):null},t._jQueryInterface=function(i){return this.each((function(){var n=e(this),s=n.data(pt),r=a({},yt,{},n.data(),{},"object"==typeof i&&i?i:{});if(!s&&r.toggle&&/show|hide/.test(i)&&(r.toggle=!1),s||(s=new t(this,r),n.data(pt,s)),"string"==typeof i){if(void 0===s[i])throw new TypeError('No method named "'+i+'"');s[i]()}}))},s(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return yt}}]),t}();e(document).on(xt.CLICK_DATA_API,At,(function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var i=e(this),n=u.getSelectorFromElement(this),s=[].slice.call(document.querySelectorAll(n));e(s).each((function(){var t=e(this),n=t.data(pt)?"toggle":i.data();Pt._jQueryInterface.call(t,n)}))})),e.fn[ft]=Pt._jQueryInterface,e.fn[ft].Constructor=Pt,e.fn[ft].noConflict=function(){return e.fn[ft]=mt,Pt._jQueryInterface};var Nt="dropdown",Dt="bs.dropdown",Lt="."+Dt,Et=".data-api",_t=e.fn[Nt],Ot=new RegExp("38|40|27"),Ft={HIDE:"hide"+Lt,HIDDEN:"hidden"+Lt,SHOW:"show"+Lt,SHOWN:"shown"+Lt,CLICK:"click"+Lt,CLICK_DATA_API:"click"+Lt+Et,KEYDOWN_DATA_API:"keydown"+Lt+Et,KEYUP_DATA_API:"keyup"+Lt+Et},Rt="disabled",It="show",Bt="dropup",jt="dropright",zt="dropleft",Ht="dropdown-menu-right",Ut="position-static",Vt='[data-toggle="dropdown"]',Yt=".dropdown form",qt=".dropdown-menu",$t=".navbar-nav",Wt=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Gt="top-start",Xt="top-end",Kt="bottom-start",Jt="bottom-end",Zt="right-start",Qt="left-start",te={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},ee={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},ie=function(){function t(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var n=t.prototype;return n.toggle=function(){if(!this._element.disabled&&!e(this._element).hasClass(Rt)){var i=e(this._menu).hasClass(It);t._clearMenus(),i||this.show(!0)}},n.show=function(n){if(void 0===n&&(n=!1),!(this._element.disabled||e(this._element).hasClass(Rt)||e(this._menu).hasClass(It))){var s={relatedTarget:this._element},r=e.Event(Ft.SHOW,s),o=t._getParentFromElement(this._element);if(e(o).trigger(r),!r.isDefaultPrevented()){if(!this._inNavbar&&n){if(void 0===i)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var a=this._element;"parent"===this._config.reference?a=o:u.isElement(this._config.reference)&&(a=this._config.reference,void 0!==this._config.reference.jquery&&(a=this._config.reference[0])),"scrollParent"!==this._config.boundary&&e(o).addClass(Ut),this._popper=new i(a,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===e(o).closest($t).length&&e(document.body).children().on("mouseover",null,e.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),e(this._menu).toggleClass(It),e(o).toggleClass(It).trigger(e.Event(Ft.SHOWN,s))}}},n.hide=function(){if(!this._element.disabled&&!e(this._element).hasClass(Rt)&&e(this._menu).hasClass(It)){var i={relatedTarget:this._element},n=e.Event(Ft.HIDE,i),s=t._getParentFromElement(this._element);e(s).trigger(n),n.isDefaultPrevented()||(this._popper&&this._popper.destroy(),e(this._menu).toggleClass(It),e(s).toggleClass(It).trigger(e.Event(Ft.HIDDEN,i)))}},n.dispose=function(){e.removeData(this._element,Dt),e(this._element).off(Lt),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},n.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},n._addEventListeners=function(){var t=this;e(this._element).on(Ft.CLICK,(function(e){e.preventDefault(),e.stopPropagation(),t.toggle()}))},n._getConfig=function(t){return t=a({},this.constructor.Default,{},e(this._element).data(),{},t),u.typeCheckConfig(Nt,t,this.constructor.DefaultType),t},n._getMenuElement=function(){if(!this._menu){var e=t._getParentFromElement(this._element);e&&(this._menu=e.querySelector(qt))}return this._menu},n._getPlacement=function(){var t=e(this._element.parentNode),i=Kt;return t.hasClass(Bt)?(i=Gt,e(this._menu).hasClass(Ht)&&(i=Xt)):t.hasClass(jt)?i=Zt:t.hasClass(zt)?i=Qt:e(this._menu).hasClass(Ht)&&(i=Jt),i},n._detectNavbar=function(){return e(this._element).closest(".navbar").length>0},n._getOffset=function(){var t=this,e={};return"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=a({},e.offsets,{},t._config.offset(e.offsets,t._element)||{}),e}:e.offset=this._config.offset,e},n._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),a({},t,{},this._config.popperConfig)},t._jQueryInterface=function(i){return this.each((function(){var n=e(this).data(Dt);if(n||(n=new t(this,"object"==typeof i?i:null),e(this).data(Dt,n)),"string"==typeof i){if(void 0===n[i])throw new TypeError('No method named "'+i+'"');n[i]()}}))},t._clearMenus=function(i){if(!i||3!==i.which&&("keyup"!==i.type||9===i.which))for(var n=[].slice.call(document.querySelectorAll(Vt)),s=0,r=n.length;s<r;s++){var o=t._getParentFromElement(n[s]),a=e(n[s]).data(Dt),l={relatedTarget:n[s]};if(i&&"click"===i.type&&(l.clickEvent=i),a){var h=a._menu;if(e(o).hasClass(It)&&!(i&&("click"===i.type&&/input|textarea/i.test(i.target.tagName)||"keyup"===i.type&&9===i.which)&&e.contains(o,i.target))){var u=e.Event(Ft.HIDE,l);e(o).trigger(u),u.isDefaultPrevented()||("ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),n[s].setAttribute("aria-expanded","false"),a._popper&&a._popper.destroy(),e(h).removeClass(It),e(o).removeClass(It).trigger(e.Event(Ft.HIDDEN,l)))}}}},t._getParentFromElement=function(t){var e,i=u.getSelectorFromElement(t);return i&&(e=document.querySelector(i)),e||t.parentNode},t._dataApiKeydownHandler=function(i){if(!(/input|textarea/i.test(i.target.tagName)?32===i.which||27!==i.which&&(40!==i.which&&38!==i.which||e(i.target).closest(qt).length):!Ot.test(i.which))&&(i.preventDefault(),i.stopPropagation(),!this.disabled&&!e(this).hasClass(Rt))){var n=t._getParentFromElement(this),s=e(n).hasClass(It);if(s||27!==i.which)if(s&&(!s||27!==i.which&&32!==i.which)){var r=[].slice.call(n.querySelectorAll(Wt)).filter((function(t){return e(t).is(":visible")}));if(0!==r.length){var o=r.indexOf(i.target);38===i.which&&o>0&&o--,40===i.which&&o<r.length-1&&o++,o<0&&(o=0),r[o].focus()}}else{if(27===i.which){var a=n.querySelector(Vt);e(a).trigger("focus")}e(this).trigger("click")}}},s(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return te}},{key:"DefaultType",get:function(){return ee}}]),t}();e(document).on(Ft.KEYDOWN_DATA_API,Vt,ie._dataApiKeydownHandler).on(Ft.KEYDOWN_DATA_API,qt,ie._dataApiKeydownHandler).on(Ft.CLICK_DATA_API+" "+Ft.KEYUP_DATA_API,ie._clearMenus).on(Ft.CLICK_DATA_API,Vt,(function(t){t.preventDefault(),t.stopPropagation(),ie._jQueryInterface.call(e(this),"toggle")})).on(Ft.CLICK_DATA_API,Yt,(function(t){t.stopPropagation()})),e.fn[Nt]=ie._jQueryInterface,e.fn[Nt].Constructor=ie,e.fn[Nt].noConflict=function(){return e.fn[Nt]=_t,ie._jQueryInterface};var ne="modal",se="bs.modal",re="."+se,oe=e.fn[ne],ae={backdrop:!0,keyboard:!0,focus:!0,show:!0},le={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},he={HIDE:"hide"+re,HIDE_PREVENTED:"hidePrevented"+re,HIDDEN:"hidden"+re,SHOW:"show"+re,SHOWN:"shown"+re,FOCUSIN:"focusin"+re,RESIZE:"resize"+re,CLICK_DISMISS:"click.dismiss"+re,KEYDOWN_DISMISS:"keydown.dismiss"+re,MOUSEUP_DISMISS:"mouseup.dismiss"+re,MOUSEDOWN_DISMISS:"mousedown.dismiss"+re,CLICK_DATA_API:"click"+re+".data-api"},ue="modal-dialog-scrollable",ce="modal-scrollbar-measure",de="modal-backdrop",fe="modal-open",pe="fade",ge="show",me="modal-static",ye=".modal-dialog",ve=".modal-body",xe='[data-toggle="modal"]',be='[data-dismiss="modal"]',we=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ke=".sticky-top",Se=function(){function t(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(ye),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var i=t.prototype;return i.toggle=function(t){return this._isShown?this.hide():this.show(t)},i.show=function(t){var i=this;if(!this._isShown&&!this._isTransitioning){e(this._element).hasClass(pe)&&(this._isTransitioning=!0);var n=e.Event(he.SHOW,{relatedTarget:t});e(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),e(this._element).on(he.CLICK_DISMISS,be,(function(t){return i.hide(t)})),e(this._dialog).on(he.MOUSEDOWN_DISMISS,(function(){e(i._element).one(he.MOUSEUP_DISMISS,(function(t){e(t.target).is(i._element)&&(i._ignoreBackdropClick=!0)}))})),this._showBackdrop((function(){return i._showElement(t)})))}},i.hide=function(t){var i=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var n=e.Event(he.HIDE);if(e(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var s=e(this._element).hasClass(pe);if(s&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),e(document).off(he.FOCUSIN),e(this._element).removeClass(ge),e(this._element).off(he.CLICK_DISMISS),e(this._dialog).off(he.MOUSEDOWN_DISMISS),s){var r=u.getTransitionDurationFromElement(this._element);e(this._element).one(u.TRANSITION_END,(function(t){return i._hideModal(t)})).emulateTransitionEnd(r)}else this._hideModal()}}},i.dispose=function(){[window,this._element,this._dialog].forEach((function(t){return e(t).off(re)})),e(document).off(he.FOCUSIN),e.removeData(this._element,se),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},i.handleUpdate=function(){this._adjustDialog()},i._getConfig=function(t){return t=a({},ae,{},t),u.typeCheckConfig(ne,t,le),t},i._triggerBackdropTransition=function(){var t=this;if("static"===this._config.backdrop){var i=e.Event(he.HIDE_PREVENTED);if(e(this._element).trigger(i),i.defaultPrevented)return;this._element.classList.add(me);var n=u.getTransitionDurationFromElement(this._element);e(this._element).one(u.TRANSITION_END,(function(){t._element.classList.remove(me)})).emulateTransitionEnd(n),this._element.focus()}else this.hide()},i._showElement=function(t){var i=this,n=e(this._element).hasClass(pe),s=this._dialog?this._dialog.querySelector(ve):null;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),e(this._dialog).hasClass(ue)&&s?s.scrollTop=0:this._element.scrollTop=0,n&&u.reflow(this._element),e(this._element).addClass(ge),this._config.focus&&this._enforceFocus();var r=e.Event(he.SHOWN,{relatedTarget:t}),o=function(){i._config.focus&&i._element.focus(),i._isTransitioning=!1,e(i._element).trigger(r)};if(n){var a=u.getTransitionDurationFromElement(this._dialog);e(this._dialog).one(u.TRANSITION_END,o).emulateTransitionEnd(a)}else o()},i._enforceFocus=function(){var t=this;e(document).off(he.FOCUSIN).on(he.FOCUSIN,(function(i){document!==i.target&&t._element!==i.target&&0===e(t._element).has(i.target).length&&t._element.focus()}))},i._setEscapeEvent=function(){var t=this;this._isShown&&this._config.keyboard?e(this._element).on(he.KEYDOWN_DISMISS,(function(e){27===e.which&&t._triggerBackdropTransition()})):this._isShown||e(this._element).off(he.KEYDOWN_DISMISS)},i._setResizeEvent=function(){var t=this;this._isShown?e(window).on(he.RESIZE,(function(e){return t.handleUpdate(e)})):e(window).off(he.RESIZE)},i._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop((function(){e(document.body).removeClass(fe),t._resetAdjustments(),t._resetScrollbar(),e(t._element).trigger(he.HIDDEN)}))},i._removeBackdrop=function(){this._backdrop&&(e(this._backdrop).remove(),this._backdrop=null)},i._showBackdrop=function(t){var i=this,n=e(this._element).hasClass(pe)?pe:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=de,n&&this._backdrop.classList.add(n),e(this._backdrop).appendTo(document.body),e(this._element).on(he.CLICK_DISMISS,(function(t){i._ignoreBackdropClick?i._ignoreBackdropClick=!1:t.target===t.currentTarget&&i._triggerBackdropTransition()})),n&&u.reflow(this._backdrop),e(this._backdrop).addClass(ge),!t)return;if(!n)return void t();var s=u.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(u.TRANSITION_END,t).emulateTransitionEnd(s)}else if(!this._isShown&&this._backdrop){e(this._backdrop).removeClass(ge);var r=function(){i._removeBackdrop(),t&&t()};if(e(this._element).hasClass(pe)){var o=u.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(u.TRANSITION_END,r).emulateTransitionEnd(o)}else r()}else t&&t()},i._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},i._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},i._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},i._setScrollbar=function(){var t=this;if(this._isBodyOverflowing){var i=[].slice.call(document.querySelectorAll(we)),n=[].slice.call(document.querySelectorAll(ke));e(i).each((function(i,n){var s=n.style.paddingRight,r=e(n).css("padding-right");e(n).data("padding-right",s).css("padding-right",parseFloat(r)+t._scrollbarWidth+"px")})),e(n).each((function(i,n){var s=n.style.marginRight,r=e(n).css("margin-right");e(n).data("margin-right",s).css("margin-right",parseFloat(r)-t._scrollbarWidth+"px")}));var s=document.body.style.paddingRight,r=e(document.body).css("padding-right");e(document.body).data("padding-right",s).css("padding-right",parseFloat(r)+this._scrollbarWidth+"px")}e(document.body).addClass(fe)},i._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(we));e(t).each((function(t,i){var n=e(i).data("padding-right");e(i).removeData("padding-right"),i.style.paddingRight=n||""}));var i=[].slice.call(document.querySelectorAll(""+ke));e(i).each((function(t,i){var n=e(i).data("margin-right");void 0!==n&&e(i).css("margin-right",n).removeData("margin-right")}));var n=e(document.body).data("padding-right");e(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},i._getScrollbarWidth=function(){var t=document.createElement("div");t.className=ce,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},t._jQueryInterface=function(i,n){return this.each((function(){var s=e(this).data(se),r=a({},ae,{},e(this).data(),{},"object"==typeof i&&i?i:{});if(s||(s=new t(this,r),e(this).data(se,s)),"string"==typeof i){if(void 0===s[i])throw new TypeError('No method named "'+i+'"');s[i](n)}else r.show&&s.show(n)}))},s(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return ae}}]),t}();e(document).on(he.CLICK_DATA_API,xe,(function(t){var i,n=this,s=u.getSelectorFromElement(this);s&&(i=document.querySelector(s));var r=e(i).data(se)?"toggle":a({},e(i).data(),{},e(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var o=e(i).one(he.SHOW,(function(t){t.isDefaultPrevented()||o.one(he.HIDDEN,(function(){e(n).is(":visible")&&n.focus()}))}));Se._jQueryInterface.call(e(i),r,this)})),e.fn[ne]=Se._jQueryInterface,e.fn[ne].Constructor=Se,e.fn[ne].noConflict=function(){return e.fn[ne]=oe,Se._jQueryInterface};var Ce=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Me={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Te=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Ae=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function Pe(t,e,i){if(0===t.length)return t;if(i&&"function"==typeof i)return i(t);for(var n=(new window.DOMParser).parseFromString(t,"text/html"),s=Object.keys(e),r=[].slice.call(n.body.querySelectorAll("*")),o=function(t,i){var n=r[t],o=n.nodeName.toLowerCase();if(-1===s.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var a=[].slice.call(n.attributes),l=[].concat(e["*"]||[],e[o]||[]);a.forEach((function(t){(function(t,e){var i=t.nodeName.toLowerCase();if(-1!==e.indexOf(i))return-1===Ce.indexOf(i)||Boolean(t.nodeValue.match(Te)||t.nodeValue.match(Ae));for(var n=e.filter((function(t){return t instanceof RegExp})),s=0,r=n.length;s<r;s++)if(i.match(n[s]))return!0;return!1})(t,l)||n.removeAttribute(t.nodeName)}))},a=0,l=r.length;a<l;a++)o(a);return n.body.innerHTML}var Ne="tooltip",De="bs.tooltip",Le="."+De,Ee=e.fn[Ne],_e="bs-tooltip",Oe=new RegExp("(^|\\s)"+_e+"\\S+","g"),Fe=["sanitize","whiteList","sanitizeFn"],Re={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},Ie={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Be={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:Me,popperConfig:null},je="show",ze="out",He={HIDE:"hide"+Le,HIDDEN:"hidden"+Le,SHOW:"show"+Le,SHOWN:"shown"+Le,INSERTED:"inserted"+Le,CLICK:"click"+Le,FOCUSIN:"focusin"+Le,FOCUSOUT:"focusout"+Le,MOUSEENTER:"mouseenter"+Le,MOUSELEAVE:"mouseleave"+Le},Ue="fade",Ve="show",Ye=".tooltip-inner",qe=".arrow",$e="hover",We="focus",Ge="click",Xe="manual",Ke=function(){function t(t,e){if(void 0===i)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var n=t.prototype;return n.enable=function(){this._isEnabled=!0},n.disable=function(){this._isEnabled=!1},n.toggleEnabled=function(){this._isEnabled=!this._isEnabled},n.toggle=function(t){if(this._isEnabled)if(t){var i=this.constructor.DATA_KEY,n=e(t.currentTarget).data(i);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(i,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(e(this.getTipElement()).hasClass(Ve))return void this._leave(null,this);this._enter(null,this)}},n.dispose=function(){clearTimeout(this._timeout),e.removeData(this.element,this.constructor.DATA_KEY),e(this.element).off(this.constructor.EVENT_KEY),e(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&e(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},n.show=function(){var t=this;if("none"===e(this.element).css("display"))throw new Error("Please use show on visible elements");var n=e.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){e(this.element).trigger(n);var s=u.findShadowRoot(this.element),r=e.contains(null!==s?s:this.element.ownerDocument.documentElement,this.element);if(n.isDefaultPrevented()||!r)return;var o=this.getTipElement(),a=u.getUID(this.constructor.NAME);o.setAttribute("id",a),this.element.setAttribute("aria-describedby",a),this.setContent(),this.config.animation&&e(o).addClass(Ue);var l="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,h=this._getAttachment(l);this.addAttachmentClass(h);var c=this._getContainer();e(o).data(this.constructor.DATA_KEY,this),e.contains(this.element.ownerDocument.documentElement,this.tip)||e(o).appendTo(c),e(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new i(this.element,o,this._getPopperConfig(h)),e(o).addClass(Ve),"ontouchstart"in document.documentElement&&e(document.body).children().on("mouseover",null,e.noop);var d=function(){t.config.animation&&t._fixTransition();var i=t._hoverState;t._hoverState=null,e(t.element).trigger(t.constructor.Event.SHOWN),i===ze&&t._leave(null,t)};if(e(this.tip).hasClass(Ue)){var f=u.getTransitionDurationFromElement(this.tip);e(this.tip).one(u.TRANSITION_END,d).emulateTransitionEnd(f)}else d()}},n.hide=function(t){var i=this,n=this.getTipElement(),s=e.Event(this.constructor.Event.HIDE),r=function(){i._hoverState!==je&&n.parentNode&&n.parentNode.removeChild(n),i._cleanTipClass(),i.element.removeAttribute("aria-describedby"),e(i.element).trigger(i.constructor.Event.HIDDEN),null!==i._popper&&i._popper.destroy(),t&&t()};if(e(this.element).trigger(s),!s.isDefaultPrevented()){if(e(n).removeClass(Ve),"ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),this._activeTrigger[Ge]=!1,this._activeTrigger[We]=!1,this._activeTrigger[$e]=!1,e(this.tip).hasClass(Ue)){var o=u.getTransitionDurationFromElement(n);e(n).one(u.TRANSITION_END,r).emulateTransitionEnd(o)}else r();this._hoverState=""}},n.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},n.isWithContent=function(){return Boolean(this.getTitle())},n.addAttachmentClass=function(t){e(this.getTipElement()).addClass(_e+"-"+t)},n.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},n.setContent=function(){var t=this.getTipElement();this.setElementContent(e(t.querySelectorAll(Ye)),this.getTitle()),e(t).removeClass(Ue+" "+Ve)},n.setElementContent=function(t,i){"object"!=typeof i||!i.nodeType&&!i.jquery?this.config.html?(this.config.sanitize&&(i=Pe(i,this.config.whiteList,this.config.sanitizeFn)),t.html(i)):t.text(i):this.config.html?e(i).parent().is(t)||t.empty().append(i):t.text(e(i).text())},n.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},n._getPopperConfig=function(t){var e=this;return a({},{placement:t,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:qe},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}},{},this.config.popperConfig)},n._getOffset=function(){var t=this,e={};return"function"==typeof this.config.offset?e.fn=function(e){return e.offsets=a({},e.offsets,{},t.config.offset(e.offsets,t.element)||{}),e}:e.offset=this.config.offset,e},n._getContainer=function(){return!1===this.config.container?document.body:u.isElement(this.config.container)?e(this.config.container):e(document).find(this.config.container)},n._getAttachment=function(t){return Ie[t.toUpperCase()]},n._setListeners=function(){var t=this;this.config.trigger.split(" ").forEach((function(i){if("click"===i)e(t.element).on(t.constructor.Event.CLICK,t.config.selector,(function(e){return t.toggle(e)}));else if(i!==Xe){var n=i===$e?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,s=i===$e?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;e(t.element).on(n,t.config.selector,(function(e){return t._enter(e)})).on(s,t.config.selector,(function(e){return t._leave(e)}))}})),this._hideModalHandler=function(){t.element&&t.hide()},e(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=a({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},n._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},n._enter=function(t,i){var n=this.constructor.DATA_KEY;(i=i||e(t.currentTarget).data(n))||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,i)),t&&(i._activeTrigger["focusin"===t.type?We:$e]=!0),e(i.getTipElement()).hasClass(Ve)||i._hoverState===je?i._hoverState=je:(clearTimeout(i._timeout),i._hoverState=je,i.config.delay&&i.config.delay.show?i._timeout=setTimeout((function(){i._hoverState===je&&i.show()}),i.config.delay.show):i.show())},n._leave=function(t,i){var n=this.constructor.DATA_KEY;(i=i||e(t.currentTarget).data(n))||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,i)),t&&(i._activeTrigger["focusout"===t.type?We:$e]=!1),i._isWithActiveTrigger()||(clearTimeout(i._timeout),i._hoverState=ze,i.config.delay&&i.config.delay.hide?i._timeout=setTimeout((function(){i._hoverState===ze&&i.hide()}),i.config.delay.hide):i.hide())},n._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},n._getConfig=function(t){var i=e(this.element).data();return Object.keys(i).forEach((function(t){-1!==Fe.indexOf(t)&&delete i[t]})),"number"==typeof(t=a({},this.constructor.Default,{},i,{},"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),u.typeCheckConfig(Ne,t,this.constructor.DefaultType),t.sanitize&&(t.template=Pe(t.template,t.whiteList,t.sanitizeFn)),t},n._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},n._cleanTipClass=function(){var t=e(this.getTipElement()),i=t.attr("class").match(Oe);null!==i&&i.length&&t.removeClass(i.join(""))},n._handlePopperPlacementChange=function(t){var e=t.instance;this.tip=e.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},n._fixTransition=function(){var t=this.getTipElement(),i=this.config.animation;null===t.getAttribute("x-placement")&&(e(t).removeClass(Ue),this.config.animation=!1,this.hide(),this.show(),this.config.animation=i)},t._jQueryInterface=function(i){return this.each((function(){var n=e(this).data(De),s="object"==typeof i&&i;if((n||!/dispose|hide/.test(i))&&(n||(n=new t(this,s),e(this).data(De,n)),"string"==typeof i)){if(void 0===n[i])throw new TypeError('No method named "'+i+'"');n[i]()}}))},s(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return Be}},{key:"NAME",get:function(){return Ne}},{key:"DATA_KEY",get:function(){return De}},{key:"Event",get:function(){return He}},{key:"EVENT_KEY",get:function(){return Le}},{key:"DefaultType",get:function(){return Re}}]),t}();e.fn[Ne]=Ke._jQueryInterface,e.fn[Ne].Constructor=Ke,e.fn[Ne].noConflict=function(){return e.fn[Ne]=Ee,Ke._jQueryInterface};var Je="popover",Ze="bs.popover",Qe="."+Ze,ti=e.fn[Je],ei="bs-popover",ii=new RegExp("(^|\\s)"+ei+"\\S+","g"),ni=a({},Ke.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),si=a({},Ke.DefaultType,{content:"(string|element|function)"}),ri="fade",oi="show",ai=".popover-header",li=".popover-body",hi={HIDE:"hide"+Qe,HIDDEN:"hidden"+Qe,SHOW:"show"+Qe,SHOWN:"shown"+Qe,INSERTED:"inserted"+Qe,CLICK:"click"+Qe,FOCUSIN:"focusin"+Qe,FOCUSOUT:"focusout"+Qe,MOUSEENTER:"mouseenter"+Qe,MOUSELEAVE:"mouseleave"+Qe},ui=function(t){var i,n;function r(){return t.apply(this,arguments)||this}n=t,(i=r).prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n;var o=r.prototype;return o.isWithContent=function(){return this.getTitle()||this._getContent()},o.addAttachmentClass=function(t){e(this.getTipElement()).addClass(ei+"-"+t)},o.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},o.setContent=function(){var t=e(this.getTipElement());this.setElementContent(t.find(ai),this.getTitle());var i=this._getContent();"function"==typeof i&&(i=i.call(this.element)),this.setElementContent(t.find(li),i),t.removeClass(ri+" "+oi)},o._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},o._cleanTipClass=function(){var t=e(this.getTipElement()),i=t.attr("class").match(ii);null!==i&&i.length>0&&t.removeClass(i.join(""))},r._jQueryInterface=function(t){return this.each((function(){var i=e(this).data(Ze),n="object"==typeof t?t:null;if((i||!/dispose|hide/.test(t))&&(i||(i=new r(this,n),e(this).data(Ze,i)),"string"==typeof t)){if(void 0===i[t])throw new TypeError('No method named "'+t+'"');i[t]()}}))},s(r,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return ni}},{key:"NAME",get:function(){return Je}},{key:"DATA_KEY",get:function(){return Ze}},{key:"Event",get:function(){return hi}},{key:"EVENT_KEY",get:function(){return Qe}},{key:"DefaultType",get:function(){return si}}]),r}(Ke);e.fn[Je]=ui._jQueryInterface,e.fn[Je].Constructor=ui,e.fn[Je].noConflict=function(){return e.fn[Je]=ti,ui._jQueryInterface};var ci="scrollspy",di="bs.scrollspy",fi="."+di,pi=e.fn[ci],gi={offset:10,method:"auto",target:""},mi={offset:"number",method:"string",target:"(string|element)"},yi={ACTIVATE:"activate"+fi,SCROLL:"scroll"+fi,LOAD_DATA_API:"load"+fi+".data-api"},vi="dropdown-item",xi="active",bi='[data-spy="scroll"]',wi=".nav, .list-group",ki=".nav-link",Si=".nav-item",Ci=".list-group-item",Mi=".dropdown",Ti=".dropdown-item",Ai=".dropdown-toggle",Pi="offset",Ni="position",Di=function(){function t(t,i){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(i),this._selector=this._config.target+" "+ki+","+this._config.target+" "+Ci+","+this._config.target+" "+Ti,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,e(this._scrollElement).on(yi.SCROLL,(function(t){return n._process(t)})),this.refresh(),this._process()}var i=t.prototype;return i.refresh=function(){var t=this,i=this._scrollElement===this._scrollElement.window?Pi:Ni,n="auto"===this._config.method?i:this._config.method,s=n===Ni?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map((function(t){var i,r=u.getSelectorFromElement(t);if(r&&(i=document.querySelector(r)),i){var o=i.getBoundingClientRect();if(o.width||o.height)return[e(i)[n]().top+s,r]}return null})).filter((function(t){return t})).sort((function(t,e){return t[0]-e[0]})).forEach((function(e){t._offsets.push(e[0]),t._targets.push(e[1])}))},i.dispose=function(){e.removeData(this._element,di),e(this._scrollElement).off(fi),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},i._getConfig=function(t){if("string"!=typeof(t=a({},gi,{},"object"==typeof t&&t?t:{})).target){var i=e(t.target).attr("id");i||(i=u.getUID(ci),e(t.target).attr("id",i)),t.target="#"+i}return u.typeCheckConfig(ci,t,mi),t},i._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},i._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},i._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},i._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=i){var n=this._targets[this._targets.length-1];this._activeTarget!==n&&this._activate(n)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var s=this._offsets.length;s--;){this._activeTarget!==this._targets[s]&&t>=this._offsets[s]&&(void 0===this._offsets[s+1]||t<this._offsets[s+1])&&this._activate(this._targets[s])}}},i._activate=function(t){this._activeTarget=t,this._clear();var i=this._selector.split(",").map((function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'})),n=e([].slice.call(document.querySelectorAll(i.join(","))));n.hasClass(vi)?(n.closest(Mi).find(Ai).addClass(xi),n.addClass(xi)):(n.addClass(xi),n.parents(wi).prev(ki+", "+Ci).addClass(xi),n.parents(wi).prev(Si).children(ki).addClass(xi)),e(this._scrollElement).trigger(yi.ACTIVATE,{relatedTarget:t})},i._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter((function(t){return t.classList.contains(xi)})).forEach((function(t){return t.classList.remove(xi)}))},t._jQueryInterface=function(i){return this.each((function(){var n=e(this).data(di);if(n||(n=new t(this,"object"==typeof i&&i),e(this).data(di,n)),"string"==typeof i){if(void 0===n[i])throw new TypeError('No method named "'+i+'"');n[i]()}}))},s(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return gi}}]),t}();e(window).on(yi.LOAD_DATA_API,(function(){for(var t=[].slice.call(document.querySelectorAll(bi)),i=t.length;i--;){var n=e(t[i]);Di._jQueryInterface.call(n,n.data())}})),e.fn[ci]=Di._jQueryInterface,e.fn[ci].Constructor=Di,e.fn[ci].noConflict=function(){return e.fn[ci]=pi,Di._jQueryInterface};var Li="tab",Ei="bs.tab",_i="."+Ei,Oi=e.fn[Li],Fi={HIDE:"hide"+_i,HIDDEN:"hidden"+_i,SHOW:"show"+_i,SHOWN:"shown"+_i,CLICK_DATA_API:"click"+_i+".data-api"},Ri="dropdown-menu",Ii="active",Bi="disabled",ji="fade",zi="show",Hi=".dropdown",Ui=".nav, .list-group",Vi=".active",Yi="> li > .active",qi='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',$i=".dropdown-toggle",Wi="> .dropdown-menu .active",Gi=function(){function t(t){this._element=t}var i=t.prototype;return i.show=function(){var t=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&e(this._element).hasClass(Ii)||e(this._element).hasClass(Bi))){var i,n,s=e(this._element).closest(Ui)[0],r=u.getSelectorFromElement(this._element);if(s){var o="UL"===s.nodeName||"OL"===s.nodeName?Yi:Vi;n=(n=e.makeArray(e(s).find(o)))[n.length-1]}var a=e.Event(Fi.HIDE,{relatedTarget:this._element}),l=e.Event(Fi.SHOW,{relatedTarget:n});if(n&&e(n).trigger(a),e(this._element).trigger(l),!l.isDefaultPrevented()&&!a.isDefaultPrevented()){r&&(i=document.querySelector(r)),this._activate(this._element,s);var h=function(){var i=e.Event(Fi.HIDDEN,{relatedTarget:t._element}),s=e.Event(Fi.SHOWN,{relatedTarget:n});e(n).trigger(i),e(t._element).trigger(s)};i?this._activate(i,i.parentNode,h):h()}}},i.dispose=function(){e.removeData(this._element,Ei),this._element=null},i._activate=function(t,i,n){var s=this,r=(!i||"UL"!==i.nodeName&&"OL"!==i.nodeName?e(i).children(Vi):e(i).find(Yi))[0],o=n&&r&&e(r).hasClass(ji),a=function(){return s._transitionComplete(t,r,n)};if(r&&o){var l=u.getTransitionDurationFromElement(r);e(r).removeClass(zi).one(u.TRANSITION_END,a).emulateTransitionEnd(l)}else a()},i._transitionComplete=function(t,i,n){if(i){e(i).removeClass(Ii);var s=e(i.parentNode).find(Wi)[0];s&&e(s).removeClass(Ii),"tab"===i.getAttribute("role")&&i.setAttribute("aria-selected",!1)}if(e(t).addClass(Ii),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),u.reflow(t),t.classList.contains(ji)&&t.classList.add(zi),t.parentNode&&e(t.parentNode).hasClass(Ri)){var r=e(t).closest(Hi)[0];if(r){var o=[].slice.call(r.querySelectorAll($i));e(o).addClass(Ii)}t.setAttribute("aria-expanded",!0)}n&&n()},t._jQueryInterface=function(i){return this.each((function(){var n=e(this),s=n.data(Ei);if(s||(s=new t(this),n.data(Ei,s)),"string"==typeof i){if(void 0===s[i])throw new TypeError('No method named "'+i+'"');s[i]()}}))},s(t,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),t}();e(document).on(Fi.CLICK_DATA_API,qi,(function(t){t.preventDefault(),Gi._jQueryInterface.call(e(this),"show")})),e.fn[Li]=Gi._jQueryInterface,e.fn[Li].Constructor=Gi,e.fn[Li].noConflict=function(){return e.fn[Li]=Oi,Gi._jQueryInterface};var Xi="toast",Ki="bs.toast",Ji="."+Ki,Zi=e.fn[Xi],Qi={CLICK_DISMISS:"click.dismiss"+Ji,HIDE:"hide"+Ji,HIDDEN:"hidden"+Ji,SHOW:"show"+Ji,SHOWN:"shown"+Ji},tn="fade",en="hide",nn="show",sn="showing",rn={animation:"boolean",autohide:"boolean",delay:"number"},on={animation:!0,autohide:!0,delay:500},an='[data-dismiss="toast"]',ln=function(){function t(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var i=t.prototype;return i.show=function(){var t=this,i=e.Event(Qi.SHOW);if(e(this._element).trigger(i),!i.isDefaultPrevented()){this._config.animation&&this._element.classList.add(tn);var n=function(){t._element.classList.remove(sn),t._element.classList.add(nn),e(t._element).trigger(Qi.SHOWN),t._config.autohide&&(t._timeout=setTimeout((function(){t.hide()}),t._config.delay))};if(this._element.classList.remove(en),u.reflow(this._element),this._element.classList.add(sn),this._config.animation){var s=u.getTransitionDurationFromElement(this._element);e(this._element).one(u.TRANSITION_END,n).emulateTransitionEnd(s)}else n()}},i.hide=function(){if(this._element.classList.contains(nn)){var t=e.Event(Qi.HIDE);e(this._element).trigger(t),t.isDefaultPrevented()||this._close()}},i.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(nn)&&this._element.classList.remove(nn),e(this._element).off(Qi.CLICK_DISMISS),e.removeData(this._element,Ki),this._element=null,this._config=null},i._getConfig=function(t){return t=a({},on,{},e(this._element).data(),{},"object"==typeof t&&t?t:{}),u.typeCheckConfig(Xi,t,this.constructor.DefaultType),t},i._setListeners=function(){var t=this;e(this._element).on(Qi.CLICK_DISMISS,an,(function(){return t.hide()}))},i._close=function(){var t=this,i=function(){t._element.classList.add(en),e(t._element).trigger(Qi.HIDDEN)};if(this._element.classList.remove(nn),this._config.animation){var n=u.getTransitionDurationFromElement(this._element);e(this._element).one(u.TRANSITION_END,i).emulateTransitionEnd(n)}else i()},t._jQueryInterface=function(i){return this.each((function(){var n=e(this),s=n.data(Ki);if(s||(s=new t(this,"object"==typeof i&&i),n.data(Ki,s)),"string"==typeof i){if(void 0===s[i])throw new TypeError('No method named "'+i+'"');s[i](this)}}))},s(t,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"DefaultType",get:function(){return rn}},{key:"Default",get:function(){return on}}]),t}();e.fn[Xi]=ln._jQueryInterface,e.fn[Xi].Constructor=ln,e.fn[Xi].noConflict=function(){return e.fn[Xi]=Zi,ln._jQueryInterface},t.Alert=x,t.Button=R,t.Carousel=dt,t.Collapse=Pt,t.Dropdown=ie,t.Modal=Se,t.Popover=ui,t.Scrollspy=Di,t.Tab=Gi,t.Toast=ln,t.Tooltip=Ke,t.Util=u,Object.defineProperty(t,"__esModule",{value:!0})})),
/*!
 * Vue.js v2.6.10
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Vue=e()}(this,(function(){"use strict";var t=Object.freeze({});function e(t){return null==t}function i(t){return null!=t}function n(t){return!0===t}function s(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function r(t){return null!==t&&"object"==typeof t}var o=Object.prototype.toString;function a(t){return o.call(t).slice(8,-1)}function l(t){return"[object Object]"===o.call(t)}function h(t){return"[object RegExp]"===o.call(t)}function u(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function c(t){return i(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function d(t){return null==t?"":Array.isArray(t)||l(t)&&t.toString===o?JSON.stringify(t,null,2):String(t)}function f(t){var e=parseFloat(t);return isNaN(e)?t:e}function p(t,e){for(var i=Object.create(null),n=t.split(","),s=0;s<n.length;s++)i[n[s]]=!0;return e?function(t){return i[t.toLowerCase()]}:function(t){return i[t]}}var g=p("slot,component",!0),m=p("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var i=t.indexOf(e);if(i>-1)return t.splice(i,1)}}var v=Object.prototype.hasOwnProperty;function x(t,e){return v.call(t,e)}function b(t){var e=Object.create(null);return function(i){return e[i]||(e[i]=t(i))}}var w=/-(\w)/g,k=b((function(t){return t.replace(w,(function(t,e){return e?e.toUpperCase():""}))})),S=b((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),C=/\B([A-Z])/g,M=b((function(t){return t.replace(C,"-$1").toLowerCase()}));var T=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function i(i){var n=arguments.length;return n?n>1?t.apply(e,arguments):t.call(e,i):t.call(e)}return i._length=t.length,i};function A(t,e){e=e||0;for(var i=t.length-e,n=new Array(i);i--;)n[i]=t[i+e];return n}function P(t,e){for(var i in e)t[i]=e[i];return t}function N(t){for(var e={},i=0;i<t.length;i++)t[i]&&P(e,t[i]);return e}function D(t,e,i){}var L=function(t,e,i){return!1},E=function(t){return t};function _(t,e){if(t===e)return!0;var i=r(t),n=r(e);if(!i||!n)return!i&&!n&&String(t)===String(e);try{var s=Array.isArray(t),o=Array.isArray(e);if(s&&o)return t.length===e.length&&t.every((function(t,i){return _(t,e[i])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(s||o)return!1;var a=Object.keys(t),l=Object.keys(e);return a.length===l.length&&a.every((function(i){return _(t[i],e[i])}))}catch(t){return!1}}function O(t,e){for(var i=0;i<t.length;i++)if(_(t[i],e))return i;return-1}function F(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var R="data-server-rendered",I=["component","directive","filter"],B=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],j={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!0,devtools:!0,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:L,isReservedAttr:L,isUnknownElement:L,getTagNamespace:D,parsePlatformTagName:E,mustUseProp:L,async:!0,_lifecycleHooks:B},z=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function H(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function U(t,e,i,n){Object.defineProperty(t,e,{value:i,enumerable:!!n,writable:!0,configurable:!0})}var V=new RegExp("[^"+z.source+".$_\\d]");var Y,q="__proto__"in{},$="undefined"!=typeof window,W="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,G=W&&WXEnvironment.platform.toLowerCase(),X=$&&window.navigator.userAgent.toLowerCase(),K=X&&/msie|trident/.test(X),J=X&&X.indexOf("msie 9.0")>0,Z=X&&X.indexOf("edge/")>0,Q=(X&&X.indexOf("android"),X&&/iphone|ipad|ipod|ios/.test(X)||"ios"===G),tt=(X&&/chrome\/\d+/.test(X),X&&/phantomjs/.test(X),X&&X.match(/firefox\/(\d+)/)),et={}.watch,it=!1;if($)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){it=!0}}),window.addEventListener("test-passive",null,nt)}catch(t){}var st=function(){return void 0===Y&&(Y=!$&&!W&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),Y},rt=$&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ot(t){return"function"==typeof t&&/native code/.test(t.toString())}var at,lt="undefined"!=typeof Symbol&&ot(Symbol)&&"undefined"!=typeof Reflect&&ot(Reflect.ownKeys);at="undefined"!=typeof Set&&ot(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ht,ut,ct,dt=D,ft="undefined"!=typeof console,pt=/(?:^|[-_])(\w)/g;ht=function(t,e){var i=e?dt(e):"";j.warnHandler?j.warnHandler.call(null,t,e,i):ft&&!j.silent&&console.error("[Vue warn]: "+t+i)},ut=function(t,e){ft&&!j.silent&&console.warn("[Vue tip]: "+t+(e?dt(e):""))},ct=function(t,e){if(t.$root===t)return"<Root>";var i="function"==typeof t&&null!=t.cid?t.options:t._isVue?t.$options||t.constructor.options:t,n=i.name||i._componentTag,s=i.__file;if(!n&&s){var r=s.match(/([^/\\]+)\.vue$/);n=r&&r[1]}return(n?"<"+function(t){return t.replace(pt,(function(t){return t.toUpperCase()})).replace(/[-_]/g,"")}(n)+">":"<Anonymous>")+(s&&!1!==e?" at "+s:"")};dt=function(t){if(t._isVue&&t.$parent){for(var e=[],i=0;t;){if(e.length>0){var n=e[e.length-1];if(n.constructor===t.constructor){i++,t=t.$parent;continue}i>0&&(e[e.length-1]=[n,i],i=0)}e.push(t),t=t.$parent}return"\n\nfound in\n\n"+e.map((function(t,e){return""+(0===e?"---\x3e ":function(t,e){for(var i="";e;)e%2==1&&(i+=t),e>1&&(t+=t),e>>=1;return i}(" ",5+2*e))+(Array.isArray(t)?ct(t[0])+"... ("+t[1]+" recursive calls)":ct(t))})).join("\n")}return"\n\n(found in "+ct(t)+")"};var gt=0,mt=function(){this.id=gt++,this.subs=[]};mt.prototype.addSub=function(t){this.subs.push(t)},mt.prototype.removeSub=function(t){y(this.subs,t)},mt.prototype.depend=function(){mt.target&&mt.target.addDep(this)},mt.prototype.notify=function(){var t=this.subs.slice();j.async||t.sort((function(t,e){return t.id-e.id}));for(var e=0,i=t.length;e<i;e++)t[e].update()},mt.target=null;var yt=[];function vt(t){yt.push(t),mt.target=t}function xt(){yt.pop(),mt.target=yt[yt.length-1]}var bt=function(t,e,i,n,s,r,o,a){this.tag=t,this.data=e,this.children=i,this.text=n,this.elm=s,this.ns=void 0,this.context=r,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},wt={child:{configurable:!0}};wt.child.get=function(){return this.componentInstance},Object.defineProperties(bt.prototype,wt);var kt=function(t){void 0===t&&(t="");var e=new bt;return e.text=t,e.isComment=!0,e};function St(t){return new bt(void 0,void 0,void 0,String(t))}function Ct(t){var e=new bt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var Mt=Array.prototype,Tt=Object.create(Mt);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(t){var e=Mt[t];U(Tt,t,(function(){for(var i=[],n=arguments.length;n--;)i[n]=arguments[n];var s,r=e.apply(this,i),o=this.__ob__;switch(t){case"push":case"unshift":s=i;break;case"splice":s=i.slice(2)}return s&&o.observeArray(s),o.dep.notify(),r}))}));var At=Object.getOwnPropertyNames(Tt),Pt=!0;function Nt(t){Pt=t}var Dt=function(t){this.value=t,this.dep=new mt,this.vmCount=0,U(t,"__ob__",this),Array.isArray(t)?(q?function(t,e){t.__proto__=e}(t,Tt):function(t,e,i){for(var n=0,s=i.length;n<s;n++){var r=i[n];U(t,r,e[r])}}(t,Tt,At),this.observeArray(t)):this.walk(t)};function Lt(t,e){var i;if(r(t)&&!(t instanceof bt))return x(t,"__ob__")&&t.__ob__ instanceof Dt?i=t.__ob__:Pt&&!st()&&(Array.isArray(t)||l(t))&&Object.isExtensible(t)&&!t._isVue&&(i=new Dt(t)),e&&i&&i.vmCount++,i}function Et(t,e,i,n,s){var r=new mt,o=Object.getOwnPropertyDescriptor(t,e);if(!o||!1!==o.configurable){var a=o&&o.get,l=o&&o.set;a&&!l||2!==arguments.length||(i=t[e]);var h=!s&&Lt(i);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=a?a.call(t):i;return mt.target&&(r.depend(),h&&(h.dep.depend(),Array.isArray(e)&&Ft(e))),e},set:function(e){var o=a?a.call(t):i;e===o||e!=e&&o!=o||(n&&n(),a&&!l||(l?l.call(t,e):i=e,h=!s&&Lt(e),r.notify()))}})}}function _t(t,i,n){if((e(t)||s(t))&&ht("Cannot set reactive property on undefined, null, or primitive value: "+t),Array.isArray(t)&&u(i))return t.length=Math.max(t.length,i),t.splice(i,1,n),n;if(i in t&&!(i in Object.prototype))return t[i]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?(ht("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),n):r?(Et(r.value,i,n),r.dep.notify(),n):(t[i]=n,n)}function Ot(t,i){if((e(t)||s(t))&&ht("Cannot delete reactive property on undefined, null, or primitive value: "+t),Array.isArray(t)&&u(i))t.splice(i,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount?ht("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):x(t,i)&&(delete t[i],n&&n.dep.notify())}}function Ft(t){for(var e=void 0,i=0,n=t.length;i<n;i++)(e=t[i])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Ft(e)}Dt.prototype.walk=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)Et(t,e[i])},Dt.prototype.observeArray=function(t){for(var e=0,i=t.length;e<i;e++)Lt(t[e])};var Rt=j.optionMergeStrategies;function It(t,e){if(!e)return t;for(var i,n,s,r=lt?Reflect.ownKeys(e):Object.keys(e),o=0;o<r.length;o++)"__ob__"!==(i=r[o])&&(n=t[i],s=e[i],x(t,i)?n!==s&&l(n)&&l(s)&&It(n,s):_t(t,i,s));return t}function Bt(t,e,i){return i?function(){var n="function"==typeof e?e.call(i,i):e,s="function"==typeof t?t.call(i,i):t;return n?It(n,s):s}:e?t?function(){return It("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function jt(t,e){var i=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return i?function(t){for(var e=[],i=0;i<t.length;i++)-1===e.indexOf(t[i])&&e.push(t[i]);return e}(i):i}function zt(t,e,i,n){var s=Object.create(t||null);return e?(Vt(n,e,i),P(s,e)):s}Rt.el=Rt.propsData=function(t,e,i,n){return i||ht('option "'+n+'" can only be used during instance creation with the `new` keyword.'),Ht(t,e)},Rt.data=function(t,e,i){return i?Bt(t,e,i):e&&"function"!=typeof e?(ht('The "data" option should be a function that returns a per-instance value in component definitions.',i),t):Bt(t,e)},B.forEach((function(t){Rt[t]=jt})),I.forEach((function(t){Rt[t+"s"]=zt})),Rt.watch=function(t,e,i,n){if(t===et&&(t=void 0),e===et&&(e=void 0),!e)return Object.create(t||null);if(Vt(n,e,i),!t)return e;var s={};for(var r in P(s,t),e){var o=s[r],a=e[r];o&&!Array.isArray(o)&&(o=[o]),s[r]=o?o.concat(a):Array.isArray(a)?a:[a]}return s},Rt.props=Rt.methods=Rt.inject=Rt.computed=function(t,e,i,n){if(e&&Vt(n,e,i),!t)return e;var s=Object.create(null);return P(s,t),e&&P(s,e),s},Rt.provide=Bt;var Ht=function(t,e){return void 0===e?t:e};function Ut(t){new RegExp("^[a-zA-Z][\\-\\.0-9_"+z.source+"]*$").test(t)||ht('Invalid component name: "'+t+'". Component names should conform to valid custom element name in html5 specification.'),(g(t)||j.isReservedTag(t))&&ht("Do not use built-in or reserved HTML elements as component id: "+t)}function Vt(t,e,i){l(e)||ht('Invalid value for option "'+t+'": expected an Object, but got '+a(e)+".",i)}function Yt(t,e,i){if(function(t){for(var e in t.components)Ut(e)}(e),"function"==typeof e&&(e=e.options),function(t,e){var i=t.props;if(i){var n,s,r={};if(Array.isArray(i))for(n=i.length;n--;)"string"==typeof(s=i[n])?r[k(s)]={type:null}:ht("props must be strings when using array syntax.");else if(l(i))for(var o in i)s=i[o],r[k(o)]=l(s)?s:{type:s};else ht('Invalid value for option "props": expected an Array or an Object, but got '+a(i)+".",e);t.props=r}}(e,i),function(t,e){var i=t.inject;if(i){var n=t.inject={};if(Array.isArray(i))for(var s=0;s<i.length;s++)n[i[s]]={from:i[s]};else if(l(i))for(var r in i){var o=i[r];n[r]=l(o)?P({from:r},o):{from:o}}else ht('Invalid value for option "inject": expected an Array or an Object, but got '+a(i)+".",e)}}(e,i),function(t){var e=t.directives;if(e)for(var i in e){var n=e[i];"function"==typeof n&&(e[i]={bind:n,update:n})}}(e),!e._base&&(e.extends&&(t=Yt(t,e.extends,i)),e.mixins))for(var n=0,s=e.mixins.length;n<s;n++)t=Yt(t,e.mixins[n],i);var r,o={};for(r in t)h(r);for(r in e)x(t,r)||h(r);function h(n){var s=Rt[n]||Ht;o[n]=s(t[n],e[n],i,n)}return o}function qt(t,e,i,n){if("string"==typeof i){var s=t[e];if(x(s,i))return s[i];var r=k(i);if(x(s,r))return s[r];var o=S(r);if(x(s,o))return s[o];var a=s[i]||s[r]||s[o];return n&&!a&&ht("Failed to resolve "+e.slice(0,-1)+": "+i,t),a}}function $t(t,e,i,n){var s=e[t],o=!x(i,t),l=i[t],h=Jt(Boolean,s.type);if(h>-1)if(o&&!x(s,"default"))l=!1;else if(""===l||l===M(t)){var u=Jt(String,s.type);(u<0||h<u)&&(l=!0)}if(void 0===l){l=function(t,e,i){if(!x(e,"default"))return;var n=e.default;r(n)&&ht('Invalid default value for prop "'+i+'": Props with type Object/Array must use a factory function to return the default value.',t);if(t&&t.$options.propsData&&void 0===t.$options.propsData[i]&&void 0!==t._props[i])return t._props[i];return"function"==typeof n&&"Function"!==Xt(e.type)?n.call(t):n}(n,s,t);var c=Pt;Nt(!0),Lt(l),Nt(c)}return function(t,e,i,n,s){if(t.required&&s)return void ht('Missing required prop: "'+e+'"',n);if(null==i&&!t.required)return;var r=t.type,o=!r||!0===r,l=[];if(r){Array.isArray(r)||(r=[r]);for(var h=0;h<r.length&&!o;h++){var u=Gt(i,r[h]);l.push(u.expectedType||""),o=u.valid}}if(!o)return void ht(function(t,e,i){var n='Invalid prop: type check failed for prop "'+t+'". Expected '+i.map(S).join(", "),s=i[0],r=a(e),o=Zt(e,s),l=Zt(e,r);1===i.length&&Qt(s)&&!function(){var t=[],e=arguments.length;for(;e--;)t[e]=arguments[e];return t.some((function(t){return"boolean"===t.toLowerCase()}))}(s,r)&&(n+=" with value "+o);n+=", got "+r+" ",Qt(r)&&(n+="with value "+l+".");return n}(e,i,l),n);var c=t.validator;c&&(c(i)||ht('Invalid prop: custom validator check failed for prop "'+e+'".',n))}(s,t,l,n,o),l}var Wt=/^(String|Number|Boolean|Function|Symbol)$/;function Gt(t,e){var i,n=Xt(e);if(Wt.test(n)){var s=typeof t;(i=s===n.toLowerCase())||"object"!==s||(i=t instanceof e)}else i="Object"===n?l(t):"Array"===n?Array.isArray(t):t instanceof e;return{valid:i,expectedType:n}}function Xt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Kt(t,e){return Xt(t)===Xt(e)}function Jt(t,e){if(!Array.isArray(e))return Kt(e,t)?0:-1;for(var i=0,n=e.length;i<n;i++)if(Kt(e[i],t))return i;return-1}function Zt(t,e){return"String"===e?'"'+t+'"':"Number"===e?""+Number(t):""+t}function Qt(t){return["string","number","boolean"].some((function(e){return t.toLowerCase()===e}))}function te(t,e,i){vt();try{if(e)for(var n=e;n=n.$parent;){var s=n.$options.errorCaptured;if(s)for(var r=0;r<s.length;r++)try{if(!1===s[r].call(n,t,e,i))return}catch(t){ie(t,n,"errorCaptured hook")}}ie(t,e,i)}finally{xt()}}function ee(t,e,i,n,s){var r;try{(r=i?t.apply(e,i):t.call(e))&&!r._isVue&&c(r)&&!r._handled&&(r.catch((function(t){return te(t,n,s+" (Promise/async)")})),r._handled=!0)}catch(t){te(t,n,s)}return r}function ie(t,e,i){if(j.errorHandler)try{return j.errorHandler.call(null,t,e,i)}catch(e){e!==t&&ne(e,null,"config.errorHandler")}ne(t,e,i)}function ne(t,e,i){if(ht("Error in "+i+': "'+t.toString()+'"',e),!$&&!W||"undefined"==typeof console)throw t;console.error(t)}var se,re,oe,ae=!1,le=[],he=!1;function ue(){he=!1;var t=le.slice(0);le.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&ot(Promise)){var ce=Promise.resolve();se=function(){ce.then(ue),Q&&setTimeout(D)},ae=!0}else if(K||"undefined"==typeof MutationObserver||!ot(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())se="undefined"!=typeof setImmediate&&ot(setImmediate)?function(){setImmediate(ue)}:function(){setTimeout(ue,0)};else{var de=1,fe=new MutationObserver(ue),pe=document.createTextNode(String(de));fe.observe(pe,{characterData:!0}),se=function(){de=(de+1)%2,pe.data=String(de)},ae=!0}function ge(t,e){var i;if(le.push((function(){if(t)try{t.call(e)}catch(t){te(t,e,"nextTick")}else i&&i(e)})),he||(he=!0,se()),!t&&"undefined"!=typeof Promise)return new Promise((function(t){i=t}))}var me,ye=$&&window.performance;ye&&ye.mark&&ye.measure&&ye.clearMarks&&ye.clearMeasures&&(re=function(t){return ye.mark(t)},oe=function(t,e,i){ye.measure(t,e,i),ye.clearMarks(e),ye.clearMarks(i)});var ve=p("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,require"),xe=function(t,e){ht('Property or method "'+e+'" is not defined on the instance but referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',t)},be=function(t,e){ht('Property "'+e+'" must be accessed with "$data.'+e+'" because properties starting with "$" or "_" are not proxied in the Vue instance to prevent conflicts with Vue internalsSee: https://vuejs.org/v2/api/#data',t)},we="undefined"!=typeof Proxy&&ot(Proxy);if(we){var ke=p("stop,prevent,self,ctrl,shift,alt,meta,exact");j.keyCodes=new Proxy(j.keyCodes,{set:function(t,e,i){return ke(e)?(ht("Avoid overwriting built-in modifier in config.keyCodes: ."+e),!1):(t[e]=i,!0)}})}var Se={has:function(t,e){var i=e in t,n=ve(e)||"string"==typeof e&&"_"===e.charAt(0)&&!(e in t.$data);return i||n||(e in t.$data?be(t,e):xe(t,e)),i||!n}},Ce={get:function(t,e){return"string"!=typeof e||e in t||(e in t.$data?be(t,e):xe(t,e)),t[e]}};me=function(t){if(we){var e=t.$options,i=e.render&&e.render._withStripped?Ce:Se;t._renderProxy=new Proxy(t,i)}else t._renderProxy=t};var Me=new at;function Te(t){Ae(t,Me),Me.clear()}function Ae(t,e){var i,n,s=Array.isArray(t);if(!(!s&&!r(t)||Object.isFrozen(t)||t instanceof bt)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(s)for(i=t.length;i--;)Ae(t[i],e);else for(i=(n=Object.keys(t)).length;i--;)Ae(t[n[i]],e)}}var Pe=b((function(t){var e="&"===t.charAt(0),i="~"===(t=e?t.slice(1):t).charAt(0),n="!"===(t=i?t.slice(1):t).charAt(0);return{name:t=n?t.slice(1):t,once:i,capture:n,passive:e}}));function Ne(t,e){function i(){var t=arguments,n=i.fns;if(!Array.isArray(n))return ee(n,null,arguments,e,"v-on handler");for(var s=n.slice(),r=0;r<s.length;r++)ee(s[r],null,t,e,"v-on handler")}return i.fns=t,i}function De(t,i,s,r,o,a){var l,h,u,c;for(l in t)h=t[l],u=i[l],c=Pe(l),e(h)?ht('Invalid handler for event "'+c.name+'": got '+String(h),a):e(u)?(e(h.fns)&&(h=t[l]=Ne(h,a)),n(c.once)&&(h=t[l]=o(c.name,h,c.capture)),s(c.name,h,c.capture,c.passive,c.params)):h!==u&&(u.fns=h,t[l]=u);for(l in i)e(t[l])&&r((c=Pe(l)).name,i[l],c.capture)}function Le(t,s,r){var o;t instanceof bt&&(t=t.data.hook||(t.data.hook={}));var a=t[s];function l(){r.apply(this,arguments),y(o.fns,l)}e(a)?o=Ne([l]):i(a.fns)&&n(a.merged)?(o=a).fns.push(l):o=Ne([a,l]),o.merged=!0,t[s]=o}function Ee(t,e,n,s,r){if(i(e)){if(x(e,n))return t[n]=e[n],r||delete e[n],!0;if(x(e,s))return t[n]=e[s],r||delete e[s],!0}return!1}function _e(t){return s(t)?[St(t)]:Array.isArray(t)?Fe(t):void 0}function Oe(t){return i(t)&&i(t.text)&&!1===t.isComment}function Fe(t,r){var o,a,l,h,u=[];for(o=0;o<t.length;o++)e(a=t[o])||"boolean"==typeof a||(h=u[l=u.length-1],Array.isArray(a)?a.length>0&&(Oe((a=Fe(a,(r||"")+"_"+o))[0])&&Oe(h)&&(u[l]=St(h.text+a[0].text),a.shift()),u.push.apply(u,a)):s(a)?Oe(h)?u[l]=St(h.text+a):""!==a&&u.push(St(a)):Oe(a)&&Oe(h)?u[l]=St(h.text+a.text):(n(t._isVList)&&i(a.tag)&&e(a.key)&&i(r)&&(a.key="__vlist"+r+"_"+o+"__"),u.push(a)));return u}function Re(t,e){if(t){for(var i=Object.create(null),n=lt?Reflect.ownKeys(t):Object.keys(t),s=0;s<n.length;s++){var r=n[s];if("__ob__"!==r){for(var o=t[r].from,a=e;a;){if(a._provided&&x(a._provided,o)){i[r]=a._provided[o];break}a=a.$parent}if(!a)if("default"in t[r]){var l=t[r].default;i[r]="function"==typeof l?l.call(e):l}else ht('Injection "'+r+'" not found',e)}}return i}}function Ie(t,e){if(!t||!t.length)return{};for(var i={},n=0,s=t.length;n<s;n++){var r=t[n],o=r.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,r.context!==e&&r.fnContext!==e||!o||null==o.slot)(i.default||(i.default=[])).push(r);else{var a=o.slot,l=i[a]||(i[a]=[]);"template"===r.tag?l.push.apply(l,r.children||[]):l.push(r)}}for(var h in i)i[h].every(Be)&&delete i[h];return i}function Be(t){return t.isComment&&!t.asyncFactory||" "===t.text}function je(e,i,n){var s,r=Object.keys(i).length>0,o=e?!!e.$stable:!r,a=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(o&&n&&n!==t&&a===n.$key&&!r&&!n.$hasNormal)return n;for(var l in s={},e)e[l]&&"$"!==l[0]&&(s[l]=ze(i,l,e[l]))}else s={};for(var h in i)h in s||(s[h]=He(i,h));return e&&Object.isExtensible(e)&&(e._normalized=s),U(s,"$stable",o),U(s,"$key",a),U(s,"$hasNormal",r),s}function ze(t,e,i){var n=function(){var t=arguments.length?i.apply(null,arguments):i({});return(t=t&&"object"==typeof t&&!Array.isArray(t)?[t]:_e(t))&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return i.proxy&&Object.defineProperty(t,e,{get:n,enumerable:!0,configurable:!0}),n}function He(t,e){return function(){return t[e]}}function Ue(t,e){var n,s,o,a,l;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),s=0,o=t.length;s<o;s++)n[s]=e(t[s],s);else if("number"==typeof t)for(n=new Array(t),s=0;s<t;s++)n[s]=e(s+1,s);else if(r(t))if(lt&&t[Symbol.iterator]){n=[];for(var h=t[Symbol.iterator](),u=h.next();!u.done;)n.push(e(u.value,n.length)),u=h.next()}else for(a=Object.keys(t),n=new Array(a.length),s=0,o=a.length;s<o;s++)l=a[s],n[s]=e(t[l],l,s);return i(n)||(n=[]),n._isVList=!0,n}function Ve(t,e,i,n){var s,o=this.$scopedSlots[t];o?(i=i||{},n&&(r(n)||ht("slot v-bind without argument expects an Object",this),i=P(P({},n),i)),s=o(i)||e):s=this.$slots[t]||e;var a=i&&i.slot;return a?this.$createElement("template",{slot:a},s):s}function Ye(t){return qt(this.$options,"filters",t,!0)||E}function qe(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function $e(t,e,i,n,s){var r=j.keyCodes[e]||i;return s&&n&&!j.keyCodes[e]?qe(s,n):r?qe(r,t):n?M(n)!==e:void 0}function We(t,e,i,n,s){if(i)if(r(i)){var o;Array.isArray(i)&&(i=N(i));var a=function(r){if("class"===r||"style"===r||m(r))o=t;else{var a=t.attrs&&t.attrs.type;o=n||j.mustUseProp(e,a,r)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var l=k(r),h=M(r);l in o||h in o||(o[r]=i[r],s&&((t.on||(t.on={}))["update:"+r]=function(t){i[r]=t}))};for(var l in i)a(l)}else ht("v-bind without argument expects an Object or Array value",this);return t}function Ge(t,e){var i=this._staticTrees||(this._staticTrees=[]),n=i[t];return n&&!e||Ke(n=i[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),n}function Xe(t,e,i){return Ke(t,"__once__"+e+(i?"_"+i:""),!0),t}function Ke(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]&&"string"!=typeof t[n]&&Je(t[n],e+"_"+n,i);else Je(t,e,i)}function Je(t,e,i){t.isStatic=!0,t.key=e,t.isOnce=i}function Ze(t,e){if(e)if(l(e)){var i=t.on=t.on?P({},t.on):{};for(var n in e){var s=i[n],r=e[n];i[n]=s?[].concat(s,r):r}}else ht("v-on without argument expects an Object value",this);return t}function Qe(t,e,i,n){e=e||{$stable:!i};for(var s=0;s<t.length;s++){var r=t[s];Array.isArray(r)?Qe(r,e,i):r&&(r.proxy&&(r.fn.proxy=!0),e[r.key]=r.fn)}return n&&(e.$key=n),e}function ti(t,e){for(var i=0;i<e.length;i+=2){var n=e[i];"string"==typeof n&&n?t[e[i]]=e[i+1]:""!==n&&null!==n&&ht("Invalid value for dynamic directive argument (expected string or null): "+n,this)}return t}function ei(t,e){return"string"==typeof t?e+t:t}function ii(t){t._o=Xe,t._n=f,t._s=d,t._l=Ue,t._t=Ve,t._q=_,t._i=O,t._m=Ge,t._f=Ye,t._k=$e,t._b=We,t._v=St,t._e=kt,t._u=Qe,t._g=Ze,t._d=ti,t._p=ei}function ni(e,i,s,r,o){var a,l=this,h=o.options;x(r,"_uid")?(a=Object.create(r))._original=r:(a=r,r=r._original);var u=n(h._compiled),c=!u;this.data=e,this.props=i,this.children=s,this.parent=r,this.listeners=e.on||t,this.injections=Re(h.inject,r),this.slots=function(){return l.$slots||je(e.scopedSlots,l.$slots=Ie(s,r)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return je(e.scopedSlots,this.slots())}}),u&&(this.$options=h,this.$slots=this.slots(),this.$scopedSlots=je(e.scopedSlots,this.$slots)),h._scopeId?this._c=function(t,e,i,n){var s=di(a,t,e,i,n,c);return s&&!Array.isArray(s)&&(s.fnScopeId=h._scopeId,s.fnContext=r),s}:this._c=function(t,e,i,n){return di(a,t,e,i,n,c)}}function si(t,e,i,n,s){var r=Ct(t);return r.fnContext=i,r.fnOptions=n,(r.devtoolsMeta=r.devtoolsMeta||{}).renderContext=s,e.slot&&((r.data||(r.data={})).slot=e.slot),r}function ri(t,e){for(var i in e)t[k(i)]=e[i]}ii(ni.prototype);var oi={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;oi.prepatch(n,n)}else{(t.componentInstance=function(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},s=t.data.inlineTemplate;i(s)&&(n.render=s.render,n.staticRenderFns=s.staticRenderFns);return new t.componentOptions.Ctor(n)}(t,Si)).$mount(e?t.elm:void 0,e)}},prepatch:function(e,i){var n=i.componentOptions;!function(e,i,n,s,r){Ci=!0;var o=s.data.scopedSlots,a=e.$scopedSlots,l=!!(o&&!o.$stable||a!==t&&!a.$stable||o&&e.$scopedSlots.$key!==o.$key),h=!!(r||e.$options._renderChildren||l);e.$options._parentVnode=s,e.$vnode=s,e._vnode&&(e._vnode.parent=s);if(e.$options._renderChildren=r,e.$attrs=s.data.attrs||t,e.$listeners=n||t,i&&e.$options.props){Nt(!1);for(var u=e._props,c=e.$options._propKeys||[],d=0;d<c.length;d++){var f=c[d],p=e.$options.props;u[f]=$t(f,p,i,e)}Nt(!0),e.$options.propsData=i}n=n||t;var g=e.$options._parentListeners;e.$options._parentListeners=n,ki(e,n,g),h&&(e.$slots=Ie(r,s.context),e.$forceUpdate());Ci=!1}(i.componentInstance=e.componentInstance,n.propsData,n.listeners,i,n.children)},insert:function(t){var e,i=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Ni(n,"mounted")),t.data.keepAlive&&(i._isMounted?((e=n)._inactive=!1,Li.push(e)):Ai(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Pi(e,!0):e.$destroy())}},ai=Object.keys(oi);function li(s,o,a,l,h){if(!e(s)){var u=a.$options._base;if(r(s)&&(s=u.extend(s)),"function"==typeof s){var d;if(e(s.cid)&&(s=function(t,s){if(n(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;var o=gi;o&&i(t.owners)&&-1===t.owners.indexOf(o)&&t.owners.push(o);if(n(t.loading)&&i(t.loadingComp))return t.loadingComp;if(o&&!i(t.owners)){var a=t.owners=[o],l=!0,h=null,u=null;o.$on("hook:destroyed",(function(){return y(a,o)}));var d=function(t){for(var e=0,i=a.length;e<i;e++)a[e].$forceUpdate();t&&(a.length=0,null!==h&&(clearTimeout(h),h=null),null!==u&&(clearTimeout(u),u=null))},f=F((function(e){t.resolved=mi(e,s),l?a.length=0:d(!0)})),p=F((function(e){ht("Failed to resolve async component: "+String(t)+(e?"\nReason: "+e:"")),i(t.errorComp)&&(t.error=!0,d(!0))})),g=t(f,p);return r(g)&&(c(g)?e(t.resolved)&&g.then(f,p):c(g.component)&&(g.component.then(f,p),i(g.error)&&(t.errorComp=mi(g.error,s)),i(g.loading)&&(t.loadingComp=mi(g.loading,s),0===g.delay?t.loading=!0:h=setTimeout((function(){h=null,e(t.resolved)&&e(t.error)&&(t.loading=!0,d(!1))}),g.delay||200)),i(g.timeout)&&(u=setTimeout((function(){u=null,e(t.resolved)&&p("timeout ("+g.timeout+"ms)")}),g.timeout)))),l=!1,t.loading?t.loadingComp:t.resolved}}(d=s,u),void 0===s))return function(t,e,i,n,s){var r=kt();return r.asyncFactory=t,r.asyncMeta={data:e,context:i,children:n,tag:s},r}(d,o,a,l,h);o=o||{},Zi(s),i(o.model)&&function(t,e){var n=t.model&&t.model.prop||"value",s=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var r=e.on||(e.on={}),o=r[s],a=e.model.callback;i(o)?(Array.isArray(o)?-1===o.indexOf(a):o!==a)&&(r[s]=[a].concat(o)):r[s]=a}(s.options,o);var f=function(t,n,s){var r=n.options.props;if(!e(r)){var o={},a=t.attrs,l=t.props;if(i(a)||i(l))for(var h in r){var u=M(h),c=h.toLowerCase();h!==c&&a&&x(a,c)&&ut('Prop "'+c+'" is passed to component '+ct(s||n)+', but the declared prop name is "'+h+'". Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM templates. You should probably use "'+u+'" instead of "'+h+'".'),Ee(o,l,h,u,!0)||Ee(o,a,h,u,!1)}return o}}(o,s,h);if(n(s.options.functional))return function(e,n,s,r,o){var a=e.options,l={},h=a.props;if(i(h))for(var u in h)l[u]=$t(u,h,n||t);else i(s.attrs)&&ri(l,s.attrs),i(s.props)&&ri(l,s.props);var c=new ni(s,l,o,r,e),d=a.render.call(null,c._c,c);if(d instanceof bt)return si(d,s,c.parent,a,c);if(Array.isArray(d)){for(var f=_e(d)||[],p=new Array(f.length),g=0;g<f.length;g++)p[g]=si(f[g],s,c.parent,a,c);return p}}(s,f,o,a,l);var p=o.on;if(o.on=o.nativeOn,n(s.options.abstract)){var g=o.slot;o={},g&&(o.slot=g)}!function(t){for(var e=t.hook||(t.hook={}),i=0;i<ai.length;i++){var n=ai[i],s=e[n],r=oi[n];s===r||s&&s._merged||(e[n]=s?hi(r,s):r)}}(o);var m=s.options.name||h;return new bt("vue-component-"+s.cid+(m?"-"+m:""),o,void 0,void 0,void 0,a,{Ctor:s,propsData:f,listeners:p,tag:h,children:l},d)}ht("Invalid Component definition: "+String(s),a)}}function hi(t,e){var i=function(i,n){t(i,n),e(i,n)};return i._merged=!0,i}var ui=1,ci=2;function di(t,e,o,a,l,h){return(Array.isArray(o)||s(o))&&(l=a,a=o,o=void 0),n(h)&&(l=ci),function(t,e,n,o,a){if(i(n)&&i(n.__ob__))return ht("Avoid using observed data object as vnode data: "+JSON.stringify(n)+"\nAlways create fresh vnode data objects in each render!",t),kt();i(n)&&i(n.is)&&(e=n.is);if(!e)return kt();i(n)&&i(n.key)&&!s(n.key)&&ht("Avoid using non-primitive value as key, use string/number value instead.",t);Array.isArray(o)&&"function"==typeof o[0]&&((n=n||{}).scopedSlots={default:o[0]},o.length=0);a===ci?o=_e(o):a===ui&&(o=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(o));var l,h;if("string"==typeof e){var u;h=t.$vnode&&t.$vnode.ns||j.getTagNamespace(e),l=j.isReservedTag(e)?new bt(j.parsePlatformTagName(e),n,o,void 0,void 0,t):n&&n.pre||!i(u=qt(t.$options,"components",e))?new bt(e,n,o,void 0,void 0,t):li(u,n,t,o,e)}else l=li(e,n,t,o);return Array.isArray(l)?l:i(l)?(i(h)&&fi(l,h),i(n)&&function(t){r(t.style)&&Te(t.style);r(t.class)&&Te(t.class)}(n),l):kt()}(t,e,o,a,l)}function fi(t,s,r){if(t.ns=s,"foreignObject"===t.tag&&(s=void 0,r=!0),i(t.children))for(var o=0,a=t.children.length;o<a;o++){var l=t.children[o];i(l.tag)&&(e(l.ns)||n(r)&&"svg"!==l.tag)&&fi(l,s,r)}}var pi,gi=null;function mi(t,e){return(t.__esModule||lt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),r(t)?e.extend(t):t}function yi(t){return t.isComment&&t.asyncFactory}function vi(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(i(n)&&(i(n.componentOptions)||yi(n)))return n}}function xi(t,e){pi.$on(t,e)}function bi(t,e){pi.$off(t,e)}function wi(t,e){var i=pi;return function n(){null!==e.apply(null,arguments)&&i.$off(t,n)}}function ki(t,e,i){pi=t,De(e,i||{},xi,bi,wi,t),pi=void 0}var Si=null,Ci=!1;function Mi(t){var e=Si;return Si=t,function(){Si=e}}function Ti(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Ai(t,e){if(e){if(t._directInactive=!1,Ti(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var i=0;i<t.$children.length;i++)Ai(t.$children[i]);Ni(t,"activated")}}function Pi(t,e){if(!(e&&(t._directInactive=!0,Ti(t))||t._inactive)){t._inactive=!0;for(var i=0;i<t.$children.length;i++)Pi(t.$children[i]);Ni(t,"deactivated")}}function Ni(t,e){vt();var i=t.$options[e],n=e+" hook";if(i)for(var s=0,r=i.length;s<r;s++)ee(i[s],t,null,t,n);t._hasHookEvent&&t.$emit("hook:"+e),xt()}var Di=[],Li=[],Ei={},_i={},Oi=!1,Fi=!1,Ri=0;var Ii=0,Bi=Date.now;if($&&!K){var ji=window.performance;ji&&"function"==typeof ji.now&&Bi()>document.createEvent("Event").timeStamp&&(Bi=function(){return ji.now()})}function zi(){var t,e;for(Ii=Bi(),Fi=!0,Di.sort((function(t,e){return t.id-e.id})),Ri=0;Ri<Di.length;Ri++)if((t=Di[Ri]).before&&t.before(),e=t.id,Ei[e]=null,t.run(),null!=Ei[e]&&(_i[e]=(_i[e]||0)+1,_i[e]>100)){ht("You may have an infinite update loop "+(t.user?'in watcher with expression "'+t.expression+'"':"in a component render function."),t.vm);break}var i=Li.slice(),n=Di.slice();Ri=Di.length=Li.length=0,Ei={},_i={},Oi=Fi=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Ai(t[e],!0)}(i),function(t){var e=t.length;for(;e--;){var i=t[e],n=i.vm;n._watcher===i&&n._isMounted&&!n._isDestroyed&&Ni(n,"updated")}}(n),rt&&j.devtools&&rt.emit("flush")}var Hi=0,Ui=function(t,e,i,n,s){this.vm=t,s&&(t._watcher=this),t._watchers.push(this),n?(this.deep=!!n.deep,this.user=!!n.user,this.lazy=!!n.lazy,this.sync=!!n.sync,this.before=n.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++Hi,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new at,this.newDepIds=new at,this.expression=e.toString(),"function"==typeof e?this.getter=e:(this.getter=function(t){if(!V.test(t)){var e=t.split(".");return function(t){for(var i=0;i<e.length;i++){if(!t)return;t=t[e[i]]}return t}}}(e),this.getter||(this.getter=D,ht('Failed watching path: "'+e+'" Watcher only accepts simple dot-delimited paths. For full control, use a function instead.',t))),this.value=this.lazy?void 0:this.get()};Ui.prototype.get=function(){var t;vt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;te(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&Te(t),xt(),this.cleanupDeps()}return t},Ui.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},Ui.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},Ui.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==Ei[e]){if(Ei[e]=!0,Fi){for(var i=Di.length-1;i>Ri&&Di[i].id>t.id;)i--;Di.splice(i+1,0,t)}else Di.push(t);if(!Oi){if(Oi=!0,!j.async)return void zi();ge(zi)}}}(this)},Ui.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||r(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){te(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},Ui.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Ui.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},Ui.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var Vi={enumerable:!0,configurable:!0,get:D,set:D};function Yi(t,e,i){Vi.get=function(){return this[e][i]},Vi.set=function(t){this[e][i]=t},Object.defineProperty(t,i,Vi)}function qi(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var i=t.$options.propsData||{},n=t._props={},s=t.$options._propKeys=[],r=!t.$parent;r||Nt(!1);var o=function(o){s.push(o);var a=$t(o,e,i,t),l=M(o);(m(l)||j.isReservedAttr(l))&&ht('"'+l+'" is a reserved attribute and cannot be used as component prop.',t),Et(n,o,a,(function(){r||Ci||ht("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: \""+o+'"',t)})),o in t||Yi(t,"_props",o)};for(var a in e)o(a);Nt(!0)}(t,e.props),e.methods&&function(t,e){var i=t.$options.props;for(var n in e)"function"!=typeof e[n]&&ht('Method "'+n+'" has type "'+typeof e[n]+'" in the component definition. Did you reference the function correctly?',t),i&&x(i,n)&&ht('Method "'+n+'" has already been defined as a prop.',t),n in t&&H(n)&&ht('Method "'+n+'" conflicts with an existing Vue instance method. Avoid defining component methods that start with _ or $.'),t[n]="function"!=typeof e[n]?D:T(e[n],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;e=t._data="function"==typeof e?function(t,e){vt();try{return t.call(e,e)}catch(t){return te(t,e,"data()"),{}}finally{xt()}}(e,t):e||{},l(e)||(e={},ht("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",t));var i=Object.keys(e),n=t.$options.props,s=t.$options.methods,r=i.length;for(;r--;){var o=i[r];s&&x(s,o)&&ht('Method "'+o+'" has already been defined as a data property.',t),n&&x(n,o)?ht('The data property "'+o+'" is already declared as a prop. Use prop default value instead.',t):H(o)||Yi(t,"_data",o)}Lt(e,!0)}(t):Lt(t._data={},!0),e.computed&&function(t,e){var i=t._computedWatchers=Object.create(null),n=st();for(var s in e){var r=e[s],o="function"==typeof r?r:r.get;null==o&&ht('Getter is missing for computed property "'+s+'".',t),n||(i[s]=new Ui(t,o||D,D,$i)),s in t?s in t.$data?ht('The computed property "'+s+'" is already defined in data.',t):t.$options.props&&s in t.$options.props&&ht('The computed property "'+s+'" is already defined as a prop.',t):Wi(t,s,r)}}(t,e.computed),e.watch&&e.watch!==et&&function(t,e){for(var i in e){var n=e[i];if(Array.isArray(n))for(var s=0;s<n.length;s++)Ki(t,i,n[s]);else Ki(t,i,n)}}(t,e.watch)}var $i={lazy:!0};function Wi(t,e,i){var n=!st();"function"==typeof i?(Vi.get=n?Gi(e):Xi(i),Vi.set=D):(Vi.get=i.get?n&&!1!==i.cache?Gi(e):Xi(i.get):D,Vi.set=i.set||D),Vi.set===D&&(Vi.set=function(){ht('Computed property "'+e+'" was assigned to but it has no setter.',this)}),Object.defineProperty(t,e,Vi)}function Gi(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),mt.target&&e.depend(),e.value}}function Xi(t){return function(){return t.call(this,this)}}function Ki(t,e,i,n){return l(i)&&(n=i,i=i.handler),"string"==typeof i&&(i=t[i]),t.$watch(e,i,n)}var Ji=0;function Zi(t){var e=t.options;if(t.super){var i=Zi(t.super);if(i!==t.superOptions){t.superOptions=i;var n=function(t){var e,i=t.options,n=t.sealedOptions;for(var s in i)i[s]!==n[s]&&(e||(e={}),e[s]=i[s]);return e}(t);n&&P(t.extendOptions,n),(e=t.options=Yt(i,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function Qi(t){this instanceof Qi||ht("Vue is a constructor and should be called with the `new` keyword"),this._init(t)}function tn(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var i=this,n=i.cid,s=t._Ctor||(t._Ctor={});if(s[n])return s[n];var r=t.name||i.options.name;r&&Ut(r);var o=function(t){this._init(t)};return(o.prototype=Object.create(i.prototype)).constructor=o,o.cid=e++,o.options=Yt(i.options,t),o.super=i,o.options.props&&function(t){var e=t.options.props;for(var i in e)Yi(t.prototype,"_props",i)}(o),o.options.computed&&function(t){var e=t.options.computed;for(var i in e)Wi(t.prototype,i,e[i])}(o),o.extend=i.extend,o.mixin=i.mixin,o.use=i.use,I.forEach((function(t){o[t]=i[t]})),r&&(o.options.components[r]=o),o.superOptions=i.options,o.extendOptions=t,o.sealedOptions=P({},o.options),s[n]=o,o}}function en(t){return t&&(t.Ctor.options.name||t.tag)}function nn(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!h(t)&&t.test(e)}function sn(t,e){var i=t.cache,n=t.keys,s=t._vnode;for(var r in i){var o=i[r];if(o){var a=en(o.componentOptions);a&&!e(a)&&rn(i,r,n,s)}}}function rn(t,e,i,n){var s=t[e];!s||n&&s.tag===n.tag||s.componentInstance.$destroy(),t[e]=null,y(i,e)}!function(e){e.prototype._init=function(e){var i,n,s=this;s._uid=Ji++,j.performance&&re&&(i="vue-perf-start:"+s._uid,n="vue-perf-end:"+s._uid,re(i)),s._isVue=!0,e&&e._isComponent?function(t,e){var i=t.$options=Object.create(t.constructor.options),n=e._parentVnode;i.parent=e.parent,i._parentVnode=n;var s=n.componentOptions;i.propsData=s.propsData,i._parentListeners=s.listeners,i._renderChildren=s.children,i._componentTag=s.tag,e.render&&(i.render=e.render,i.staticRenderFns=e.staticRenderFns)}(s,e):s.$options=Yt(Zi(s.constructor),e||{},s),me(s),s._self=s,function(t){var e=t.$options,i=e.parent;if(i&&!e.abstract){for(;i.$options.abstract&&i.$parent;)i=i.$parent;i.$children.push(t)}t.$parent=i,t.$root=i?i.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(s),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&ki(t,e)}(s),function(e){e._vnode=null,e._staticTrees=null;var i=e.$options,n=e.$vnode=i._parentVnode,s=n&&n.context;e.$slots=Ie(i._renderChildren,s),e.$scopedSlots=t,e._c=function(t,i,n,s){return di(e,t,i,n,s,!1)},e.$createElement=function(t,i,n,s){return di(e,t,i,n,s,!0)};var r=n&&n.data;Et(e,"$attrs",r&&r.attrs||t,(function(){!Ci&&ht("$attrs is readonly.",e)}),!0),Et(e,"$listeners",i._parentListeners||t,(function(){!Ci&&ht("$listeners is readonly.",e)}),!0)}(s),Ni(s,"beforeCreate"),function(t){var e=Re(t.$options.inject,t);e&&(Nt(!1),Object.keys(e).forEach((function(i){Et(t,i,e[i],(function(){ht('Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. injection being mutated: "'+i+'"',t)}))})),Nt(!0))}(s),qi(s),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(s),Ni(s,"created"),j.performance&&re&&(s._name=ct(s,!1),re(n),oe("vue "+s._name+" init",i,n)),s.$options.el&&s.$mount(s.$options.el)}}(Qi),function(t){var e={get:function(){return this._data}},i={get:function(){return this._props}};e.set=function(){ht("Avoid replacing instance root $data. Use nested data properties instead.",this)},i.set=function(){ht("$props is readonly.",this)},Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",i),t.prototype.$set=_t,t.prototype.$delete=Ot,t.prototype.$watch=function(t,e,i){var n=this;if(l(e))return Ki(n,t,e,i);(i=i||{}).user=!0;var s=new Ui(n,t,e,i);if(i.immediate)try{e.call(n,s.value)}catch(t){te(t,n,'callback for immediate watcher "'+s.expression+'"')}return function(){s.teardown()}}}(Qi),function(t){var e=/^hook:/;t.prototype.$on=function(t,i){var n=this;if(Array.isArray(t))for(var s=0,r=t.length;s<r;s++)n.$on(t[s],i);else(n._events[t]||(n._events[t]=[])).push(i),e.test(t)&&(n._hasHookEvent=!0);return n},t.prototype.$once=function(t,e){var i=this;function n(){i.$off(t,n),e.apply(i,arguments)}return n.fn=e,i.$on(t,n),i},t.prototype.$off=function(t,e){var i=this;if(!arguments.length)return i._events=Object.create(null),i;if(Array.isArray(t)){for(var n=0,s=t.length;n<s;n++)i.$off(t[n],e);return i}var r,o=i._events[t];if(!o)return i;if(!e)return i._events[t]=null,i;for(var a=o.length;a--;)if((r=o[a])===e||r.fn===e){o.splice(a,1);break}return i},t.prototype.$emit=function(t){var e=this,i=t.toLowerCase();i!==t&&e._events[i]&&ut('Event "'+i+'" is emitted in component '+ct(e)+' but the handler is registered for "'+t+'". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "'+M(t)+'" instead of "'+t+'".');var n=e._events[t];if(n){n=n.length>1?A(n):n;for(var s=A(arguments,1),r='event handler for "'+t+'"',o=0,a=n.length;o<a;o++)ee(n[o],e,s,e,r)}return e}}(Qi),function(t){t.prototype._update=function(t,e){var i=this,n=i.$el,s=i._vnode,r=Mi(i);i._vnode=t,i.$el=s?i.__patch__(s,t):i.__patch__(i.$el,t,e,!1),r(),n&&(n.__vue__=null),i.$el&&(i.$el.__vue__=i),i.$vnode&&i.$parent&&i.$vnode===i.$parent._vnode&&(i.$parent.$el=i.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Ni(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();for(var i=t._watchers.length;i--;)t._watchers[i].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Ni(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(Qi),function(t){ii(t.prototype),t.prototype.$nextTick=function(t){return ge(t,this)},t.prototype._render=function(){var t,e=this,i=e.$options,n=i.render,s=i._parentVnode;s&&(e.$scopedSlots=je(s.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=s;try{gi=e,t=n.call(e._renderProxy,e.$createElement)}catch(i){if(te(i,e,"render"),e.$options.renderError)try{t=e.$options.renderError.call(e._renderProxy,e.$createElement,i)}catch(i){te(i,e,"renderError"),t=e._vnode}else t=e._vnode}finally{gi=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof bt||(Array.isArray(t)&&ht("Multiple root nodes returned from render function. Render function should return a single root node.",e),t=kt()),t.parent=s,t}}(Qi);var on=[String,RegExp,Array],an={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:on,exclude:on,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)rn(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",(function(e){sn(t,(function(t){return nn(e,t)}))})),this.$watch("exclude",(function(e){sn(t,(function(t){return!nn(e,t)}))}))},render:function(){var t=this.$slots.default,e=vi(t),i=e&&e.componentOptions;if(i){var n=en(i),s=this.include,r=this.exclude;if(s&&(!n||!nn(s,n))||r&&n&&nn(r,n))return e;var o=this.cache,a=this.keys,l=null==e.key?i.Ctor.cid+(i.tag?"::"+i.tag:""):e.key;o[l]?(e.componentInstance=o[l].componentInstance,y(a,l),a.push(l)):(o[l]=e,a.push(l),this.max&&a.length>parseInt(this.max)&&rn(o,a[0],a,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return j},set:function(){ht("Do not replace the Vue.config object, set individual fields instead.")}};Object.defineProperty(t,"config",e),t.util={warn:ht,extend:P,mergeOptions:Yt,defineReactive:Et},t.set=_t,t.delete=Ot,t.nextTick=ge,t.observable=function(t){return Lt(t),t},t.options=Object.create(null),I.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,P(t.options.components,an),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var i=A(arguments,1);return i.unshift(this),"function"==typeof t.install?t.install.apply(t,i):"function"==typeof t&&t.apply(null,i),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Yt(this.options,t),this}}(t),tn(t),function(t){I.forEach((function(e){t[e]=function(t,i){return i?("component"===e&&Ut(t),"component"===e&&l(i)&&(i.name=i.name||t,i=this.options._base.extend(i)),"directive"===e&&"function"==typeof i&&(i={bind:i,update:i}),this.options[e+"s"][t]=i,i):this.options[e+"s"][t]}}))}(t)}(Qi),Object.defineProperty(Qi.prototype,"$isServer",{get:st}),Object.defineProperty(Qi.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Qi,"FunctionalRenderContext",{value:ni}),Qi.version="2.6.10";var ln=p("style,class"),hn=p("input,textarea,option,select,progress"),un=function(t,e,i){return"value"===i&&hn(t)&&"button"!==e||"selected"===i&&"option"===t||"checked"===i&&"input"===t||"muted"===i&&"video"===t},cn=p("contenteditable,draggable,spellcheck"),dn=p("events,caret,typing,plaintext-only"),fn=p("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),pn="http://www.w3.org/1999/xlink",gn=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},mn=function(t){return gn(t)?t.slice(6,t.length):""},yn=function(t){return null==t||!1===t};function vn(t){for(var e=t.data,n=t,s=t;i(s.componentInstance);)(s=s.componentInstance._vnode)&&s.data&&(e=xn(s.data,e));for(;i(n=n.parent);)n&&n.data&&(e=xn(e,n.data));return function(t,e){if(i(t)||i(e))return bn(t,wn(e));return""}(e.staticClass,e.class)}function xn(t,e){return{staticClass:bn(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function bn(t,e){return t?e?t+" "+e:t:e||""}function wn(t){return Array.isArray(t)?function(t){for(var e,n="",s=0,r=t.length;s<r;s++)i(e=wn(t[s]))&&""!==e&&(n&&(n+=" "),n+=e);return n}(t):r(t)?function(t){var e="";for(var i in t)t[i]&&(e&&(e+=" "),e+=i);return e}(t):"string"==typeof t?t:""}var kn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Sn=p("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Cn=p("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Mn=function(t){return Sn(t)||Cn(t)};function Tn(t){return Cn(t)?"svg":"math"===t?"math":void 0}var An=Object.create(null);var Pn=p("text,number,password,search,email,tel,url");function Nn(t){if("string"==typeof t){var e=document.querySelector(t);return e||(ht("Cannot find element: "+t),document.createElement("div"))}return t}var Dn=Object.freeze({createElement:function(t,e){var i=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&i.setAttribute("multiple","multiple"),i},createElementNS:function(t,e){return document.createElementNS(kn[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,i){t.insertBefore(e,i)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),Ln={create:function(t,e){En(e)},update:function(t,e){t.data.ref!==e.data.ref&&(En(t,!0),En(e))},destroy:function(t){En(t,!0)}};function En(t,e){var n=t.data.ref;if(i(n)){var s=t.context,r=t.componentInstance||t.elm,o=s.$refs;e?Array.isArray(o[n])?y(o[n],r):o[n]===r&&(o[n]=void 0):t.data.refInFor?Array.isArray(o[n])?o[n].indexOf(r)<0&&o[n].push(r):o[n]=[r]:o[n]=r}}var _n=new bt("",{},[]),On=["create","activate","update","remove","destroy"];function Fn(t,s){return t.key===s.key&&(t.tag===s.tag&&t.isComment===s.isComment&&i(t.data)===i(s.data)&&function(t,e){if("input"!==t.tag)return!0;var n,s=i(n=t.data)&&i(n=n.attrs)&&n.type,r=i(n=e.data)&&i(n=n.attrs)&&n.type;return s===r||Pn(s)&&Pn(r)}(t,s)||n(t.isAsyncPlaceholder)&&t.asyncFactory===s.asyncFactory&&e(s.asyncFactory.error))}function Rn(t,e,n){var s,r,o={};for(s=e;s<=n;++s)i(r=t[s].key)&&(o[r]=s);return o}var In={create:Bn,update:Bn,destroy:function(t){Bn(t,_n)}};function Bn(t,e){(t.data.directives||e.data.directives)&&function(t,e){var i,n,s,r=t===_n,o=e===_n,a=zn(t.data.directives,t.context),l=zn(e.data.directives,e.context),h=[],u=[];for(i in l)n=a[i],s=l[i],n?(s.oldValue=n.value,s.oldArg=n.arg,Un(s,"update",e,t),s.def&&s.def.componentUpdated&&u.push(s)):(Un(s,"bind",e,t),s.def&&s.def.inserted&&h.push(s));if(h.length){var c=function(){for(var i=0;i<h.length;i++)Un(h[i],"inserted",e,t)};r?Le(e,"insert",c):c()}u.length&&Le(e,"postpatch",(function(){for(var i=0;i<u.length;i++)Un(u[i],"componentUpdated",e,t)}));if(!r)for(i in a)l[i]||Un(a[i],"unbind",t,t,o)}(t,e)}var jn=Object.create(null);function zn(t,e){var i,n,s=Object.create(null);if(!t)return s;for(i=0;i<t.length;i++)(n=t[i]).modifiers||(n.modifiers=jn),s[Hn(n)]=n,n.def=qt(e.$options,"directives",n.name,!0);return s}function Hn(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Un(t,e,i,n,s){var r=t.def&&t.def[e];if(r)try{r(i.elm,t,i,n,s)}catch(n){te(n,i.context,"directive "+t.name+" "+e+" hook")}}var Vn=[Ln,In];function Yn(t,n){var s=n.componentOptions;if(!(i(s)&&!1===s.Ctor.options.inheritAttrs||e(t.data.attrs)&&e(n.data.attrs))){var r,o,a=n.elm,l=t.data.attrs||{},h=n.data.attrs||{};for(r in i(h.__ob__)&&(h=n.data.attrs=P({},h)),h)o=h[r],l[r]!==o&&qn(a,r,o);for(r in(K||Z)&&h.value!==l.value&&qn(a,"value",h.value),l)e(h[r])&&(gn(r)?a.removeAttributeNS(pn,mn(r)):cn(r)||a.removeAttribute(r))}}function qn(t,e,i){t.tagName.indexOf("-")>-1?$n(t,e,i):fn(e)?yn(i)?t.removeAttribute(e):(i="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,i)):cn(e)?t.setAttribute(e,function(t,e){return yn(e)||"false"===e?"false":"contenteditable"===t&&dn(e)?e:"true"}(e,i)):gn(e)?yn(i)?t.removeAttributeNS(pn,mn(e)):t.setAttributeNS(pn,e,i):$n(t,e,i)}function $n(t,e,i){if(yn(i))t.removeAttribute(e);else{if(K&&!J&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==i&&!t.__ieph){var n=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",n)};t.addEventListener("input",n),t.__ieph=!0}t.setAttribute(e,i)}}var Wn={create:Yn,update:Yn};function Gn(t,n){var s=n.elm,r=n.data,o=t.data;if(!(e(r.staticClass)&&e(r.class)&&(e(o)||e(o.staticClass)&&e(o.class)))){var a=vn(n),l=s._transitionClasses;i(l)&&(a=bn(a,wn(l))),a!==s._prevClass&&(s.setAttribute("class",a),s._prevClass=a)}}var Xn,Kn,Jn,Zn,Qn,ts,es,is={create:Gn,update:Gn},ns=/[\w).+\-_$\]]/;function ss(t){var e,i,n,s,r,o=!1,a=!1,l=!1,h=!1,u=0,c=0,d=0,f=0;for(n=0;n<t.length;n++)if(i=e,e=t.charCodeAt(n),o)39===e&&92!==i&&(o=!1);else if(a)34===e&&92!==i&&(a=!1);else if(l)96===e&&92!==i&&(l=!1);else if(h)47===e&&92!==i&&(h=!1);else if(124!==e||124===t.charCodeAt(n+1)||124===t.charCodeAt(n-1)||u||c||d){switch(e){case 34:a=!0;break;case 39:o=!0;break;case 96:l=!0;break;case 40:d++;break;case 41:d--;break;case 91:c++;break;case 93:c--;break;case 123:u++;break;case 125:u--}if(47===e){for(var p=n-1,g=void 0;p>=0&&" "===(g=t.charAt(p));p--);g&&ns.test(g)||(h=!0)}}else void 0===s?(f=n+1,s=t.slice(0,n).trim()):m();function m(){(r||(r=[])).push(t.slice(f,n).trim()),f=n+1}if(void 0===s?s=t.slice(0,n).trim():0!==f&&m(),r)for(n=0;n<r.length;n++)s=rs(s,r[n]);return s}function rs(t,e){var i=e.indexOf("(");if(i<0)return'_f("'+e+'")('+t+")";var n=e.slice(0,i),s=e.slice(i+1);return'_f("'+n+'")('+t+(")"!==s?","+s:s)}function os(t,e){console.error("[Vue compiler]: "+t)}function as(t,e){return t?t.map((function(t){return t[e]})).filter((function(t){return t})):[]}function ls(t,e,i,n,s){(t.props||(t.props=[])).push(vs({name:e,value:i,dynamic:s},n)),t.plain=!1}function hs(t,e,i,n,s){(s?t.dynamicAttrs||(t.dynamicAttrs=[]):t.attrs||(t.attrs=[])).push(vs({name:e,value:i,dynamic:s},n)),t.plain=!1}function us(t,e,i,n){t.attrsMap[e]=i,t.attrsList.push(vs({name:e,value:i},n))}function cs(t,e,i,n,s,r,o,a){(t.directives||(t.directives=[])).push(vs({name:e,rawName:i,value:n,arg:s,isDynamicArg:r,modifiers:o},a)),t.plain=!1}function ds(t,e,i){return i?"_p("+e+',"'+t+'")':t+e}function fs(e,i,n,s,r,o,a,l){var h;s=s||t,o&&s.prevent&&s.passive&&o("passive and prevent can't be used together. Passive handler can't prevent default event.",a),s.right?l?i="("+i+")==='click'?'contextmenu':("+i+")":"click"===i&&(i="contextmenu",delete s.right):s.middle&&(l?i="("+i+")==='click'?'mouseup':("+i+")":"click"===i&&(i="mouseup")),s.capture&&(delete s.capture,i=ds("!",i,l)),s.once&&(delete s.once,i=ds("~",i,l)),s.passive&&(delete s.passive,i=ds("&",i,l)),s.native?(delete s.native,h=e.nativeEvents||(e.nativeEvents={})):h=e.events||(e.events={});var u=vs({value:n.trim(),dynamic:l},a);s!==t&&(u.modifiers=s);var c=h[i];Array.isArray(c)?r?c.unshift(u):c.push(u):h[i]=c?r?[u,c]:[c,u]:u,e.plain=!1}function ps(t,e){return t.rawAttrsMap[":"+e]||t.rawAttrsMap["v-bind:"+e]||t.rawAttrsMap[e]}function gs(t,e,i){var n=ms(t,":"+e)||ms(t,"v-bind:"+e);if(null!=n)return ss(n);if(!1!==i){var s=ms(t,e);if(null!=s)return JSON.stringify(s)}}function ms(t,e,i){var n;if(null!=(n=t.attrsMap[e]))for(var s=t.attrsList,r=0,o=s.length;r<o;r++)if(s[r].name===e){s.splice(r,1);break}return i&&delete t.attrsMap[e],n}function ys(t,e){for(var i=t.attrsList,n=0,s=i.length;n<s;n++){var r=i[n];if(e.test(r.name))return i.splice(n,1),r}}function vs(t,e){return e&&(null!=e.start&&(t.start=e.start),null!=e.end&&(t.end=e.end)),t}function xs(t,e,i){var n=i||{},s=n.number,r="$$v",o=r;n.trim&&(o="(typeof $$v === 'string'? $$v.trim(): $$v)"),s&&(o="_n("+o+")");var a=bs(e,o);t.model={value:"("+e+")",expression:JSON.stringify(e),callback:"function ($$v) {"+a+"}"}}function bs(t,e){var i=function(t){if(t=t.trim(),Xn=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<Xn-1)return(Zn=t.lastIndexOf("."))>-1?{exp:t.slice(0,Zn),key:'"'+t.slice(Zn+1)+'"'}:{exp:t,key:null};Kn=t,Zn=Qn=ts=0;for(;!ks();)Ss(Jn=ws())?Ms(Jn):91===Jn&&Cs(Jn);return{exp:t.slice(0,Qn),key:t.slice(Qn+1,ts)}}(t);return null===i.key?t+"="+e:"$set("+i.exp+", "+i.key+", "+e+")"}function ws(){return Kn.charCodeAt(++Zn)}function ks(){return Zn>=Xn}function Ss(t){return 34===t||39===t}function Cs(t){var e=1;for(Qn=Zn;!ks();)if(Ss(t=ws()))Ms(t);else if(91===t&&e++,93===t&&e--,0===e){ts=Zn;break}}function Ms(t){for(var e=t;!ks()&&(t=ws())!==e;);}var Ts,As="__r",Ps="__c";function Ns(t,e,i){var n=Ts;return function s(){null!==e.apply(null,arguments)&&Es(t,s,i,n)}}var Ds=ae&&!(tt&&Number(tt[1])<=53);function Ls(t,e,i,n){if(Ds){var s=Ii,r=e;e=r._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=s||t.timeStamp<=0||t.target.ownerDocument!==document)return r.apply(this,arguments)}}Ts.addEventListener(t,e,it?{capture:i,passive:n}:i)}function Es(t,e,i,n){(n||Ts).removeEventListener(t,e._wrapper||e,i)}function _s(t,n){if(!e(t.data.on)||!e(n.data.on)){var s=n.data.on||{},r=t.data.on||{};Ts=n.elm,function(t){if(i(t[As])){var e=K?"change":"input";t[e]=[].concat(t[As],t[e]||[]),delete t[As]}i(t[Ps])&&(t.change=[].concat(t[Ps],t.change||[]),delete t[Ps])}(s),De(s,r,Ls,Es,Ns,n.context),Ts=void 0}}var Os,Fs={create:_s,update:_s};function Rs(t,n){if(!e(t.data.domProps)||!e(n.data.domProps)){var s,r,o=n.elm,a=t.data.domProps||{},l=n.data.domProps||{};for(s in i(l.__ob__)&&(l=n.data.domProps=P({},l)),a)s in l||(o[s]="");for(s in l){if(r=l[s],"textContent"===s||"innerHTML"===s){if(n.children&&(n.children.length=0),r===a[s])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===s&&"PROGRESS"!==o.tagName){o._value=r;var h=e(r)?"":String(r);Is(o,h)&&(o.value=h)}else if("innerHTML"===s&&Cn(o.tagName)&&e(o.innerHTML)){(Os=Os||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var u=Os.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;u.firstChild;)o.appendChild(u.firstChild)}else if(r!==a[s])try{o[s]=r}catch(t){}}}}function Is(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var i=!0;try{i=document.activeElement!==t}catch(t){}return i&&t.value!==e}(t,e)||function(t,e){var n=t.value,s=t._vModifiers;if(i(s)){if(s.number)return f(n)!==f(e);if(s.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var Bs={create:Rs,update:Rs},js=b((function(t){var e={},i=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach((function(t){if(t){var n=t.split(i);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}));function zs(t){var e=Hs(t.style);return t.staticStyle?P(t.staticStyle,e):e}function Hs(t){return Array.isArray(t)?N(t):"string"==typeof t?js(t):t}var Us,Vs=/^--/,Ys=/\s*!important$/,qs=function(t,e,i){if(Vs.test(e))t.style.setProperty(e,i);else if(Ys.test(i))t.style.setProperty(M(e),i.replace(Ys,""),"important");else{var n=Ws(e);if(Array.isArray(i))for(var s=0,r=i.length;s<r;s++)t.style[n]=i[s];else t.style[n]=i}},$s=["Webkit","Moz","ms"],Ws=b((function(t){if(Us=Us||document.createElement("div").style,"filter"!==(t=k(t))&&t in Us)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<$s.length;i++){var n=$s[i]+e;if(n in Us)return n}}));function Gs(t,n){var s=n.data,r=t.data;if(!(e(s.staticStyle)&&e(s.style)&&e(r.staticStyle)&&e(r.style))){var o,a,l=n.elm,h=r.staticStyle,u=r.normalizedStyle||r.style||{},c=h||u,d=Hs(n.data.style)||{};n.data.normalizedStyle=i(d.__ob__)?P({},d):d;var f=function(t,e){var i,n={};if(e)for(var s=t;s.componentInstance;)(s=s.componentInstance._vnode)&&s.data&&(i=zs(s.data))&&P(n,i);(i=zs(t.data))&&P(n,i);for(var r=t;r=r.parent;)r.data&&(i=zs(r.data))&&P(n,i);return n}(n,!0);for(a in c)e(f[a])&&qs(l,a,"");for(a in f)(o=f[a])!==c[a]&&qs(l,a,null==o?"":o)}}var Xs={create:Gs,update:Gs},Ks=/\s+/;function Js(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Ks).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var i=" "+(t.getAttribute("class")||"")+" ";i.indexOf(" "+e+" ")<0&&t.setAttribute("class",(i+e).trim())}}function Zs(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Ks).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var i=" "+(t.getAttribute("class")||"")+" ",n=" "+e+" ";i.indexOf(n)>=0;)i=i.replace(n," ");(i=i.trim())?t.setAttribute("class",i):t.removeAttribute("class")}}function Qs(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&P(e,tr(t.name||"v")),P(e,t),e}return"string"==typeof t?tr(t):void 0}}var tr=b((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),er=$&&!J,ir="transition",nr="animation",sr="transition",rr="transitionend",or="animation",ar="animationend";er&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(sr="WebkitTransition",rr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(or="WebkitAnimation",ar="webkitAnimationEnd"));var lr=$?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function hr(t){lr((function(){lr(t)}))}function ur(t,e){var i=t._transitionClasses||(t._transitionClasses=[]);i.indexOf(e)<0&&(i.push(e),Js(t,e))}function cr(t,e){t._transitionClasses&&y(t._transitionClasses,e),Zs(t,e)}function dr(t,e,i){var n=pr(t,e),s=n.type,r=n.timeout,o=n.propCount;if(!s)return i();var a=s===ir?rr:ar,l=0,h=function(){t.removeEventListener(a,u),i()},u=function(e){e.target===t&&++l>=o&&h()};setTimeout((function(){l<o&&h()}),r+1),t.addEventListener(a,u)}var fr=/\b(transform|all)(,|$)/;function pr(t,e){var i,n=window.getComputedStyle(t),s=(n[sr+"Delay"]||"").split(", "),r=(n[sr+"Duration"]||"").split(", "),o=gr(s,r),a=(n[or+"Delay"]||"").split(", "),l=(n[or+"Duration"]||"").split(", "),h=gr(a,l),u=0,c=0;return e===ir?o>0&&(i=ir,u=o,c=r.length):e===nr?h>0&&(i=nr,u=h,c=l.length):c=(i=(u=Math.max(o,h))>0?o>h?ir:nr:null)?i===ir?r.length:l.length:0,{type:i,timeout:u,propCount:c,hasTransform:i===ir&&fr.test(n[sr+"Property"])}}function gr(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,i){return mr(e)+mr(t[i])})))}function mr(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function yr(t,n){var s=t.elm;i(s._leaveCb)&&(s._leaveCb.cancelled=!0,s._leaveCb());var o=Qs(t.data.transition);if(!e(o)&&!i(s._enterCb)&&1===s.nodeType){for(var a=o.css,l=o.type,h=o.enterClass,u=o.enterToClass,c=o.enterActiveClass,d=o.appearClass,p=o.appearToClass,g=o.appearActiveClass,m=o.beforeEnter,y=o.enter,v=o.afterEnter,x=o.enterCancelled,b=o.beforeAppear,w=o.appear,k=o.afterAppear,S=o.appearCancelled,C=o.duration,M=Si,T=Si.$vnode;T&&T.parent;)M=T.context,T=T.parent;var A=!M._isMounted||!t.isRootInsert;if(!A||w||""===w){var P=A&&d?d:h,N=A&&g?g:c,D=A&&p?p:u,L=A&&b||m,E=A&&"function"==typeof w?w:y,_=A&&k||v,O=A&&S||x,R=f(r(C)?C.enter:C);null!=R&&xr(R,"enter",t);var I=!1!==a&&!J,B=wr(E),j=s._enterCb=F((function(){I&&(cr(s,D),cr(s,N)),j.cancelled?(I&&cr(s,P),O&&O(s)):_&&_(s),s._enterCb=null}));t.data.show||Le(t,"insert",(function(){var e=s.parentNode,i=e&&e._pending&&e._pending[t.key];i&&i.tag===t.tag&&i.elm._leaveCb&&i.elm._leaveCb(),E&&E(s,j)})),L&&L(s),I&&(ur(s,P),ur(s,N),hr((function(){cr(s,P),j.cancelled||(ur(s,D),B||(br(R)?setTimeout(j,R):dr(s,l,j)))}))),t.data.show&&(n&&n(),E&&E(s,j)),I||B||j()}}}function vr(t,n){var s=t.elm;i(s._enterCb)&&(s._enterCb.cancelled=!0,s._enterCb());var o=Qs(t.data.transition);if(e(o)||1!==s.nodeType)return n();if(!i(s._leaveCb)){var a=o.css,l=o.type,h=o.leaveClass,u=o.leaveToClass,c=o.leaveActiveClass,d=o.beforeLeave,p=o.leave,g=o.afterLeave,m=o.leaveCancelled,y=o.delayLeave,v=o.duration,x=!1!==a&&!J,b=wr(p),w=f(r(v)?v.leave:v);i(w)&&xr(w,"leave",t);var k=s._leaveCb=F((function(){s.parentNode&&s.parentNode._pending&&(s.parentNode._pending[t.key]=null),x&&(cr(s,u),cr(s,c)),k.cancelled?(x&&cr(s,h),m&&m(s)):(n(),g&&g(s)),s._leaveCb=null}));y?y(S):S()}function S(){k.cancelled||(!t.data.show&&s.parentNode&&((s.parentNode._pending||(s.parentNode._pending={}))[t.key]=t),d&&d(s),x&&(ur(s,h),ur(s,c),hr((function(){cr(s,h),k.cancelled||(ur(s,u),b||(br(w)?setTimeout(k,w):dr(s,l,k)))}))),p&&p(s,k),x||b||k())}}function xr(t,e,i){"number"!=typeof t?ht("<transition> explicit "+e+" duration is not a valid number - got "+JSON.stringify(t)+".",i.context):isNaN(t)&&ht("<transition> explicit "+e+" duration is NaN - the duration expression might be incorrect.",i.context)}function br(t){return"number"==typeof t&&!isNaN(t)}function wr(t){if(e(t))return!1;var n=t.fns;return i(n)?wr(Array.isArray(n)?n[0]:n):(t._length||t.length)>1}function kr(t,e){!0!==e.data.show&&yr(e)}var Sr=function(t){var r,o,a={},l=t.modules,u=t.nodeOps;for(r=0;r<On.length;++r)for(a[On[r]]=[],o=0;o<l.length;++o)i(l[o][On[r]])&&a[On[r]].push(l[o][On[r]]);function c(t){var e=u.parentNode(t);i(e)&&u.removeChild(e,t)}function d(t,e){return!e&&!t.ns&&!(j.ignoredElements.length&&j.ignoredElements.some((function(e){return h(e)?e.test(t.tag):e===t.tag})))&&j.isUnknownElement(t.tag)}var f=0;function g(t,e,s,r,o,l,h){if(i(t.elm)&&i(l)&&(t=l[h]=Ct(t)),t.isRootInsert=!o,!function(t,e,s,r){var o=t.data;if(i(o)){var l=i(t.componentInstance)&&o.keepAlive;if(i(o=o.hook)&&i(o=o.init)&&o(t,!1),i(t.componentInstance))return m(t,e),y(s,t.elm,r),n(l)&&function(t,e,n,s){var r,o=t;for(;o.componentInstance;)if(i(r=(o=o.componentInstance._vnode).data)&&i(r=r.transition)){for(r=0;r<a.activate.length;++r)a.activate[r](_n,o);e.push(o);break}y(n,t.elm,s)}(t,e,s,r),!0}}(t,e,s,r)){var c=t.data,p=t.children,g=t.tag;i(g)?(c&&c.pre&&f++,d(t,f)&&ht("Unknown custom element: <"+g+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',t.context),t.elm=t.ns?u.createElementNS(t.ns,g):u.createElement(g,t),w(t),v(t,p,e),i(c)&&b(t,e),y(s,t.elm,r),c&&c.pre&&f--):n(t.isComment)?(t.elm=u.createComment(t.text),y(s,t.elm,r)):(t.elm=u.createTextNode(t.text),y(s,t.elm,r))}}function m(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,x(t)?(b(t,e),w(t)):(En(t),e.push(t))}function y(t,e,n){i(t)&&(i(n)?u.parentNode(n)===t&&u.insertBefore(t,e,n):u.appendChild(t,e))}function v(t,e,i){if(Array.isArray(e)){T(e);for(var n=0;n<e.length;++n)g(e[n],i,t.elm,null,!0,e,n)}else s(t.text)&&u.appendChild(t.elm,u.createTextNode(String(t.text)))}function x(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return i(t.tag)}function b(t,e){for(var n=0;n<a.create.length;++n)a.create[n](_n,t);i(r=t.data.hook)&&(i(r.create)&&r.create(_n,t),i(r.insert)&&e.push(t))}function w(t){var e;if(i(e=t.fnScopeId))u.setStyleScope(t.elm,e);else for(var n=t;n;)i(e=n.context)&&i(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e),n=n.parent;i(e=Si)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e)}function k(t,e,i,n,s,r){for(;n<=s;++n)g(i[n],r,t,e,!1,i,n)}function S(t){var e,n,s=t.data;if(i(s))for(i(e=s.hook)&&i(e=e.destroy)&&e(t),e=0;e<a.destroy.length;++e)a.destroy[e](t);if(i(e=t.children))for(n=0;n<t.children.length;++n)S(t.children[n])}function C(t,e,n,s){for(;n<=s;++n){var r=e[n];i(r)&&(i(r.tag)?(M(r),S(r)):c(r.elm))}}function M(t,e){if(i(e)||i(t.data)){var n,s=a.remove.length+1;for(i(e)?e.listeners+=s:e=function(t,e){function i(){0===--i.listeners&&c(t)}return i.listeners=e,i}(t.elm,s),i(n=t.componentInstance)&&i(n=n._vnode)&&i(n.data)&&M(n,e),n=0;n<a.remove.length;++n)a.remove[n](t,e);i(n=t.data.hook)&&i(n=n.remove)?n(t,e):e()}else c(t.elm)}function T(t){for(var e={},n=0;n<t.length;n++){var s=t[n],r=s.key;i(r)&&(e[r]?ht("Duplicate keys detected: '"+r+"'. This may cause an update error.",s.context):e[r]=!0)}}function A(t,e,n,s){for(var r=n;r<s;r++){var o=e[r];if(i(o)&&Fn(t,o))return r}}function P(t,s,r,o,l,h){if(t!==s){i(s.elm)&&i(o)&&(s=o[l]=Ct(s));var c=s.elm=t.elm;if(n(t.isAsyncPlaceholder))i(s.asyncFactory.resolved)?E(t.elm,s,r):s.isAsyncPlaceholder=!0;else if(n(s.isStatic)&&n(t.isStatic)&&s.key===t.key&&(n(s.isCloned)||n(s.isOnce)))s.componentInstance=t.componentInstance;else{var d,f=s.data;i(f)&&i(d=f.hook)&&i(d=d.prepatch)&&d(t,s);var p=t.children,m=s.children;if(i(f)&&x(s)){for(d=0;d<a.update.length;++d)a.update[d](t,s);i(d=f.hook)&&i(d=d.update)&&d(t,s)}e(s.text)?i(p)&&i(m)?p!==m&&function(t,n,s,r,o){var a,l,h,c=0,d=0,f=n.length-1,p=n[0],m=n[f],y=s.length-1,v=s[0],x=s[y],b=!o;for(T(s);c<=f&&d<=y;)e(p)?p=n[++c]:e(m)?m=n[--f]:Fn(p,v)?(P(p,v,r,s,d),p=n[++c],v=s[++d]):Fn(m,x)?(P(m,x,r,s,y),m=n[--f],x=s[--y]):Fn(p,x)?(P(p,x,r,s,y),b&&u.insertBefore(t,p.elm,u.nextSibling(m.elm)),p=n[++c],x=s[--y]):Fn(m,v)?(P(m,v,r,s,d),b&&u.insertBefore(t,m.elm,p.elm),m=n[--f],v=s[++d]):(e(a)&&(a=Rn(n,c,f)),e(l=i(v.key)?a[v.key]:A(v,n,c,f))?g(v,r,t,p.elm,!1,s,d):Fn(h=n[l],v)?(P(h,v,r,s,d),n[l]=void 0,b&&u.insertBefore(t,h.elm,p.elm)):g(v,r,t,p.elm,!1,s,d),v=s[++d]);c>f?k(t,e(s[y+1])?null:s[y+1].elm,s,d,y,r):d>y&&C(0,n,c,f)}(c,p,m,r,h):i(m)?(T(m),i(t.text)&&u.setTextContent(c,""),k(c,null,m,0,m.length-1,r)):i(p)?C(0,p,0,p.length-1):i(t.text)&&u.setTextContent(c,""):t.text!==s.text&&u.setTextContent(c,s.text),i(f)&&i(d=f.hook)&&i(d=d.postpatch)&&d(t,s)}}}function N(t,e,s){if(n(s)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var D=!1,L=p("attrs,class,staticClass,staticStyle,key");function E(t,e,s,r){var o,a=e.tag,l=e.data,h=e.children;if(r=r||l&&l.pre,e.elm=t,n(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(!function(t,e,n){return i(e.tag)?0===e.tag.indexOf("vue-component")||!d(e,n)&&e.tag.toLowerCase()===(t.tagName&&t.tagName.toLowerCase()):t.nodeType===(e.isComment?8:3)}(t,e,r))return!1;if(i(l)&&(i(o=l.hook)&&i(o=o.init)&&o(e,!0),i(o=e.componentInstance)))return m(e,s),!0;if(i(a)){if(i(h))if(t.hasChildNodes())if(i(o=l)&&i(o=o.domProps)&&i(o=o.innerHTML)){if(o!==t.innerHTML)return"undefined"==typeof console||D||(D=!0,console.warn("Parent: ",t),console.warn("server innerHTML: ",o),console.warn("client innerHTML: ",t.innerHTML)),!1}else{for(var u=!0,c=t.firstChild,f=0;f<h.length;f++){if(!c||!E(c,h[f],s,r)){u=!1;break}c=c.nextSibling}if(!u||c)return"undefined"==typeof console||D||(D=!0,console.warn("Parent: ",t),console.warn("Mismatching childNodes vs. VNodes: ",t.childNodes,h)),!1}else v(e,h,s);if(i(l)){var p=!1;for(var g in l)if(!L(g)){p=!0,b(e,s);break}!p&&l.class&&Te(l.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,s,r,o){if(!e(s)){var l,h=!1,c=[];if(e(t))h=!0,g(s,c);else{var d=i(t.nodeType);if(!d&&Fn(t,s))P(t,s,c,null,null,o);else{if(d){if(1===t.nodeType&&t.hasAttribute(R)&&(t.removeAttribute(R),r=!0),n(r)){if(E(t,s,c))return N(s,c,!0),t;ht("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}l=t,t=new bt(u.tagName(l).toLowerCase(),{},[],void 0,l)}var f=t.elm,p=u.parentNode(f);if(g(s,c,f._leaveCb?null:p,u.nextSibling(f)),i(s.parent))for(var m=s.parent,y=x(s);m;){for(var v=0;v<a.destroy.length;++v)a.destroy[v](m);if(m.elm=s.elm,y){for(var b=0;b<a.create.length;++b)a.create[b](_n,m);var w=m.data.hook.insert;if(w.merged)for(var k=1;k<w.fns.length;k++)w.fns[k]()}else En(m);m=m.parent}i(p)?C(0,[t],0,0):i(t.tag)&&S(t)}}return N(s,c,h),s.elm}i(t)&&S(t)}}({nodeOps:Dn,modules:[Wn,is,Fs,Bs,Xs,$?{create:kr,activate:kr,remove:function(t,e){!0!==t.data.show?vr(t,e):e()}}:{}].concat(Vn)});J&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&Lr(t,"input")}));var Cr={inserted:function(t,e,i,n){"select"===i.tag?(n.elm&&!n.elm._vOptions?Le(i,"postpatch",(function(){Cr.componentUpdated(t,e,i)})):Mr(t,e,i.context),t._vOptions=[].map.call(t.options,Pr)):("textarea"===i.tag||Pn(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",Nr),t.addEventListener("compositionend",Dr),t.addEventListener("change",Dr),J&&(t.vmodel=!0)))},componentUpdated:function(t,e,i){if("select"===i.tag){Mr(t,e,i.context);var n=t._vOptions,s=t._vOptions=[].map.call(t.options,Pr);if(s.some((function(t,e){return!_(t,n[e])})))(t.multiple?e.value.some((function(t){return Ar(t,s)})):e.value!==e.oldValue&&Ar(e.value,s))&&Lr(t,"change")}}};function Mr(t,e,i){Tr(t,e,i),(K||Z)&&setTimeout((function(){Tr(t,e,i)}),0)}function Tr(t,e,i){var n=e.value,s=t.multiple;if(!s||Array.isArray(n)){for(var r,o,a=0,l=t.options.length;a<l;a++)if(o=t.options[a],s)r=O(n,Pr(o))>-1,o.selected!==r&&(o.selected=r);else if(_(Pr(o),n))return void(t.selectedIndex!==a&&(t.selectedIndex=a));s||(t.selectedIndex=-1)}else ht('<select multiple v-model="'+e.expression+'"> expects an Array value for its binding, but got '+Object.prototype.toString.call(n).slice(8,-1),i)}function Ar(t,e){return e.every((function(e){return!_(e,t)}))}function Pr(t){return"_value"in t?t._value:t.value}function Nr(t){t.target.composing=!0}function Dr(t){t.target.composing&&(t.target.composing=!1,Lr(t.target,"input"))}function Lr(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),t.dispatchEvent(i)}function Er(t){return!t.componentInstance||t.data&&t.data.transition?t:Er(t.componentInstance._vnode)}var _r={bind:function(t,e,i){var n=e.value,s=(i=Er(i)).data&&i.data.transition,r=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;n&&s?(i.data.show=!0,yr(i,(function(){t.style.display=r}))):t.style.display=n?r:"none"},update:function(t,e,i){var n=e.value;!n!=!e.oldValue&&((i=Er(i)).data&&i.data.transition?(i.data.show=!0,n?yr(i,(function(){t.style.display=t.__vOriginalDisplay})):vr(i,(function(){t.style.display="none"}))):t.style.display=n?t.__vOriginalDisplay:"none")},unbind:function(t,e,i,n,s){s||(t.style.display=t.__vOriginalDisplay)}},Or={model:Cr,show:_r},Fr={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Rr(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Rr(vi(e.children)):t}function Ir(t){var e={},i=t.$options;for(var n in i.propsData)e[n]=t[n];var s=i._parentListeners;for(var r in s)e[k(r)]=s[r];return e}function Br(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var jr=function(t){return t.tag||yi(t)},zr=function(t){return"show"===t.name},Hr={name:"transition",props:Fr,abstract:!0,render:function(t){var e=this,i=this.$slots.default;if(i&&(i=i.filter(jr)).length){i.length>1&&ht("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var n=this.mode;n&&"in-out"!==n&&"out-in"!==n&&ht("invalid <transition> mode: "+n,this.$parent);var r=i[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return r;var o=Rr(r);if(!o)return r;if(this._leaving)return Br(t,r);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var l=(o.data||(o.data={})).transition=Ir(this),h=this._vnode,u=Rr(h);if(o.data.directives&&o.data.directives.some(zr)&&(o.data.show=!0),u&&u.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(o,u)&&!yi(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var c=u.data.transition=P({},l);if("out-in"===n)return this._leaving=!0,Le(c,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Br(t,r);if("in-out"===n){if(yi(o))return h;var d,f=function(){d()};Le(l,"afterEnter",f),Le(l,"enterCancelled",f),Le(c,"delayLeave",(function(t){d=t}))}}return r}}},Ur=P({tag:String,moveClass:String},Fr);delete Ur.mode;var Vr={props:Ur,beforeMount:function(){var t=this,e=this._update;this._update=function(i,n){var s=Mi(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,s(),e.call(t,i,n)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),n=this.prevChildren=this.children,s=this.$slots.default||[],r=this.children=[],o=Ir(this),a=0;a<s.length;a++){var l=s[a];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))r.push(l),i[l.key]=l,(l.data||(l.data={})).transition=o;else{var h=l.componentOptions,u=h?h.Ctor.options.name||h.tag||"":l.tag;ht("<transition-group> children must be keyed: <"+u+">")}}if(n){for(var c=[],d=[],f=0;f<n.length;f++){var p=n[f];p.data.transition=o,p.data.pos=p.elm.getBoundingClientRect(),i[p.key]?c.push(p):d.push(p)}this.kept=t(e,null,c),this.removed=d}return t(e,null,r)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Yr),t.forEach(qr),t.forEach($r),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var i=t.elm,n=i.style;ur(i,e),n.transform=n.WebkitTransform=n.transitionDuration="",i.addEventListener(rr,i._moveCb=function t(n){n&&n.target!==i||n&&!/transform$/.test(n.propertyName)||(i.removeEventListener(rr,t),i._moveCb=null,cr(i,e))})}})))},methods:{hasMove:function(t,e){if(!er)return!1;if(this._hasMove)return this._hasMove;var i=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){Zs(i,t)})),Js(i,e),i.style.display="none",this.$el.appendChild(i);var n=pr(i);return this.$el.removeChild(i),this._hasMove=n.hasTransform}}};function Yr(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function qr(t){t.data.newPos=t.elm.getBoundingClientRect()}function $r(t){var e=t.data.pos,i=t.data.newPos,n=e.left-i.left,s=e.top-i.top;if(n||s){t.data.moved=!0;var r=t.elm.style;r.transform=r.WebkitTransform="translate("+n+"px,"+s+"px)",r.transitionDuration="0s"}}var Wr={Transition:Hr,TransitionGroup:Vr};Qi.config.mustUseProp=un,Qi.config.isReservedTag=Mn,Qi.config.isReservedAttr=ln,Qi.config.getTagNamespace=Tn,Qi.config.isUnknownElement=function(t){if(!$)return!0;if(Mn(t))return!1;if(t=t.toLowerCase(),null!=An[t])return An[t];var e=document.createElement(t);return t.indexOf("-")>-1?An[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:An[t]=/HTMLUnknownElement/.test(e.toString())},P(Qi.options.directives,Or),P(Qi.options.components,Wr),Qi.prototype.__patch__=$?Sr:D,Qi.prototype.$mount=function(t,e){return function(t,e,i){var n;return t.$el=e,t.$options.render||(t.$options.render=kt,t.$options.template&&"#"!==t.$options.template.charAt(0)||t.$options.el||e?ht("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",t):ht("Failed to mount component: template or render function not defined.",t)),Ni(t,"beforeMount"),n=j.performance&&re?function(){var e=t._name,n=t._uid,s="vue-perf-start:"+n,r="vue-perf-end:"+n;re(s);var o=t._render();re(r),oe("vue "+e+" render",s,r),re(s),t._update(o,i),re(r),oe("vue "+e+" patch",s,r)}:function(){t._update(t._render(),i)},new Ui(t,n,D,{before:function(){t._isMounted&&!t._isDestroyed&&Ni(t,"beforeUpdate")}},!0),i=!1,null==t.$vnode&&(t._isMounted=!0,Ni(t,"mounted")),t}(this,t=t&&$?Nn(t):void 0,e)},$&&setTimeout((function(){j.devtools&&(rt?rt.emit("init",Qi):console[console.info?"info":"log"]("Download the Vue Devtools extension for a better development experience:\nhttps://github.com/vuejs/vue-devtools")),!1!==j.productionTip&&"undefined"!=typeof console&&console[console.info?"info":"log"]("You are running Vue in development mode.\nMake sure to turn on production mode when deploying for production.\nSee more tips at https://vuejs.org/guide/deployment.html")}),0);var Gr=/\{\{((?:.|\r?\n)+?)\}\}/g,Xr=/[-.*+?^${}()|[\]\/\\]/g,Kr=b((function(t){var e=t[0].replace(Xr,"\\$&"),i=t[1].replace(Xr,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+i,"g")}));function Jr(t,e){var i=e?Kr(e):Gr;if(i.test(t)){for(var n,s,r,o=[],a=[],l=i.lastIndex=0;n=i.exec(t);){(s=n.index)>l&&(a.push(r=t.slice(l,s)),o.push(JSON.stringify(r)));var h=ss(n[1].trim());o.push("_s("+h+")"),a.push({"@binding":h}),l=s+n[0].length}return l<t.length&&(a.push(r=t.slice(l)),o.push(JSON.stringify(r))),{expression:o.join("+"),tokens:a}}}var Zr={staticKeys:["staticClass"],transformNode:function(t,e){var i=e.warn||os,n=ms(t,"class");n&&Jr(n,e.delimiters)&&i('class="'+n+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div class="{{ val }}">, use <div :class="val">.',t.rawAttrsMap.class),n&&(t.staticClass=JSON.stringify(n));var s=gs(t,"class",!1);s&&(t.classBinding=s)},genData:function(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}};var Qr,to={staticKeys:["staticStyle"],transformNode:function(t,e){var i=e.warn||os,n=ms(t,"style");n&&(Jr(n,e.delimiters)&&i('style="'+n+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div style="{{ val }}">, use <div :style="val">.',t.rawAttrsMap.style),t.staticStyle=JSON.stringify(js(n)));var s=gs(t,"style",!1);s&&(t.styleBinding=s)},genData:function(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}},eo=function(t){return(Qr=Qr||document.createElement("div")).innerHTML=t,Qr.textContent},io=p("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),no=p("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),so=p("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),ro=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,oo=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,ao="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+z.source+"]*",lo="((?:"+ao+"\\:)?"+ao+")",ho=new RegExp("^<"+lo),uo=/^\s*(\/?)>/,co=new RegExp("^<\\/"+lo+"[^>]*>"),fo=/^<!DOCTYPE [^>]+>/i,po=/^<!\--/,go=/^<!\[/,mo=p("script,style,textarea",!0),yo={},vo={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},xo=/&(?:lt|gt|quot|amp|#39);/g,bo=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,wo=p("pre,textarea",!0),ko=function(t,e){return t&&wo(t)&&"\n"===e[0]};function So(t,e){var i=e?bo:xo;return t.replace(i,(function(t){return vo[t]}))}var Co,Mo,To,Ao,Po,No,Do,Lo,Eo,_o=/^@|^v-on:/,Oo=/^v-|^@|^:/,Fo=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Ro=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Io=/^\(|\)$/g,Bo=/^\[.*\]$/,jo=/:(.*)$/,zo=/^:|^\.|^v-bind:/,Ho=/\.[^.\]]+(?=[^\]]*$)/g,Uo=/^v-slot(:|$)|^#/,Vo=/[\r\n]/,Yo=/\s+/g,qo=/[\s"'<>\/=]/,$o=b(eo),Wo="_empty_";function Go(t,e,i){return{type:1,tag:t,attrsList:e,attrsMap:ea(e),rawAttrsMap:{},parent:i,children:[]}}function Xo(t,e){Co=e.warn||os,No=e.isPreTag||L,Do=e.mustUseProp||L,Lo=e.getTagNamespace||L;var i=e.isReservedTag||L;Eo=function(t){return!!t.component||!i(t.tag)},To=as(e.modules,"transformNode"),Ao=as(e.modules,"preTransformNode"),Po=as(e.modules,"postTransformNode"),Mo=e.delimiters;var n,s,r=[],o=!1!==e.preserveWhitespace,a=e.whitespace,l=!1,h=!1,u=!1;function c(t,e){u||(u=!0,Co(t,e))}function d(t){if(f(t),l||t.processed||(t=Ko(t,e)),r.length||t===n||(n.if&&(t.elseif||t.else)?(p(t),Zo(n,{exp:t.elseif,block:t})):c("Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.",{start:t.start})),s&&!t.forbidden)if(t.elseif||t.else)o=t,a=function(t){for(var e=t.length;e--;){if(1===t[e].type)return t[e];" "!==t[e].text&&Co('text "'+t[e].text.trim()+'" between v-if and v-else(-if) will be ignored.',t[e]),t.pop()}}(s.children),a&&a.if?Zo(a,{exp:o.elseif,block:o}):Co("v-"+(o.elseif?'else-if="'+o.elseif+'"':"else")+" used on element <"+o.tag+"> without corresponding v-if.",o.rawAttrsMap[o.elseif?"v-else-if":"v-else"]);else{if(t.slotScope){var i=t.slotTarget||'"default"';(s.scopedSlots||(s.scopedSlots={}))[i]=t}s.children.push(t),t.parent=s}var o,a;t.children=t.children.filter((function(t){return!t.slotScope})),f(t),t.pre&&(l=!1),No(t.tag)&&(h=!1);for(var u=0;u<Po.length;u++)Po[u](t,e)}function f(t){if(!h)for(var e;(e=t.children[t.children.length-1])&&3===e.type&&" "===e.text;)t.children.pop()}function p(t){"slot"!==t.tag&&"template"!==t.tag||c("Cannot use <"+t.tag+"> as component root element because it may contain multiple nodes.",{start:t.start}),t.attrsMap.hasOwnProperty("v-for")&&c("Cannot use v-for on stateful component root element because it renders multiple elements.",t.rawAttrsMap["v-for"])}return function(t,e){for(var i,n,s=[],r=e.expectHTML,o=e.isUnaryTag||L,a=e.canBeLeftOpenTag||L,l=0;t;){if(i=t,n&&mo(n)){var h=0,u=n.toLowerCase(),c=yo[u]||(yo[u]=new RegExp("([\\s\\S]*?)(</"+u+"[^>]*>)","i")),d=t.replace(c,(function(t,i,n){return h=n.length,mo(u)||"noscript"===u||(i=i.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),ko(u,i)&&(i=i.slice(1)),e.chars&&e.chars(i),""}));l+=t.length-d.length,t=d,T(u,l-h,l)}else{var f=t.indexOf("<");if(0===f){if(po.test(t)){var p=t.indexOf("--\x3e");if(p>=0){e.shouldKeepComment&&e.comment(t.substring(4,p),l,l+p+3),S(p+3);continue}}if(go.test(t)){var g=t.indexOf("]>");if(g>=0){S(g+2);continue}}var m=t.match(fo);if(m){S(m[0].length);continue}var y=t.match(co);if(y){var v=l;S(y[0].length),T(y[1],v,l);continue}var x=C();if(x){M(x),ko(x.tagName,t)&&S(1);continue}}var b=void 0,w=void 0,k=void 0;if(f>=0){for(w=t.slice(f);!(co.test(w)||ho.test(w)||po.test(w)||go.test(w)||(k=w.indexOf("<",1))<0);)f+=k,w=t.slice(f);b=t.substring(0,f)}f<0&&(b=t),b&&S(b.length),e.chars&&b&&e.chars(b,l-b.length,l)}if(t===i){e.chars&&e.chars(t),!s.length&&e.warn&&e.warn('Mal-formatted tag at end of template: "'+t+'"',{start:l+t.length});break}}function S(e){l+=e,t=t.substring(e)}function C(){var e=t.match(ho);if(e){var i,n,s={tagName:e[1],attrs:[],start:l};for(S(e[0].length);!(i=t.match(uo))&&(n=t.match(oo)||t.match(ro));)n.start=l,S(n[0].length),n.end=l,s.attrs.push(n);if(i)return s.unarySlash=i[1],S(i[0].length),s.end=l,s}}function M(t){var i=t.tagName,l=t.unarySlash;r&&("p"===n&&so(i)&&T(n),a(i)&&n===i&&T(i));for(var h=o(i)||!!l,u=t.attrs.length,c=new Array(u),d=0;d<u;d++){var f=t.attrs[d],p=f[3]||f[4]||f[5]||"",g="a"===i&&"href"===f[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;c[d]={name:f[1],value:So(p,g)},e.outputSourceRange&&(c[d].start=f.start+f[0].match(/^\s*/).length,c[d].end=f.end)}h||(s.push({tag:i,lowerCasedTag:i.toLowerCase(),attrs:c,start:t.start,end:t.end}),n=i),e.start&&e.start(i,c,h,t.start,t.end)}function T(t,i,r){var o,a;if(null==i&&(i=l),null==r&&(r=l),t)for(a=t.toLowerCase(),o=s.length-1;o>=0&&s[o].lowerCasedTag!==a;o--);else o=0;if(o>=0){for(var h=s.length-1;h>=o;h--)(h>o||!t&&e.warn)&&e.warn("tag <"+s[h].tag+"> has no matching end tag.",{start:s[h].start,end:s[h].end}),e.end&&e.end(s[h].tag,i,r);s.length=o,n=o&&s[o-1].tag}else"br"===a?e.start&&e.start(t,[],!0,i,r):"p"===a&&(e.start&&e.start(t,[],!1,i,r),e.end&&e.end(t,i,r))}T()}(t,{warn:Co,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,outputSourceRange:e.outputSourceRange,start:function(t,i,o,a,u){var c=s&&s.ns||Lo(t);K&&"svg"===c&&(i=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];ia.test(n.name)||(n.name=n.name.replace(na,""),e.push(n))}return e}(i));var f,g=Go(t,i,s);c&&(g.ns=c),e.outputSourceRange&&(g.start=a,g.end=u,g.rawAttrsMap=g.attrsList.reduce((function(t,e){return t[e.name]=e,t}),{})),i.forEach((function(t){qo.test(t.name)&&Co("Invalid dynamic argument expression: attribute names cannot contain spaces, quotes, <, >, / or =.",{start:t.start+t.name.indexOf("["),end:t.start+t.name.length})})),"style"!==(f=g).tag&&("script"!==f.tag||f.attrsMap.type&&"text/javascript"!==f.attrsMap.type)||st()||(g.forbidden=!0,Co("Templates should only be responsible for mapping the state to the UI. Avoid placing tags with side-effects in your templates, such as <"+t+">, as they will not be parsed.",{start:g.start}));for(var m=0;m<Ao.length;m++)g=Ao[m](g,e)||g;l||(!function(t){null!=ms(t,"v-pre")&&(t.pre=!0)}(g),g.pre&&(l=!0)),No(g.tag)&&(h=!0),l?function(t){var e=t.attrsList,i=e.length;if(i)for(var n=t.attrs=new Array(i),s=0;s<i;s++)n[s]={name:e[s].name,value:JSON.stringify(e[s].value)},null!=e[s].start&&(n[s].start=e[s].start,n[s].end=e[s].end);else t.pre||(t.plain=!0)}(g):g.processed||(Jo(g),function(t){var e=ms(t,"v-if");if(e)t.if=e,Zo(t,{exp:e,block:t});else{null!=ms(t,"v-else")&&(t.else=!0);var i=ms(t,"v-else-if");i&&(t.elseif=i)}}(g),function(t){var e=ms(t,"v-once");null!=e&&(t.once=!0)}(g)),n||p(n=g),o?d(g):(s=g,r.push(g))},end:function(t,i,n){var o=r[r.length-1];r.length-=1,s=r[r.length-1],e.outputSourceRange&&(o.end=n),d(o)},chars:function(i,n,r){if(s){if(!K||"textarea"!==s.tag||s.attrsMap.placeholder!==i){var u,d,f,p=s.children;if(i=h||i.trim()?"script"===(u=s).tag||"style"===u.tag?i:$o(i):p.length?a?"condense"===a&&Vo.test(i)?"":" ":o?" ":"":"")h||"condense"!==a||(i=i.replace(Yo," ")),!l&&" "!==i&&(d=Jr(i,Mo))?f={type:2,expression:d.expression,tokens:d.tokens,text:i}:" "===i&&p.length&&" "===p[p.length-1].text||(f={type:3,text:i}),f&&(e.outputSourceRange&&(f.start=n,f.end=r),p.push(f))}}else i===t?c("Component template requires a root element, rather than just text.",{start:n}):(i=i.trim())&&c('text "'+i+'" outside root element will be ignored.',{start:n})},comment:function(t,i,n){if(s){var r={type:3,text:t,isComment:!0};e.outputSourceRange&&(r.start=i,r.end=n),s.children.push(r)}}}),n}function Ko(t,e){var i;!function(t){var e=gs(t,"key");if(e){if("template"===t.tag&&Co("<template> cannot be keyed. Place the key on real elements instead.",ps(t,"key")),t.for){var i=t.iterator2||t.iterator1,n=t.parent;i&&i===e&&n&&"transition-group"===n.tag&&Co("Do not use v-for index as key on <transition-group> children, this is the same as not using keys.",ps(t,"key"),!0)}t.key=e}}(t),t.plain=!t.key&&!t.scopedSlots&&!t.attrsList.length,function(t){var e=gs(t,"ref");e&&(t.ref=e,t.refInFor=function(t){var e=t;for(;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(t))}(t),function(t){var e;"template"===t.tag?((e=ms(t,"scope"))&&Co('the "scope" attribute for scoped slots have been deprecated and replaced by "slot-scope" since 2.5. The new "slot-scope" attribute can also be used on plain elements in addition to <template> to denote scoped slots.',t.rawAttrsMap.scope,!0),t.slotScope=e||ms(t,"slot-scope")):(e=ms(t,"slot-scope"))&&(t.attrsMap["v-for"]&&Co("Ambiguous combined usage of slot-scope and v-for on <"+t.tag+"> (v-for takes higher priority). Use a wrapper <template> for the scoped slot to make it clearer.",t.rawAttrsMap["slot-scope"],!0),t.slotScope=e);var i=gs(t,"slot");i&&(t.slotTarget='""'===i?'"default"':i,t.slotTargetDynamic=!(!t.attrsMap[":slot"]&&!t.attrsMap["v-bind:slot"]),"template"===t.tag||t.slotScope||hs(t,"slot",i,ps(t,"slot")));if("template"===t.tag){var n=ys(t,Uo);if(n){(t.slotTarget||t.slotScope)&&Co("Unexpected mixed usage of different slot syntaxes.",t),t.parent&&!Eo(t.parent)&&Co("<template v-slot> can only appear at the root level inside the receiving the component",t);var s=Qo(n),r=s.name,o=s.dynamic;t.slotTarget=r,t.slotTargetDynamic=o,t.slotScope=n.value||Wo}}else{var a=ys(t,Uo);if(a){Eo(t)||Co("v-slot can only be used on components or <template>.",a),(t.slotScope||t.slotTarget)&&Co("Unexpected mixed usage of different slot syntaxes.",t),t.scopedSlots&&Co("To avoid scope ambiguity, the default slot should also use <template> syntax when there are other named slots.",a);var l=t.scopedSlots||(t.scopedSlots={}),h=Qo(a),u=h.name,c=h.dynamic,d=l[u]=Go("template",[],t);d.slotTarget=u,d.slotTargetDynamic=c,d.children=t.children.filter((function(t){if(!t.slotScope)return t.parent=d,!0})),d.slotScope=a.value||Wo,t.children=[],t.plain=!1}}}(t),"slot"===(i=t).tag&&(i.slotName=gs(i,"name"),i.key&&Co("`key` does not work on <slot> because slots are abstract outlets and can possibly expand into multiple elements. Use the key on a wrapping element instead.",ps(i,"key"))),function(t){var e;(e=gs(t,"is"))&&(t.component=e);null!=ms(t,"inline-template")&&(t.inlineTemplate=!0)}(t);for(var n=0;n<To.length;n++)t=To[n](t,e)||t;return function(t){var e,i,n,s,r,o,a,l,h=t.attrsList;for(e=0,i=h.length;e<i;e++){if(n=s=h[e].name,r=h[e].value,Oo.test(n))if(t.hasBindings=!0,(o=ta(n.replace(Oo,"")))&&(n=n.replace(Ho,"")),zo.test(n))n=n.replace(zo,""),r=ss(r),(l=Bo.test(n))&&(n=n.slice(1,-1)),0===r.trim().length&&Co('The value for a v-bind expression cannot be empty. Found in "v-bind:'+n+'"'),o&&(o.prop&&!l&&"innerHtml"===(n=k(n))&&(n="innerHTML"),o.camel&&!l&&(n=k(n)),o.sync&&(a=bs(r,"$event"),l?fs(t,'"update:"+('+n+")",a,null,!1,Co,h[e],!0):(fs(t,"update:"+k(n),a,null,!1,Co,h[e]),M(n)!==k(n)&&fs(t,"update:"+M(n),a,null,!1,Co,h[e])))),o&&o.prop||!t.component&&Do(t.tag,t.attrsMap.type,n)?ls(t,n,r,h[e],l):hs(t,n,r,h[e],l);else if(_o.test(n))n=n.replace(_o,""),(l=Bo.test(n))&&(n=n.slice(1,-1)),fs(t,n,r,o,!1,Co,h[e],l);else{var u=(n=n.replace(Oo,"")).match(jo),c=u&&u[1];l=!1,c&&(n=n.slice(0,-(c.length+1)),Bo.test(c)&&(c=c.slice(1,-1),l=!0)),cs(t,n,s,r,c,l,o,h[e]),"model"===n&&sa(t,r)}else Jr(r,Mo)&&Co(n+'="'+r+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div id="{{ val }}">, use <div :id="val">.',h[e]),hs(t,n,JSON.stringify(r),h[e]),!t.component&&"muted"===n&&Do(t.tag,t.attrsMap.type,n)&&ls(t,n,"true",h[e])}}(t),t}function Jo(t){var e;if(e=ms(t,"v-for")){var i=function(t){var e=t.match(Fo);if(!e)return;var i={};i.for=e[2].trim();var n=e[1].trim().replace(Io,""),s=n.match(Ro);s?(i.alias=n.replace(Ro,"").trim(),i.iterator1=s[1].trim(),s[2]&&(i.iterator2=s[2].trim())):i.alias=n;return i}(e);i?P(t,i):Co("Invalid v-for expression: "+e,t.rawAttrsMap["v-for"])}}function Zo(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function Qo(t){var e=t.name.replace(Uo,"");return e||("#"!==t.name[0]?e="default":Co("v-slot shorthand syntax requires a slot name.",t)),Bo.test(e)?{name:e.slice(1,-1),dynamic:!0}:{name:'"'+e+'"',dynamic:!1}}function ta(t){var e=t.match(Ho);if(e){var i={};return e.forEach((function(t){i[t.slice(1)]=!0})),i}}function ea(t){for(var e={},i=0,n=t.length;i<n;i++)!e[t[i].name]||K||Z||Co("duplicate attribute: "+t[i].name,t[i]),e[t[i].name]=t[i].value;return e}var ia=/^xmlns:NS\d+/,na=/^NS\d+:/;function sa(t,e){for(var i=t;i;)i.for&&i.alias===e&&Co("<"+t.tag+' v-model="'+e+'">: You are binding v-model directly to a v-for iteration alias. This will not be able to modify the v-for source array because writing to the alias is like modifying a function local variable. Consider using an array of objects and use v-model on an object property instead.',t.rawAttrsMap["v-model"]),i=i.parent}function ra(t){return Go(t.tag,t.attrsList.slice(),t.parent)}var oa=[Zr,to,{preTransformNode:function(t,e){if("input"===t.tag){var i,n=t.attrsMap;if(!n["v-model"])return;if((n[":type"]||n["v-bind:type"])&&(i=gs(t,"type")),n.type||i||!n["v-bind"]||(i="("+n["v-bind"]+").type"),i){var s=ms(t,"v-if",!0),r=s?"&&("+s+")":"",o=null!=ms(t,"v-else",!0),a=ms(t,"v-else-if",!0),l=ra(t);Jo(l),us(l,"type","checkbox"),Ko(l,e),l.processed=!0,l.if="("+i+")==='checkbox'"+r,Zo(l,{exp:l.if,block:l});var h=ra(t);ms(h,"v-for",!0),us(h,"type","radio"),Ko(h,e),Zo(l,{exp:"("+i+")==='radio'"+r,block:h});var u=ra(t);return ms(u,"v-for",!0),us(u,":type",i),Ko(u,e),Zo(l,{exp:s,block:u}),o?l.else=!0:a&&(l.elseif=a),l}}}}];var aa,la,ha={model:function(t,e,i){es=i;var n=e.value,s=e.modifiers,r=t.tag,o=t.attrsMap.type;if("input"===r&&"file"===o&&es("<"+t.tag+' v-model="'+n+'" type="file">:\nFile inputs are read only. Use a v-on:change listener instead.',t.rawAttrsMap["v-model"]),t.component)return xs(t,n,s),!1;if("select"===r)!function(t,e,i){var n=i&&i.number,s='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(n?"_n(val)":"val")+"});";s=s+" "+bs(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),fs(t,"change",s,null,!0)}(t,n,s);else if("input"===r&&"checkbox"===o)!function(t,e,i){var n=i&&i.number,s=gs(t,"value")||"null",r=gs(t,"true-value")||"true",o=gs(t,"false-value")||"false";ls(t,"checked","Array.isArray("+e+")?_i("+e+","+s+")>-1"+("true"===r?":("+e+")":":_q("+e+","+r+")")),fs(t,"change","var $$a="+e+",$$el=$event.target,$$c=$$el.checked?("+r+"):("+o+");if(Array.isArray($$a)){var $$v="+(n?"_n("+s+")":s)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+bs(e,"$$a.concat([$$v])")+")}else{$$i>-1&&("+bs(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+bs(e,"$$c")+"}",null,!0)}(t,n,s);else if("input"===r&&"radio"===o)!function(t,e,i){var n=i&&i.number,s=gs(t,"value")||"null";ls(t,"checked","_q("+e+","+(s=n?"_n("+s+")":s)+")"),fs(t,"change",bs(e,s),null,!0)}(t,n,s);else if("input"===r||"textarea"===r)!function(t,e,i){var n=t.attrsMap.type,s=t.attrsMap["v-bind:value"]||t.attrsMap[":value"],r=t.attrsMap["v-bind:type"]||t.attrsMap[":type"];if(s&&!r){var o=t.attrsMap["v-bind:value"]?"v-bind:value":":value";es(o+'="'+s+'" conflicts with v-model on the same element because the latter already expands to a value binding internally',t.rawAttrsMap[o])}var a=i||{},l=a.lazy,h=a.number,u=a.trim,c=!l&&"range"!==n,d=l?"change":"range"===n?As:"input",f="$event.target.value";u&&(f="$event.target.value.trim()");h&&(f="_n("+f+")");var p=bs(e,f);c&&(p="if($event.target.composing)return;"+p);ls(t,"value","("+e+")"),fs(t,d,p,null,!0),(u||h)&&fs(t,"blur","$forceUpdate()")}(t,n,s);else{if(!j.isReservedTag(r))return xs(t,n,s),!1;es("<"+t.tag+' v-model="'+n+"\">: v-model is not supported on this element type. If you are working with contenteditable, it's recommended to wrap a library dedicated for that purpose inside a custom component.",t.rawAttrsMap["v-model"])}return!0},text:function(t,e){e.value&&ls(t,"textContent","_s("+e.value+")",e)},html:function(t,e){e.value&&ls(t,"innerHTML","_s("+e.value+")",e)}},ua={expectHTML:!0,modules:oa,directives:ha,isPreTag:function(t){return"pre"===t},isUnaryTag:io,mustUseProp:un,canBeLeftOpenTag:no,isReservedTag:Mn,getTagNamespace:Tn,staticKeys:function(t){return t.reduce((function(t,e){return t.concat(e.staticKeys||[])}),[]).join(",")}(oa)},ca=b((function(t){return p("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(t?","+t:""))}));function da(t,e){t&&(aa=ca(e.staticKeys||""),la=e.isReservedTag||L,fa(t),pa(t,!1))}function fa(t){if(t.static=function(t){if(2===t.type)return!1;if(3===t.type)return!0;return!(!t.pre&&(t.hasBindings||t.if||t.for||g(t.tag)||!la(t.tag)||function(t){for(;t.parent;){if("template"!==(t=t.parent).tag)return!1;if(t.for)return!0}return!1}(t)||!Object.keys(t).every(aa)))}(t),1===t.type){if(!la(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var e=0,i=t.children.length;e<i;e++){var n=t.children[e];fa(n),n.static||(t.static=!1)}if(t.ifConditions)for(var s=1,r=t.ifConditions.length;s<r;s++){var o=t.ifConditions[s].block;fa(o),o.static||(t.static=!1)}}}function pa(t,e){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=e),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var i=0,n=t.children.length;i<n;i++)pa(t.children[i],e||!!t.for);if(t.ifConditions)for(var s=1,r=t.ifConditions.length;s<r;s++)pa(t.ifConditions[s].block,e)}}var ga=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*(?:[\w$]+)?\s*\(/,ma=/\([^)]*?\);*$/,ya=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,va={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},xa={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},ba=function(t){return"if("+t+")return null;"},wa={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:ba("$event.target !== $event.currentTarget"),ctrl:ba("!$event.ctrlKey"),shift:ba("!$event.shiftKey"),alt:ba("!$event.altKey"),meta:ba("!$event.metaKey"),left:ba("'button' in $event && $event.button !== 0"),middle:ba("'button' in $event && $event.button !== 1"),right:ba("'button' in $event && $event.button !== 2")};function ka(t,e){var i=e?"nativeOn:":"on:",n="",s="";for(var r in t){var o=Sa(t[r]);t[r]&&t[r].dynamic?s+=r+","+o+",":n+='"'+r+'":'+o+","}return n="{"+n.slice(0,-1)+"}",s?i+"_d("+n+",["+s.slice(0,-1)+"])":i+n}function Sa(t){if(!t)return"function(){}";if(Array.isArray(t))return"["+t.map((function(t){return Sa(t)})).join(",")+"]";var e=ya.test(t.value),i=ga.test(t.value),n=ya.test(t.value.replace(ma,""));if(t.modifiers){var s="",r="",o=[];for(var a in t.modifiers)if(wa[a])r+=wa[a],va[a]&&o.push(a);else if("exact"===a){var l=t.modifiers;r+=ba(["ctrl","shift","alt","meta"].filter((function(t){return!l[t]})).map((function(t){return"$event."+t+"Key"})).join("||"))}else o.push(a);return o.length&&(s+=function(t){return"if(!$event.type.indexOf('key')&&"+t.map(Ca).join("&&")+")return null;"}(o)),r&&(s+=r),"function($event){"+s+(e?"return "+t.value+"($event)":i?"return ("+t.value+")($event)":n?"return "+t.value:t.value)+"}"}return e||i?t.value:"function($event){"+(n?"return "+t.value:t.value)+"}"}function Ca(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var i=va[t],n=xa[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(i)+",$event.key,"+JSON.stringify(n)+")"}var Ma={on:function(t,e){e.modifiers&&ht("v-on without argument does not support modifiers."),t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}},bind:function(t,e){t.wrapData=function(i){return"_b("+i+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}},cloak:D},Ta=function(t){this.options=t,this.warn=t.warn||os,this.transforms=as(t.modules,"transformCode"),this.dataGenFns=as(t.modules,"genData"),this.directives=P(P({},Ma),t.directives);var e=t.isReservedTag||L;this.maybeComponent=function(t){return!!t.component||!e(t.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function Aa(t,e){var i=new Ta(e);return{render:"with(this){return "+(t?Pa(t,i):'_c("div")')+"}",staticRenderFns:i.staticRenderFns}}function Pa(t,e){if(t.parent&&(t.pre=t.pre||t.parent.pre),t.staticRoot&&!t.staticProcessed)return Na(t,e);if(t.once&&!t.onceProcessed)return Da(t,e);if(t.for&&!t.forProcessed)return _a(t,e);if(t.if&&!t.ifProcessed)return La(t,e);if("template"!==t.tag||t.slotTarget||e.pre){if("slot"===t.tag)return function(t,e){var i=t.slotName||'"default"',n=Ia(t,e),s="_t("+i+(n?","+n:""),r=t.attrs||t.dynamicAttrs?za((t.attrs||[]).concat(t.dynamicAttrs||[]).map((function(t){return{name:k(t.name),value:t.value,dynamic:t.dynamic}}))):null,o=t.attrsMap["v-bind"];!r&&!o||n||(s+=",null");r&&(s+=","+r);o&&(s+=(r?"":",null")+","+o);return s+")"}(t,e);var i;if(t.component)i=function(t,e,i){var n=e.inlineTemplate?null:Ia(e,i,!0);return"_c("+t+","+Oa(e,i)+(n?","+n:"")+")"}(t.component,t,e);else{var n;(!t.plain||t.pre&&e.maybeComponent(t))&&(n=Oa(t,e));var s=t.inlineTemplate?null:Ia(t,e,!0);i="_c('"+t.tag+"'"+(n?","+n:"")+(s?","+s:"")+")"}for(var r=0;r<e.transforms.length;r++)i=e.transforms[r](t,i);return i}return Ia(t,e)||"void 0"}function Na(t,e){t.staticProcessed=!0;var i=e.pre;return t.pre&&(e.pre=t.pre),e.staticRenderFns.push("with(this){return "+Pa(t,e)+"}"),e.pre=i,"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function Da(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return La(t,e);if(t.staticInFor){for(var i="",n=t.parent;n;){if(n.for){i=n.key;break}n=n.parent}return i?"_o("+Pa(t,e)+","+e.onceId+++","+i+")":(e.warn("v-once can only be used inside v-for that is keyed. ",t.rawAttrsMap["v-once"]),Pa(t,e))}return Na(t,e)}function La(t,e,i,n){return t.ifProcessed=!0,Ea(t.ifConditions.slice(),e,i,n)}function Ea(t,e,i,n){if(!t.length)return n||"_e()";var s=t.shift();return s.exp?"("+s.exp+")?"+r(s.block)+":"+Ea(t,e,i,n):""+r(s.block);function r(t){return i?i(t,e):t.once?Da(t,e):Pa(t,e)}}function _a(t,e,i,n){var s=t.for,r=t.alias,o=t.iterator1?","+t.iterator1:"",a=t.iterator2?","+t.iterator2:"";return e.maybeComponent(t)&&"slot"!==t.tag&&"template"!==t.tag&&!t.key&&e.warn("<"+t.tag+' v-for="'+r+" in "+s+'">: component lists rendered with v-for should have explicit keys. See https://vuejs.org/guide/list.html#key for more info.',t.rawAttrsMap["v-for"],!0),t.forProcessed=!0,(n||"_l")+"(("+s+"),function("+r+o+a+"){return "+(i||Pa)(t,e)+"})"}function Oa(t,e){var i="{",n=function(t,e){var i=t.directives;if(!i)return;var n,s,r,o,a="directives:[",l=!1;for(n=0,s=i.length;n<s;n++){r=i[n],o=!0;var h=e.directives[r.name];h&&(o=!!h(t,r,e.warn)),o&&(l=!0,a+='{name:"'+r.name+'",rawName:"'+r.rawName+'"'+(r.value?",value:("+r.value+"),expression:"+JSON.stringify(r.value):"")+(r.arg?",arg:"+(r.isDynamicArg?r.arg:'"'+r.arg+'"'):"")+(r.modifiers?",modifiers:"+JSON.stringify(r.modifiers):"")+"},")}if(l)return a.slice(0,-1)+"]"}(t,e);n&&(i+=n+","),t.key&&(i+="key:"+t.key+","),t.ref&&(i+="ref:"+t.ref+","),t.refInFor&&(i+="refInFor:true,"),t.pre&&(i+="pre:true,"),t.component&&(i+='tag:"'+t.tag+'",');for(var s=0;s<e.dataGenFns.length;s++)i+=e.dataGenFns[s](t);if(t.attrs&&(i+="attrs:"+za(t.attrs)+","),t.props&&(i+="domProps:"+za(t.props)+","),t.events&&(i+=ka(t.events,!1)+","),t.nativeEvents&&(i+=ka(t.nativeEvents,!0)+","),t.slotTarget&&!t.slotScope&&(i+="slot:"+t.slotTarget+","),t.scopedSlots&&(i+=function(t,e,i){var n=t.for||Object.keys(e).some((function(t){var i=e[t];return i.slotTargetDynamic||i.if||i.for||Fa(i)})),s=!!t.if;if(!n)for(var r=t.parent;r;){if(r.slotScope&&r.slotScope!==Wo||r.for){n=!0;break}r.if&&(s=!0),r=r.parent}var o=Object.keys(e).map((function(t){return Ra(e[t],i)})).join(",");return"scopedSlots:_u(["+o+"]"+(n?",null,true":"")+(!n&&s?",null,false,"+function(t){var e=5381,i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e>>>0}(o):"")+")"}(t,t.scopedSlots,e)+","),t.model&&(i+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var r=function(t,e){var i=t.children[0];1===t.children.length&&1===i.type||e.warn("Inline-template components must have exactly one child element.",{start:t.start});if(i&&1===i.type){var n=Aa(i,e.options);return"inlineTemplate:{render:function(){"+n.render+"},staticRenderFns:["+n.staticRenderFns.map((function(t){return"function(){"+t+"}"})).join(",")+"]}"}}(t,e);r&&(i+=r+",")}return i=i.replace(/,$/,"")+"}",t.dynamicAttrs&&(i="_b("+i+',"'+t.tag+'",'+za(t.dynamicAttrs)+")"),t.wrapData&&(i=t.wrapData(i)),t.wrapListeners&&(i=t.wrapListeners(i)),i}function Fa(t){return 1===t.type&&("slot"===t.tag||t.children.some(Fa))}function Ra(t,e){var i=t.attrsMap["slot-scope"];if(t.if&&!t.ifProcessed&&!i)return La(t,e,Ra,"null");if(t.for&&!t.forProcessed)return _a(t,e,Ra);var n=t.slotScope===Wo?"":String(t.slotScope),s="function("+n+"){return "+("template"===t.tag?t.if&&i?"("+t.if+")?"+(Ia(t,e)||"undefined")+":undefined":Ia(t,e)||"undefined":Pa(t,e))+"}",r=n?"":",proxy:true";return"{key:"+(t.slotTarget||'"default"')+",fn:"+s+r+"}"}function Ia(t,e,i,n,s){var r=t.children;if(r.length){var o=r[0];if(1===r.length&&o.for&&"template"!==o.tag&&"slot"!==o.tag){var a=i?e.maybeComponent(o)?",1":",0":"";return""+(n||Pa)(o,e)+a}var l=i?function(t,e){for(var i=0,n=0;n<t.length;n++){var s=t[n];if(1===s.type){if(Ba(s)||s.ifConditions&&s.ifConditions.some((function(t){return Ba(t.block)}))){i=2;break}(e(s)||s.ifConditions&&s.ifConditions.some((function(t){return e(t.block)})))&&(i=1)}}return i}(r,e.maybeComponent):0,h=s||ja;return"["+r.map((function(t){return h(t,e)})).join(",")+"]"+(l?","+l:"")}}function Ba(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function ja(t,e){return 1===t.type?Pa(t,e):3===t.type&&t.isComment?function(t){return"_e("+JSON.stringify(t.text)+")"}(t):function(t){return"_v("+(2===t.type?t.expression:Ha(JSON.stringify(t.text)))+")"}(t)}function za(t){for(var e="",i="",n=0;n<t.length;n++){var s=t[n],r=Ha(s.value);s.dynamic?i+=s.name+","+r+",":e+='"'+s.name+'":'+r+","}return e="{"+e.slice(0,-1)+"}",i?"_d("+e+",["+i.slice(0,-1)+"])":e}function Ha(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}var Ua=new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),Va=new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)"),Ya=/'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g;function qa(t,e){t&&$a(t,e)}function $a(t,e){if(1===t.type){for(var i in t.attrsMap)if(Oo.test(i)){var n=t.attrsMap[i];if(n){var s=t.rawAttrsMap[i];"v-for"===i?Ga(t,'v-for="'+n+'"',e,s):_o.test(i)?Wa(n,i+'="'+n+'"',e,s):Ka(n,i+'="'+n+'"',e,s)}}if(t.children)for(var r=0;r<t.children.length;r++)$a(t.children[r],e)}else 2===t.type&&Ka(t.expression,t.text,e,t)}function Wa(t,e,i,n){var s=t.replace(Ya,""),r=s.match(Va);r&&"$"!==s.charAt(r.index-1)&&i('avoid using JavaScript unary operator as property name: "'+r[0]+'" in expression '+e.trim(),n),Ka(t,e,i,n)}function Ga(t,e,i,n){Ka(t.for||"",e,i,n),Xa(t.alias,"v-for alias",e,i,n),Xa(t.iterator1,"v-for iterator",e,i,n),Xa(t.iterator2,"v-for iterator",e,i,n)}function Xa(t,e,i,n,s){if("string"==typeof t)try{new Function("var "+t+"=_")}catch(r){n("invalid "+e+' "'+t+'" in expression: '+i.trim(),s)}}function Ka(t,e,i,n){try{new Function("return "+t)}catch(r){var s=t.replace(Ya,"").match(Ua);i(s?'avoid using JavaScript keyword as property name: "'+s[0]+'"\n  Raw expression: '+e.trim():"invalid expression: "+r.message+" in\n\n    "+t+"\n\n  Raw expression: "+e.trim()+"\n",n)}}function Ja(t,e){var i="";if(e>0)for(;1&e&&(i+=t),!((e>>>=1)<=0);)t+=t;return i}function Za(t,e){try{return new Function(t)}catch(i){return e.push({err:i,code:t}),D}}function Qa(t){var e=Object.create(null);return function(i,n,s){var r=(n=P({},n)).warn||ht;delete n.warn;try{new Function("return 1")}catch(t){t.toString().match(/unsafe-eval|CSP/)&&r("It seems you are using the standalone build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. The template compiler cannot work in this environment. Consider relaxing the policy to allow unsafe-eval or pre-compiling your templates into render functions.")}var o=n.delimiters?String(n.delimiters)+i:i;if(e[o])return e[o];var a=t(i,n);a.errors&&a.errors.length&&(n.outputSourceRange?a.errors.forEach((function(t){r("Error compiling template:\n\n"+t.msg+"\n\n"+function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);for(var n=t.split(/\r?\n/),s=0,r=[],o=0;o<n.length;o++)if((s+=n[o].length+1)>=e){for(var a=o-2;a<=o+2||i>s;a++)if(!(a<0||a>=n.length)){r.push(""+(a+1)+Ja(" ",3-String(a+1).length)+"|  "+n[a]);var l=n[a].length;if(a===o){var h=e-(s-l)+1,u=i>s?l-h:i-e;r.push("   |  "+Ja(" ",h)+Ja("^",u))}else if(a>o){if(i>s){var c=Math.min(i-s,l);r.push("   |  "+Ja("^",c))}s+=l+1}}break}return r.join("\n")}(i,t.start,t.end),s)})):r("Error compiling template:\n\n"+i+"\n\n"+a.errors.map((function(t){return"- "+t})).join("\n")+"\n",s)),a.tips&&a.tips.length&&(n.outputSourceRange?a.tips.forEach((function(t){return ut(t.msg,s)})):a.tips.forEach((function(t){return ut(t,s)})));var l={},h=[];return l.render=Za(a.render,h),l.staticRenderFns=a.staticRenderFns.map((function(t){return Za(t,h)})),a.errors&&a.errors.length||!h.length||r("Failed to generate render function:\n\n"+h.map((function(t){var e=t.err,i=t.code;return e.toString()+" in\n\n"+i+"\n"})).join("\n"),s),e[o]=l}}var tl,el,il=(tl=function(t,e){var i=Xo(t.trim(),e);!1!==e.optimize&&da(i,e);var n=Aa(i,e);return{ast:i,render:n.render,staticRenderFns:n.staticRenderFns}},function(t){function e(e,i){var n=Object.create(t),s=[],r=[],o=function(t,e,i){(i?r:s).push(t)};if(i){if(i.outputSourceRange){var a=e.match(/^\s*/)[0].length;o=function(t,e,i){var n={msg:t};e&&(null!=e.start&&(n.start=e.start+a),null!=e.end&&(n.end=e.end+a)),(i?r:s).push(n)}}for(var l in i.modules&&(n.modules=(t.modules||[]).concat(i.modules)),i.directives&&(n.directives=P(Object.create(t.directives||null),i.directives)),i)"modules"!==l&&"directives"!==l&&(n[l]=i[l])}n.warn=o;var h=tl(e.trim(),n);return qa(h.ast,o),h.errors=s,h.tips=r,h}return{compile:e,compileToFunctions:Qa(e)}}),nl=il(ua),sl=(nl.compile,nl.compileToFunctions);function rl(t){return(el=el||document.createElement("div")).innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',el.innerHTML.indexOf("&#10;")>0}var ol=!!$&&rl(!1),al=!!$&&rl(!0),ll=b((function(t){var e=Nn(t);return e&&e.innerHTML})),hl=Qi.prototype.$mount;return Qi.prototype.$mount=function(t,e){if((t=t&&Nn(t))===document.body||t===document.documentElement)return ht("Do not mount Vue to <html> or <body> - mount to normal elements instead."),this;var i=this.$options;if(!i.render){var n=i.template;if(n)if("string"==typeof n)"#"===n.charAt(0)&&((n=ll(n))||ht("Template element not found or is empty: "+i.template,this));else{if(!n.nodeType)return ht("invalid template option:"+n,this),this;n=n.innerHTML}else t&&(n=function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}(t));if(n){j.performance&&re&&re("compile");var s=sl(n,{outputSourceRange:!0,shouldDecodeNewlines:ol,shouldDecodeNewlinesForHref:al,delimiters:i.delimiters,comments:i.comments},this),r=s.render,o=s.staticRenderFns;i.render=r,i.staticRenderFns=o,j.performance&&re&&(re("compile end"),oe("vue "+this._name+" compile","compile","compile end"))}}return hl.call(this,t,e)},Qi.compile=sl,Qi}));var sortable=function(){"use strict";function t(t,e,i){if(void 0===i)return t&&t.h5s&&t.h5s.data&&t.h5s.data[e];t.h5s=t.h5s||{},t.h5s.data=t.h5s.data||{},t.h5s.data[e]=i}function e(t,e){if(!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof e?Array.from(t):Array.from(t).filter((function(t){return 1===t.nodeType&&t.matches(e)}))}var i=new Map,n=function(){function t(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(t.prototype,"config",{get:function(){var t={};return this._config.forEach((function(e,i){t[i]=e})),t},set:function(t){if("object"!=typeof t)throw new Error("You must provide a valid configuration object to the config setter.");var e=Object.assign({},t);this._config=new Map(Object.entries(e))},enumerable:!0,configurable:!0}),t.prototype.setConfig=function(t,e){if(!this._config.has(t))throw new Error("Trying to set invalid configuration item: "+t);this._config.set(t,e)},t.prototype.getConfig=function(t){if(!this._config.has(t))throw new Error("Invalid configuration item requested: "+t);return this._config.get(t)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){if(!(t instanceof HTMLElement)&&null!==t)throw new Error("A placeholder must be an html element or null.");this._placeholder=t},enumerable:!0,configurable:!0}),t.prototype.setData=function(t,e){if("string"!=typeof t)throw new Error("The key must be a string.");this._data.set(t,e)},t.prototype.getData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.get(t)},t.prototype.deleteData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.delete(t)},t}();function s(t){if(!(t instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return i.has(t)||i.set(t,new n),i.get(t)}function r(t,e,i){if(t instanceof Array)for(var n=0;n<t.length;++n)r(t[n],e,i);else t.addEventListener(e,i),s(t).setData("event"+e,i)}function o(t,e){if(t instanceof Array)for(var i=0;i<t.length;++i)o(t[i],e);else t.removeEventListener(e,s(t).getData("event"+e)),s(t).deleteData("event"+e)}function a(t,e,i){if(t instanceof Array)for(var n=0;n<t.length;++n)a(t[n],e,i);else t.setAttribute(e,i)}function l(t,e){if(t instanceof Array)for(var i=0;i<t.length;++i)l(t[i],e);else t.removeAttribute(e)}function h(t){if(!t.parentElement||0===t.getClientRects().length)throw new Error("target element must be part of the dom");var e=t.getClientRects()[0];return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}}function u(t,e){if(!(t instanceof HTMLElement&&(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(e).indexOf(t)}function c(t){if(!(t instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==t.parentNode}var d=function(t,e,i){if(!(t instanceof HTMLElement&&t.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");t.parentElement.insertBefore(e,"before"===i?t:t.nextElementSibling)},f=function(t,e){return d(t,e,"after")};function p(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return["height","padding-top","padding-bottom"].map((function(t){var i=parseInt(e.getPropertyValue(t),10);return isNaN(i)?0:i})).reduce((function(t,e){return t+e}))}function g(t,e){if(!(t instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof e?t:t.filter((function(t){return t.querySelector(e)instanceof HTMLElement||t.shadowRoot&&t.shadowRoot.querySelector(e)instanceof HTMLElement})).map((function(t){return t.querySelector(e)||t.shadowRoot&&t.shadowRoot.querySelector(e)}))}function m(t){return t.composedPath&&t.composedPath()[0]||t.target}var y=function(t,e,i){return{element:t,posX:i.pageX-e.left,posY:i.pageY-e.top}};function v(t,e){if(!0===t.isSortable){var i=s(t).getConfig("acceptFrom");if(null!==i&&!1!==i&&"string"!=typeof i)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==i)return!1!==i&&i.split(",").filter((function(t){return t.length>0&&e.matches(t)})).length>0;if(t===e)return!0;if(void 0!==s(t).getConfig("connectWith")&&null!==s(t).getConfig("connectWith"))return s(t).getConfig("connectWith")===s(e).getConfig("connectWith")}return!1}var x,b,w,k,S,C,M,T,A={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null};function P(t,i){if("string"==typeof s(t).getConfig("hoverClass")){var n=s(t).getConfig("hoverClass").split(" ");!0===i?(r(t,"mousemove",function(t,e){var i=this;if(void 0===e&&(e=250),"function"!=typeof t)throw new Error("You must provide a function as the first argument for throttle.");if("number"!=typeof e)throw new Error("You must provide a number as the second argument for throttle.");var n=null;return function(){for(var s=[],r=0;r<arguments.length;r++)s[r-0]=arguments[r];var o=Date.now();(null===n||o-n>=e)&&(n=o,t.apply(i,s))}}((function(i){0===i.buttons&&e(t.children,s(t).getConfig("items")).forEach((function(t){var e,s;t!==i.target?(e=t.classList).remove.apply(e,n):(s=t.classList).add.apply(s,n)}))}),s(t).getConfig("throttleTime"))),r(t,"mouseleave",(function(){e(t.children,s(t).getConfig("items")).forEach((function(t){var e;(e=t.classList).remove.apply(e,n)}))}))):(o(t,"mousemove"),o(t,"mouseleave"))}}var N=function(t){o(t,"dragstart"),o(t,"dragend"),o(t,"dragover"),o(t,"dragenter"),o(t,"drop"),o(t,"mouseenter"),o(t,"mouseleave")};function D(t,e){if(e.composedPath)return e.composedPath().find((function(t){return t.isSortable}));for(;!0!==t.isSortable;)t=t.parentElement;return t}function L(i,n){var s=t(i,"opts"),r=e(i.children,s.items).filter((function(t){return t.contains(n)||t.shadowRoot&&t.shadowRoot.contains(n)}));return r.length>0?r[0]:n}var E=function(i){var n=t(i,"opts")||{},s=e(i.children,n.items),r=g(s,n.handle);o(i,"dragover"),o(i,"dragenter"),o(i,"drop"),function(t){var e;(e=t).h5s&&delete e.h5s.data,l(t,"aria-dropeffect")}(i),o(r,"mousedown"),N(s),function(t){l(t,"aria-grabbed"),l(t,"aria-copied"),l(t,"draggable"),l(t,"role")}(s)},_=function(i){var n=t(i,"opts"),s=e(i.children,n.items),o=g(s,n.handle);(a(i,"aria-dropeffect","move"),t(i,"_disabled","false"),a(o,"draggable","true"),!1===n.disableIEFix)&&("function"==typeof(document||window.document).createElement("span").dragDrop&&r(o,"mousedown",(function(){if(-1!==s.indexOf(this))this.dragDrop();else{for(var t=this.parentElement;-1===s.indexOf(t);)t=t.parentElement;t.dragDrop()}})))};function O(n,l){var E=String(l);return l=l||{},"string"==typeof n&&(n=document.querySelectorAll(n)),n instanceof HTMLElement&&(n=[n]),n=Array.prototype.slice.call(n),/serialize/.test(E)?n.map((function(i){var n=t(i,"opts");return function(i,n,s){if(void 0===n&&(n=function(t,e){return t}),void 0===s&&(s=function(t){return t}),!(i instanceof HTMLElement)||1==!i.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof n||"function"!=typeof s)throw new Error("You need to provide a valid serializer for items and the container.");var r=t(i,"opts").items,o=e(i.children,r),a=o.map((function(t){return{parent:i,node:t,html:t.outerHTML,index:u(t,o)}}));return{container:s({node:i,itemCount:a.length}),items:a.map((function(t){return n(t,i)}))}}(i,n.itemSerializer,n.containerSerializer)})):(n.forEach((function(n){if(/enable|disable|destroy/.test(E))return O[E](n);["connectWith","disableIEFix"].forEach((function(t){l.hasOwnProperty(t)&&null!==l[t]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+t+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),l=Object.assign({},A,s(n).config,l),s(n).config=l,t(n,"opts",l),n.isSortable=!0,function(i){var n=t(i,"opts"),s=e(i.children,n.items),r=g(s,n.handle);t(i,"_disabled","false"),N(s),o(r,"mousedown"),o(i,"dragover"),o(i,"dragenter"),o(i,"drop")}(n);var F,R=e(n.children,l.items);if(null!==l.placeholder&&void 0!==l.placeholder){var I=document.createElement(n.tagName);l.placeholder instanceof HTMLElement?I.appendChild(l.placeholder):I.innerHTML=l.placeholder,F=I.children[0]}s(n).placeholder=function(t,e,i){if(void 0===i&&(i="sortable-placeholder"),!(t instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(e instanceof HTMLElement)&&void 0!==e)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===e&&(["UL","OL"].includes(t.tagName)?e=document.createElement("li"):["TABLE","TBODY"].includes(t.tagName)?(e=document.createElement("tr")).innerHTML='<td colspan="100"></td>':e=document.createElement("div")),"string"==typeof i&&(n=e.classList).add.apply(n,i.split(" ")),e;var n}(n,F,l.placeholderClass),t(n,"items",l.items),l.acceptFrom?t(n,"acceptFrom",l.acceptFrom):l.connectWith&&t(n,"connectWith",l.connectWith),_(n),a(R,"role","option"),a(R,"aria-grabbed","false"),P(n,!0),r(n,"dragstart",(function(t){var i=m(t);if(!0!==i.isSortable&&(t.stopImmediatePropagation(),(!l.handle||i.matches(l.handle))&&"false"!==i.getAttribute("draggable"))){var n=D(i,t),r=L(n,i);C=e(n.children,l.items),k=C.indexOf(r),S=u(r,n.children),w=n,function(t,e,i){if(!(t instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(e instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(i||(i=y),t.dataTransfer&&t.dataTransfer.setDragImage){var n=i(e,h(e),t);if(!(n.element instanceof HTMLElement)||"number"!=typeof n.posX||"number"!=typeof n.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setData("text/plain",m(t).id),t.dataTransfer.setDragImage(n.element,n.posX,n.posY)}}(t,r,l.customDragImage),b=p(r),r.classList.add(l.draggingClass),x=function(t,e){var i=t;return!0===s(e).getConfig("copy")&&(a(i=t.cloneNode(!0),"aria-copied","true"),t.parentElement.appendChild(i),i.style.display="none",i.oldDisplay=t.style.display),i}(r,n),a(x,"aria-grabbed","true"),n.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:S,index:k,container:w},item:x,originalTarget:i}}))}})),r(n,"dragenter",(function(i){var r=m(i),o=D(r,i);o&&o!==M&&(T=e(o.children,t(o,"items")).filter((function(t){return t!==s(n).placeholder})),o.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:S,index:k,container:w},destination:{container:o,itemsBeforeUpdate:T},item:x,originalTarget:r}}))),M=o})),r(n,"dragend",(function(e){if(x){x.classList.remove(l.draggingClass),a(x,"aria-grabbed","false"),"true"===x.getAttribute("aria-copied")&&"true"!==t(x,"dropped")&&x.remove(),x.style.display=x.oldDisplay,delete x.oldDisplay;var s=Array.from(i.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(c)[0];s&&s.remove(),n.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:S,index:k,container:w},item:x}})),M=null,x=null,b=null}})),r(n,"drop",(function(r){if(v(n,x.parentElement)){r.preventDefault(),r.stopPropagation(),t(x,"dropped","true");var o=Array.from(i.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(c)[0];f(o,x),o.remove(),n.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:S,index:k,container:w},item:x}}));var a=s(n).placeholder,h=e(w.children,l.items).filter((function(t){return t!==a})),d=!0===this.isSortable?this:this.parentElement,p=e(d.children,t(d,"items")).filter((function(t){return t!==a})),g=u(x,Array.from(x.parentElement.children).filter((function(t){return t!==a}))),m=u(x,p);S===g&&w===d||n.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:S,index:k,container:w,itemsBeforeUpdate:C,items:h},destination:{index:m,elementIndex:g,container:d,itemsBeforeUpdate:T,items:p},item:x}}))}}));var B,j,z,H=(B=function(t,n,r){if(x)if(l.forcePlaceholderSize&&(s(t).placeholder.style.height=b+"px"),Array.from(t.children).indexOf(n)>-1){var o=p(n),a=u(s(t).placeholder,n.parentElement.children),c=u(n,n.parentElement.children);if(o>b){var g=o-b,m=h(n).top;if(a<c&&r<m)return;if(a>c&&r>m+o-g)return}void 0===x.oldDisplay&&(x.oldDisplay=x.style.display),"none"!==x.style.display&&(x.style.display="none");var y=!1;try{y=r>=h(n).top+n.offsetHeight/2}catch(t){y=a<c}y?f(n,s(t).placeholder):function(t,e){d(t,e,"before")}(n,s(t).placeholder),Array.from(i.values()).filter((function(t){return void 0!==t.placeholder})).forEach((function(e){e.placeholder!==s(t).placeholder&&e.placeholder.remove()}))}else{var v=Array.from(i.values()).filter((function(t){return void 0!==t.placeholder})).map((function(t){return t.placeholder}));-1!==v.indexOf(n)||t!==n||e(n.children,l.items).length||(v.forEach((function(t){return t.remove()})),n.appendChild(s(t).placeholder))}},void 0===(j=l.debounce)&&(j=0),function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];clearTimeout(z),z=setTimeout((function(){B.apply(void 0,t)}),j)}),U=function(i){var n=i.target,r=!0===n.isSortable?n:D(n,i);if(n=L(r,n),x&&v(r,x.parentElement)&&"true"!==t(r,"_disabled")){var o=t(r,"opts");parseInt(o.maxItems)&&e(r.children,t(r,"items")).length>=parseInt(o.maxItems)&&x.parentElement!==r||(i.preventDefault(),i.stopPropagation(),i.dataTransfer.dropEffect=!0===s(r).getConfig("copy")?"copy":"move",H(r,n,i.pageY))}};r(R.concat(n),"dragover",U),r(R.concat(n),"dragenter",U)})),n)}return O.destroy=function(t){E(t)},O.enable=function(t){_(t)},O.disable=function(i){!function(i){var n=t(i,"opts"),s=g(e(i.children,n.items),n.handle);a(i,"aria-dropeffect","none"),t(i,"_disabled","true"),a(s,"draggable","false"),o(s,"mousedown")}(i)},O}();!function(t,e,i,n){function s(e,s){this.w=t(i),this.el=t(e),(s=s||a).rootClass!==n&&"dd"!==s.rootClass&&(s.listClass=s.listClass?s.listClass:s.rootClass+"-list",s.itemClass=s.itemClass?s.itemClass:s.rootClass+"-item",s.dragClass=s.dragClass?s.dragClass:s.rootClass+"-dragel",s.handleClass=s.handleClass?s.handleClass:s.rootClass+"-handle",s.collapsedClass=s.collapsedClass?s.collapsedClass:s.rootClass+"-collapsed",s.placeClass=s.placeClass?s.placeClass:s.rootClass+"-placeholder",s.noDragClass=s.noDragClass?s.noDragClass:s.rootClass+"-nodrag",s.noChildrenClass=s.noChildrenClass?s.noChildrenClass:s.rootClass+"-nochildren",s.emptyClass=s.emptyClass?s.emptyClass:s.rootClass+"-empty"),this.options=t.extend({},a,s),this.options.json!==n&&this._build(),this.init()}var r="ontouchstart"in i,o=function(){var t=i.createElement("div"),n=i.documentElement;if(!("pointerEvents"in t.style))return!1;t.style.pointerEvents="auto",t.style.pointerEvents="x",n.appendChild(t);var s=e.getComputedStyle&&"auto"===e.getComputedStyle(t,"").pointerEvents;return n.removeChild(t),!!s}(),a={contentCallback:function(t){return t.content?t.content:t.id},listNodeName:"ol",itemNodeName:"li",handleNodeName:"div",contentNodeName:"span",rootClass:"dd",listClass:"dd-list",itemClass:"dd-item",dragClass:"dd-dragel",handleClass:"dd-handle",contentClass:"dd-content",collapsedClass:"dd-collapsed",placeClass:"dd-placeholder",noDragClass:"dd-nodrag",noChildrenClass:"dd-nochildren",emptyClass:"dd-empty",expandBtnHTML:'<button class="dd-expand" data-action="expand" type="button">Expand</button>',collapseBtnHTML:'<button class="dd-collapse" data-action="collapse" type="button">Collapse</button>',group:0,maxDepth:5,threshold:20,fixedDepth:!1,fixed:!1,includeContent:!1,scroll:!1,scrollSensitivity:1,scrollSpeed:5,scrollTriggers:{top:40,left:40,right:-40,bottom:-40},effect:{animation:"none",time:"slow"},callback:function(t,e,i){},onDragStart:function(t,e,i){},beforeDragStop:function(t,e,i){},listRenderer:function(t,e){var i="<"+e.listNodeName+' class="'+e.listClass+'">';return(i+=t)+"</"+e.listNodeName+">"},itemRenderer:function(e,i,n,s,r){var o=t.map(e,(function(t,e){return" "+e+'="'+t+'"'})).join(" "),a="<"+s.itemNodeName+o+">";return a+="<"+s.handleNodeName+' class="'+s.handleClass+'">',a+="<"+s.contentNodeName+' class="'+s.contentClass+'">',a+=i,a+="</"+s.contentNodeName+">",a+="</"+s.handleNodeName+">",(a+=n)+"</"+s.itemNodeName+">"}};s.prototype={init:function(){var i=this;i.reset(),i.el.data("nestable-group",this.options.group),i.placeEl=t('<div class="'+i.options.placeClass+'"/>');var n=this.el.find(i.options.itemNodeName);t.each(n,(function(e,n){var s=t(n),r=s.parent();i.setParent(s),r.hasClass(i.options.collapsedClass)&&i.collapseItem(r.parent())})),n.length||this.appendEmptyElement(this.el),i.el.on("click","button",(function(e){if(!i.dragEl){var n=t(e.currentTarget),s=n.data("action"),r=n.parents(i.options.itemNodeName).eq(0);"collapse"===s&&i.collapseItem(r),"expand"===s&&i.expandItem(r)}}));var s=function(e){var n=t(e.target);if(!n.hasClass(i.options.handleClass)){if(n.closest("."+i.options.noDragClass).length)return;n=n.closest("."+i.options.handleClass)}n.length&&!i.dragEl&&(i.isTouch=/^touch/.test(e.type),i.isTouch&&1!==e.touches.length||(e.preventDefault(),i.dragStart(e.touches?e.touches[0]:e)))},o=function(t){i.dragEl&&(t.preventDefault(),i.dragMove(t.touches?t.touches[0]:t))},a=function(t){i.dragEl&&(t.preventDefault(),i.dragStop(t.touches?t.changedTouches[0]:t))};r&&(i.el[0].addEventListener("touchstart",s,!1),e.addEventListener("touchmove",o,!1),e.addEventListener("touchend",a,!1),e.addEventListener("touchcancel",a,!1)),i.el.on("mousedown",s),i.w.on("mousemove",o),i.w.on("mouseup",a),i.el.bind("destroy-nestable",(function(){r&&(i.el[0].removeEventListener("touchstart",s,!1),e.removeEventListener("touchmove",o,!1),e.removeEventListener("touchend",a,!1),e.removeEventListener("touchcancel",a,!1)),i.el.off("mousedown",s),i.w.off("mousemove",o),i.w.off("mouseup",a),i.el.off("click"),i.el.unbind("destroy-nestable"),i.el.data("nestable",null)}))},destroy:function(){this.el.trigger("destroy-nestable")},add:function(e){var i="."+this.options.listClass,s=t(this.el).children(i);e.parent_id!==n&&(s=s.find('[data-id="'+e.parent_id+'"]'),delete e.parent_id,0===s.children(i).length&&(s=s.append(this.options.listRenderer("",this.options))),s=s.find(i+":first"),this.setParent(s.parent())),s.append(this._buildItem(e,this.options))},replace:function(t){var e=this._buildItem(t,this.options);this._getItemById(t.id).replaceWith(e)},removeItem:function(e){var i=this.options,n=this.el;(e=e||this).remove();var s="."+i.listClass+" ."+i.listClass+":not(:has(*))";t(n).find(s).remove(),t(n).find('[data-action="expand"], [data-action="collapse"]').each((function(){0===t(this).siblings("."+i.listClass).length&&t(this).remove()}))},remove:function(t,e){var i=this.options,n=this,s=this._getItemById(t),r=i.effect.animation||"fade",o=i.effect.time||"slow";"fade"===r?s.fadeOut(o,(function(){n.removeItem(s)})):this.removeItem(s),e&&e()},removeAll:function(e){function i(){o.each((function(){n.removeItem(t(this))})),r.show(),e&&e()}var n=this,s=this.options,r=n.el.find(s.listNodeName).first(),o=r.children(s.itemNodeName),a=s.effect.animation||"fade",l=s.effect.time||"slow";"fade"===a?r.fadeOut(l,i):i()},_getItemById:function(e){return t(this.el).children("."+this.options.listClass).find('[data-id="'+e+'"]')},_build:function(){var e=this.options.json;"string"==typeof e&&(e=JSON.parse(e)),t(this.el).html(this._buildList(e,this.options))},_buildList:function(e,i){if(!e)return"";var n="",s=this;return t.each(e,(function(t,e){n+=s._buildItem(e,i)})),i.listRenderer(n,i)},_buildItem:function(e,i){var n=function(e){delete(e=t.extend({},e)).children,delete e.classes,delete e.content;var i={};return t.each(e,(function(t,e){"object"==typeof e&&(e=JSON.stringify(e)),i["data-"+t]=function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t+"".replace(/[&<>"']/g,(function(t){return e[t]}))}(e)})),i}(e);n.class=function(e,i){var n=e.classes||{};"string"==typeof n&&(n=[n]);var s=function(t){var e={};for(var i in t)e[t[i]]=t[i];return e}(n);return s[i.itemClass]=i.itemClass,t.map(s,(function(t){return t})).join(" ")}(e,i);var s=i.contentCallback(e),r=this._buildList(e.children,i),o=t(i.itemRenderer(n,s,r,i,e));return this.setParent(o),o[0].outerHTML},serialize:function(){var e=this,i=function(n){var s=[];return n.children(e.options.itemNodeName).each((function(){var n=t(this),r=t.extend({},n.data()),o=n.children(e.options.listNodeName);if(e.options.includeContent){var a=n.find("."+e.options.contentClass).html();a&&(r.content=a)}o.length&&(r.children=i(o)),s.push(r)})),s};return i(e.el.find(e.options.listNodeName).first())},asNestedSet:function(){function e(r,o,a){var l,h,u=a+1;return t(r).children(n.listNodeName).children(n.itemNodeName).length>0&&(o++,t(r).children(n.listNodeName).children(n.itemNodeName).each((function(){u=e(t(this),o,u)})),o--),i(l=t(r).attr("data-id"))&&(l=parseInt(l)),i(h=t(r).parent(n.listNodeName).parent(n.itemNodeName).attr("data-id")||"")&&(l=parseInt(h)),l&&s.push({id:l,parent_id:h,depth:o,lft:a,rgt:u}),u+1}function i(e){return t.isNumeric(e)&&Math.floor(e)==e}var n=this.options,s=[],r=1;return this.el.find(n.listNodeName).first().children(n.itemNodeName).each((function(){r=e(this,0,r)})),s=s.sort((function(t,e){return t.lft-e.lft}))},returnOptions:function(){return this.options},serialise:function(){return this.serialize()},toHierarchy:function(e){function i(e){var s=(t(e).attr(n.attribute||"id")||"").match(n.expression||/(.+)[-=_](.+)/);if(s){var r={id:s[2]};return t(e).children(n.listType).children(n.items).length>0&&(r.children=[],t(e).children(n.listType).children(n.items).each((function(){var t=i(this);r.children.push(t)}))),r}}var n=t.extend({},this.options,e),s=[];return t(this.element).children(n.items).each((function(){var t=i(this);s.push(t)})),s},toArray:function(){function e(r,o,a){var l,h,u=a+1;return r.children(i.options.listNodeName).children(i.options.itemNodeName).length>0&&(o++,r.children(i.options.listNodeName).children(i.options.itemNodeName).each((function(){u=e(t(this),o,u)})),o--),l=r.data().id,h=o===n+1?i.rootID:r.parent(i.options.listNodeName).parent(i.options.itemNodeName).data().id,l&&s.push({id:l,parent_id:h,depth:o,left:a,right:u}),u+1}var i=t.extend({},this.options,this),n=i.startDepthCount||0,s=[],r=2,o=this;return o.el.find(o.options.listNodeName).first().children(o.options.itemNodeName).each((function(){r=e(t(this),n+1,r)})),s=s.sort((function(t,e){return t.left-e.left}))},reset:function(){this.mouse={offsetX:0,offsetY:0,startX:0,startY:0,lastX:0,lastY:0,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0},this.isTouch=!1,this.moving=!1,this.dragEl=null,this.dragRootEl=null,this.dragDepth=0,this.hasNewRoot=!1,this.pointEl=null},expandItem:function(t){t.removeClass(this.options.collapsedClass)},collapseItem:function(t){t.children(this.options.listNodeName).length&&t.addClass(this.options.collapsedClass)},expandAll:function(){var e=this;e.el.find(e.options.itemNodeName).each((function(){e.expandItem(t(this))}))},collapseAll:function(){var e=this;e.el.find(e.options.itemNodeName).each((function(){e.collapseItem(t(this))}))},setParent:function(e){e.is(this.options.itemNodeName)&&e.children(this.options.listNodeName).length&&(e.children("[data-action]").remove(),e.prepend(t(this.options.expandBtnHTML)),e.prepend(t(this.options.collapseBtnHTML)))},unsetParent:function(t){t.removeClass(this.options.collapsedClass),t.children("[data-action]").remove(),t.children(this.options.listNodeName).remove()},dragStart:function(e){var n=this.mouse,s=t(e.target).closest(this.options.itemNodeName),r={top:e.pageY,left:e.pageX},o=this.options.onDragStart.call(this,this.el,s,r);if(void 0===o||!1!==o){this.placeEl.css("height",s.height()),n.offsetX=e.pageX-s.offset().left,n.offsetY=e.pageY-s.offset().top,n.startX=n.lastX=e.pageX,n.startY=n.lastY=e.pageY,this.dragRootEl=this.el,this.dragEl=t(i.createElement(this.options.listNodeName)).addClass(this.options.listClass+" "+this.options.dragClass),this.dragEl.css("width",s.outerWidth()),this.setIndexOfItem(s),s.after(this.placeEl),s[0].parentNode.removeChild(s[0]),s.appendTo(this.dragEl),t(i.body).append(this.dragEl),this.dragEl.css({left:e.pageX-n.offsetX,top:e.pageY-n.offsetY});var a,l,h=this.dragEl.find(this.options.itemNodeName);for(a=0;a<h.length;a++)(l=t(h[a]).parents(this.options.listNodeName).length)>this.dragDepth&&(this.dragDepth=l)}},createSubLevel:function(e,i){var n=t("<"+this.options.listNodeName+"/>").addClass(this.options.listClass);return i&&n.append(i),e.append(n),this.setParent(e),n},setIndexOfItem:function(e,i){(i=i||[]).unshift(e.index()),t(e[0].parentNode)[0]!==this.dragRootEl[0]?this.setIndexOfItem(t(e[0].parentNode),i):this.dragEl.data("indexOfItem",i)},restoreItemAtIndex:function(e,i){for(var n=this.el,s=i.length-1,r=0;r<i.length;r++){if(s===parseInt(r))return void function(e,n){0===i[s]?t(e).prepend(n.clone(!0)):t(e.children[i[s]-1]).after(n.clone(!0))}(n,e);var o=n[0]?n[0]:n;n=o.children[i[r]]||this.createSubLevel(t(o))}},dragStop:function(t){var e={top:t.pageY,left:t.pageX},i=this.dragEl.data("indexOfItem"),n=this.dragEl.children(this.options.itemNodeName).first();n[0].parentNode.removeChild(n[0]),this.dragEl.remove();var s=this.options.beforeDragStop.call(this,this.el,n,this.placeEl.parent());if(void 0!==s&&!1===s){var r=this.placeEl.parent();return this.placeEl.remove(),r.children().length||this.unsetParent(r.parent()),this.restoreItemAtIndex(n,i),void this.reset()}this.placeEl.replaceWith(n),this.hasNewRoot?(!0===this.options.fixed?this.restoreItemAtIndex(n,i):this.el.trigger("lostItem"),this.dragRootEl.trigger("gainedItem")):this.dragRootEl.trigger("change"),this.options.callback.call(this,this.dragRootEl,n,e),this.reset()},dragMove:function(n){var s,r,a,l=this.options,h=this.mouse;this.dragEl.css({left:n.pageX-h.offsetX,top:n.pageY-h.offsetY}),h.lastX=h.nowX,h.lastY=h.nowY,h.nowX=n.pageX,h.nowY=n.pageY,h.distX=h.nowX-h.lastX,h.distY=h.nowY-h.lastY,h.lastDirX=h.dirX,h.lastDirY=h.dirY,h.dirX=0===h.distX?0:h.distX>0?1:-1,h.dirY=0===h.distY?0:h.distY>0?1:-1;var u=Math.abs(h.distX)>Math.abs(h.distY)?1:0;if(!h.moving)return h.dirAx=u,void(h.moving=!0);if(l.scroll)if(void 0!==e.jQuery.fn.scrollParent){var c=!1,d=this.el.scrollParent()[0];d!==i&&"HTML"!==d.tagName?(l.scrollTriggers.bottom+d.offsetHeight-n.pageY<l.scrollSensitivity?d.scrollTop=c=d.scrollTop+l.scrollSpeed:n.pageY-l.scrollTriggers.top<l.scrollSensitivity&&(d.scrollTop=c=d.scrollTop-l.scrollSpeed),l.scrollTriggers.right+d.offsetWidth-n.pageX<l.scrollSensitivity?d.scrollLeft=c=d.scrollLeft+l.scrollSpeed:n.pageX-l.scrollTriggers.left<l.scrollSensitivity&&(d.scrollLeft=c=d.scrollLeft-l.scrollSpeed)):(n.pageY-t(i).scrollTop()<l.scrollSensitivity?c=t(i).scrollTop(t(i).scrollTop()-l.scrollSpeed):t(e).height()-(n.pageY-t(i).scrollTop())<l.scrollSensitivity&&(c=t(i).scrollTop(t(i).scrollTop()+l.scrollSpeed)),n.pageX-t(i).scrollLeft()<l.scrollSensitivity?c=t(i).scrollLeft(t(i).scrollLeft()-l.scrollSpeed):t(e).width()-(n.pageX-t(i).scrollLeft())<l.scrollSensitivity&&(c=t(i).scrollLeft(t(i).scrollLeft()+l.scrollSpeed)))}else console.warn("To use scrolling you need to have scrollParent() function, check documentation for more information");this.scrollTimer&&clearTimeout(this.scrollTimer),l.scroll&&c&&(this.scrollTimer=setTimeout((function(){t(e).trigger(n)}),10)),h.dirAx!==u?(h.distAxX=0,h.distAxY=0):(h.distAxX+=Math.abs(h.distX),0!==h.dirX&&h.dirX!==h.lastDirX&&(h.distAxX=0),h.distAxY+=Math.abs(h.distY),0!==h.dirY&&h.dirY!==h.lastDirY&&(h.distAxY=0)),h.dirAx=u,h.dirAx&&h.distAxX>=l.threshold&&(h.distAxX=0,a=this.placeEl.prev(l.itemNodeName),h.distX>0&&a.length&&!a.hasClass(l.collapsedClass)&&!a.hasClass(l.noChildrenClass)&&(s=a.find(l.listNodeName).last(),this.placeEl.parents(l.listNodeName).length+this.dragDepth<=l.maxDepth&&(s.length?(s=a.children(l.listNodeName).last()).append(this.placeEl):this.createSubLevel(a,this.placeEl))),h.distX<0&&(this.placeEl.next(l.itemNodeName).length||(r=this.placeEl.parent(),this.placeEl.closest(l.itemNodeName).after(this.placeEl),r.children().length||this.unsetParent(r.parent()))));var f=!1;if(o||(this.dragEl[0].style.visibility="hidden"),this.pointEl=t(i.elementFromPoint(n.pageX-i.body.scrollLeft,n.pageY-(e.pageYOffset||i.documentElement.scrollTop))),o||(this.dragEl[0].style.visibility="visible"),this.pointEl.hasClass(l.handleClass)&&(this.pointEl=this.pointEl.closest(l.itemNodeName)),this.pointEl.hasClass(l.emptyClass))f=!0;else if(!this.pointEl.length||!this.pointEl.hasClass(l.itemClass))return;var p=this.pointEl.closest("."+l.rootClass),g=this.dragRootEl.data("nestable-id")!==p.data("nestable-id");if(!h.dirAx||g||f){if(g&&l.group!==p.data("nestable-group"))return;if(this.options.fixedDepth&&this.dragDepth+1!==this.pointEl.parents(l.listNodeName).length)return;if(this.dragDepth-1+this.pointEl.parents(l.listNodeName).length>l.maxDepth)return;var m=n.pageY<this.pointEl.offset().top+this.pointEl.height()/2;r=this.placeEl.parent(),f?((s=t(i.createElement(l.listNodeName)).addClass(l.listClass)).append(this.placeEl),this.pointEl.replaceWith(s)):m?this.pointEl.before(this.placeEl):this.pointEl.after(this.placeEl),r.children().length||this.unsetParent(r.parent()),this.dragRootEl.find(l.itemNodeName).length||this.appendEmptyElement(this.dragRootEl),this.dragRootEl=p,g&&(this.hasNewRoot=this.el[0]!==this.dragRootEl[0])}},appendEmptyElement:function(t){t.append('<div class="'+this.options.emptyClass+'"/>')}},t.fn.nestable=function(i){var n=this,r=arguments;return"Nestable"in e||(e.Nestable={},Nestable.counter=0),this.each((function(){var e=t(this).data("nestable");if(e){if("string"==typeof i&&"function"==typeof e[i])if(r.length>1){for(var o=[],a=1;a<r.length;a++)o.push(r[a]);n=e[i].apply(e,o)}else n=e[i]()}else Nestable.counter++,t(this).data("nestable",new s(this,i)),t(this).data("nestable-id",Nestable.counter)})),n||this}}(window.jQuery||window.Zepto,window,document);var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Emitter=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"on",value:function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this}},{key:"emit",value:function(t){this._callbacks=this._callbacks||{};var e=this._callbacks[t];if(e){for(var i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];for(var r=0,o=o=e;;){if(r>=o.length)break;o[r++].apply(this,n)}}return this}},{key:"off",value:function(t,e){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1===arguments.length)return delete this._callbacks[t],this;for(var n=0;n<i.length;n++){if(i[n]===e){i.splice(n,1);break}}return this}}]),t}(),Dropzone=function(){function t(e,i){_classCallCheck(this,t);var n,s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=void 0;if(s.element=e,s.version=t.version,s.defaultOptions.previewTemplate=s.defaultOptions.previewTemplate.replace(/\n*/g,""),s.clickableElements=[],s.listeners=[],s.files=[],"string"==typeof s.element&&(s.element=document.querySelector(s.element)),!s.element||null==s.element.nodeType)throw new Error("Invalid dropzone element.");if(s.element.dropzone)throw new Error("Dropzone already attached.");t.instances.push(s),s.element.dropzone=s;var o,a=null!=(n=t.optionsForElement(s.element))?n:{};if(s.options=t.extend({},s.defaultOptions,a,null!=i?i:{}),s.options.forceFallback||!t.isBrowserSupported())return o=s.options.fallback.call(s),_possibleConstructorReturn(s,o);if(null==s.options.url&&(s.options.url=s.element.getAttribute("action")),!s.options.url)throw new Error("No URL provided.");if(s.options.acceptedFiles&&s.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(s.options.uploadMultiple&&s.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return s.options.acceptedMimeTypes&&(s.options.acceptedFiles=s.options.acceptedMimeTypes,delete s.options.acceptedMimeTypes),null!=s.options.renameFilename&&(s.options.renameFile=function(t){return s.options.renameFilename.call(s,t.name,t)}),s.options.method=s.options.method.toUpperCase(),(r=s.getExistingFallback())&&r.parentNode&&r.parentNode.removeChild(r),!1!==s.options.previewsContainer&&(s.options.previewsContainer?s.previewsContainer=t.getElement(s.options.previewsContainer,"previewsContainer"):s.previewsContainer=s.element),s.options.clickable&&(!0===s.options.clickable?s.clickableElements=[s.element]:s.clickableElements=t.getElements(s.options.clickable,"clickable")),s.init(),s}return _inherits(t,Emitter),_createClass(t,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(t,e,i){if(i)return{dzuuid:i.file.upload.uuid,dzchunkindex:i.index,dztotalfilesize:i.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:i.file.upload.totalChunkCount,dzchunkbyteoffset:i.index*this.options.chunkSize}},accept:function(t,e){return e()},chunksUploaded:function(t,e){e()},fallback:function(){var e=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var i=0,n=n=this.element.getElementsByTagName("div");;){if(i>=n.length)break;var s=n[i++];if(/(^| )dz-message($| )/.test(s.className)){e=s,s.className="dz-message";break}}e||(e=t.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var r=e.getElementsByTagName("span")[0];return r&&(null!=r.textContent?r.textContent=this.options.dictFallbackMessage:null!=r.innerText&&(r.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(t,e,i,n){var s={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},r=t.width/t.height;null==e&&null==i?(e=s.srcWidth,i=s.srcHeight):null==e?e=i*r:null==i&&(i=e/r);var o=(e=Math.min(e,s.srcWidth))/(i=Math.min(i,s.srcHeight));if(s.srcWidth>e||s.srcHeight>i)if("crop"===n)r>o?(s.srcHeight=t.height,s.srcWidth=s.srcHeight*o):(s.srcWidth=t.width,s.srcHeight=s.srcWidth/o);else{if("contain"!==n)throw new Error("Unknown resizeMethod '"+n+"'");r>o?i=e/r:e=i*r}return s.srcX=(t.width-s.srcWidth)/2,s.srcY=(t.height-s.srcHeight)/2,s.trgWidth=e,s.trgHeight=i,s},transformFile:function(t,e){return(this.options.resizeWidth||this.options.resizeHeight)&&t.type.match(/image.*/)?this.resizeImage(t,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,e):e(t)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(t){return this.element.classList.remove("dz-drag-hover")},dragstart:function(t){},dragend:function(t){return this.element.classList.remove("dz-drag-hover")},dragenter:function(t){return this.element.classList.add("dz-drag-hover")},dragover:function(t){return this.element.classList.add("dz-drag-hover")},dragleave:function(t){return this.element.classList.remove("dz-drag-hover")},paste:function(t){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var i=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){e.previewElement=t.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);for(var n=0,s=s=e.previewElement.querySelectorAll("[data-dz-name]");;){if(n>=s.length)break;var r=s[n++];r.textContent=e.name}for(var o=0,a=a=e.previewElement.querySelectorAll("[data-dz-size]");!(o>=a.length);)(r=a[o++]).innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink));for(var l=function(n){return n.preventDefault(),n.stopPropagation(),e.status===t.UPLOADING?t.confirm(i.options.dictCancelUploadConfirmation,(function(){return i.removeFile(e)})):i.options.dictRemoveFileConfirmation?t.confirm(i.options.dictRemoveFileConfirmation,(function(){return i.removeFile(e)})):i.removeFile(e)},h=0,u=u=e.previewElement.querySelectorAll("[data-dz-remove]");;){if(h>=u.length)break;u[h++].addEventListener("click",l)}}},removedfile:function(t){return null!=t.previewElement&&null!=t.previewElement.parentNode&&t.previewElement.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){if(t.previewElement){t.previewElement.classList.remove("dz-file-preview");for(var i=0,n=n=t.previewElement.querySelectorAll("[data-dz-thumbnail]");;){if(i>=n.length)break;var s=n[i++];s.alt=t.name,s.src=e}return setTimeout((function(){return t.previewElement.classList.add("dz-image-preview")}),1)}},error:function(t,e){if(t.previewElement){t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error);for(var i=0,n=n=t.previewElement.querySelectorAll("[data-dz-errormessage]");;){if(i>=n.length)break;n[i++].textContent=e}}},errormultiple:function(){},processing:function(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(t,e,i){if(t.previewElement)for(var n=0,s=s=t.previewElement.querySelectorAll("[data-dz-uploadprogress]");;){if(n>=s.length)break;var r=s[n++];"PROGRESS"===r.nodeName?r.value=e:r.style.width=e+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(t){return this.emit("error",t,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(t){if(t._removeLink&&(t._removeLink.innerHTML=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];for(var s=0,r=r=i;;){if(s>=r.length)break;var o=r[s++];for(var a in o){var l=o[a];t[a]=l}}return t}}]),_createClass(t,[{key:"getAcceptedFiles",value:function(){return this.files.filter((function(t){return t.accepted})).map((function(t){return t}))}},{key:"getRejectedFiles",value:function(){return this.files.filter((function(t){return!t.accepted})).map((function(t){return t}))}},{key:"getFilesWithStatus",value:function(t){return this.files.filter((function(e){return e.status===t})).map((function(t){return t}))}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(t.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(t.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(t.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter((function(e){return e.status===t.UPLOADING||e.status===t.QUEUED})).map((function(t){return t}))}},{key:"init",value:function(){var e=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length){!function i(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null===e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!==e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!==e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",t.getElement(e.options.hiddenInputContainer,"hiddenInputContainer").appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",(function(){var t=e.hiddenFileInput.files;if(t.length)for(var n=0,s=s=t;;){if(n>=s.length)break;var r=s[n++];e.addFile(r)}return e.emit("addedfiles",t),i()}))}()}this.URL=null!==window.URL?window.URL:window.webkitURL;for(var i=0,n=n=this.events;;){if(i>=n.length)break;var s=n[i++];this.on(s,this.options[s])}this.on("uploadprogress",(function(){return e.updateTotalUploadProgress()})),this.on("removedfile",(function(){return e.updateTotalUploadProgress()})),this.on("canceled",(function(t){return e.emit("complete",t)})),this.on("complete",(function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout((function(){return e.emit("queuecomplete")}),0)}));var r=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(t){return e.emit("dragstart",t)},dragenter:function(t){return r(t),e.emit("dragenter",t)},dragover:function(t){var i=void 0;try{i=t.dataTransfer.effectAllowed}catch(t){}return t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",r(t),e.emit("dragover",t)},dragleave:function(t){return e.emit("dragleave",t)},drop:function(t){return r(t),e.drop(t)},dragend:function(t){return e.emit("dragend",t)}}}],this.clickableElements.forEach((function(i){return e.listeners.push({element:i,events:{click:function(n){return(i!==e.element||n.target===e.element||t.elementInside(n.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})})),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,t.instances.splice(t.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var t=void 0,e=0,i=0;if(this.getActiveFiles().length){for(var n=0,s=s=this.getActiveFiles();;){if(n>=s.length)break;var r=s[n++];e+=r.upload.bytesSent,i+=r.upload.total}t=100*e/i}else t=100;return this.emit("totaluploadprogress",t,i,e)}},{key:"_getParamName",value:function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")}},{key:"_renameFile",value:function(t){return"function"!=typeof this.options.renameFile?t.name:this.options.renameFile(t)}},{key:"getFallbackForm",value:function(){var e,i=void 0;if(e=this.getExistingFallback())return e;var n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var s=t.createElement(n);return"FORM"!==this.element.tagName?(i=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(s):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=i?i:s}},{key:"getExistingFallback",value:function(){for(var t=function(t){for(var e=0,i=i=t;;){if(e>=i.length)break;var n=i[e++];if(/(^| )fallback($| )/.test(n.className))return n}},e=["div","form"],i=0;i<e.length;i++){var n,s=e[i];if(n=t(this.element.getElementsByTagName(s)))return n}}},{key:"setupEventListeners",value:function(){return this.listeners.map((function(t){return function(){var e=[];for(var i in t.events){var n=t.events[i];e.push(t.element.addEventListener(i,n,!1))}return e}()}))}},{key:"removeEventListeners",value:function(){return this.listeners.map((function(t){return function(){var e=[];for(var i in t.events){var n=t.events[i];e.push(t.element.removeEventListener(i,n,!1))}return e}()}))}},{key:"disable",value:function(){var t=this;return this.clickableElements.forEach((function(t){return t.classList.remove("dz-clickable")})),this.removeEventListeners(),this.disabled=!0,this.files.map((function(e){return t.cancelUpload(e)}))}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach((function(t){return t.classList.add("dz-clickable")})),this.setupEventListeners()}},{key:"filesize",value:function(t){var e=0,i="b";if(t>0){for(var n=["tb","gb","mb","kb","b"],s=0;s<n.length;s++){var r=n[s];if(t>=Math.pow(this.options.filesizeBase,4-s)/10){e=t/Math.pow(this.options.filesizeBase,4-s),i=r;break}}e=Math.round(10*e)/10}return"<strong>"+e+"</strong> "+this.options.dictFileSizeUnits[i]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(t){if(t.dataTransfer){this.emit("drop",t);for(var e=[],i=0;i<t.dataTransfer.files.length;i++)e[i]=t.dataTransfer.files[i];if(this.emit("addedfiles",e),e.length){var n=t.dataTransfer.items;n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(e)}}}},{key:"paste",value:function(t){if(null!=__guard__(null!=t?t.clipboardData:void 0,(function(t){return t.items}))){this.emit("paste",t);var e=t.clipboardData.items;return e.length?this._addFilesFromItems(e):void 0}}},{key:"handleFiles",value:function(t){for(var e=0,i=i=t;;){if(e>=i.length)break;var n=i[e++];this.addFile(n)}}},{key:"_addFilesFromItems",value:function(t){var e=this;return function(){for(var i=[],n=0,s=s=t;;){if(n>=s.length)break;var r,o=s[n++];null!=o.webkitGetAsEntry&&(r=o.webkitGetAsEntry())?r.isFile?i.push(e.addFile(o.getAsFile())):r.isDirectory?i.push(e._addFilesFromDirectory(r,r.name)):i.push(void 0):null!=o.getAsFile&&(null==o.kind||"file"===o.kind)?i.push(e.addFile(o.getAsFile())):i.push(void 0)}return i}()}},{key:"_addFilesFromDirectory",value:function(t,e){var i=this,n=t.createReader(),s=function(t){return __guardMethod__(console,"log",(function(e){return e.log(t)}))};return function t(){return n.readEntries((function(n){if(n.length>0){for(var s=0,r=r=n;;){if(s>=r.length)break;var o=r[s++];o.isFile?o.file((function(t){if(!i.options.ignoreHiddenFiles||"."!==t.name.substring(0,1))return t.fullPath=e+"/"+t.name,i.addFile(t)})):o.isDirectory&&i._addFilesFromDirectory(o,e+"/"+o.name)}t()}return null}),s)}()}},{key:"accept",value:function(e,i){return this.options.maxFilesize&&e.size>1024*this.options.maxFilesize*1024?i(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(i(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,i):i(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var i=this;return e.upload={uuid:t.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e),chunked:this.options.chunking&&(this.options.forceChunking||e.size>this.options.chunkSize),totalChunkCount:Math.ceil(e.size/this.options.chunkSize)},this.files.push(e),e.status=t.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,(function(t){return t?(e.accepted=!1,i._errorProcessing([e],t)):(e.accepted=!0,i.options.autoQueue&&i.enqueueFile(e)),i._updateMaxFilesReachedClass()}))}},{key:"enqueueFiles",value:function(t){for(var e=0,i=i=t;;){if(e>=i.length)break;var n=i[e++];this.enqueueFile(n)}return null}},{key:"enqueueFile",value:function(e){var i=this;if(e.status!==t.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=t.QUEUED,this.options.autoProcessQueue)return setTimeout((function(){return i.processQueue()}),0)}},{key:"_enqueueThumbnail",value:function(t){var e=this;if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(t),setTimeout((function(){return e._processThumbnailQueue()}),0)}},{key:"_processThumbnailQueue",value:function(){var t=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var e=this._thumbnailQueue.shift();return this.createThumbnail(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,(function(i){return t.emit("thumbnail",e,i),t._processingThumbnail=!1,t._processThumbnailQueue()}))}}},{key:"removeFile",value:function(e){if(e.status===t.UPLOADING&&this.cancelUpload(e),this.files=without(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);for(var i=0,n=n=this.files.slice();;){if(i>=n.length)break;var s=n[i++];(s.status!==t.UPLOADING||e)&&this.removeFile(s)}return null}},{key:"resizeImage",value:function(e,i,n,s,r){var o=this;return this.createThumbnail(e,i,n,s,!0,(function(i,n){if(null==n)return r(e);var s=o.options.resizeMimeType;null==s&&(s=e.type);var a=n.toDataURL(s,o.options.resizeQuality);return"image/jpeg"!==s&&"image/jpg"!==s||(a=ExifRestore.restore(e.dataURL,a)),r(t.dataURItoBlob(a))}))}},{key:"createThumbnail",value:function(t,e,i,n,s,r){var o=this,a=new FileReader;return a.onload=function(){if(t.dataURL=a.result,"image/svg+xml"!==t.type)return o.createThumbnailFromUrl(t,e,i,n,s,r);null!=r&&r(a.result)},a.readAsDataURL(t)}},{key:"createThumbnailFromUrl",value:function(t,e,i,n,s,r,o){var a=this,l=document.createElement("img");return o&&(l.crossOrigin=o),l.onload=function(){var o=function(t){return t(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&s&&(o=function(t){return EXIF.getData(l,(function(){return t(EXIF.getTag(this,"Orientation"))}))}),o((function(s){t.width=l.width,t.height=l.height;var o=a.options.resize.call(a,t,e,i,n),h=document.createElement("canvas"),u=h.getContext("2d");switch(h.width=o.trgWidth,h.height=o.trgHeight,s>4&&(h.width=o.trgHeight,h.height=o.trgWidth),s){case 2:u.translate(h.width,0),u.scale(-1,1);break;case 3:u.translate(h.width,h.height),u.rotate(Math.PI);break;case 4:u.translate(0,h.height),u.scale(1,-1);break;case 5:u.rotate(.5*Math.PI),u.scale(1,-1);break;case 6:u.rotate(.5*Math.PI),u.translate(0,-h.width);break;case 7:u.rotate(.5*Math.PI),u.translate(h.height,-h.width),u.scale(-1,1);break;case 8:u.rotate(-.5*Math.PI),u.translate(-h.height,0)}drawImageIOSFix(u,l,null!=o.srcX?o.srcX:0,null!=o.srcY?o.srcY:0,o.srcWidth,o.srcHeight,null!=o.trgX?o.trgX:0,null!=o.trgY?o.trgY:0,o.trgWidth,o.trgHeight);var c=h.toDataURL("image/png");if(null!=r)return r(c,h)}))},null!=r&&(l.onerror=r),l.src=t.dataURL}},{key:"processQueue",value:function(){var t=this.options.parallelUploads,e=this.getUploadingFiles().length,i=e;if(!(e>=t)){var n=this.getQueuedFiles();if(n.length>0){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,t-e));for(;i<t;){if(!n.length)return;this.processFile(n.shift()),i++}}}}},{key:"processFile",value:function(t){return this.processFiles([t])}},{key:"processFiles",value:function(e){for(var i=0,n=n=e;;){if(i>=n.length)break;var s=n[i++];s.processing=!0,s.status=t.UPLOADING,this.emit("processing",s)}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(t){return this.files.filter((function(e){return e.xhr===t})).map((function(t){return t}))}},{key:"cancelUpload",value:function(e){if(e.status===t.UPLOADING){for(var i=this._getFilesWithXhr(e.xhr),n=0,s=s=i;;){if(n>=s.length)break;s[n++].status=t.CANCELED}void 0!==e.xhr&&e.xhr.abort();for(var r=0,o=o=i;;){if(r>=o.length)break;var a=o[r++];this.emit("canceled",a)}this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else e.status!==t.ADDED&&e.status!==t.QUEUED||(e.status=t.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(t){if("function"==typeof t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return t.apply(this,i)}return t}},{key:"uploadFile",value:function(t){return this.uploadFiles([t])}},{key:"uploadFiles",value:function(e){var i=this;this._transformFiles(e,(function(n){if(e[0].upload.chunked){var s=e[0],r=n[0];s.upload.chunks=[];var o=function(){for(var n=0;void 0!==s.upload.chunks[n];)n++;if(!(n>=s.upload.totalChunkCount)){0;var o=n*i.options.chunkSize,a=Math.min(o+i.options.chunkSize,s.size),l={name:i._getParamName(0),data:r.webkitSlice?r.webkitSlice(o,a):r.slice(o,a),filename:s.upload.filename,chunkIndex:n};s.upload.chunks[n]={file:s,index:n,dataBlock:l,status:t.UPLOADING,progress:0,retries:0},i._uploadData(e,[l])}};if(s.upload.finishedChunkUpload=function(n){var r=!0;n.status=t.SUCCESS,n.dataBlock=null,n.xhr=null;for(var a=0;a<s.upload.totalChunkCount;a++){if(void 0===s.upload.chunks[a])return o();s.upload.chunks[a].status!==t.SUCCESS&&(r=!1)}r&&i.options.chunksUploaded(s,(function(){i._finished(e,"",null)}))},i.options.parallelChunkUploads)for(var a=0;a<s.upload.totalChunkCount;a++)o();else o()}else{for(var l=[],h=0;h<e.length;h++)l[h]={name:i._getParamName(h),data:n[h],filename:e[h].upload.filename};i._uploadData(e,l)}}))}},{key:"_getChunk",value:function(t,e){for(var i=0;i<t.upload.totalChunkCount;i++)if(void 0!==t.upload.chunks[i]&&t.upload.chunks[i].xhr===e)return t.upload.chunks[i]}},{key:"_uploadData",value:function(e,i){for(var n=this,s=new XMLHttpRequest,r=0,o=o=e;;){if(r>=o.length)break;o[r++].xhr=s}e[0].upload.chunked&&(e[0].upload.chunks[i[0].chunkIndex].xhr=s);var a=this.resolveOption(this.options.method,e),l=this.resolveOption(this.options.url,e);s.open(a,l,!0),s.timeout=this.resolveOption(this.options.timeout,e),s.withCredentials=!!this.options.withCredentials,s.onload=function(t){n._finishedUploading(e,s,t)},s.onerror=function(){n._handleUploadError(e,s)},(null!=s.upload?s.upload:s).onprogress=function(t){return n._updateFilesUploadProgress(e,s,t)};var h={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var u in this.options.headers&&t.extend(h,this.options.headers),h){var c=h[u];c&&s.setRequestHeader(u,c)}var d=new FormData;if(this.options.params){var f=this.options.params;for(var p in"function"==typeof f&&(f=f.call(this,e,s,e[0].upload.chunked?this._getChunk(e[0],s):null)),f){var g=f[p];d.append(p,g)}}for(var m=0,y=y=e;;){if(m>=y.length)break;var v=y[m++];this.emit("sending",v,s,d)}this.options.uploadMultiple&&this.emit("sendingmultiple",e,s,d),this._addFormElementData(d);for(var x=0;x<i.length;x++){var b=i[x];d.append(b.name,b.data,b.filename)}this.submitRequest(s,d,e)}},{key:"_transformFiles",value:function(t,e){for(var i=this,n=[],s=0,r=function(r){i.options.transformFile.call(i,t[r],(function(i){n[r]=i,++s===t.length&&e(n)}))},o=0;o<t.length;o++)r(o)}},{key:"_addFormElementData",value:function(t){if("FORM"===this.element.tagName)for(var e=0,i=i=this.element.querySelectorAll("input, textarea, select, button");;){if(e>=i.length)break;var n=i[e++],s=n.getAttribute("name"),r=n.getAttribute("type");if(r&&(r=r.toLowerCase()),null!=s)if("SELECT"===n.tagName&&n.hasAttribute("multiple"))for(var o=0,a=a=n.options;;){if(o>=a.length)break;var l=a[o++];l.selected&&t.append(s,l.value)}else(!r||"checkbox"!==r&&"radio"!==r||n.checked)&&t.append(s,n.value)}}},{key:"_updateFilesUploadProgress",value:function(t,e,i){var n=void 0;if(void 0!==i){if(n=100*i.loaded/i.total,t[0].upload.chunked){var s=t[0],r=this._getChunk(s,e);r.progress=n,r.total=i.total,r.bytesSent=i.loaded;s.upload.progress=0,s.upload.total=0,s.upload.bytesSent=0;for(var o=0;o<s.upload.totalChunkCount;o++)void 0!==s.upload.chunks[o]&&void 0!==s.upload.chunks[o].progress&&(s.upload.progress+=s.upload.chunks[o].progress,s.upload.total+=s.upload.chunks[o].total,s.upload.bytesSent+=s.upload.chunks[o].bytesSent);s.upload.progress=s.upload.progress/s.upload.totalChunkCount}else for(var a=0,l=l=t;;){if(a>=l.length)break;var h=l[a++];h.upload.progress=n,h.upload.total=i.total,h.upload.bytesSent=i.loaded}for(var u=0,c=c=t;;){if(u>=c.length)break;var d=c[u++];this.emit("uploadprogress",d,d.upload.progress,d.upload.bytesSent)}}else{var f=!0;n=100;for(var p=0,g=g=t;;){if(p>=g.length)break;var m=g[p++];100===m.upload.progress&&m.upload.bytesSent===m.upload.total||(f=!1),m.upload.progress=n,m.upload.bytesSent=m.upload.total}if(f)return;for(var y=0,v=v=t;;){if(y>=v.length)break;var x=v[y++];this.emit("uploadprogress",x,n,x.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(e,i,n){var s=void 0;if(e[0].status!==t.CANCELED&&4===i.readyState){if("arraybuffer"!==i.responseType&&"blob"!==i.responseType&&(s=i.responseText,i.getResponseHeader("content-type")&&~i.getResponseHeader("content-type").indexOf("application/json")))try{s=JSON.parse(s)}catch(t){n=t,s="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=i.status&&i.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],i)):this._finished(e,s,n):this._handleUploadError(e,i,s)}}},{key:"_handleUploadError",value:function(e,i,n){if(e[0].status!==t.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var s=this._getChunk(e[0],i);if(s.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[s.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var r=0,o=o=e;;){if(r>=o.length)break;o[r++];this._errorProcessing(e,n||this.options.dictResponseError.replace("{{statusCode}}",i.status),i)}}}},{key:"submitRequest",value:function(t,e,i){t.send(e)}},{key:"_finished",value:function(e,i,n){for(var s=0,r=r=e;;){if(s>=r.length)break;var o=r[s++];o.status=t.SUCCESS,this.emit("success",o,i,n),this.emit("complete",o)}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,i,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,i,n){for(var s=0,r=r=e;;){if(s>=r.length)break;var o=r[s++];o.status=t.ERROR,this.emit("error",o,i,n),this.emit("complete",o)}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,i,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}}]),t}();Dropzone.initClass(),Dropzone.version="5.5.1",Dropzone.options={},Dropzone.optionsForElement=function(t){return t.getAttribute("id")?Dropzone.options[camelize(t.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var t=void 0;if(document.querySelectorAll)t=document.querySelectorAll(".dropzone");else{t=[];var e=function(e){return function(){for(var i=[],n=0,s=s=e;;){if(n>=s.length)break;var r=s[n++];/(^| )dropzone($| )/.test(r.className)?i.push(t.push(r)):i.push(void 0)}return i}()};e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))}return function(){for(var e=[],i=0,n=n=t;;){if(i>=n.length)break;var s=n[i++];!1!==Dropzone.optionsForElement(s)?e.push(new Dropzone(s)):e.push(void 0)}return e}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var t=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var e=0,i=i=Dropzone.blacklistedBrowsers;;){if(e>=i.length)break;i[e++].test(navigator.userAgent)&&(t=!1)}else t=!1;else t=!1;return t},Dropzone.dataURItoBlob=function(t){for(var e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),s=new Uint8Array(n),r=0,o=e.length,a=0<=o;a?r<=o:r>=o;a?r++:r--)s[r]=e.charCodeAt(r);return new Blob([n],{type:i})};var without=function(t,e){return t.filter((function(t){return t!==e})).map((function(t){return t}))},camelize=function(t){return t.replace(/[\-_](\w)/g,(function(t){return t.charAt(1).toUpperCase()}))};Dropzone.createElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]},Dropzone.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},Dropzone.getElement=function(t,e){var i=void 0;if("string"==typeof t?i=document.querySelector(t):null!=t.nodeType&&(i=t),null==i)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},Dropzone.getElements=function(t,e){var i=void 0,n=void 0;if(t instanceof Array){n=[];try{for(var s=0,r=r=t;!(s>=r.length);)i=r[s++],n.push(this.getElement(i,e))}catch(t){n=null}}else if("string"==typeof t){n=[];for(var o=0,a=a=document.querySelectorAll(t);!(o>=a.length);)i=a[o++],n.push(i)}else null!=t.nodeType&&(n=[t]);if(null==n||!n.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},Dropzone.confirm=function(t,e,i){return window.confirm(t)?e():null!=i?i():void 0},Dropzone.isValidFile=function(t,e){if(!e)return!0;e=e.split(",");for(var i=t.type,n=i.replace(/\/.*$/,""),s=0,r=r=e;;){if(s>=r.length)break;var o=r[s++];if("."===(o=o.trim()).charAt(0)){if(-1!==t.name.toLowerCase().indexOf(o.toLowerCase(),t.name.length-o.length))return!0}else if(/\/\*$/.test(o)){if(n===o.replace(/\/.*$/,""))return!0}else if(i===o)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each((function(){return new Dropzone(this,t)}))}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function(t){t.naturalWidth;var e=t.naturalHeight,i=document.createElement("canvas");i.width=1,i.height=e;var n=i.getContext("2d");n.drawImage(t,0,0);for(var s=n.getImageData(1,0,1,e).data,r=0,o=e,a=e;a>r;){0===s[4*(a-1)+3]?o=a:r=a,a=o+r>>1}var l=a/e;return 0===l?1:l},drawImageIOSFix=function(t,e,i,n,s,r,o,a,l,h){var u=detectVerticalSquash(e);return t.drawImage(e,i,n,s,r,o,a,l,h/u)},ExifRestore=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(t){for(var e="",i=void 0,n=void 0,s="",r=void 0,o=void 0,a=void 0,l="",h=0;r=(i=t[h++])>>2,o=(3&i)<<4|(n=t[h++])>>4,a=(15&n)<<2|(s=t[h++])>>6,l=63&s,isNaN(n)?a=l=64:isNaN(s)&&(l=64),e=e+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(l),i=n=s="",r=o=a=l="",h<t.length;);return e}},{key:"restore",value:function(t,e){if(!t.match("data:image/jpeg;base64,"))return e;var i=this.decode64(t.replace("data:image/jpeg;base64,","")),n=this.slice2Segments(i),s=this.exifManipulation(e,n);return"data:image/jpeg;base64,"+this.encode64(s)}},{key:"exifManipulation",value:function(t,e){var i=this.getExifArray(e),n=this.insertExif(t,i);return new Uint8Array(n)}},{key:"getExifArray",value:function(t){for(var e=void 0,i=0;i<t.length;){if(255===(e=t[i])[0]&225===e[1])return e;i++}return[]}},{key:"insertExif",value:function(t,e){var i=t.replace("data:image/jpeg;base64,",""),n=this.decode64(i),s=n.indexOf(255,3),r=n.slice(0,s),o=n.slice(s),a=r;return a=(a=a.concat(e)).concat(o)}},{key:"slice2Segments",value:function(t){for(var e=0,i=[];;){if(255===t[e]&218===t[e+1])break;if(255===t[e]&216===t[e+1])e+=2;else{var n=e+(256*t[e+2]+t[e+3])+2,s=t.slice(e,n);i.push(s),e=n}if(e>t.length)break}return i}},{key:"decode64",value:function(t){var e=void 0,i=void 0,n="",s=void 0,r=void 0,o="",a=0,l=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(t)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");e=this.KEY_STR.indexOf(t.charAt(a++))<<2|(s=this.KEY_STR.indexOf(t.charAt(a++)))>>4,i=(15&s)<<4|(r=this.KEY_STR.indexOf(t.charAt(a++)))>>2,n=(3&r)<<6|(o=this.KEY_STR.indexOf(t.charAt(a++))),l.push(e),64!==r&&l.push(i),64!==o&&l.push(n),e=i=n="",s=r=o="",a<t.length;);return l}}]),t}();ExifRestore.initClass();var contentLoaded=function(t,e){var i=!1,n=!0,s=t.document,r=s.documentElement,o=s.addEventListener?"addEventListener":"attachEvent",a=s.addEventListener?"removeEventListener":"detachEvent",l=s.addEventListener?"":"on",h=function n(r){if("readystatechange"!==r.type||"complete"===s.readyState)return("load"===r.type?t:s)[a](l+r.type,n,!1),!i&&(i=!0)?e.call(t,r.type||r):void 0};if("complete"!==s.readyState){if(s.createEventObject&&r.doScroll){try{n=!t.frameElement}catch(t){}n&&function t(){try{r.doScroll("left")}catch(e){return void setTimeout(t,50)}return h("poll")}()}return s[o](l+"DOMContentLoaded",h,!1),s[o](l+"readystatechange",h,!1),t[o](l+"load",h,!1)}};function __guard__(t,e){return null!=t?e(t):void 0}function __guardMethod__(t,e,i){return null!=t&&"function"==typeof t[e]?i(t,e):void 0}
/*!
 * Select2 4.0.13
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(i),i}:t(jQuery)}((function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;return function(){
/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */
var t,i,n;e&&e.requirejs||(e?i=e:e={},function(e){var s,r,o,a,l={},h={},u={},c={},d=Object.prototype.hasOwnProperty,f=[].slice,p=/\.js$/;function g(t,e){return d.call(t,e)}function m(t,e){var i,n,s,r,o,a,l,h,c,d,f,g=e&&e.split("/"),m=u.map,y=m&&m["*"]||{};if(t){for(o=(t=t.split("/")).length-1,u.nodeIdCompat&&p.test(t[o])&&(t[o]=t[o].replace(p,"")),"."===t[0].charAt(0)&&g&&(t=g.slice(0,g.length-1).concat(t)),c=0;c<t.length;c++)if("."===(f=t[c]))t.splice(c,1),c-=1;else if(".."===f){if(0===c||1===c&&".."===t[2]||".."===t[c-1])continue;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}if((g||y)&&m){for(c=(i=t.split("/")).length;c>0;c-=1){if(n=i.slice(0,c).join("/"),g)for(d=g.length;d>0;d-=1)if((s=m[g.slice(0,d).join("/")])&&(s=s[n])){r=s,a=c;break}if(r)break;!l&&y&&y[n]&&(l=y[n],h=c)}!r&&l&&(r=l,a=h),r&&(i.splice(0,a,r),t=i.join("/"))}return t}function y(t,i){return function(){var n=f.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),r.apply(e,n.concat([t,i]))}}function v(t){return function(e){l[t]=e}}function x(t){if(g(h,t)){var i=h[t];delete h[t],c[t]=!0,s.apply(e,i)}if(!g(l,t)&&!g(c,t))throw new Error("No "+t);return l[t]}function b(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function w(t){return t?b(t):[]}function k(t){return function(){return u&&u.config&&u.config[t]||{}}}o=function(t,e){var i,n,s=b(t),r=s[0],o=e[1];return t=s[1],r&&(i=x(r=m(r,o))),r?t=i&&i.normalize?i.normalize(t,(n=o,function(t){return m(t,n)})):m(t,o):(r=(s=b(t=m(t,o)))[0],t=s[1],r&&(i=x(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:i}},a={require:function(t){return y(t)},exports:function(t){var e=l[t];return void 0!==e?e:l[t]={}},module:function(t){return{id:t,uri:"",exports:l[t],config:k(t)}}},s=function(t,i,n,s){var r,u,d,f,p,m,b,k=[],S=typeof n;if(m=w(s=s||t),"undefined"===S||"function"===S){for(i=!i.length&&n.length?["require","exports","module"]:i,p=0;p<i.length;p+=1)if("require"===(u=(f=o(i[p],m)).f))k[p]=a.require(t);else if("exports"===u)k[p]=a.exports(t),b=!0;else if("module"===u)r=k[p]=a.module(t);else if(g(l,u)||g(h,u)||g(c,u))k[p]=x(u);else{if(!f.p)throw new Error(t+" missing "+u);f.p.load(f.n,y(s,!0),v(u),{}),k[p]=l[u]}d=n?n.apply(l[t],k):void 0,t&&(r&&r.exports!==e&&r.exports!==l[t]?l[t]=r.exports:d===e&&b||(l[t]=d))}else t&&(l[t]=n)},t=i=r=function(t,i,n,l,h){if("string"==typeof t)return a[t]?a[t](i):x(o(t,w(i)).f);if(!t.splice){if((u=t).deps&&r(u.deps,u.callback),!i)return;i.splice?(t=i,i=n,n=null):t=e}return i=i||function(){},"function"==typeof n&&(n=l,l=h),l?s(e,t,i,n):setTimeout((function(){s(e,t,i,n)}),4),r},r.config=function(t){return r(t)},t._defined=l,(n=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),g(l,t)||g(h,t)||(h[t]=[t,e,i])}).amd={jQuery:!0}}(),e.requirejs=t,e.require=i,e.define=n)}(),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),e.define("select2/utils",["jquery"],(function(t){var e={};function i(t){var e=t.prototype,i=[];for(var n in e){"function"==typeof e[n]&&("constructor"!==n&&i.push(n))}return i}e.Extend=function(t,e){var i={}.hasOwnProperty;function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},e.Decorate=function(t,e){var n=i(e),s=i(t);function r(){var i=Array.prototype.unshift,n=e.prototype.constructor.length,s=t.prototype.constructor;n>0&&(i.call(arguments,t.prototype.constructor),s=e.prototype.constructor),s.apply(this,arguments)}e.displayName=t.displayName,r.prototype=new function(){this.constructor=r};for(var o=0;o<s.length;o++){var a=s[o];r.prototype[a]=t.prototype[a]}for(var l=function(t){var i=function(){};t in r.prototype&&(i=r.prototype[t]);var n=e.prototype[t];return function(){return Array.prototype.unshift.call(arguments,i),n.apply(this,arguments)}},h=0;h<n.length;h++){var u=n[h];r.prototype[u]=l(u)}return r};var n=function(){this.listeners={}};n.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},n.prototype.trigger=function(t){var e=Array.prototype.slice,i=e.call(arguments,1);this.listeners=this.listeners||{},null==i&&(i=[]),0===i.length&&i.push({}),i[0]._type=t,t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},n.prototype.invoke=function(t,e){for(var i=0,n=t.length;i<n;i++)t[i].apply(this,e)},e.Observable=n,e.generateChars=function(t){for(var e="",i=0;i<t;i++){e+=Math.floor(36*Math.random()).toString(36)}return e},e.bind=function(t,e){return function(){t.apply(e,arguments)}},e._convertData=function(t){for(var e in t){var i=e.split("-"),n=t;if(1!==i.length){for(var s=0;s<i.length;s++){var r=i[s];(r=r.substring(0,1).toLowerCase()+r.substring(1))in n||(n[r]={}),s==i.length-1&&(n[r]=t[e]),n=n[r]}delete t[e]}}return t},e.hasScroll=function(e,i){var n=t(i),s=i.style.overflowX,r=i.style.overflowY;return(s!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===s||"scroll"===r||(n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth))},e.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))},e.appendMany=function(e,i){if("1.7"===t.fn.jquery.substr(0,3)){var n=t();t.map(i,(function(t){n=n.add(t)})),i=n}e.append(i)},e.__cache={};var s=0;return e.GetUniqueElementId=function(t){var e=t.getAttribute("data-select2-id");return null==e&&(t.id?(e=t.id,t.setAttribute("data-select2-id",e)):(t.setAttribute("data-select2-id",++s),e=s.toString())),e},e.StoreData=function(t,i,n){var s=e.GetUniqueElementId(t);e.__cache[s]||(e.__cache[s]={}),e.__cache[s][i]=n},e.GetData=function(i,n){var s=e.GetUniqueElementId(i);return n?e.__cache[s]&&null!=e.__cache[s][n]?e.__cache[s][n]:t(i).data(n):e.__cache[s]},e.RemoveData=function(t){var i=e.GetUniqueElementId(t);null!=e.__cache[i]&&delete e.__cache[i],t.removeAttribute("data-select2-id")},e})),e.define("select2/results",["jquery","./utils"],(function(t,e){function i(t,e,n){this.$element=t,this.data=n,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=t('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),s=this.options.get("translations").get(e.message);n.append(i(s(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i],s=this.option(n);e.push(s)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(t,e){e.find(".select2-results").append(t)},i.prototype.sort=function(t){return this.options.get("sorter")(t)},i.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option[aria-selected]"),e=t.filter("[aria-selected=true]");e.length>0?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var i=this;this.data.current((function(n){var s=t.map(n,(function(t){return t.id.toString()}));i.$results.find(".select2-results__option[aria-selected]").each((function(){var i=t(this),n=e.GetData(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&t.inArray(r,s)>-1?i.attr("aria-selected","true"):i.attr("aria-selected","false")}))}))},i.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},i=this.option(e);i.className+=" loading-results",this.$results.prepend(i)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(i){var n=document.createElement("li");n.className="select2-results__option";var s={role:"option","aria-selected":"false"},r=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var o in(null!=i.element&&r.call(i.element,":disabled")||null==i.element&&i.disabled)&&(delete s["aria-selected"],s["aria-disabled"]="true"),null==i.id&&delete s["aria-selected"],null!=i._resultId&&(n.id=i._resultId),i.title&&(n.title=i.title),i.children&&(s.role="group",s["aria-label"]=i.text,delete s["aria-selected"]),s){var a=s[o];n.setAttribute(o,a)}if(i.children){var l=t(n),h=document.createElement("strong");h.className="select2-results__group";t(h);this.template(i,h);for(var u=[],c=0;c<i.children.length;c++){var d=i.children[c],f=this.option(d);u.push(f)}var p=t("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});p.append(u),l.append(h),l.append(p)}else this.template(i,n);return e.StoreData(n,"data",i),n},i.prototype.bind=function(i,n){var s=this,r=i.id+"-results";this.$results.attr("id",r),i.on("results:all",(function(t){s.clear(),s.append(t.data),i.isOpen()&&(s.setClasses(),s.highlightFirstItem())})),i.on("results:append",(function(t){s.append(t.data),i.isOpen()&&s.setClasses()})),i.on("query",(function(t){s.hideMessages(),s.showLoading(t)})),i.on("select",(function(){i.isOpen()&&(s.setClasses(),s.options.get("scrollAfterSelect")&&s.highlightFirstItem())})),i.on("unselect",(function(){i.isOpen()&&(s.setClasses(),s.options.get("scrollAfterSelect")&&s.highlightFirstItem())})),i.on("open",(function(){s.$results.attr("aria-expanded","true"),s.$results.attr("aria-hidden","false"),s.setClasses(),s.ensureHighlightVisible()})),i.on("close",(function(){s.$results.attr("aria-expanded","false"),s.$results.attr("aria-hidden","true"),s.$results.removeAttr("aria-activedescendant")})),i.on("results:toggle",(function(){var t=s.getHighlightedResults();0!==t.length&&t.trigger("mouseup")})),i.on("results:select",(function(){var t=s.getHighlightedResults();if(0!==t.length){var i=e.GetData(t[0],"data");"true"==t.attr("aria-selected")?s.trigger("close",{}):s.trigger("select",{data:i})}})),i.on("results:previous",(function(){var t=s.getHighlightedResults(),e=s.$results.find("[aria-selected]"),i=e.index(t);if(!(i<=0)){var n=i-1;0===t.length&&(n=0);var r=e.eq(n);r.trigger("mouseenter");var o=s.$results.offset().top,a=r.offset().top,l=s.$results.scrollTop()+(a-o);0===n?s.$results.scrollTop(0):a-o<0&&s.$results.scrollTop(l)}})),i.on("results:next",(function(){var t=s.getHighlightedResults(),e=s.$results.find("[aria-selected]"),i=e.index(t)+1;if(!(i>=e.length)){var n=e.eq(i);n.trigger("mouseenter");var r=s.$results.offset().top+s.$results.outerHeight(!1),o=n.offset().top+n.outerHeight(!1),a=s.$results.scrollTop()+o-r;0===i?s.$results.scrollTop(0):o>r&&s.$results.scrollTop(a)}})),i.on("results:focus",(function(t){t.element.addClass("select2-results__option--highlighted")})),i.on("results:message",(function(t){s.displayMessage(t)})),t.fn.mousewheel&&this.$results.on("mousewheel",(function(t){var e=s.$results.scrollTop(),i=s.$results.get(0).scrollHeight-e+t.deltaY,n=t.deltaY>0&&e-t.deltaY<=0,r=t.deltaY<0&&i<=s.$results.height();n?(s.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):r&&(s.$results.scrollTop(s.$results.get(0).scrollHeight-s.$results.height()),t.preventDefault(),t.stopPropagation())})),this.$results.on("mouseup",".select2-results__option[aria-selected]",(function(i){var n=t(this),r=e.GetData(this,"data");"true"!==n.attr("aria-selected")?s.trigger("select",{originalEvent:i,data:r}):s.options.get("multiple")?s.trigger("unselect",{originalEvent:i,data:r}):s.trigger("close",{})})),this.$results.on("mouseenter",".select2-results__option[aria-selected]",(function(i){var n=e.GetData(this,"data");s.getHighlightedResults().removeClass("select2-results__option--highlighted"),s.trigger("results:focus",{data:n,element:t(this)})}))},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]").index(t),i=this.$results.offset().top,n=t.offset().top,s=this.$results.scrollTop()+(n-i),r=n-i;s-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(s)}},i.prototype.template=function(e,i){var n=this.options.get("templateResult"),s=this.options.get("escapeMarkup"),r=n(e,i);null==r?i.style.display="none":"string"==typeof r?i.innerHTML=s(r):t(i).append(r)},i})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var i=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=e.GetData(this.$element[0],"old-tabindex")?this._tabindex=e.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),i.attr("title",this.$element.attr("title")),i.attr("tabindex",this._tabindex),i.attr("aria-disabled","false"),this.$selection=i,i},n.prototype.bind=function(t,e){var n=this,s=t.id+"-results";this.container=t,this.$selection.on("focus",(function(t){n.trigger("focus",t)})),this.$selection.on("blur",(function(t){n._handleBlur(t)})),this.$selection.on("keydown",(function(t){n.trigger("keypress",t),t.which===i.SPACE&&t.preventDefault()})),t.on("results:focus",(function(t){n.$selection.attr("aria-activedescendant",t.data._resultId)})),t.on("selection:update",(function(t){n.update(t.data)})),t.on("open",(function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",s),n._attachCloseHandler(t)})),t.on("close",(function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(t)})),t.on("enable",(function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")})),t.on("disable",(function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")}))},n.prototype._handleBlur=function(e){var i=this;window.setTimeout((function(){document.activeElement==i.$selection[0]||t.contains(i.$selection[0],document.activeElement)||i.trigger("blur",e)}),1)},n.prototype._attachCloseHandler=function(i){t(document.body).on("mousedown.select2."+i.id,(function(i){var n=t(i.target).closest(".select2");t(".select2.select2-container--open").each((function(){this!=n[0]&&e.GetData(this,"element").select2("close")}))}))},n.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},n.prototype.position=function(t,e){e.find(".selection").append(t)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},n.prototype.isEnabled=function(){return!this.isDisabled()},n.prototype.isDisabled=function(){return this.options.get("disabled")},n})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(t,e,i,n){function s(){s.__super__.constructor.apply(this,arguments)}return i.Extend(s,e),s.prototype.render=function(){var t=s.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},s.prototype.bind=function(t,e){var i=this;s.__super__.bind.apply(this,arguments);var n=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",(function(t){1===t.which&&i.trigger("toggle",{originalEvent:t})})),this.$selection.on("focus",(function(t){})),this.$selection.on("blur",(function(t){})),t.on("focus",(function(e){t.isOpen()||i.$selection.trigger("focus")}))},s.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},s.prototype.display=function(t,e){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(t,e))},s.prototype.selectionContainer=function(){return t("<span></span>")},s.prototype.update=function(t){if(0!==t.length){var e=t[0],i=this.$selection.find(".select2-selection__rendered"),n=this.display(e,i);i.empty().append(n);var s=e.title||e.text;s?i.attr("title",s):i.removeAttr("title")}else this.clear()},s})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(t,e,i){function n(t,e){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},n.prototype.bind=function(e,s){var r=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",(function(t){r.trigger("toggle",{originalEvent:t})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){if(!r.isDisabled()){var n=t(this).parent(),s=i.GetData(n[0],"data");r.trigger("unselect",{originalEvent:e,data:s})}}))},n.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},n.prototype.display=function(t,e){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(t,e))},n.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},n.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],n=0;n<t.length;n++){var s=t[n],r=this.selectionContainer(),o=this.display(s,r);r.append(o);var a=s.title||s.text;a&&r.attr("title",a),i.StoreData(r[0],"data",s),e.push(r)}var l=this.$selection.find(".select2-selection__rendered");i.appendMany(l,e)}},n})),e.define("select2/selection/placeholder",["../utils"],(function(t){function e(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i)}return e.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},e.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();return i.html(this.display(e)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},e.prototype.update=function(t,e){var i=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||i)return t.call(this,e);this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},e})),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(t,e,i){function n(){}return n.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(t){n._handleClear(t)})),e.on("keypress",(function(t){n._handleKeyboardClear(t,e)}))},n.prototype._handleClear=function(t,e){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){e.stopPropagation();var s=i.GetData(n[0],"data"),r=this.$element.val();this.$element.val(this.placeholder.id);var o={data:s};if(this.trigger("clear",o),o.prevented)this.$element.val(r);else{for(var a=0;a<s.length;a++)if(o={data:s[a]},this.trigger("unselect",o),o.prevented)return void this.$element.val(r);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},n.prototype._handleKeyboardClear=function(t,i,n){n.isOpen()||i.which!=e.DELETE&&i.which!=e.BACKSPACE||this._handleClear(i)},n.prototype.update=function(e,n){if(e.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var s=this.options.get("translations").get("removeAllItems"),r=t('<span class="select2-selection__clear" title="'+s()+'">&times;</span>');i.StoreData(r[0],"data",n),this.$selection.find(".select2-selection__rendered").prepend(r)}},n})),e.define("select2/selection/search",["jquery","../utils","../keys"],(function(t,e,i){function n(t,e,i){t.call(this,e,i)}return n.prototype.render=function(e){var i=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></li>');this.$searchContainer=i,this.$search=i.find("input");var n=e.call(this);return this._transferTabIndex(),n},n.prototype.bind=function(t,n,s){var r=this,o=n.id+"-results";t.call(this,n,s),n.on("open",(function(){r.$search.attr("aria-controls",o),r.$search.trigger("focus")})),n.on("close",(function(){r.$search.val(""),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")})),n.on("enable",(function(){r.$search.prop("disabled",!1),r._transferTabIndex()})),n.on("disable",(function(){r.$search.prop("disabled",!0)})),n.on("focus",(function(t){r.$search.trigger("focus")})),n.on("results:focus",(function(t){t.data._resultId?r.$search.attr("aria-activedescendant",t.data._resultId):r.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(t){r.trigger("focus",t)})),this.$selection.on("focusout",".select2-search--inline",(function(t){r._handleBlur(t)})),this.$selection.on("keydown",".select2-search--inline",(function(t){if(t.stopPropagation(),r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented(),t.which===i.BACKSPACE&&""===r.$search.val()){var n=r.$searchContainer.prev(".select2-selection__choice");if(n.length>0){var s=e.GetData(n[0],"data");r.searchRemoveChoice(s),t.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(t){r.$search.val()&&t.stopPropagation()}));var a=document.documentMode,l=a&&a<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(t){l?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(t){if(l&&"input"===t.type)r.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=i.SHIFT&&e!=i.CTRL&&e!=i.ALT&&e!=i.TAB&&r.handleSearch(t)}}))},n.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},n.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},n.prototype.update=function(t,e){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),i&&this.$search.trigger("focus")},n.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},n.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";""!==this.$search.attr("placeholder")?t=this.$selection.find(".select2-selection__rendered").width():t=.75*(this.$search.val().length+1)+"em";this.$search.css("width",t)},n})),e.define("select2/selection/eventRelay",["jquery"],(function(t){function e(){}return e.prototype.bind=function(e,i,n){var s=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],o=["opening","closing","selecting","unselecting","clearing"];e.call(this,i,n),i.on("*",(function(e,i){if(-1!==t.inArray(e,r)){i=i||{};var n=t.Event("select2:"+e,{params:i});s.$element.trigger(n),-1!==t.inArray(e,o)&&(i.prevented=n.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,e){function i(t){this.dict=t||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(t){return this.dict[t]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(t){if(!(t in i._cache)){var n=e(t);i._cache[t]=n}return new i(i._cache[t])},i})),e.define("select2/diacritics",[],(function(){return{"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Å":"OE","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Å":"oe","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï","â":"'"}})),e.define("select2/data/base",["../utils"],(function(t){function e(t,i){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,i){var n=e.id+"-result-";return n+=t.generateChars(4),null!=i.id?n+="-"+i.id.toString():n+="-"+t.generateChars(4),n},e})),e.define("select2/data/select",["./base","../utils","jquery"],(function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,t),n.prototype.current=function(t){var e=[],n=this;this.$element.find(":selected").each((function(){var t=i(this),s=n.item(t);e.push(s)})),t(e)},n.prototype.select=function(t){var e=this;if(t.selected=!0,i(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current((function(n){var s=[];(t=[t]).push.apply(t,n);for(var r=0;r<t.length;r++){var o=t[r].id;-1===i.inArray(o,s)&&s.push(o)}e.$element.val(s),e.$element.trigger("input").trigger("change")}));else{var n=t.id;this.$element.val(n),this.$element.trigger("input").trigger("change")}},n.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,i(t.element).is("option"))return t.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current((function(n){for(var s=[],r=0;r<n.length;r++){var o=n[r].id;o!==t.id&&-1===i.inArray(o,s)&&s.push(o)}e.$element.val(s),e.$element.trigger("input").trigger("change")}))}},n.prototype.bind=function(t,e){var i=this;this.container=t,t.on("select",(function(t){i.select(t.data)})),t.on("unselect",(function(t){i.unselect(t.data)}))},n.prototype.destroy=function(){this.$element.find("*").each((function(){e.RemoveData(this)}))},n.prototype.query=function(t,e){var n=[],s=this;this.$element.children().each((function(){var e=i(this);if(e.is("option")||e.is("optgroup")){var r=s.item(e),o=s.matches(t,r);null!==o&&n.push(o)}})),e({results:n})},n.prototype.addOptions=function(t){e.appendMany(this.$element,t)},n.prototype.option=function(t){var n;t.children?(n=document.createElement("optgroup")).label=t.text:void 0!==(n=document.createElement("option")).textContent?n.textContent=t.text:n.innerText=t.text,void 0!==t.id&&(n.value=t.id),t.disabled&&(n.disabled=!0),t.selected&&(n.selected=!0),t.title&&(n.title=t.title);var s=i(n),r=this._normalizeItem(t);return r.element=n,e.StoreData(n,"data",r),s},n.prototype.item=function(t){var n={};if(null!=(n=e.GetData(t[0],"data")))return n;if(t.is("option"))n={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){n={text:t.prop("label"),children:[],title:t.prop("title")};for(var s=t.children("option"),r=[],o=0;o<s.length;o++){var a=i(s[o]),l=this.item(a);r.push(l)}n.children=r}return(n=this._normalizeItem(n)).element=t[0],e.StoreData(t[0],"data",n),n},n.prototype._normalizeItem=function(t){t!==Object(t)&&(t={id:t,text:t});return null!=(t=i.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),i.extend({},{selected:!1,disabled:!1},t)},n.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},n})),e.define("select2/data/array",["./select","../utils","jquery"],(function(t,e,i){function n(t,e){this._dataToConvert=e.get("data")||[],n.__super__.constructor.call(this,t,e)}return e.Extend(n,t),n.prototype.bind=function(t,e){n.__super__.bind.call(this,t,e),this.addOptions(this.convertToOptions(this._dataToConvert))},n.prototype.select=function(t){var e=this.$element.find("option").filter((function(e,i){return i.value==t.id.toString()}));0===e.length&&(e=this.option(t),this.addOptions(e)),n.__super__.select.call(this,t)},n.prototype.convertToOptions=function(t){var n=this,s=this.$element.find("option"),r=s.map((function(){return n.item(i(this)).id})).get(),o=[];function a(t){return function(){return i(this).val()==t.id}}for(var l=0;l<t.length;l++){var h=this._normalizeItem(t[l]);if(i.inArray(h.id,r)>=0){var u=s.filter(a(h)),c=this.item(u),d=i.extend(!0,{},h,c),f=this.option(d);u.replaceWith(f)}else{var p=this.option(h);if(h.children){var g=this.convertToOptions(h.children);e.appendMany(p,g)}o.push(p)}}return o},n})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(t,e,i){function n(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,t,e)}return e.Extend(n,t),n.prototype._applyDefaults=function(t){var e={data:function(t){return i.extend({},t,{q:t.term})},transport:function(t,e,n){var s=i.ajax(t);return s.then(e),s.fail(n),s}};return i.extend({},e,t,!0)},n.prototype.processResults=function(t){return t},n.prototype.query=function(t,e){var n=this;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var s=i.extend({type:"GET"},this.ajaxOptions);function r(){var r=s.transport(s,(function(s){var r=n.processResults(s,t);n.options.get("debug")&&window.console&&console.error&&(r&&r.results&&i.isArray(r.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(r)}),(function(){(!("status"in r)||0!==r.status&&"0"!==r.status)&&n.trigger("results:message",{message:"errorLoading"})}));n._request=r}"function"==typeof s.url&&(s.url=s.url.call(this.$element,t)),"function"==typeof s.data&&(s.data=s.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(r,this.ajaxOptions.delay)):r()},n})),e.define("select2/data/tags",["jquery"],(function(t){function e(e,i,n){var s=n.get("tags"),r=n.get("createTag");void 0!==r&&(this.createTag=r);var o=n.get("insertTag");if(void 0!==o&&(this.insertTag=o),e.call(this,i,n),t.isArray(s))for(var a=0;a<s.length;a++){var l=s[a],h=this._normalizeItem(l),u=this.option(h);this.$element.append(u)}}return e.prototype.query=function(t,e,i){var n=this;this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,(function t(s,r){for(var o=s.results,a=0;a<o.length;a++){var l=o[a],h=null!=l.children&&!t({results:l.children},!0);if((l.text||"").toUpperCase()===(e.term||"").toUpperCase()||h)return!r&&(s.data=o,void i(s))}if(r)return!0;var u=n.createTag(e);if(null!=u){var c=n.option(u);c.attr("data-select2-tag",!0),n.addOptions([c]),n.insertTag(o,u)}s.results=o,i(s)})):t.call(this,e,i)},e.prototype.createTag=function(e,i){var n=t.trim(i.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(t,e,i){e.unshift(i)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each((function(){this.selected||t(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(t){function e(t,e,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),t.call(this,e,i)}return e.prototype.bind=function(t,e,i){t.call(this,e,i),this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")},e.prototype.query=function(e,i,n){var s=this;i.term=i.term||"";var r=this.tokenizer(i,this.options,(function(e){var i=s._normalizeItem(e);if(!s.$element.find("option").filter((function(){return t(this).val()===i.id})).length){var n=s.option(i);n.attr("data-select2-tag",!0),s._removeOldTags(),s.addOptions([n])}!function(t){s.trigger("select",{data:t})}(i)}));r.term!==i.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.trigger("focus")),i.term=r.term),e.call(this,i,n)},e.prototype.tokenizer=function(e,i,n,s){for(var r=n.get("tokenSeparators")||[],o=i.term,a=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};a<o.length;){var h=o[a];if(-1!==t.inArray(h,r)){var u=o.substr(0,a),c=l(t.extend({},i,{term:u}));null!=c?(s(c),o=o.substr(a+1)||"",a=0):a++}else a++}return{term:o}},e})),e.define("select2/data/minimumInputLength",[],(function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,i)},t})),e.define("select2/data/maximumInputLength",[],(function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,i)},t})),e.define("select2/data/maximumSelectionLength",[],(function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),t.call(this,e,i)}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",(function(){n._checkIfMaximumSelected()}))},t.prototype.query=function(t,e,i){var n=this;this._checkIfMaximumSelected((function(){t.call(n,e,i)}))},t.prototype._checkIfMaximumSelected=function(t,e){var i=this;this.current((function(t){var n=null!=t?t.length:0;i.maximumSelectionLength>0&&n>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):e&&e()}))},t})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},i.prototype.bind=function(){},i.prototype.position=function(t,e){},i.prototype.destroy=function(){this.$dropdown.remove()},i})),e.define("select2/dropdown/search",["jquery","../utils"],(function(t,e){function i(){}return i.prototype.render=function(e){var i=e.call(this),n=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),i.prepend(n),i},i.prototype.bind=function(e,i,n){var s=this,r=i.id+"-results";e.call(this,i,n),this.$search.on("keydown",(function(t){s.trigger("keypress",t),s._keyUpPrevented=t.isDefaultPrevented()})),this.$search.on("input",(function(e){t(this).off("keyup")})),this.$search.on("keyup input",(function(t){s.handleSearch(t)})),i.on("open",(function(){s.$search.attr("tabindex",0),s.$search.attr("aria-controls",r),s.$search.trigger("focus"),window.setTimeout((function(){s.$search.trigger("focus")}),0)})),i.on("close",(function(){s.$search.attr("tabindex",-1),s.$search.removeAttr("aria-controls"),s.$search.removeAttr("aria-activedescendant"),s.$search.val(""),s.$search.trigger("blur")})),i.on("focus",(function(){i.isOpen()||s.$search.trigger("focus")})),i.on("results:all",(function(t){null!=t.query.term&&""!==t.query.term||(s.showSearch(t)?s.$searchContainer.removeClass("select2-search--hide"):s.$searchContainer.addClass("select2-search--hide"))})),i.on("results:focus",(function(t){t.data._resultId?s.$search.attr("aria-activedescendant",t.data._resultId):s.$search.removeAttr("aria-activedescendant")}))},i.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.showSearch=function(t,e){return!0},i})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i,n)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var i=e.slice(0),n=e.length-1;n>=0;n--){var s=e[n];this.placeholder.id===s.id&&i.splice(n,1)}return i},t})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(t){function e(t,e,i,n){this.lastParams={},t.call(this,e,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("query",(function(t){n.lastParams=t,n.loading=!0})),e.on("query:append",(function(t){n.lastParams=t,n.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=t.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&e&&(this.$results.offset().top+this.$results.outerHeight(!1)+50>=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)&&this.loadMore())},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),i=this.options.get("translations").get("loadingMore");return e.html(i(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(t,e){function i(e,i,n){this.$dropdownParent=t(n.get("dropdownParent")||document.body),e.call(this,i,n)}return i.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("open",(function(){n._showDropdown(),n._attachPositioningHandler(e),n._bindContainerResultHandlers(e)})),e.on("close",(function(){n._hideDropdown(),n._detachPositioningHandler(e)})),this.$dropdownContainer.on("mousedown",(function(t){t.stopPropagation()}))},i.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},i.prototype.position=function(t,e,i){e.attr("class",i.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(e){var i=t("<span></span>"),n=e.call(this);return i.append(n),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},i.prototype._bindContainerResultHandlers=function(t,e){if(!this._containerResultsHandlersBound){var i=this;e.on("results:all",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("results:append",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("results:message",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("select",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("unselect",(function(){i._positionDropdown(),i._resizeDropdown()})),this._containerResultsHandlersBound=!0}},i.prototype._attachPositioningHandler=function(i,n){var s=this,r="scroll.select2."+n.id,o="resize.select2."+n.id,a="orientationchange.select2."+n.id,l=this.$container.parents().filter(e.hasScroll);l.each((function(){e.StoreData(this,"select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})})),l.on(r,(function(i){var n=e.GetData(this,"select2-scroll-position");t(this).scrollTop(n.y)})),t(window).on(r+" "+o+" "+a,(function(t){s._positionDropdown(),s._resizeDropdown()}))},i.prototype._detachPositioningHandler=function(i,n){var s="scroll.select2."+n.id,r="resize.select2."+n.id,o="orientationchange.select2."+n.id;this.$container.parents().filter(e.hasScroll).off(s),t(window).off(s+" "+r+" "+o)},i.prototype._positionDropdown=function(){var e=t(window),i=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),s=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=r.top,o.bottom=r.top+o.height;var a=this.$dropdown.outerHeight(!1),l=e.scrollTop(),h=e.scrollTop()+e.height(),u=l<r.top-a,c=h>r.bottom+a,d={left:r.left,top:o.bottom},f=this.$dropdownParent;"static"===f.css("position")&&(f=f.offsetParent());var p={top:0,left:0};(t.contains(document.body,f[0])||f[0].isConnected)&&(p=f.offset()),d.top-=p.top,d.left-=p.left,i||n||(s="below"),c||!u||i?!u&&c&&i&&(s="below"):s="above",("above"==s||i&&"below"!==s)&&(d.top=o.top-p.top-a),null!=s&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+s),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+s)),this.$dropdownContainer.css(d)},i.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},i.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function t(e){for(var i=0,n=0;n<e.length;n++){var s=e[n];s.children?i+=t(s.children):i++}return i}function e(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,i,n)}return e.prototype.showSearch=function(e,i){return!(t(i.data.results)<this.minimumResultsForSearch)&&e.call(this,i)},e})),e.define("select2/dropdown/selectOnClose",["../utils"],(function(t){function e(){}return e.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("close",(function(t){n._handleSelectOnClose(t)}))},e.prototype._handleSelectOnClose=function(e,i){if(i&&null!=i.originalSelect2Event){var n=i.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var s=this.getHighlightedResults();if(!(s.length<1)){var r=t.GetData(s[0],"data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},e})),e.define("select2/dropdown/closeOnSelect",[],(function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",(function(t){n._selectTriggered(t)})),e.on("unselect",(function(t){n._selectTriggered(t)}))},t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;i&&(i.ctrlKey||i.metaKey)||this.trigger("close",{originalEvent:i,originalSelect2Event:e})},t})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,i="Please delete "+e+" character";return 1!=e&&(i+="s"),i},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more resultsâ¦"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searchingâ¦"},removeAllItems:function(){return"Remove all items"}}})),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],(function(t,e,i,n,s,r,o,a,l,h,u,c,d,f,p,g,m,y,v,x,b,w,k,S,C,M,T,A,P){function N(){this.reset()}return N.prototype.apply=function(u){if(null==(u=t.extend(!0,{},this.defaults,u)).dataAdapter){if(null!=u.ajax?u.dataAdapter=p:null!=u.data?u.dataAdapter=f:u.dataAdapter=d,u.minimumInputLength>0&&(u.dataAdapter=h.Decorate(u.dataAdapter,y)),u.maximumInputLength>0&&(u.dataAdapter=h.Decorate(u.dataAdapter,v)),u.maximumSelectionLength>0&&(u.dataAdapter=h.Decorate(u.dataAdapter,x)),u.tags&&(u.dataAdapter=h.Decorate(u.dataAdapter,g)),null==u.tokenSeparators&&null==u.tokenizer||(u.dataAdapter=h.Decorate(u.dataAdapter,m)),null!=u.query){var c=e(u.amdBase+"compat/query");u.dataAdapter=h.Decorate(u.dataAdapter,c)}if(null!=u.initSelection){var P=e(u.amdBase+"compat/initSelection");u.dataAdapter=h.Decorate(u.dataAdapter,P)}}if(null==u.resultsAdapter&&(u.resultsAdapter=i,null!=u.ajax&&(u.resultsAdapter=h.Decorate(u.resultsAdapter,S)),null!=u.placeholder&&(u.resultsAdapter=h.Decorate(u.resultsAdapter,k)),u.selectOnClose&&(u.resultsAdapter=h.Decorate(u.resultsAdapter,T))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=b;else{var N=h.Decorate(b,w);u.dropdownAdapter=N}if(0!==u.minimumResultsForSearch&&(u.dropdownAdapter=h.Decorate(u.dropdownAdapter,M)),u.closeOnSelect&&(u.dropdownAdapter=h.Decorate(u.dropdownAdapter,A)),null!=u.dropdownCssClass||null!=u.dropdownCss||null!=u.adaptDropdownCssClass){var D=e(u.amdBase+"compat/dropdownCss");u.dropdownAdapter=h.Decorate(u.dropdownAdapter,D)}u.dropdownAdapter=h.Decorate(u.dropdownAdapter,C)}if(null==u.selectionAdapter){if(u.multiple?u.selectionAdapter=s:u.selectionAdapter=n,null!=u.placeholder&&(u.selectionAdapter=h.Decorate(u.selectionAdapter,r)),u.allowClear&&(u.selectionAdapter=h.Decorate(u.selectionAdapter,o)),u.multiple&&(u.selectionAdapter=h.Decorate(u.selectionAdapter,a)),null!=u.containerCssClass||null!=u.containerCss||null!=u.adaptContainerCssClass){var L=e(u.amdBase+"compat/containerCss");u.selectionAdapter=h.Decorate(u.selectionAdapter,L)}u.selectionAdapter=h.Decorate(u.selectionAdapter,l)}u.language=this._resolveLanguage(u.language),u.language.push("en");for(var E=[],_=0;_<u.language.length;_++){var O=u.language[_];-1===E.indexOf(O)&&E.push(O)}return u.language=E,u.translations=this._processTranslations(u.language,u.debug),u},N.prototype.reset=function(){function e(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return c[t]||t}))}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:{},matcher:function i(n,s){if(""===t.trim(n.term))return s;if(s.children&&s.children.length>0){for(var r=t.extend(!0,{},s),o=s.children.length-1;o>=0;o--){null==i(n,s.children[o])&&r.children.splice(o,1)}return r.children.length>0?r:i(n,r)}var a=e(s.text).toUpperCase(),l=e(n.term).toUpperCase();return a.indexOf(l)>-1?s:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},N.prototype.applyFromElement=function(t,e){var i=t.language,n=this.defaults.language,s=e.prop("lang"),r=e.closest("[lang]").prop("lang"),o=Array.prototype.concat.call(this._resolveLanguage(s),this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(r));return t.language=o,t},N.prototype._resolveLanguage=function(e){if(!e)return[];if(t.isEmptyObject(e))return[];if(t.isPlainObject(e))return[e];var i;i=t.isArray(e)?e:[e];for(var n=[],s=0;s<i.length;s++)if(n.push(i[s]),"string"==typeof i[s]&&i[s].indexOf("-")>0){var r=i[s].split("-")[0];n.push(r)}return n},N.prototype._processTranslations=function(e,i){for(var n=new u,s=0;s<e.length;s++){var r=new u,o=e[s];if("string"==typeof o)try{r=u.loadPath(o)}catch(t){try{o=this.defaults.amdLanguageBase+o,r=u.loadPath(o)}catch(t){i&&window.console&&console.warn&&console.warn('Select2: The language file for "'+o+'" could not be automatically loaded. A fallback will be used instead.')}}else r=t.isPlainObject(o)?new u(o):o;n.extend(r)}return n},N.prototype.set=function(e,i){var n={};n[t.camelCase(e)]=i;var s=h._convertData(n);t.extend(!0,this.defaults,s)},new N})),e.define("select2/options",["require","jquery","./defaults","./utils"],(function(t,e,i,n){function s(e,s){if(this.options=e,null!=s&&this.fromElement(s),null!=s&&(this.options=i.applyFromElement(this.options,s)),this.options=i.apply(this.options),s&&s.is("input")){var r=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=n.Decorate(this.options.dataAdapter,r)}}return s.prototype.fromElement=function(t){var i=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),n.GetData(t[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.StoreData(t[0],"data",n.GetData(t[0],"select2Tags")),n.StoreData(t[0],"tags",!0)),n.GetData(t[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",n.GetData(t[0],"ajaxUrl")),n.StoreData(t[0],"ajax-Url",n.GetData(t[0],"ajaxUrl")));var s={};function r(t,e){return e.toUpperCase()}for(var o=0;o<t[0].attributes.length;o++){var a=t[0].attributes[o].name,l="data-";if(a.substr(0,5)==l){var h=a.substring(5),u=n.GetData(t[0],h);s[h.replace(/-([a-z])/g,r)]=u}}e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset&&(s=e.extend(!0,{},t[0].dataset,s));var c=e.extend(!0,{},n.GetData(t[0]),s);for(var d in c=n._convertData(c))e.inArray(d,i)>-1||(e.isPlainObject(this.options[d])?e.extend(this.options[d],c[d]):this.options[d]=c[d]);return this},s.prototype.get=function(t){return this.options[t]},s.prototype.set=function(t,e){this.options[t]=e},s})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(t,e,i,n){var s=function(t,n){null!=i.GetData(t[0],"select2")&&i.GetData(t[0],"select2").destroy(),this.$element=t,this.id=this._generateId(t),n=n||{},this.options=new e(n,t),s.__super__.constructor.call(this);var r=t.attr("tabindex")||0;i.StoreData(t[0],"old-tabindex",r),t.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(t,this.options);var a=this.render();this._placeContainer(a);var l=this.options.get("selectionAdapter");this.selection=new l(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var h=this.options.get("dropdownAdapter");this.dropdown=new h(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var u=this.options.get("resultsAdapter");this.results=new u(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var c=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(t){c.trigger("selection:update",{data:t})})),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),i.StoreData(t[0],"select2",this),t.data("select2",this)};return i.Extend(s,i.Observable),s.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},s.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},s.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var n=this._resolveWidth(t,"style");return null!=n?n:this._resolveWidth(t,"element")}if("element"==e){var s=t.outerWidth(!1);return s<=0?"auto":s+"px"}if("style"==e){var r=t.attr("style");if("string"!=typeof r)return null;for(var o=r.split(";"),a=0,l=o.length;a<l;a+=1){var h=o[a].replace(/\s/g,"").match(i);if(null!==h&&h.length>=1)return h[1]}return null}return"computedstyle"==e?window.getComputedStyle(t[0]).width:e},s.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},s.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",(function(){t.dataAdapter.current((function(e){t.trigger("selection:update",{data:e})}))})),this.$element.on("focus.select2",(function(e){t.trigger("focus",e)})),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e((function(e){t._syncA(),t._syncS(null,e)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},s.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",(function(e,i){t.trigger(e,i)}))},s.prototype._registerSelectionEvents=function(){var e=this,i=["toggle","focus"];this.selection.on("toggle",(function(){e.toggleDropdown()})),this.selection.on("focus",(function(t){e.focus(t)})),this.selection.on("*",(function(n,s){-1===t.inArray(n,i)&&e.trigger(n,s)}))},s.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",(function(e,i){t.trigger(e,i)}))},s.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",(function(e,i){t.trigger(e,i)}))},s.prototype._registerEvents=function(){var t=this;this.on("open",(function(){t.$container.addClass("select2-container--open")})),this.on("close",(function(){t.$container.removeClass("select2-container--open")})),this.on("enable",(function(){t.$container.removeClass("select2-container--disabled")})),this.on("disable",(function(){t.$container.addClass("select2-container--disabled")})),this.on("blur",(function(){t.$container.removeClass("select2-container--focus")})),this.on("query",(function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,(function(i){t.trigger("results:all",{data:i,query:e})}))})),this.on("query:append",(function(e){this.dataAdapter.query(e,(function(i){t.trigger("results:append",{data:i,query:e})}))})),this.on("keypress",(function(e){var i=e.which;t.isOpen()?i===n.ESC||i===n.TAB||i===n.UP&&e.altKey?(t.close(e),e.preventDefault()):i===n.ENTER?(t.trigger("results:select",{}),e.preventDefault()):i===n.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):i===n.UP?(t.trigger("results:previous",{}),e.preventDefault()):i===n.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(i===n.ENTER||i===n.SPACE||i===n.DOWN&&e.altKey)&&(t.open(),e.preventDefault())}))},s.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},s.prototype._isChangeMutation=function(e,i){var n=!1,s=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(i)if(i.addedNodes&&i.addedNodes.length>0)for(var r=0;r<i.addedNodes.length;r++){i.addedNodes[r].selected&&(n=!0)}else i.removedNodes&&i.removedNodes.length>0?n=!0:t.isArray(i)&&t.each(i,(function(t,e){if(s._isChangeMutation(t,e))return n=!0,!1}));else n=!0;return n}},s.prototype._syncSubtree=function(t,e){var i=this._isChangeMutation(t,e),n=this;i&&this.dataAdapter.current((function(t){n.trigger("selection:update",{data:t})}))},s.prototype.trigger=function(t,e){var i=s.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===e&&(e={}),t in n){var r=n[t],o={prevented:!1,name:t,args:e};if(i.call(this,r,o),o.prevented)return void(e.prevented=!0)}i.call(this,t,e)},s.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},s.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},s.prototype.close=function(t){this.isOpen()&&this.trigger("close",{originalEvent:t})},s.prototype.isEnabled=function(){return!this.isDisabled()},s.prototype.isDisabled=function(){return this.options.get("disabled")},s.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},s.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},s.prototype.focus=function(t){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},s.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},s.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current((function(e){t=e})),t},s.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var i=e[0];t.isArray(i)&&(i=t.map(i,(function(t){return t.toString()}))),this.$element.val(i).trigger("input").trigger("change")},s.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",i.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),i.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},s.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),i.StoreData(e[0],"element",this.$element),e},s})),e.define("jquery-mousewheel",["jquery"],(function(t){return t})),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(t,e,i,n,s){if(null==t.fn.select2){var r=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each((function(){var n=t.extend(!0,{},e);new i(t(this),n)})),this;if("string"==typeof e){var n,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var t=s.GetData(this,"select2");null==t&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),n=t[e].apply(t,o)})),t.inArray(e,r)>-1?this:n}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=n),i})),{define:e.define,require:e.require}}(),i=e.require("jquery.select2");return t.fn.select2.amd=e,i})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).vuejsDatepicker=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),s.forEach((function(e){i(t,e,n[e])}))}return t}var s=new(function(){function t(e,i,n,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.language=e,this.months=i,this.monthsAbbr=n,this.days=s,this.rtl=!1,this.ymd=!1,this.yearSuffix=""}var i,n;return i=t,(n=[{key:"language",get:function(){return this._language},set:function(t){if("string"!=typeof t)throw new TypeError("Language must be a string");this._language=t}},{key:"months",get:function(){return this._months},set:function(t){if(12!==t.length)throw new RangeError("There must be 12 months for ".concat(this.language," language"));this._months=t}},{key:"monthsAbbr",get:function(){return this._monthsAbbr},set:function(t){if(12!==t.length)throw new RangeError("There must be 12 abbreviated months for ".concat(this.language," language"));this._monthsAbbr=t}},{key:"days",get:function(){return this._days},set:function(t){if(7!==t.length)throw new RangeError("There must be 7 days for ".concat(this.language," language"));this._days=t}}])&&e(i.prototype,n),t}())("English",["January","February","March","April","May","June","July","August","September","October","November","December"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),r={useUtc:!1,getFullYear:function(t){return this.useUtc?t.getUTCFullYear():t.getFullYear()},getMonth:function(t){return this.useUtc?t.getUTCMonth():t.getMonth()},getDate:function(t){return this.useUtc?t.getUTCDate():t.getDate()},getDay:function(t){return this.useUtc?t.getUTCDay():t.getDay()},getHours:function(t){return this.useUtc?t.getUTCHours():t.getHours()},getMinutes:function(t){return this.useUtc?t.getUTCMinutes():t.getMinutes()},setFullYear:function(t,e,i){return this.useUtc?t.setUTCFullYear(e):t.setFullYear(e)},setMonth:function(t,e,i){return this.useUtc?t.setUTCMonth(e):t.setMonth(e)},setDate:function(t,e,i){return this.useUtc?t.setUTCDate(e):t.setDate(e)},compareDates:function(t,e){var i=new Date(t.getTime()),n=new Date(e.getTime());return this.useUtc?(i.setUTCHours(0,0,0,0),n.setUTCHours(0,0,0,0)):(i.setHours(0,0,0,0),n.setHours(0,0,0,0)),i.getTime()===n.getTime()},isValidDate:function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},getDayNameAbbr:function(e,i){if("object"!==t(e))throw TypeError("Invalid Type");return i[this.getDay(e)]},getMonthName:function(e,i){if(!i)throw Error("missing 2nd parameter Months array");if("object"===t(e))return i[this.getMonth(e)];if("number"==typeof e)return i[e];throw TypeError("Invalid type")},getMonthNameAbbr:function(e,i){if(!i)throw Error("missing 2nd paramter Months array");if("object"===t(e))return i[this.getMonth(e)];if("number"==typeof e)return i[e];throw TypeError("Invalid type")},daysInMonth:function(t,e){return/8|3|5|10/.test(e)?30:1===e?(t%4||!(t%100))&&t%400?28:29:31},getNthSuffix:function(t){switch(t){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},formatDate:function(t,e,i){i=i||s;var n=this.getFullYear(t),r=this.getMonth(t)+1,o=this.getDate(t);return e.replace(/dd/,("0"+o).slice(-2)).replace(/d/,o).replace(/yyyy/,n).replace(/yy/,String(n).slice(2)).replace(/MMMM/,this.getMonthName(this.getMonth(t),i.months)).replace(/MMM/,this.getMonthNameAbbr(this.getMonth(t),i.monthsAbbr)).replace(/MM/,("0"+r).slice(-2)).replace(/M(?!a|Ã¤|e)/,r).replace(/su/,this.getNthSuffix(this.getDate(t))).replace(/D(?!e|Ã©|i)/,this.getDayNameAbbr(t,i.days))},createDateArray:function(t,e){for(var i=[];t<=e;)i.push(new Date(t)),t=this.setDate(new Date(t),this.getDate(new Date(t))+1);return i},validateDateInput:function(t){return null===t||t instanceof Date||"string"==typeof t||"number"==typeof t}},o=function(t){return n({},r,{useUtc:t})},a=n({},r),l=function(t,e,i,n,s,r,o,a,l,h){"boolean"!=typeof o&&(l=a,a=o,o=!1);var u,c="function"==typeof i?i.options:i;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),n&&(c._scopeId=n),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=u):e&&(u=o?function(){e.call(this,h(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(c.functional){var d=c.render;c.render=function(t,e){return u.call(e),d(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,u):[u]}return i};const h={props:{selectedDate:Date,resetTypedDate:[Date],format:[String,Function],translation:Object,inline:Boolean,id:String,name:String,refName:String,openDate:Date,placeholder:String,inputClass:[String,Object,Array],clearButton:Boolean,clearButtonIcon:String,calendarButton:Boolean,calendarButtonIcon:String,calendarButtonIconContent:String,disabled:Boolean,required:Boolean,typeable:Boolean,bootstrapStyling:Boolean,useUtc:Boolean},data:function(){return{input:null,typedDate:!1,utils:o(this.useUtc)}},computed:{formattedValue:function(){return this.selectedDate?this.typedDate?this.typedDate:"function"==typeof this.format?this.format(this.selectedDate):this.utils.formatDate(new Date(this.selectedDate),this.format,this.translation):null},computedInputClass:function(){return this.bootstrapStyling?"string"==typeof this.inputClass?[this.inputClass,"form-control"].join(" "):n({"form-control":!0},this.inputClass):this.inputClass}},watch:{resetTypedDate:function(){this.typedDate=!1}},methods:{showCalendar:function(){this.$emit("showCalendar")},parseTypedDate:function(t){if([27,13].includes(t.keyCode)&&this.input.blur(),this.typeable){var e=Date.parse(this.input.value);isNaN(e)||(this.typedDate=this.input.value,this.$emit("typedDate",new Date(this.typedDate)))}},inputBlurred:function(){this.typeable&&isNaN(Date.parse(this.input.value))&&(this.clearDate(),this.input.value=null,this.typedDate=null),this.$emit("closeCalendar")},clearDate:function(){this.$emit("clearDate")}},mounted:function(){this.input=this.$el.querySelector("input")}};var u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{"input-group":t.bootstrapStyling}},[t.calendarButton?i("span",{staticClass:"vdp-datepicker__calendar-button",class:{"input-group-prepend":t.bootstrapStyling},style:{"cursor:not-allowed;":t.disabled},on:{click:t.showCalendar}},[i("span",{class:{"input-group-text":t.bootstrapStyling}},[i("i",{class:t.calendarButtonIcon},[t._v("\n        "+t._s(t.calendarButtonIconContent)+"\n        "),t.calendarButtonIcon?t._e():i("span",[t._v("â¦")])])])]):t._e(),t._v(" "),i("input",{ref:t.refName,class:t.computedInputClass,attrs:{type:t.inline?"hidden":"text",name:t.name,id:t.id,"open-date":t.openDate,placeholder:t.placeholder,"clear-button":t.clearButton,disabled:t.disabled,required:t.required,readonly:!t.typeable,autocomplete:"off"},domProps:{value:t.formattedValue},on:{click:t.showCalendar,keyup:t.parseTypedDate,blur:t.inputBlurred}}),t._v(" "),t.clearButton&&t.selectedDate?i("span",{staticClass:"vdp-datepicker__clear-button",class:{"input-group-append":t.bootstrapStyling},on:{click:function(e){return t.clearDate()}}},[i("span",{class:{"input-group-text":t.bootstrapStyling}},[i("i",{class:t.clearButtonIcon},[t.clearButtonIcon?t._e():i("span",[t._v("Ã")])])])]):t._e(),t._v(" "),t._t("afterDateInput")],2)};u._withStripped=!0;var c=l({render:u,staticRenderFns:[]},void 0,h,void 0,!1,void 0,void 0,void 0);const d={props:{showDayView:Boolean,selectedDate:Date,pageDate:Date,pageTimestamp:Number,fullMonthName:Boolean,allowedToShowView:Function,dayCellContent:{type:Function,default:function(t){return t.date}},disabledDates:Object,highlighted:Object,calendarClass:[String,Object,Array],calendarStyle:Object,translation:Object,isRtl:Boolean,mondayFirst:Boolean,useUtc:Boolean},data:function(){return{utils:o(this.useUtc)}},computed:{daysOfWeek:function(){if(this.mondayFirst){var t=this.translation.days.slice();return t.push(t.shift()),t}return this.translation.days},blankDays:function(){var t=this.pageDate,e=this.useUtc?new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),1)):new Date(t.getFullYear(),t.getMonth(),1,t.getHours(),t.getMinutes());return this.mondayFirst?this.utils.getDay(e)>0?this.utils.getDay(e)-1:6:this.utils.getDay(e)},days:function(){for(var t=this.pageDate,e=[],i=this.useUtc?new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),1)):new Date(t.getFullYear(),t.getMonth(),1,t.getHours(),t.getMinutes()),n=this.utils.daysInMonth(this.utils.getFullYear(i),this.utils.getMonth(i)),s=0;s<n;s++)e.push({date:this.utils.getDate(i),timestamp:i.getTime(),isSelected:this.isSelectedDate(i),isDisabled:this.isDisabledDate(i),isHighlighted:this.isHighlightedDate(i),isHighlightStart:this.isHighlightStart(i),isHighlightEnd:this.isHighlightEnd(i),isToday:this.utils.compareDates(i,new Date),isWeekend:0===this.utils.getDay(i)||6===this.utils.getDay(i),isSaturday:6===this.utils.getDay(i),isSunday:0===this.utils.getDay(i)}),this.utils.setDate(i,this.utils.getDate(i)+1);return e},currMonthName:function(){var t=this.fullMonthName?this.translation.months:this.translation.monthsAbbr;return this.utils.getMonthNameAbbr(this.utils.getMonth(this.pageDate),t)},currYearName:function(){var t=this.translation.yearSuffix;return"".concat(this.utils.getFullYear(this.pageDate)).concat(t)},isYmd:function(){return this.translation.ymd&&!0===this.translation.ymd},isLeftNavDisabled:function(){return this.isRtl?this.isNextMonthDisabled(this.pageTimestamp):this.isPreviousMonthDisabled(this.pageTimestamp)},isRightNavDisabled:function(){return this.isRtl?this.isPreviousMonthDisabled(this.pageTimestamp):this.isNextMonthDisabled(this.pageTimestamp)}},methods:{selectDate:function(t){if(t.isDisabled)return this.$emit("selectedDisabled",t),!1;this.$emit("selectDate",t)},getPageMonth:function(){return this.utils.getMonth(this.pageDate)},showMonthCalendar:function(){this.$emit("showMonthCalendar")},changeMonth:function(t){var e=this.pageDate;this.utils.setMonth(e,this.utils.getMonth(e)+t),this.$emit("changedMonth",e)},previousMonth:function(){this.isPreviousMonthDisabled()||this.changeMonth(-1)},isPreviousMonthDisabled:function(){if(!this.disabledDates||!this.disabledDates.to)return!1;var t=this.pageDate;return this.utils.getMonth(this.disabledDates.to)>=this.utils.getMonth(t)&&this.utils.getFullYear(this.disabledDates.to)>=this.utils.getFullYear(t)},nextMonth:function(){this.isNextMonthDisabled()||this.changeMonth(1)},isNextMonthDisabled:function(){if(!this.disabledDates||!this.disabledDates.from)return!1;var t=this.pageDate;return this.utils.getMonth(this.disabledDates.from)<=this.utils.getMonth(t)&&this.utils.getFullYear(this.disabledDates.from)<=this.utils.getFullYear(t)},isSelectedDate:function(t){return this.selectedDate&&this.utils.compareDates(this.selectedDate,t)},isDisabledDate:function(t){var e=this,i=!1;return void 0!==this.disabledDates&&(void 0!==this.disabledDates.dates&&this.disabledDates.dates.forEach((function(n){if(e.utils.compareDates(t,n))return i=!0,!0})),void 0!==this.disabledDates.to&&this.disabledDates.to&&t<this.disabledDates.to&&(i=!0),void 0!==this.disabledDates.from&&this.disabledDates.from&&t>this.disabledDates.from&&(i=!0),void 0!==this.disabledDates.ranges&&this.disabledDates.ranges.forEach((function(e){if(void 0!==e.from&&e.from&&void 0!==e.to&&e.to&&t<e.to&&t>e.from)return i=!0,!0})),void 0!==this.disabledDates.days&&-1!==this.disabledDates.days.indexOf(this.utils.getDay(t))&&(i=!0),void 0!==this.disabledDates.daysOfMonth&&-1!==this.disabledDates.daysOfMonth.indexOf(this.utils.getDate(t))&&(i=!0),"function"==typeof this.disabledDates.customPredictor&&this.disabledDates.customPredictor(t)&&(i=!0),i)},isHighlightedDate:function(t){var e=this;if((!this.highlighted||!this.highlighted.includeDisabled)&&this.isDisabledDate(t))return!1;var i=!1;return void 0!==this.highlighted&&(void 0!==this.highlighted.dates&&this.highlighted.dates.forEach((function(n){if(e.utils.compareDates(t,n))return i=!0,!0})),this.isDefined(this.highlighted.from)&&this.isDefined(this.highlighted.to)&&(i=t>=this.highlighted.from&&t<=this.highlighted.to),void 0!==this.highlighted.days&&-1!==this.highlighted.days.indexOf(this.utils.getDay(t))&&(i=!0),void 0!==this.highlighted.daysOfMonth&&-1!==this.highlighted.daysOfMonth.indexOf(this.utils.getDate(t))&&(i=!0),"function"==typeof this.highlighted.customPredictor&&this.highlighted.customPredictor(t)&&(i=!0),i)},dayClasses:function(t){return{selected:t.isSelected,disabled:t.isDisabled,highlighted:t.isHighlighted,today:t.isToday,weekend:t.isWeekend,sat:t.isSaturday,sun:t.isSunday,"highlight-start":t.isHighlightStart,"highlight-end":t.isHighlightEnd}},isHighlightStart:function(t){return this.isHighlightedDate(t)&&this.highlighted.from instanceof Date&&this.utils.getFullYear(this.highlighted.from)===this.utils.getFullYear(t)&&this.utils.getMonth(this.highlighted.from)===this.utils.getMonth(t)&&this.utils.getDate(this.highlighted.from)===this.utils.getDate(t)},isHighlightEnd:function(t){return this.isHighlightedDate(t)&&this.highlighted.to instanceof Date&&this.utils.getFullYear(this.highlighted.to)===this.utils.getFullYear(t)&&this.utils.getMonth(this.highlighted.to)===this.utils.getMonth(t)&&this.utils.getDate(this.highlighted.to)===this.utils.getDate(t)},isDefined:function(t){return void 0!==t&&t}}};var f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.showDayView,expression:"showDayView"}],class:[t.calendarClass,"vdp-datepicker__calendar"],style:t.calendarStyle,on:{mousedown:function(t){t.preventDefault()}}},[t._t("beforeCalendarHeader"),t._v(" "),i("header",[i("span",{staticClass:"prev",class:{disabled:t.isLeftNavDisabled},on:{click:function(e){t.isRtl?t.nextMonth():t.previousMonth()}}},[t._v("<")]),t._v(" "),i("span",{staticClass:"day__month_btn",class:t.allowedToShowView("month")?"up":"",on:{click:t.showMonthCalendar}},[t._v(t._s(t.isYmd?t.currYearName:t.currMonthName)+" "+t._s(t.isYmd?t.currMonthName:t.currYearName))]),t._v(" "),i("span",{staticClass:"next",class:{disabled:t.isRightNavDisabled},on:{click:function(e){t.isRtl?t.previousMonth():t.nextMonth()}}},[t._v(">")])]),t._v(" "),i("div",{class:t.isRtl?"flex-rtl":""},[t._l(t.daysOfWeek,(function(e){return i("span",{key:e.timestamp,staticClass:"cell day-header"},[t._v(t._s(e))])})),t._v(" "),t.blankDays>0?t._l(t.blankDays,(function(t){return i("span",{key:t.timestamp,staticClass:"cell day blank"})})):t._e(),t._l(t.days,(function(e){return i("span",{key:e.timestamp,staticClass:"cell day",class:t.dayClasses(e),domProps:{innerHTML:t._s(t.dayCellContent(e))},on:{click:function(i){return t.selectDate(e)}}})}))],2)],2)};f._withStripped=!0;var p=l({render:f,staticRenderFns:[]},void 0,d,void 0,!1,void 0,void 0,void 0);const g={props:{showMonthView:Boolean,selectedDate:Date,pageDate:Date,pageTimestamp:Number,disabledDates:Object,calendarClass:[String,Object,Array],calendarStyle:Object,translation:Object,isRtl:Boolean,allowedToShowView:Function,useUtc:Boolean},data:function(){return{utils:o(this.useUtc)}},computed:{months:function(){for(var t=this.pageDate,e=[],i=this.useUtc?new Date(Date.UTC(t.getUTCFullYear(),0,t.getUTCDate())):new Date(t.getFullYear(),0,t.getDate(),t.getHours(),t.getMinutes()),n=0;n<12;n++)e.push({month:this.utils.getMonthName(n,this.translation.months),timestamp:i.getTime(),isSelected:this.isSelectedMonth(i),isDisabled:this.isDisabledMonth(i)}),this.utils.setMonth(i,this.utils.getMonth(i)+1);return e},pageYearName:function(){var t=this.translation.yearSuffix;return"".concat(this.utils.getFullYear(this.pageDate)).concat(t)},isLeftNavDisabled:function(){return this.isRtl?this.isNextYearDisabled(this.pageTimestamp):this.isPreviousYearDisabled(this.pageTimestamp)},isRightNavDisabled:function(){return this.isRtl?this.isPreviousYearDisabled(this.pageTimestamp):this.isNextYearDisabled(this.pageTimestamp)}},methods:{selectMonth:function(t){if(t.isDisabled)return!1;this.$emit("selectMonth",t)},changeYear:function(t){var e=this.pageDate;this.utils.setFullYear(e,this.utils.getFullYear(e)+t),this.$emit("changedYear",e)},previousYear:function(){this.isPreviousYearDisabled()||this.changeYear(-1)},isPreviousYearDisabled:function(){return!(!this.disabledDates||!this.disabledDates.to)&&this.utils.getFullYear(this.disabledDates.to)>=this.utils.getFullYear(this.pageDate)},nextYear:function(){this.isNextYearDisabled()||this.changeYear(1)},isNextYearDisabled:function(){return!(!this.disabledDates||!this.disabledDates.from)&&this.utils.getFullYear(this.disabledDates.from)<=this.utils.getFullYear(this.pageDate)},showYearCalendar:function(){this.$emit("showYearCalendar")},isSelectedMonth:function(t){return this.selectedDate&&this.utils.getFullYear(this.selectedDate)===this.utils.getFullYear(t)&&this.utils.getMonth(this.selectedDate)===this.utils.getMonth(t)},isDisabledMonth:function(t){var e=!1;return void 0!==this.disabledDates&&(void 0!==this.disabledDates.to&&this.disabledDates.to&&(this.utils.getMonth(t)<this.utils.getMonth(this.disabledDates.to)&&this.utils.getFullYear(t)<=this.utils.getFullYear(this.disabledDates.to)||this.utils.getFullYear(t)<this.utils.getFullYear(this.disabledDates.to))&&(e=!0),void 0!==this.disabledDates.from&&this.disabledDates.from&&(this.utils.getMonth(t)>this.utils.getMonth(this.disabledDates.from)&&this.utils.getFullYear(t)>=this.utils.getFullYear(this.disabledDates.from)||this.utils.getFullYear(t)>this.utils.getFullYear(this.disabledDates.from))&&(e=!0),"function"==typeof this.disabledDates.customPredictor&&this.disabledDates.customPredictor(t)&&(e=!0),e)}}};var m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.showMonthView,expression:"showMonthView"}],class:[t.calendarClass,"vdp-datepicker__calendar"],style:t.calendarStyle,on:{mousedown:function(t){t.preventDefault()}}},[t._t("beforeCalendarHeader"),t._v(" "),i("header",[i("span",{staticClass:"prev",class:{disabled:t.isLeftNavDisabled},on:{click:function(e){t.isRtl?t.nextYear():t.previousYear()}}},[t._v("<")]),t._v(" "),i("span",{staticClass:"month__year_btn",class:t.allowedToShowView("year")?"up":"",on:{click:t.showYearCalendar}},[t._v(t._s(t.pageYearName))]),t._v(" "),i("span",{staticClass:"next",class:{disabled:t.isRightNavDisabled},on:{click:function(e){t.isRtl?t.previousYear():t.nextYear()}}},[t._v(">")])]),t._v(" "),t._l(t.months,(function(e){return i("span",{key:e.timestamp,staticClass:"cell month",class:{selected:e.isSelected,disabled:e.isDisabled},on:{click:function(i){return i.stopPropagation(),t.selectMonth(e)}}},[t._v(t._s(e.month))])}))],2)};m._withStripped=!0;var y=l({render:m,staticRenderFns:[]},void 0,g,void 0,!1,void 0,void 0,void 0);const v={props:{showYearView:Boolean,selectedDate:Date,pageDate:Date,pageTimestamp:Number,disabledDates:Object,highlighted:Object,calendarClass:[String,Object,Array],calendarStyle:Object,translation:Object,isRtl:Boolean,allowedToShowView:Function,useUtc:Boolean},computed:{years:function(){for(var t=this.pageDate,e=[],i=this.useUtc?new Date(Date.UTC(10*Math.floor(t.getUTCFullYear()/10),t.getUTCMonth(),t.getUTCDate())):new Date(10*Math.floor(t.getFullYear()/10),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()),n=0;n<10;n++)e.push({year:this.utils.getFullYear(i),timestamp:i.getTime(),isSelected:this.isSelectedYear(i),isDisabled:this.isDisabledYear(i)}),this.utils.setFullYear(i,this.utils.getFullYear(i)+1);return e},getPageDecade:function(){var t=10*Math.floor(this.utils.getFullYear(this.pageDate)/10),e=t+9,i=this.translation.yearSuffix;return"".concat(t," - ").concat(e).concat(i)},isLeftNavDisabled:function(){return this.isRtl?this.isNextDecadeDisabled(this.pageTimestamp):this.isPreviousDecadeDisabled(this.pageTimestamp)},isRightNavDisabled:function(){return this.isRtl?this.isPreviousDecadeDisabled(this.pageTimestamp):this.isNextDecadeDisabled(this.pageTimestamp)}},data:function(){return{utils:o(this.useUtc)}},methods:{selectYear:function(t){if(t.isDisabled)return!1;this.$emit("selectYear",t)},changeYear:function(t){var e=this.pageDate;this.utils.setFullYear(e,this.utils.getFullYear(e)+t),this.$emit("changedDecade",e)},previousDecade:function(){if(this.isPreviousDecadeDisabled())return!1;this.changeYear(-10)},isPreviousDecadeDisabled:function(){return!(!this.disabledDates||!this.disabledDates.to)&&this.utils.getFullYear(this.disabledDates.to)>10*Math.floor(this.utils.getFullYear(this.pageDate)/10)-1},nextDecade:function(){if(this.isNextDecadeDisabled())return!1;this.changeYear(10)},isNextDecadeDisabled:function(){return!(!this.disabledDates||!this.disabledDates.from)&&this.utils.getFullYear(this.disabledDates.from)<10*Math.ceil(this.utils.getFullYear(this.pageDate)/10)},isSelectedYear:function(t){return this.selectedDate&&this.utils.getFullYear(this.selectedDate)===this.utils.getFullYear(t)},isDisabledYear:function(t){var e=!1;return!(void 0===this.disabledDates||!this.disabledDates)&&(void 0!==this.disabledDates.to&&this.disabledDates.to&&this.utils.getFullYear(t)<this.utils.getFullYear(this.disabledDates.to)&&(e=!0),void 0!==this.disabledDates.from&&this.disabledDates.from&&this.utils.getFullYear(t)>this.utils.getFullYear(this.disabledDates.from)&&(e=!0),"function"==typeof this.disabledDates.customPredictor&&this.disabledDates.customPredictor(t)&&(e=!0),e)}}};var x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.showYearView,expression:"showYearView"}],class:[t.calendarClass,"vdp-datepicker__calendar"],style:t.calendarStyle,on:{mousedown:function(t){t.preventDefault()}}},[t._t("beforeCalendarHeader"),t._v(" "),i("header",[i("span",{staticClass:"prev",class:{disabled:t.isLeftNavDisabled},on:{click:function(e){t.isRtl?t.nextDecade():t.previousDecade()}}},[t._v("<")]),t._v(" "),i("span",[t._v(t._s(t.getPageDecade))]),t._v(" "),i("span",{staticClass:"next",class:{disabled:t.isRightNavDisabled},on:{click:function(e){t.isRtl?t.previousDecade():t.nextDecade()}}},[t._v(">")])]),t._v(" "),t._l(t.years,(function(e){return i("span",{key:e.timestamp,staticClass:"cell year",class:{selected:e.isSelected,disabled:e.isDisabled},on:{click:function(i){return i.stopPropagation(),t.selectYear(e)}}},[t._v(t._s(e.year))])}))],2)};x._withStripped=!0;var b={components:{DateInput:c,PickerDay:p,PickerMonth:y,PickerYear:l({render:x,staticRenderFns:[]},void 0,v,void 0,!1,void 0,void 0,void 0)},props:{value:{validator:function(t){return a.validateDateInput(t)}},name:String,refName:String,id:String,format:{type:[String,Function],default:"dd MMM yyyy"},language:{type:Object,default:function(){return s}},openDate:{validator:function(t){return a.validateDateInput(t)}},dayCellContent:Function,fullMonthName:Boolean,disabledDates:Object,highlighted:Object,placeholder:String,inline:Boolean,calendarClass:[String,Object,Array],inputClass:[String,Object,Array],wrapperClass:[String,Object,Array],mondayFirst:Boolean,clearButton:Boolean,clearButtonIcon:String,calendarButton:Boolean,calendarButtonIcon:String,calendarButtonIconContent:String,bootstrapStyling:Boolean,initialView:String,disabled:Boolean,required:Boolean,typeable:Boolean,useUtc:Boolean,minimumView:{type:String,default:"day"},maximumView:{type:String,default:"year"}},data:function(){var t=this.openDate?new Date(this.openDate):new Date,e=o(this.useUtc);return{pageTimestamp:e.setDate(t,1),selectedDate:null,showDayView:!1,showMonthView:!1,showYearView:!1,calendarHeight:0,resetTypedDate:new Date,utils:e}},watch:{value:function(t){this.setValue(t)},openDate:function(){this.setPageDate()},initialView:function(){this.setInitialView()}},computed:{computedInitialView:function(){return this.initialView?this.initialView:this.minimumView},pageDate:function(){return new Date(this.pageTimestamp)},translation:function(){return this.language},calendarStyle:function(){return{position:this.isInline?"static":void 0}},isOpen:function(){return this.showDayView||this.showMonthView||this.showYearView},isInline:function(){return!!this.inline},isRtl:function(){return!0===this.translation.rtl}},methods:{resetDefaultPageDate:function(){null!==this.selectedDate?this.setPageDate(this.selectedDate):this.setPageDate()},showCalendar:function(){return!this.disabled&&!this.isInline&&(this.isOpen?this.close(!0):void this.setInitialView())},setInitialView:function(){var t=this.computedInitialView;if(!this.allowedToShowView(t))throw new Error("initialView '".concat(this.initialView,"' cannot be rendered based on minimum '").concat(this.minimumView,"' and maximum '").concat(this.maximumView,"'"));switch(t){case"year":this.showYearCalendar();break;case"month":this.showMonthCalendar();break;default:this.showDayCalendar()}},allowedToShowView:function(t){var e=["day","month","year"],i=e.indexOf(this.minimumView),n=e.indexOf(this.maximumView),s=e.indexOf(t);return s>=i&&s<=n},showDayCalendar:function(){return!!this.allowedToShowView("day")&&(this.close(),this.showDayView=!0,!0)},showMonthCalendar:function(){return!!this.allowedToShowView("month")&&(this.close(),this.showMonthView=!0,!0)},showYearCalendar:function(){return!!this.allowedToShowView("year")&&(this.close(),this.showYearView=!0,!0)},setDate:function(t){var e=new Date(t);this.selectedDate=e,this.setPageDate(e),this.$emit("selected",e),this.$emit("input",e)},clearDate:function(){this.selectedDate=null,this.setPageDate(),this.$emit("selected",null),this.$emit("input",null),this.$emit("cleared")},selectDate:function(t){this.setDate(t.timestamp),this.isInline||this.close(!0),this.resetTypedDate=new Date},selectDisabledDate:function(t){this.$emit("selectedDisabled",t)},selectMonth:function(t){var e=new Date(t.timestamp);this.allowedToShowView("day")?(this.setPageDate(e),this.$emit("changedMonth",t),this.showDayCalendar()):this.selectDate(t)},selectYear:function(t){var e=new Date(t.timestamp);this.allowedToShowView("month")?(this.setPageDate(e),this.$emit("changedYear",t),this.showMonthCalendar()):this.selectDate(t)},setValue:function(t){if("string"==typeof t||"number"==typeof t){var e=new Date(t);t=isNaN(e.valueOf())?null:e}if(!t)return this.setPageDate(),void(this.selectedDate=null);this.selectedDate=t,this.setPageDate(t)},setPageDate:function(t){t||(t=this.openDate?new Date(this.openDate):new Date),this.pageTimestamp=this.utils.setDate(new Date(t),1)},handleChangedMonthFromDayPicker:function(t){this.setPageDate(t),this.$emit("changedMonth",t)},setTypedDate:function(t){this.setDate(t.getTime())},close:function(t){this.showDayView=this.showMonthView=this.showYearView=!1,this.isInline||(t&&this.$emit("closed"),document.removeEventListener("click",this.clickOutside,!1))},init:function(){this.value&&this.setValue(this.value),this.isInline&&this.setInitialView()}},mounted:function(){this.init()}},w="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase()),k=document.head||document.getElementsByTagName("head")[0],S={};const C=b;var M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vdp-datepicker",class:[t.wrapperClass,t.isRtl?"rtl":""]},[i("date-input",{attrs:{selectedDate:t.selectedDate,resetTypedDate:t.resetTypedDate,format:t.format,translation:t.translation,inline:t.inline,id:t.id,name:t.name,refName:t.refName,openDate:t.openDate,placeholder:t.placeholder,inputClass:t.inputClass,typeable:t.typeable,clearButton:t.clearButton,clearButtonIcon:t.clearButtonIcon,calendarButton:t.calendarButton,calendarButtonIcon:t.calendarButtonIcon,calendarButtonIconContent:t.calendarButtonIconContent,disabled:t.disabled,required:t.required,bootstrapStyling:t.bootstrapStyling,"use-utc":t.useUtc},on:{showCalendar:t.showCalendar,closeCalendar:t.close,typedDate:t.setTypedDate,clearDate:t.clearDate}},[t._t("afterDateInput",null,{slot:"afterDateInput"})],2),t._v(" "),t.allowedToShowView("day")?i("picker-day",{attrs:{pageDate:t.pageDate,selectedDate:t.selectedDate,showDayView:t.showDayView,fullMonthName:t.fullMonthName,allowedToShowView:t.allowedToShowView,disabledDates:t.disabledDates,highlighted:t.highlighted,calendarClass:t.calendarClass,calendarStyle:t.calendarStyle,translation:t.translation,pageTimestamp:t.pageTimestamp,isRtl:t.isRtl,mondayFirst:t.mondayFirst,dayCellContent:t.dayCellContent,"use-utc":t.useUtc},on:{changedMonth:t.handleChangedMonthFromDayPicker,selectDate:t.selectDate,showMonthCalendar:t.showMonthCalendar,selectedDisabled:t.selectDisabledDate}},[t._t("beforeCalendarHeader",null,{slot:"beforeCalendarHeader"})],2):t._e(),t._v(" "),t.allowedToShowView("month")?i("picker-month",{attrs:{pageDate:t.pageDate,selectedDate:t.selectedDate,showMonthView:t.showMonthView,allowedToShowView:t.allowedToShowView,disabledDates:t.disabledDates,calendarClass:t.calendarClass,calendarStyle:t.calendarStyle,translation:t.translation,isRtl:t.isRtl,"use-utc":t.useUtc},on:{selectMonth:t.selectMonth,showYearCalendar:t.showYearCalendar,changedYear:t.setPageDate}},[t._t("beforeCalendarHeader",null,{slot:"beforeCalendarHeader"})],2):t._e(),t._v(" "),t.allowedToShowView("year")?i("picker-year",{attrs:{pageDate:t.pageDate,selectedDate:t.selectedDate,showYearView:t.showYearView,allowedToShowView:t.allowedToShowView,disabledDates:t.disabledDates,calendarClass:t.calendarClass,calendarStyle:t.calendarStyle,translation:t.translation,isRtl:t.isRtl,"use-utc":t.useUtc},on:{selectYear:t.selectYear,changedDecade:t.setPageDate}},[t._t("beforeCalendarHeader",null,{slot:"beforeCalendarHeader"})],2):t._e()],1)};return M._withStripped=!0,l({render:M,staticRenderFns:[]},(function(t){t&&t("data-v-64ca2bb5_0",{source:".rtl {\n  direction: rtl;\n}\n.vdp-datepicker {\n  position: relative;\n  text-align: left;\n}\n.vdp-datepicker * {\n  box-sizing: border-box;\n}\n.vdp-datepicker__calendar {\n  position: absolute;\n  z-index: 100;\n  background: #fff;\n  width: 300px;\n  border: 1px solid #ccc;\n}\n.vdp-datepicker__calendar header {\n  display: block;\n  line-height: 40px;\n}\n.vdp-datepicker__calendar header span {\n  display: inline-block;\n  text-align: center;\n  width: 71.42857142857143%;\n  float: left;\n}\n.vdp-datepicker__calendar header .prev,\n.vdp-datepicker__calendar header .next {\n  width: 14.285714285714286%;\n  float: left;\n  text-indent: -10000px;\n  position: relative;\n}\n.vdp-datepicker__calendar header .prev:after,\n.vdp-datepicker__calendar header .next:after {\n  content: '';\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%);\n  border: 6px solid transparent;\n}\n.vdp-datepicker__calendar header .prev:after {\n  border-right: 10px solid #000;\n  margin-left: -5px;\n}\n.vdp-datepicker__calendar header .prev.disabled:after {\n  border-right: 10px solid #ddd;\n}\n.vdp-datepicker__calendar header .next:after {\n  border-left: 10px solid #000;\n  margin-left: 5px;\n}\n.vdp-datepicker__calendar header .next.disabled:after {\n  border-left: 10px solid #ddd;\n}\n.vdp-datepicker__calendar header .prev:not(.disabled),\n.vdp-datepicker__calendar header .next:not(.disabled),\n.vdp-datepicker__calendar header .up:not(.disabled) {\n  cursor: pointer;\n}\n.vdp-datepicker__calendar header .prev:not(.disabled):hover,\n.vdp-datepicker__calendar header .next:not(.disabled):hover,\n.vdp-datepicker__calendar header .up:not(.disabled):hover {\n  background: #eee;\n}\n.vdp-datepicker__calendar .disabled {\n  color: #ddd;\n  cursor: default;\n}\n.vdp-datepicker__calendar .flex-rtl {\n  display: flex;\n  width: inherit;\n  flex-wrap: wrap;\n}\n.vdp-datepicker__calendar .cell {\n  display: inline-block;\n  padding: 0 5px;\n  width: 14.285714285714286%;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  vertical-align: middle;\n  border: 1px solid transparent;\n}\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year {\n  cursor: pointer;\n}\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day:hover,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month:hover,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year:hover {\n  border: 1px solid #4bd;\n}\n.vdp-datepicker__calendar .cell.selected {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.selected:hover {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.selected.highlighted {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.highlighted {\n  background: #cae5ed;\n}\n.vdp-datepicker__calendar .cell.highlighted.disabled {\n  color: #a3a3a3;\n}\n.vdp-datepicker__calendar .cell.grey {\n  color: #888;\n}\n.vdp-datepicker__calendar .cell.grey:hover {\n  background: inherit;\n}\n.vdp-datepicker__calendar .cell.day-header {\n  font-size: 75%;\n  white-space: nowrap;\n  cursor: inherit;\n}\n.vdp-datepicker__calendar .cell.day-header:hover {\n  background: inherit;\n}\n.vdp-datepicker__calendar .month,\n.vdp-datepicker__calendar .year {\n  width: 33.333%;\n}\n.vdp-datepicker__clear-button,\n.vdp-datepicker__calendar-button {\n  cursor: pointer;\n  font-style: normal;\n}\n.vdp-datepicker__clear-button.disabled,\n.vdp-datepicker__calendar-button.disabled {\n  color: #999;\n  cursor: default;\n}\n",map:{version:3,sources:["Datepicker.vue"],names:[],mappings:"AAAA;EACE,cAAc;AAChB;AACA;EACE,kBAAkB;EAClB,gBAAgB;AAClB;AACA;EACE,sBAAsB;AACxB;AACA;EACE,kBAAkB;EAClB,YAAY;EACZ,gBAAgB;EAChB,YAAY;EACZ,sBAAsB;AACxB;AACA;EACE,cAAc;EACd,iBAAiB;AACnB;AACA;EACE,qBAAqB;EACrB,kBAAkB;EAClB,yBAAyB;EACzB,WAAW;AACb;AACA;;EAEE,0BAA0B;EAC1B,WAAW;EACX,qBAAqB;EACrB,kBAAkB;AACpB;AACA;;EAEE,WAAW;EACX,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,4CAA4C;EAC5C,6BAA6B;AAC/B;AACA;EACE,6BAA6B;EAC7B,iBAAiB;AACnB;AACA;EACE,6BAA6B;AAC/B;AACA;EACE,4BAA4B;EAC5B,gBAAgB;AAClB;AACA;EACE,4BAA4B;AAC9B;AACA;;;EAGE,eAAe;AACjB;AACA;;;EAGE,gBAAgB;AAClB;AACA;EACE,WAAW;EACX,eAAe;AACjB;AACA;EACE,aAAa;EACb,cAAc;EACd,eAAe;AACjB;AACA;EACE,qBAAqB;EACrB,cAAc;EACd,0BAA0B;EAC1B,YAAY;EACZ,iBAAiB;EACjB,kBAAkB;EAClB,sBAAsB;EACtB,6BAA6B;AAC/B;AACA;;;EAGE,eAAe;AACjB;AACA;;;EAGE,sBAAsB;AACxB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,mBAAmB;AACrB;AACA;EACE,cAAc;AAChB;AACA;EACE,WAAW;AACb;AACA;EACE,mBAAmB;AACrB;AACA;EACE,cAAc;EACd,mBAAmB;EACnB,eAAe;AACjB;AACA;EACE,mBAAmB;AACrB;AACA;;EAEE,cAAc;AAChB;AACA;;EAEE,eAAe;EACf,kBAAkB;AACpB;AACA;;EAEE,WAAW;EACX,eAAe;AACjB",file:"Datepicker.vue",sourcesContent:[".rtl {\n  direction: rtl;\n}\n.vdp-datepicker {\n  position: relative;\n  text-align: left;\n}\n.vdp-datepicker * {\n  box-sizing: border-box;\n}\n.vdp-datepicker__calendar {\n  position: absolute;\n  z-index: 100;\n  background: #fff;\n  width: 300px;\n  border: 1px solid #ccc;\n}\n.vdp-datepicker__calendar header {\n  display: block;\n  line-height: 40px;\n}\n.vdp-datepicker__calendar header span {\n  display: inline-block;\n  text-align: center;\n  width: 71.42857142857143%;\n  float: left;\n}\n.vdp-datepicker__calendar header .prev,\n.vdp-datepicker__calendar header .next {\n  width: 14.285714285714286%;\n  float: left;\n  text-indent: -10000px;\n  position: relative;\n}\n.vdp-datepicker__calendar header .prev:after,\n.vdp-datepicker__calendar header .next:after {\n  content: '';\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%);\n  border: 6px solid transparent;\n}\n.vdp-datepicker__calendar header .prev:after {\n  border-right: 10px solid #000;\n  margin-left: -5px;\n}\n.vdp-datepicker__calendar header .prev.disabled:after {\n  border-right: 10px solid #ddd;\n}\n.vdp-datepicker__calendar header .next:after {\n  border-left: 10px solid #000;\n  margin-left: 5px;\n}\n.vdp-datepicker__calendar header .next.disabled:after {\n  border-left: 10px solid #ddd;\n}\n.vdp-datepicker__calendar header .prev:not(.disabled),\n.vdp-datepicker__calendar header .next:not(.disabled),\n.vdp-datepicker__calendar header .up:not(.disabled) {\n  cursor: pointer;\n}\n.vdp-datepicker__calendar header .prev:not(.disabled):hover,\n.vdp-datepicker__calendar header .next:not(.disabled):hover,\n.vdp-datepicker__calendar header .up:not(.disabled):hover {\n  background: #eee;\n}\n.vdp-datepicker__calendar .disabled {\n  color: #ddd;\n  cursor: default;\n}\n.vdp-datepicker__calendar .flex-rtl {\n  display: flex;\n  width: inherit;\n  flex-wrap: wrap;\n}\n.vdp-datepicker__calendar .cell {\n  display: inline-block;\n  padding: 0 5px;\n  width: 14.285714285714286%;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  vertical-align: middle;\n  border: 1px solid transparent;\n}\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year {\n  cursor: pointer;\n}\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day:hover,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month:hover,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year:hover {\n  border: 1px solid #4bd;\n}\n.vdp-datepicker__calendar .cell.selected {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.selected:hover {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.selected.highlighted {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.highlighted {\n  background: #cae5ed;\n}\n.vdp-datepicker__calendar .cell.highlighted.disabled {\n  color: #a3a3a3;\n}\n.vdp-datepicker__calendar .cell.grey {\n  color: #888;\n}\n.vdp-datepicker__calendar .cell.grey:hover {\n  background: inherit;\n}\n.vdp-datepicker__calendar .cell.day-header {\n  font-size: 75%;\n  white-space: nowrap;\n  cursor: inherit;\n}\n.vdp-datepicker__calendar .cell.day-header:hover {\n  background: inherit;\n}\n.vdp-datepicker__calendar .month,\n.vdp-datepicker__calendar .year {\n  width: 33.333%;\n}\n.vdp-datepicker__clear-button,\n.vdp-datepicker__calendar-button {\n  cursor: pointer;\n  font-style: normal;\n}\n.vdp-datepicker__clear-button.disabled,\n.vdp-datepicker__calendar-button.disabled {\n  color: #999;\n  cursor: default;\n}\n"]},media:void 0})}),C,void 0,!1,void 0,(function(t){return function(t,e){return function(t,e){var i=w?e.media||"default":t,n=S[i]||(S[i]={ids:new Set,styles:[]});if(!n.ids.has(t)){n.ids.add(t);var s=e.source;if(e.map&&(s+="\n/*# sourceURL="+e.map.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",e.media&&n.element.setAttribute("media",e.media),k.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(s),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{var r=n.ids.size-1,o=document.createTextNode(s),a=n.element.childNodes;a[r]&&n.element.removeChild(a[r]),a.length?n.element.insertBefore(o,a[r]):n.element.appendChild(o)}}}(t,e)}}),void 0)})),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SimpleMDE=t()}}((function(){return function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[o]={exports:{}};e[o][0].call(u.exports,(function(t){var i=e[o][1][t];return s(i||t)}),u,u.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";function n(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function s(t,e,i){for(var s,r=[],o=e;i>o;o+=3)s=(t[o]<<16)+(t[o+1]<<8)+t[o+2],r.push(n(s));return r.join("")}i.toByteArray=function(t){var e,i,n,s,r,l,h=t.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");r="="===t[h-2]?2:"="===t[h-1]?1:0,l=new a(3*h/4-r),n=r>0?h-4:h;var u=0;for(e=0,i=0;n>e;e+=4,i+=3)s=o[t.charCodeAt(e)]<<18|o[t.charCodeAt(e+1)]<<12|o[t.charCodeAt(e+2)]<<6|o[t.charCodeAt(e+3)],l[u++]=s>>16&255,l[u++]=s>>8&255,l[u++]=255&s;return 2===r?(s=o[t.charCodeAt(e)]<<2|o[t.charCodeAt(e+1)]>>4,l[u++]=255&s):1===r&&(s=o[t.charCodeAt(e)]<<10|o[t.charCodeAt(e+1)]<<4|o[t.charCodeAt(e+2)]>>2,l[u++]=s>>8&255,l[u++]=255&s),l},i.fromByteArray=function(t){for(var e,i=t.length,n=i%3,o="",a=[],l=16383,h=0,u=i-n;u>h;h+=l)a.push(s(t,h,h+l>u?u:h+l));return 1===n?(e=t[i-1],o+=r[e>>2],o+=r[e<<4&63],o+="=="):2===n&&(e=(t[i-2]<<8)+t[i-1],o+=r[e>>10],o+=r[e>>4&63],o+=r[e<<2&63],o+="="),a.push(o),a.join("")};var r=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array;!function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;64>e;++e)r[e]=t[e],o[t.charCodeAt(e)]=e;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63}()},{}],2:[function(t,e,i){},{}],3:[function(t,e,i){(function(e){"use strict";function n(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return r.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=r.prototype:(null===t&&(t=new r(e)),t.length=e),t}function r(t,e,i){if(!(r.TYPED_ARRAY_SUPPORT||this instanceof r))return new r(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return o(this,t,e,i)}function o(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,0>i||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n),r.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=r.prototype):t=h(t,e),t}(t,e,i,n):"string"==typeof e?function(t,e,i){if("string"==typeof i&&""!==i||(i="utf8"),!r.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|c(e,i);return t=s(t,n),t.write(e,i),t}(t,e,i):function(t,e){if(r.isBuffer(e)){var i=0|u(e.length);return 0===(t=s(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?s(t,0):h(t,e);if("Buffer"===e.type&&z(e.data))return h(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number')}function l(t,e){if(a(e),t=s(t,0>e?0:0|u(e)),!r.TYPED_ARRAY_SUPPORT)for(var i=0;e>i;i++)t[i]=0;return t}function h(t,e){var i=0|u(e.length);t=s(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function u(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function c(t,e){if(r.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return i;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return R(t).length;default:if(n)return F(t).length;e=(""+e).toLowerCase(),n=!0}}function d(t,e,i){var n=!1;if((void 0===e||0>e)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),0>=i)return"";if((e>>>=0)>=(i>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,i);case"utf8":case"utf-8":return k(this,e,i);case"ascii":return S(this,e,i);case"binary":return C(this,e,i);case"base64":return w(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function f(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function p(t,e,i,n){function s(t,e){return 1===r?t[e]:t.readUInt16BE(e*r)}var r=1,o=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;r=2,o/=2,a/=2,i/=2}for(var l=-1,h=0;o>i+h;h++)if(s(t,i+h)===s(e,-1===l?0:h-l)){if(-1===l&&(l=h),h-l+1===a)return(i+l)*r}else-1!==l&&(h-=h-l),l=-1;return-1}function g(t,e,i,n){i=Number(i)||0;var s=t.length-i;n?(n=Number(n))>s&&(n=s):n=s;var r=e.length;if(r%2!=0)throw new Error("Invalid hex string");n>r/2&&(n=r/2);for(var o=0;n>o;o++){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[i+o]=a}return o}function m(t,e,i,n){return I(F(e,t.length-i),t,i,n)}function y(t,e,i,n){return I(function(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function v(t,e,i,n){return y(t,e,i,n)}function x(t,e,i,n){return I(R(e),t,i,n)}function b(t,e,i,n){return I(function(t,e){for(var i,n,s,r=[],o=0;o<t.length&&!((e-=2)<0);o++)i=t.charCodeAt(o),n=i>>8,s=i%256,r.push(s),r.push(n);return r}(e,t.length-i),t,i,n)}function w(t,e,i){return 0===e&&i===t.length?B.fromByteArray(t):B.fromByteArray(t.slice(e,i))}function k(t,e,i){i=Math.min(t.length,i);for(var n=[],s=e;i>s;){var r,o,a,l,h=t[s],u=null,c=h>239?4:h>223?3:h>191?2:1;if(i>=s+c)switch(c){case 1:128>h&&(u=h);break;case 2:128==(192&(r=t[s+1]))&&((l=(31&h)<<6|63&r)>127&&(u=l));break;case 3:r=t[s+1],o=t[s+2],128==(192&r)&&128==(192&o)&&((l=(15&h)<<12|(63&r)<<6|63&o)>2047&&(55296>l||l>57343)&&(u=l));break;case 4:r=t[s+1],o=t[s+2],a=t[s+3],128==(192&r)&&128==(192&o)&&128==(192&a)&&((l=(15&h)<<18|(63&r)<<12|(63&o)<<6|63&a)>65535&&1114112>l&&(u=l))}null===u?(u=65533,c=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),s+=c}return function(t){var e=t.length;if(H>=e)return String.fromCharCode.apply(String,t);for(var i="",n=0;e>n;)i+=String.fromCharCode.apply(String,t.slice(n,n+=H));return i}(n)}function S(t,e,i){var n="";i=Math.min(t.length,i);for(var s=e;i>s;s++)n+=String.fromCharCode(127&t[s]);return n}function C(t,e,i){var n="";i=Math.min(t.length,i);for(var s=e;i>s;s++)n+=String.fromCharCode(t[s]);return n}function M(t,e,i){var n=t.length;(!e||0>e)&&(e=0),(!i||0>i||i>n)&&(i=n);for(var s="",r=e;i>r;r++)s+=O(t[r]);return s}function T(t,e,i){for(var n=t.slice(e,i),s="",r=0;r<n.length;r+=2)s+=String.fromCharCode(n[r]+256*n[r+1]);return s}function A(t,e,i){if(t%1!=0||0>t)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,i,n,s,o){if(!r.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||o>e)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function N(t,e,i,n){0>e&&(e=65535+e+1);for(var s=0,r=Math.min(t.length-i,2);r>s;s++)t[i+s]=(e&255<<8*(n?s:1-s))>>>8*(n?s:1-s)}function D(t,e,i,n){0>e&&(e=4294967295+e+1);for(var s=0,r=Math.min(t.length-i,4);r>s;s++)t[i+s]=e>>>8*(n?s:3-s)&255}function L(t,e,i,n,s,r){if(i+n>t.length)throw new RangeError("Index out of range");if(0>i)throw new RangeError("Index out of range")}function E(t,e,i,n,s){return s||L(t,0,i,4),j.write(t,e,i,n,23,4),i+4}function _(t,e,i,n,s){return s||L(t,0,i,8),j.write(t,e,i,n,52,8),i+8}function O(t){return 16>t?"0"+t.toString(16):t.toString(16)}function F(t,e){e=e||1/0;for(var i,n=t.length,s=null,r=[],o=0;n>o;o++){if((i=t.charCodeAt(o))>55295&&57344>i){if(!s){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&r.push(239,191,189);continue}s=i;continue}if(56320>i){(e-=3)>-1&&r.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(e-=3)>-1&&r.push(239,191,189);if(s=null,128>i){if((e-=1)<0)break;r.push(i)}else if(2048>i){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(65536>i){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(1114112>i))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function R(t){return B.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function I(t,e,i,n){for(var s=0;n>s&&!(s+i>=e.length||s>=t.length);s++)e[s+i]=t[s];return s}var B=t("base64-js"),j=t("ieee754"),z=t("isarray");i.Buffer=r,i.SlowBuffer=function(t){return+t!=t&&(t=0),r.alloc(+t)},i.INSPECT_MAX_BYTES=50,r.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),i.kMaxLength=n(),r.poolSize=8192,r._augment=function(t){return t.__proto__=r.prototype,t},r.from=function(t,e,i){return o(null,t,e,i)},r.TYPED_ARRAY_SUPPORT&&(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0})),r.alloc=function(t,e,i){return function(t,e,i,n){return a(e),0>=e?s(t,e):void 0!==i?"string"==typeof n?s(t,e).fill(i,n):s(t,e).fill(i):s(t,e)}(null,t,e,i)},r.allocUnsafe=function(t){return l(null,t)},r.allocUnsafeSlow=function(t){return l(null,t)},r.isBuffer=function(t){return!(null==t||!t._isBuffer)},r.compare=function(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,s=0,o=Math.min(i,n);o>s;++s)if(t[s]!==e[s]){i=t[s],n=e[s];break}return n>i?-1:i>n?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return r.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;i++)e+=t[i].length;var n=r.allocUnsafe(e),s=0;for(i=0;i<t.length;i++){var o=t[i];if(!r.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,s),s+=o.length}return n},r.byteLength=c,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;t>e;e+=2)f(this,e,e+1);return this},r.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;t>e;e+=4)f(this,e,e+3),f(this,e+1,e+2);return this},r.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):d.apply(this,arguments)},r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},r.prototype.compare=function(t,e,i,n,s){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),0>e||i>t.length||0>n||s>this.length)throw new RangeError("out of range index");if(n>=s&&e>=i)return 0;if(n>=s)return-1;if(e>=i)return 1;if(this===t)return 0;for(var o=(s>>>=0)-(n>>>=0),a=(i>>>=0)-(e>>>=0),l=Math.min(o,a),h=this.slice(n,s),u=t.slice(e,i),c=0;l>c;++c)if(h[c]!==u[c]){o=h[c],a=u[c];break}return a>o?-1:o>a?1:0},r.prototype.indexOf=function(t,e,i){if("string"==typeof e?(i=e,e=0):e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t&&(t=r.from(t,i)),r.isBuffer(t))return 0===t.length?-1:p(this,t,e,i);if("number"==typeof t)return r.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):p(this,[t],e,i);throw new TypeError("val must be string, number or Buffer")},r.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},r.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var s=this.length-e;if((void 0===i||i>s)&&(i=s),t.length>0&&(0>i||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var r=!1;;)switch(n){case"hex":return g(this,t,e,i);case"utf8":case"utf-8":return m(this,t,e,i);case"ascii":return y(this,t,e,i);case"binary":return v(this,t,e,i);case"base64":return x(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,e,i);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),r=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;r.prototype.slice=function(t,e){var i,n=this.length;if(0>(t=~~t)?0>(t+=n)&&(t=0):t>n&&(t=n),0>(e=void 0===e?n:~~e)?0>(e+=n)&&(e=0):e>n&&(e=n),t>e&&(e=t),r.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=r.prototype;else{var s=e-t;i=new r(s,void 0);for(var o=0;s>o;o++)i[o]=this[o+t]}return i},r.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||A(t,e,this.length);for(var n=this[t],s=1,r=0;++r<e&&(s*=256);)n+=this[t+r]*s;return n},r.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||A(t,e,this.length);for(var n=this[t+--e],s=1;e>0&&(s*=256);)n+=this[t+--e]*s;return n},r.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return e||A(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||A(t,e,this.length);for(var n=this[t],s=1,r=0;++r<e&&(s*=256);)n+=this[t+r]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*e)),n},r.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||A(t,e,this.length);for(var n=e,s=1,r=this[t+--n];n>0&&(s*=256);)r+=this[t+--n]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*e)),r},r.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){e||A(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt16BE=function(t,e){e||A(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),j.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return e||A(t,4,this.length),j.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),j.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return e||A(t,8,this.length),j.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||P(this,t,e,i,Math.pow(2,8*i)-1,0);var s=1,r=0;for(this[e]=255&t;++r<i&&(s*=256);)this[e+r]=t/s&255;return e+i},r.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||P(this,t,e,i,Math.pow(2,8*i)-1,0);var s=i-1,r=1;for(this[e+s]=255&t;--s>=0&&(r*=256);)this[e+s]=t/r&255;return e+i},r.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,1,255,0),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},r.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},r.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},r.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},r.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},r.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var s=Math.pow(2,8*i-1);P(this,t,e,i,s-1,-s)}var r=0,o=1,a=0;for(this[e]=255&t;++r<i&&(o*=256);)0>t&&0===a&&0!==this[e+r-1]&&(a=1),this[e+r]=(t/o|0)-a&255;return e+i},r.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var s=Math.pow(2,8*i-1);P(this,t,e,i,s-1,-s)}var r=i-1,o=1,a=0;for(this[e+r]=255&t;--r>=0&&(o*=256);)0>t&&0===a&&0!==this[e+r+1]&&(a=1),this[e+r]=(t/o|0)-a&255;return e+i},r.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,1,127,-128),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},r.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},r.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},r.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},r.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},r.prototype.writeFloatLE=function(t,e,i){return E(this,t,e,!0,i)},r.prototype.writeFloatBE=function(t,e,i){return E(this,t,e,!1,i)},r.prototype.writeDoubleLE=function(t,e,i){return _(this,t,e,!0,i)},r.prototype.writeDoubleBE=function(t,e,i){return _(this,t,e,!1,i)},r.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&i>n&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var s,o=n-i;if(this===t&&e>i&&n>e)for(s=o-1;s>=0;s--)t[s+e]=this[s+i];else if(1e3>o||!r.TYPED_ARRAY_SUPPORT)for(s=0;o>s;s++)t[s+e]=this[s+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},r.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var s=t.charCodeAt(0);256>s&&(t=s)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!r.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(0>e||this.length<e||this.length<i)throw new RangeError("Out of range index");if(e>=i)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;i>o;o++)this[o]=t;else{var a=r.isBuffer(t)?t:F(new r(t,n).toString()),l=a.length;for(o=0;i-e>o;o++)this[o+e]=a[o%l]}return this};var U=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:15,isarray:16}],4:[function(t,e,i){"use strict";function n(t){return"function"!=typeof(t=t||{}).codeMirrorInstance||"function"!=typeof t.codeMirrorInstance.defineMode?void console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`"):(String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),void t.codeMirrorInstance.defineMode("spell-checker",(function(e){if(!n.aff_loading){n.aff_loading=!0;var i=new XMLHttpRequest;i.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),i.onload=function(){4===i.readyState&&200===i.status&&(n.aff_data=i.responseText,n.num_loaded++,2==n.num_loaded&&(n.typo=new s("en_US",n.aff_data,n.dic_data,{platform:"any"})))},i.send(null)}if(!n.dic_loading){n.dic_loading=!0;var r=new XMLHttpRequest;r.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),r.onload=function(){4===r.readyState&&200===r.status&&(n.dic_data=r.responseText,n.num_loaded++,2==n.num_loaded&&(n.typo=new s("en_US",n.aff_data,n.dic_data,{platform:"any"})))},r.send(null)}var o='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',a={token:function(t){var e=t.peek(),i="";if(o.includes(e))return t.next(),null;for(;null!=(e=t.peek())&&!o.includes(e);)i+=e,t.next();return n.typo&&!n.typo.check(i)?"spell-error":null}},l=t.codeMirrorInstance.getMode(e,e.backdrop||"text/plain");return t.codeMirrorInstance.overlayMode(l,a,!0)})))}var s=t("typo-js");n.num_loaded=0,n.aff_loading=!1,n.dic_loading=!1,n.aff_data="",n.dic_data="",n.typo,e.exports=n},{"typo-js":18}],5:[function(t,e,i){var n;n=function(t){"use strict";t.defineOption("fullScreen",!1,(function(e,i,n){n==t.Init&&(n=!1),!n!=!i&&(i?function(t){var e=t.getWrapperElement();t.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:e.style.width,height:e.style.height},e.style.width="",e.style.height="auto",e.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",t.refresh()}(e):function(t){var e=t.getWrapperElement();e.className=e.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var i=t.state.fullScreenRestore;e.style.width=i.width,e.style.height=i.height,window.scrollTo(i.scrollLeft,i.scrollTop),t.refresh()}(e))}))},n("object"==typeof i&&"object"==typeof e?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],6:[function(t,e,i){var n;n=function(t){function e(t){t.state.placeholder&&(t.state.placeholder.parentNode.removeChild(t.state.placeholder),t.state.placeholder=null)}function i(t){e(t);var i=t.state.placeholder=document.createElement("pre");i.style.cssText="height: 0; overflow: visible",i.className="CodeMirror-placeholder";var n=t.getOption("placeholder");"string"==typeof n&&(n=document.createTextNode(n)),i.appendChild(n),t.display.lineSpace.insertBefore(i,t.display.lineSpace.firstChild)}function n(t){r(t)&&i(t)}function s(t){var n=t.getWrapperElement(),s=r(t);n.className=n.className.replace(" CodeMirror-empty","")+(s?" CodeMirror-empty":""),s?i(t):e(t)}function r(t){return 1===t.lineCount()&&""===t.getLine(0)}t.defineOption("placeholder","",(function(i,r,o){var a=o&&o!=t.Init;if(r&&!a)i.on("blur",n),i.on("change",s),i.on("swapDoc",s),s(i);else if(!r&&a){i.off("blur",n),i.off("change",s),i.off("swapDoc",s),e(i);var l=i.getWrapperElement();l.className=l.className.replace(" CodeMirror-empty","")}r&&!i.hasFocus()&&n(i)}))},n("object"==typeof i&&"object"==typeof e?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],7:[function(t,e,i){var n;n=function(t){"use strict";var e=/^(\s*)(>[> ]*|[*+-]\s|(\d+)([.)]))(\s*)/,i=/^(\s*)(>[> ]*|[*+-]|(\d+)[.)])(\s*)$/,n=/[*+-]\s/;t.commands.newlineAndIndentContinueMarkdownList=function(s){if(s.getOption("disableInput"))return t.Pass;for(var r=s.listSelections(),o=[],a=0;a<r.length;a++){var l=r[a].head,h=s.getStateAfter(l.line),u=!1!==h.list,c=0!==h.quote,d=s.getLine(l.line),f=e.exec(d);if(!r[a].empty()||!u&&!c||!f)return void s.execCommand("newlineAndIndent");if(i.test(d))s.replaceRange("",{line:l.line,ch:0},{line:l.line,ch:l.ch+1}),o[a]="\n";else{var p=f[1],g=f[5],m=n.test(f[2])||f[2].indexOf(">")>=0?f[2]:parseInt(f[3],10)+1+f[4];o[a]="\n"+p+m+g}}s.replaceSelections(o)}},n("object"==typeof i&&"object"==typeof e?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],8:[function(t,e,i){var n;n=function(t){"use strict";t.overlayMode=function(e,i,n){return{startState:function(){return{base:t.startState(e),overlay:t.startState(i),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(n){return{base:t.copyState(e,n.base),overlay:t.copyState(i,n.overlay),basePos:n.basePos,baseCur:null,overlayPos:n.overlayPos,overlayCur:null}},token:function(t,s){return(t!=s.streamSeen||Math.min(s.basePos,s.overlayPos)<t.start)&&(s.streamSeen=t,s.basePos=s.overlayPos=t.start),t.start==s.basePos&&(s.baseCur=e.token(t,s.base),s.basePos=t.pos),t.start==s.overlayPos&&(t.pos=t.start,s.overlayCur=i.token(t,s.overlay),s.overlayPos=t.pos),t.pos=Math.min(s.basePos,s.overlayPos),null==s.overlayCur?s.baseCur:null!=s.baseCur&&s.overlay.combineTokens||n&&null==s.overlay.combineTokens?s.baseCur+" "+s.overlayCur:s.overlayCur},indent:e.indent&&function(t,i){return e.indent(t.base,i)},electricChars:e.electricChars,innerMode:function(t){return{state:t.base,mode:e}},blankLine:function(t){e.blankLine&&e.blankLine(t.base),i.blankLine&&i.blankLine(t.overlay)}}}},n("object"==typeof i&&"object"==typeof e?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],9:[function(t,e,i){var n;n=function(t){"use strict";function e(t){t.operation((function(){!function(t){if(!t.somethingSelected())return s(t);if(t.listSelections().length>1)return r(t);var e=t.getCursor("start"),i=t.getCursor("end"),a=t.state.markedSelection;if(!a.length)return n(t,e,i);var h=a[0].find(),u=a[a.length-1].find();if(!h||!u||i.line-e.line<o||l(e,u.to)>=0||l(i,h.from)<=0)return r(t);for(;l(e,h.from)>0;)a.shift().clear(),h=a[0].find();for(l(e,h.from)<0&&(h.to.line-e.line<o?(a.shift().clear(),n(t,e,h.to,0)):n(t,e,h.from,0));l(i,u.to)<0;)a.pop().clear(),u=a[a.length-1].find();l(i,u.to)>0&&(i.line-u.from.line<o?(a.pop().clear(),n(t,u.from,i)):n(t,u.to,i))}(t)}))}function i(t){t.state.markedSelection.length&&t.operation((function(){s(t)}))}function n(t,e,i,n){if(0!=l(e,i))for(var s=t.state.markedSelection,r=t.state.markedSelectionStyle,h=e.line;;){var u=h==e.line?e:a(h,0),c=h+o,d=c>=i.line,f=d?i:a(c,0),p=t.markText(u,f,{className:r});if(null==n?s.push(p):s.splice(n++,0,p),d)break;h=c}}function s(t){for(var e=t.state.markedSelection,i=0;i<e.length;++i)e[i].clear();e.length=0}function r(t){s(t);for(var e=t.listSelections(),i=0;i<e.length;i++)n(t,e[i].from(),e[i].to())}t.defineOption("styleSelectedText",!1,(function(n,o,a){var l=a&&a!=t.Init;o&&!l?(n.state.markedSelection=[],n.state.markedSelectionStyle="string"==typeof o?o:"CodeMirror-selectedtext",r(n),n.on("cursorActivity",e),n.on("change",i)):!o&&l&&(n.off("cursorActivity",e),n.off("change",i),s(n),n.state.markedSelection=n.state.markedSelectionStyle=null)}));var o=8,a=t.Pos,l=t.cmpPos},n("object"==typeof i&&"object"==typeof e?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],10:[function(t,e,i){!function(t){"object"==typeof i&&"object"==typeof e?e.exports=t():(this||window).CodeMirror=t()}((function(){"use strict";function t(i,n){if(!(this instanceof t))return new t(i,n);this.options=n=n?$n(n):{},$n(nr,n,!1),d(n);var s=n.value;"string"==typeof s&&(s=new Ar(s,n.mode,null,n.lineSeparator)),this.doc=s;var r=new t.inputStyles[n.inputStyle](this),a=this.display=new e(i,s,r);a.wrapper.CodeMirror=this,l(this),o(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!Es&&a.input.focus(),m(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new jn,keySeq:null,specialChars:null};var h=this;for(var u in ks&&11>Ss&&setTimeout((function(){h.display.input.reset(!0)}),20),function(t){function e(){s.activeTouch&&(r=setTimeout((function(){s.activeTouch=null}),1e3),(o=s.activeTouch).end=+new Date)}function i(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}function n(t,e){if(null==e.left)return!0;var i=e.left-t.left,n=e.top-t.top;return i*i+n*n>400}var s=t.display;_r(s.scroller,"mousedown",me(t,De)),_r(s.scroller,"dblclick",ks&&11>Ss?me(t,(function(e){if(!Fn(t,e)){var i=Ne(t,e);if(i&&!Ee(t,e)&&!Pe(t.display,e)){Dr(e);var n=t.findWordAt(i);pt(t.doc,n.anchor,n.head)}}})):function(e){Fn(t,e)||Dr(e)}),Bs||_r(s.scroller,"contextmenu",(function(e){$e(t,e)}));var r,o={end:0};_r(s.scroller,"touchstart",(function(e){if(!Fn(t,e)&&!i(e)){clearTimeout(r);var n=+new Date;s.activeTouch={start:n,moved:!1,prev:n-o.end<=300?o:null},1==e.touches.length&&(s.activeTouch.left=e.touches[0].pageX,s.activeTouch.top=e.touches[0].pageY)}})),_r(s.scroller,"touchmove",(function(){s.activeTouch&&(s.activeTouch.moved=!0)})),_r(s.scroller,"touchend",(function(i){var r=s.activeTouch;if(r&&!Pe(s,i)&&null!=r.left&&!r.moved&&new Date-r.start<300){var o,a=t.coordsChar(s.activeTouch,"page");o=!r.prev||n(r,r.prev)?new ot(a,a):!r.prev.prev||n(r,r.prev.prev)?t.findWordAt(a):new ot(Hs(a.line,0),ut(t.doc,Hs(a.line+1,0))),t.setSelection(o.anchor,o.head),t.focus(),Dr(i)}e()})),_r(s.scroller,"touchcancel",e),_r(s.scroller,"scroll",(function(){s.scroller.clientHeight&&(Fe(t,s.scroller.scrollTop),Re(t,s.scroller.scrollLeft,!0),Rr(t,"scroll",t))})),_r(s.scroller,"mousewheel",(function(e){Ie(t,e)})),_r(s.scroller,"DOMMouseScroll",(function(e){Ie(t,e)})),_r(s.wrapper,"scroll",(function(){s.wrapper.scrollTop=s.wrapper.scrollLeft=0})),s.dragFunctions={enter:function(e){Fn(t,e)||Er(e)},over:function(e){Fn(t,e)||(function(t,e){var i=Ne(t,e);if(i){var n=document.createDocumentFragment();Nt(t,i,n),t.display.dragCursor||(t.display.dragCursor=Jn("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),Qn(t.display.dragCursor,n)}}(t,e),Er(e))},start:function(e){!function(t,e){if(ks&&(!t.state.draggingText||+new Date-Ks<100))return void Er(e);if(!Fn(t,e)&&!Pe(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!Ps)){var i=Jn("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",As&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),e.dataTransfer.setDragImage(i,0,0),As&&i.parentNode.removeChild(i)}}(t,e)},drop:me(t,_e),leave:function(e){Fn(t,e)||Oe(t)}};var a=s.input.getField();_r(a,"keyup",(function(e){Ue.call(t,e)})),_r(a,"keydown",me(t,He)),_r(a,"keypress",me(t,Ve)),_r(a,"focus",Wn(Ye,t)),_r(a,"blur",Wn(qe,t))}(this),io||(function(){var t;_r(window,"resize",(function(){null==t&&(t=setTimeout((function(){t=null,ns(Ae)}),100))})),_r(window,"blur",(function(){ns(qe)}))}(),io=!0),le(this),this.curOp.forceUpdate=!0,hn(this,s),n.autofocus&&!Es||h.hasFocus()?setTimeout(Wn(Ye,this),20):qe(this),sr)sr.hasOwnProperty(u)&&sr[u](this,n[u],rr);w(this),n.finishInit&&n.finishInit(this);for(var c=0;c<hr.length;++c)hr[c](this);he(this),Cs&&n.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function e(t,e,i){var n=this;this.input=i,n.scrollbarFiller=Jn("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=Jn("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=Jn("div",null,"CodeMirror-code"),n.selectionDiv=Jn("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=Jn("div",null,"CodeMirror-cursors"),n.measure=Jn("div",null,"CodeMirror-measure"),n.lineMeasure=Jn("div",null,"CodeMirror-measure"),n.lineSpace=Jn("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=Jn("div",[Jn("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=Jn("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=Jn("div",null,null,"position: absolute; height: "+Br+"px; width: 1px;"),n.gutters=Jn("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=Jn("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=Jn("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),ks&&8>Ss&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),Cs||xs&&Es||(n.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(n.wrapper):t(n.wrapper)),n.viewFrom=n.viewTo=e.first,n.reportedViewFrom=n.reportedViewTo=e.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,i.init(n)}function i(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),n(e)}function n(t){t.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),t.doc.frontier=t.doc.first,Et(t,100),t.state.modeGen++,t.curOp&&we(t)}function s(t){var e=oe(t.display),i=t.options.lineWrapping,n=i&&Math.max(5,t.display.scroller.clientWidth/ae(t.display)-3);return function(s){if(Ii(t.doc,s))return 0;var r=0;if(s.widgets)for(var o=0;o<s.widgets.length;o++)s.widgets[o].height&&(r+=s.widgets[o].height);return i?r+(Math.ceil(s.text.length/n)||1)*e:r+e}}function r(t){var e=t.doc,i=s(t);e.iter((function(t){var e=i(t);e!=t.height&&fn(t,e)}))}function o(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Xt(t)}function a(t){l(t),we(t),setTimeout((function(){b(t)}),20)}function l(t){var e=t.display.gutters,i=t.options.gutters;Zn(e);for(var n=0;n<i.length;++n){var s=i[n],r=e.appendChild(Jn("div",null,"CodeMirror-gutter "+s));"CodeMirror-linenumbers"==s&&(t.display.lineGutter=r,r.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=n?"":"none",h(t)}function h(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px"}function u(t){if(0==t.height)return 0;for(var e,i=t.text.length,n=t;e=Li(n);){n=(s=e.find(0,!0)).from.line,i+=s.from.ch-s.to.ch}for(n=t;e=Ei(n);){var s=e.find(0,!0);i-=n.text.length-s.from.ch,i+=(n=s.to.line).text.length-s.to.ch}return i}function c(t){var e=t.display,i=t.doc;e.maxLine=un(i,i.first),e.maxLineLength=u(e.maxLine),e.maxLineChanged=!0,i.iter((function(t){var i=u(t);i>e.maxLineLength&&(e.maxLineLength=i,e.maxLine=t)}))}function d(t){var e=Un(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function f(t){var e=t.display,i=e.gutters.offsetWidth,n=Math.round(t.doc.height+Rt(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?i:0,docHeight:n,scrollHeight:n+Bt(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:i}}function p(t,e,i){this.cm=i;var n=this.vert=Jn("div",[Jn("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),s=this.horiz=Jn("div",[Jn("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");t(n),t(s),_r(n,"scroll",(function(){n.clientHeight&&e(n.scrollTop,"vertical")})),_r(s,"scroll",(function(){s.clientWidth&&e(s.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,ks&&8>Ss&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function g(){}function m(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&to(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new t.scrollbarModel[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),_r(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,i){"horizontal"==i?Re(e,t):Fe(e,t)}),e),e.display.scrollbars.addClass&&eo(e.display.wrapper,e.display.scrollbars.addClass)}function y(t,e){e||(e=f(t));var i=t.display.barWidth,n=t.display.barHeight;v(t,e);for(var s=0;4>s&&i!=t.display.barWidth||n!=t.display.barHeight;s++)i!=t.display.barWidth&&t.options.lineWrapping&&N(t),v(t,f(t)),i=t.display.barWidth,n=t.display.barHeight}function v(t,e){var i=t.display,n=i.scrollbars.update(e);i.sizer.style.paddingRight=(i.barWidth=n.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=n.bottom)+"px",i.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=n.bottom+"px",i.scrollbarFiller.style.width=n.right+"px"):i.scrollbarFiller.style.display="",n.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n.bottom+"px",i.gutterFiller.style.width=e.gutterWidth+"px"):i.gutterFiller.style.display=""}function x(t,e,i){var n=i&&null!=i.top?Math.max(0,i.top):t.scroller.scrollTop;n=Math.floor(n-Ft(t));var s=i&&null!=i.bottom?i.bottom:n+t.wrapper.clientHeight,r=gn(e,n),o=gn(e,s);if(i&&i.ensure){var a=i.ensure.from.line,l=i.ensure.to.line;r>a?(r=a,o=gn(e,mn(un(e,a))+t.wrapper.clientHeight)):Math.min(l,e.lastLine())>=o&&(r=gn(e,mn(un(e,l))-t.wrapper.clientHeight),o=l)}return{from:r,to:Math.max(o,r+1)}}function b(t){var e=t.display,i=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=S(e)-e.scroller.scrollLeft+t.doc.scrollLeft,s=e.gutters.offsetWidth,r=n+"px",o=0;o<i.length;o++)if(!i[o].hidden){t.options.fixedGutter&&i[o].gutter&&(i[o].gutter.style.left=r);var a=i[o].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=r}t.options.fixedGutter&&(e.gutters.style.left=n+s+"px")}}function w(t){if(!t.options.lineNumbers)return!1;var e=t.doc,i=k(t.options,e.first+e.size-1),n=t.display;if(i.length!=n.lineNumChars){var s=n.measure.appendChild(Jn("div",[Jn("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),r=s.firstChild.offsetWidth,o=s.offsetWidth-r;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(r,n.lineGutter.offsetWidth-o)+1,n.lineNumWidth=n.lineNumInnerWidth+o,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",h(t),!0}return!1}function k(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function S(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function C(t,e,i){var n=t.display;this.viewport=e,this.visible=x(n,t.doc,e),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=jt(t),this.force=i,this.dims=L(t),this.events=[]}function M(t,e){var i=t.display,n=t.doc;if(e.editorIsHidden)return Se(t),!1;if(!e.force&&e.visible.from>=i.viewFrom&&e.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Te(t))return!1;w(t)&&(Se(t),e.dims=L(t));var s=n.first+n.size,r=Math.max(e.visible.from-t.options.viewportMargin,n.first),o=Math.min(s,e.visible.to+t.options.viewportMargin);i.viewFrom<r&&r-i.viewFrom<20&&(r=Math.max(n.first,i.viewFrom)),i.viewTo>o&&i.viewTo-o<20&&(o=Math.min(s,i.viewTo)),zs&&(r=Fi(t.doc,r),o=Ri(t.doc,o));var a=r!=i.viewFrom||o!=i.viewTo||i.lastWrapHeight!=e.wrapperHeight||i.lastWrapWidth!=e.wrapperWidth;(function(t,e,i){var n=t.display,s=n.view;0==s.length||e>=n.viewTo||i<=n.viewFrom?(n.view=be(t,e,i),n.viewFrom=e):(n.viewFrom>e?n.view=be(t,e,n.viewFrom).concat(n.view):n.viewFrom<e&&(n.view=n.view.slice(Ce(t,e))),n.viewFrom=e,n.viewTo<i?n.view=n.view.concat(be(t,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,Ce(t,i)))),n.viewTo=i})(t,r,o),i.viewOffset=mn(un(t.doc,i.viewFrom)),t.display.mover.style.top=i.viewOffset+"px";var l=Te(t);if(!a&&0==l&&!e.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var h=ts();return l>4&&(i.lineDiv.style.display="none"),function(t,e,i){function n(e){var i=e.nextSibling;return Cs&&_s&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),i}for(var s=t.display,r=t.options.lineNumbers,o=s.lineDiv,a=o.firstChild,l=s.view,h=s.viewFrom,u=0;u<l.length;u++){var c=l[u];if(c.hidden);else if(c.node&&c.node.parentNode==o){for(;a!=c.node;)a=n(a);var d=r&&null!=e&&h>=e&&c.lineNumber;c.changes&&(Un(c.changes,"gutter")>-1&&(d=!1),E(t,c,h,i)),d&&(Zn(c.lineNumber),c.lineNumber.appendChild(document.createTextNode(k(t.options,h)))),a=c.node.nextSibling}else{var f=j(t,c,h,i);o.insertBefore(f,a)}h+=c.size}for(;a;)a=n(a)}(t,i.updateLineNumbers,e.dims),l>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,h&&ts()!=h&&h.offsetHeight&&h.focus(),Zn(i.cursorDiv),Zn(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,a&&(i.lastWrapHeight=e.wrapperHeight,i.lastWrapWidth=e.wrapperWidth,Et(t,400)),i.updateLineNumbers=null,!0}function T(t,e){for(var i=e.viewport,n=!0;(n&&t.options.lineWrapping&&e.oldDisplayWidth!=jt(t)||(i&&null!=i.top&&(i={top:Math.min(t.doc.height+Rt(t.display)-zt(t),i.top)}),e.visible=x(t.display,t.doc,i),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&M(t,e);n=!1){N(t);var s=f(t);At(t),y(t,s),P(t,s)}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function A(t,e){var i=new C(t,e);if(M(t,i)){N(t),T(t,i);var n=f(t);At(t),y(t,n),P(t,n),i.finish()}}function P(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Bt(t)+"px"}function N(t){for(var e=t.display,i=e.lineDiv.offsetTop,n=0;n<e.view.length;n++){var s,r=e.view[n];if(!r.hidden){if(ks&&8>Ss){var o=r.node.offsetTop+r.node.offsetHeight;s=o-i,i=o}else{var a=r.node.getBoundingClientRect();s=a.bottom-a.top}var l=r.line.height-s;if(2>s&&(s=oe(e)),(l>.001||-.001>l)&&(fn(r.line,s),D(r.line),r.rest))for(var h=0;h<r.rest.length;h++)D(r.rest[h])}}}function D(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e)t.widgets[e].height=t.widgets[e].node.parentNode.offsetHeight}function L(t){for(var e=t.display,i={},n={},s=e.gutters.clientLeft,r=e.gutters.firstChild,o=0;r;r=r.nextSibling,++o)i[t.options.gutters[o]]=r.offsetLeft+r.clientLeft+s,n[t.options.gutters[o]]=r.clientWidth;return{fixedPos:S(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}function E(t,e,i,n){for(var s=0;s<e.changes.length;s++){var r=e.changes[s];"text"==r?F(t,e):"gutter"==r?I(t,e,i,n):"class"==r?R(e):"widget"==r&&B(t,e,n)}e.changes=null}function _(t){return t.node==t.text&&(t.node=Jn("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),ks&&8>Ss&&(t.node.style.zIndex=2)),t.node}function O(t,e){var i=t.display.externalMeasured;return i&&i.line==e.line?(t.display.externalMeasured=null,e.measure=i.measure,i.built):Ji(t,e)}function F(t,e){var i=e.text.className,n=O(t,e);e.text==e.node&&(e.node=n.pre),e.text.parentNode.replaceChild(n.pre,e.text),e.text=n.pre,n.bgClass!=e.bgClass||n.textClass!=e.textClass?(e.bgClass=n.bgClass,e.textClass=n.textClass,R(e)):i&&(e.text.className=i)}function R(t){(function(t){var e=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),t.background)e?t.background.className=e:(t.background.parentNode.removeChild(t.background),t.background=null);else if(e){var i=_(t);t.background=i.insertBefore(Jn("div",null,e),i.firstChild)}})(t),t.line.wrapClass?_(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var e=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=e||""}function I(t,e,i,n){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var s=_(e);e.gutterBackground=Jn("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),s.insertBefore(e.gutterBackground,e.text)}var r=e.line.gutterMarkers;if(t.options.lineNumbers||r){s=_(e);var o=e.gutter=Jn("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(t.display.input.setUneditable(o),s.insertBefore(o,e.text),e.line.gutterClass&&(o.className+=" "+e.line.gutterClass),!t.options.lineNumbers||r&&r["CodeMirror-linenumbers"]||(e.lineNumber=o.appendChild(Jn("div",k(t.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),r)for(var a=0;a<t.options.gutters.length;++a){var l=t.options.gutters[a],h=r.hasOwnProperty(l)&&r[l];h&&o.appendChild(Jn("div",[h],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function B(t,e,i){e.alignable&&(e.alignable=null);for(var n=e.node.firstChild;n;n=s){var s=n.nextSibling;"CodeMirror-linewidget"==n.className&&e.node.removeChild(n)}z(t,e,i)}function j(t,e,i,n){var s=O(t,e);return e.text=e.node=s.pre,s.bgClass&&(e.bgClass=s.bgClass),s.textClass&&(e.textClass=s.textClass),R(e),I(t,e,i,n),z(t,e,n),e.node}function z(t,e,i){if(H(t,e.line,e,i,!0),e.rest)for(var n=0;n<e.rest.length;n++)H(t,e.rest[n],e,i,!1)}function H(t,e,i,n,s){if(e.widgets)for(var r=_(i),o=0,a=e.widgets;o<a.length;++o){var l=a[o],h=Jn("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||h.setAttribute("cm-ignore-events","true"),U(l,h,i,n),t.display.input.setUneditable(h),s&&l.above?r.insertBefore(h,i.gutter||i.text):r.appendChild(h),_n(l,"redraw")}}function U(t,e,i,n){if(t.noHScroll){(i.alignable||(i.alignable=[])).push(e);var s=n.wrapperWidth;e.style.left=n.fixedPos+"px",t.coverGutter||(s-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=s+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function V(t){return Hs(t.line,t.ch)}function Y(t,e){return Us(t,e)<0?e:t}function q(t,e){return Us(t,e)<0?t:e}function $(t){t.state.focused||(t.display.input.focus(),Ye(t))}function W(t,e,i,n,s){var r=t.doc;t.display.shift=!1,n||(n=r.sel);var o=t.state.pasteIncoming||"paste"==s,a=r.splitLines(e),l=null;if(o&&n.ranges.length>1)if(Vs&&Vs.text.join("\n")==e){if(n.ranges.length%Vs.text.length==0){l=[];for(var h=0;h<Vs.text.length;h++)l.push(r.splitLines(Vs.text[h]))}}else a.length==n.ranges.length&&(l=Vn(a,(function(t){return[t]})));for(h=n.ranges.length-1;h>=0;h--){var u=n.ranges[h],c=u.from(),d=u.to();u.empty()&&(i&&i>0?c=Hs(c.line,c.ch-i):t.state.overwrite&&!o?d=Hs(d.line,Math.min(un(r,d.line).text.length,d.ch+Hn(a).length)):Vs&&Vs.lineWise&&Vs.text.join("\n")==e&&(c=d=Hs(c.line,0)));var f=t.curOp.updateInput,p={from:c,to:d,text:l?l[h%l.length]:a,origin:s||(o?"paste":t.state.cutIncoming?"cut":"+input")};Je(t.doc,p),_n(t,"inputRead",t,p)}e&&!o&&X(t,e),oi(t),t.curOp.updateInput=f,t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=!1}function G(t,e){var i=t.clipboardData&&t.clipboardData.getData("text/plain");return i?(t.preventDefault(),e.isReadOnly()||e.options.disableInput||ge(e,(function(){W(e,i,0,null,"paste")})),!0):void 0}function X(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var i=t.doc.sel,n=i.ranges.length-1;n>=0;n--){var s=i.ranges[n];if(!(s.head.ch>100||n&&i.ranges[n-1].head.line==s.head.line)){var r=t.getModeAt(s.head),o=!1;if(r.electricChars){for(var a=0;a<r.electricChars.length;a++)if(e.indexOf(r.electricChars.charAt(a))>-1){o=li(t,s.head.line,"smart");break}}else r.electricInput&&r.electricInput.test(un(t.doc,s.head.line).text.slice(0,s.head.ch))&&(o=li(t,s.head.line,"smart"));o&&_n(t,"electricInput",t,s.head.line)}}}function K(t){for(var e=[],i=[],n=0;n<t.doc.sel.ranges.length;n++){var s=t.doc.sel.ranges[n].head.line,r={anchor:Hs(s,0),head:Hs(s+1,0)};i.push(r),e.push(t.getRange(r.anchor,r.head))}return{text:e,ranges:i}}function J(t){t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","off"),t.setAttribute("spellcheck","false")}function Z(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new jn,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function Q(){var t=Jn("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),e=Jn("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Cs?t.style.width="1000px":t.setAttribute("wrap","off"),Ls&&(t.style.border="1px solid black"),J(t),e}function tt(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new jn,this.gracePeriod=!1}function et(t,e){var i=Vt(t,e.line);if(!i||i.hidden)return null;var n=un(t.doc,e.line),s=Ht(i,n,e.line),r=yn(n),o="left";r&&(o=fs(r,e.ch)%2?"right":"left");var a=$t(s.map,e.ch,o);return a.offset="right"==a.collapse?a.end:a.start,a}function it(t,e){return e&&(t.bad=!0),t}function nt(t,e,i){var n;if(e==t.display.lineDiv){if(!(n=t.display.lineDiv.childNodes[i]))return it(t.clipPos(Hs(t.display.viewTo-1)),!0);e=null,i=0}else for(n=e;;n=n.parentNode){if(!n||n==t.display.lineDiv)return null;if(n.parentNode&&n.parentNode==t.display.lineDiv)break}for(var s=0;s<t.display.view.length;s++){var r=t.display.view[s];if(r.node==n)return st(r,e,i)}}function st(t,e,i){function n(e,i,n){for(var s=-1;s<(u?u.length:0);s++)for(var r=0>s?h.map:u[s],o=0;o<r.length;o+=3){var a=r[o+2];if(a==e||a==i){var l=pn(0>s?t.line:t.rest[s]),c=r[o]+n;return(0>n||a!=e)&&(c=r[o+(n?1:0)]),Hs(l,c)}}}var s=t.text.firstChild,r=!1;if(!e||!Jr(s,e))return it(Hs(pn(t.line),0),!0);if(e==s&&(r=!0,e=s.childNodes[i],i=0,!e)){var o=t.rest?Hn(t.rest):t.line;return it(Hs(pn(o),o.text.length),r)}var a=3==e.nodeType?e:null,l=e;for(a||1!=e.childNodes.length||3!=e.firstChild.nodeType||(a=e.firstChild,i&&(i=a.nodeValue.length));l.parentNode!=s;)l=l.parentNode;var h=t.measure,u=h.maps,c=n(a,l,i);if(c)return it(c,r);for(var d=l.nextSibling,f=a?a.nodeValue.length-i:0;d;d=d.nextSibling){if(c=n(d,d.firstChild,0))return it(Hs(c.line,c.ch-f),r);f+=d.textContent.length}var p=l.previousSibling;for(f=i;p;p=p.previousSibling){if(c=n(p,p.firstChild,-1))return it(Hs(c.line,c.ch+f),r);f+=d.textContent.length}}function rt(t,e){this.ranges=t,this.primIndex=e}function ot(t,e){this.anchor=t,this.head=e}function at(t,e){var i=t[e];t.sort((function(t,e){return Us(t.from(),e.from())})),e=Un(t,i);for(var n=1;n<t.length;n++){var s=t[n],r=t[n-1];if(Us(r.to(),s.from())>=0){var o=q(r.from(),s.from()),a=Y(r.to(),s.to()),l=r.empty()?s.from()==s.head:r.from()==r.head;e>=n&&--e,t.splice(--n,2,new ot(l?a:o,l?o:a))}}return new rt(t,e)}function lt(t,e){return new rt([new ot(t,e||t)],0)}function ht(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function ut(t,e){if(e.line<t.first)return Hs(t.first,0);var i=t.first+t.size-1;return e.line>i?Hs(i,un(t,i).text.length):function(t,e){var i=t.ch;return null==i||i>e?Hs(t.line,e):0>i?Hs(t.line,0):t}(e,un(t,e.line).text.length)}function ct(t,e){return e>=t.first&&e<t.first+t.size}function dt(t,e){for(var i=[],n=0;n<e.length;n++)i[n]=ut(t,e[n]);return i}function ft(t,e,i,n){if(t.cm&&t.cm.display.shift||t.extend){var s=e.anchor;if(n){var r=Us(i,s)<0;r!=Us(n,s)<0?(s=i,i=n):r!=Us(i,n)<0&&(i=n)}return new ot(s,i)}return new ot(n||i,i)}function pt(t,e,i,n){xt(t,new rt([ft(t,t.sel.primary(),e,i)],0),n)}function gt(t,e,i){for(var n=[],s=0;s<t.sel.ranges.length;s++)n[s]=ft(t,t.sel.ranges[s],e[s],null);xt(t,at(n,t.sel.primIndex),i)}function mt(t,e,i,n){var s=t.sel.ranges.slice(0);s[e]=i,xt(t,at(s,t.sel.primIndex),n)}function yt(t,e,i,n){xt(t,lt(e,i),n)}function vt(t,e,i){var n=t.history.done,s=Hn(n);s&&s.ranges?(n[n.length-1]=e,bt(t,e,i)):xt(t,e,i)}function xt(t,e,i){bt(t,e,i),function(t,e,i,n){var s=t.history,r=n&&n.origin;i==s.lastSelOp||r&&s.lastSelOrigin==r&&(s.lastModTime==s.lastSelTime&&s.lastOrigin==r||function(t,e,i,n){var s=e.charAt(0);return"*"==s||"+"==s&&i.ranges.length==n.ranges.length&&i.somethingSelected()==n.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,r,Hn(s.done),e))?s.done[s.done.length-1]=e:kn(e,s.done),s.lastSelTime=+new Date,s.lastSelOrigin=r,s.lastSelOp=i,n&&!1!==n.clearRedo&&bn(s.undone)}(t,t.sel,t.cm?t.cm.curOp.id:NaN,i)}function bt(t,e,i){(In(t,"beforeSelectionChange")||t.cm&&In(t.cm,"beforeSelectionChange"))&&(e=function(t,e,i){var n={ranges:e.ranges,update:function(e){this.ranges=[];for(var i=0;i<e.length;i++)this.ranges[i]=new ot(ut(t,e[i].anchor),ut(t,e[i].head))},origin:i&&i.origin};return Rr(t,"beforeSelectionChange",t,n),t.cm&&Rr(t.cm,"beforeSelectionChange",t.cm,n),n.ranges!=e.ranges?at(n.ranges,n.ranges.length-1):e}(t,e,i));var n=i&&i.bias||(Us(e.primary().head,t.sel.primary().head)<0?-1:1);wt(t,St(t,e,n,!0)),i&&!1===i.scroll||!t.cm||oi(t.cm)}function wt(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,Rn(t.cm)),_n(t,"cursorActivity",t))}function kt(t){wt(t,St(t,t.sel,null,!1))}function St(t,e,i,n){for(var s,r=0;r<e.ranges.length;r++){var o=e.ranges[r],a=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[r],l=Mt(t,o.anchor,a&&a.anchor,i,n),h=Mt(t,o.head,a&&a.head,i,n);(s||l!=o.anchor||h!=o.head)&&(s||(s=e.ranges.slice(0,r)),s[r]=new ot(l,h))}return s?at(s,e.primIndex):e}function Ct(t,e,i,n,s){var r=un(t,e.line);if(r.markedSpans)for(var o=0;o<r.markedSpans.length;++o){var a=r.markedSpans[o],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=e.ch:a.from<e.ch))&&(null==a.to||(l.inclusiveRight?a.to>=e.ch:a.to>e.ch))){if(s&&(Rr(l,"beforeCursorEnter"),l.explicitlyCleared)){if(r.markedSpans){--o;continue}break}if(!l.atomic)continue;if(i){var h,u=l.find(0>n?1:-1);if((0>n?l.inclusiveRight:l.inclusiveLeft)&&(u=Tt(t,u,-n,u&&u.line==e.line?r:null)),u&&u.line==e.line&&(h=Us(u,i))&&(0>n?0>h:h>0))return Ct(t,u,e,n,s)}var c=l.find(0>n?-1:1);return(0>n?l.inclusiveLeft:l.inclusiveRight)&&(c=Tt(t,c,n,c.line==e.line?r:null)),c?Ct(t,c,e,n,s):null}}return e}function Mt(t,e,i,n,s){var r=n||1,o=Ct(t,e,i,r,s)||!s&&Ct(t,e,i,r,!0)||Ct(t,e,i,-r,s)||!s&&Ct(t,e,i,-r,!0);return o||(t.cantEdit=!0,Hs(t.first,0))}function Tt(t,e,i,n){return 0>i&&0==e.ch?e.line>t.first?ut(t,Hs(e.line-1)):null:i>0&&e.ch==(n||un(t,e.line)).text.length?e.line<t.first+t.size-1?Hs(e.line+1,0):null:new Hs(e.line,e.ch+i)}function At(t){t.display.input.showSelection(t.display.input.prepareSelection())}function Pt(t,e){for(var i=t.doc,n={},s=n.cursors=document.createDocumentFragment(),r=n.selection=document.createDocumentFragment(),o=0;o<i.sel.ranges.length;o++)if(!1!==e||o!=i.sel.primIndex){var a=i.sel.ranges[o];if(!(a.from().line>=t.display.viewTo||a.to().line<t.display.viewFrom)){var l=a.empty();(l||t.options.showCursorWhenSelecting)&&Nt(t,a.head,s),l||Dt(t,a,r)}}return n}function Nt(t,e,i){var n=ee(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),s=i.appendChild(Jn("div","Â ","CodeMirror-cursor"));if(s.style.left=n.left+"px",s.style.top=n.top+"px",s.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",n.other){var r=i.appendChild(Jn("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"));r.style.display="",r.style.left=n.other.left+"px",r.style.top=n.other.top+"px",r.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function Dt(t,e,i){function n(t,e,i,n){0>e&&(e=0),e=Math.round(e),n=Math.round(n),a.appendChild(Jn("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==i?u-t:i)+"px; height: "+(n-e)+"px"))}function s(e,i,s){function r(i,n){return te(t,Hs(e,i),"div",c,n)}var a,l,c=un(o,e),d=c.text.length;return function(t,e,i,n){if(!t)return n(e,i,"ltr");for(var s=!1,r=0;r<t.length;++r){var o=t[r];(o.from<i&&o.to>e||e==i&&o.to==e)&&(n(Math.max(o.from,e),Math.min(o.to,i),1==o.level?"rtl":"ltr"),s=!0)}s||n(e,i,"ltr")}(yn(c),i||0,null==s?d:s,(function(t,e,o){var c,f,p,g=r(t,"left");if(t==e)c=g,f=p=g.left;else{if(c=r(e-1,"right"),"rtl"==o){var m=g;g=c,c=m}f=g.left,p=c.right}null==i&&0==t&&(f=h),c.top-g.top>3&&(n(f,g.top,null,g.bottom),f=h,g.bottom<c.top&&n(f,g.bottom,null,c.top)),null==s&&e==d&&(p=u),(!a||g.top<a.top||g.top==a.top&&g.left<a.left)&&(a=g),(!l||c.bottom>l.bottom||c.bottom==l.bottom&&c.right>l.right)&&(l=c),h+1>f&&(f=h),n(f,c.top,p-f,c.bottom)})),{start:a,end:l}}var r=t.display,o=t.doc,a=document.createDocumentFragment(),l=It(t.display),h=l.left,u=Math.max(r.sizerWidth,jt(t)-r.sizer.offsetLeft)-l.right,c=e.from(),d=e.to();if(c.line==d.line)s(c.line,c.ch,d.ch);else{var f=un(o,c.line),p=un(o,d.line),g=Oi(f)==Oi(p),m=s(c.line,c.ch,g?f.text.length+1:null).end,y=s(d.line,g?0:null,d.ch).start;g&&(m.top<y.top-2?(n(m.right,m.top,null,m.bottom),n(h,y.top,y.left,y.bottom)):n(m.right,m.top,y.left-m.right,m.bottom)),m.bottom<y.top&&n(h,m.bottom,null,y.top)}i.appendChild(a)}function Lt(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var i=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval((function(){e.cursorDiv.style.visibility=(i=!i)?"":"hidden"}),t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function Et(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.viewTo&&t.state.highlight.set(e,Wn(_t,t))}function _t(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.viewTo)){var i=+new Date+t.options.workTime,n=cr(e.mode,Ot(t,e.frontier)),s=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.viewTo+500),(function(r){if(e.frontier>=t.display.viewFrom){var o=r.styles,a=r.text.length>t.options.maxHighlightLength,l=Wi(t,r,a?cr(e.mode,n):n,!0);r.styles=l.styles;var h=r.styleClasses,u=l.classes;u?r.styleClasses=u:h&&(r.styleClasses=null);for(var c=!o||o.length!=r.styles.length||h!=u&&(!h||!u||h.bgClass!=u.bgClass||h.textClass!=u.textClass),d=0;!c&&d<o.length;++d)c=o[d]!=r.styles[d];c&&s.push(e.frontier),r.stateAfter=a?n:cr(e.mode,n)}else r.text.length<=t.options.maxHighlightLength&&Xi(t,r.text,n),r.stateAfter=e.frontier%5==0?cr(e.mode,n):null;return++e.frontier,+new Date>i?(Et(t,t.options.workDelay),!0):void 0})),s.length&&ge(t,(function(){for(var e=0;e<s.length;e++)ke(t,s[e],"text")}))}}function Ot(t,e,i){var n=t.doc,s=t.display;if(!n.mode.startState)return!0;var r=function(t,e,i){for(var n,s,r=t.doc,o=i?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>o;--a){if(a<=r.first)return r.first;var l=un(r,a-1);if(l.stateAfter&&(!i||a<=r.frontier))return a;var h=Vr(l.text,null,t.options.tabSize);(null==s||n>h)&&(s=a-1,n=h)}return s}(t,e,i),o=r>n.first&&un(n,r-1).stateAfter;return o=o?cr(n.mode,o):dr(n.mode),n.iter(r,e,(function(i){Xi(t,i.text,o);var a=r==e-1||r%5==0||r>=s.viewFrom&&r<s.viewTo;i.stateAfter=a?cr(n.mode,o):null,++r})),i&&(n.frontier=r),o}function Ft(t){return t.lineSpace.offsetTop}function Rt(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function It(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=Qn(t.measure,Jn("pre","x")),i=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(t.cachedPaddingH=n),n}function Bt(t){return Br-t.display.nativeBarWidth}function jt(t){return t.display.scroller.clientWidth-Bt(t)-t.display.barWidth}function zt(t){return t.display.scroller.clientHeight-Bt(t)-t.display.barHeight}function Ht(t,e,i){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var n=0;n<t.rest.length;n++)if(t.rest[n]==e)return{map:t.measure.maps[n],cache:t.measure.caches[n]};for(n=0;n<t.rest.length;n++)if(pn(t.rest[n])>i)return{map:t.measure.maps[n],cache:t.measure.caches[n],before:!0}}function Ut(t,e,i,n){return qt(t,Yt(t,e),i,n)}function Vt(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[Ce(t,e)];var i=t.display.externalMeasured;return i&&e>=i.lineN&&e<i.lineN+i.size?i:void 0}function Yt(t,e){var i=pn(e),n=Vt(t,i);n&&!n.text?n=null:n&&n.changes&&(E(t,n,i,L(t)),t.curOp.forceUpdate=!0),n||(n=function(t,e){var i=pn(e=Oi(e)),n=t.display.externalMeasured=new xe(t.doc,e,i);n.lineN=i;var s=n.built=Ji(t,n);return n.text=s.pre,Qn(t.display.lineMeasure,s.pre),n}(t,e));var s=Ht(n,e,i);return{line:e,view:n,rect:null,map:s.map,cache:s.cache,before:s.before,hasHeights:!1}}function qt(t,e,i,n,s){e.before&&(i=-1);var r,o=i+(n||"");return e.cache.hasOwnProperty(o)?r=e.cache[o]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(function(t,e,i){var n=t.options.lineWrapping,s=n&&jt(t);if(!e.measure.heights||n&&e.measure.width!=s){var r=e.measure.heights=[];if(n){e.measure.width=s;for(var o=e.text.firstChild.getClientRects(),a=0;a<o.length-1;a++){var l=o[a],h=o[a+1];Math.abs(l.bottom-h.bottom)>2&&r.push((l.bottom+h.top)/2-i.top)}}r.push(i.bottom-i.top)}}(t,e.view,e.rect),e.hasHeights=!0),r=function(t,e,i,n){var s,r=$t(e.map,i,n),o=r.node,a=r.start,l=r.end,h=r.collapse;if(3==o.nodeType){for(var u=0;4>u;u++){for(;a&&Kn(e.line.text.charAt(r.coverStart+a));)--a;for(;r.coverStart+l<r.coverEnd&&Kn(e.line.text.charAt(r.coverStart+l));)++l;if(ks&&9>Ss&&0==a&&l==r.coverEnd-r.coverStart)s=o.parentNode.getBoundingClientRect();else if(ks&&t.options.lineWrapping){s=(c=Wr(o,a,l).getClientRects()).length?c["right"==n?c.length-1:0]:Ws}else s=Wr(o,a,l).getBoundingClientRect()||Ws;if(s.left||s.right||0==a)break;l=a,a-=1,h="right"}ks&&11>Ss&&(s=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=ao)return ao;var e=Qn(t,Jn("span","x")),i=e.getBoundingClientRect(),n=Wr(e,0,1).getBoundingClientRect();return ao=Math.abs(i.left-n.left)>1}(t))return e;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*i,right:e.right*i,top:e.top*n,bottom:e.bottom*n}}(t.display.measure,s))}else{var c;a>0&&(h=n="right"),s=t.options.lineWrapping&&(c=o.getClientRects()).length>1?c["right"==n?c.length-1:0]:o.getBoundingClientRect()}if(ks&&9>Ss&&!a&&(!s||!s.left&&!s.right)){var d=o.parentNode.getClientRects()[0];s=d?{left:d.left,right:d.left+ae(t.display),top:d.top,bottom:d.bottom}:Ws}var f=s.top-e.rect.top,p=s.bottom-e.rect.top,g=(f+p)/2,m=e.view.measure.heights;for(u=0;u<m.length-1&&!(g<m[u]);u++);var y=u?m[u-1]:0,v=m[u],x={left:("right"==h?s.right:s.left)-e.rect.left,right:("left"==h?s.left:s.right)-e.rect.left,top:y,bottom:v};return s.left||s.right||(x.bogus=!0),t.options.singleCursorHeightPerLine||(x.rtop=f,x.rbottom=p),x}(t,e,i,n),r.bogus||(e.cache[o]=r)),{left:r.left,right:r.right,top:s?r.rtop:r.top,bottom:s?r.rbottom:r.bottom}}function $t(t,e,i){for(var n,s,r,o,a=0;a<t.length;a+=3){var l=t[a],h=t[a+1];if(l>e?(s=0,r=1,o="left"):h>e?r=(s=e-l)+1:(a==t.length-3||e==h&&t[a+3]>e)&&(s=(r=h-l)-1,e>=h&&(o="right")),null!=s){if(n=t[a+2],l==h&&i==(n.insertLeft?"left":"right")&&(o=i),"left"==i&&0==s)for(;a&&t[a-2]==t[a-3]&&t[a-1].insertLeft;)n=t[2+(a-=3)],o="left";if("right"==i&&s==h-l)for(;a<t.length-3&&t[a+3]==t[a+4]&&!t[a+5].insertLeft;)n=t[(a+=3)+2],o="right";break}}return{node:n,start:s,end:r,collapse:o,coverStart:l,coverEnd:h}}function Wt(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Gt(t){t.display.externalMeasure=null,Zn(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Wt(t.display.view[e])}function Xt(t){Gt(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Kt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Jt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Zt(t,e,i,n){if(e.widgets)for(var s=0;s<e.widgets.length;++s)if(e.widgets[s].above){var r=zi(e.widgets[s]);i.top+=r,i.bottom+=r}if("line"==n)return i;n||(n="local");var o=mn(e);if("local"==n?o+=Ft(t.display):o-=t.display.viewOffset,"page"==n||"window"==n){var a=t.display.lineSpace.getBoundingClientRect();o+=a.top+("window"==n?0:Jt());var l=a.left+("window"==n?0:Kt());i.left+=l,i.right+=l}return i.top+=o,i.bottom+=o,i}function Qt(t,e,i){if("div"==i)return e;var n=e.left,s=e.top;if("page"==i)n-=Kt(),s-=Jt();else if("local"==i||!i){var r=t.display.sizer.getBoundingClientRect();n+=r.left,s+=r.top}var o=t.display.lineSpace.getBoundingClientRect();return{left:n-o.left,top:s-o.top}}function te(t,e,i,n,s){return n||(n=un(t.doc,e.line)),Zt(t,n,Ut(t,n,e.ch,s),i)}function ee(t,e,i,n,s,r){function o(e,o){var a=qt(t,s,e,o?"right":"left",r);return o?a.left=a.right:a.right=a.left,Zt(t,n,a,i)}function a(t,e){var i=l[e],n=i.level%2;return t==os(i)&&e&&i.level<l[e-1].level?(t=as(i=l[--e])-(i.level%2?0:1),n=!0):t==as(i)&&e<l.length-1&&i.level<l[e+1].level&&(t=os(i=l[++e])-i.level%2,n=!1),n&&t==i.to&&t>i.from?o(t-1):o(t,n)}n=n||un(t.doc,e.line),s||(s=Yt(t,n));var l=yn(n),h=e.ch;if(!l)return o(h);var u=a(h,fs(l,h));return null!=ho&&(u.other=a(h,ho)),u}function ie(t,e){var i=0;e=ut(t.doc,e);t.options.lineWrapping||(i=ae(t.display)*e.ch);var n=un(t.doc,e.line),s=mn(n)+Ft(t.display);return{left:i,right:i,top:s,bottom:s+n.height}}function ne(t,e,i,n){var s=Hs(t,e);return s.xRel=n,i&&(s.outside=!0),s}function se(t,e,i){var n=t.doc;if(0>(i+=t.display.viewOffset))return ne(n.first,0,!0,-1);var s=gn(n,i),r=n.first+n.size-1;if(s>r)return ne(n.first+n.size-1,un(n,r).text.length,!0,1);0>e&&(e=0);for(var o=un(n,s);;){var a=re(t,o,s,e,i),l=Ei(o),h=l&&l.find(0,!0);if(!l||!(a.ch>h.from.ch||a.ch==h.from.ch&&a.xRel>0))return a;s=pn(o=h.to.line)}}function re(t,e,i,n,s){function r(n){var s=ee(t,Hs(i,n),"line",e,h);return a=!0,o>s.bottom?s.left-l:o<s.top?s.left+l:(a=!1,s.left)}var o=s-mn(e),a=!1,l=2*t.display.wrapper.clientWidth,h=Yt(t,e),u=yn(e),c=e.text.length,d=ls(e),f=hs(e),p=r(d),g=a,m=r(f),y=a;if(n>m)return ne(i,f,y,1);for(;;){if(u?f==d||f==gs(e,d,1):1>=f-d){for(var v=p>n||m-n>=n-p?d:f,x=n-(v==d?p:m);Kn(e.text.charAt(v));)++v;return ne(i,v,v==d?g:y,-1>x?-1:x>1?1:0)}var b=Math.ceil(c/2),w=d+b;if(u){w=d;for(var k=0;b>k;++k)w=gs(e,w,1)}var S=r(w);S>n?(f=w,m=S,(y=a)&&(m+=1e3),c=b):(d=w,p=S,g=a,c-=b)}}function oe(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Ys){Ys=Jn("pre");for(var e=0;49>e;++e)Ys.appendChild(document.createTextNode("x")),Ys.appendChild(Jn("br"));Ys.appendChild(document.createTextNode("x"))}Qn(t.measure,Ys);var i=Ys.offsetHeight/50;return i>3&&(t.cachedTextHeight=i),Zn(t.measure),i||1}function ae(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=Jn("span","xxxxxxxxxx"),i=Jn("pre",[e]);Qn(t.measure,i);var n=e.getBoundingClientRect(),s=(n.right-n.left)/10;return s>2&&(t.cachedCharWidth=s),s||10}function le(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Xs},Gs?Gs.ops.push(t.curOp):t.curOp.ownsGroup=Gs={ops:[t.curOp],delayedCallbacks:[]}}function he(t){var e=t.curOp.ownsGroup;if(e)try{!function(t){var e=t.delayedCallbacks,i=0;do{for(;i<e.length;i++)e[i].call(null);for(var n=0;n<t.ops.length;n++){var s=t.ops[n];if(s.cursorActivityHandlers)for(;s.cursorActivityCalled<s.cursorActivityHandlers.length;)s.cursorActivityHandlers[s.cursorActivityCalled++].call(null,s.cm)}}while(i<e.length)}(e)}finally{Gs=null;for(var i=0;i<e.ops.length;i++)e.ops[i].cm.curOp=null;!function(t){for(var e=t.ops,i=0;i<e.length;i++)ue(e[i]);for(i=0;i<e.length;i++)ce(e[i]);for(i=0;i<e.length;i++)de(e[i]);for(i=0;i<e.length;i++)fe(e[i]);for(i=0;i<e.length;i++)pe(e[i])}(e)}}function ue(t){var e=t.cm,i=e.display;(function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Bt(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Bt(t)+"px",e.scrollbarsClipped=!0)})(e),t.updateMaxLine&&c(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<i.viewFrom||t.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new C(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function ce(t){t.updatedDisplay=t.mustUpdate&&M(t.cm,t.update)}function de(t){var e=t.cm,i=e.display;t.updatedDisplay&&N(e),t.barMeasure=f(e),i.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Ut(e,i.maxLine,i.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+t.adjustWidthTo+Bt(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+t.adjustWidthTo-jt(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=i.input.prepareSelection(t.focus))}function fe(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Re(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var i=t.focus&&t.focus==ts()&&(!document.hasFocus||document.hasFocus());t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,i),(t.updatedDisplay||t.startHeight!=e.doc.height)&&y(e,t.barMeasure),t.updatedDisplay&&P(e,t.barMeasure),t.selectionChanged&&Lt(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),i&&$(t.cm)}function pe(t){var e=t.cm,i=e.display,n=e.doc;if(t.updatedDisplay&&T(e,t.update),null==i.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null==t.scrollTop||i.scroller.scrollTop==t.scrollTop&&!t.forceScroll||(n.scrollTop=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,t.scrollTop)),i.scrollbars.setScrollTop(n.scrollTop),i.scroller.scrollTop=n.scrollTop),null==t.scrollLeft||i.scroller.scrollLeft==t.scrollLeft&&!t.forceScroll||(n.scrollLeft=Math.max(0,Math.min(i.scroller.scrollWidth-i.scroller.clientWidth,t.scrollLeft)),i.scrollbars.setScrollLeft(n.scrollLeft),i.scroller.scrollLeft=n.scrollLeft,b(e)),t.scrollToPos){var s=function(t,e,i,n){null==n&&(n=0);for(var s=0;5>s;s++){var r=!1,o=ee(t,e),a=i&&i!=e?ee(t,i):o,l=si(t,Math.min(o.left,a.left),Math.min(o.top,a.top)-n,Math.max(o.left,a.left),Math.max(o.bottom,a.bottom)+n),h=t.doc.scrollTop,u=t.doc.scrollLeft;if(null!=l.scrollTop&&(Fe(t,l.scrollTop),Math.abs(t.doc.scrollTop-h)>1&&(r=!0)),null!=l.scrollLeft&&(Re(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-u)>1&&(r=!0)),!r)break}return o}(e,ut(n,t.scrollToPos.from),ut(n,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&function(t,e){if(!Fn(t,"scrollCursorIntoView")){var i=t.display,n=i.sizer.getBoundingClientRect(),s=null;if(e.top+n.top<0?s=!0:e.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(s=!1),null!=s&&!Ds){var r=Jn("div","â",null,"position: absolute; top: "+(e.top-i.viewOffset-Ft(t.display))+"px; height: "+(e.bottom-e.top+Bt(t)+i.barHeight)+"px; left: "+e.left+"px; width: 2px;");t.display.lineSpace.appendChild(r),r.scrollIntoView(s),t.display.lineSpace.removeChild(r)}}}(e,s)}var r=t.maybeHiddenMarkers,o=t.maybeUnhiddenMarkers;if(r)for(var a=0;a<r.length;++a)r[a].lines.length||Rr(r[a],"hide");if(o)for(a=0;a<o.length;++a)o[a].lines.length&&Rr(o[a],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&Rr(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function ge(t,e){if(t.curOp)return e();le(t);try{return e()}finally{he(t)}}function me(t,e){return function(){if(t.curOp)return e.apply(t,arguments);le(t);try{return e.apply(t,arguments)}finally{he(t)}}}function ye(t){return function(){if(this.curOp)return t.apply(this,arguments);le(this);try{return t.apply(this,arguments)}finally{he(this)}}}function ve(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);le(e);try{return t.apply(this,arguments)}finally{he(e)}}}function xe(t,e,i){this.line=e,this.rest=function(t){for(var e,i;e=Ei(t);)t=e.find(1,!0).line,(i||(i=[])).push(t);return i}(e),this.size=this.rest?pn(Hn(this.rest))-i+1:1,this.node=this.text=null,this.hidden=Ii(t,e)}function be(t,e,i){for(var n,s=[],r=e;i>r;r=n){var o=new xe(t.doc,un(t.doc,r),r);n=r+o.size,s.push(o)}return s}function we(t,e,i,n){null==e&&(e=t.doc.first),null==i&&(i=t.doc.first+t.doc.size),n||(n=0);var s=t.display;if(n&&i<s.viewTo&&(null==s.updateLineNumbers||s.updateLineNumbers>e)&&(s.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=s.viewTo)zs&&Fi(t.doc,e)<s.viewTo&&Se(t);else if(i<=s.viewFrom)zs&&Ri(t.doc,i+n)>s.viewFrom?Se(t):(s.viewFrom+=n,s.viewTo+=n);else if(e<=s.viewFrom&&i>=s.viewTo)Se(t);else if(e<=s.viewFrom){(r=Me(t,i,i+n,1))?(s.view=s.view.slice(r.index),s.viewFrom=r.lineN,s.viewTo+=n):Se(t)}else if(i>=s.viewTo){var r;(r=Me(t,e,e,-1))?(s.view=s.view.slice(0,r.index),s.viewTo=r.lineN):Se(t)}else{var o=Me(t,e,e,-1),a=Me(t,i,i+n,1);o&&a?(s.view=s.view.slice(0,o.index).concat(be(t,o.lineN,a.lineN)).concat(s.view.slice(a.index)),s.viewTo+=n):Se(t)}var l=s.externalMeasured;l&&(i<l.lineN?l.lineN+=n:e<l.lineN+l.size&&(s.externalMeasured=null))}function ke(t,e,i){t.curOp.viewChanged=!0;var n=t.display,s=t.display.externalMeasured;if(s&&e>=s.lineN&&e<s.lineN+s.size&&(n.externalMeasured=null),!(e<n.viewFrom||e>=n.viewTo)){var r=n.view[Ce(t,e)];if(null!=r.node){var o=r.changes||(r.changes=[]);-1==Un(o,i)&&o.push(i)}}}function Se(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function Ce(t,e){if(e>=t.display.viewTo)return null;if(0>(e-=t.display.viewFrom))return null;for(var i=t.display.view,n=0;n<i.length;n++)if(0>(e-=i[n].size))return n}function Me(t,e,i,n){var s,r=Ce(t,e),o=t.display.view;if(!zs||i==t.doc.first+t.doc.size)return{index:r,lineN:i};for(var a=0,l=t.display.viewFrom;r>a;a++)l+=o[a].size;if(l!=e){if(n>0){if(r==o.length-1)return null;s=l+o[r].size-e,r++}else s=l-e;e+=s,i+=s}for(;Fi(t.doc,i)!=i;){if(r==(0>n?0:o.length-1))return null;i+=n*o[r-(0>n?1:0)].size,r+=n}return{index:r,lineN:i}}function Te(t){for(var e=t.display.view,i=0,n=0;n<e.length;n++){var s=e[n];s.hidden||s.node&&!s.changes||++i}return i}function Ae(t){var e=t.display;e.lastWrapHeight==e.wrapper.clientHeight&&e.lastWrapWidth==e.wrapper.clientWidth||(e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize())}function Pe(t,e){for(var i=Dn(e);i!=t.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==t.sizer&&i!=t.mover)return!0}function Ne(t,e,i,n){var s=t.display;if(!i&&"true"==Dn(e).getAttribute("cm-not-content"))return null;var r,o,a=s.lineSpace.getBoundingClientRect();try{r=e.clientX-a.left,o=e.clientY-a.top}catch(e){return null}var l,h=se(t,r,o);if(n&&1==h.xRel&&(l=un(t.doc,h.line).text).length==h.ch){var u=Vr(l,l.length,t.options.tabSize)-l.length;h=Hs(h.line,Math.max(0,Math.round((r-It(t.display).left)/ae(t.display))-u))}return h}function De(t){var e=this,i=e.display;if(!(Fn(e,t)||i.activeTouch&&i.input.supportsTouch())){if(i.shift=t.shiftKey,Pe(i,t))return void(Cs||(i.scroller.draggable=!1,setTimeout((function(){i.scroller.draggable=!0}),100)));if(!Ee(e,t)){var n=Ne(e,t);switch(window.focus(),Ln(t)){case 1:e.state.selectingText?e.state.selectingText(t):n?function(t,e,i){ks?setTimeout(Wn($,t),0):t.curOp.focus=ts();var n,s=+new Date;$s&&$s.time>s-400&&0==Us($s.pos,i)?n="triple":qs&&qs.time>s-400&&0==Us(qs.pos,i)?(n="double",$s={time:s,pos:i}):(n="single",qs={time:s,pos:i});var r,o=t.doc.sel,a=_s?e.metaKey:e.ctrlKey;t.options.dragDrop&&no&&!t.isReadOnly()&&"single"==n&&(r=o.contains(i))>-1&&(Us((r=o.ranges[r]).from(),i)<0||i.xRel>0)&&(Us(r.to(),i)>0||i.xRel<0)?function(t,e,i,n){var s=t.display,r=+new Date,o=me(t,(function(a){Cs&&(s.scroller.draggable=!1),t.state.draggingText=!1,Fr(document,"mouseup",o),Fr(s.scroller,"drop",o),Math.abs(e.clientX-a.clientX)+Math.abs(e.clientY-a.clientY)<10&&(Dr(a),!n&&+new Date-200<r&&pt(t.doc,i),Cs||ks&&9==Ss?setTimeout((function(){document.body.focus(),s.input.focus()}),20):s.input.focus())}));Cs&&(s.scroller.draggable=!0),t.state.draggingText=o,s.scroller.dragDrop&&s.scroller.dragDrop(),_r(document,"mouseup",o),_r(s.scroller,"drop",o)}(t,e,i,a):function(t,e,i,n,s){function r(e){if(0!=Us(m,e))if(m=e,"rect"==n){for(var s=[],r=t.options.tabSize,o=Vr(un(h,i.line).text,i.ch,r),a=Vr(un(h,e.line).text,e.ch,r),l=Math.min(o,a),f=Math.max(o,a),p=Math.min(i.line,e.line),g=Math.min(t.lastLine(),Math.max(i.line,e.line));g>=p;p++){var y=un(h,p).text,v=Yr(y,l,r);l==f?s.push(new ot(Hs(p,v),Hs(p,v))):y.length>v&&s.push(new ot(Hs(p,v),Hs(p,Yr(y,f,r))))}s.length||s.push(new ot(i,i)),xt(h,at(d.ranges.slice(0,c).concat(s),c),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var x=u,b=x.anchor,w=e;if("single"!=n){if("double"==n)var k=t.findWordAt(e);else k=new ot(Hs(e.line,0),ut(h,Hs(e.line+1,0)));Us(k.anchor,b)>0?(w=k.head,b=q(x.from(),k.anchor)):(w=k.anchor,b=Y(x.to(),k.head))}(s=d.ranges.slice(0))[c]=new ot(ut(h,b),w),xt(h,at(s,c),Hr)}}function o(e){var i=++v,s=Ne(t,e,!0,"rect"==n);if(s)if(0!=Us(s,m)){t.curOp.focus=ts(),r(s);var a=x(l,h);(s.line>=a.to||s.line<a.from)&&setTimeout(me(t,(function(){v==i&&o(e)})),150)}else{var u=e.clientY<y.top?-20:e.clientY>y.bottom?20:0;u&&setTimeout(me(t,(function(){v==i&&(l.scroller.scrollTop+=u,o(e))})),50)}}function a(e){t.state.selectingText=!1,v=1/0,Dr(e),l.input.focus(),Fr(document,"mousemove",b),Fr(document,"mouseup",w),h.history.lastSelOrigin=null}var l=t.display,h=t.doc;Dr(e);var u,c,d=h.sel,f=d.ranges;if(s&&!e.shiftKey?(c=h.sel.contains(i),u=c>-1?f[c]:new ot(i,i)):(u=h.sel.primary(),c=h.sel.primIndex),Os?e.shiftKey&&e.metaKey:e.altKey)n="rect",s||(u=new ot(i,i)),i=Ne(t,e,!0,!0),c=-1;else if("double"==n){var p=t.findWordAt(i);u=t.display.shift||h.extend?ft(h,u,p.anchor,p.head):p}else if("triple"==n){var g=new ot(Hs(i.line,0),ut(h,Hs(i.line+1,0)));u=t.display.shift||h.extend?ft(h,u,g.anchor,g.head):g}else u=ft(h,u,i);s?-1==c?(c=f.length,xt(h,at(f.concat([u]),c),{scroll:!1,origin:"*mouse"})):f.length>1&&f[c].empty()&&"single"==n&&!e.shiftKey?(xt(h,at(f.slice(0,c).concat(f.slice(c+1)),0),{scroll:!1,origin:"*mouse"}),d=h.sel):mt(h,c,u,Hr):(c=0,xt(h,new rt([u],0),Hr),d=h.sel);var m=i,y=l.wrapper.getBoundingClientRect(),v=0,b=me(t,(function(t){Ln(t)?o(t):a(t)})),w=me(t,a);t.state.selectingText=w,_r(document,"mousemove",b),_r(document,"mouseup",w)}(t,e,i,n,a)}(e,t,n):Dn(t)==i.scroller&&Dr(t);break;case 2:Cs&&(e.state.lastMiddleDown=+new Date),n&&pt(e.doc,n),setTimeout((function(){i.input.focus()}),20),Dr(t);break;case 3:Bs?$e(e,t):function(t){t.state.delayingBlurEvent=!0,setTimeout((function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,qe(t))}),100)}(e)}}}}function Le(t,e,i,n){try{var s=e.clientX,r=e.clientY}catch(e){return!1}if(s>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;n&&Dr(e);var o=t.display,a=o.lineDiv.getBoundingClientRect();if(r>a.bottom||!In(t,i))return Nn(e);r-=a.top-o.viewOffset;for(var l=0;l<t.options.gutters.length;++l){var h=o.gutters.childNodes[l];if(h&&h.getBoundingClientRect().right>=s){var u=gn(t.doc,r),c=t.options.gutters[l];return Rr(t,i,t,u,c,e),Nn(e)}}}function Ee(t,e){return Le(t,e,"gutterClick",!0)}function _e(t){var e=this;if(Oe(e),!Fn(e,t)&&!Pe(e.display,t)){Dr(t),ks&&(Ks=+new Date);var i=Ne(e,t,!0),n=t.dataTransfer.files;if(i&&!e.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var s=n.length,r=Array(s),o=0,a=function(t,n){if(!e.options.allowDropFileTypes||-1!=Un(e.options.allowDropFileTypes,t.type)){var a=new FileReader;a.onload=me(e,(function(){var t=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t)&&(t=""),r[n]=t,++o==s){var l={from:i=ut(e.doc,i),to:i,text:e.doc.splitLines(r.join(e.doc.lineSeparator())),origin:"paste"};Je(e.doc,l),vt(e.doc,lt(i,ir(l)))}})),a.readAsText(t)}},l=0;s>l;++l)a(n[l],l);else{if(e.state.draggingText&&e.doc.sel.contains(i)>-1)return e.state.draggingText(t),void setTimeout((function(){e.display.input.focus()}),20);try{if(r=t.dataTransfer.getData("Text")){if(e.state.draggingText&&!(_s?t.altKey:t.ctrlKey))var h=e.listSelections();if(bt(e.doc,lt(i,i)),h)for(l=0;l<h.length;++l)ni(e.doc,"",h[l].anchor,h[l].head,"drag");e.replaceSelection(r,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Oe(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Fe(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,xs||A(t,{top:e}),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbars.setScrollTop(e),xs&&A(t),Et(t,100))}function Re(t,e,i){(i?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,b(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function Ie(t,e){var i=Qs(e),n=i.x,s=i.y,r=t.display,o=r.scroller,a=o.scrollWidth>o.clientWidth,l=o.scrollHeight>o.clientHeight;if(n&&a||s&&l){if(s&&_s&&Cs)t:for(var h=e.target,u=r.view;h!=o;h=h.parentNode)for(var c=0;c<u.length;c++)if(u[c].node==h){t.display.currentWheelTarget=h;break t}if(n&&!xs&&!As&&null!=Zs)return s&&l&&Fe(t,Math.max(0,Math.min(o.scrollTop+s*Zs,o.scrollHeight-o.clientHeight))),Re(t,Math.max(0,Math.min(o.scrollLeft+n*Zs,o.scrollWidth-o.clientWidth))),(!s||s&&l)&&Dr(e),void(r.wheelStartX=null);if(s&&null!=Zs){var d=s*Zs,f=t.doc.scrollTop,p=f+r.wrapper.clientHeight;0>d?f=Math.max(0,f+d-50):p=Math.min(t.doc.height,p+d+50),A(t,{top:f,bottom:p})}20>Js&&(null==r.wheelStartX?(r.wheelStartX=o.scrollLeft,r.wheelStartY=o.scrollTop,r.wheelDX=n,r.wheelDY=s,setTimeout((function(){if(null!=r.wheelStartX){var t=o.scrollLeft-r.wheelStartX,e=o.scrollTop-r.wheelStartY,i=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,i&&(Zs=(Zs*Js+i)/(Js+1),++Js)}}),200)):(r.wheelDX+=n,r.wheelDY+=s))}}function Be(t,e,i){if("string"==typeof e&&!(e=fr[e]))return!1;t.display.input.ensurePolled();var n=t.display.shift,s=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),i&&(t.display.shift=!1),s=e(t)!=jr}finally{t.display.shift=n,t.state.suppressEdits=!1}return s}function je(t,e,i,n){var s=t.state.keySeq;if(s){if(mr(e))return"handled";tr.set(50,(function(){t.state.keySeq==s&&(t.state.keySeq=null,t.display.input.reset())})),e=s+" "+e}var r=function(t,e,i){for(var n=0;n<t.state.keyMaps.length;n++){var s=gr(e,t.state.keyMaps[n],i,t);if(s)return s}return t.options.extraKeys&&gr(e,t.options.extraKeys,i,t)||gr(e,t.options.keyMap,i,t)}(t,e,n);return"multi"==r&&(t.state.keySeq=e),"handled"==r&&_n(t,"keyHandled",t,e,i),"handled"!=r&&"multi"!=r||(Dr(i),Lt(t)),s&&!r&&/\'$/.test(e)?(Dr(i),!0):!!r}function ze(t,e){var i=yr(e,!0);return!!i&&(e.shiftKey&&!t.state.keySeq?je(t,"Shift-"+i,e,(function(e){return Be(t,e,!0)}))||je(t,i,e,(function(e){return("string"==typeof e?/^go[A-Z]/.test(e):e.motion)?Be(t,e):void 0})):je(t,i,e,(function(e){return Be(t,e)})))}function He(t){var e=this;if(e.curOp.focus=ts(),!Fn(e,t)){ks&&11>Ss&&27==t.keyCode&&(t.returnValue=!1);var i=t.keyCode;e.display.shift=16==i||t.shiftKey;var n=ze(e,t);As&&(er=n?i:null,!n&&88==i&&!oo&&(_s?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){function e(t){18!=t.keyCode&&t.altKey||(to(i,"CodeMirror-crosshair"),Fr(document,"keyup",e),Fr(document,"mouseover",e))}var i=t.display.lineDiv;eo(i,"CodeMirror-crosshair"),_r(document,"keyup",e),_r(document,"mouseover",e)}(e)}}function Ue(t){16==t.keyCode&&(this.doc.sel.shift=!1),Fn(this,t)}function Ve(t){var e=this;if(!(Pe(e.display,t)||Fn(e,t)||t.ctrlKey&&!t.altKey||_s&&t.metaKey)){var i=t.keyCode,n=t.charCode;if(As&&i==er)return er=null,void Dr(t);if(!As||t.which&&!(t.which<10)||!ze(e,t))(function(t,e,i){return je(t,"'"+i+"'",e,(function(e){return Be(t,e,!0)}))})(e,t,String.fromCharCode(null==n?i:n))||e.display.input.onKeyPress(t)}}function Ye(t){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(Rr(t,"focus",t),t.state.focused=!0,eo(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),Cs&&setTimeout((function(){t.display.input.reset(!0)}),20)),t.display.input.receivedFocus()),Lt(t))}function qe(t){t.state.delayingBlurEvent||(t.state.focused&&(Rr(t,"blur",t),t.state.focused=!1,to(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.display.shift=!1)}),150))}function $e(t,e){Pe(t.display,e)||function(t,e){return!!In(t,"gutterContextMenu")&&Le(t,e,"gutterContextMenu",!1)}(t,e)||Fn(t,e,"contextmenu")||t.display.input.onContextMenu(e)}function We(t,e){if(Us(t,e.from)<0)return t;if(Us(t,e.to)<=0)return ir(e);var i=t.line+e.text.length-(e.to.line-e.from.line)-1,n=t.ch;return t.line==e.to.line&&(n+=ir(e).ch-e.to.ch),Hs(i,n)}function Ge(t,e){for(var i=[],n=0;n<t.sel.ranges.length;n++){var s=t.sel.ranges[n];i.push(new ot(We(s.anchor,e),We(s.head,e)))}return at(i,t.sel.primIndex)}function Xe(t,e,i){return t.line==e.line?Hs(i.line,t.ch-e.ch+i.ch):Hs(i.line+(t.line-e.line),t.ch)}function Ke(t,e,i){var n={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return i&&(n.update=function(e,i,n,s){e&&(this.from=ut(t,e)),i&&(this.to=ut(t,i)),n&&(this.text=n),void 0!==s&&(this.origin=s)}),Rr(t,"beforeChange",t,n),t.cm&&Rr(t.cm,"beforeChange",t.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Je(t,e,i){if(t.cm){if(!t.cm.curOp)return me(t.cm,Je)(t,e,i);if(t.cm.state.suppressEdits)return}if(!(In(t,"beforeChange")||t.cm&&In(t.cm,"beforeChange"))||(e=Ke(t,e,!0))){var n=js&&!i&&function(t,e,i){var n=null;if(t.iter(e.line,i.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var i=t.markedSpans[e].marker;!i.readOnly||n&&-1!=Un(n,i)||(n||(n=[])).push(i)}})),!n)return null;for(var s=[{from:e,to:i}],r=0;r<n.length;++r)for(var o=n[r],a=o.find(0),l=0;l<s.length;++l){var h=s[l];if(!(Us(h.to,a.from)<0||Us(h.from,a.to)>0)){var u=[l,1],c=Us(h.from,a.from),d=Us(h.to,a.to);(0>c||!o.inclusiveLeft&&!c)&&u.push({from:h.from,to:a.from}),(d>0||!o.inclusiveRight&&!d)&&u.push({from:a.to,to:h.to}),s.splice.apply(s,u),l+=u.length-1}}return s}(t,e.from,e.to);if(n)for(var s=n.length-1;s>=0;--s)Ze(t,{from:n[s].from,to:n[s].to,text:s?[""]:e.text});else Ze(t,e)}}function Ze(t,e){if(1!=e.text.length||""!=e.text[0]||0!=Us(e.from,e.to)){var i=Ge(t,e);wn(t,e,i,t.cm?t.cm.curOp.id:NaN),ei(t,e,i,ki(t,e));var n=[];ln(t,(function(t,i){i||-1!=Un(n,t.history)||(Pn(t.history,e),n.push(t.history)),ei(t,e,null,ki(t,e))}))}}function Qe(t,e,i){if(!t.cm||!t.cm.state.suppressEdits){for(var n,s=t.history,r=t.sel,o="undo"==e?s.done:s.undone,a="undo"==e?s.undone:s.done,l=0;l<o.length&&(n=o[l],i?!n.ranges||n.equals(t.sel):n.ranges);l++);if(l!=o.length){for(s.lastOrigin=s.lastSelOrigin=null;(n=o.pop()).ranges;){if(kn(n,a),i&&!n.equals(t.sel))return void xt(t,n,{clearRedo:!1});r=n}var h=[];kn(r,a),a.push({changes:h,generation:s.generation}),s.generation=n.generation||++s.maxGeneration;var u=In(t,"beforeChange")||t.cm&&In(t.cm,"beforeChange");for(l=n.changes.length-1;l>=0;--l){var c=n.changes[l];if(c.origin=e,u&&!Ke(t,c,!1))return void(o.length=0);h.push(xn(t,c));var d=l?Ge(t,c):Hn(o);ei(t,c,d,Ci(t,c)),!l&&t.cm&&t.cm.scrollIntoView({from:c.from,to:ir(c)});var f=[];ln(t,(function(t,e){e||-1!=Un(f,t.history)||(Pn(t.history,c),f.push(t.history)),ei(t,c,null,Ci(t,c))}))}}}}function ti(t,e){if(0!=e&&(t.first+=e,t.sel=new rt(Vn(t.sel.ranges,(function(t){return new ot(Hs(t.anchor.line+e,t.anchor.ch),Hs(t.head.line+e,t.head.ch))})),t.sel.primIndex),t.cm)){we(t.cm,t.first,t.first-e,e);for(var i=t.cm.display,n=i.viewFrom;n<i.viewTo;n++)ke(t.cm,n,"gutter")}}function ei(t,e,i,n){if(t.cm&&!t.cm.curOp)return me(t.cm,ei)(t,e,i,n);if(e.to.line<t.first)ti(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var s=e.text.length-1-(t.first-e.from.line);ti(t,s),e={from:Hs(t.first,0),to:Hs(e.to.line+s,e.to.ch),text:[Hn(e.text)],origin:e.origin}}var r=t.lastLine();e.to.line>r&&(e={from:e.from,to:Hs(r,un(t,r).text.length),text:[e.text[0]],origin:e.origin}),e.removed=cn(t,e.from,e.to),i||(i=Ge(t,e)),t.cm?ii(t.cm,e,n):rn(t,e,n),bt(t,i,zr)}}function ii(t,e,i){var n=t.doc,r=t.display,o=e.from,a=e.to,l=!1,h=o.line;t.options.lineWrapping||(h=pn(Oi(un(n,o.line))),n.iter(h,a.line+1,(function(t){return t==r.maxLine?(l=!0,!0):void 0}))),n.sel.contains(e.from,e.to)>-1&&Rn(t),rn(n,e,i,s(t)),t.options.lineWrapping||(n.iter(h,o.line+e.text.length,(function(t){var e=u(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,l=!1)})),l&&(t.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,o.line),Et(t,400);var c=e.text.length-(a.line-o.line)-1;e.full?we(t):o.line!=a.line||1!=e.text.length||sn(t.doc,e)?we(t,o.line,a.line+1,c):ke(t,o.line,"text");var d=In(t,"changes"),f=In(t,"change");if(f||d){var p={from:o,to:a,text:e.text,removed:e.removed,origin:e.origin};f&&_n(t,"change",t,p),d&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(p)}t.display.selForContextMenu=null}function ni(t,e,i,n,s){if(n||(n=i),Us(n,i)<0){var r=n;n=i,i=r}"string"==typeof e&&(e=t.splitLines(e)),Je(t,{from:i,to:n,text:e,origin:s})}function si(t,e,i,n,s){var r=t.display,o=oe(t.display);0>i&&(i=0);var a=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:r.scroller.scrollTop,l=zt(t),h={};s-i>l&&(s=i+l);var u=t.doc.height+Rt(r),c=o>i,d=s>u-o;if(a>i)h.scrollTop=c?0:i;else if(s>a+l){var f=Math.min(i,(d?u:s)-l);f!=a&&(h.scrollTop=f)}var p=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:r.scroller.scrollLeft,g=jt(t)-(t.options.fixedGutter?r.gutters.offsetWidth:0),m=n-e>g;return m&&(n=e+g),10>e?h.scrollLeft=0:p>e?h.scrollLeft=Math.max(0,e-(m?0:10)):n>g+p-3&&(h.scrollLeft=n+(m?0:10)-g),h}function ri(t,e,i){null==e&&null==i||ai(t),null!=e&&(t.curOp.scrollLeft=(null==t.curOp.scrollLeft?t.doc.scrollLeft:t.curOp.scrollLeft)+e),null!=i&&(t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+i)}function oi(t){ai(t);var e=t.getCursor(),i=e,n=e;t.options.lineWrapping||(i=e.ch?Hs(e.line,e.ch-1):e,n=Hs(e.line,e.ch+1)),t.curOp.scrollToPos={from:i,to:n,margin:t.options.cursorScrollMargin,isCursor:!0}}function ai(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var i=ie(t,e.from),n=ie(t,e.to),s=si(t,Math.min(i.left,n.left),Math.min(i.top,n.top)-e.margin,Math.max(i.right,n.right),Math.max(i.bottom,n.bottom)+e.margin);t.scrollTo(s.scrollLeft,s.scrollTop)}}function li(t,e,i,n){var s,r=t.doc;null==i&&(i="add"),"smart"==i&&(r.mode.indent?s=Ot(t,e):i="prev");var o=t.options.tabSize,a=un(r,e),l=Vr(a.text,null,o);a.stateAfter&&(a.stateAfter=null);var h,u=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==i&&((h=r.mode.indent(s,a.text.slice(u.length),a.text))==jr||h>150)){if(!n)return;i="prev"}}else h=0,i="not";"prev"==i?h=e>r.first?Vr(un(r,e-1).text,null,o):0:"add"==i?h=l+t.options.indentUnit:"subtract"==i?h=l-t.options.indentUnit:"number"==typeof i&&(h=l+i),h=Math.max(0,h);var c="",d=0;if(t.options.indentWithTabs)for(var f=Math.floor(h/o);f;--f)d+=o,c+="\t";if(h>d&&(c+=zn(h-d)),c!=u)return ni(r,c,Hs(e,0),Hs(e,u.length),"+input"),a.stateAfter=null,!0;for(f=0;f<r.sel.ranges.length;f++){var p=r.sel.ranges[f];if(p.head.line==e&&p.head.ch<u.length){mt(r,f,new ot(d=Hs(e,u.length),d));break}}}function hi(t,e,i,n){var s=e,r=e;return"number"==typeof e?r=un(t,ht(t,e)):s=pn(e),null==s?null:(n(r,s)&&t.cm&&ke(t.cm,s,i),r)}function ui(t,e){for(var i=t.doc.sel.ranges,n=[],s=0;s<i.length;s++){for(var r=e(i[s]);n.length&&Us(r.from,Hn(n).to)<=0;){var o=n.pop();if(Us(o.from,r.from)<0){r.from=o.from;break}}n.push(r)}ge(t,(function(){for(var e=n.length-1;e>=0;e--)ni(t.doc,"",n[e].from,n[e].to,"+delete");oi(t)}))}function ci(t,e,i,n,s){function r(){var e=a+i;return!(e<t.first||e>=t.first+t.size)&&(a=e,u=un(t,e))}function o(t){var e=(s?gs:ms)(u,l,i,!0);if(null==e){if(t||!r())return!1;l=s?(0>i?hs:ls)(u):0>i?u.text.length:0}else l=e;return!0}var a=e.line,l=e.ch,h=i,u=un(t,a);if("char"==n)o();else if("column"==n)o(!0);else if("word"==n||"group"==n)for(var c=null,d="group"==n,f=t.cm&&t.cm.getHelper(e,"wordChars"),p=!0;!(0>i)||o(!p);p=!1){var g=u.text.charAt(l)||"\n",m=Gn(g,f)?"w":d&&"\n"==g?"n":!d||/\s/.test(g)?null:"p";if(!d||p||m||(m="s"),c&&c!=m){0>i&&(i=1,o());break}if(m&&(c=m),i>0&&!o(!p))break}var y=Mt(t,Hs(a,l),e,h,!0);return Us(e,y)||(y.hitSide=!0),y}function di(t,e,i,n){var s,r=t.doc,o=e.left;if("page"==n){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);s=e.top+i*(a-(0>i?1.5:.5)*oe(t.display))}else"line"==n&&(s=i>0?e.bottom+3:e.top-3);for(;;){var l=se(t,o,s);if(!l.outside)break;if(0>i?0>=s:s>=r.height){l.hitSide=!0;break}s+=5*i}return l}function fi(e,i,n,s){t.defaults[e]=i,n&&(sr[e]=s?function(t,e,i){i!=rr&&n(t,e,i)}:n)}function pi(t){for(var e,i,n,s,r=t.split(/-(?!$)/),o=(t=r[r.length-1],0);o<r.length-1;o++){var a=r[o];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else{if(!/^s(hift)$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return e&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Cmd-"+t),n&&(t="Shift-"+t),t}function gi(t){return"string"==typeof t?pr[t]:t}function mi(t,e,i,n,s){if(n&&n.shared)return function(t,e,i,n,s){n=$n(n),n.shared=!1;var r=[mi(t,e,i,n,s)],o=r[0],a=n.widgetNode;return ln(t,(function(t){a&&(n.widgetNode=a.cloneNode(!0)),r.push(mi(t,ut(t,e),ut(t,i),n,s));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;o=Hn(r)})),new wr(r,o)}(t,e,i,n,s);if(t.cm&&!t.cm.curOp)return me(t.cm,mi)(t,e,i,n,s);var r=new br(t,s),o=Us(e,i);if(n&&$n(n,r,!1),o>0||0==o&&!1!==r.clearWhenEmpty)return r;if(r.replacedWith&&(r.collapsed=!0,r.widgetNode=Jn("span",[r.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||r.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(r.widgetNode.insertLeft=!0)),r.collapsed){if(_i(t,e.line,e,i,r)||e.line!=i.line&&_i(t,i.line,e,i,r))throw new Error("Inserting collapsed marker partially overlapping an existing one");zs=!0}r.addToHistory&&wn(t,{from:e,to:i,origin:"markText"},t.sel,NaN);var a,l=e.line,h=t.cm;if(t.iter(l,i.line+1,(function(t){h&&r.collapsed&&!h.options.lineWrapping&&Oi(t)==h.display.maxLine&&(a=!0),r.collapsed&&l!=e.line&&fn(t,0),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(t,new xi(r,l==e.line?e.ch:null,l==i.line?i.ch:null)),++l})),r.collapsed&&t.iter(e.line,i.line+1,(function(e){Ii(t,e)&&fn(e,0)})),r.clearOnEnter&&_r(r,"beforeCursorEnter",(function(){r.clear()})),r.readOnly&&(js=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),r.collapsed&&(r.id=++xr,r.atomic=!0),h){if(a&&(h.curOp.updateMaxLine=!0),r.collapsed)we(h,e.line,i.line+1);else if(r.className||r.title||r.startStyle||r.endStyle||r.css)for(var u=e.line;u<=i.line;u++)ke(h,u,"text");r.atomic&&kt(h.doc),_n(h,"markerAdded",h,r)}return r}function yi(t){return t.findMarks(Hs(t.first,0),t.clipPos(Hs(t.lastLine())),(function(t){return t.parent}))}function vi(t){for(var e=0;e<t.length;e++){var i=t[e],n=[i.primary.doc];ln(i.primary.doc,(function(t){n.push(t)}));for(var s=0;s<i.markers.length;s++){var r=i.markers[s];-1==Un(n,r.doc)&&(r.parent=null,i.markers.splice(s--,1))}}}function xi(t,e,i){this.marker=t,this.from=e,this.to=i}function bi(t,e){if(t)for(var i=0;i<t.length;++i){var n=t[i];if(n.marker==e)return n}}function wi(t,e){for(var i,n=0;n<t.length;++n)t[n]!=e&&(i||(i=[])).push(t[n]);return i}function ki(t,e){if(e.full)return null;var i=ct(t,e.from.line)&&un(t,e.from.line).markedSpans,n=ct(t,e.to.line)&&un(t,e.to.line).markedSpans;if(!i&&!n)return null;var s=e.from.ch,r=e.to.ch,o=0==Us(e.from,e.to),a=function(t,e,i){if(t)for(var n,s=0;s<t.length;++s){var r=t[s],o=r.marker;if(null==r.from||(o.inclusiveLeft?r.from<=e:r.from<e)||r.from==e&&"bookmark"==o.type&&(!i||!r.marker.insertLeft)){var a=null==r.to||(o.inclusiveRight?r.to>=e:r.to>e);(n||(n=[])).push(new xi(o,r.from,a?null:r.to))}}return n}(i,s,o),l=function(t,e,i){if(t)for(var n,s=0;s<t.length;++s){var r=t[s],o=r.marker;if(null==r.to||(o.inclusiveRight?r.to>=e:r.to>e)||r.from==e&&"bookmark"==o.type&&(!i||r.marker.insertLeft)){var a=null==r.from||(o.inclusiveLeft?r.from<=e:r.from<e);(n||(n=[])).push(new xi(o,a?null:r.from-e,null==r.to?null:r.to-e))}}return n}(n,r,o),h=1==e.text.length,u=Hn(e.text).length+(h?s:0);if(a)for(var c=0;c<a.length;++c){if(null==(d=a[c]).to)(f=bi(l,d.marker))?h&&(d.to=null==f.to?null:f.to+u):d.to=s}if(l)for(c=0;c<l.length;++c){var d,f;if(null!=(d=l[c]).to&&(d.to+=u),null==d.from)(f=bi(a,d.marker))||(d.from=u,h&&(a||(a=[])).push(d));else d.from+=u,h&&(a||(a=[])).push(d)}a&&(a=Si(a)),l&&l!=a&&(l=Si(l));var p=[a];if(!h){var g,m=e.text.length-2;if(m>0&&a)for(c=0;c<a.length;++c)null==a[c].to&&(g||(g=[])).push(new xi(a[c].marker,null,null));for(c=0;m>c;++c)p.push(g);p.push(l)}return p}function Si(t){for(var e=0;e<t.length;++e){var i=t[e];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Ci(t,e){var i=function(t,e){var i=e["spans_"+t.id];if(!i)return null;for(var n=0,s=[];n<e.text.length;++n)s.push(Cn(i[n]));return s}(t,e),n=ki(t,e);if(!i)return n;if(!n)return i;for(var s=0;s<i.length;++s){var r=i[s],o=n[s];if(r&&o)t:for(var a=0;a<o.length;++a){for(var l=o[a],h=0;h<r.length;++h)if(r[h].marker==l.marker)continue t;r.push(l)}else o&&(i[s]=o)}return i}function Mi(t){var e=t.markedSpans;if(e){for(var i=0;i<e.length;++i)e[i].marker.detachLine(t);t.markedSpans=null}}function Ti(t,e){if(e){for(var i=0;i<e.length;++i)e[i].marker.attachLine(t);t.markedSpans=e}}function Ai(t){return t.inclusiveLeft?-1:0}function Pi(t){return t.inclusiveRight?1:0}function Ni(t,e){var i=t.lines.length-e.lines.length;if(0!=i)return i;var n=t.find(),s=e.find(),r=Us(n.from,s.from)||Ai(t)-Ai(e);if(r)return-r;var o=Us(n.to,s.to)||Pi(t)-Pi(e);return o||e.id-t.id}function Di(t,e){var i,n=zs&&t.markedSpans;if(n)for(var s,r=0;r<n.length;++r)(s=n[r]).marker.collapsed&&null==(e?s.from:s.to)&&(!i||Ni(i,s.marker)<0)&&(i=s.marker);return i}function Li(t){return Di(t,!0)}function Ei(t){return Di(t,!1)}function _i(t,e,i,n,s){var r=un(t,e),o=zs&&r.markedSpans;if(o)for(var a=0;a<o.length;++a){var l=o[a];if(l.marker.collapsed){var h=l.marker.find(0),u=Us(h.from,i)||Ai(l.marker)-Ai(s),c=Us(h.to,n)||Pi(l.marker)-Pi(s);if(!(u>=0&&0>=c||0>=u&&c>=0)&&(0>=u&&(l.marker.inclusiveRight&&s.inclusiveLeft?Us(h.to,i)>=0:Us(h.to,i)>0)||u>=0&&(l.marker.inclusiveRight&&s.inclusiveLeft?Us(h.from,n)<=0:Us(h.from,n)<0)))return!0}}}function Oi(t){for(var e;e=Li(t);)t=e.find(-1,!0).line;return t}function Fi(t,e){var i=un(t,e),n=Oi(i);return i==n?e:pn(n)}function Ri(t,e){if(e>t.lastLine())return e;var i,n=un(t,e);if(!Ii(t,n))return e;for(;i=Ei(n);)n=i.find(1,!0).line;return pn(n)+1}function Ii(t,e){var i=zs&&e.markedSpans;if(i)for(var n,s=0;s<i.length;++s)if((n=i[s]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&Bi(t,e,n))return!0}}function Bi(t,e,i){if(null==i.to){var n=i.marker.find(1,!0);return Bi(t,n.line,bi(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==e.text.length)return!0;for(var s,r=0;r<e.markedSpans.length;++r)if((s=e.markedSpans[r]).marker.collapsed&&!s.marker.widgetNode&&s.from==i.to&&(null==s.to||s.to!=i.from)&&(s.marker.inclusiveLeft||i.marker.inclusiveRight)&&Bi(t,e,s))return!0}function ji(t,e,i){mn(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&ri(t,null,i)}function zi(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!Jr(document.body,t.node)){var i="position: relative;";t.coverGutter&&(i+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(i+="width: "+e.display.wrapper.clientWidth+"px;"),Qn(e.display.measure,Jn("div",[t.node],null,i))}return t.height=t.node.parentNode.offsetHeight}function Hi(t){t.parent=null,Mi(t)}function Ui(t,e){if(t)for(;;){var i=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;t=t.slice(0,i.index)+t.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==e[n]?e[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(e[n])||(e[n]+=" "+i[2])}return t}function Vi(e,i){if(e.blankLine)return e.blankLine(i);if(e.innerMode){var n=t.innerMode(e,i);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Yi(e,i,n,s){for(var r=0;10>r;r++){s&&(s[0]=t.innerMode(e,n).mode);var o=e.token(i,n);if(i.pos>i.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}function qi(t,e,i,n){function s(t){return{start:c.start,end:c.pos,string:c.current(),type:r||null,state:t?cr(o.mode,u):u}}var r,o=t.doc,a=o.mode;e=ut(o,e);var l,h=un(o,e.line),u=Ot(t,e.line,i),c=new vr(h.text,t.options.tabSize);for(n&&(l=[]);(n||c.pos<e.ch)&&!c.eol();)c.start=c.pos,r=Yi(a,c,u),n&&l.push(s(!0));return n?l:s()}function $i(t,e,i,n,s,r,o){var a=i.flattenSpans;null==a&&(a=t.options.flattenSpans);var l,h=0,u=null,c=new vr(e,t.options.tabSize),d=t.options.addModeClass&&[null];for(""==e&&Ui(Vi(i,n),r);!c.eol();){if(c.pos>t.options.maxHighlightLength?(a=!1,o&&Xi(t,e,n,c.pos),c.pos=e.length,l=null):l=Ui(Yi(i,c,n,d),r),d){var f=d[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!a||u!=l){for(;h<c.start;)s(h=Math.min(c.start,h+5e4),u);u=l}c.start=c.pos}for(;h<c.pos;){var p=Math.min(c.pos,h+5e4);s(p,u),h=p}}function Wi(t,e,i,n){var s=[t.state.modeGen],r={};$i(t,e.text,t.doc.mode,i,(function(t,e){s.push(t,e)}),r,n);for(var o=0;o<t.state.overlays.length;++o){var a=t.state.overlays[o],l=1,h=0;$i(t,e.text,a.mode,!0,(function(t,e){for(var i=l;t>h;){var n=s[l];n>t&&s.splice(l,1,t,s[l+1],n),l+=2,h=Math.min(t,n)}if(e)if(a.opaque)s.splice(i,l-i,t,"cm-overlay "+e),l=i+2;else for(;l>i;i+=2){var r=s[i+1];s[i+1]=(r?r+" ":"")+"cm-overlay "+e}}),r)}return{styles:s,classes:r.bgClass||r.textClass?r:null}}function Gi(t,e,i){if(!e.styles||e.styles[0]!=t.state.modeGen){var n=Ot(t,pn(e)),s=Wi(t,e,e.text.length>t.options.maxHighlightLength?cr(t.doc.mode,n):n);e.stateAfter=n,e.styles=s.styles,s.classes?e.styleClasses=s.classes:e.styleClasses&&(e.styleClasses=null),i===t.doc.frontier&&t.doc.frontier++}return e.styles}function Xi(t,e,i,n){var s=t.doc.mode,r=new vr(e,t.options.tabSize);for(r.start=r.pos=n||0,""==e&&Vi(s,i);!r.eol();)Yi(s,r,i),r.start=r.pos}function Ki(t,e){if(!t||/^\s*$/.test(t))return null;var i=e.addModeClass?Mr:Cr;return i[t]||(i[t]=t.replace(/\S+/g,"cm-$&"))}function Ji(t,e){var i=Jn("span",null,null,Cs?"padding-right: .1px":null),n={pre:Jn("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:t,splitSpaces:(ks||Cs)&&t.getOption("lineWrapping")};e.measure={};for(var s=0;s<=(e.rest?e.rest.length:0);s++){var r,o=s?e.rest[s-1]:e.line;n.pos=0,n.addToken=Zi,rs(t.display.measure)&&(r=yn(o))&&(n.addToken=tn(n.addToken,r)),n.map=[],nn(o,n,Gi(t,o,e!=t.display.externalMeasured&&pn(o))),o.styleClasses&&(o.styleClasses.bgClass&&(n.bgClass=is(o.styleClasses.bgClass,n.bgClass||"")),o.styleClasses.textClass&&(n.textClass=is(o.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(ss(t.display.measure))),0==s?(e.measure.map=n.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(n.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(Cs){var a=n.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return Rr(t,"renderLine",t,e.line,n.pre),n.pre.className&&(n.textClass=is(n.pre.className,n.textClass||"")),n}function Zi(t,e,i,n,s,r,o){if(e){var a=t.splitSpaces?e.replace(/ {3,}/g,Qi):e,l=t.cm.state.specialChars,h=!1;if(l.test(e))for(var u=document.createDocumentFragment(),c=0;;){l.lastIndex=c;var d=l.exec(e),f=d?d.index-c:e.length-c;if(f){var p=document.createTextNode(a.slice(c,c+f));ks&&9>Ss?u.appendChild(Jn("span",[p])):u.appendChild(p),t.map.push(t.pos,t.pos+f,p),t.col+=f,t.pos+=f}if(!d)break;if(c+=f+1,"\t"==d[0]){var g=t.cm.options.tabSize,m=g-t.col%g;(p=u.appendChild(Jn("span",zn(m),"cm-tab"))).setAttribute("role","presentation"),p.setAttribute("cm-text","\t"),t.col+=m}else if("\r"==d[0]||"\n"==d[0]){(p=u.appendChild(Jn("span","\r"==d[0]?"â":"â¤","cm-invalidchar"))).setAttribute("cm-text",d[0]),t.col+=1}else{(p=t.cm.options.specialCharPlaceholder(d[0])).setAttribute("cm-text",d[0]),ks&&9>Ss?u.appendChild(Jn("span",[p])):u.appendChild(p),t.col+=1}t.map.push(t.pos,t.pos+1,p),t.pos++}else{t.col+=e.length;u=document.createTextNode(a);t.map.push(t.pos,t.pos+e.length,u),ks&&9>Ss&&(h=!0),t.pos+=e.length}if(i||n||s||h||o){var y=i||"";n&&(y+=n),s&&(y+=s);var v=Jn("span",[u],y,o);return r&&(v.title=r),t.content.appendChild(v)}t.content.appendChild(u)}}function Qi(t){for(var e=" ",i=0;i<t.length-2;++i)e+=i%2?" ":"Â ";return e+" "}function tn(t,e){return function(i,n,s,r,o,a,l){s=s?s+" cm-force-border":"cm-force-border";for(var h=i.pos,u=h+n.length;;){for(var c=0;c<e.length;c++){var d=e[c];if(d.to>h&&d.from<=h)break}if(d.to>=u)return t(i,n,s,r,o,a,l);t(i,n.slice(0,d.to-h),s,r,null,a,l),r=null,n=n.slice(d.to-h),h=d.to}}}function en(t,e,i,n){var s=!n&&i.widgetNode;s&&t.map.push(t.pos,t.pos+e,s),!n&&t.cm.display.input.needsContentAttribute&&(s||(s=t.content.appendChild(document.createElement("span"))),s.setAttribute("cm-marker",i.id)),s&&(t.cm.display.input.setUneditable(s),t.content.appendChild(s)),t.pos+=e}function nn(t,e,i){var n=t.markedSpans,s=t.text,r=0;if(n)for(var o,a,l,h,u,c,d,f=s.length,p=0,g=1,m="",y=0;;){if(y==p){l=h=u=c=a="",d=null,y=1/0;for(var v,x=[],b=0;b<n.length;++b){var w=n[b],k=w.marker;"bookmark"==k.type&&w.from==p&&k.widgetNode?x.push(k):w.from<=p&&(null==w.to||w.to>p||k.collapsed&&w.to==p&&w.from==p)?(null!=w.to&&w.to!=p&&y>w.to&&(y=w.to,h=""),k.className&&(l+=" "+k.className),k.css&&(a=(a?a+";":"")+k.css),k.startStyle&&w.from==p&&(u+=" "+k.startStyle),k.endStyle&&w.to==y&&(v||(v=[])).push(k.endStyle,w.to),k.title&&!c&&(c=k.title),k.collapsed&&(!d||Ni(d.marker,k)<0)&&(d=w)):w.from>p&&y>w.from&&(y=w.from)}if(v)for(b=0;b<v.length;b+=2)v[b+1]==y&&(h+=" "+v[b]);if(!d||d.from==p)for(b=0;b<x.length;++b)en(e,0,x[b]);if(d&&(d.from||0)==p){if(en(e,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=f)break;for(var S=Math.min(f,y);;){if(m){var C=p+m.length;if(!d){var M=C>S?m.slice(0,S-p):m;e.addToken(e,M,o?o+l:l,u,p+M.length==y?h:"",c,a)}if(C>=S){m=m.slice(S-p),p=S;break}p=C,u=""}m=s.slice(r,r=i[g++]),o=Ki(i[g++],e.cm.options)}}else for(g=1;g<i.length;g+=2)e.addToken(e,s.slice(r,r=i[g]),Ki(i[g+1],e.cm.options))}function sn(t,e){return 0==e.from.ch&&0==e.to.ch&&""==Hn(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function rn(t,e,i,n){function s(t){return i?i[t]:null}function r(t,i,s){(function(t,e,i,n){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Mi(t),Ti(t,i);var s=n?n(t):1;s!=t.height&&fn(t,s)})(t,i,s,n),_n(t,"change",t,e)}function o(t,e){for(var i=t,r=[];e>i;++i)r.push(new Sr(h[i],s(i),n));return r}var a=e.from,l=e.to,h=e.text,u=un(t,a.line),c=un(t,l.line),d=Hn(h),f=s(h.length-1),p=l.line-a.line;if(e.full)t.insert(0,o(0,h.length)),t.remove(h.length,t.size-h.length);else if(sn(t,e)){var g=o(0,h.length-1);r(c,c.text,f),p&&t.remove(a.line,p),g.length&&t.insert(a.line,g)}else if(u==c)if(1==h.length)r(u,u.text.slice(0,a.ch)+d+u.text.slice(l.ch),f);else{(g=o(1,h.length-1)).push(new Sr(d+u.text.slice(l.ch),f,n)),r(u,u.text.slice(0,a.ch)+h[0],s(0)),t.insert(a.line+1,g)}else if(1==h.length)r(u,u.text.slice(0,a.ch)+h[0]+c.text.slice(l.ch),s(0)),t.remove(a.line+1,p);else{r(u,u.text.slice(0,a.ch)+h[0],s(0)),r(c,d+c.text.slice(l.ch),f);g=o(1,h.length-1);p>1&&t.remove(a.line+1,p-1),t.insert(a.line+1,g)}_n(t,"change",t,e)}function on(t){this.lines=t,this.parent=null;for(var e=0,i=0;e<t.length;++e)t[e].parent=this,i+=t[e].height;this.height=i}function an(t){this.children=t;for(var e=0,i=0,n=0;n<t.length;++n){var s=t[n];e+=s.chunkSize(),i+=s.height,s.parent=this}this.size=e,this.height=i,this.parent=null}function ln(t,e,i){!function t(n,s,r){if(n.linked)for(var o=0;o<n.linked.length;++o){var a=n.linked[o];if(a.doc!=s){var l=r&&a.sharedHist;i&&!l||(e(a.doc,l),t(a.doc,n,l))}}}(t,null,!0)}function hn(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,r(t),i(t),t.options.lineWrapping||c(t),t.options.mode=e.modeOption,we(t)}function un(t,e){if(0>(e-=t.first)||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var i=t;!i.lines;)for(var n=0;;++n){var s=i.children[n],r=s.chunkSize();if(r>e){i=s;break}e-=r}return i.lines[e]}function cn(t,e,i){var n=[],s=e.line;return t.iter(e.line,i.line+1,(function(t){var r=t.text;s==i.line&&(r=r.slice(0,i.ch)),s==e.line&&(r=r.slice(e.ch)),n.push(r),++s})),n}function dn(t,e,i){var n=[];return t.iter(e,i,(function(t){n.push(t.text)})),n}function fn(t,e){var i=e-t.height;if(i)for(var n=t;n;n=n.parent)n.height+=i}function pn(t){if(null==t.parent)return null;for(var e=t.parent,i=Un(e.lines,t),n=e.parent;n;e=n,n=n.parent)for(var s=0;n.children[s]!=e;++s)i+=n.children[s].chunkSize();return i+e.first}function gn(t,e){var i=t.first;t:do{for(var n=0;n<t.children.length;++n){var s=t.children[n],r=s.height;if(r>e){t=s;continue t}e-=r,i+=s.chunkSize()}return i}while(!t.lines);for(n=0;n<t.lines.length;++n){var o=t.lines[n].height;if(o>e)break;e-=o}return i+n}function mn(t){for(var e=0,i=(t=Oi(t)).parent,n=0;n<i.lines.length;++n){var s=i.lines[n];if(s==t)break;e+=s.height}for(var r=i.parent;r;r=(i=r).parent)for(n=0;n<r.children.length;++n){var o=r.children[n];if(o==i)break;e+=o.height}return e}function yn(t){var e=t.order;return null==e&&(e=t.order=uo(t.text)),e}function vn(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function xn(t,e){var i={from:V(e.from),to:ir(e),text:cn(t,e.from,e.to)};return Sn(t,i,e.from.line,e.to.line+1),ln(t,(function(t){Sn(t,i,e.from.line,e.to.line+1)}),!0),i}function bn(t){for(;t.length;){if(!Hn(t).ranges)break;t.pop()}}function wn(t,e,i,n){var s=t.history;s.undone.length=0;var r,o=+new Date;if((s.lastOp==n||s.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&s.lastModTime>o-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(r=function(t,e){return e?(bn(t.done),Hn(t.done)):t.done.length&&!Hn(t.done).ranges?Hn(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),Hn(t.done)):void 0}(s,s.lastOp==n))){var a=Hn(r.changes);0==Us(e.from,e.to)&&0==Us(e.from,a.to)?a.to=ir(e):r.changes.push(xn(t,e))}else{var l=Hn(s.done);for(l&&l.ranges||kn(t.sel,s.done),r={changes:[xn(t,e)],generation:s.generation},s.done.push(r);s.done.length>s.undoDepth;)s.done.shift(),s.done[0].ranges||s.done.shift()}s.done.push(i),s.generation=++s.maxGeneration,s.lastModTime=s.lastSelTime=o,s.lastOp=s.lastSelOp=n,s.lastOrigin=s.lastSelOrigin=e.origin,a||Rr(t,"historyAdded")}function kn(t,e){var i=Hn(e);i&&i.ranges&&i.equals(t)||e.push(t)}function Sn(t,e,i,n){var s=e["spans_"+t.id],r=0;t.iter(Math.max(t.first,i),Math.min(t.first+t.size,n),(function(i){i.markedSpans&&((s||(s=e["spans_"+t.id]={}))[r]=i.markedSpans),++r}))}function Cn(t){if(!t)return null;for(var e,i=0;i<t.length;++i)t[i].marker.explicitlyCleared?e||(e=t.slice(0,i)):e&&e.push(t[i]);return e?e.length?e:null:t}function Mn(t,e,i){for(var n=0,s=[];n<t.length;++n){var r=t[n];if(r.ranges)s.push(i?rt.prototype.deepCopy.call(r):r);else{var o=r.changes,a=[];s.push({changes:a});for(var l=0;l<o.length;++l){var h,u=o[l];if(a.push({from:u.from,to:u.to,text:u.text}),e)for(var c in u)(h=c.match(/^spans_(\d+)$/))&&Un(e,Number(h[1]))>-1&&(Hn(a)[c]=u[c],delete u[c])}}}return s}function Tn(t,e,i,n){i<t.line?t.line+=n:e<t.line&&(t.line=e,t.ch=0)}function An(t,e,i,n){for(var s=0;s<t.length;++s){var r=t[s],o=!0;if(r.ranges){r.copied||((r=t[s]=r.deepCopy()).copied=!0);for(var a=0;a<r.ranges.length;a++)Tn(r.ranges[a].anchor,e,i,n),Tn(r.ranges[a].head,e,i,n)}else{for(a=0;a<r.changes.length;++a){var l=r.changes[a];if(i<l.from.line)l.from=Hs(l.from.line+n,l.from.ch),l.to=Hs(l.to.line+n,l.to.ch);else if(e<=l.to.line){o=!1;break}}o||(t.splice(0,s+1),s=0)}}}function Pn(t,e){var i=e.from.line,n=e.to.line,s=e.text.length-(n-i)-1;An(t.done,i,n,s),An(t.undone,i,n,s)}function Nn(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Dn(t){return t.target||t.srcElement}function Ln(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),_s&&t.ctrlKey&&1==e&&(e=3),e}function En(t,e,i){var n=t._handlers&&t._handlers[e];return i?n&&n.length>0?n.slice():Or:n||Or}function _n(t,e){function i(t){return function(){t.apply(null,r)}}var n=En(t,e,!1);if(n.length){var s,r=Array.prototype.slice.call(arguments,2);Gs?s=Gs.delayedCallbacks:Ir?s=Ir:(s=Ir=[],setTimeout(On,0));for(var o=0;o<n.length;++o)s.push(i(n[o]))}}function On(){var t=Ir;Ir=null;for(var e=0;e<t.length;++e)t[e]()}function Fn(t,e,i){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),Rr(t,i||e.type,t,e),Nn(e)||e.codemirrorIgnore}function Rn(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var i=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),n=0;n<e.length;++n)-1==Un(i,e[n])&&i.push(e[n])}function In(t,e){return En(t,e).length>0}function Bn(t){t.prototype.on=function(t,e){_r(this,t,e)},t.prototype.off=function(t,e){Fr(this,t,e)}}function jn(){this.id=null}function zn(t){for(;qr.length<=t;)qr.push(Hn(qr)+" ");return qr[t]}function Hn(t){return t[t.length-1]}function Un(t,e){for(var i=0;i<t.length;++i)if(t[i]==e)return i;return-1}function Vn(t,e){for(var i=[],n=0;n<t.length;n++)i[n]=e(t[n],n);return i}function Yn(){}function qn(t,e){var i;return Object.create?i=Object.create(t):(Yn.prototype=t,i=new Yn),e&&$n(e,i),i}function $n(t,e,i){for(var n in e||(e={}),t)!t.hasOwnProperty(n)||!1===i&&e.hasOwnProperty(n)||(e[n]=t[n]);return e}function Wn(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function Gn(t,e){return e?!!(e.source.indexOf("\\w")>-1&&Xr(t))||e.test(t):Xr(t)}function Xn(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function Kn(t){return t.charCodeAt(0)>=768&&Kr.test(t)}function Jn(t,e,i,n){var s=document.createElement(t);if(i&&(s.className=i),n&&(s.style.cssText=n),"string"==typeof e)s.appendChild(document.createTextNode(e));else if(e)for(var r=0;r<e.length;++r)s.appendChild(e[r]);return s}function Zn(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function Qn(t,e){return Zn(t).appendChild(e)}function ts(){for(var t=document.activeElement;t&&t.root&&t.root.activeElement;)t=t.root.activeElement;return t}function es(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}function is(t,e){for(var i=t.split(" "),n=0;n<i.length;n++)i[n]&&!es(i[n]).test(e)&&(e+=" "+i[n]);return e}function ns(t){if(document.body.getElementsByClassName)for(var e=document.body.getElementsByClassName("CodeMirror"),i=0;i<e.length;i++){var n=e[i].CodeMirror;n&&t(n)}}function ss(t){if(null==Zr){var e=Jn("span","â");Qn(t,Jn("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Zr=e.offsetWidth<=1&&e.offsetHeight>2&&!(ks&&8>Ss))}var i=Zr?Jn("span","â"):Jn("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function rs(t){if(null!=Qr)return Qr;var e=Qn(t,document.createTextNode("AØ®A")),i=Wr(e,0,1).getBoundingClientRect();if(!i||i.left==i.right)return!1;var n=Wr(e,1,2).getBoundingClientRect();return Qr=n.right-i.right<3}function os(t){return t.level%2?t.to:t.from}function as(t){return t.level%2?t.from:t.to}function ls(t){var e=yn(t);return e?os(e[0]):0}function hs(t){var e=yn(t);return e?as(Hn(e)):t.text.length}function us(t,e){var i=un(t.doc,e),n=Oi(i);n!=i&&(e=pn(n));var s=yn(n),r=s?s[0].level%2?hs(n):ls(n):0;return Hs(e,r)}function cs(t,e){var i=us(t,e.line),n=un(t.doc,i.line),s=yn(n);if(!s||0==s[0].level){var r=Math.max(0,n.text.search(/\S/)),o=e.line==i.line&&e.ch<=r&&e.ch;return Hs(i.line,o?0:r)}return i}function ds(t,e,i){var n=t[0].level;return e==n||i!=n&&i>e}function fs(t,e){ho=null;for(var i,n=0;n<t.length;++n){var s=t[n];if(s.from<e&&s.to>e)return n;if(s.from==e||s.to==e){if(null!=i)return ds(t,s.level,t[i].level)?(s.from!=s.to&&(ho=i),n):(s.from!=s.to&&(ho=n),i);i=n}}return i}function ps(t,e,i,n){if(!n)return e+i;do{e+=i}while(e>0&&Kn(t.text.charAt(e)));return e}function gs(t,e,i,n){var s=yn(t);if(!s)return ms(t,e,i,n);for(var r=fs(s,e),o=s[r],a=ps(t,e,o.level%2?-i:i,n);;){if(a>o.from&&a<o.to)return a;if(a==o.from||a==o.to)return fs(s,a)==r?a:i>0==(o=s[r+=i]).level%2?o.to:o.from;if(!(o=s[r+=i]))return null;a=i>0==o.level%2?ps(t,o.to,-1,n):ps(t,o.from,1,n)}}function ms(t,e,i,n){var s=e+i;if(n)for(;s>0&&Kn(t.text.charAt(s));)s+=i;return 0>s||s>t.text.length?null:s}var ys=navigator.userAgent,vs=navigator.platform,xs=/gecko\/\d/i.test(ys),bs=/MSIE \d/.test(ys),ws=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ys),ks=bs||ws,Ss=ks&&(bs?document.documentMode||6:ws[1]),Cs=/WebKit\//.test(ys),Ms=Cs&&/Qt\/\d+\.\d+/.test(ys),Ts=/Chrome\//.test(ys),As=/Opera\//.test(ys),Ps=/Apple Computer/.test(navigator.vendor),Ns=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ys),Ds=/PhantomJS/.test(ys),Ls=/AppleWebKit/.test(ys)&&/Mobile\/\w+/.test(ys),Es=Ls||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ys),_s=Ls||/Mac/.test(vs),Os=/\bCrOS\b/.test(ys),Fs=/win/i.test(vs),Rs=As&&ys.match(/Version\/(\d*\.\d*)/);Rs&&(Rs=Number(Rs[1])),Rs&&Rs>=15&&(As=!1,Cs=!0);var Is=_s&&(Ms||As&&(null==Rs||12.11>Rs)),Bs=xs||ks&&Ss>=9,js=!1,zs=!1;p.prototype=$n({update:function(t){var e=t.scrollWidth>t.clientWidth+1,i=t.scrollHeight>t.clientHeight+1,n=t.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=e?n+"px":"0";var s=t.viewHeight-(e?n:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+s)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=i?n+"px":"0",this.horiz.style.left=t.barLeft+"px";var r=t.viewWidth-t.barLeft-(i?n:0);this.horiz.firstChild.style.width=t.scrollWidth-t.clientWidth+r+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?n:0,bottom:e?n:0}},setScrollLeft:function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var t=_s&&!Ns?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new jn,this.disableVert=new jn},enableZeroWidthBar:function(t,e){t.style.pointerEvents="auto",e.set(1e3,(function i(){var n=t.getBoundingClientRect();document.elementFromPoint(n.left+1,n.bottom-1)!=t?t.style.pointerEvents="none":e.set(1e3,i)}))},clear:function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)}},p.prototype),g.prototype=$n({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},g.prototype),t.scrollbarModel={native:p,null:g},C.prototype.signal=function(t,e){In(t,e)&&this.events.push(arguments)},C.prototype.finish=function(){for(var t=0;t<this.events.length;t++)Rr.apply(null,this.events[t])};var Hs=t.Pos=function(t,e){return this instanceof Hs?(this.line=t,void(this.ch=e)):new Hs(t,e)},Us=t.cmpPos=function(t,e){return t.line-e.line||t.ch-e.ch},Vs=null;Z.prototype=$n({init:function(t){function e(t){if(!Fn(n,t)){if(n.somethingSelected())Vs={lineWise:!1,text:n.getSelections()},i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,r.value=Vs.text.join("\n"),$r(r));else{if(!n.options.lineWiseCopyCut)return;var e=K(n);Vs={lineWise:!0,text:e.text},"cut"==t.type?n.setSelections(e.ranges,null,zr):(i.prevInput="",r.value=e.text.join("\n"),$r(r))}"cut"==t.type&&(n.state.cutIncoming=!0)}}var i=this,n=this.cm,s=this.wrapper=Q(),r=this.textarea=s.firstChild;t.wrapper.insertBefore(s,t.wrapper.firstChild),Ls&&(r.style.width="0px"),_r(r,"input",(function(){ks&&Ss>=9&&i.hasSelection&&(i.hasSelection=null),i.poll()})),_r(r,"paste",(function(t){Fn(n,t)||G(t,n)||(n.state.pasteIncoming=!0,i.fastPoll())})),_r(r,"cut",e),_r(r,"copy",e),_r(t.scroller,"paste",(function(e){Pe(t,e)||Fn(n,e)||(n.state.pasteIncoming=!0,i.focus())})),_r(t.lineSpace,"selectstart",(function(e){Pe(t,e)||Dr(e)})),_r(r,"compositionstart",(function(){var t=n.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:t,range:n.markText(t,n.getCursor("to"),{className:"CodeMirror-composing"})}})),_r(r,"compositionend",(function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)}))},prepareSelection:function(){var t=this.cm,e=t.display,i=t.doc,n=Pt(t);if(t.options.moveInputWithCursor){var s=ee(t,i.sel.primary().head,"div"),r=e.wrapper.getBoundingClientRect(),o=e.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,s.top+o.top-r.top)),n.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,s.left+o.left-r.left))}return n},showSelection:function(t){var e=this.cm.display;Qn(e.cursorDiv,t.cursors),Qn(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},reset:function(t){if(!this.contextMenuPending){var e,i,n=this.cm,s=n.doc;if(n.somethingSelected()){this.prevInput="";var r=s.sel.primary(),o=(e=oo&&(r.to().line-r.from().line>100||(i=n.getSelection()).length>1e3))?"-":i||n.getSelection();this.textarea.value=o,n.state.focused&&$r(this.textarea),ks&&Ss>=9&&(this.hasSelection=o)}else t||(this.prevInput=this.textarea.value="",ks&&Ss>=9&&(this.hasSelection=null));this.inaccurateSelection=e}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Es||ts()!=this.textarea))try{this.textarea.focus()}catch(t){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var t=this;t.pollingFast||t.polling.set(this.cm.options.pollInterval,(function(){t.poll(),t.cm.state.focused&&t.slowPoll()}))},fastPoll:function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,(function i(){e.poll()||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,i))}))},poll:function(){var t=this.cm,e=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||ro(e)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var n=e.value;if(n==i&&!t.somethingSelected())return!1;if(ks&&Ss>=9&&this.hasSelection===n||_s&&/[\uf700-\uf7ff]/.test(n))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var s=n.charCodeAt(0);if(8203!=s||i||(i="â"),8666==s)return this.reset(),this.cm.execCommand("undo")}for(var r=0,o=Math.min(i.length,n.length);o>r&&i.charCodeAt(r)==n.charCodeAt(r);)++r;var a=this;return ge(t,(function(){W(t,n.slice(r),i.length-r,null,a.composing?"*compose":null),n.length>1e3||n.indexOf("\n")>-1?e.value=a.prevInput="":a.prevInput=n,a.composing&&(a.composing.range.clear(),a.composing.range=t.markText(a.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){ks&&Ss>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(t){function e(){if(null!=o.selectionStart){var t=s.somethingSelected(),e="â"+(t?o.value:"");o.value="â",o.value=e,n.prevInput=t?"":"â",o.selectionStart=1,o.selectionEnd=e.length,r.selForContextMenu=s.doc.sel}}function i(){if(n.contextMenuPending=!1,n.wrapper.style.cssText=u,o.style.cssText=h,ks&&9>Ss&&r.scrollbars.setScrollTop(r.scroller.scrollTop=l),null!=o.selectionStart){(!ks||ks&&9>Ss)&&e();var t=0,i=function(){r.selForContextMenu==s.doc.sel&&0==o.selectionStart&&o.selectionEnd>0&&"â"==n.prevInput?me(s,fr.selectAll)(s):t++<10?r.detectingSelectAll=setTimeout(i,500):r.input.reset()};r.detectingSelectAll=setTimeout(i,200)}}var n=this,s=n.cm,r=s.display,o=n.textarea,a=Ne(s,t),l=r.scroller.scrollTop;if(a&&!As){s.options.resetSelectionOnContextMenu&&-1==s.doc.sel.contains(a)&&me(s,xt)(s.doc,lt(a),zr);var h=o.style.cssText,u=n.wrapper.style.cssText;n.wrapper.style.cssText="position: absolute";var c=n.wrapper.getBoundingClientRect();if(o.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(t.clientY-c.top-5)+"px; left: "+(t.clientX-c.left-5)+"px; z-index: 1000; background: "+(ks?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Cs)var d=window.scrollY;if(r.input.focus(),Cs&&window.scrollTo(null,d),r.input.reset(),s.somethingSelected()||(o.value=n.prevInput=" "),n.contextMenuPending=!0,r.selForContextMenu=s.doc.sel,clearTimeout(r.detectingSelectAll),ks&&Ss>=9&&e(),Bs){Er(t);var f=function(){Fr(window,"mouseup",f),setTimeout(i,20)};_r(window,"mouseup",f)}else setTimeout(i,50)}},readOnlyChanged:function(t){t||this.reset()},setUneditable:Yn,needsContentAttribute:!1},Z.prototype),tt.prototype=$n({init:function(t){function e(t){if(!Fn(n,t)){if(n.somethingSelected())Vs={lineWise:!1,text:n.getSelections()},"cut"==t.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var e=K(n);Vs={lineWise:!0,text:e.text},"cut"==t.type&&n.operation((function(){n.setSelections(e.ranges,0,zr),n.replaceSelection("",null,"cut")}))}if(t.clipboardData&&!Ls)t.preventDefault(),t.clipboardData.clearData(),t.clipboardData.setData("text/plain",Vs.text.join("\n"));else{var i=Q(),s=i.firstChild;n.display.lineSpace.insertBefore(i,n.display.lineSpace.firstChild),s.value=Vs.text.join("\n");var r=document.activeElement;$r(s),setTimeout((function(){n.display.lineSpace.removeChild(i),r.focus()}),50)}}}var i=this,n=i.cm,s=i.div=t.lineDiv;J(s),_r(s,"paste",(function(t){Fn(n,t)||G(t,n)})),_r(s,"compositionstart",(function(t){var e=t.data;if(i.composing={sel:n.doc.sel,data:e,startData:e},e){var s=n.doc.sel.primary(),r=n.getLine(s.head.line).indexOf(e,Math.max(0,s.head.ch-e.length));r>-1&&r<=s.head.ch&&(i.composing.sel=lt(Hs(s.head.line,r),Hs(s.head.line,r+e.length)))}})),_r(s,"compositionupdate",(function(t){i.composing.data=t.data})),_r(s,"compositionend",(function(t){var e=i.composing;e&&(t.data==e.startData||/\u200b/.test(t.data)||(e.data=t.data),setTimeout((function(){e.handled||i.applyComposition(e),i.composing==e&&(i.composing=null)}),50))})),_r(s,"touchstart",(function(){i.forceCompositionEnd()})),_r(s,"input",(function(){i.composing||!n.isReadOnly()&&i.pollContent()||ge(i.cm,(function(){we(n)}))})),_r(s,"copy",e),_r(s,"cut",e)},prepareSelection:function(){var t=Pt(this.cm,!1);return t.focus=this.cm.state.focused,t},showSelection:function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},showPrimarySelection:function(){var t=window.getSelection(),e=this.cm.doc.sel.primary(),i=nt(this.cm,t.anchorNode,t.anchorOffset),n=nt(this.cm,t.focusNode,t.focusOffset);if(!i||i.bad||!n||n.bad||0!=Us(q(i,n),e.from())||0!=Us(Y(i,n),e.to())){var s=et(this.cm,e.from()),r=et(this.cm,e.to());if(s||r){var o=this.cm.display.view,a=t.rangeCount&&t.getRangeAt(0);if(s){if(!r){var l=o[o.length-1].measure,h=l.maps?l.maps[l.maps.length-1]:l.map;r={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}}else s={node:o[0].measure.map[2],offset:0};try{var u=Wr(s.node,s.offset,r.offset,r.node)}catch(t){}u&&(!xs&&this.cm.state.focused?(t.collapse(s.node,s.offset),u.collapsed||t.addRange(u)):(t.removeAllRanges(),t.addRange(u)),a&&null==t.anchorNode?t.addRange(a):xs&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation((function(){t.cm.curOp.selectionChanged=!0}))}),20)},showMultipleSelections:function(t){Qn(this.cm.display.cursorDiv,t.cursors),Qn(this.cm.display.selectionDiv,t.selection)},rememberSelection:function(){var t=window.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},selectionInEditor:function(){var t=window.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return Jr(this.div,e)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){var t=this;this.selectionInEditor()?this.pollSelection():ge(this.cm,(function(){t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}))},selectionChanged:function(){var t=window.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var t=window.getSelection(),e=this.cm;this.rememberSelection();var i=nt(e,t.anchorNode,t.anchorOffset),n=nt(e,t.focusNode,t.focusOffset);i&&n&&ge(e,(function(){xt(e.doc,lt(i,n),zr),(i.bad||n.bad)&&(e.curOp.selectionChanged=!0)}))}},pollContent:function(){var t,e=this.cm,i=e.display,n=e.doc.sel.primary(),s=n.from(),r=n.to();if(s.line<i.viewFrom||r.line>i.viewTo-1)return!1;if(s.line==i.viewFrom||0==(t=Ce(e,s.line)))var o=pn(i.view[0].line),a=i.view[0].node;else o=pn(i.view[t].line),a=i.view[t-1].node.nextSibling;var l=Ce(e,r.line);if(l==i.view.length-1)var h=i.viewTo-1,u=i.lineDiv.lastChild;else h=pn(i.view[l+1].line)-1,u=i.view[l+1].node.previousSibling;for(var c=e.doc.splitLines(function(t,e,i,n,s){function r(e){if(1==e.nodeType){var i=e.getAttribute("cm-text");if(null!=i)return""==i&&(i=e.textContent.replace(/\u200b/g,"")),void(o+=i);var h,u=e.getAttribute("cm-marker");if(u){var c=t.findMarks(Hs(n,0),Hs(s+1,0),function(t){return function(e){return e.id==t}}(+u));return void(c.length&&(h=c[0].find())&&(o+=cn(t.doc,h.from,h.to).join(l)))}if("false"==e.getAttribute("contenteditable"))return;for(var d=0;d<e.childNodes.length;d++)r(e.childNodes[d]);/^(pre|div|p)$/i.test(e.nodeName)&&(a=!0)}else if(3==e.nodeType){var f=e.nodeValue;if(!f)return;a&&(o+=l,a=!1),o+=f}}for(var o="",a=!1,l=t.doc.lineSeparator();r(e),e!=i;)e=e.nextSibling;return o}(e,a,u,o,h)),d=cn(e.doc,Hs(o,0),Hs(h,un(e.doc,h).text.length));c.length>1&&d.length>1;)if(Hn(c)==Hn(d))c.pop(),d.pop(),h--;else{if(c[0]!=d[0])break;c.shift(),d.shift(),o++}for(var f=0,p=0,g=c[0],m=d[0],y=Math.min(g.length,m.length);y>f&&g.charCodeAt(f)==m.charCodeAt(f);)++f;for(var v=Hn(c),x=Hn(d),b=Math.min(v.length-(1==c.length?f:0),x.length-(1==d.length?f:0));b>p&&v.charCodeAt(v.length-p-1)==x.charCodeAt(x.length-p-1);)++p;c[c.length-1]=v.slice(0,v.length-p),c[0]=c[0].slice(f);var w=Hs(o,f),k=Hs(h,d.length?Hn(d).length-p:0);return c.length>1||c[0]||Us(w,k)?(ni(e.doc,c,w,k,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(t){this.cm.isReadOnly()?me(this.cm,we)(this.cm):t.data&&t.data!=t.startData&&me(this.cm,W)(this.cm,t.data,0,t.sel)},setUneditable:function(t){t.contentEditable="false"},onKeyPress:function(t){t.preventDefault(),this.cm.isReadOnly()||me(this.cm,W)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0)},readOnlyChanged:function(t){this.div.contentEditable=String("nocursor"!=t)},onContextMenu:Yn,resetPosition:Yn,needsContentAttribute:!0},tt.prototype),t.inputStyles={textarea:Z,contenteditable:tt},rt.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var i=this.ranges[e],n=t.ranges[e];if(0!=Us(i.anchor,n.anchor)||0!=Us(i.head,n.head))return!1}return!0},deepCopy:function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new ot(V(this.ranges[e].anchor),V(this.ranges[e].head));return new rt(t,this.primIndex)},somethingSelected:function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},contains:function(t,e){e||(e=t);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(Us(e,n.from())>=0&&Us(t,n.to())<=0)return i}return-1}},ot.prototype={from:function(){return q(this.anchor,this.head)},to:function(){return Y(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Ys,qs,$s,Ws={left:0,right:0,top:0,bottom:0},Gs=null,Xs=0,Ks=0,Js=0,Zs=null;ks?Zs=-.53:xs?Zs=15:Ts?Zs=-.7:Ps&&(Zs=-1/3);var Qs=function(t){var e=t.wheelDeltaX,i=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==i&&t.detail&&t.axis==t.VERTICAL_AXIS?i=t.detail:null==i&&(i=t.wheelDelta),{x:e,y:i}};t.wheelEventPixels=function(t){var e=Qs(t);return e.x*=Zs,e.y*=Zs,e};var tr=new jn,er=null,ir=t.changeEnd=function(t){return t.text?Hs(t.from.line+t.text.length-1,Hn(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,e){var i=this.options,n=i[t];i[t]==e&&"mode"!=t||(i[t]=e,sr.hasOwnProperty(t)&&me(this,sr[t])(this,e,n))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](gi(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,i=0;i<e.length;++i)if(e[i]==t||e[i].name==t)return e.splice(i,1),!0},addOverlay:ye((function(e,i){var n=e.token?e:t.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:i&&i.opaque}),this.state.modeGen++,we(this)})),removeOverlay:ye((function(t){for(var e=this.state.overlays,i=0;i<e.length;++i){var n=e[i].modeSpec;if(n==t||"string"==typeof t&&n.name==t)return e.splice(i,1),this.state.modeGen++,void we(this)}})),indentLine:ye((function(t,e,i){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),ct(this.doc,t)&&li(this,t,e,i)})),indentSelection:ye((function(t){for(var e=this.doc.sel.ranges,i=-1,n=0;n<e.length;n++){var s=e[n];if(s.empty())s.head.line>i&&(li(this,s.head.line,t,!0),i=s.head.line,n==this.doc.sel.primIndex&&oi(this));else{var r=s.from(),o=s.to(),a=Math.max(i,r.line);i=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var l=a;i>l;++l)li(this,l,t);var h=this.doc.sel.ranges;0==r.ch&&e.length==h.length&&h[n].from().ch>0&&mt(this.doc,n,new ot(r,h[n].to()),zr)}}})),getTokenAt:function(t,e){return qi(this,t,e)},getLineTokens:function(t,e){return qi(this,Hs(t),e,!0)},getTokenTypeAt:function(t){t=ut(this.doc,t);var e,i=Gi(this,un(this.doc,t.line)),n=0,s=(i.length-1)/2,r=t.ch;if(0==r)e=i[2];else for(;;){var o=n+s>>1;if((o?i[2*o-1]:0)>=r)s=o;else{if(!(i[2*o+1]<r)){e=i[2*o+2];break}n=o+1}}var a=e?e.indexOf("cm-overlay "):-1;return 0>a?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var i=this.doc.mode;return i.innerMode?t.innerMode(i,this.getTokenAt(e).state).mode:i},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var i=[];if(!ur.hasOwnProperty(e))return i;var n=ur[e],s=this.getModeAt(t);if("string"==typeof s[e])n[s[e]]&&i.push(n[s[e]]);else if(s[e])for(var r=0;r<s[e].length;r++){var o=n[s[e][r]];o&&i.push(o)}else s.helperType&&n[s.helperType]?i.push(n[s.helperType]):n[s.name]&&i.push(n[s.name]);for(r=0;r<n._global.length;r++){var a=n._global[r];a.pred(s,this)&&-1==Un(i,a.val)&&i.push(a.val)}return i},getStateAfter:function(t,e){var i=this.doc;return Ot(this,(t=ht(i,null==t?i.first+i.size-1:t))+1,e)},cursorCoords:function(t,e){var i=this.doc.sel.primary();return ee(this,null==t?i.head:"object"==typeof t?ut(this.doc,t):t?i.from():i.to(),e||"page")},charCoords:function(t,e){return te(this,ut(this.doc,t),e||"page")},coordsChar:function(t,e){return se(this,(t=Qt(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=Qt(this,{top:t,left:0},e||"page").top,gn(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var i,n=!1;if("number"==typeof t){var s=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>s&&(t=s,n=!0),i=un(this.doc,t)}else i=t;return Zt(this,i,{top:0,left:0},e||"page").top+(n?this.doc.height-mn(i):0)},defaultTextHeight:function(){return oe(this.display)},defaultCharWidth:function(){return ae(this.display)},setGutterMarker:ye((function(t,e,i){return hi(this.doc,t,"gutter",(function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[e]=i,!i&&Xn(n)&&(t.gutterMarkers=null),!0}))})),clearGutter:ye((function(t){var e=this,i=e.doc,n=i.first;i.iter((function(i){i.gutterMarkers&&i.gutterMarkers[t]&&(i.gutterMarkers[t]=null,ke(e,n,"gutter"),Xn(i.gutterMarkers)&&(i.gutterMarkers=null)),++n}))})),lineInfo:function(t){if("number"==typeof t){if(!ct(this.doc,t))return null;var e=t;if(!(t=un(this.doc,t)))return null}else{if(null==(e=pn(t)))return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,i,n,s){var r=this.display,o=(t=ee(this,ut(this.doc,t))).bottom,a=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),r.sizer.appendChild(e),"over"==n)o=t.top;else if("above"==n||"near"==n){var l=Math.max(r.wrapper.clientHeight,this.doc.height),h=Math.max(r.sizer.clientWidth,r.lineSpace.clientWidth);("above"==n||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?o=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(o=t.bottom),a+e.offsetWidth>h&&(a=h-e.offsetWidth)}e.style.top=o+"px",e.style.left=e.style.right="","right"==s?(a=r.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==s?a=0:"middle"==s&&(a=(r.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),i&&function(t,e,i,n,s){var r=si(t,e,i,n,s);null!=r.scrollTop&&Fe(t,r.scrollTop),null!=r.scrollLeft&&Re(t,r.scrollLeft)}(this,a,o,a+e.offsetWidth,o+e.offsetHeight)},triggerOnKeyDown:ye(He),triggerOnKeyPress:ye(Ve),triggerOnKeyUp:Ue,execCommand:function(t){return fr.hasOwnProperty(t)?fr[t].call(null,this):void 0},triggerElectric:ye((function(t){X(this,t)})),findPosH:function(t,e,i,n){var s=1;0>e&&(s=-1,e=-e);for(var r=0,o=ut(this.doc,t);e>r&&!(o=ci(this.doc,o,s,i,n)).hitSide;++r);return o},moveH:ye((function(t,e){var i=this;i.extendSelectionsBy((function(n){return i.display.shift||i.doc.extend||n.empty()?ci(i.doc,n.head,t,e,i.options.rtlMoveVisually):0>t?n.from():n.to()}),Ur)})),deleteH:ye((function(t,e){var i=this.doc.sel,n=this.doc;i.somethingSelected()?n.replaceSelection("",null,"+delete"):ui(this,(function(i){var s=ci(n,i.head,t,e,!1);return 0>t?{from:s,to:i.head}:{from:i.head,to:s}}))})),findPosV:function(t,e,i,n){var s=1,r=n;0>e&&(s=-1,e=-e);for(var o=0,a=ut(this.doc,t);e>o;++o){var l=ee(this,a,"div");if(null==r?r=l.left:l.left=r,(a=di(this,l,s,i)).hitSide)break}return a},moveV:ye((function(t,e){var i=this,n=this.doc,s=[],r=!i.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy((function(o){if(r)return 0>t?o.from():o.to();var a=ee(i,o.head,"div");null!=o.goalColumn&&(a.left=o.goalColumn),s.push(a.left);var l=di(i,a,t,e);return"page"==e&&o==n.sel.primary()&&ri(i,null,te(i,l,"div").top-a.top),l}),Ur),s.length)for(var o=0;o<n.sel.ranges.length;o++)n.sel.ranges[o].goalColumn=s[o]})),findWordAt:function(t){var e=un(this.doc,t.line).text,i=t.ch,n=t.ch;if(e){var s=this.getHelper(t,"wordChars");(t.xRel<0||n==e.length)&&i?--i:++n;for(var r=e.charAt(i),o=Gn(r,s)?function(t){return Gn(t,s)}:/\s/.test(r)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!Gn(t)};i>0&&o(e.charAt(i-1));)--i;for(;n<e.length&&o(e.charAt(n));)++n}return new ot(Hs(t.line,i),Hs(t.line,n))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?eo(this.display.cursorDiv,"CodeMirror-overwrite"):to(this.display.cursorDiv,"CodeMirror-overwrite"),Rr(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ts()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ye((function(t,e){null==t&&null==e||ai(this),null!=t&&(this.curOp.scrollLeft=t),null!=e&&(this.curOp.scrollTop=e)})),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Bt(this)-this.display.barHeight,width:t.scrollWidth-Bt(this)-this.display.barWidth,clientHeight:zt(this),clientWidth:jt(this)}},scrollIntoView:ye((function(t,e){if(null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:Hs(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line)ai(this),this.curOp.scrollToPos=t;else{var i=si(this,Math.min(t.from.left,t.to.left),Math.min(t.from.top,t.to.top)-t.margin,Math.max(t.from.right,t.to.right),Math.max(t.from.bottom,t.to.bottom)+t.margin);this.scrollTo(i.scrollLeft,i.scrollTop)}})),setSize:ye((function(t,e){function i(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}var n=this;null!=t&&(n.display.wrapper.style.width=i(t)),null!=e&&(n.display.wrapper.style.height=i(e)),n.options.lineWrapping&&Gt(this);var s=n.display.viewFrom;n.doc.iter(s,n.display.viewTo,(function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){ke(n,s,"widget");break}++s})),n.curOp.forceUpdate=!0,Rr(n,"refresh",this)})),operation:function(t){return ge(this,t)},refresh:ye((function(){var t=this.display.cachedTextHeight;we(this),this.curOp.forceUpdate=!0,Xt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),h(this),(null==t||Math.abs(t-oe(this.display))>.5)&&r(this),Rr(this,"refresh",this)})),swapDoc:ye((function(t){var e=this.doc;return e.cm=null,hn(this,t),Xt(this),this.display.input.reset(),this.scrollTo(t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,_n(this,"swapDoc",this,e),e})),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Bn(t);var nr=t.defaults={},sr=t.optionHandlers={},rr=t.Init={toString:function(){return"CodeMirror.Init"}};fi("value","",(function(t,e){t.setValue(e)}),!0),fi("mode",null,(function(t,e){t.doc.modeOption=e,i(t)}),!0),fi("indentUnit",2,i,!0),fi("indentWithTabs",!1),fi("smartIndent",!0),fi("tabSize",4,(function(t){n(t),Xt(t),we(t)}),!0),fi("lineSeparator",null,(function(t,e){if(t.doc.lineSep=e,e){var i=[],n=t.doc.first;t.doc.iter((function(t){for(var s=0;;){var r=t.text.indexOf(e,s);if(-1==r)break;s=r+e.length,i.push(Hs(n,r))}n++}));for(var s=i.length-1;s>=0;s--)ni(t.doc,e,i[s],Hs(i[s].line,i[s].ch+e.length))}})),fi("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,(function(e,i,n){e.state.specialChars=new RegExp(i.source+(i.test("\t")?"":"|\t"),"g"),n!=t.Init&&e.refresh()})),fi("specialCharPlaceholder",(function(t){var e=Jn("span","â¢","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}),(function(t){t.refresh()}),!0),fi("electricChars",!0),fi("inputStyle",Es?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),fi("rtlMoveVisually",!Fs),fi("wholeLineUpdateBefore",!0),fi("theme","default",(function(t){o(t),a(t)}),!0),fi("keyMap","default",(function(e,i,n){var s=gi(i),r=n!=t.Init&&gi(n);r&&r.detach&&r.detach(e,s),s.attach&&s.attach(e,r||null)})),fi("extraKeys",null),fi("lineWrapping",!1,(function(t){t.options.lineWrapping?(eo(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(to(t.display.wrapper,"CodeMirror-wrap"),c(t)),r(t),we(t),Xt(t),setTimeout((function(){y(t)}),100)}),!0),fi("gutters",[],(function(t){d(t.options),a(t)}),!0),fi("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?S(t.display)+"px":"0",t.refresh()}),!0),fi("coverGutterNextToScrollbar",!1,(function(t){y(t)}),!0),fi("scrollbarStyle","native",(function(t){m(t),y(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)}),!0),fi("lineNumbers",!1,(function(t){d(t.options),a(t)}),!0),fi("firstLineNumber",1,a,!0),fi("lineNumberFormatter",(function(t){return t}),a,!0),fi("showCursorWhenSelecting",!1,At,!0),fi("resetSelectionOnContextMenu",!0),fi("lineWiseCopyCut",!0),fi("readOnly",!1,(function(t,e){"nocursor"==e?(qe(t),t.display.input.blur(),t.display.disabled=!0):t.display.disabled=!1,t.display.input.readOnlyChanged(e)})),fi("disableInput",!1,(function(t,e){e||t.display.input.reset()}),!0),fi("dragDrop",!0,(function(e,i,n){if(!i!=!(n&&n!=t.Init)){var s=e.display.dragFunctions,r=i?_r:Fr;r(e.display.scroller,"dragstart",s.start),r(e.display.scroller,"dragenter",s.enter),r(e.display.scroller,"dragover",s.over),r(e.display.scroller,"dragleave",s.leave),r(e.display.scroller,"drop",s.drop)}})),fi("allowDropFileTypes",null),fi("cursorBlinkRate",530),fi("cursorScrollMargin",0),fi("cursorHeight",1,At,!0),fi("singleCursorHeightPerLine",!0,At,!0),fi("workTime",100),fi("workDelay",100),fi("flattenSpans",!0,n,!0),fi("addModeClass",!1,n,!0),fi("pollInterval",100),fi("undoDepth",200,(function(t,e){t.doc.history.undoDepth=e})),fi("historyEventDelay",1250),fi("viewportMargin",10,(function(t){t.refresh()}),!0),fi("maxHighlightLength",1e4,n,!0),fi("moveInputWithCursor",!0,(function(t,e){e||t.display.input.resetPosition()})),fi("tabindex",null,(function(t,e){t.display.input.getField().tabIndex=e||""})),fi("autofocus",null);var or=t.modes={},ar=t.mimeModes={};t.defineMode=function(e,i){t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2&&(i.dependencies=Array.prototype.slice.call(arguments,2)),or[e]=i},t.defineMIME=function(t,e){ar[t]=e},t.resolveMode=function(e){if("string"==typeof e&&ar.hasOwnProperty(e))e=ar[e];else if(e&&"string"==typeof e.name&&ar.hasOwnProperty(e.name)){var i=ar[e.name];"string"==typeof i&&(i={name:i}),(e=qn(i,e)).name=i.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,i){i=t.resolveMode(i);var n=or[i.name];if(!n)return t.getMode(e,"text/plain");var s=n(e,i);if(lr.hasOwnProperty(i.name)){var r=lr[i.name];for(var o in r)r.hasOwnProperty(o)&&(s.hasOwnProperty(o)&&(s["_"+o]=s[o]),s[o]=r[o])}if(s.name=i.name,i.helperType&&(s.helperType=i.helperType),i.modeProps)for(var o in i.modeProps)s[o]=i.modeProps[o];return s},t.defineMode("null",(function(){return{token:function(t){t.skipToEnd()}}})),t.defineMIME("text/plain","null");var lr=t.modeExtensions={};t.extendMode=function(t,e){$n(e,lr.hasOwnProperty(t)?lr[t]:lr[t]={})},t.defineExtension=function(e,i){t.prototype[e]=i},t.defineDocExtension=function(t,e){Ar.prototype[t]=e},t.defineOption=fi;var hr=[];t.defineInitHook=function(t){hr.push(t)};var ur=t.helpers={};t.registerHelper=function(e,i,n){ur.hasOwnProperty(e)||(ur[e]=t[e]={_global:[]}),ur[e][i]=n},t.registerGlobalHelper=function(e,i,n,s){t.registerHelper(e,i,s),ur[e]._global.push({pred:n,val:s})};var cr=t.copyState=function(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var i={};for(var n in e){var s=e[n];s instanceof Array&&(s=s.concat([])),i[n]=s}return i},dr=t.startState=function(t,e,i){return!t.startState||t.startState(e,i)};t.innerMode=function(t,e){for(;t.innerMode;){var i=t.innerMode(e);if(!i||i.mode==t)break;e=i.state,t=i.mode}return i||{mode:t,state:e}};var fr=t.commands={selectAll:function(t){t.setSelection(Hs(t.firstLine(),0),Hs(t.lastLine()),zr)},singleSelection:function(t){t.setSelection(t.getCursor("anchor"),t.getCursor("head"),zr)},killLine:function(t){ui(t,(function(e){if(e.empty()){var i=un(t.doc,e.head.line).text.length;return e.head.ch==i&&e.head.line<t.lastLine()?{from:e.head,to:Hs(e.head.line+1,0)}:{from:e.head,to:Hs(e.head.line,i)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){ui(t,(function(e){return{from:Hs(e.from().line,0),to:ut(t.doc,Hs(e.to().line+1,0))}}))},delLineLeft:function(t){ui(t,(function(t){return{from:Hs(t.from().line,0),to:t.from()}}))},delWrappedLineLeft:function(t){ui(t,(function(e){var i=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:i},"div"),to:e.from()}}))},delWrappedLineRight:function(t){ui(t,(function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:i},"div");return{from:e.from(),to:n}}))},undo:function(t){t.undo()},redo:function(t){t.redo()},undoSelection:function(t){t.undoSelection()},redoSelection:function(t){t.redoSelection()},goDocStart:function(t){t.extendSelection(Hs(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(Hs(t.lastLine()))},goLineStart:function(t){t.extendSelectionsBy((function(e){return us(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){t.extendSelectionsBy((function(e){return cs(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){t.extendSelectionsBy((function(e){return function(t,e){for(var i,n=un(t.doc,e);i=Ei(n);)n=i.find(1,!0).line,e=null;var s=yn(n),r=s?s[0].level%2?ls(n):hs(n):n.text.length;return Hs(null==e?pn(n):e,r)}(t,e.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(t){t.extendSelectionsBy((function(e){var i=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:i},"div")}),Ur)},goLineLeft:function(t){t.extendSelectionsBy((function(e){var i=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:i},"div")}),Ur)},goLineLeftSmart:function(t){t.extendSelectionsBy((function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:i},"div");return n.ch<t.getLine(n.line).search(/\S/)?cs(t,e.head):n}),Ur)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],i=t.listSelections(),n=t.options.tabSize,s=0;s<i.length;s++){var r=i[s].from(),o=Vr(t.getLine(r.line),r.ch,n);e.push(zn(n-o%n))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){ge(t,(function(){for(var e=t.listSelections(),i=[],n=0;n<e.length;n++){var s=e[n].head,r=un(t.doc,s.line).text;if(r)if(s.ch==r.length&&(s=new Hs(s.line,s.ch-1)),s.ch>0)s=new Hs(s.line,s.ch+1),t.replaceRange(r.charAt(s.ch-1)+r.charAt(s.ch-2),Hs(s.line,s.ch-2),s,"+transpose");else if(s.line>t.doc.first){var o=un(t.doc,s.line-1).text;o&&t.replaceRange(r.charAt(0)+t.doc.lineSeparator()+o.charAt(o.length-1),Hs(s.line-1,o.length-1),Hs(s.line,1),"+transpose")}i.push(new ot(s,s))}t.setSelections(i)}))},newlineAndIndent:function(t){ge(t,(function(){for(var e=t.listSelections().length,i=0;e>i;i++){var n=t.listSelections()[i];t.replaceRange(t.doc.lineSeparator(),n.anchor,n.head,"+input"),t.indentLine(n.from().line+1,null,!0)}oi(t)}))},openLine:function(t){t.replaceSelection("\n","start")},toggleOverwrite:function(t){t.toggleOverwrite()}},pr=t.keyMap={};pr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},pr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},pr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},pr.default=_s?pr.macDefault:pr.pcDefault,t.normalizeKeyMap=function(t){var e={};for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==n){delete t[i];continue}for(var s=Vn(i.split(" "),pi),r=0;r<s.length;r++){var o,a;r==s.length-1?(a=s.join(" "),o=n):(a=s.slice(0,r+1).join(" "),o="...");var l=e[a];if(l){if(l!=o)throw new Error("Inconsistent bindings for "+a)}else e[a]=o}delete t[i]}for(var h in e)t[h]=e[h];return t};var gr=t.lookupKey=function(t,e,i,n){var s=(e=gi(e)).call?e.call(t,n):e[t];if(!1===s)return"nothing";if("..."===s)return"multi";if(null!=s&&i(s))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return gr(t,e.fallthrough,i,n);for(var r=0;r<e.fallthrough.length;r++){var o=gr(t,e.fallthrough[r],i,n);if(o)return o}}},mr=t.isModifierKey=function(t){var e="string"==typeof t?t:lo[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e},yr=t.keyName=function(t,e){if(As&&34==t.keyCode&&t.char)return!1;var i=lo[t.keyCode],n=i;return null!=n&&!t.altGraphKey&&(t.altKey&&"Alt"!=i&&(n="Alt-"+n),(Is?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(n="Ctrl-"+n),(Is?t.ctrlKey:t.metaKey)&&"Cmd"!=i&&(n="Cmd-"+n),!e&&t.shiftKey&&"Shift"!=i&&(n="Shift-"+n),n)};t.fromTextArea=function(e,i){function n(){e.value=l.getValue()}if((i=i?$n(i):{}).value=e.value,!i.tabindex&&e.tabIndex&&(i.tabindex=e.tabIndex),!i.placeholder&&e.placeholder&&(i.placeholder=e.placeholder),null==i.autofocus){var s=ts();i.autofocus=s==e||null!=e.getAttribute("autofocus")&&s==document.body}if(e.form&&(_r(e.form,"submit",n),!i.leaveSubmitMethodAlone)){var r=e.form,o=r.submit;try{var a=r.submit=function(){n(),r.submit=o,r.submit(),r.submit=a}}catch(t){}}i.finishInit=function(t){t.save=n,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,n(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(Fr(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=o))}},e.style.display="none";var l=t((function(t){e.parentNode.insertBefore(t,e.nextSibling)}),i);return l};var vr=t.StringStream=function(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};vr.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var i=e==t;else i=e&&(t.test?t.test(e):t(e));return i?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Vr(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Vr(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Vr(this.string,null,this.tabSize)-(this.lineStart?Vr(this.string,this.lineStart,this.tabSize):0)},match:function(t,e,i){if("string"!=typeof t){var n=this.string.slice(this.pos).match(t);return n&&n.index>0?null:(n&&!1!==e&&(this.pos+=n[0].length),n)}var s=function(t){return i?t.toLowerCase():t};return s(this.string.substr(this.pos,t.length))==s(t)?(!1!==e&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}}};var xr=0,br=t.TextMarker=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++xr};Bn(br),br.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&le(t),In(this,"clear")){var i=this.find();i&&_n(this,"clear",i.from,i.to)}for(var n=null,s=null,r=0;r<this.lines.length;++r){var o=this.lines[r],a=bi(o.markedSpans,this);t&&!this.collapsed?ke(t,pn(o),"text"):t&&(null!=a.to&&(s=pn(o)),null!=a.from&&(n=pn(o))),o.markedSpans=wi(o.markedSpans,a),null==a.from&&this.collapsed&&!Ii(this.doc,o)&&t&&fn(o,oe(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(r=0;r<this.lines.length;++r){var l=Oi(this.lines[r]),h=u(l);h>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=h,t.display.maxLineChanged=!0)}null!=n&&t&&this.collapsed&&we(t,n,s+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&kt(t.doc)),t&&_n(t,"markerCleared",t,this),e&&he(t),this.parent&&this.parent.clear()}},br.prototype.find=function(t,e){null==t&&"bookmark"==this.type&&(t=1);for(var i,n,s=0;s<this.lines.length;++s){var r=this.lines[s],o=bi(r.markedSpans,this);if(null!=o.from&&(i=Hs(e?r:pn(r),o.from),-1==t))return i;if(null!=o.to&&(n=Hs(e?r:pn(r),o.to),1==t))return n}return i&&{from:i,to:n}},br.prototype.changed=function(){var t=this.find(-1,!0),e=this,i=this.doc.cm;t&&i&&ge(i,(function(){var n=t.line,s=pn(t.line),r=Vt(i,s);if(r&&(Wt(r),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!Ii(e.doc,n)&&null!=e.height){var o=e.height;e.height=null;var a=zi(e)-o;a&&fn(n,n.height+a)}}))},br.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=Un(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},br.prototype.detachLine=function(t){if(this.lines.splice(Un(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}};xr=0;var wr=t.SharedTextMarker=function(t,e){this.markers=t,this.primary=e;for(var i=0;i<t.length;++i)t[i].parent=this};Bn(wr),wr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();_n(this,"clear")}},wr.prototype.find=function(t,e){return this.primary.find(t,e)};var kr=t.LineWidget=function(t,e,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.doc=t,this.node=e};Bn(kr),kr.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,i=this.line,n=pn(i);if(null!=n&&e){for(var s=0;s<e.length;++s)e[s]==this&&e.splice(s--,1);e.length||(i.widgets=null);var r=zi(this);fn(i,Math.max(0,i.height-r)),t&&ge(t,(function(){ji(t,i,-r),ke(t,n,"widget")}))}},kr.prototype.changed=function(){var t=this.height,e=this.doc.cm,i=this.line;this.height=null;var n=zi(this)-t;n&&(fn(i,i.height+n),e&&ge(e,(function(){e.curOp.forceUpdate=!0,ji(e,i,n)})))};var Sr=t.Line=function(t,e,i){this.text=t,Ti(this,e),this.height=i?i(this):1};Bn(Sr),Sr.prototype.lineNo=function(){return pn(this)};var Cr={},Mr={};on.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var i=t,n=t+e;n>i;++i){var s=this.lines[i];this.height-=s.height,Hi(s),_n(s,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,i){this.height+=i,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0;n<e.length;++n)e[n].parent=this},iterN:function(t,e,i){for(var n=t+e;n>t;++t)if(i(this.lines[t]))return!0}},an.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var i=0;i<this.children.length;++i){var n=this.children[i],s=n.chunkSize();if(s>t){var r=Math.min(e,s-t),o=n.height;if(n.removeInner(t,r),this.height-=o-n.height,s==r&&(this.children.splice(i--,1),n.parent=null),0==(e-=r))break;t=0}else t-=s}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof on))){var a=[];this.collapse(a),this.children=[new on(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,i){this.size+=e.length,this.height+=i;for(var n=0;n<this.children.length;++n){var s=this.children[n],r=s.chunkSize();if(r>=t){if(s.insertInner(t,e,i),s.lines&&s.lines.length>50){for(var o=s.lines.length%25+25,a=o;a<s.lines.length;){var l=new on(s.lines.slice(a,a+=25));s.height-=l.height,this.children.splice(++n,0,l),l.parent=this}s.lines=s.lines.slice(0,o),this.maybeSpill()}break}t-=r}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new an(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var i=Un(t.parent.children,t);t.parent.children.splice(i+1,0,e)}else{var n=new an(t.children);n.parent=t,t.children=[n,e],t=n}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,i){for(var n=0;n<this.children.length;++n){var s=this.children[n],r=s.chunkSize();if(r>t){var o=Math.min(e,r-t);if(s.iterN(t,o,i))return!0;if(0==(e-=o))break;t=0}else t-=r}}};var Tr=0,Ar=t.Doc=function(t,e,i,n){if(!(this instanceof Ar))return new Ar(t,e,i,n);null==i&&(i=0),an.call(this,[new on([new Sr("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=i;var s=Hs(i,0);this.sel=lt(s),this.history=new vn(null),this.id=++Tr,this.modeOption=e,this.lineSep=n,this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),rn(this,{from:s,to:s,text:t}),xt(this,lt(s),zr)};Ar.prototype=qn(an.prototype,{constructor:Ar,iter:function(t,e,i){i?this.iterN(t-this.first,e-t,i):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var i=0,n=0;n<e.length;++n)i+=e[n].height;this.insertInner(t-this.first,e,i)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=dn(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:ve((function(t){var e=Hs(this.first,0),i=this.first+this.size-1;Je(this,{from:e,to:Hs(i,un(this,i).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),xt(this,lt(e))})),replaceRange:function(t,e,i,n){ni(this,t,e=ut(this,e),i=i?ut(this,i):e,n)},getRange:function(t,e,i){var n=cn(this,ut(this,t),ut(this,e));return!1===i?n:n.join(i||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){return ct(this,t)?un(this,t):void 0},getLineNumber:function(t){return pn(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=un(this,t)),Oi(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return ut(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ve((function(t,e,i){yt(this,ut(this,"number"==typeof t?Hs(t,e||0):t),null,i)})),setSelection:ve((function(t,e,i){yt(this,ut(this,t),ut(this,e||t),i)})),extendSelection:ve((function(t,e,i){pt(this,ut(this,t),e&&ut(this,e),i)})),extendSelections:ve((function(t,e){gt(this,dt(this,t),e)})),extendSelectionsBy:ve((function(t,e){gt(this,dt(this,Vn(this.sel.ranges,t)),e)})),setSelections:ve((function(t,e,i){if(t.length){for(var n=0,s=[];n<t.length;n++)s[n]=new ot(ut(this,t[n].anchor),ut(this,t[n].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),xt(this,at(s,e),i)}})),addSelection:ve((function(t,e,i){var n=this.sel.ranges.slice(0);n.push(new ot(ut(this,t),ut(this,e||t))),xt(this,at(n,n.length-1),i)})),getSelection:function(t){for(var e,i=this.sel.ranges,n=0;n<i.length;n++){var s=cn(this,i[n].from(),i[n].to());e=e?e.concat(s):s}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],i=this.sel.ranges,n=0;n<i.length;n++){var s=cn(this,i[n].from(),i[n].to());!1!==t&&(s=s.join(t||this.lineSeparator())),e[n]=s}return e},replaceSelection:function(t,e,i){for(var n=[],s=0;s<this.sel.ranges.length;s++)n[s]=t;this.replaceSelections(n,e,i||"+input")},replaceSelections:ve((function(t,e,i){for(var n=[],s=this.sel,r=0;r<s.ranges.length;r++){var o=s.ranges[r];n[r]={from:o.from(),to:o.to(),text:this.splitLines(t[r]),origin:i}}var a=e&&"end"!=e&&function(t,e,i){for(var n=[],s=Hs(t.first,0),r=s,o=0;o<e.length;o++){var a=e[o],l=Xe(a.from,s,r),h=Xe(ir(a),s,r);if(s=a.to,r=h,"around"==i){var u=t.sel.ranges[o],c=Us(u.head,u.anchor)<0;n[o]=new ot(c?h:l,c?l:h)}else n[o]=new ot(l,l)}return new rt(n,t.sel.primIndex)}(this,n,e);for(r=n.length-1;r>=0;r--)Je(this,n[r]);a?vt(this,a):this.cm&&oi(this.cm)})),undo:ve((function(){Qe(this,"undo")})),redo:ve((function(){Qe(this,"redo")})),undoSelection:ve((function(){Qe(this,"undo",!0)})),redoSelection:ve((function(){Qe(this,"redo",!0)})),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,i=0,n=0;n<t.done.length;n++)t.done[n].ranges||++e;for(n=0;n<t.undone.length;n++)t.undone[n].ranges||++i;return{undo:e,redo:i}},clearHistory:function(){this.history=new vn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Mn(this.history.done),undone:Mn(this.history.undone)}},setHistory:function(t){var e=this.history=new vn(this.history.maxGeneration);e.done=Mn(t.done.slice(0),null,!0),e.undone=Mn(t.undone.slice(0),null,!0)},addLineClass:ve((function(t,e,i){return hi(this,t,"gutter"==e?"gutter":"class",(function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[n]){if(es(i).test(t[n]))return!1;t[n]+=" "+i}else t[n]=i;return!0}))})),removeLineClass:ve((function(t,e,i){return hi(this,t,"gutter"==e?"gutter":"class",(function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",s=t[n];if(!s)return!1;if(null==i)t[n]=null;else{var r=s.match(es(i));if(!r)return!1;var o=r.index+r[0].length;t[n]=s.slice(0,r.index)+(r.index&&o!=s.length?" ":"")+s.slice(o)||null}return!0}))})),addLineWidget:ve((function(t,e,i){return function(t,e,i,n){var s=new kr(t,i,n),r=t.cm;return r&&s.noHScroll&&(r.display.alignWidgets=!0),hi(t,e,"widget",(function(e){var i=e.widgets||(e.widgets=[]);if(null==s.insertAt?i.push(s):i.splice(Math.min(i.length-1,Math.max(0,s.insertAt)),0,s),s.line=e,r&&!Ii(t,e)){var n=mn(e)<t.scrollTop;fn(e,e.height+zi(s)),n&&ri(r,null,s.height),r.curOp.forceUpdate=!0}return!0})),s}(this,t,e,i)})),removeLineWidget:function(t){t.clear()},markText:function(t,e,i){return mi(this,ut(this,t),ut(this,e),i,i&&i.type||"range")},setBookmark:function(t,e){var i={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return mi(this,t=ut(this,t),t,i,"bookmark")},findMarksAt:function(t){var e=[],i=un(this,(t=ut(this,t)).line).markedSpans;if(i)for(var n=0;n<i.length;++n){var s=i[n];(null==s.from||s.from<=t.ch)&&(null==s.to||s.to>=t.ch)&&e.push(s.marker.parent||s.marker)}return e},findMarks:function(t,e,i){t=ut(this,t),e=ut(this,e);var n=[],s=t.line;return this.iter(t.line,e.line+1,(function(r){var o=r.markedSpans;if(o)for(var a=0;a<o.length;a++){var l=o[a];null!=l.to&&s==t.line&&t.ch>=l.to||null==l.from&&s!=t.line||null!=l.from&&s==e.line&&l.from>=e.ch||i&&!i(l.marker)||n.push(l.marker.parent||l.marker)}++s})),n},getAllMarks:function(){var t=[];return this.iter((function(e){var i=e.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&t.push(i[n].marker)})),t},posFromIndex:function(t){var e,i=this.first,n=this.lineSeparator().length;return this.iter((function(s){var r=s.text.length+n;return r>t?(e=t,!0):(t-=r,void++i)})),ut(this,Hs(i,e))},indexFromPos:function(t){var e=(t=ut(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,t.line,(function(t){e+=t.text.length+i})),e},copy:function(t){var e=new Ar(dn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,i=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<i&&(i=t.to);var n=new Ar(dn(this,e,i),t.mode||this.modeOption,e,this.lineSep);return t.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:t.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var i=0;i<e.length;i++){var n=e[i],s=n.find(),r=t.clipPos(s.from),o=t.clipPos(s.to);if(Us(r,o)){var a=mi(t,r,o,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}(n,yi(this)),n},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var i=0;i<this.linked.length;++i){if(this.linked[i].doc==e){this.linked.splice(i,1),e.unlinkDoc(this),vi(yi(this));break}}if(e.history==this.history){var n=[e.id];ln(e,(function(t){n.push(t.id)}),!0),e.history=new vn(null),e.history.done=Mn(this.history.done,n),e.history.undone=Mn(this.history.undone,n)}},iterLinkedDocs:function(t){ln(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):so(t)},lineSeparator:function(){return this.lineSep||"\n"}}),Ar.prototype.eachLine=Ar.prototype.iter;var Pr="iter insert remove copy getEditor constructor".split(" ");for(var Nr in Ar.prototype)Ar.prototype.hasOwnProperty(Nr)&&Un(Pr,Nr)<0&&(t.prototype[Nr]=function(t){return function(){return t.apply(this.doc,arguments)}}(Ar.prototype[Nr]));Bn(Ar);var Dr=t.e_preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},Lr=t.e_stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},Er=t.e_stop=function(t){Dr(t),Lr(t)},_r=t.on=function(t,e,i){if(t.addEventListener)t.addEventListener(e,i,!1);else if(t.attachEvent)t.attachEvent("on"+e,i);else{var n=t._handlers||(t._handlers={});(n[e]||(n[e]=[])).push(i)}},Or=[],Fr=t.off=function(t,e,i){if(t.removeEventListener)t.removeEventListener(e,i,!1);else if(t.detachEvent)t.detachEvent("on"+e,i);else for(var n=En(t,e,!1),s=0;s<n.length;++s)if(n[s]==i){n.splice(s,1);break}},Rr=t.signal=function(t,e){var i=En(t,e,!0);if(i.length)for(var n=Array.prototype.slice.call(arguments,2),s=0;s<i.length;++s)i[s].apply(null,n)},Ir=null,Br=30,jr=t.Pass={toString:function(){return"CodeMirror.Pass"}},zr={scroll:!1},Hr={origin:"*mouse"},Ur={origin:"+move"};jn.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var Vr=t.countColumn=function(t,e,i,n,s){null==e&&(-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length));for(var r=n||0,o=s||0;;){var a=t.indexOf("\t",r);if(0>a||a>=e)return o+(e-r);o+=a-r,o+=i-o%i,r=a+1}},Yr=t.findColumn=function(t,e,i){for(var n=0,s=0;;){var r=t.indexOf("\t",n);-1==r&&(r=t.length);var o=r-n;if(r==t.length||s+o>=e)return n+Math.min(o,e-s);if(s+=r-n,n=r+1,(s+=i-s%i)>=e)return n}},qr=[""],$r=function(t){t.select()};Ls?$r=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:ks&&($r=function(t){try{t.select()}catch(t){}});var Wr,Gr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Xr=t.isWordChar=function(t){return/\w/.test(t)||t>"Â"&&(t.toUpperCase()!=t.toLowerCase()||Gr.test(t))},Kr=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Wr=document.createRange?function(t,e,i,n){var s=document.createRange();return s.setEnd(n||t,i),s.setStart(t,e),s}:function(t,e,i){var n=document.body.createTextRange();try{n.moveToElementText(t.parentNode)}catch(t){return n}return n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n};var Jr=t.contains=function(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)};ks&&11>Ss&&(ts=function(){try{return document.activeElement}catch(t){return document.body}});var Zr,Qr,to=t.rmClass=function(t,e){var i=t.className,n=es(e).exec(i);if(n){var s=i.slice(n.index+n[0].length);t.className=i.slice(0,n.index)+(s?n[1]+s:"")}},eo=t.addClass=function(t,e){var i=t.className;es(e).test(i)||(t.className+=(i?" ":"")+e)},io=!1,no=function(){if(ks&&9>Ss)return!1;var t=Jn("div");return"draggable"in t||"dragDrop"in t}(),so=t.splitLines=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,i=[],n=t.length;n>=e;){var s=t.indexOf("\n",e);-1==s&&(s=t.length);var r=t.slice(e,"\r"==t.charAt(s-1)?s-1:s),o=r.indexOf("\r");-1!=o?(i.push(r.slice(0,o)),e+=o+1):(i.push(r),e=s+1)}return i}:function(t){return t.split(/\r\n?|\n/)},ro=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},oo=function(){var t=Jn("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),ao=null,lo=t.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};!function(){for(var t=0;10>t;t++)lo[t+48]=lo[t+96]=String(t);for(t=65;90>=t;t++)lo[t]=String.fromCharCode(t);for(t=1;12>=t;t++)lo[t+111]=lo[t+63235]="F"+t}();var ho,uo=function(){function t(t){return 247>=t?i.charAt(t):t>=1424&&1524>=t?"R":t>=1536&&1773>=t?n.charAt(t-1536):t>=1774&&2220>=t?"r":t>=8192&&8203>=t?"w":8204==t?"b":"L"}function e(t,e,i){this.level=t,this.from=e,this.to=i}var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,o=/[LRr]/,a=/[Lb1n]/,l=/[1n]/,h="L";return function(i){if(!s.test(i))return!1;for(var n=i.length,u=[],c=0;n>c;++c)u.push(y=t(i.charCodeAt(c)));c=0;for(var d=h;n>c;++c){"m"==(y=u[c])?u[c]=d:d=y}c=0;for(var f=h;n>c;++c){"1"==(y=u[c])&&"r"==f?u[c]="n":o.test(y)&&(f=y,"r"==y&&(u[c]="R"))}for(c=1,d=u[0];n-1>c;++c){"+"==(y=u[c])&&"1"==d&&"1"==u[c+1]?u[c]="1":","!=y||d!=u[c+1]||"1"!=d&&"n"!=d||(u[c]=d),d=y}for(c=0;n>c;++c){if(","==(y=u[c]))u[c]="N";else if("%"==y){for(var p=c+1;n>p&&"%"==u[p];++p);for(var g=c&&"!"==u[c-1]||n>p&&"1"==u[p]?"1":"N",m=c;p>m;++m)u[m]=g;c=p-1}}for(c=0,f=h;n>c;++c){var y=u[c];"L"==f&&"1"==y?u[c]="L":o.test(y)&&(f=y)}for(c=0;n>c;++c)if(r.test(u[c])){for(p=c+1;n>p&&r.test(u[p]);++p);var v="L"==(c?u[c-1]:h),x="L"==(n>p?u[p]:h);for(g=v||x?"L":"R",m=c;p>m;++m)u[m]=g;c=p-1}var b,w=[];for(c=0;n>c;)if(a.test(u[c])){var k=c;for(++c;n>c&&a.test(u[c]);++c);w.push(new e(0,k,c))}else{var S=c,C=w.length;for(++c;n>c&&"L"!=u[c];++c);for(m=S;c>m;)if(l.test(u[m])){m>S&&w.splice(C,0,new e(1,S,m));var M=m;for(++m;c>m&&l.test(u[m]);++m);w.splice(C,0,new e(2,M,m)),S=m}else++m;c>S&&w.splice(C,0,new e(1,S,c))}return 1==w[0].level&&(b=i.match(/^\s+/))&&(w[0].from=b[0].length,w.unshift(new e(0,0,b[0].length))),1==Hn(w).level&&(b=i.match(/\s+$/))&&(Hn(w).to-=b[0].length,w.push(new e(0,n-b[0].length,n))),2==w[0].level&&w.unshift(new e(1,w[0].to,w[0].to)),w[0].level!=Hn(w).level&&w.push(new e(w[0].level,n,n)),w}}();return t.version="5.15.2",t}))},{}],11:[function(t,e,i){var n;n=function(t){"use strict";var e=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?Â«Â»ââââ]))/i;t.defineMode("gfm",(function(i,n){var s=0,r={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(t){return{code:t.code,codeBlock:t.codeBlock,ateSpace:t.ateSpace}},token:function(t,i){if(i.combineTokens=null,i.codeBlock)return t.match(/^```+/)?(i.codeBlock=!1,null):(t.skipToEnd(),null);if(t.sol()&&(i.code=!1),t.sol()&&t.match(/^```+/))return t.skipToEnd(),i.codeBlock=!0,null;if("`"===t.peek()){t.next();var r=t.pos;t.eatWhile("`");var o=1+t.pos-r;return i.code?o===s&&(i.code=!1):(s=o,i.code=!0),null}if(i.code)return t.next(),null;if(t.eatSpace())return i.ateSpace=!0,null;if((t.sol()||i.ateSpace)&&(i.ateSpace=!1,!1!==n.gitHubSpice)){if(t.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?:[a-f0-9]{7,40}\b)/))return i.combineTokens=!0,"link";if(t.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return i.combineTokens=!0,"link"}return t.match(e)&&"]("!=t.string.slice(t.start-2,t.start)&&(0==t.start||/\W/.test(t.string.charAt(t.start-1)))?(i.combineTokens=!0,"link"):(t.next(),null)},blankLine:function(t){return t.code=!1,null}},o={underscoresBreakWords:!1,taskLists:!0,fencedCodeBlocks:"```",strikethrough:!0};for(var a in n)o[a]=n[a];return o.name="markdown",t.overlayMode(t.getMode(i,o),r)}),"markdown"),t.defineMIME("text/x-gfm","gfm")},"object"==typeof i&&"object"==typeof e?n(t("../../lib/codemirror"),t("../markdown/markdown"),t("../../addon/mode/overlay")):n(CodeMirror)},{"../../addon/mode/overlay":8,"../../lib/codemirror":10,"../markdown/markdown":12}],12:[function(t,e,i){var n;n=function(t){"use strict";t.defineMode("markdown",(function(e,i){function n(i){if(t.findModeByName){var n=t.findModeByName(i);n&&(i=n.mime||n.mimes[0])}var s=t.getMode(e,i);return"null"==s.name?null:s}function s(t,e,i){return e.f=e.inline=i,i(t,e)}function r(t){return!t||!/\S/.test(t.string)}function o(t){return t.linkTitle=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,b&&t.f==l&&(t.f=f,t.block=a),t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine=null,null}function a(e,o){var a=e.sol(),l=!1!==o.list,u=o.indentedCode;o.indentedCode=!1,l&&(o.indentationDiff>=0?(o.indentationDiff<4&&(o.indentation-=o.indentationDiff),o.list=null):o.indentation>0?o.list=null:o.list=!1);var d=null;if(o.indentationDiff>=4)return e.skipToEnd(),u||r(o.prevLine)?(o.indentation-=4,o.indentedCode=!0,w.code):null;if(e.eatSpace())return null;if((d=e.match(A))&&d[1].length<=6)return o.header=d[1].length,i.highlightFormatting&&(o.formatting="header"),o.f=o.inline,c(o);if(!(r(o.prevLine)||o.quote||l||u)&&(d=e.match(P)))return o.header="="==d[0].charAt(0)?1:2,i.highlightFormatting&&(o.formatting="header"),o.f=o.inline,c(o);if(e.eat(">"))return o.quote=a?1:o.quote+1,i.highlightFormatting&&(o.formatting="quote"),e.eatSpace(),c(o);if("["===e.peek())return s(e,o,m);if(e.match(S,!0))return o.hr=!0,w.hr;if((r(o.prevLine)||l)&&(e.match(C,!1)||e.match(M,!1))){var f=null;for(e.match(C,!0)?f="ul":(e.match(M,!0),f="ol"),o.indentation=e.column()+e.current().length,o.list=!0;o.listStack&&e.column()<o.listStack[o.listStack.length-1];)o.listStack.pop();return o.listStack.push(o.indentation),i.taskLists&&e.match(T,!1)&&(o.taskList=!0),o.f=o.inline,i.highlightFormatting&&(o.formatting=["list","list-"+f]),c(o)}return i.fencedCodeBlocks&&(d=e.match(D,!0))?(o.fencedChars=d[1],o.localMode=n(d[2]),o.localMode&&(o.localState=t.startState(o.localMode)),o.f=o.block=h,i.highlightFormatting&&(o.formatting="code-block"),o.code=-1,c(o)):s(e,o,o.inline)}function l(e,i){var n=x.token(e,i.htmlState);if(!b){var s=t.innerMode(x,i.htmlState);("xml"==s.mode.name&&null===s.state.tagStart&&!s.state.context&&s.state.tokenize.isInText||i.md_inside&&e.current().indexOf(">")>-1)&&(i.f=f,i.block=a,i.htmlState=null)}return n}function h(t,e){return e.fencedChars&&t.match(e.fencedChars,!1)?(e.localMode=e.localState=null,e.f=e.block=u,null):e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),w.code)}function u(t,e){t.match(e.fencedChars),e.block=a,e.f=f,e.fencedChars=null,i.highlightFormatting&&(e.formatting="code-block"),e.code=1;var n=c(e);return e.code=0,n}function c(t){var e=[];if(t.formatting){e.push(w.formatting),"string"==typeof t.formatting&&(t.formatting=[t.formatting]);for(var n=0;n<t.formatting.length;n++)e.push(w.formatting+"-"+t.formatting[n]),"header"===t.formatting[n]&&e.push(w.formatting+"-"+t.formatting[n]+"-"+t.header),"quote"===t.formatting[n]&&(!i.maxBlockquoteDepth||i.maxBlockquoteDepth>=t.quote?e.push(w.formatting+"-"+t.formatting[n]+"-"+t.quote):e.push("error"))}if(t.taskOpen)return e.push("meta"),e.length?e.join(" "):null;if(t.taskClosed)return e.push("property"),e.length?e.join(" "):null;if(t.linkHref?e.push(w.linkHref,"url"):(t.strong&&e.push(w.strong),t.em&&e.push(w.em),t.strikethrough&&e.push(w.strikethrough),t.linkText&&e.push(w.linkText),t.code&&e.push(w.code)),t.header&&e.push(w.header,w.header+"-"+t.header),t.quote&&(e.push(w.quote),!i.maxBlockquoteDepth||i.maxBlockquoteDepth>=t.quote?e.push(w.quote+"-"+t.quote):e.push(w.quote+"-"+i.maxBlockquoteDepth)),!1!==t.list){var s=(t.listStack.length-1)%3;s?1===s?e.push(w.list2):e.push(w.list3):e.push(w.list1)}return t.trailingSpaceNewLine?e.push("trailing-space-new-line"):t.trailingSpace&&e.push("trailing-space-"+(t.trailingSpace%2?"a":"b")),e.length?e.join(" "):null}function d(t,e){return t.match(N,!0)?c(e):void 0}function f(e,n){var s=n.text(e,n);if(void 0!==s)return s;if(n.list)return n.list=null,c(n);if(n.taskList)return"x"!==e.match(T,!0)[1]?n.taskOpen=!0:n.taskClosed=!0,i.highlightFormatting&&(n.formatting="task"),n.taskList=!1,c(n);if(n.taskOpen=!1,n.taskClosed=!1,n.header&&e.match(/^#+$/,!0))return i.highlightFormatting&&(n.formatting="header"),c(n);var r=e.sol(),o=e.next();if(n.linkTitle){n.linkTitle=!1;var a=o;"("===o&&(a=")");var h="^\\s*(?:[^"+(a=(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+a;if(e.match(new RegExp(h),!0))return w.linkHref}if("`"===o){var u=n.formatting;i.highlightFormatting&&(n.formatting="code"),e.eatWhile("`");var d=e.current().length;if(0==n.code)return n.code=d,c(n);if(d==n.code){var f=c(n);return n.code=0,f}return n.formatting=u,c(n)}if(n.code)return c(n);if("\\"===o&&(e.next(),i.highlightFormatting)){var m=c(n),y=w.formatting+"-escape";return m?m+" "+y:y}if("!"===o&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return e.match(/\[[^\]]*\]/),n.inline=n.f=g,w.image;if("["===o&&e.match(/[^\]]*\](\(.*\)| ?\[.*?\])/,!1))return n.linkText=!0,i.highlightFormatting&&(n.formatting="link"),c(n);if("]"===o&&n.linkText&&e.match(/\(.*?\)| ?\[.*?\]/,!1)){i.highlightFormatting&&(n.formatting="link");var m=c(n);return n.linkText=!1,n.inline=n.f=g,m}if("<"===o&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return n.f=n.inline=p,i.highlightFormatting&&(n.formatting="link"),(m=c(n))?m+=" ":m="",m+w.linkInline;if("<"===o&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return n.f=n.inline=p,i.highlightFormatting&&(n.formatting="link"),(m=c(n))?m+=" ":m="",m+w.linkEmail;if("<"===o&&e.match(/^(!--|\w)/,!1)){var v=e.string.indexOf(">",e.pos);if(-1!=v){var b=e.string.substring(e.start,v);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(b)&&(n.md_inside=!0)}return e.backUp(1),n.htmlState=t.startState(x),function(t,e,i){return e.f=e.block=i,i(t,e)}(e,n,l)}if("<"===o&&e.match(/^\/\w*?>/))return n.md_inside=!1,"tag";var k=!1;if(!i.underscoresBreakWords&&"_"===o&&"_"!==e.peek()&&e.match(/(\w)/,!1)){var S=e.pos-2;if(S>=0){var C=e.string.charAt(S);"_"!==C&&C.match(/(\w)/,!1)&&(k=!0)}}if("*"===o||"_"===o&&!k)if(r&&" "===e.peek());else{if(n.strong===o&&e.eat(o))return i.highlightFormatting&&(n.formatting="strong"),f=c(n),n.strong=!1,f;if(!n.strong&&e.eat(o))return n.strong=o,i.highlightFormatting&&(n.formatting="strong"),c(n);if(n.em===o)return i.highlightFormatting&&(n.formatting="em"),f=c(n),n.em=!1,f;if(!n.em)return n.em=o,i.highlightFormatting&&(n.formatting="em"),c(n)}else if(" "===o&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return c(n);e.backUp(1)}if(i.strikethrough)if("~"===o&&e.eatWhile(o)){if(n.strikethrough)return i.highlightFormatting&&(n.formatting="strikethrough"),f=c(n),n.strikethrough=!1,f;if(e.match(/^[^\s]/,!1))return n.strikethrough=!0,i.highlightFormatting&&(n.formatting="strikethrough"),c(n)}else if(" "===o&&e.match(/^~~/,!0)){if(" "===e.peek())return c(n);e.backUp(2)}return" "===o&&(e.match(/ +$/,!1)?n.trailingSpace++:n.trailingSpace&&(n.trailingSpaceNewLine=!0)),c(n)}function p(t,e){if(">"===t.next()){e.f=e.inline=f,i.highlightFormatting&&(e.formatting="link");var n=c(e);return n?n+=" ":n="",n+w.linkInline}return t.match(/^[^>]+/,!0),w.linkInline}function g(t,e){if(t.eatSpace())return null;var n=t.next();return"("===n||"["===n?(e.f=e.inline=function(t){return function(e,n){if(e.next()===t){n.f=n.inline=f,i.highlightFormatting&&(n.formatting="link-string");var s=c(n);return n.linkHref=!1,s}return e.match(L[t]),n.linkHref=!0,c(n)}}("("===n?")":"]"),i.highlightFormatting&&(e.formatting="link-string"),e.linkHref=!0,c(e)):"error"}function m(t,e){return t.match(/^([^\]\\]|\\.)*\]:/,!1)?(e.f=y,t.next(),i.highlightFormatting&&(e.formatting="link"),e.linkText=!0,c(e)):s(t,e,f)}function y(t,e){if(t.match(/^\]:/,!0)){e.f=e.inline=v,i.highlightFormatting&&(e.formatting="link");var n=c(e);return e.linkText=!1,n}return t.match(/^([^\]\\]|\\.)+/,!0),w.linkText}function v(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),e.f=e.inline=f,w.linkHref+" url")}var x=t.getMode(e,"text/html"),b="null"==x.name;void 0===i.highlightFormatting&&(i.highlightFormatting=!1),void 0===i.maxBlockquoteDepth&&(i.maxBlockquoteDepth=0),void 0===i.underscoresBreakWords&&(i.underscoresBreakWords=!0),void 0===i.taskLists&&(i.taskLists=!1),void 0===i.strikethrough&&(i.strikethrough=!1),void 0===i.tokenTypeOverrides&&(i.tokenTypeOverrides={});var w={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"tag",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"};for(var k in w)w.hasOwnProperty(k)&&i.tokenTypeOverrides[k]&&(w[k]=i.tokenTypeOverrides[k]);var S=/^([*\-_])(?:\s*\1){2,}\s*$/,C=/^[*\-+]\s+/,M=/^[0-9]+([.)])\s+/,T=/^\[(x| )\](?=\s)/,A=i.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,P=/^ *(?:\={1,}|-{1,})\s*$/,N=/^[^#!\[\]*_\\<>` "'(~]+/,D=new RegExp("^("+(!0===i.fencedCodeBlocks?"~~~+|```+":i.fencedCodeBlocks)+")[ \\t]*([\\w+#-]*)"),L={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\\]]|\\.)*\])*?(?=\])/},E={startState:function(){return{f:a,prevLine:null,thisLine:null,block:a,htmlState:null,indentation:0,inline:f,text:d,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,htmlState:e.htmlState&&t.copyState(x,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?t.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkTitle:e.linkTitle,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,header:e.header,hr:e.hr,taskList:e.taskList,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedChars:e.fencedChars}},token:function(t,e){if(e.formatting=!1,t!=e.thisLine){var i=e.header||e.hr;if(e.header=0,e.hr=!1,t.match(/^\s*$/,!0)||i){if(o(e),!i)return null;e.prevLine=null}e.prevLine=e.thisLine,e.thisLine=t,e.taskList=!1,e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.f=e.block;var n=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(e.indentationDiff=Math.min(n-e.indentation,4),e.indentation=e.indentation+e.indentationDiff,n>0)return null}return e.f(t,e)},innerMode:function(t){return t.block==l?{state:t.htmlState,mode:x}:t.localState?{state:t.localState,mode:t.localMode}:{state:t,mode:E}},blankLine:o,getType:c,fold:"markdown"};return E}),"xml"),t.defineMIME("text/x-markdown","markdown")},"object"==typeof i&&"object"==typeof e?n(t("../../lib/codemirror"),t("../xml/xml"),t("../meta")):n(CodeMirror)},{"../../lib/codemirror":10,"../meta":13,"../xml/xml":14}],13:[function(t,e,i){var n;n=function(t){"use strict";t.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"]},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Jade",mime:"text/x-jade",mode:"jade",ext:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mime:"text/n-triples",mode:"ntriples",ext:["nt"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:["php","php3","php4","php5","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mime:"text/x-yaml",mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var e=0;e<t.modeInfo.length;e++){var i=t.modeInfo[e];i.mimes&&(i.mime=i.mimes[0])}t.findModeByMIME=function(e){e=e.toLowerCase();for(var i=0;i<t.modeInfo.length;i++){var n=t.modeInfo[i];if(n.mime==e)return n;if(n.mimes)for(var s=0;s<n.mimes.length;s++)if(n.mimes[s]==e)return n}},t.findModeByExtension=function(e){for(var i=0;i<t.modeInfo.length;i++){var n=t.modeInfo[i];if(n.ext)for(var s=0;s<n.ext.length;s++)if(n.ext[s]==e)return n}},t.findModeByFileName=function(e){for(var i=0;i<t.modeInfo.length;i++){var n=t.modeInfo[i];if(n.file&&n.file.test(e))return n}var s=e.lastIndexOf("."),r=s>-1&&e.substring(s+1,e.length);return r?t.findModeByExtension(r):void 0},t.findModeByName=function(e){e=e.toLowerCase();for(var i=0;i<t.modeInfo.length;i++){var n=t.modeInfo[i];if(n.name.toLowerCase()==e)return n;if(n.alias)for(var s=0;s<n.alias.length;s++)if(n.alias[s].toLowerCase()==e)return n}}},n("object"==typeof i&&"object"==typeof e?t("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":10}],14:[function(t,e,i){var n;n=function(t){"use strict";var e={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},i={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};t.defineMode("xml",(function(n,s){function r(t,e){function i(i){return e.tokenize=i,i(t,e)}var n=t.next();return"<"==n?t.eat("!")?t.eat("[")?t.match("CDATA[")?i(a("atom","]]>")):null:t.match("--")?i(a("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),i(l(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=a("meta","?>"),"meta"):(w=t.eat("/")?"closeTag":"openTag",e.tokenize=o,"tag bracket"):"&"==n?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null)}function o(t,e){var i=t.next();if(">"==i||"/"==i&&t.eat(">"))return e.tokenize=r,w=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return w="equals",null;if("<"==i){e.tokenize=r,e.state=d,e.tagName=e.tagStart=null;var n=e.tokenize(t,e);return n?n+" tag error":"tag error"}return/[\'\"]/.test(i)?(e.tokenize=function(t){var e=function(e,i){for(;!e.eol();)if(e.next()==t){i.tokenize=o;break}return"string"};return e.isInAttribute=!0,e}(i),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function a(t,e){return function(i,n){for(;!i.eol();){if(i.match(e)){n.tokenize=r;break}i.next()}return t}}function l(t){return function(e,i){for(var n;null!=(n=e.next());){if("<"==n)return i.tokenize=l(t+1),i.tokenize(e,i);if(">"==n){if(1==t){i.tokenize=r;break}return i.tokenize=l(t-1),i.tokenize(e,i)}}return"meta"}}function h(t,e,i){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=i,(C.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function u(t){t.context&&(t.context=t.context.prev)}function c(t,e){for(var i;;){if(!t.context)return;if(i=t.context.tagName,!C.contextGrabbers.hasOwnProperty(i)||!C.contextGrabbers[i].hasOwnProperty(e))return;u(t)}}function d(t,e,i){return"openTag"==t?(i.tagStart=e.column(),f):"closeTag"==t?p:d}function f(t,e,i){return"word"==t?(i.tagName=e.current(),k="tag",y):(k="error",f)}function p(t,e,i){if("word"==t){var n=e.current();return i.context&&i.context.tagName!=n&&C.implicitlyClosed.hasOwnProperty(i.context.tagName)&&u(i),i.context&&i.context.tagName==n||!1===C.matchClosing?(k="tag",g):(k="tag error",m)}return k="error",m}function g(t,e,i){return"endTag"!=t?(k="error",g):(u(i),d)}function m(t,e,i){return k="error",g(t,0,i)}function y(t,e,i){if("word"==t)return k="attribute",v;if("endTag"==t||"selfcloseTag"==t){var n=i.tagName,s=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==t||C.autoSelfClosers.hasOwnProperty(n)?c(i,n):(c(i,n),i.context=new h(i,n,s==i.indented)),d}return k="error",y}function v(t,e,i){return"equals"==t?x:(C.allowMissing||(k="error"),y(t,0,i))}function x(t,e,i){return"string"==t?b:"word"==t&&C.allowUnquoted?(k="string",y):(k="error",y(t,0,i))}function b(t,e,i){return"string"==t?b:y(t,0,i)}var w,k,S=n.indentUnit,C={},M=s.htmlMode?e:i;for(var T in M)C[T]=M[T];for(var T in s)C[T]=s[T];return r.isInText=!0,{startState:function(t){var e={tokenize:r,state:d,indented:t||0,tagName:null,tagStart:null,context:null};return null!=t&&(e.baseIndent=t),e},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;w=null;var i=e.tokenize(t,e);return(i||w)&&"comment"!=i&&(k=null,e.state=e.state(w||i,t,e),k&&(i="error"==k?i+" error":k)),i},indent:function(e,i,n){var s=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+S;if(s&&s.noIndent)return t.Pass;if(e.tokenize!=o&&e.tokenize!=r)return n?n.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==C.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+S*(C.multilineTagIndentFactor||1);if(C.alignCDATA&&/<!\[CDATA\[/.test(i))return 0;var a=i&&/^<(\/)?([\w_:\.-]*)/.exec(i);if(a&&a[1])for(;s;){if(s.tagName==a[2]){s=s.prev;break}if(!C.implicitlyClosed.hasOwnProperty(s.tagName))break;s=s.prev}else if(a)for(;s;){var l=C.contextGrabbers[s.tagName];if(!l||!l.hasOwnProperty(a[2]))break;s=s.prev}for(;s&&s.prev&&!s.startOfLine;)s=s.prev;return s?s.indent+S:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:C.htmlMode?"html":"xml",helperType:C.htmlMode?"html":"xml",skipAttribute:function(t){t.state==x&&(t.state=y)}}})),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})},n("object"==typeof i&&"object"==typeof e?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],15:[function(t,e,i){i.read=function(t,e,i,n,s){var r,o,a=8*s-n-1,l=(1<<a)-1,h=l>>1,u=-7,c=i?s-1:0,d=i?-1:1,f=t[e+c];for(c+=d,r=f&(1<<-u)-1,f>>=-u,u+=a;u>0;r=256*r+t[e+c],c+=d,u-=8);for(o=r&(1<<-u)-1,r>>=-u,u+=n;u>0;o=256*o+t[e+c],c+=d,u-=8);if(0===r)r=1-h;else{if(r===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),r-=h}return(f?-1:1)*o*Math.pow(2,r-n)},i.write=function(t,e,i,n,s,r){var o,a,l,h=8*r-s-1,u=(1<<h)-1,c=u>>1,d=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:r-1,p=n?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+c>=1?d/l:d*Math.pow(2,1-c))*l>=2&&(o++,l/=2),o+c>=u?(a=0,o=u):o+c>=1?(a=(e*l-1)*Math.pow(2,s),o+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,s),o=0));s>=8;t[i+f]=255&a,f+=p,a/=256,s-=8);for(o=o<<s|a,h+=s;h>0;t[i+f]=255&o,f+=p,o/=256,h-=8);t[i+f-p]|=128*g}},{}],16:[function(t,e,i){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],17:[function(t,e,i){(function(t){(function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||u.defaults,this.rules=c.normal,this.options.gfm&&(this.options.tables?this.rules=c.tables:this.rules=c.gfm)}function n(t,e){if(this.options=e||u.defaults,this.links=t,this.rules=d.normal,this.renderer=this.options.renderer||new s,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=d.breaks:this.rules=d.gfm:this.options.pedantic&&(this.rules=d.pedantic)}function s(t){this.options=t||{}}function r(t){this.tokens=[],this.token=null,this.options=t||u.defaults,this.options.renderer=this.options.renderer||new s,this.renderer=this.options.renderer,this.renderer.options=this.options}function o(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function a(t,e){return t=t.source,e=e||"",function i(n,s){return n?(s=(s=s.source||s).replace(/(^|[^\[])\^/g,"$1"),t=t.replace(n,s),i):new RegExp(t,e)}}function l(){}function h(t){for(var e,i,n=1;n<arguments.length;n++)for(i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}function u(e,i,n){if(n||"function"==typeof i){n||(n=i,i=null);var s,a,l=(i=h({},u.defaults,i||{})).highlight,c=0;try{s=t.lex(e,i)}catch(t){return n(t)}a=s.length;var d=function(t){if(t)return i.highlight=l,n(t);var e;try{e=r.parse(s,i)}catch(e){t=e}return i.highlight=l,t?n(t):n(null,e)};if(!l||l.length<3)return d();if(delete i.highlight,!a)return d();for(;c<s.length;c++)!function(t){"code"!==t.type?--a||d():l(t.text,t.lang,(function(e,i){return e?d(e):null==i||i===t.text?--a||d():(t.text=i,t.escaped=!0,void(--a||d()))}))}(s[c])}else try{return i&&(i=h({},u.defaults,i)),r.parse(t.lex(e,i),i)}catch(t){if(t.message+="\nPlease report this to https://github.com/chjj/marked.",(i||u.defaults).silent)return"<p>An error occured:</p><pre>"+o(t.message+"",!0)+"</pre>";throw t}}var c={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:l,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:l,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:l,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/};c.item=a(c.item,"gm")(/bull/g,c.bullet)(),c.list=a(c.list)(/bull/g,c.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+c.def.source+")")(),c.blockquote=a(c.blockquote)("def",c.def)(),c._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",c.html=a(c.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,c._tag)(),c.paragraph=a(c.paragraph)("hr",c.hr)("heading",c.heading)("lheading",c.lheading)("blockquote",c.blockquote)("tag","<"+c._tag)("def",c.def)(),c.normal=h({},c),c.gfm=h({},c.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),c.gfm.paragraph=a(c.paragraph)("(?!","(?!"+c.gfm.fences.source.replace("\\1","\\2")+"|"+c.list.source.replace("\\1","\\3")+"|")(),c.tables=h({},c.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=c,t.lex=function(e,i){return new t(i).lex(e)},t.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},t.prototype.token=function(t,e,i){var n,s,r,o,a,l,h,u,d;for(t=t.replace(/^ +$/gm,"");t;)if((r=this.rules.newline.exec(t))&&(t=t.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(t))t=t.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?r:r.replace(/\n+$/,"")});else if(r=this.rules.fences.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"code",lang:r[2],text:r[3]||""});else if(r=this.rules.heading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if(e&&(r=this.rules.nptable.exec(t))){for(t=t.substring(r[0].length),l={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/\n$/,"").split("\n")},u=0;u<l.align.length;u++)/^ *-+: *$/.test(l.align[u])?l.align[u]="right":/^ *:-+: *$/.test(l.align[u])?l.align[u]="center":/^ *:-+ *$/.test(l.align[u])?l.align[u]="left":l.align[u]=null;for(u=0;u<l.cells.length;u++)l.cells[u]=l.cells[u].split(/ *\| */);this.tokens.push(l)}else if(r=this.rules.lheading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2]?1:2,text:r[1]});else if(r=this.rules.hr.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,e,!0),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(t)){for(t=t.substring(r[0].length),o=r[2],this.tokens.push({type:"list_start",ordered:o.length>1}),n=!1,d=(r=r[0].match(this.rules.item)).length,u=0;d>u;u++)h=(l=r[u]).length,~(l=l.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(h-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+h+"}","gm"),"")),this.options.smartLists&&u!==d-1&&(o===(a=c.bullet.exec(r[u+1])[0])||o.length>1&&a.length>1||(t=r.slice(u+1).join("\n")+t,u=d-1)),s=n||/\n\n(?!\s*$)/.test(l),u!==d-1&&(n="\n"===l.charAt(l.length-1),s||(s=n)),this.tokens.push({type:s?"loose_item_start":"list_item_start"}),this.token(l,!1,i),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(t))t=t.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:r[0]});else if(!i&&e&&(r=this.rules.def.exec(t)))t=t.substring(r[0].length),this.tokens.links[r[1].toLowerCase()]={href:r[2],title:r[3]};else if(e&&(r=this.rules.table.exec(t))){for(t=t.substring(r[0].length),l={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<l.align.length;u++)/^ *-+: *$/.test(l.align[u])?l.align[u]="right":/^ *:-+: *$/.test(l.align[u])?l.align[u]="center":/^ *:-+ *$/.test(l.align[u])?l.align[u]="left":l.align[u]=null;for(u=0;u<l.cells.length;u++)l.cells[u]=l.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(e&&(r=this.rules.paragraph.exec(t)))t=t.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var d={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:l,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:l,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/};d.link=a(d.link)("inside",d._inside)("href",d._href)(),d.reflink=a(d.reflink)("inside",d._inside)(),d.normal=h({},d),d.pedantic=h({},d.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),d.gfm=h({},d.normal,{escape:a(d.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:a(d.text)("]|","~]|")("|","|https?://|")()}),d.breaks=h({},d.gfm,{br:a(d.br)("{2,}","*")(),text:a(d.gfm.text)("{2,}","*")()}),n.rules=d,n.output=function(t,e,i){return new n(e,i).output(t)},n.prototype.output=function(t){for(var e,i,n,s,r="";t;)if(s=this.rules.escape.exec(t))t=t.substring(s[0].length),r+=s[1];else if(s=this.rules.autolink.exec(t))t=t.substring(s[0].length),"@"===s[2]?(i=":"===s[1].charAt(6)?this.mangle(s[1].substring(7)):this.mangle(s[1]),n=this.mangle("mailto:")+i):n=i=o(s[1]),r+=this.renderer.link(n,null,i);else if(this.inLink||!(s=this.rules.url.exec(t))){if(s=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),t=t.substring(s[0].length),r+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):o(s[0]):s[0];else if(s=this.rules.link.exec(t))t=t.substring(s[0].length),this.inLink=!0,r+=this.outputLink(s,{href:s[2],title:s[3]}),this.inLink=!1;else if((s=this.rules.reflink.exec(t))||(s=this.rules.nolink.exec(t))){if(t=t.substring(s[0].length),e=(s[2]||s[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){r+=s[0].charAt(0),t=s[0].substring(1)+t;continue}this.inLink=!0,r+=this.outputLink(s,e),this.inLink=!1}else if(s=this.rules.strong.exec(t))t=t.substring(s[0].length),r+=this.renderer.strong(this.output(s[2]||s[1]));else if(s=this.rules.em.exec(t))t=t.substring(s[0].length),r+=this.renderer.em(this.output(s[2]||s[1]));else if(s=this.rules.code.exec(t))t=t.substring(s[0].length),r+=this.renderer.codespan(o(s[2],!0));else if(s=this.rules.br.exec(t))t=t.substring(s[0].length),r+=this.renderer.br();else if(s=this.rules.del.exec(t))t=t.substring(s[0].length),r+=this.renderer.del(this.output(s[1]));else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),r+=this.renderer.text(o(this.smartypants(s[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(s[0].length),n=i=o(s[1]),r+=this.renderer.link(n,null,i);return r},n.prototype.outputLink=function(t,e){var i=o(e.href),n=e.title?o(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(i,n,this.output(t[1])):this.renderer.image(i,n,o(t[1]))},n.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"â").replace(/--/g,"â").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1â").replace(/'/g,"â").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1â").replace(/"/g,"â").replace(/\.{3}/g,"â¦"):t},n.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,i="",n=t.length,s=0;n>s;s++)e=t.charCodeAt(s),Math.random()>.5&&(e="x"+e.toString(16)),i+="&#"+e+";";return i},s.prototype.code=function(t,e,i){if(this.options.highlight){var n=this.options.highlight(t,e);null!=n&&n!==t&&(i=!0,t=n)}return e?'<pre><code class="'+this.options.langPrefix+o(e,!0)+'">'+(i?t:o(t,!0))+"\n</code></pre>\n":"<pre><code>"+(i?t:o(t,!0))+"\n</code></pre>"},s.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},s.prototype.html=function(t){return t},s.prototype.heading=function(t,e,i){return"<h"+e+' id="'+this.options.headerPrefix+i.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},s.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},s.prototype.list=function(t,e){var i=e?"ol":"ul";return"<"+i+">\n"+t+"</"+i+">\n"},s.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},s.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},s.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},s.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},s.prototype.tablecell=function(t,e){var i=e.header?"th":"td";return(e.align?"<"+i+' style="text-align:'+e.align+'">':"<"+i+">")+t+"</"+i+">\n"},s.prototype.strong=function(t){return"<strong>"+t+"</strong>"},s.prototype.em=function(t){return"<em>"+t+"</em>"},s.prototype.codespan=function(t){return"<code>"+t+"</code>"},s.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},s.prototype.del=function(t){return"<del>"+t+"</del>"},s.prototype.link=function(t,e,i){if(this.options.sanitize){try{var n=decodeURIComponent(function(t){return t.replace(/&([#\w]+);/g,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return""}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:"))return""}var s='<a href="'+t+'"';return e&&(s+=' title="'+e+'"'),s+">"+i+"</a>"},s.prototype.image=function(t,e,i){var n='<img src="'+t+'" alt="'+i+'"';return e&&(n+=' title="'+e+'"'),n+(this.options.xhtml?"/>":">")},s.prototype.text=function(t){return t},r.parse=function(t,e,i){return new r(e,i).parse(t)},r.prototype.parse=function(t){this.inline=new n(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},r.prototype.next=function(){return this.token=this.tokens.pop()},r.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},r.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},r.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,i,n,s="",r="";for(i="",t=0;t<this.token.header.length;t++)({header:!0,align:this.token.align[t]}),i+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(s+=this.renderer.tablerow(i),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],i="",n=0;n<e.length;n++)i+=this.renderer.tablecell(this.inline.output(e[n]),{header:!1,align:this.token.align[n]});r+=this.renderer.tablerow(i)}return this.renderer.table(s,r);case"blockquote_start":for(r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":r="";for(var o=this.token.ordered;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,o);case"list_item_start":for(r="";"list_item_end"!==this.next().type;)r+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(r);case"loose_item_start":for(r="";"list_item_end"!==this.next().type;)r+=this.tok();return this.renderer.listitem(r);case"html":var a=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(a);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},l.exec=l,u.options=u.setOptions=function(t){return h(u.defaults,t),u},u.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new s,xhtml:!1},u.Parser=r,u.parser=r.parse,u.Renderer=s,u.Lexer=t,u.lexer=t.lex,u.InlineLexer=n,u.inlineLexer=n.output,u.parse=u,void 0!==e&&"object"==typeof i?e.exports=u:this.marked=u}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(t,e,i){(function(i,n){"use strict";var s=function(t,e,i,s){if(s=s||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=s.flags||{},t){if(this.dictionary=t,"undefined"!=typeof window&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension)e||(e=this._readFile(chrome.extension.getURL("lib/typo/dictionaries/"+t+"/"+t+".aff"))),i||(i=this._readFile(chrome.extension.getURL("lib/typo/dictionaries/"+t+"/"+t+".dic")));else{if(s.dictionaryPath)var r=s.dictionaryPath;else if(void 0!==n)r=n+"/dictionaries";else r="./dictionaries";e||(e=this._readFile(r+"/"+t+"/"+t+".aff")),i||(i=this._readFile(r+"/"+t+"/"+t+".dic"))}this.rules=this._parseAFF(e),this.compoundRuleCodes={};for(var o=0,a=this.compoundRules.length;a>o;o++)for(var l=this.compoundRules[o],h=0,u=l.length;u>h;h++)this.compoundRuleCodes[l[h]]=[];for(var o in"ONLYINCOMPOUND"in this.flags&&(this.compoundRuleCodes[this.flags.ONLYINCOMPOUND]=[]),this.dictionaryTable=this._parseDIC(i),this.compoundRuleCodes)0==this.compoundRuleCodes[o].length&&delete this.compoundRuleCodes[o];for(o=0,a=this.compoundRules.length;a>o;o++){var c=this.compoundRules[o],d="";for(h=0,u=c.length;u>h;h++){var f=c[h];d+=f in this.compoundRuleCodes?"("+this.compoundRuleCodes[f].join("|")+")":f}this.compoundRules[o]=new RegExp(d,"i")}}return this};s.prototype={load:function(t){for(var e in t)this[e]=t[e];return this},_readFile:function(e,n){if(n||(n="utf8"),"undefined"!=typeof XMLHttpRequest){var s=new XMLHttpRequest;return s.open("GET",e,!1),s.overrideMimeType&&s.overrideMimeType("text/plain; charset="+n),s.send(null),s.responseText}if(void 0!==t){var r=t("fs");try{if(r.existsSync(e)){var o=r.statSync(e),a=r.openSync(e,"r"),l=new i(o.size);return r.readSync(a,l,0,l.length,null),l.toString(n,0,l.length)}console.log("Path "+e+" does not exist.")}catch(t){return console.log(t),""}}},_parseAFF:function(t){for(var e={},i=(t=this._removeAffixComments(t)).split("\n"),n=0,s=i.length;s>n;n++){var r=(x=i[n]).split(/\s+/),o=r[0];if("PFX"==o||"SFX"==o){for(var a=r[1],l=r[2],h=[],u=n+1,c=n+1+(v=parseInt(r[3],10));c>u;u++){var d=(b=(x=i[u]).split(/\s+/))[2],f=b[3].split("/"),p=f[0];"0"===p&&(p="");var g=this.parseRuleCodes(f[1]),m=b[4],y={};y.add=p,g.length>0&&(y.continuationClasses=g),"."!==m&&(y.match="SFX"===o?new RegExp(m+"$"):new RegExp("^"+m)),"0"!=d&&(y.remove="SFX"===o?new RegExp(d+"$"):d),h.push(y)}e[a]={type:o,combineable:"Y"==l,entries:h},n+=v}else if("COMPOUNDRULE"===o){var v;for(u=n+1,c=n+1+(v=parseInt(r[1],10));c>u;u++){var x,b=(x=i[u]).split(/\s+/);this.compoundRules.push(b[1])}n+=v}else if("REP"===o){3===(b=x.split(/\s+/)).length&&this.replacementTable.push([b[1],b[2]])}else this.flags[o]=r[1]}return e},_removeAffixComments:function(t){return(t=(t=(t=t.replace(/#.*$/gm,"")).replace(/^\s\s*/m,"").replace(/\s\s*$/m,"")).replace(/\n{2,}/g,"\n")).replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_parseDIC:function(t){function e(t,e){t in n&&"object"==typeof n[t]||(n[t]=[]),n[t].push(e)}for(var i=(t=this._removeDicComments(t)).split("\n"),n={},s=1,r=i.length;r>s;s++){var o=i[s].split("/",2),a=o[0];if(o.length>1){var l=this.parseRuleCodes(o[1]);"NEEDAFFIX"in this.flags&&-1!=l.indexOf(this.flags.NEEDAFFIX)||e(a,l);for(var h=0,u=l.length;u>h;h++){var c=l[h],d=this.rules[c];if(d)for(var f=this._applyRule(a,d),p=0,g=f.length;g>p;p++){var m=f[p];if(e(m,[]),d.combineable)for(var y=h+1;u>y;y++){var v=l[y],x=this.rules[v];if(x&&x.combineable&&d.type!=x.type)for(var b=this._applyRule(m,x),w=0,k=b.length;k>w;w++){e(b[w],[])}}}c in this.compoundRuleCodes&&this.compoundRuleCodes[c].push(a)}}else e(a.trim(),[])}return n},_removeDicComments:function(t){return t.replace(/^\t.*$/gm,"")},parseRuleCodes:function(t){if(!t)return[];if(!("FLAG"in this.flags))return t.split("");if("long"===this.flags.FLAG){for(var e=[],i=0,n=t.length;n>i;i+=2)e.push(t.substr(i,2));return e}return"num"===this.flags.FLAG?textCode.split(","):void 0},_applyRule:function(t,e){for(var i=e.entries,n=[],s=0,r=i.length;r>s;s++){var o=i[s];if(!o.match||t.match(o.match)){var a=t;if(o.remove&&(a=a.replace(o.remove,"")),"SFX"===e.type?a+=o.add:a=o.add+a,n.push(a),"continuationClasses"in o)for(var l=0,h=o.continuationClasses.length;h>l;l++){var u=this.rules[o.continuationClasses[l]];u&&(n=n.concat(this._applyRule(a,u)))}}}return n},check:function(t){var e=t.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(e))return!0;if(e.toUpperCase()===e){var i=e[0]+e.substring(1).toLowerCase();if(this.hasFlag(i,"KEEPCASE"))return!1;if(this.checkExact(i))return!0}var n=e.toLowerCase();if(n!==e){if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0}return!1},checkExact:function(t){var e=this.dictionaryTable[t];if(void 0===e){if("COMPOUNDMIN"in this.flags&&t.length>=this.flags.COMPOUNDMIN)for(var i=0,n=this.compoundRules.length;n>i;i++)if(t.match(this.compoundRules[i]))return!0;return!1}if("object"==typeof e){for(i=0,n=e.length;n>i;i++)if(!this.hasFlag(t,"ONLYINCOMPOUND",e[i]))return!0;return!1}},hasFlag:function(t,e,i){if(e in this.flags){if(void 0===i)i=Array.prototype.concat.apply([],this.dictionaryTable[t]);if(i&&-1!==i.indexOf(this.flags[e]))return!0}return!1},alphabet:"",suggest:function(t,e){function i(t){for(var e=[],i=0,n=t.length;n>i;i++){for(var s=t[i],r=[],o=0,a=s.length+1;a>o;o++)r.push([s.substring(0,o),s.substring(o,s.length)]);var h=[];for(o=0,a=r.length;a>o;o++){(p=r[o])[1]&&h.push(p[0]+p[1].substring(1))}var u=[];for(o=0,a=r.length;a>o;o++){(p=r[o])[1].length>1&&u.push(p[0]+p[1][1]+p[1][0]+p[1].substring(2))}var c=[];for(o=0,a=r.length;a>o;o++){if((p=r[o])[1])for(var d=0,f=l.alphabet.length;f>d;d++)c.push(p[0]+l.alphabet[d]+p[1].substring(1))}for(o=0,a=r.length;a>o;o++){var p;if((p=r[o])[1])for(d=0,f=l.alphabet.length;f>d;d++)c.push(p[0]+l.alphabet[d]+p[1])}e=(e=(e=(e=e.concat(h)).concat(u)).concat(c)).concat([])}return e}function n(t){for(var e=[],i=0;i<t.length;i++)l.check(t[i])&&e.push(t[i]);return e}if(e||(e=5),this.check(t))return[];for(var s=0,r=this.replacementTable.length;r>s;s++){var o=this.replacementTable[s];if(-1!==t.indexOf(o[0])){var a=t.replace(o[0],o[1]);if(this.check(a))return[a]}}var l=this;return l.alphabet="abcdefghijklmnopqrstuvwxyz",function(t){for(var s=i([t]),r=i(s),o=n(s).concat(n(r)),a={},h=0,u=o.length;u>h;h++)o[h]in a?a[o[h]]+=1:a[o[h]]=1;var c=[];for(var h in a)c.push([h,a[h]]);c.sort((function(t,e){return t[1]<e[1]?-1:1})).reverse();var d=[];for(h=0,u=Math.min(e,c.length);u>h;h++)l.hasFlag(c[h][0],"NOSUGGEST")||d.push(c[h][0]);return d}(t)}},void 0!==e&&(e.exports=s)}).call(this,t("buffer").Buffer,"/node_modules/typo-js")},{buffer:3,fs:2}],19:[function(t,e,i){var n=t("codemirror");n.commands.tabAndIndentMarkdownList=function(t){var e=t.listSelections()[0].head;if(!1!==t.getStateAfter(e.line).list)t.execCommand("indentMore");else if(t.options.indentWithTabs)t.execCommand("insertTab");else{var i=Array(t.options.tabSize+1).join(" ");t.replaceSelection(i)}},n.commands.shiftTabAndUnindentMarkdownList=function(t){var e=t.listSelections()[0].head;if(!1!==t.getStateAfter(e.line).list)t.execCommand("indentLess");else if(t.options.indentWithTabs)t.execCommand("insertTab");else{var i=Array(t.options.tabSize+1).join(" ");t.replaceSelection(i)}}},{codemirror:10}],20:[function(t,e,i){"use strict";function n(t){return U?t.replace("Ctrl","Cmd"):t.replace("Cmd","Ctrl")}function s(t,e,i){t=t||{};var n=document.createElement("a");return e=null==e||e,t.title&&e&&(n.title=o(t.title,t.action,i),U&&(n.title=n.title.replace("Ctrl","â"),n.title=n.title.replace("Alt","â¥"))),n.tabIndex=-1,n.className=t.className,n}function r(){var t=document.createElement("i");return t.className="separator",t.innerHTML="|",t}function o(t,e,i){var s,r=t;return e&&(i[s=q(e)]&&(r+=" ("+n(i[s])+")")),r}function a(t,e){e=e||t.getCursor("start");var i=t.getTokenAt(e);if(!i.type)return{};for(var n,s,r=i.type.split(" "),o={},a=0;a<r.length;a++)"strong"===(n=r[a])?o.bold=!0:"variable-2"===n?(s=t.getLine(e.line),/^\s*\d+\.\s/.test(s)?o["ordered-list"]=!0:o["unordered-list"]=!0):"atom"===n?o.quote=!0:"em"===n?o.italic=!0:"quote"===n?o.quote=!0:"strikethrough"===n?o.strikethrough=!0:"comment"===n?o.code=!0:"link"===n?o.link=!0:"tag"===n?o.image=!0:n.match(/^header(\-[1-6])?$/)&&(o[n.replace("header","heading")]=!0);return o}function l(t){var e=t.codemirror;e.setOption("fullScreen",!e.getOption("fullScreen")),e.getOption("fullScreen")?(W=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=W;var i=e.getWrapperElement();/fullscreen/.test(i.previousSibling.className)?i.previousSibling.className=i.previousSibling.className.replace(/\s*fullscreen\b/,""):i.previousSibling.className+=" fullscreen";var n=t.toolbarElements.fullscreen;/active/.test(n.className)?n.className=n.className.replace(/\s*active\s*/g,""):n.className+=" active";var s=e.getWrapperElement().nextSibling;/editor-preview-active-side/.test(s.className)&&P(t)}function h(t){_(t,"bold",t.options.blockStyles.bold)}function u(t){_(t,"italic",t.options.blockStyles.italic)}function c(t){_(t,"strikethrough","~~")}function d(t){function e(t){if("object"!=typeof t)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof t+": "+t;return t.styles&&t.styles[2]&&-1!==t.styles[2].indexOf("formatting-code-block")}function i(t){return t.state.base.base||t.state.base}function n(t,n,s,r,o){s=s||t.getLineHandle(n),r=r||t.getTokenAt({line:n,ch:1}),o=o||!!s.text&&t.getTokenAt({line:n,ch:s.text.length-1});var a=r.type?r.type.split(" "):[];return o&&i(o).indentedCode?"indented":-1!==a.indexOf("comment")&&(i(r).fencedChars||i(o).fencedChars||e(s)?"fenced":"single")}var s,r,o,a=t.options.blockStyles.code,l=t.codemirror,h=l.getCursor("start"),u=l.getCursor("end"),c=l.getTokenAt({line:h.line,ch:h.ch||1}),d=l.getLineHandle(h.line),f=n(l,h.line,d,c);if("single"===f){var p=d.text.slice(0,h.ch).replace("`",""),g=d.text.slice(h.ch).replace("`","");l.replaceRange(p+g,{line:h.line,ch:0},{line:h.line,ch:99999999999999}),h.ch--,h!==u&&u.ch--,l.setSelection(h,u),l.focus()}else if("fenced"===f)if(h.line!==u.line||h.ch!==u.ch){for(s=h.line;s>=0&&!e(d=l.getLineHandle(s));s--);var m,y,v,x,b=i(l.getTokenAt({line:s,ch:1})).fencedChars;e(l.getLineHandle(h.line))?(m="",y=h.line):e(l.getLineHandle(h.line-1))?(m="",y=h.line-1):(m=b+"\n",y=h.line),e(l.getLineHandle(u.line))?(v="",x=u.line,0===u.ch&&(x+=1)):0!==u.ch&&e(l.getLineHandle(u.line+1))?(v="",x=u.line+1):(v=b+"\n",x=u.line+1),0===u.ch&&(x-=1),l.operation((function(){l.replaceRange(v,{line:x,ch:0},{line:x+(v?0:1),ch:0}),l.replaceRange(m,{line:y,ch:0},{line:y+(m?0:1),ch:0})})),l.setSelection({line:y+(m?1:0),ch:0},{line:x+(m?1:-1),ch:0}),l.focus()}else{var w=h.line;if(e(l.getLineHandle(h.line))&&("fenced"===n(l,h.line+1)?(s=h.line,w=h.line+1):(r=h.line,w=h.line-1)),void 0===s)for(s=w;s>=0&&!e(d=l.getLineHandle(s));s--);if(void 0===r)for(o=l.lineCount(),r=w;o>r&&!e(d=l.getLineHandle(r));r++);l.operation((function(){l.replaceRange("",{line:s,ch:0},{line:s+1,ch:0}),l.replaceRange("",{line:r-1,ch:0},{line:r,ch:0})})),l.focus()}else if("indented"===f){if(h.line!==u.line||h.ch!==u.ch)s=h.line,r=u.line,0===u.ch&&r--;else{for(s=h.line;s>=0;s--)if(!(d=l.getLineHandle(s)).text.match(/^\s*$/)&&"indented"!==n(l,s,d)){s+=1;break}for(o=l.lineCount(),r=h.line;o>r;r++)if(!(d=l.getLineHandle(r)).text.match(/^\s*$/)&&"indented"!==n(l,r,d)){r-=1;break}}var k=l.getLineHandle(r+1),S=k&&l.getTokenAt({line:r+1,ch:k.text.length-1});S&&i(S).indentedCode&&l.replaceRange("\n",{line:r+1,ch:0});for(var C=s;r>=C;C++)l.indentLine(C,"subtract");l.focus()}else{var M=h.line===u.line&&h.ch===u.ch&&0===h.ch,T=h.line!==u.line;M||T?function(t,e,i,n){var s=e.line+1,r=i.line+1,o=e.line!==i.line,a=n+"\n",l="\n"+n;o&&r++,o&&0===i.ch&&(l=n+"\n",r--),D(t,!1,[a,l]),t.setSelection({line:s,ch:0},{line:r,ch:0})}(l,h,u,a):D(l,!1,["`","`"])}}function f(t){E(t.codemirror,"quote")}function p(t){L(t.codemirror,"smaller")}function g(t){L(t.codemirror,"bigger")}function m(t){L(t.codemirror,void 0,1)}function y(t){L(t.codemirror,void 0,2)}function v(t){L(t.codemirror,void 0,3)}function x(t){E(t.codemirror,"unordered-list")}function b(t){E(t.codemirror,"ordered-list")}function w(t){!function(t){if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className))for(var e,i=t.getCursor("start"),n=t.getCursor("end"),s=i.line;s<=n.line;s++)e=(e=t.getLine(s)).replace(/^[ ]*([# ]+|\*|\-|[> ]+|[0-9]+(.|\)))[ ]*/,""),t.replaceRange(e,{line:s,ch:0},{line:s,ch:99999999999999})}(t.codemirror)}function k(t){var e=t.codemirror,i=a(e),n=t.options,s="http://";return!(n.promptURLs&&(s=prompt(n.promptTexts.link),!s))&&void D(e,i.link,n.insertTexts.link,s)}function S(t){var e=t.codemirror,i=a(e),n=t.options,s="http://";return!(n.promptURLs&&(s=prompt(n.promptTexts.image),!s))&&void D(e,i.image,n.insertTexts.image,s)}function C(t){var e=t.codemirror,i=a(e),n=t.options;D(e,i.table,n.insertTexts.table)}function M(t){var e=t.codemirror,i=a(e),n=t.options;D(e,i.image,n.insertTexts.horizontalRule)}function T(t){var e=t.codemirror;e.undo(),e.focus()}function A(t){var e=t.codemirror;e.redo(),e.focus()}function P(t){var e=t.codemirror,i=e.getWrapperElement(),n=i.nextSibling,s=t.toolbarElements["side-by-side"],r=!1;/editor-preview-active-side/.test(n.className)?(n.className=n.className.replace(/\s*editor-preview-active-side\s*/g,""),s.className=s.className.replace(/\s*active\s*/g,""),i.className=i.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout((function(){e.getOption("fullScreen")||l(t),n.className+=" editor-preview-active-side"}),1),s.className+=" active",i.className+=" CodeMirror-sided",r=!0);var o=i.lastChild;if(/editor-preview-active/.test(o.className)){o.className=o.className.replace(/\s*editor-preview-active\s*/g,"");var a=t.toolbarElements.preview,h=i.previousSibling;a.className=a.className.replace(/\s*active\s*/g,""),h.className=h.className.replace(/\s*disabled-for-preview*/g,"")}e.sideBySideRenderingFunction||(e.sideBySideRenderingFunction=function(){n.innerHTML=t.options.previewRender(t.value(),n)}),r?(n.innerHTML=t.options.previewRender(t.value(),n),e.on("update",e.sideBySideRenderingFunction)):e.off("update",e.sideBySideRenderingFunction),e.refresh()}function N(t){var e=t.codemirror,i=e.getWrapperElement(),n=i.previousSibling,s=!!t.options.toolbar&&t.toolbarElements.preview,r=i.lastChild;r&&/editor-preview/.test(r.className)||((r=document.createElement("div")).className="editor-preview",i.appendChild(r)),/editor-preview-active/.test(r.className)?(r.className=r.className.replace(/\s*editor-preview-active\s*/g,""),s&&(s.className=s.className.replace(/\s*active\s*/g,""),n.className=n.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout((function(){r.className+=" editor-preview-active"}),1),s&&(s.className+=" active",n.className+=" disabled-for-preview")),r.innerHTML=t.options.previewRender(t.value(),r);var o=e.getWrapperElement().nextSibling;/editor-preview-active-side/.test(o.className)&&P(t)}function D(t,e,i,n){if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className)){var s,r=i[0],o=i[1],a=t.getCursor("start"),l=t.getCursor("end");n&&(o=o.replace("#url#",n)),e?(r=(s=t.getLine(a.line)).slice(0,a.ch),o=s.slice(a.ch),t.replaceRange(r+o,{line:a.line,ch:0})):(s=t.getSelection(),t.replaceSelection(r+s+o),a.ch+=r.length,a!==l&&(l.ch+=r.length)),t.setSelection(a,l),t.focus()}}function L(t,e,i){if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className)){for(var n=t.getCursor("start"),s=t.getCursor("end"),r=n.line;r<=s.line;r++)!function(n){var s=t.getLine(n),r=s.search(/[^#]/);s=void 0!==e?0>=r?"bigger"==e?"###### "+s:"# "+s:6==r&&"smaller"==e?s.substr(7):1==r&&"bigger"==e?s.substr(2):"bigger"==e?s.substr(1):"#"+s:1==i?0>=r?"# "+s:r==i?s.substr(r+1):"# "+s.substr(r+1):2==i?0>=r?"## "+s:r==i?s.substr(r+1):"## "+s.substr(r+1):0>=r?"### "+s:r==i?s.substr(r+1):"### "+s.substr(r+1),t.replaceRange(s,{line:n,ch:0},{line:n,ch:99999999999999})}(r);t.focus()}}function E(t,e){if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className)){for(var i=a(t),n=t.getCursor("start"),s=t.getCursor("end"),r={quote:/^(\s*)\>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},o={quote:"> ","unordered-list":"* ","ordered-list":"1. "},l=n.line;l<=s.line;l++)!function(n){var s=t.getLine(n);s=i[e]?s.replace(r[e],"$1"):o[e]+s,t.replaceRange(s,{line:n,ch:0},{line:n,ch:99999999999999})}(l);t.focus()}}function _(t,e,i,n){if(!/editor-preview-active/.test(t.codemirror.getWrapperElement().lastChild.className)){n=void 0===n?i:n;var s,r=t.codemirror,o=a(r),l=i,h=n,u=r.getCursor("start"),c=r.getCursor("end");o[e]?(l=(s=r.getLine(u.line)).slice(0,u.ch),h=s.slice(u.ch),"bold"==e?(l=l.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),h=h.replace(/(\*\*|__)/,"")):"italic"==e?(l=l.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),h=h.replace(/(\*|_)/,"")):"strikethrough"==e&&(l=l.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),h=h.replace(/(\*\*|~~)/,"")),r.replaceRange(l+h,{line:u.line,ch:0},{line:u.line,ch:99999999999999}),"bold"==e||"strikethrough"==e?(u.ch-=2,u!==c&&(c.ch-=2)):"italic"==e&&(u.ch-=1,u!==c&&(c.ch-=1))):(s=r.getSelection(),"bold"==e?s=(s=s.split("**").join("")).split("__").join(""):"italic"==e?s=(s=s.split("*").join("")).split("_").join(""):"strikethrough"==e&&(s=s.split("~~").join("")),r.replaceSelection(l+s+h),u.ch+=i.length,c.ch=u.ch+s.length),r.setSelection(u,c),r.focus()}}function O(t,e){for(var i in e)e.hasOwnProperty(i)&&(e[i]instanceof Array?t[i]=e[i].concat(t[i]instanceof Array?t[i]:[]):null!==e[i]&&"object"==typeof e[i]&&e[i].constructor===Object?t[i]=O(t[i]||{},e[i]):t[i]=e[i]);return t}function F(t){for(var e=1;e<arguments.length;e++)t=O(t,arguments[e]);return t}function R(t){var e=t.match(/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),i=0;if(null===e)return i;for(var n=0;n<e.length;n++)i+=e[n].charCodeAt(0)>=19968?e[n].length:1;return i}function I(t){(t=t||{}).parent=this;var e=!0;if(!1===t.autoDownloadFontAwesome&&(e=!1),!0!==t.autoDownloadFontAwesome)for(var i=document.styleSheets,n=0;n<i.length;n++)i[n].href&&i[n].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(e=!1);if(e){var s=document.createElement("link");s.rel="stylesheet",s.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(s)}if(t.element)this.element=t.element;else if(null===t.element)return void console.log("SimpleMDE: Error. No element was found.");if(void 0===t.toolbar)for(var r in t.toolbar=[],G)G.hasOwnProperty(r)&&(-1!=r.indexOf("separator-")&&t.toolbar.push("|"),(!0===G[r].default||t.showIcons&&t.showIcons.constructor===Array&&-1!=t.showIcons.indexOf(r))&&t.toolbar.push(r));t.hasOwnProperty("status")||(t.status=["autosave","lines","words","cursor"]),t.previewRender||(t.previewRender=function(t){return this.parent.markdown(t)}),t.parsingConfig=F({highlightFormatting:!0},t.parsingConfig||{}),t.insertTexts=F({},X,t.insertTexts||{}),t.promptTexts=K,t.blockStyles=F({},J,t.blockStyles||{}),t.shortcuts=F({},Y,t.shortcuts||{}),null!=t.autosave&&null!=t.autosave.unique_id&&""!=t.autosave.unique_id&&(t.autosave.uniqueId=t.autosave.unique_id),this.options=t,this.render(),!t.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(t.initialValue)}function B(){if("object"!=typeof localStorage)return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(t){return!1}return!0}var j=t("codemirror");t("codemirror/addon/edit/continuelist.js"),t("./codemirror/tablist"),t("codemirror/addon/display/fullscreen.js"),t("codemirror/mode/markdown/markdown.js"),t("codemirror/addon/mode/overlay.js"),t("codemirror/addon/display/placeholder.js"),t("codemirror/addon/selection/mark-selection.js"),t("codemirror/mode/gfm/gfm.js"),t("codemirror/mode/xml/xml.js");var z=t("codemirror-spell-checker"),H=t("marked"),U=/Mac/.test(navigator.platform),V={toggleBold:h,toggleItalic:u,drawLink:k,toggleHeadingSmaller:p,toggleHeadingBigger:g,drawImage:S,toggleBlockquote:f,toggleOrderedList:b,toggleUnorderedList:x,toggleCodeBlock:d,togglePreview:N,toggleStrikethrough:c,toggleHeading1:m,toggleHeading2:y,toggleHeading3:v,cleanBlock:w,drawTable:C,drawHorizontalRule:M,undo:T,redo:A,toggleSideBySide:P,toggleFullScreen:l},Y={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},q=function(t){for(var e in V)if(V[e]===t)return e;return null},$=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},W="",G={bold:{name:"bold",action:h,className:"fa fa-bold",title:"Bold",default:!0},italic:{name:"italic",action:u,className:"fa fa-italic",title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:c,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:p,className:"fa fa-header",title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:p,className:"fa fa-header fa-header-x fa-header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:g,className:"fa fa-header fa-header-x fa-header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:m,className:"fa fa-header fa-header-x fa-header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:y,className:"fa fa-header fa-header-x fa-header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:v,className:"fa fa-header fa-header-x fa-header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:d,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:f,className:"fa fa-quote-left",title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:x,className:"fa fa-list-ul",title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:b,className:"fa fa-list-ol",title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:w,className:"fa fa-eraser fa-clean-block",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:k,className:"fa fa-link",title:"Create Link",default:!0},image:{name:"image",action:S,className:"fa fa-picture-o",title:"Insert Image",default:!0},table:{name:"table",action:C,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:M,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:N,className:"fa fa-eye no-disable",title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:P,className:"fa fa-columns no-disable no-mobile",title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:l,className:"fa fa-arrows-alt no-disable no-mobile",title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://simplemde.com/markdown-guide",className:"fa fa-question-circle",title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:T,className:"fa fa-undo no-disable",title:"Undo"},redo:{name:"redo",action:A,className:"fa fa-repeat no-disable",title:"Redo"}},X={link:["[","](#url#)"],image:["![](","#url#)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},K={link:"URL for the link:",image:"URL of the image:"},J={bold:"**",code:"```",italic:"*"};I.prototype.markdown=function(t){if(H){var e={};return this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?e.breaks=!1:e.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting&&window.hljs&&(e.highlight=function(t){return window.hljs.highlightAuto(t).value}),H.setOptions(e),H(t)}},I.prototype.render=function(t){if(t||(t=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==t){this.element=t;var e,i,s=this.options,r=this,o={};for(var a in s.shortcuts)null!==s.shortcuts[a]&&null!==V[a]&&function(t){o[n(s.shortcuts[t])]=function(){V[t](r)}}(a);if(o.Enter="newlineAndIndentContinueMarkdownList",o.Tab="tabAndIndentMarkdownList",o["Shift-Tab"]="shiftTabAndUnindentMarkdownList",o.Esc=function(t){t.getOption("fullScreen")&&l(r)},document.addEventListener("keydown",(function(t){27==(t=t||window.event).keyCode&&r.codemirror.getOption("fullScreen")&&l(r)}),!1),!1!==s.spellChecker?(e="spell-checker",(i=s.parsingConfig).name="gfm",i.gitHubSpice=!1,z({codeMirrorInstance:j})):((e=s.parsingConfig).name="gfm",e.gitHubSpice=!1),this.codemirror=j.fromTextArea(t,{mode:e,backdrop:i,theme:"paper",tabSize:null!=s.tabSize?s.tabSize:2,indentUnit:null!=s.tabSize?s.tabSize:2,indentWithTabs:!1!==s.indentWithTabs,lineNumbers:!1,autofocus:!0===s.autofocus,extraKeys:o,lineWrapping:!1!==s.lineWrapping,allowDropFileTypes:["text/plain"],placeholder:s.placeholder||t.getAttribute("placeholder")||"",styleSelectedText:null==s.styleSelectedText||s.styleSelectedText}),!0===s.forceSync){var h=this.codemirror;h.on("change",(function(){h.save()}))}this.gui={},!1!==s.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==s.status&&(this.gui.statusbar=this.createStatusbar()),null!=s.autosave&&!0===s.autosave.enabled&&this.autosave(),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var u=this.codemirror;setTimeout(function(){u.refresh()}.bind(u),0)}},I.prototype.autosave=function(){if(B()){var t=this;if(null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("SimpleMDE: You must set a uniqueId to use the autosave feature");null!=t.element.form&&null!=t.element.form&&t.element.form.addEventListener("submit",(function(){localStorage.removeItem("smde_"+t.options.autosave.uniqueId)})),!0!==this.options.autosave.loaded&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,t.value());var e=document.getElementById("autosaved");if(null!=e&&null!=e&&""!=e){var i=new Date,n=i.getHours(),s=i.getMinutes(),r="am",o=n;o>=12&&(o=n-12,r="pm"),0==o&&(o=12),s=10>s?"0"+s:s,e.innerHTML="Autosaved: "+o+":"+s+" "+r}this.autosaveTimeoutId=setTimeout((function(){t.autosave()}),this.options.autosave.delay||1e4)}else console.log("SimpleMDE: localStorage not available, cannot autosave")},I.prototype.clearAutosavedValue=function(){if(B()){if(null==this.options.autosave||null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("SimpleMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("SimpleMDE: localStorage not available, cannot autosave")},I.prototype.createSideBySide=function(){var t=this.codemirror,e=t.getWrapperElement(),i=e.nextSibling;i&&/editor-preview-side/.test(i.className)||((i=document.createElement("div")).className="editor-preview-side",e.parentNode.insertBefore(i,e.nextSibling));var n=!1,s=!1;return t.on("scroll",(function(t){if(n)n=!1;else{s=!0;var e=t.getScrollInfo().height-t.getScrollInfo().clientHeight,r=parseFloat(t.getScrollInfo().top)/e,o=(i.scrollHeight-i.clientHeight)*r;i.scrollTop=o}})),i.onscroll=function(){if(s)s=!1;else{n=!0;var e=i.scrollHeight-i.clientHeight,r=parseFloat(i.scrollTop)/e,o=(t.getScrollInfo().height-t.getScrollInfo().clientHeight)*r;t.scrollTo(0,o)}},i},I.prototype.createToolbar=function(t){if((t=t||this.options.toolbar)&&0!==t.length){var e;for(e=0;e<t.length;e++)null!=G[t[e]]&&(t[e]=G[t[e]]);var i=document.createElement("div");i.className="editor-toolbar";var n=this,o={};for(n.toolbar=t,e=0;e<t.length;e++)if(("guide"!=t[e].name||!1!==n.options.toolbarGuideIcon)&&!(n.options.hideIcons&&-1!=n.options.hideIcons.indexOf(t[e].name)||("fullscreen"==t[e].name||"side-by-side"==t[e].name)&&$())){if("|"===t[e]){for(var l=!1,h=e+1;h<t.length;h++)"|"===t[h]||n.options.hideIcons&&-1!=n.options.hideIcons.indexOf(t[h].name)||(l=!0);if(!l)continue}!function(t){var e;e="|"===t?r():s(t,n.options.toolbarTips,n.options.shortcuts),t.action&&("function"==typeof t.action?e.onclick=function(e){e.preventDefault(),t.action(n)}:"string"==typeof t.action&&(e.href=t.action,e.target="_blank")),o[t.name||t]=e,i.appendChild(e)}(t[e])}n.toolbarElements=o;var u=this.codemirror;u.on("cursorActivity",(function(){var t=a(u);for(var e in o)!function(e){var i=o[e];t[e]?i.className+=" active":"fullscreen"!=e&&"side-by-side"!=e&&(i.className=i.className.replace(/\s*active\s*/g,""))}(e)}));var c=u.getWrapperElement();return c.parentNode.insertBefore(i,c),i}},I.prototype.createStatusbar=function(t){t=t||this.options.status;var e=this.options,i=this.codemirror;if(t&&0!==t.length){var n,s,r,o=[];for(n=0;n<t.length;n++)if(s=void 0,r=void 0,"object"==typeof t[n])o.push({className:t[n].className,defaultValue:t[n].defaultValue,onUpdate:t[n].onUpdate});else{var a=t[n];"words"===a?(r=function(t){t.innerHTML=R(i.getValue())},s=function(t){t.innerHTML=R(i.getValue())}):"lines"===a?(r=function(t){t.innerHTML=i.lineCount()},s=function(t){t.innerHTML=i.lineCount()}):"cursor"===a?(r=function(t){t.innerHTML="0:0"},s=function(t){var e=i.getCursor();t.innerHTML=e.line+":"+e.ch}):"autosave"===a&&(r=function(t){null!=e.autosave&&!0===e.autosave.enabled&&t.setAttribute("id","autosaved")}),o.push({className:a,defaultValue:r,onUpdate:s})}var l=document.createElement("div");for(l.className="editor-statusbar",n=0;n<o.length;n++){var h=o[n],u=document.createElement("span");u.className=h.className,"function"==typeof h.defaultValue&&h.defaultValue(u),"function"==typeof h.onUpdate&&this.codemirror.on("update",function(t,e){return function(){e.onUpdate(t)}}(u,h)),l.appendChild(u)}var c=this.codemirror.getWrapperElement();return c.parentNode.insertBefore(l,c.nextSibling),l}},I.prototype.value=function(t){return void 0===t?this.codemirror.getValue():(this.codemirror.getDoc().setValue(t),this)},I.toggleBold=h,I.toggleItalic=u,I.toggleStrikethrough=c,I.toggleBlockquote=f,I.toggleHeadingSmaller=p,I.toggleHeadingBigger=g,I.toggleHeading1=m,I.toggleHeading2=y,I.toggleHeading3=v,I.toggleCodeBlock=d,I.toggleUnorderedList=x,I.toggleOrderedList=b,I.cleanBlock=w,I.drawLink=k,I.drawImage=S,I.drawTable=C,I.drawHorizontalRule=M,I.undo=T,I.redo=A,I.togglePreview=N,I.toggleSideBySide=P,I.toggleFullScreen=l,I.prototype.toggleBold=function(){h(this)},I.prototype.toggleItalic=function(){u(this)},I.prototype.toggleStrikethrough=function(){c(this)},I.prototype.toggleBlockquote=function(){f(this)},I.prototype.toggleHeadingSmaller=function(){p(this)},I.prototype.toggleHeadingBigger=function(){g(this)},I.prototype.toggleHeading1=function(){m(this)},I.prototype.toggleHeading2=function(){y(this)},I.prototype.toggleHeading3=function(){v(this)},I.prototype.toggleCodeBlock=function(){d(this)},I.prototype.toggleUnorderedList=function(){x(this)},I.prototype.toggleOrderedList=function(){b(this)},I.prototype.cleanBlock=function(){w(this)},I.prototype.drawLink=function(){k(this)},I.prototype.drawImage=function(){S(this)},I.prototype.drawTable=function(){C(this)},I.prototype.drawHorizontalRule=function(){M(this)},I.prototype.undo=function(){T(this)},I.prototype.redo=function(){A(this)},I.prototype.togglePreview=function(){N(this)},I.prototype.toggleSideBySide=function(){P(this)},I.prototype.toggleFullScreen=function(){l(this)},I.prototype.isPreviewActive=function(){var t=this.codemirror.getWrapperElement().lastChild;return/editor-preview-active/.test(t.className)},I.prototype.isSideBySideActive=function(){var t=this.codemirror.getWrapperElement().nextSibling;return/editor-preview-active-side/.test(t.className)},I.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},I.prototype.getState=function(){return a(this.codemirror)},I.prototype.toTextArea=function(){var t=this.codemirror,e=t.getWrapperElement();e.parentNode&&(this.gui.toolbar&&e.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&e.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide&&e.parentNode.removeChild(this.gui.sideBySide)),t.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},e.exports=I},{"./codemirror/tablist":19,codemirror:10,"codemirror-spell-checker":4,"codemirror/addon/display/fullscreen.js":5,"codemirror/addon/display/placeholder.js":6,"codemirror/addon/edit/continuelist.js":7,"codemirror/addon/mode/overlay.js":8,"codemirror/addon/selection/mark-selection.js":9,"codemirror/mode/gfm/gfm.js":11,"codemirror/mode/markdown/markdown.js":12,"codemirror/mode/xml/xml.js":14,marked:17}]},{},[20])(20)})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).DOMPurify=e()}(this,(function(){"use strict";const{entries:t,setPrototypeOf:e,isFrozen:i,getPrototypeOf:n,getOwnPropertyDescriptor:s}=Object;let{freeze:r,seal:o,create:a}=Object,{apply:l,construct:h}="undefined"!=typeof Reflect&&Reflect;r||(r=function(t){return t}),o||(o=function(t){return t}),l||(l=function(t,e,i){return t.apply(e,i)}),h||(h=function(t,e){return new t(...e)});const u=M(Array.prototype.forEach),c=M(Array.prototype.lastIndexOf),d=M(Array.prototype.pop),f=M(Array.prototype.push),p=M(Array.prototype.splice),g=M(String.prototype.toLowerCase),m=M(String.prototype.toString),y=M(String.prototype.match),v=M(String.prototype.replace),x=M(String.prototype.indexOf),b=M(String.prototype.trim),w=M(Object.prototype.hasOwnProperty),k=M(RegExp.prototype.test),S=(C=TypeError,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return h(C,e)});var C;function M(t){return function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return l(t,e,n)}}function T(t,n){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;e&&e(t,null);let r=n.length;for(;r--;){let e=n[r];if("string"==typeof e){const t=s(e);t!==e&&(i(n)||(n[r]=t),e=t)}t[e]=!0}return t}function A(t){for(let e=0;e<t.length;e++)w(t,e)||(t[e]=null);return t}function P(e){const i=a(null);for(const[n,s]of t(e))w(e,n)&&(Array.isArray(s)?i[n]=A(s):s&&"object"==typeof s&&s.constructor===Object?i[n]=P(s):i[n]=s);return i}function N(t,e){for(;null!==t;){const i=s(t,e);if(i){if(i.get)return M(i.get);if("function"==typeof i.value)return M(i.value)}t=n(t)}return function(){return null}}const D=r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),E=r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_=r(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),O=r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),F=r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),R=r(["#text"]),I=r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),B=r(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),j=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),z=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),H=o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),U=o(/<%[\w\W]*|[\w\W]*%>/gm),V=o(/\$\{[\w\W]*/gm),Y=o(/^data-[\-\w.\u00B7-\uFFFF]+$/),q=o(/^aria-[\-\w]+$/),$=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),W=o(/^(?:\w+script|data):/i),G=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),X=o(/^html$/i),K=o(/^[a-z][.\w]*(-[.\w]+)+$/i);var J=Object.freeze({__proto__:null,ARIA_ATTR:q,ATTR_WHITESPACE:G,CUSTOM_ELEMENT:K,DATA_ATTR:Y,DOCTYPE_NAME:X,ERB_EXPR:U,IS_ALLOWED_URI:$,IS_SCRIPT_OR_DATA:W,MUSTACHE_EXPR:H,TMPLIT_EXPR:V});var Z=function e(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const n=t=>e(t);if(n.version="3.2.4",n.removed=[],!i||!i.document||9!==i.document.nodeType||!i.Element)return n.isSupported=!1,n;let{document:s}=i;const o=s,l=o.currentScript,{DocumentFragment:h,HTMLTemplateElement:C,Node:M,Element:A,NodeFilter:H,NamedNodeMap:U=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:V,DOMParser:Y,trustedTypes:q}=i,W=A.prototype,G=N(W,"cloneNode"),K=N(W,"remove"),Z=N(W,"nextSibling"),Q=N(W,"childNodes"),tt=N(W,"parentNode");if("function"==typeof C){const t=s.createElement("template");t.content&&t.content.ownerDocument&&(s=t.content.ownerDocument)}let et,it="";const{implementation:nt,createNodeIterator:st,createDocumentFragment:rt,getElementsByTagName:ot}=s,{importNode:at}=o;let lt={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof t&&"function"==typeof tt&&nt&&void 0!==nt.createHTMLDocument;const{MUSTACHE_EXPR:ht,ERB_EXPR:ut,TMPLIT_EXPR:ct,DATA_ATTR:dt,ARIA_ATTR:ft,IS_SCRIPT_OR_DATA:pt,ATTR_WHITESPACE:gt,CUSTOM_ELEMENT:mt}=J;let{IS_ALLOWED_URI:yt}=J,vt=null;const xt=T({},[...D,...L,...E,...O,...R]);let bt=null;const wt=T({},[...I,...B,...j,...z]);let kt=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),St=null,Ct=null,Mt=!0,Tt=!0,At=!1,Pt=!0,Nt=!1,Dt=!0,Lt=!1,Et=!1,_t=!1,Ot=!1,Ft=!1,Rt=!1,It=!0,Bt=!1,jt=!0,zt=!1,Ht={},Ut=null;const Vt=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Yt=null;const qt=T({},["audio","video","img","source","image","track"]);let $t=null;const Wt=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Gt="http://www.w3.org/1998/Math/MathML",Xt="http://www.w3.org/2000/svg",Kt="http://www.w3.org/1999/xhtml";let Jt=Kt,Zt=!1,Qt=null;const te=T({},[Gt,Xt,Kt],m);let ee=T({},["mi","mo","mn","ms","mtext"]),ie=T({},["annotation-xml"]);const ne=T({},["title","style","font","a","script"]);let se=null;const re=["application/xhtml+xml","text/html"];let oe=null,ae=null;const le=s.createElement("form"),he=function(t){return t instanceof RegExp||t instanceof Function},ue=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ae||ae!==t){if(t&&"object"==typeof t||(t={}),t=P(t),se=-1===re.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,oe="application/xhtml+xml"===se?m:g,vt=w(t,"ALLOWED_TAGS")?T({},t.ALLOWED_TAGS,oe):xt,bt=w(t,"ALLOWED_ATTR")?T({},t.ALLOWED_ATTR,oe):wt,Qt=w(t,"ALLOWED_NAMESPACES")?T({},t.ALLOWED_NAMESPACES,m):te,$t=w(t,"ADD_URI_SAFE_ATTR")?T(P(Wt),t.ADD_URI_SAFE_ATTR,oe):Wt,Yt=w(t,"ADD_DATA_URI_TAGS")?T(P(qt),t.ADD_DATA_URI_TAGS,oe):qt,Ut=w(t,"FORBID_CONTENTS")?T({},t.FORBID_CONTENTS,oe):Vt,St=w(t,"FORBID_TAGS")?T({},t.FORBID_TAGS,oe):{},Ct=w(t,"FORBID_ATTR")?T({},t.FORBID_ATTR,oe):{},Ht=!!w(t,"USE_PROFILES")&&t.USE_PROFILES,Mt=!1!==t.ALLOW_ARIA_ATTR,Tt=!1!==t.ALLOW_DATA_ATTR,At=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Pt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Nt=t.SAFE_FOR_TEMPLATES||!1,Dt=!1!==t.SAFE_FOR_XML,Lt=t.WHOLE_DOCUMENT||!1,Ot=t.RETURN_DOM||!1,Ft=t.RETURN_DOM_FRAGMENT||!1,Rt=t.RETURN_TRUSTED_TYPE||!1,_t=t.FORCE_BODY||!1,It=!1!==t.SANITIZE_DOM,Bt=t.SANITIZE_NAMED_PROPS||!1,jt=!1!==t.KEEP_CONTENT,zt=t.IN_PLACE||!1,yt=t.ALLOWED_URI_REGEXP||$,Jt=t.NAMESPACE||Kt,ee=t.MATHML_TEXT_INTEGRATION_POINTS||ee,ie=t.HTML_INTEGRATION_POINTS||ie,kt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&he(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(kt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&he(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(kt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(kt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Nt&&(Tt=!1),Ft&&(Ot=!0),Ht&&(vt=T({},R),bt=[],!0===Ht.html&&(T(vt,D),T(bt,I)),!0===Ht.svg&&(T(vt,L),T(bt,B),T(bt,z)),!0===Ht.svgFilters&&(T(vt,E),T(bt,B),T(bt,z)),!0===Ht.mathMl&&(T(vt,O),T(bt,j),T(bt,z))),t.ADD_TAGS&&(vt===xt&&(vt=P(vt)),T(vt,t.ADD_TAGS,oe)),t.ADD_ATTR&&(bt===wt&&(bt=P(bt)),T(bt,t.ADD_ATTR,oe)),t.ADD_URI_SAFE_ATTR&&T($t,t.ADD_URI_SAFE_ATTR,oe),t.FORBID_CONTENTS&&(Ut===Vt&&(Ut=P(Ut)),T(Ut,t.FORBID_CONTENTS,oe)),jt&&(vt["#text"]=!0),Lt&&T(vt,["html","head","body"]),vt.table&&(T(vt,["tbody"]),delete St.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw S('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw S('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');et=t.TRUSTED_TYPES_POLICY,it=et.createHTML("")}else void 0===et&&(et=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let i=null;const n="data-tt-policy-suffix";e&&e.hasAttribute(n)&&(i=e.getAttribute(n));const s="dompurify"+(i?"#"+i:"");try{return t.createPolicy(s,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+s+" could not be created."),null}}(q,l)),null!==et&&"string"==typeof it&&(it=et.createHTML(""));r&&r(t),ae=t}},ce=T({},[...L,...E,..._]),de=T({},[...O,...F]),fe=function(t){f(n.removed,{element:t});try{tt(t).removeChild(t)}catch(e){K(t)}},pe=function(t,e){try{f(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){f(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(Ot||Ft)try{fe(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},ge=function(t){let e=null,i=null;if(_t)t="<remove></remove>"+t;else{const e=y(t,/^[\r\n\t ]+/);i=e&&e[0]}"application/xhtml+xml"===se&&Jt===Kt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const n=et?et.createHTML(t):t;if(Jt===Kt)try{e=(new Y).parseFromString(n,se)}catch(t){}if(!e||!e.documentElement){e=nt.createDocument(Jt,"template",null);try{e.documentElement.innerHTML=Zt?it:n}catch(t){}}const r=e.body||e.documentElement;return t&&i&&r.insertBefore(s.createTextNode(i),r.childNodes[0]||null),Jt===Kt?ot.call(e,Lt?"html":"body")[0]:Lt?e.documentElement:r},me=function(t){return st.call(t.ownerDocument||t,t,H.SHOW_ELEMENT|H.SHOW_COMMENT|H.SHOW_TEXT|H.SHOW_PROCESSING_INSTRUCTION|H.SHOW_CDATA_SECTION,null)},ye=function(t){return t instanceof V&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof U)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},ve=function(t){return"function"==typeof M&&t instanceof M};function xe(t,e,i){u(t,(t=>{t.call(n,e,i,ae)}))}const be=function(t){let e=null;if(xe(lt.beforeSanitizeElements,t,null),ye(t))return fe(t),!0;const i=oe(t.nodeName);if(xe(lt.uponSanitizeElement,t,{tagName:i,allowedTags:vt}),t.hasChildNodes()&&!ve(t.firstElementChild)&&k(/<[/\w]/g,t.innerHTML)&&k(/<[/\w]/g,t.textContent))return fe(t),!0;if(7===t.nodeType)return fe(t),!0;if(Dt&&8===t.nodeType&&k(/<[/\w]/g,t.data))return fe(t),!0;if(!vt[i]||St[i]){if(!St[i]&&ke(i)){if(kt.tagNameCheck instanceof RegExp&&k(kt.tagNameCheck,i))return!1;if(kt.tagNameCheck instanceof Function&&kt.tagNameCheck(i))return!1}if(jt&&!Ut[i]){const e=tt(t)||t.parentNode,i=Q(t)||t.childNodes;if(i&&e)for(let n=i.length-1;n>=0;--n){const s=G(i[n],!0);s.__removalCount=(t.__removalCount||0)+1,e.insertBefore(s,Z(t))}}return fe(t),!0}return t instanceof A&&!function(t){let e=tt(t);e&&e.tagName||(e={namespaceURI:Jt,tagName:"template"});const i=g(t.tagName),n=g(e.tagName);return!!Qt[t.namespaceURI]&&(t.namespaceURI===Xt?e.namespaceURI===Kt?"svg"===i:e.namespaceURI===Gt?"svg"===i&&("annotation-xml"===n||ee[n]):Boolean(ce[i]):t.namespaceURI===Gt?e.namespaceURI===Kt?"math"===i:e.namespaceURI===Xt?"math"===i&&ie[n]:Boolean(de[i]):t.namespaceURI===Kt?!(e.namespaceURI===Xt&&!ie[n])&&!(e.namespaceURI===Gt&&!ee[n])&&!de[i]&&(ne[i]||!ce[i]):!("application/xhtml+xml"!==se||!Qt[t.namespaceURI]))}(t)?(fe(t),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!k(/<\/no(script|embed|frames)/i,t.innerHTML)?(Nt&&3===t.nodeType&&(e=t.textContent,u([ht,ut,ct],(t=>{e=v(e,t," ")})),t.textContent!==e&&(f(n.removed,{element:t.cloneNode()}),t.textContent=e)),xe(lt.afterSanitizeElements,t,null),!1):(fe(t),!0)},we=function(t,e,i){if(It&&("id"===e||"name"===e)&&(i in s||i in le))return!1;if(Tt&&!Ct[e]&&k(dt,e));else if(Mt&&k(ft,e));else if(!bt[e]||Ct[e]){if(!(ke(t)&&(kt.tagNameCheck instanceof RegExp&&k(kt.tagNameCheck,t)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(t))&&(kt.attributeNameCheck instanceof RegExp&&k(kt.attributeNameCheck,e)||kt.attributeNameCheck instanceof Function&&kt.attributeNameCheck(e))||"is"===e&&kt.allowCustomizedBuiltInElements&&(kt.tagNameCheck instanceof RegExp&&k(kt.tagNameCheck,i)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(i))))return!1}else if($t[e]);else if(k(yt,v(i,gt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==x(i,"data:")||!Yt[t])if(At&&!k(pt,v(i,gt,"")));else if(i)return!1;return!0},ke=function(t){return"annotation-xml"!==t&&y(t,mt)},Se=function(t){xe(lt.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||ye(t))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bt,forceKeepAttr:void 0};let s=e.length;for(;s--;){const r=e[s],{name:o,namespaceURI:a,value:l}=r,h=oe(o);let c="value"===o?l:b(l);if(i.attrName=h,i.attrValue=c,i.keepAttr=!0,i.forceKeepAttr=void 0,xe(lt.uponSanitizeAttribute,t,i),c=i.attrValue,!Bt||"id"!==h&&"name"!==h||(pe(o,t),c="user-content-"+c),Dt&&k(/((--!?|])>)|<\/(style|title)/i,c)){pe(o,t);continue}if(i.forceKeepAttr)continue;if(pe(o,t),!i.keepAttr)continue;if(!Pt&&k(/\/>/i,c)){pe(o,t);continue}Nt&&u([ht,ut,ct],(t=>{c=v(c,t," ")}));const f=oe(t.nodeName);if(we(f,h,c)){if(et&&"object"==typeof q&&"function"==typeof q.getAttributeType)if(a);else switch(q.getAttributeType(f,h)){case"TrustedHTML":c=et.createHTML(c);break;case"TrustedScriptURL":c=et.createScriptURL(c)}try{a?t.setAttributeNS(a,o,c):t.setAttribute(o,c),ye(t)?fe(t):d(n.removed)}catch(t){}}}xe(lt.afterSanitizeAttributes,t,null)},Ce=function t(e){let i=null;const n=me(e);for(xe(lt.beforeSanitizeShadowDOM,e,null);i=n.nextNode();)xe(lt.uponSanitizeShadowNode,i,null),be(i),Se(i),i.content instanceof h&&t(i.content);xe(lt.afterSanitizeShadowDOM,e,null)};return n.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,s=null,r=null,a=null;if(Zt=!t,Zt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!ve(t)){if("function"!=typeof t.toString)throw S("toString is not a function");if("string"!=typeof(t=t.toString()))throw S("dirty is not a string, aborting")}if(!n.isSupported)return t;if(Et||ue(e),n.removed=[],"string"==typeof t&&(zt=!1),zt){if(t.nodeName){const e=oe(t.nodeName);if(!vt[e]||St[e])throw S("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof M)i=ge("\x3c!----\x3e"),s=i.ownerDocument.importNode(t,!0),1===s.nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?i=s:i.appendChild(s);else{if(!Ot&&!Nt&&!Lt&&-1===t.indexOf("<"))return et&&Rt?et.createHTML(t):t;if(i=ge(t),!i)return Ot?null:Rt?it:""}i&&_t&&fe(i.firstChild);const l=me(zt?t:i);for(;r=l.nextNode();)be(r),Se(r),r.content instanceof h&&Ce(r.content);if(zt)return t;if(Ot){if(Ft)for(a=rt.call(i.ownerDocument);i.firstChild;)a.appendChild(i.firstChild);else a=i;return(bt.shadowroot||bt.shadowrootmode)&&(a=at.call(o,a,!0)),a}let c=Lt?i.outerHTML:i.innerHTML;return Lt&&vt["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&k(X,i.ownerDocument.doctype.name)&&(c="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+c),Nt&&u([ht,ut,ct],(t=>{c=v(c,t," ")})),et&&Rt?et.createHTML(c):c},n.setConfig=function(){ue(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Et=!0},n.clearConfig=function(){ae=null,Et=!1},n.isValidAttribute=function(t,e,i){ae||ue({});const n=oe(t),s=oe(e);return we(n,s,i)},n.addHook=function(t,e){"function"==typeof e&&f(lt[t],e)},n.removeHook=function(t,e){if(void 0!==e){const i=c(lt[t],e);return-1===i?void 0:p(lt[t],i,1)[0]}return d(lt[t])},n.removeHooks=function(t){lt[t]=[]},n.removeAllHooks=function(){lt={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();return Z})),function(){const t="object"==typeof globalThis&&globalThis||"object"==typeof global&&global.global===global&&global||"object"==typeof self&&self.self===self&&self||{};void 0===t.requestAnimationFrame&&(void 0===t.setImmediate?t.requestAnimationFrame=e=>t.setTimeout(e,0):t.requestAnimationFrame=t.setImmediate);class e{static tr=void 0!==t.navigator&&void 0!==t.navigator.platform&&null!==t.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i);static Rk(t,i,n){let s=-1;return function(){const r=this,o=arguments;-1!==s&&e.Tg(s),s=e.ir((()=>{s=-1,n||t.apply(r,o)}),i),n&&!s&&t.apply(r,o)}}static ir(e,i){return t.setTimeout(e,i)}static Tg(e){t.clearTimeout(e)}static hs(e){return t.document.createElement(e)}static o(t){throw new Error(t)}static L(t,i){let n="The object is frozen, so its properties cannot be set: "+t.toString();void 0!==i&&(n+="  to value: "+i),e.o(n)}static dE(t,e,i,n){}static s(t,e,i,n){}static gE(t,e,i){}static ec(t,i,n){if(null===t||"object"!=typeof t){let s=e.uC(i);void 0!==n&&(s+="."+n),e.Zi(t,"object",s)}}static k(t,i,n){e.s(t,"function",i,n)}static mE(t,e,i){}static Zi(t,e,i,n){}static W(t,i,n,s){let r=e.uC(n);void 0!==s&&(r+="."+s),e.o(r+" is not in the range "+i+": "+t)}static Re(t){}static er(t,e){}static ni(e){t.console&&t.console.log(e)}static K(t){return null!==t&&"object"==typeof t}static it(t){return"function"==typeof t}static vk=[];static et(){const t=e.vk.pop();return void 0===t?[]:t}static J(t){t.length=0,e.vk.push(t)}static pE=Object.freeze([]);static uC(t){return null===t?"*":"string"==typeof t?t:e.it(t)?t.name:""}static Dn(t){return e.it(t)?t.className?t.className:t.name:e.K(t)&&t.constructor?e.Dn(t.constructor):typeof t}static Eh(t,i){return null==i||""===i?null:e.K(t)&&i in t||t[i]?t[i]:null}static toString(t){let i=t;return e.K(t)&&(t.text?i=t.text:t.name?i=t.name:void 0!==t.key?i=t.key:void 0!==t.id?i=t.id:t.constructor===Object&&(t.Text?i=t.Text:t.Name?i=t.Name:void 0!==t.Key?i=t.Key:void 0!==t.Id?i=t.Id:void 0!==t.ID&&(i=t.ID))),void 0===i?"undefined":null===i?"null":i.toString()}static dw(t,e){if(t.hasOwnProperty(e))return!0;let i=Object.getPrototypeOf(t);for(;i&&i!==Function;){if(i.hasOwnProperty(e))return!0;const t=i.yE;if(t&&t[e])return!0;i=Object.getPrototypeOf(i)}return!1}static WD(t){const e=[];let i=0;for(i=0;i<256;i++)e[i]=i;let n=0,s=0;for(i=0;i<256;i++)n=(n+e[i]+119)%256,s=e[i],e[i]=e[n],e[n]=s;i=0,n=0;let r="";for(let o=0;o<t.length;o++)i=(i+1)%256,n=(n+e[i])%256,s=e[i],e[i]=e[n],e[n]=s,r+=String.fromCharCode(t.charCodeAt(o)^e[(e[i]+e[n])%256]);return r}static JD(t){const e="0123456789abcdef",i=[];for(let t=0;t<256;t++)i[e.charAt(t>>4)+e.charAt(15&t)]=String.fromCharCode(t);t.length%2&&(t="0"+t);const n=[];let s=0;for(let e=0;e<t.length;e+=2)n[s++]=i[t.substring(e,e+2)];const r=n.join("");return""===r?"0":r}static Ts(t){return e.WD(e.JD(t))}static color1="@COLOR1";static color2="@COLOR2";static gw="32ab5ff3b26f42dc0ed90f21412913b5"}e.vfo="29e646fdb164";class i{Ok;constructor(){this.Ok=[]}toString(){return this.Ok.join("")}add(t){""!==t&&this.Ok.push(t)}}class n{}class s{g;constructor(){this.g=[]}[Symbol.iterator](){return this.g.values()}key;value;get iterator(){return this}reset(){}next(){return!1}hasNext(){return!1}first(){return null}any(){return!1}all(){return!0}each(){return this}map(t){return this}filter(){return this}get count(){return 0}fl(){}toString(){return"EmptyIterator"}static instance=new s}class r{constructor(t){this.key=-1,this.value=t}[Symbol.iterator](){return[this.value].values()}key;value;get iterator(){return this}reset(){this.key=-1}next(){return-1===this.key&&(this.key=0,!0)}hasNext(){return this.next()}first(){return this.key=0,this.value}any(t){return this.key=-1,t(this.value)}all(t){return this.key=-1,t(this.value)}each(t){return this.key=-1,t(this.value),this}map(t){return new r(t(this.value))}filter(t){return t(this.value)?new r(this.value):s.instance}get count(){return 1}fl(){this.value=null}toString(){return"SingletonIterator("+this.value+")"}}class o{qt;Ds;Kt;At;constructor(t){this.qt=t,this.Ds=null,t.sr=null,this.Kt=t.nt,this.At=-1}[Symbol.iterator](){return null===this.Ds?this.qt.r.values():this.qt.r.filter(this.Ds).values()}key;value;get iterator(){return this}get predicate(){return this.Ds}set predicate(t){this.Ds=t}reset(){const t=this.qt;t.sr=null,this.Kt=t.nt,this.At=-1}next(){const t=this.qt;if(t.nt!==this.Kt){if(this.key<0)return!1;e.Re(t)}const i=t.r,n=i.length;let s=++this.At;const r=this.Ds;if(null!==r)for(;s<n;){const t=i[s];if(r(t))return this.At=s,this.key=s,this.value=t,!0;s++}else{if(s<n)return this.key=s,this.value=i[s],!0;this.fl()}return!1}hasNext(){return this.next()}first(){const t=this.qt;this.Kt=t.nt,this.At=0;const e=t.r,i=e.length,n=this.Ds;if(null!==n){let t=0;for(;t<i;){const i=e[t];if(n(i))return this.At=t,this.key=t,this.value=i,i;t++}return null}if(i>0){const t=e[0];return this.key=0,this.value=t,t}return null}any(t){const i=this.qt;i.sr=null;const n=i.nt;this.At=-1;const s=i.r,r=s.length,o=this.Ds;for(let a=0;a<r;a++){const r=s[a];if(null===o||o(r)){if(t(r))return!0;i.nt!==n&&e.Re(i)}}return!1}all(t){const i=this.qt;i.sr=null;const n=i.nt;this.At=-1;const s=i.r,r=s.length,o=this.Ds;for(let a=0;a<r;a++){const r=s[a];if(null===o||o(r)){if(!t(r))return!1;i.nt!==n&&e.Re(i)}}return!0}each(t){const i=this.qt;i.sr=null;const n=i.nt;this.At=-1;const s=i.r,r=s.length,o=this.Ds;for(let a=0;a<r;a++){const r=s[a];null!==o&&!o(r)||(t(r),i.nt!==n&&e.Re(i))}return this}map(t){const i=this.qt;i.sr=null;const n=i.nt;this.At=-1;const s=[],r=i.r,o=r.length,a=this.Ds;for(let l=0;l<o;l++){const o=r[l];null!==a&&!a(o)||(s.push(t(o)),i.nt!==n&&e.Re(i))}const h=new l;return h.r=s,h.ve(),h.iterator}filter(t){const i=this.qt;i.sr=null;const n=i.nt;this.At=-1;const s=[],r=i.r,o=r.length,a=this.Ds;for(let l=0;l<o;l++){const o=r[l];null!==a&&!a(o)||(t(o)&&s.push(o),i.nt!==n&&e.Re(i))}const h=new l;return h.r=s,h.ve(),h.iterator}get count(){const t=this.Ds;if(null!==t){let e=0;const i=this.qt.r,n=i.length;for(let s=0;s<n;s++)t(i[s])&&e++;return e}return this.qt.r.length}fl(){this.key=-1,this.value=null,this.Kt=-1,this.Ds=null,this.qt.sr=this}toString(){return"ListIterator@"+this.At+"/"+this.qt.count}}class a{qt;Kt;At;constructor(t){this.qt=t,t.nr=null,this.Kt=t.nt,this.At=t.r.length}[Symbol.iterator](){return this.qt.r.reverse().values()}key;value;get iterator(){return this}reset(){const t=this.qt;t.nr=null,this.Kt=t.nt,this.At=t.r.length}next(){const t=this.qt;if(t.nt!==this.Kt){if(this.key<0)return!1;e.Re(t)}const i=--this.At;return i>=0?(this.key=i,this.value=t.r[i],!0):(this.fl(),!1)}hasNext(){return this.next()}first(){const t=this.qt;this.Kt=t.nt;const e=t.r,i=e.length-1;if(this.At=i,i>=0){const t=e[i];return this.key=i,this.value=t,t}return null}any(t){const i=this.qt;i.nr=null;const n=i.nt,s=i.r,r=s.length;this.At=r;for(let o=r-1;o>=0;o--){if(t(s[o]))return!0;i.nt!==n&&e.Re(i)}return!1}all(t){const i=this.qt;i.nr=null;const n=i.nt,s=i.r,r=s.length;this.At=r;for(let o=r-1;o>=0;o--){if(!t(s[o]))return!1;i.nt!==n&&e.Re(i)}return!0}each(t){const i=this.qt;i.nr=null;const n=i.nt,s=i.r,r=s.length;this.At=r;for(let o=r-1;o>=0;o--){t(s[o]),i.nt!==n&&e.Re(i)}return this}map(t){const i=this.qt;i.nr=null;const n=i.nt,s=[],r=i.r,o=r.length;this.At=o;for(let a=o-1;a>=0;a--){const o=r[a];s.push(t(o)),i.nt!==n&&e.Re(i)}const a=new l;return a.r=s,a.ve(),a.iterator}filter(t){const i=this.qt;i.nr=null;const n=i.nt,s=[],r=i.r,o=r.length;this.At=o;for(let a=o-1;a>=0;a--){const o=r[a];t(o)&&s.push(o),i.nt!==n&&e.Re(i)}const a=new l;return a.r=s,a.ve(),a.iterator}get count(){return this.qt.r.length}fl(){this.key=-1,this.value=null,this.Kt=-1,this.qt.nr=this}toString(){return"ListIteratorBackwards("+this.At+"/"+this.qt.count+")"}}class l{h;r;nt;sr;nr;constructor(t){u.Gi(this),this.h=!1,this.r=[],this.nt=0,this.sr=null,this.nr=null,void 0!==t&&this.addAll(t)}[Symbol.iterator](){return this.r.values()}ve(){let t=this.nt;t++,t>999999999&&(t=0),this.nt=t}u(){return this.h=!0,this}Nt(){return this.h=!1,this}toString(){return"List()#"+u.as(this)}add(t){return this.h&&e.L(this,t),this.r.push(t),this.ve(),this}push(t){this.add(t)}addAll(t){if(null===t)return this;this.h&&e.L(this);const i=this.r;if(Array.isArray(t)){const e=t.length;for(let n=0;n<e;n++){const e=t[n];i.push(e)}}else{const e=t.iterator;for(;e.next();){const t=e.value;i.push(t)}}return this.ve(),this}clear(){this.h&&e.L(this),this.r.length=0,this.ve()}contains(t){return this.has(t)}has(t){return null!==t&&-1!==this.r.indexOf(t)}indexOf(t){return null===t?-1:this.r.indexOf(t)}elt(t){const i=this.r;return(t<0||t>=i.length)&&e.W(t,"0 <= i < length",l,"elt:i"),i[t]}get(t){return this.elt(t)}setElt(t,i){const n=this.r;(t<0||t>=n.length)&&e.W(t,"0 <= i < length",l,"setElt:i"),this.h&&e.L(this,t),n[t]=i}set(t,e){this.setElt(t,e)}first(){const t=this.r;return 0===t.length?null:t[0]}last(){const t=this.r,e=t.length;return e>0?t[e-1]:null}pop(){this.h&&e.L(this);const t=this.r;return t.length>0?t.pop():null}any(t){const i=this.r,n=this.nt,s=i.length;for(let r=0;r<s;r++){if(t(i[r]))return!0;this.nt!==n&&e.Re(this)}return!1}all(t){const i=this.r,n=this.nt,s=i.length;for(let r=0;r<s;r++){if(!t(i[r]))return!1;this.nt!==n&&e.Re(this)}return!0}each(t){const i=this.r,n=this.nt,s=i.length;for(let r=0;r<s;r++)t(i[r]),this.nt!==n&&e.Re(this);return this}map(t){const i=new l,n=[],s=this.r,r=this.nt,o=s.length;for(let i=0;i<o;i++)n.push(t(s[i])),this.nt!==r&&e.Re(this);return i.r=n,i.ve(),i}filter(t){const i=new l,n=[],s=this.r,r=this.nt,o=s.length;for(let i=0;i<o;i++){const o=s[i];t(o)&&n.push(o),this.nt!==r&&e.Re(this)}return i.r=n,i.ve(),i}insertAt(t,i){t<0&&e.W(t,">= 0",l,"insertAt:i"),this.h&&e.L(this,t);const n=this.r;t>=n.length?n.push(i):n.splice(t,0,i),this.ve()}remove(t){return this.delete(t)}delete(t){if(null===t)return!1;this.h&&e.L(this,t);const i=this.r,n=i.indexOf(t);return-1!==n&&(n===i.length-1?i.pop():i.splice(n,1),this.ve(),!0)}removeAt(t){const i=this.r;(t<0||t>=i.length)&&e.W(t,"0 <= i < length",l,"removeAt:i"),this.h&&e.L(this,t),t===i.length-1?i.pop():i.splice(t,1),this.ve()}removeRange(t,i){const n=this.r,s=n.length;if(t<0)t=0;else if(t>=s)return this;if(i<0)return this;if(i>=s&&(i=s-1),t>i)return this;this.h&&e.L(this);let r=t,o=i+1;for(;o<s;)n[r++]=n[o++];return n.length=s-(i-t+1),this.ve(),this}copy(){const t=new l,e=this.r;return e.length>0&&(t.r=Array.prototype.slice.call(e)),t}toArray(){const t=this.r,e=this.count,i=new Array(e);for(let n=0;n<e;n++)i[n]=t[n];return i}get dC(){return this.r}toSet(){const t=new u,e=this.r,i=this.count;for(let n=0;n<i;n++)t.add(e[n]);return t}sort(t){return this.h&&e.L(this),this.r.sort(t),this.ve(),this}sortRange(t,i,n){const s=this.r,r=s.length;void 0===i&&(i=0),void 0===n&&(n=r),this.h&&e.L(this);const o=n-i;if(o<=1)return this;if((i<0||i>=r-1)&&e.W(i,"0 <= from < length",l,"sortRange:from"),2===o){const e=s[i],n=s[i+1];return t(e,n)>0&&(s[i]=n,s[i+1]=e,this.ve()),this}if(0===i)if(n>=r)s.sort(t);else{const e=s.slice(0,n);e.sort(t);for(let t=0;t<n;t++)s[t]=e[t]}else if(n>=r){const e=s.slice(i);e.sort(t);for(let t=i;t<r;t++)s[t]=e[t-i]}else{const e=s.slice(i,n);e.sort(t);for(let t=i;t<n;t++)s[t]=e[t-i]}return this.ve(),this}reverse(){return this.h&&e.L(this),this.r.reverse(),this.ve(),this}get count(){return this.r.length}get size(){return this.r.length}get length(){return this.r.length}get iterator(){if(this.r.length<=0)return s.instance;const t=this.sr;return null!==t?(t.reset(),t):new o(this)}get iteratorBackwards(){if(this.r.length<=0)return s.instance;const t=this.nr;return null!==t?(t.reset(),t):new a(this)}}class h{wo;ii;constructor(t){this.wo=t,this.ii=t.g.values()}[Symbol.iterator](){return this.wo.g.values()}key;value;get iterator(){return this}reset(){const t=this.wo;this.ii=t.g.values()}next(){const t=this.ii.next();return this.value=t.value,this.key=t.value,!t.done}hasNext(){return this.next()}first(){return 0===this.wo.g.size?null:(this.ii=this.wo.g.values(),this.ii.next().value)}any(t){return this.wo.any(t)}all(t){return this.wo.all(t)}each(t){return this.wo.each(t),this}map(t){const e=new l;return this.wo.g.forEach((i=>e.add(t(i)))),e.iterator}filter(t){const e=new l;return this.wo.g.forEach((i=>{t(i)&&e.add(i)})),e.iterator}get count(){return this.wo.count}fl(){this.key=null,this.value=null,this.ii=null}toString(){return"SetIterator"}}class u{h;g;constructor(t){this.h=!1,this.g=new Set,void 0!==t&&this.addAll(t)}[Symbol.iterator](){return this.g.values()}values(){return this.g.values()}u(){return this.h=!0,this}Nt(){return this.h=!1,this}toString(){return"Set()#"+u.as(this)}add(t){return null===t||this.g.add(t),this}addAll(t){if(null===t)return this;if(Array.isArray(t)){const e=t.length;for(let i=0;i<e;i++){const e=t[i];null!==e&&this.g.add(e)}}else{const e=t.iterator;for(;e.next();){const t=e.value;null!==t&&this.g.add(t)}}return this}has(t){return this.g.has(t)}contains(t){return this.has(t)}containsAll(t){if(null===t)return!0;const e=t.iterator;for(;e.next();)if(!this.has(e.value))return!1;return!0}containsAny(t){if(null===t)return!0;const e=t.iterator;for(;e.next();)if(this.has(e.value))return!0;return!1}first(){return 0===this.g.size?null:this.g.values().next().value}any(t){for(const e of this.g)if(t(e))return!0;return!1}all(t){for(const e of this.g)if(!t(e))return!1;return!0}each(t){for(const e of this.g)t(e);return this}map(t){const e=new u;for(const i of this.g)e.add(t(i));return e}filter(t){const e=new u;for(const i of this.g)t(i)&&e.add(i);return e}delete(t){return this.h&&e.L(this),this.g.delete(t)}remove(t){return this.delete(t)}removeAll(t){if(null===t)return this;if(this.h&&e.L(this),Array.isArray(t)){const e=t.length;for(let i=0;i<e;i++)this.delete(t[i])}else{const e=t.iterator;for(;e.next();)this.delete(e.value)}return this}retainAll(t){if(null===t)return this;if(0===this.count)return this;this.h&&e.L(this);const i=new u;i.addAll(t);const n=[],s=this.iterator;for(;s.next();){const t=s.value;i.has(t)||n.push(t)}return this.removeAll(n),this}clear(){this.h&&e.L(this),this.g.clear()}copy(){const t=new u;return this.g.forEach((e=>t.add(e))),t}toArray(){return Array.from(this.g)}toList(){const t=new l;return this.g.forEach((e=>t.add(e))),t}get count(){return this.g.size}get size(){return this.g.size}get iterator(){return this.g.size<=0?s.instance:new h(this)}entries(){return this.g.entries()}keys(){return this.g.keys()}forEach(t,e){return this.g.forEach(t,e)}static mw=1;static Gi(t){t.__gohashid=u.mw++}static as(t){return t.__gohashid}}class c{q;ii;constructor(t){this.q=t,this.ii=t.g.keys()}[Symbol.iterator](){return this.q.g.keys()}key;value;get iterator(){return this}reset(){const t=this.q;this.ii=t.g.keys()}next(){const t=this.ii.next();return this.value=t.value,this.key=t.value,!t.done}hasNext(){return this.next()}first(){return 0===this.q.g.size?null:(this.ii=this.q.g.keys(),this.ii.next().value)}any(t){for(const e of this.q.g)if(t(e[0]))return!0;return!1}all(t){for(const e of this.q.g)if(!t(e[0]))return!1;return!0}each(t){for(const e of this.q.g)t(e[0]);return this}map(t){const e=this.q,i=new l;for(const n of e.g)i.add(t(n[0]));return i.iterator}filter(t){const e=this.q,i=new l;for(const n of e.g){const e=n[0];t(e)&&i.add(e)}return i.iterator}get count(){return this.q.size}fl(){this.key=null,this.value=null,this.ii=null}toString(){return"MapKeySetIterator"}}class d extends u{q;constructor(t){super(),u.Gi(this),this.h=!0,this.q=t}[Symbol.iterator](){return this.g.keys()}values(){return this.g.keys()}u(){return this}Nt(){return this}toString(){return"MapKeySet("+this.q.toString()+")"}add(t){e.o("This Set is read-only: "+this.toString())}has(t){return this.q.has(t)}contains(t){return this.has(t)}delete(t){e.o("This Set is read-only: "+this.toString())}remove(t){return this.delete(t)}clear(){e.o("This Set is read-only: "+this.toString())}first(){return 0===this.q.g.size?null:this.q.g.keys().next().value}any(t){for(const e of this.q.g)if(t(e[0]))return!0;return!1}all(t){for(const e of this.q.g)if(!t(e[0]))return!1;return!0}each(t){for(const e of this.q.g)t(e[0]);return this}map(t){const e=new u;for(const i of this.q.g)e.add(t(i[0]));return e}filter(t){const e=new u;for(const i of this.q.g){const n=i[0];t(n)&&e.add(n)}return e}copy(){return new d(this.q)}toSet(){const t=new u,e=this.q.g;for(const i of e)t.add(i[0]);return t}toArray(){const t=this.q.g,e=new Array(t.size);let i=0;for(const n of t)e[i]=n[0],i++;return e}toList(){const t=new l,e=this.q.g;for(const i of e)t.add(i[0]);return t}get count(){return this.q.size}get size(){return this.q.size}get iterator(){return this.q.size<=0?s.instance:new c(this.q)}}class f{q;ii;constructor(t){this.q=t,this.ii=t.g.values()}[Symbol.iterator](){return this.q.g.values()}key;value;get iterator(){return this}reset(){const t=this.q;this.ii=t.g.values()}next(){const t=this.ii.next();return this.value=t.value,this.key=t.value,!t.done}hasNext(){return this.next()}first(){return 0===this.q.g.size?null:(this.ii=this.q.g.values(),this.ii.next().value)}any(t){for(const e of this.q.g)if(t(e[1]))return!0;return!1}all(t){for(const e of this.q.g)if(!t(e[1]))return!1;return!0}each(t){for(const e of this.q.g)t(e[1]);return this}map(t){const e=this.q,i=new l;for(const n of e.g)i.add(t(n[1]));return i.iterator}filter(t){const e=this.q,i=new l;for(const n of e.g){const e=n[1];t(e)&&i.add(e)}return i.iterator}get count(){return this.q.size}fl(){this.key=null,this.value=null,this.ii=null}toString(){return"MapValueSetIterator"}}class p{constructor(t,e){this.key=t,this.value=e}toString(){return"{"+this.key+":"+this.value+"}"}key;value}class g{q;ii;constructor(t){this.q=t,this.ii=t.g.entries()}[Symbol.iterator](){return this.q.g.entries()}key;value;get iterator(){return this}reset(){const t=this.q;this.ii=t.g.entries()}next(){const t=this.ii.next();return t.done?(this.key=null,this.value=null,!1):(this.key=t.value[0],this.value=t.value[1],!0)}hasNext(){return this.next()}first(){if(0===this.q.g.size)return null;this.ii=this.q.g.entries();const t=this.ii.next().value;return this.key=t[0],this.value=t[1],new p(t[0],t[1])}any(t){return this.q.any(t)}all(t){return this.q.all(t)}each(t){return this.q.each(t),this}map(t){const e=new l;let i=null;return this.q.g.forEach(((n,s)=>{null===i?i=new p(s,n):(i.key=s,i.value=n),e.add(t(i))})),e.iterator}filter(t){const e=new l;let i=null;return this.q.g.forEach(((n,s)=>{null===i?i=new p(s,n):(i.key=s,i.value=n),t(i)&&(e.add(i),i=null)})),e.iterator}get count(){return this.q.size}fl(){this.key=null,this.value=null,this.ii=null}toString(){return"MapIterator"}}class m{h;g;constructor(t){u.Gi(this),this.h=!1,this.g=new Map,void 0!==t&&this.addAll(t)}[Symbol.iterator](){return this.g.entries()}entries(){return this.g.entries()}u(){return this.h=!0,this}Nt(){return this.h=!1,this}toString(){return"Map()#"+u.as(this)}set(t,i){return this.h&&e.L(this,t),this.g.set(t,i),this}add(t,e){return this.set(t,e)}addAll(t){if(null===t)return this;if(this.h&&e.L(this),Array.isArray(t)){const e=t.length;for(let i=0;i<e;i++){const e=t[i];this.set(e.key,e.value)}}else if(t instanceof m){const e=t.iterator;for(;e.next();)this.set(e.key,e.value)}else{const e=t.iterator;for(;e.next();){const t=e.value;this.set(t.key,t.value)}}return this}first(){if(0===this.g.size)return null;const t=this.g.entries().next().value;return new p(t[0],t[1])}any(t){let e=null;for(const[i,n]of this.g)if(null===e?e=new p(i,n):(e.key=i,e.value=n),t(e))return!0;return!1}all(t){let e=null;for(const[i,n]of this.g)if(null===e?e=new p(i,n):(e.key=i,e.value=n),!t(e))return!1;return!0}each(t){let e=null;for(const[i,n]of this.g)null===e?e=new p(i,n):(e.key=i,e.value=n),t(e);return this}map(t){const e=new m;let i=null;for(const[n,s]of this.g)null===i?i=new p(n,s):(i.key=n,i.value=s),e.set(n,t(i));return e}filter(t){const e=new m;let i=null;for(const[n,s]of this.g)null===i?i=new p(n,s):(i.key=n,i.value=s),t(i)&&e.set(n,s);return e}has(t){return this.g.has(t)}contains(t){return this.has(t)}get(t){const e=this.g.get(t);return void 0===e?null:e}getValue(t){return this.get(t)}delete(t){return null!==t&&(this.h&&e.L(this,t),this.g.delete(t))}remove(t){return this.delete(t)}clear(){this.h&&e.L(this),this.g.clear()}copy(){const t=new m;return t.g=new Map(this.g),t}toArray(){const t=this.g,e=new Array(t.size);let i=0;for(const n of t)e[i]=new p(n[0],n[1]),i++;return e}toKeySet(){return new d(this)}get count(){return this.g.size}get size(){return this.g.size}get iterator(){return this.g.size<=0?s.instance:new g(this)}get iteratorKeys(){return this.count<=0?s.instance:new c(this)}keys(){return this.g.keys()}get iteratorValues(){return this.count<=0?s.instance:new f(this)}values(){return this.g.values()}forEach(t,e){return this.g.forEach(t,e)}}class y{px;py;h;constructor(t,i){void 0===t?(this.px=0,this.py=0):"number"==typeof t&&"number"==typeof i?(this.px=t,this.py=i):e.o("Invalid arguments to Point constructor: "+t+", "+i),this.h=!1}a(t){return this.px=t.px,this.py=t.py,this}i(t,e){return this.px=t,this.py=e,this}setTo(t,e){return this.px=t,this.py=e,this}set(t){return this.px=t.px,this.py=t.py,this}copy(){const t=new y;return t.px=this.px,t.py=this.py,t}$(){return this.h=!0,Object.freeze(this),this}P(){return this.h||Object.isFrozen(this)?this:this.copy().u()}u(){return this.h||(this.h=!0),this}Nt(){return this.h&&(Object.isFrozen(this)&&e.o("cannot thaw constant: "+this),this.h=!1),this}pw(t){}static parse(t){if("string"==typeof t){const e=t.split(" ");let i=0,n=0;for(;""===e[i];)i++;let s=e[i++];s&&(n=parseFloat(s));let r=0;for(;""===e[i];)i++;return s=e[i++],s&&(r=parseFloat(s)),new y(n,r)}return new y}static stringify(t){return t.x.toString()+" "+t.y.toString()}static stringifyFixed(t){return e.s(t,"number",y,"stringifyFixed:digits"),e=>e.x.toFixed(t)+" "+e.y.toFixed(t)}toString(){return"Point("+this.x+","+this.y+")"}equals(t){return t instanceof y&&(this.px===t.x&&this.py===t.y)}equalTo(t,e){return this.px===t&&this.py===e}equalsApprox(t){return S.f(this.px,t.x)&&S.f(this.py,t.y)}add(t){return this.px+=t.x,this.py+=t.y,this}subtract(t){return this.px-=t.x,this.py-=t.y,this}offset(t,e){return this.px+=t,this.py+=e,this}rotate(t){if(0===t)return this;const e=this.px,i=this.py;if(0===e&&0===i)return this;let n=0,s=0;if(t>=360?t-=360:t<0&&(t+=360),90===t)n=0,s=1;else if(180===t)n=-1,s=0;else if(270===t)n=0,s=-1;else{const e=t*Math.PI/180;n=Math.cos(e),s=Math.sin(e)}return this.px=n*e-s*i,this.py=s*e+n*i,this}scale(t,e){return this.px*=t,this.py*=e,this}distanceSquaredPoint(t){const e=t.x-this.px,i=t.y-this.py;return e*e+i*i}distanceSquared(t,e){const i=t-this.px,n=e-this.py;return i*i+n*n}normalize(){const t=this.px,e=this.py,i=Math.sqrt(t*t+e*e);return i>0&&(this.px=t/i,this.py=e/i),this}directionPoint(t){return this.gC(t.x-this.px,t.y-this.py)}direction(t,e){return this.gC(t-this.px,e-this.py)}gC(t,e){if(0===t)return e>0?90:e<0?270:0;if(0===e)return t>0?0:180;{if(isNaN(t)||isNaN(e))return 0;let i=180*Math.atan(Math.abs(e/t))/Math.PI;return t<0?e<0?i+=180:i=180-i:e<0&&(i=360-i),i}}static compareWithLineSegment(t,e,i,n,s,r){return S.eu(t,e,i,n,s,r)}compareWithLineSegmentPoint(t,e){return S.eu(t.x,t.y,e.x,e.y,this.x,this.y)}static intersectingLineSegments(t,e,i,n,s,r,o,a){return S.su(t,e,i,n,s,r,o,a)}projectOntoLineSegment(t,e,i,n){return S.ul(t,e,i,n,this.px,this.py,this),this}projectOntoLineSegmentPoint(t,e){return S.ul(t.x,t.y,e.x,e.y,this.px,this.py,this),this}snapToGrid(t,e,i,n){return S.Dg(this.px,this.py,t,e,i,n,this),this}snapToGridPoint(t,e){return S.Dg(this.px,this.py,t.x,t.y,e.width,e.height,this),this}setRectSpot(t,e){return this.px=t.x+e.x*t.width+e.offsetX,this.py=t.y+e.y*t.height+e.offsetY,this}setSpot(t,e,i,n,s){return this.px=t+s.x*i+s.offsetX,this.py=e+s.y*n+s.offsetY,this}T(t){return t.gt(this),this}Oe(t){return t.$e(this),this}static distanceLineSegmentSquared(t,e,i,n,s,r){let o=s-i,a=r-n;const l=o*o+a*a,h=i-t,u=n-e,c=-h*o-u*a;if(c<=0||c>=l)return o=s-t,a=r-e,Math.min(h*h+u*u,o*o+a*a);{const t=o*u-a*h;return t*t/l}}static distanceSquared(t,e,i,n){const s=i-t,r=n-e;return s*s+r*r}static direction(t,e,i,n){const s=i-t,r=n-e;if(0===s)return r>0?90:r<0?270:0;if(0===r)return s>0?0:180;{if(isNaN(s)||isNaN(r))return 0;let t=180*Math.atan(Math.abs(r/s))/Math.PI;return s<0?r<0?t+=180:t=180-t:r<0&&(t=360-t),t}}get x(){return this.px}set x(t){this.px=t}get y(){return this.py}set y(t){this.py=t}isReal(){return isFinite(this.x)&&isFinite(this.y)}static xo=new y(0,0).$();static mC=new y(-1/0,-1/0).$();static pC=new y(1/0,1/0).$();static yC=new y(6,6).$();static Ik=new y(NaN,NaN).$();static Ek=[];static l(){const t=y.Ek.pop();return void 0===t?new y:t}static V(t,e){const i=y.Ek.pop();return void 0===i?new y(t,e):(i.x=t,i.y=e,i)}static e(t){y.Ek.push(t)}}class v{sw;sh;h;constructor(t,i){void 0===t?(this.sw=0,this.sh=0):"number"==typeof t&&(t>=0||isNaN(t))&&"number"==typeof i&&(i>=0||isNaN(i))?(this.sw=t,this.sh=i):e.o("Invalid arguments to Size constructor: "+t+", "+i),this.h=!1}a(t){return this.sw=t.sw,this.sh=t.sh,this}i(t,e){return this.sw=t,this.sh=e,this}setTo(t,e){return this.sw=t,this.sh=e,this}set(t){return this.sw=t.sw,this.sh=t.sh,this}copy(){const t=new v;return t.sw=this.sw,t.sh=this.sh,t}$(){return this.h=!0,Object.freeze(this),this}P(){return this.h||Object.isFrozen(this)?this:this.copy().u()}u(){return this.h||(this.h=!0),this}Nt(){return this.h&&(Object.isFrozen(this)&&e.o("cannot thaw constant: "+this),this.h=!1),this}pw(t){}static parse(t){if("string"==typeof t){const e=t.split(" ");let i=0,n=0;for(;""===e[i];)i++;let s=e[i++];s&&(n=parseFloat(s));let r=0;for(;""===e[i];)i++;return s=e[i++],s&&(r=parseFloat(s)),new v(n,r)}return new v}static stringify(t){return t.width.toString()+" "+t.height.toString()}static stringifyFixed(t){return e.s(t,"number",v,"stringifyFixed:digits"),e=>e.width.toFixed(t)+" "+e.height.toFixed(t)}toString(){return"Size("+this.width+","+this.height+")"}equals(t){return t instanceof v&&(this.sw===t.width&&this.sh===t.height)}equalTo(t,e){return this.sw===t&&this.sh===e}equalsApprox(t){return S.f(this.sw,t.width)&&S.f(this.sh,t.height)}inflate(t,e){const i=this.width+t;this.sw=i>=0?i:0;const n=this.height+e;return this.sh=n>=0?n:0,this}get width(){return this.sw}set width(t){t<0&&e.W(t,">= 0",v,"width"),this.sw=t}get height(){return this.sh}set height(t){t<0&&e.W(t,">= 0",v,"height"),this.sh=t}isReal(){return isFinite(this.width)&&isFinite(this.height)}static sc=new v(0,0).$();static Uk=new v(1,1).$();static wC=new v(6,6).$();static nu=new v(8,8).$();static xC=new v(10,10).$();static Bk=new v(1/0,1/0).$();static yw=new v(NaN,NaN).$();static bC=[];static l(){const t=v.bC.pop();return void 0===t?new v:t}static e(t){v.bC.push(t)}}class x{rx;ry;rw;rh;h;constructor(t,i,n,s){if(void 0===t)this.rx=0,this.ry=0,this.rw=0,this.rh=0;else if("number"==typeof t&&"number"==typeof i&&"number"==typeof n&&(n>=0||isNaN(n))&&"number"==typeof s&&(s>=0||isNaN(s)))this.rx=t,this.ry=i,this.rw=n,this.rh=s;else if(t instanceof y){const n=t.x,s=t.y;if(i instanceof y){const t=i.x,e=i.y;this.rx=Math.min(n,t),this.ry=Math.min(s,e),this.rw=Math.abs(n-t),this.rh=Math.abs(s-e)}else i instanceof v?(this.rx=n,this.ry=s,this.rw=i.width,this.rh=i.height):e.o("Incorrect second argument supplied to Rect constructor "+i)}else e.o("Invalid arguments to Rect constructor: "+t+", "+i+", "+n+", "+s);this.h=!1}a(t){return this.rx=t.rx,this.ry=t.ry,this.rw=t.rw,this.rh=t.rh,this}i(t,e,i,n){return this.rx=t,this.ry=e,this.rw=i,this.rh=n,this}Fn(t,e){return this.rw=t,this.rh=e,this}setTo(t,e,i,n){return this.rx=t,this.ry=e,this.rw=i,this.rh=n,this}set(t){return this.rx=t.rx,this.ry=t.ry,this.rw=t.rw,this.rh=t.rh,this}setPoint(t){return this.rx=t.x,this.ry=t.y,this}setSize(t){return this.rw=t.width,this.rh=t.height,this}copy(){const t=new x;return t.rx=this.rx,t.ry=this.ry,t.rw=this.rw,t.rh=this.rh,t}$(){return this.h=!0,Object.freeze(this),this}P(){return this.h||Object.isFrozen(this)?this:this.copy().u()}u(){return this.h||(this.h=!0),this}Nt(){return this.h&&(Object.isFrozen(this)&&e.o("cannot thaw constant: "+this),this.h=!1),this}pw(t){}static parse(t){if("string"==typeof t){const e=t.split(" ");let i=0,n=0;for(;""===e[i];)i++;let s=e[i++];s&&(n=parseFloat(s));let r=0;for(;""===e[i];)i++;s=e[i++],s&&(r=parseFloat(s));let o=0;for(;""===e[i];)i++;s=e[i++],s&&(o=parseFloat(s));let a=0;for(;""===e[i];)i++;return s=e[i++],s&&(a=parseFloat(s)),new x(n,r,o,a)}return new x}static stringify(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}static stringifyFixed(t){return e.s(t,"number",x,"stringifyFixed:digits"),e=>e.x.toFixed(t)+" "+e.y.toFixed(t)+" "+e.width.toFixed(t)+" "+e.height.toFixed(t)}toString(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"}equals(t){return t instanceof x&&(this.rx===t.x&&this.ry===t.y&&this.rw===t.width&&this.rh===t.height)}equalTo(t,e,i,n){return this.rx===t&&this.ry===e&&this.rw===i&&this.rh===n}equalsApprox(t){return S.f(this.rx,t.x)&&S.f(this.ry,t.y)&&S.f(this.rw,t.width)&&S.f(this.rh,t.height)}equalsApproxTo(t,e,i,n){return S.f(this.rx,t)&&S.f(this.ry,e)&&S.f(this.rw,i)&&S.f(this.rh,n)}equalsApproxClose(t){return S.z(this.rx,t.x)&&S.z(this.ry,t.y)&&S.z(this.rw,t.width)&&S.z(this.rh,t.height)}containsPoint(t){return this.rx<=t.x&&this.rx+this.rw>=t.x&&this.ry<=t.y&&this.ry+this.rh>=t.y}containsRect(t){return this.rx<=t.x&&t.x+t.width<=this.rx+this.rw&&this.ry<=t.y&&t.y+t.height<=this.ry+this.rh}contains(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this.rx<=t&&t+i<=this.rx+this.rw&&this.ry<=e&&e+n<=this.ry+this.rh}offset(t,e){return this.rx+=t,this.ry+=e,this}inflate(t,e){return this.ww(e,t,e,t)}addMargin(t){return this.ww(t.top,t.right,t.bottom,t.left)}subtractMargin(t){return this.ww(-t.top,-t.right,-t.bottom,-t.left)}grow(t,e,i,n){return this.ww(t,e,i,n)}ww(t,e,i,n){const s=this.rw;e+n<=-s?(this.rx+=s/2,this.rw=0):(this.rx-=n,this.rw+=e+n);const r=this.rh;return t+i<=-r?(this.ry+=r/2,this.rh=0):(this.ry-=t,this.rh+=t+i),this}intersectRect(t){return this.kC(t.x,t.y,t.width,t.height)}intersect(t,e,i,n){return this.kC(t,e,i,n)}kC(t,e,i,n){const s=Math.max(this.rx,t),r=Math.max(this.ry,e),o=Math.min(this.rx+this.rw,t+i),a=Math.min(this.ry+this.rh,e+n);return this.rx=s,this.ry=r,this.rw=Math.max(0,o-s),this.rh=Math.max(0,a-r),this}intersectsRect(t){return this.intersects(t.x,t.y,t.width,t.height)}intersects(t,e,i,n){let s=this.rw;const r=this.rx;if(s!==1/0&&i!==1/0&&(s+=r,i+=t,isNaN(i)||isNaN(s)||r>i||t>s))return!1;let o=this.rh;const a=this.ry;return!(o!==1/0&&n!==1/0&&(o+=a,n+=e,isNaN(n)||isNaN(o)||a>n||e>o))}intersectsRectPlus(t,e){let i=this.rw,n=t.width+e+e;const s=this.rx,r=t.x-e;if(i+=s,n+=r,s>n||r>i)return!1;let o=this.rh,a=t.height+e+e;const l=this.ry,h=t.y-e;return o+=l,a+=h,!(l>a||h>o)}unionPoint(t){return this.unionNoCheck(t.x,t.y,0,0)}unionRect(t){return this.unionNoCheck(t.rx,t.ry,t.rw,t.rh)}union(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this.unionNoCheck(t,e,i,n)}unionNoCheck(t,e,i,n){const s=Math.min(this.rx,t),r=Math.min(this.ry,e),o=Math.max(this.rx+this.rw,t+i),a=Math.max(this.ry+this.rh,e+n);return this.rx=s,this.ry=r,this.rw=o-s,this.rh=a-r,this}setSpot(t,e,i){return this.rx=t-i.offsetX-i.x*this.rw,this.ry=e-i.offsetY-i.y*this.rh,this}static contains(t,e,i,n,s,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),t<=s&&s+o<=t+i&&e<=r&&r+a<=e+n}static intersects(t,e,i,n,s,r,o,a){let l=i,h=o;if(l+=t,h+=s,t>h||s>l)return!1;let u=n,c=a;return u+=e,c+=r,!(e>c||r>u)}static intersectsLineSegment(t,e,i,n,s,r,o,a){return S.PC(t,e,i,n,s,r,o,a)}get x(){return this.rx}set x(t){this.rx=t}get y(){return this.ry}set y(t){this.ry=t}get width(){return this.rw}set width(t){t<0&&e.W(t,">= 0",x,"width"),this.rw=t}get height(){return this.rh}set height(t){t<0&&e.W(t,">= 0",x,"height"),this.rh=t}get left(){return this.rx}set left(t){this.rx=t}get top(){return this.ry}set top(t){this.ry=t}get right(){return this.rx+this.rw}set right(t){this.rx+=t-(this.rx+this.rw)}get bottom(){return this.ry+this.rh}set bottom(t){this.ry+=t-(this.ry+this.rh)}get position(){return new y(this.rx,this.ry)}set position(t){this.rx=t.x,this.ry=t.y}get size(){return new v(this.rw,this.rh)}set size(t){this.rw=t.width,this.rh=t.height}get center(){return new y(this.rx+this.rw/2,this.ry+this.rh/2)}set center(t){this.rx=t.x-this.rw/2,this.ry=t.y-this.rh/2}get centerX(){return this.rx+this.rw/2}set centerX(t){this.rx=t-this.rw/2}get centerY(){return this.ry+this.rh/2}set centerY(t){this.ry=t-this.rh/2}isReal(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)}isEmpty(){return 0===this.width&&0===this.height}static Fg=new x(0,0,0,0).$();static $D=new x(NaN,NaN,NaN,NaN).$();static Vk=[];static l(){const t=x.Vk.pop();return void 0===t?new x:t}static V(t,e,i,n){const s=x.Vk.pop();return void 0===s?new x(t,e,i,n):s.i(t,e,i,n)}static e(t){x.Vk.push(t)}}class b{mt;mr;mb;ml;h;constructor(t,i,n,s){void 0===t?(this.mt=0,this.mr=0,this.mb=0,this.ml=0):void 0===i?(i=t,n=t,s=t,this.mt=t,this.mr=i,this.mb=n,this.ml=s):void 0===n?(n=t,s=i,this.mt=t,this.mr=i,this.mb=n,this.ml=s):void 0!==s?(this.mt=t,this.mr=i,this.mb=n,this.ml=s):e.o("Invalid arguments to Margin constructor: "+t+", "+i+", "+n+", "+s),this.h=!1}a(t){return this.mt=t.mt,this.mr=t.mr,this.mb=t.mb,this.ml=t.ml,this}setTo(t,e,i,n){return this.mt=t,this.mr=e,this.mb=i,this.ml=n,this}set(t){return this.mt=t.mt,this.mr=t.mr,this.mb=t.mb,this.ml=t.ml,this}copy(){const t=new b;return t.mt=this.mt,t.mr=this.mr,t.mb=this.mb,t.ml=this.ml,t}$(){return this.h=!0,Object.freeze(this),this}P(){return this.h||Object.isFrozen(this)?this:this.copy().u()}u(){return this.h||(this.h=!0),this}Nt(){return this.h&&(Object.isFrozen(this)&&e.o("cannot thaw constant: "+this),this.h=!1),this}pw(t){}static parse(t){if("string"==typeof t){const e=t.split(" ");let i=0,n=NaN;for(;""===e[i];)i++;let s=e[i++];if(s&&(n=parseFloat(s)),isNaN(n))return new b;let r=NaN;for(;""===e[i];)i++;if(s=e[i++],s&&(r=parseFloat(s)),isNaN(r))return new b(n);let o=NaN;for(;""===e[i];)i++;if(s=e[i++],s&&(o=parseFloat(s)),isNaN(o))return new b(n,r);let a=NaN;for(;""===e[i];)i++;return s=e[i++],s&&(a=parseFloat(s)),isNaN(a)?new b(n,r):new b(n,r,o,a)}return new b}static stringify(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}static stringifyFixed(t){return e.s(t,"number",b,"stringifyFixed:digits"),e=>e.top.toFixed(t)+" "+e.right.toFixed(t)+" "+e.bottom.toFixed(t)+" "+e.left.toFixed(t)}toString(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"}equals(t){return t instanceof b&&(this.mt===t.top&&this.mr===t.right&&this.mb===t.bottom&&this.ml===t.left)}equalTo(t,e,i,n){return this.mt===t&&this.mr===e&&this.mb===i&&this.ml===n}equalsApprox(t){return S.f(this.mt,t.top)&&S.f(this.mr,t.right)&&S.f(this.mb,t.bottom)&&S.f(this.ml,t.left)}get top(){return this.mt}set top(t){this.mt=t}get right(){return this.mr}set right(t){this.mr=t}get bottom(){return this.mb}set bottom(t){this.mb=t}get left(){return this.ml}set left(t){this.ml=t}isReal(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)}static Rg=new b(0,0,0,0).$();static SC=new b(2,2,2,2).$();static MC=[];static l(){const t=b.MC.pop();return void 0===t?new b:t}static e(t){b.MC.push(t)}}class w{sx;sy;ox;oy;h;constructor(t,e,i,n){void 0===t?(this.sx=0,this.sy=0,this.ox=0,this.oy=0):(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.sx=t,this.sy=e,this.ox=i,this.oy=n),this.h=!1}a(t){return this.sx=t.sx,this.sy=t.sy,this.ox=t.ox,this.oy=t.oy,this}setTo(t,e,i,n){return this.sx=t,this.sy=e,this.ox=i,this.oy=n,this}set(t){return this.sx=t.sx,this.sy=t.sy,this.ox=t.ox,this.oy=t.oy,this}copy(){const t=new w;return t.sx=this.sx,t.sy=this.sy,t.ox=this.ox,t.oy=this.oy,t}$(){return this.h=!0,Object.freeze(this),this}P(){return this.h||Object.isFrozen(this)?this:this.copy().u()}u(){return this.h||(this.h=!0),this}Nt(){return this.h&&(Object.isFrozen(this)&&e.o("cannot thaw constant: "+this),this.h=!1),this}pw(t){}Ie(t){return this.sx=NaN,this.sy=NaN,this.ox=t,this}wE(t,i){(isNaN(t)||t>1||t<0)&&e.W(t,"0 <= "+i+" <= 1",w,i)}xE(t,i){(isNaN(t)||t===1/0||t===-1/0)&&e.W(t,"real number, not NaN or Infinity",w,i)}static parse(t){if("string"==typeof t){if("None"===(t=t.trim()))return w.None;if("TopLeft"===t)return w.TopLeft;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return w.TopCenter;if("TopRight"===t)return w.TopRight;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return w.LeftCenter;if("Center"===t)return w.Center;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return w.RightCenter;if("BottomLeft"===t)return w.BottomLeft;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return w.BottomCenter;if("BottomRight"===t)return w.BottomRight;if("TopSide"===t)return w.TopSide;if("LeftSide"===t)return w.LeftSide;if("RightSide"===t)return w.RightSide;if("BottomSide"===t)return w.BottomSide;if("TopBottomSides"===t)return w.TopBottomSides;if("LeftRightSides"===t)return w.LeftRightSides;if("TopLeftSides"===t)return w.TopLeftSides;if("TopRightSides"===t)return w.TopRightSides;if("BottomLeftSides"===t)return w.BottomLeftSides;if("BottomRightSides"===t)return w.BottomRightSides;if("NotTopSide"===t)return w.NotTopSide;if("NotLeftSide"===t)return w.NotLeftSide;if("NotRightSide"===t)return w.NotRightSide;if("NotBottomSide"===t)return w.NotBottomSide;if("AllSides"===t)return w.AllSides;if("Default"===t)return w.Default;const e=t.split(" ");let i=0,n=0;for(;""===e[i];)i++;let s=e[i++];void 0!==s&&s.length>0&&(n=parseFloat(s));let r=0;for(;""===e[i];)i++;s=e[i++],void 0!==s&&s.length>0&&(r=parseFloat(s));let o=0;for(;""===e[i];)i++;s=e[i++],void 0!==s&&s.length>0&&(o=parseFloat(s));let a=0;for(;""===e[i];)i++;return s=e[i++],void 0!==s&&s.length>0&&(a=parseFloat(s)),new w(n,r,o,a)}return new w}static stringify(t){return t.isSpot()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}static stringifyFixed(t){return e.s(t,"number",w,"stringifyFixed:digits"),e=>e.x.toFixed(t)+" "+e.y.toFixed(t)+" "+e.offsetX.toFixed(t)+" "+e.offsetY.toFixed(t)}toString(){return this.isSpot()?0===this.ox&&0===this.oy?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.equals(w.None)?"None":this.equals(w.TopLeft)?"TopLeft":this.equals(w.TopCenter)?"Top":this.equals(w.TopRight)?"TopRight":this.equals(w.LeftCenter)?"Left":this.equals(w.Center)?"Center":this.equals(w.RightCenter)?"Right":this.equals(w.BottomLeft)?"BottomLeft":this.equals(w.BottomCenter)?"Bottom":this.equals(w.BottomRight)?"BottomRight":this.equals(w.TopSide)?"TopSide":this.equals(w.LeftSide)?"LeftSide":this.equals(w.RightSide)?"RightSide":this.equals(w.BottomSide)?"BottomSide":this.equals(w.TopBottomSides)?"TopBottomSides":this.equals(w.LeftRightSides)?"LeftRightSides":this.equals(w.TopLeftSides)?"TopLeftSides":this.equals(w.TopRightSides)?"TopRightSides":this.equals(w.BottomLeftSides)?"BottomLeftSides":this.equals(w.BottomRightSides)?"BottomRightSides":this.equals(w.NotTopSide)?"NotTopSide":this.equals(w.NotLeftSide)?"NotLeftSide":this.equals(w.NotRightSide)?"NotRightSide":this.equals(w.NotBottomSide)?"NotBottomSide":this.equals(w.AllSides)?"AllSides":this.equals(w.Default)?"Default":"None"}equals(t){return t instanceof w&&((this.sx===t.x||isNaN(this.sx)&&isNaN(t.x))&&(this.sy===t.y||isNaN(this.sy)&&isNaN(t.y))&&this.ox===t.offsetX&&this.oy===t.offsetY)}opposite(){return new w(.5-(this.sx-.5),.5-(this.sy-.5),-this.ox,-this.oy)}includesSide(t){if(!this.isSide())return!1;if(!t.isSide())if(t.equals(w.Left))t=w.LeftSide;else if(t.equals(w.Right))t=w.RightSide;else if(t.equals(w.Top))t=w.TopSide;else{if(!t.equals(w.Bottom))return!1;t=w.BottomSide}const e=this.oy,i=t.offsetY;return(e&i)===i}get x(){return this.sx}set x(t){this.sx=t}get y(){return this.sy}set y(t){this.sy=t}get offsetX(){return this.ox}set offsetX(t){this.ox=t}get offsetY(){return this.oy}set offsetY(t){this.oy=t}isSpot(){return!isNaN(this.x)&&!isNaN(this.y)}isNoSpot(){return isNaN(this.x)||isNaN(this.y)}isSide(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY}isNone(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY}isDefault(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY}static None=new w(0,0,0,0).Ie(0).$();static Default=new w(0,0,-1,0).Ie(-1).$();static TopLeft=new w(0,0,0,0).$();static TopCenter=new w(.5,0,0,0).$();static TopRight=new w(1,0,0,0).$();static LeftCenter=new w(0,.5,0,0).$();static Center=new w(.5,.5,0,0).$();static RightCenter=new w(1,.5,0,0).$();static BottomLeft=new w(0,1,0,0).$();static BottomCenter=new w(.5,1,0,0).$();static BottomRight=new w(1,1,0,0).$();static MiddleTop=w.TopCenter;static MiddleLeft=w.LeftCenter;static MiddleRight=w.RightCenter;static MiddleBottom=w.BottomCenter;static Top=w.TopCenter;static Left=w.LeftCenter;static Right=w.RightCenter;static Bottom=w.BottomCenter;static TopSide=new w(0,0,1,1).Ie(1).$();static LeftSide=new w(0,0,1,2).Ie(1).$();static RightSide=new w(0,0,1,4).Ie(1).$();static BottomSide=new w(0,0,1,8).Ie(1).$();static TopBottomSides=new w(0,0,1,9).Ie(1).$();static LeftRightSides=new w(0,0,1,6).Ie(1).$();static TopLeftSides=new w(0,0,1,3).Ie(1).$();static TopRightSides=new w(0,0,1,5).Ie(1).$();static BottomLeftSides=new w(0,0,1,10).Ie(1).$();static BottomRightSides=new w(0,0,1,12).Ie(1).$();static NotTopSide=new w(0,0,1,14).Ie(1).$();static NotLeftSide=new w(0,0,1,13).Ie(1).$();static NotRightSide=new w(0,0,1,11).Ie(1).$();static NotBottomSide=new w(0,0,1,7).Ie(1).$();static AllSides=new w(0,0,1,15).Ie(1).$();static zk=new w(.156,.156).$();static Xk=new w(.844,.844).$();static NC=[];static l(){const t=w.NC.pop();return void 0===t?new w:t}static e(t){w.NC.push(t)}}class k{m11;m12;m21;m22;dx;dy;constructor(){this.m11=1,this.m12=0,this.m21=0,this.m22=1,this.dx=0,this.dy=0}set(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this}setTo(t,e,i,n,s,r){return this.m11=t,this.m12=e,this.m21=i,this.m22=n,this.dx=s,this.dy=r,this}copy(){const t=new k;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t}toString(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"}equals(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy}Yk(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22}Ri(){return this.m11=1,this.m12=0,this.m21=0,this.m22=1,this.dx=0,this.dy=0,this}nc(t){const e=this.m11*t.m11+this.m21*t.m12,i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,s=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=s,this}CC(t){const e=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*e,n=-t.m12*e,s=-t.m21*e,r=t.m11*e,o=e*(t.m21*t.dy-t.m22*t.dx),a=e*(t.m12*t.dx-t.m11*t.dy),l=this.m11*i+this.m21*n,h=this.m12*i+this.m22*n,u=this.m11*s+this.m21*r,c=this.m12*s+this.m22*r;return this.dx=this.m11*o+this.m21*a+this.dx,this.dy=this.m12*o+this.m22*a+this.dy,this.m11=l,this.m12=h,this.m21=u,this.m22=c,this}xw(){const t=1/(this.m11*this.m22-this.m12*this.m21),e=this.m22*t,i=-this.m12*t,n=-this.m21*t,s=this.m11*t,r=t*(this.m21*this.dy-this.m22*this.dx),o=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=e,this.m12=i,this.m21=n,this.m22=s,this.dx=r,this.dy=o,this}cs(t,e,i){if(t>=360?t-=360:t<0&&(t+=360),0===t)return this;this.Fs(e,i);let n=0,s=0;if(90===t)n=0,s=1;else if(180===t)n=-1,s=0;else if(270===t)n=0,s=-1;else{const e=t*Math.PI/180;n=Math.cos(e),s=Math.sin(e)}const r=this.m11*n+this.m21*s,o=this.m12*n+this.m22*s,a=this.m11*-s+this.m21*n,l=this.m12*-s+this.m22*n;return this.m11=r,this.m12=o,this.m21=a,this.m22=l,this.Fs(-e,-i),this}Fs(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this}tt(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this}ZD(){if(1===this.m11&&0===this.m12)return 0;let t=180*Math.atan2(this.m12,this.m11)/Math.PI;return t<0&&(t+=360),t}gt(t){const e=t.x,i=t.y;return t.i(e*this.m11+i*this.m21+this.dx,e*this.m12+i*this.m22+this.dy)}$e(t){const e=1/(this.m11*this.m22-this.m12*this.m21),i=this.m22*e,n=-this.m12*e,s=-this.m21*e,r=this.m11*e,o=t.x-this.dx,a=t.y-this.dy;return t.i(o*i+a*s,o*n+a*r)}bw(t){const e=1/(this.m11*this.m22-this.m12*this.m21),i=this.m22*e,n=-this.m12*e,s=-this.m21*e,r=this.m11*e,o=e*(this.m21*this.dy-this.m22*this.dx),a=e*(this.m12*this.dx-this.m11*this.dy),l=1.25*t.x,h=1.2*t.y;return t.i(l*i+h*s+o,l*n+h*r+a)}vg(t){const e=t.x,i=t.y,n=e+t.width,s=i+t.height,r=this.m11,o=this.m12,a=this.m21,l=this.m22,h=this.dx,u=this.dy,c=e*r+i*a+h,d=e*o+i*l+u,f=n*r+i*a+h,p=n*o+i*l+u,g=e*r+s*a+h,m=e*o+s*l+u,y=n*r+s*a+h,v=n*o+s*l+u;let x=c,b=c,w=d,k=d;return x=Math.min(x,f),b=Math.max(b,f),w=Math.min(w,p),k=Math.max(k,p),x=Math.min(x,g),b=Math.max(b,g),w=Math.min(w,m),k=Math.max(k,m),x=Math.min(x,y),b=Math.max(b,y),w=Math.min(w,v),k=Math.max(k,v),t.i(x,w,b-x,k-w),t}static LC=[];static l(){const t=k.LC.pop();return void 0===t?new k:t}static e(t){k.LC.push(t)}static Kk="54a702f3e53909c447824c6706603faf4c"}const S={QD:"7da71ca0ad381e90",Rn:(Math.sqrt(2)-1)/3*4,AC:null,kw:t=>{if(t<=0)return 0;let e=S.AC;if(null===e){e=[];for(let t=0;t<=2e3;t++)e[t]=Math.sqrt(t);S.AC=e}if(t<1){const i=1/t;return i<=2e3?1/e[0|i]:Math.sqrt(t)}return t<=2e3?e[0|t]:Math.sqrt(t)},f:(t,e)=>{const i=t-e;return i<.5&&i>-.5},z:(t,e)=>{const i=t-e;return i<5e-8&&i>-5e-8},vi:(t,e,i,n,s,r,o)=>{s<=0&&(s=1e-6);let a=0,l=0,h=0,u=0;if(t<i?(l=t,a=i):(l=i,a=t),e<n?(u=e,h=n):(u=n,h=e),t===i)return u<=o&&o<=h&&t-s<=r&&r<=t+s;if(e===n)return l<=r&&r<=a&&e-s<=o&&o<=e+s;const c=a+s,d=l-s;if(d<=r&&r<=c){const a=h+s,l=u-s;if(l<=o&&o<=a)if(c-d>a-l){if(!(t-i>s||i-t>s))return!0;{const a=(n-e)/(i-t)*(r-t)+e;if(a-s<=o&&o<=a+s)return!0}}else{if(!(e-n>s||n-e>s))return!0;{const a=(i-t)/(n-e)*(o-e)+t;if(a-s<=r&&r<=a+s)return!0}}}return!1},Pw:(t,e,i,n,s,r,o,a,l,h,u,c)=>{if(S.vi(t,e,o,a,c,i,n)&&S.vi(t,e,o,a,c,s,r))return S.vi(t,e,o,a,c,h,u);{const d=(t+i)/2,f=(e+n)/2,p=(i+s)/2,g=(n+r)/2,m=(s+o)/2,y=(r+a)/2,v=(d+p)/2,x=(f+g)/2,b=(p+m)/2,w=(g+y)/2,k=(v+b)/2,C=(x+w)/2;return S.Pw(t,e,d,f,v,x,k,C,l,h,u,c)||S.Pw(k,C,b,w,m,y,o,a,l,h,u,c)}},TC:(t,e,i,n,s,r,o,a,l)=>{const h=(i+s)/2,u=(n+r)/2,c=((t+i)/2+h)/2,d=((e+n)/2+u)/2,f=(h+(s+o)/2)/2,p=(u+(r+a)/2)/2;return l.i((c+f)/2,(d+p)/2),l},_D:(t,e,i,n,s,r,o,a)=>{const l=(i+s)/2,h=(n+r)/2,u=((t+i)/2+l)/2,c=((e+n)/2+h)/2,d=(l+(s+o)/2)/2,f=(h+(r+a)/2)/2;return y.direction(u,c,d,f)},ou:(t,e,i,n,s,r,o,a,l,h)=>{if(S.vi(t,e,o,a,l,i,n)&&S.vi(t,e,o,a,l,s,r))h.unionNoCheck(t,e,0,0),h.unionNoCheck(o,a,0,0);else{const u=(t+i)/2,c=(e+n)/2,d=(i+s)/2,f=(n+r)/2,p=(s+o)/2,g=(r+a)/2,m=(u+d)/2,y=(c+f)/2,v=(d+p)/2,x=(f+g)/2,b=(m+v)/2,w=(y+x)/2;S.ou(t,e,u,c,m,y,b,w,l,h),S.ou(b,w,v,x,p,g,o,a,l,h)}return h},vn:(t,e,i,n,s,r,o,a,l,h)=>{if(S.vi(t,e,o,a,l,i,n)&&S.vi(t,e,o,a,l,s,r))0===h.length&&(h.push(t),h.push(e)),h.push(o),h.push(a);else{const u=(t+i)/2,c=(e+n)/2,d=(i+s)/2,f=(n+r)/2,p=(s+o)/2,g=(r+a)/2,m=(u+d)/2,y=(c+f)/2,v=(d+p)/2,x=(f+g)/2,b=(m+v)/2,w=(y+x)/2;S.vn(t,e,u,c,m,y,b,w,l,h),S.vn(b,w,v,x,p,g,o,a,l,h)}return h},Gk:(t,e,i,n,s,r,o,a,l,h)=>{if(S.vi(t,e,s,r,h,i,n))return S.vi(t,e,s,r,h,a,l);{const u=(t+i)/2,c=(e+n)/2,d=(i+s)/2,f=(n+r)/2,p=(u+d)/2,g=(c+f)/2;return S.Gk(t,e,u,c,p,g,o,a,l,h)||S.Gk(p,g,d,f,s,r,o,a,l,h)}},bE:(t,e,i,n,s,r,o)=>{const a=(t+i)/2,l=(e+n)/2,h=(i+s)/2,u=(n+r)/2;return o.i((a+h)/2,(l+u)/2),o},Hk:(t,e,i,n,s,r,o,a)=>{if(S.vi(t,e,s,r,o,i,n))a.unionNoCheck(t,e,0,0),a.unionNoCheck(s,r,0,0);else{const l=(t+i)/2,h=(e+n)/2,u=(i+s)/2,c=(n+r)/2,d=(l+u)/2,f=(h+c)/2;S.Hk(t,e,l,h,d,f,o,a),S.Hk(d,f,u,c,s,r,o,a)}return a},Og:(t,e,i,n,s,r,o,a)=>{if(S.vi(t,e,s,r,o,i,n))0===a.length&&(a.push(t),a.push(e)),a.push(s),a.push(r);else{const l=(t+i)/2,h=(e+n)/2,u=(i+s)/2,c=(n+r)/2,d=(l+u)/2,f=(h+c)/2;S.Og(t,e,l,h,d,f,o,a),S.Og(d,f,u,c,s,r,o,a)}return a},Ig:(t,e,i,n,s,r,o,a,l,h,u,c,d,f)=>{if(S.vi(t,e,o,a,d,i,n)&&S.vi(t,e,o,a,d,s,r)){if(!S.su(t,e,o,a,l,h,u,c))return!1;const i=(t-o)*(h-c)-(e-a)*(l-u);if(0===i)return!1;const n=((t*a-e*o)*(l-u)-(t-o)*(l*c-h*u))/i,s=((t*a-e*o)*(h-c)-(e-a)*(l*c-h*u))/i;return f.i(n,s),!0}{const p=(t+i)/2,g=(e+n)/2,m=(i+s)/2,y=(n+r)/2,v=(s+o)/2,x=(r+a)/2,b=(p+m)/2,w=(g+y)/2,k=(m+v)/2,C=(y+x)/2,M=(b+k)/2,T=(w+C)/2;let A=1/0,P=!1,N=0,D=0;if(S.Ig(t,e,p,g,b,w,M,T,l,h,u,c,d,f)){const t=(f.x-l)**2+(f.y-h)**2;t<A&&(A=t,P=!0,N=f.x,D=f.y)}if(S.Ig(M,T,k,C,v,x,o,a,l,h,u,c,d,f)){const t=(f.x-l)**2+(f.y-h)**2;t<A&&(A=t,P=!0,N=f.x,D=f.y)}return P&&(f.x=N,f.y=D),P}},Eg:(t,e,i,n,s,r,o,a,l,h,u,c,d)=>{let f=0;if(S.vi(t,e,o,a,d,i,n)&&S.vi(t,e,o,a,d,s,r)){const i=(t-o)*(h-c)-(e-a)*(l-u);if(0===i)return f;const n=((t*a-e*o)*(l-u)-(t-o)*(l*c-h*u))/i,s=((t*a-e*o)*(h-c)-(e-a)*(l*c-h*u))/i;if(n>=u)return f;let r=0,d=0;if((l>u?l-u:u-l)<(h>c?h-c:c-h)){if(e<a?(r=e,d=a):(r=a,d=e),s<r||s>d)return f}else if(t<o?(r=t,d=o):(r=o,d=t),n<r||n>d)return f;i>0?f++:i<0&&f--}else{const p=(t+i)/2,g=(e+n)/2,m=(i+s)/2,y=(n+r)/2,v=(s+o)/2,x=(r+a)/2,b=(p+m)/2,w=(g+y)/2,k=(m+v)/2,C=(y+x)/2,M=(b+k)/2,T=(w+C)/2;f+=S.Eg(t,e,p,g,b,w,M,T,l,h,u,c,d),f+=S.Eg(M,T,k,C,v,x,o,a,l,h,u,c,d)}return f},ul:(t,e,i,n,s,r,o)=>{if(S.z(t,i)){let i=0,s=0;e<n?(i=e,s=n):(i=n,s=e);const a=r;return a<i?(o.i(t,i),!1):a>s?(o.i(t,s),!1):(o.i(t,a),!0)}if(S.z(e,n)){let n=0,r=0;t<i?(n=t,r=i):(n=i,r=t);const a=s;return a<n?(o.i(n,e),!1):a>r?(o.i(r,e),!1):(o.i(a,e),!0)}{const a=((t-s)*(t-i)+(e-r)*(e-n))/((i-t)**2+(n-e)**2);if(a<-5e-6)return o.i(t,e),!1;if(a>1.000005)return o.i(i,n),!1;{const s=t+a*(i-t),r=e+a*(n-e);return o.i(s,r),!0}}},On:(t,e,i,n,s,r,o,a,l)=>{if(S.f(t,i)&&S.f(e,n))return l.i(t,e),!1;if(S.z(s,o)){if(S.z(t,i))return S.ul(t,e,i,n,s,r,l),!1;{const r=(n-e)/(i-t)*(s-t)+e;return S.ul(t,e,i,n,s,r,l)}}{const h=(a-r)/(o-s);if(S.z(t,i)){const i=h*(t-s)+r;let o=0,a=0;return e<n?(o=e,a=n):(o=n,a=e),i<o?(l.i(t,o),!1):i>a?(l.i(t,a),!1):(l.i(t,i),!0)}{const o=(n-e)/(i-t);if(S.z(h,o))return S.ul(t,e,i,n,s,r,l),!1;{const a=(o*t-h*s+r-e)/(o-h);if(S.z(o,0)){let n=0,s=0;return t<i?(n=t,s=i):(n=i,s=t),a<n?(l.i(n,e),!1):a>s?(l.i(s,e),!1):(l.i(a,e),!0)}{const s=o*(a-t)+e;return S.ul(t,e,i,n,a,s,l)}}}}},kE:(t,e,i,n,s)=>S.On(i.x,i.y,n.x,n.y,t.x,t.y,e.x,e.y,s),PE:(t,e,i,n,s,r,o,a,l,h)=>{let u=1/0;function c(i,n){const s=(i-t)**2+(n-e)**2;s<u&&(u=s,l.i(i,n))}c(l.x,l.y);let d=0,f=0,p=0,g=0;s<o?(d=s,f=o):(d=o,f=s),r<a?(p=s,g=o):(p=o,g=s);const m=(f-d)/2+h,y=(g-p)/2+h,v=(s+o)/2,x=(r+a)/2;if(0===m||0===y)return l;if(S.f(t,i)){const t=1-(i-v)**2/(m*m);if(t<0)return l;const e=Math.sqrt(t),n=-y*e+x;c(i,y*e+x),c(i,n)}else{const s=(n-e)/(i-t),r=1/(m*m)+s*s/(y*y),o=2*s*(e-s*t)/(y*y)-2*s*x/(y*y)-2*v/(m*m),a=o*o-4*r*(2*s*t*x/(y*y)-2*e*x/(y*y)+x*x/(y*y)+v*v/(m*m)-1+(e-s*t)*(e-s*t)/(y*y));if(a<0)return l;const h=Math.sqrt(a),u=(-o+h)/(2*r);c(u,s*u-s*t+e);const d=(-o-h)/(2*r);c(d,s*d-s*t+e)}return l},dl:(t,e,i,n,s,r,o,a,l)=>{let h=1e21,u=t,c=e;if(S.On(t,e,t,n,s,r,o,a,l)){const t=(l.x-s)**2+(l.y-r)**2;t<h&&(h=t,u=l.x,c=l.y)}if(S.On(i,e,i,n,s,r,o,a,l)){const t=(l.x-s)**2+(l.y-r)**2;t<h&&(h=t,u=l.x,c=l.y)}if(S.On(t,e,i,e,s,r,o,a,l)){const t=(l.x-s)**2+(l.y-r)**2;t<h&&(h=t,u=l.x,c=l.y)}if(S.On(t,n,i,n,s,r,o,a,l)){const t=(l.x-s)**2+(l.y-r)**2;t<h&&(h=t,u=l.x,c=l.y)}return l.i(u,c),h<1e21},Sw:(t,e,i)=>S.PC(t.x,t.y,t.width,t.height,e.x,e.y,i.x,i.y),PC:(t,e,i,n,s,r,o,a)=>{const l=t,h=t+i,u=e,c=e+n;if(s===o){let t=0,e=0;return r<a?(t=r,e=a):(t=a,e=r),l<=s&&s<=h&&t<=c&&e>=u}if(r===a){let t=0,e=0;return s<o?(t=s,e=o):(t=o,e=s),u<=r&&r<=c&&t<=h&&e>=l}return!!(x.contains(t,e,i,n,s,r)||x.contains(t,e,i,n,o,a)||S.su(l,u,h,u,s,r,o,a)||S.su(h,u,h,c,s,r,o,a)||S.su(h,c,l,c,s,r,o,a)||S.su(l,c,l,u,s,r,o,a))},su:(t,e,i,n,s,r,o,a)=>t===i&&e===n&&s===o&&r===a?t===s&&e===r:S.eu(t,e,i,n,s,r)*S.eu(t,e,i,n,o,a)<=0&&S.eu(s,r,o,a,t,e)*S.eu(s,r,o,a,i,n)<=0,eu:(t,e,i,n,s,r)=>{const o=i-t,a=n-e;let l=s-t,h=r-e,u=l*a-h*o;return 0===u&&(u=l*o+h*a,u>0&&(l-=o,h-=a,u=l*o+h*a,u<0&&(u=0))),u},Ug:t=>(t<0&&(t+=360),t>=360&&(t-=360),t),DC:(t,e,i,n,s,r)=>{const o=Math.PI;r||(n*=o/180,s*=o/180);const a=n>s?-1:1,l=1e-5,h=2*o,u=[],c=o/2;let d=n,f=Math.min(h,Math.abs(s-n));if(f<l){const n=d+a*Math.min(f,c),s=t+i*Math.cos(d),r=e+i*Math.sin(d),o=t+i*Math.cos(n),l=e+i*Math.sin(n),h=(s+o)/2,p=(r+l)/2;return u.push([s,r,h,p,h,p,o,l]),u}for(;f>l;){const n=d+a*Math.min(f,c);u.push(S.tF(i,d,n,t,e)),f-=Math.abs(n-d),d=n}return u},tF:(t,e,i,n,s)=>{const r=(i-e)/2,o=t*Math.cos(r),a=t*Math.sin(r),l=o,h=-a,u=l*l+h*h,c=u+l*o+h*a,d=4/3*(Math.sqrt(2*u*c)-c)/(l*a-h*o),f=l-d*h,p=h+d*l,g=f,m=-p,y=r+e,v=Math.cos(y),x=Math.sin(y);return[n+t*Math.cos(e),s+t*Math.sin(e),n+f*v-p*x,s+f*x+p*v,n+g*v-m*x,s+g*x+m*v,n+t*Math.cos(i),s+t*Math.sin(i)]},Dg:(t,e,i,n,s,r,o)=>{const a=s,l=r,h=Math.floor((t-i)/a)*a+i,u=Math.floor((e-n)/l)*l+n;let c=h;h+a-t<a/2&&(c=h+a);let d=u;return u+l-e<l/2&&(d=u+l),o.i(c,d),o},FC:(t,e)=>{let i=Math.max(t,e),n=Math.min(t,e),s=1,r=1;do{s=i%n,r=n,i=n,n=s}while(s>0);return r},iF:(t,e,i,n)=>{const s=i<0,r=n<0;let o=0,a=0,l=0;t<e?(a=1,l=0):(a=0,l=1);let h=0,u=0,c=0,d=0;return o=a,h=0===o?t:e,c=0===o?i:n,(0===o?s:r)&&(c=-c),o=l,u=0===o?t:e,d=0===o?i:n,(0===o?s:r)&&(d=-d),S.eF(h,u,c,d,0,0)},eF:(t,e,i,n,s,r)=>{let o=0;if(n>0)if(i>0){const a=t*t,l=e*e,h=t*i,u=e*n;let c=-l+u,d=-l+Math.sqrt(h*h+u*u),f=c;const p=9999999999;for(let t=0;t<p&&(f=.5*(c+d),f!==c&&f!==d);++t){const t=h/(f+a),e=u/(f+l),i=t*t+e*e-1;if(i>0)c=f;else{if(!(i<0))break;d=f}}const g=(s=a*i/(f+a))-i,m=(r=l*n/(f+l))-n;o=Math.sqrt(g*g+m*m)}else s=0,r=e,o=Math.abs(n-e);else{const n=t*t-e*e,a=t*i;if(a<n){const l=a/n,h=l*l;s=t*l,r=e*Math.sqrt(Math.abs(1-h));const u=s-i;o=Math.sqrt(u*u+r*r)}else s=t,r=0,o=Math.abs(i-t)}return o},In:new n,Bg:new n,or:new n,rr:0,Vg:100};S.za=S.QD;var C,M=((C=M||{})[C.Line=1]="Line",C[C.Rectangle=2]="Rectangle",C[C.Ellipse=3]="Ellipse",C[C.Path=4]="Path",C),T=(t=>(t[t.None=0]="None",t[t.Default=1]="Default",t[t.Fill=2]="Fill",t[t.Uniform=6]="Uniform",t))(T||{});class A{n;zg;Xg;oc;ru;lu;En;Un;Bn;j;we;xe;Qi;_i;Rs;rc;lc;constructor(t){u.Gi(this),this.n=2,void 0===t&&(t=4),this.j=t,this.we=0,this.xe=0,this.Qi=0,this._i=0,this.Rs=4===t?new l:A.Mw,this.zg=this.Rs.nt,this.Xg=(new x).u(),this.oc=null,this.ru=null,this.lu=NaN,this.En=w.TopLeft,this.Un=w.BottomRight,this.rc=NaN,this.lc=NaN,this.Bn=2}copy(){const t=new A;if(t.n=-2&this.n,t.j=this.j,t.we=this.we,t.xe=this.xe,t.Qi=this.Qi,t._i=this._i,4===this.j){const e=this.Rs.r,i=t.Rs;for(let t=0;t<e.length;t++){const n=e[t];i.add(n.copy())}t.Rs=i}else t.Rs=this.Rs;return t.zg=this.zg,t.Xg.a(this.Xg),t.oc=this.oc,t.ru=this.ru,t.lu=this.lu,t.En=this.En.P(),t.Un=this.Un.P(),t.rc=this.rc,t.lc=this.lc,t.Bn=this.Bn,t}static Line=1;static Rectangle=2;static Ellipse=3;static Path=4;static Mw=(new l).u();get h(){return!!(1&this.n)}set h(t){t?this.n|=1:this.n&=-2}get wt(){return!!(2&this.n)}set wt(t){t?this.n|=2:this.n&=-3}u(){if(this.h=!0,4!==this.type)return this;const t=this.figures;t.u();for(const e of t)e.u();return this}equalsApprox(t){if(!(t instanceof A))return!1;if(this.type!==t.type)return 1===this.type&&4===t.type?this.RC(t):1===t.type&&4===this.type&&t.RC(this);if(4===this.type){const e=this.figures.r,i=t.figures.r,n=e.length;if(n!==i.length)return!1;for(let t=0;t<n;t++){const n=e[t],s=i[t];if(!n.equalsApprox(s))return!1}return!0}return S.f(this.startX,t.startX)&&S.f(this.startY,t.startY)&&S.f(this.endX,t.endX)&&S.f(this.endY,t.endY)}RC(t){if(1!==this.type||4!==t.type)return!1;if(1===t.figures.count){const e=t.figures.elt(0);if(1===e.segments.count&&S.f(this.startX,e.startX)&&S.f(this.startY,e.startY)){const t=e.segments.elt(0);if(2===t.type&&S.f(this.endX,t.endX)&&S.f(this.endY,t.endY))return!0}}return!1}static stringify(t){return t.toString()}static stringifyFixed(t){return e.s(t,"number",A,"stringifyFixed:digits"),e=>e.toString(t)}oi(t){t in M?this.type=t:e.er(this,t)}toString(t){void 0===t&&(t=-1);const e=e=>0===e?"0":e.toFixed(t);let i;switch(this.type){case 1:return t<0?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+e(this.startX)+" "+e(this.startY)+"L"+e(this.endX)+" "+e(this.endY);case 2:return i=new x(this.startX,this.startY,0,0),i.union(this.endX,this.endY,0,0),t<0?"M"+i.x.toString()+" "+i.y.toString()+"H"+i.right.toString()+"V"+i.bottom.toString()+"H"+i.left.toString()+"z":"M"+e(i.x)+" "+e(i.y)+"H"+e(i.right)+"V"+e(i.bottom)+"H"+e(i.left)+"z";case 3:if(i=new x(this.startX,this.startY,0,0),i.union(this.endX,this.endY,0,0),t<0){const t=i.left.toString()+" "+(i.y+i.height/2).toString(),e=i.right.toString()+" "+(i.y+i.height/2).toString();return"M"+t+"A"+(i.width/2).toString()+" "+(i.height/2).toString()+" 0 0 1 "+e+"A"+(i.width/2).toString()+" "+(i.height/2).toString()+" 0 0 1 "+t}{const t=e(i.left)+" "+e(i.y+i.height/2),n=e(i.right)+" "+e(i.y+i.height/2);return"M"+t+"A"+e(i.width/2)+" "+e(i.height/2)+" 0 0 1 "+n+"A"+e(i.width/2)+" "+e(i.height/2)+" 0 0 1 "+t}case 4:let n="";const s=this.figures.r,r=s.length;for(let e=0;e<r;e++){const i=s[e];e>0&&(n+=" x "),i.isFilled&&(n+="F "),n+=i.toString(t)}return n;default:return M[this.type]}}static fillPath(t){"string"!=typeof t&&e.Zi(t,"string",A,"fillPath:str");const i=t.split(/[Xx]/),n=i.length;let s="";for(let t=0;t<n;t++){const e=i[t];null===e.match(/[Ff]/)?s+=(0===t?"":"X ")+"F"+(" "===e[0]?"":" ")+e:s+=0===t?e:"X"+(" "===e[0]?"":" ")+e}return s}static Yg="UuBbMmZzLlHhVvCcSsQqTtAaFfXx";static parse(t,i){void 0===i&&(i=!1),"string"!=typeof t&&e.Zi(t,"string",A,"parse:str");const n=new RegExp("(["+A.Yg+"])(["+A.Yg+"])","gm"),s=new RegExp("(["+A.Yg+"])([^s])","gm"),r=new RegExp("([^s])(["+A.Yg+"])","gm"),o=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(n,"$1 $2")).replace(n,"$1 $2")).replace(s,"$1 $2")).replace(r,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" ");for(let t=0;t<o.length;t++){const i=o[t];if(null!==i.match(/(\.[0-9]*)(\.)/gm)){const n=e.et();let s="",r=!1;for(let t=0;t<i.length;t++){const e=i[t];"."!==e||r?"."===e?(n.push(s),s="."):s+=e:(r=!0,s+=e)}n.push(s),o.splice(t,1);for(let e=0;e<n.length;e++)o.splice(t+e,0,n[e]);t+=n.length-1,e.J(n)}}let a=-1,l="",h="";const u=new y(0,0),c=new y(0,0),d=new y(0,0);let f=!0;function p(){return a>=w-1||null!==o[a+1].match(P)||(f=!1,!1)}function g(){return a++,o[a]}function m(t){let e=parseFloat(g()),i=parseFloat(g());l===l.toLowerCase()&&(e=d.x+e,i=d.y+i),t.i(e,i)}function v(){return m(d),d}function x(){return m(c),c}function b(){const t=h.toLowerCase();return"c"===t||"s"===t||"q"===t||"t"===t?new y(2*d.x-c.x,2*d.y-c.y):new y(d.x,d.y)}const w=o.length,k=he.vC(null);let S=!1,C=!1,M=!1,T=!0;const P=new RegExp("["+A.Yg+"]");for(;!(a>=w-1);){if(h=l,l=g(),""===l)continue;f=!0;let i=!1;switch(l.toUpperCase()){case"X":T=!0,S=!1,C=!1;break;case"M":const t=v();for(null===k.bi||!0===T?(k.hu(t.x,t.y,S,!1,!C,M),T=!1):k.sF(t.x,t.y),u.a(d);!p();){const t=v();k.lr(t.x,t.y)}break;case"L":for(;!p();){const t=v();k.lr(t.x,t.y)}f&&(i=!0);break;case"H":for(;!p();)d.i((l===l.toLowerCase()?d.x:0)+parseFloat(g()),d.y),k.lr(d.x,d.y);break;case"V":for(;!p();)d.i(d.x,(l===l.toLowerCase()?d.y:0)+parseFloat(g())),k.lr(d.x,d.y);f&&(i=!0);break;case"C":for(;!p();){const t=new y;m(t);const e=x(),i=v();k.hr(t.x,t.y,e.x,e.y,i.x,i.y)}f&&(i=!0);break;case"S":for(;!p();){const t=b(),e=x(),i=v();k.hr(t.x,t.y,e.x,e.y,i.x,i.y)}f&&(i=!0);break;case"Q":for(;!p();){const t=x(),e=v();k.Nw(t.x,t.y,e.x,e.y)}f&&(i=!0);break;case"T":for(;!p();){const t=b();c.a(t);const e=v();k.Nw(t.x,t.y,e.x,e.y),c.a(e)}f&&(i=!0);break;case"B":for(;!p();){const t=parseFloat(g()),e=parseFloat(g());let i=parseFloat(g()),n=parseFloat(g());const s=parseFloat(g());let r=s,o=!1;p()||(r=parseFloat(g()),p()||(o=0!==parseFloat(g()))),l===l.toLowerCase()&&(i+=d.x,n+=d.y),k.nF(t,e,i,n,s,r,o)}f&&(i=!0);break;case"A":for(;!p();){const t=Math.abs(parseFloat(g())),e=Math.abs(parseFloat(g())),i=parseFloat(g());let n=!1,s=!1,r=0,o=0;const a=g();1===a.length?(n=!!parseFloat(a),s=!!parseFloat(g()),r=parseFloat(g()),o=parseFloat(g())):2===a.length?(n=!!parseFloat(a[0]),s=!!parseFloat(a[1]),r=parseFloat(g()),o=parseFloat(g())):(n=!!parseFloat(a[0]),s=!!parseFloat(a[1]),r=parseFloat(a.slice(2)),o=parseFloat(g())),l===l.toLowerCase()&&(r=d.x+r,o=d.y+o),d.i(r,o),k.oF(t,e,i,n,s,r,o)}f&&(i=!0);break;case"Z":k.rF(),d.a(u);break;case"F":{let t="",e=1;for(;o[a+e];)if("0"!==o[a+e])if(null===o[a+e].match(/[Uu]/)){if(null!==o[a+e].match(P)){t=o[a+e];break}e++}else e++;else M=!0,e++;t.match(/[Mm]/)?S=!0:k.lF();break}case"U":{let t="",e=1;for(;o[a+e];)if(null===o[a+e].match(/[Ff]/)){if(null!==o[a+e].match(P)){t=o[a+e];break}e++}else e++;t.match(/[Mm]/)?C=!0:k.hF(!1);break}default:if("0"===l||"1"===l)break;e.ni("Unknown geometry command: "+l)}if(i){e.ni(`Bad geometry command: ${l}, next token: ${g()},\nstring: ${t}`);break}}const N=k.Kg;if(he.OC(k),i){const t=N.figures.iterator;for(;t.next();){t.value.isFilled=!0}}return N}static IC(t,e){const i=t.length,n=y.l();for(let s=0;s<i;s++){const i=t[s];n.x=i[0],n.y=i[1],e.gt(n),i[0]=n.x,i[1]=n.y,n.x=i[2],n.y=i[3],e.gt(n),i[2]=n.x,i[3]=n.y,n.x=i[4],n.y=i[5],e.gt(n),i[4]=n.x,i[5]=n.y,n.x=i[6],n.y=i[7],e.gt(n),i[6]=n.x,i[7]=n.y}y.e(n)}jk(){if(this.wt)return!0;if(4===this.type){const t=this.figures;if(this.zg!==t.nt)return!0;const e=this.figures.r,i=e.length;for(let t=0;t<i;t++)if(e[t].jk())return!0}return!1}Cw(){if(this.wt=!1,this.oc=null,this.ru=null,this.lu=NaN,4===this.type){const t=this.figures;this.zg=t.nt;const e=this.figures.r,i=e.length;for(let t=0;t<i;t++)e[t].aF()}const t=this.Xg;t.Nt(),isNaN(this.rc)||isNaN(this.lc)?t.i(0,0,0,0):t.i(0,0,this.rc,this.lc),this.EC(t,!1),t.unionNoCheck(0,0,0,0),t.u()}computeBoundsWithoutOrigin(){const t=new x;return this.EC(t,!0),t}EC(t,i){switch(this.type){case 1:case 2:case 3:i?t.i(this.we,this.xe,0,0):t.unionNoCheck(this.we,this.xe,0,0),t.unionNoCheck(this.Qi,this._i,0,0);break;case 4:const n=this.figures,s=n.r,r=n.length;for(let n=0;n<r;n++){const r=s[n];i&&0===n?t.i(r.startX,r.startY,0,0):t.unionNoCheck(r.startX,r.startY,0,0);const o=r.segments.r,a=o.length;let l=r.startX,h=r.startY;for(let i=0;i<a;i++){const n=o[i];switch(n.type){case 2:case 1:l=n.endX,h=n.endY,t.unionNoCheck(l,h,0,0);break;case 3:S.ou(l,h,n.point1X,n.point1Y,n.point2X,n.point2Y,n.endX,n.endY,.5,t),l=n.endX,h=n.endY;break;case 4:S.Hk(l,h,n.point1X,n.point1Y,n.endX,n.endY,.5,t),l=n.endX,h=n.endY;break;case 5:case 6:const i=5===n.type?n.bo(r):n.Uh(r,l,h),s=i.length;if(0===s){l=5===n.type?n.centerX:n.endX,h=5===n.type?n.centerY:n.endY,t.unionNoCheck(l,h,0,0);break}let o=null;for(let e=0;e<s;e++)o=i[e],S.ou(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],.5,t);null!==o&&(l=o[6],h=o[7]);break;default:e.o("Unknown Segment type: "+n.type)}}}break;default:e.o("Unknown Geometry type: "+this.type)}}cF(t,e){const i=this.bounds;let n=t/i.width,s=e/i.height;return isFinite(n)||(n=1),isFinite(s)||(s=1),1===n&&1===s?this:this.copy().scale(n,s)}normalize(){this.h&&e.L(this);const t=this.computeBoundsWithoutOrigin();return this.offset(-t.x,-t.y),new y(-t.x,-t.y)}offset(t,i){return this.h&&e.L(this),this.T(1,0,0,1,t,i),this}scale(t,i){return this.h&&e.L(this),this.T(t,0,0,i,0,0),this}rotate(t,i,n){this.h&&e.L(this),void 0===i&&(i=0),void 0===n&&(n=0);const s=k.l();return s.Ri(),s.cs(t,i,n),this.T(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),k.e(s),this}T(t,i,n,s,r,o){let a=0,l=0;switch(this.type){case 1:case 2:case 3:a=this.we,l=this.xe,this.we=a*t+l*n+r,this.xe=a*i+l*s+o,a=this.Qi,l=this._i,this.Qi=a*t+l*n+r,this._i=a*i+l*s+o;break;case 4:const h=this.figures.r,u=h.length;for(let c=0;c<u;c++){const u=h[c];a=u.startX,l=u.startY,u.startX=a*t+l*n+r,u.startY=a*i+l*s+o;const d=u.segments.r,f=d.length;for(let h=0;h<f;h++){const u=d[h];switch(u.type){case 2:case 1:a=u.endX,l=u.endY,u.endX=a*t+l*n+r,u.endY=a*i+l*s+o;break;case 3:a=u.point1X,l=u.point1Y,u.point1X=a*t+l*n+r,u.point1Y=a*i+l*s+o,a=u.point2X,l=u.point2Y,u.point2X=a*t+l*n+r,u.point2Y=a*i+l*s+o,a=u.endX,l=u.endY,u.endX=a*t+l*n+r,u.endY=a*i+l*s+o;break;case 4:a=u.point1X,l=u.point1Y,u.point1X=a*t+l*n+r,u.point1Y=a*i+l*s+o,a=u.endX,l=u.endY,u.endX=a*t+l*n+r,u.endY=a*i+l*s+o;break;case 5:if(a=u.centerX,l=u.centerY,u.centerX=a*t+l*n+r,u.centerY=a*i+l*s+o,0!==i){let e=180*Math.atan2(i,t)/Math.PI;e<0&&(e+=360),u.startAngle+=e}t<0&&(u.startAngle=180-u.startAngle,u.sweepAngle=-u.sweepAngle),s<0&&(u.startAngle=-u.startAngle,u.sweepAngle=-u.sweepAngle),u.radiusX*=Math.sqrt(t*t+n*n),void 0!==u.radiusY&&(u.radiusY*=Math.sqrt(i*i+s*s));break;case 6:if(a=u.endX,l=u.endY,u.endX=a*t+l*n+r,u.endY=a*i+l*s+o,0===u.radiusX||0===u.radiusY)break;if(0!==i){let e=180*Math.atan2(i,t)/Math.PI;e<0&&(e+=360),u.xAxisRotation+=e}t<0&&(u.xAxisRotation=180-u.xAxisRotation,u.isClockwiseArc=!u.isClockwiseArc),s<0&&(u.xAxisRotation=-u.xAxisRotation,u.isClockwiseArc=!u.isClockwiseArc),u.radiusX*=Math.sqrt(t*t+n*n),u.radiusY*=Math.sqrt(i*i+s*s);break;default:e.o("Unknown Segment type: "+u.type)}}}}return this.wt=!0,this}containsPoint(t,e){void 0===e&&(e=0);const i=this.we,n=this.xe,s=this.Qi,r=this._i;switch(this.type){case 1:return S.vi(i,n,s,r,e,t.x,t.y);case 2:{const o=Math.min(i,s)-e,a=Math.min(n,r)-e,l=Math.abs(s-i)+2*e,h=Math.abs(r-n)+2*e,u=x.V(o,a,l,h),c=u.containsPoint(t);return x.e(u),c}case 3:{let o=Math.min(i,s)-e,a=Math.min(n,r)-e;const l=(Math.abs(s-i)+2*e)/2,h=(Math.abs(r-n)+2*e)/2;return!(l<=0||h<=0)&&(o=t.x-(o+l),a=t.y-(a+h),o*o/(l*l)+a*a/(h*h)<=1)}case 4:return this.qk(t,e,!0,!1);default:return!1}}qk(t,i,n,s){const r=t.x,o=t.y,a=this.bounds.x-20,l=o;let h=0,u=0,c=0,d=0,f=0,p=0;const g=this.figures.r,m=g.length;for(let t=0;t<m;t++){const m=g[t],y=!m.isEvenOdd;if(!m.isFilled){if(m.Wk(r,o,s?i:i+2))return!0;continue}if(n&&m.Wk(r,o,i))return!0;const v=m.segments;u=m.startX,c=m.startY;let x=u,b=c;const w=v.r;for(let t=0;t<=v.length;t++){let i,n;switch(t!==v.length?(i=w[t],n=i.type,f=i.endX,p=i.endY):(n=2,f=x,p=b),n){case 1:{const t=this.Lw(r,o,a,l,u,c,x,b);if(isNaN(t))return!0;h+=t,x=f,b=p;break}case 2:{const t=this.Lw(r,o,a,l,u,c,f,p);if(isNaN(t))return!0;h+=t;break}case 3:d=S.Eg(u,c,i.point1X,i.point1Y,i.point2X,i.point2Y,f,p,a,l,r,o,.5),h+=d;break;case 4:{const t=(u+2*i.point1X)/3,e=(c+2*i.point1Y)/3,n=(2*i.point1X+f)/3,s=(2*i.point1Y+p)/3;d=S.Eg(u,c,t,e,n,s,f,p,a,l,r,o,.5),h+=d;break}case 5:case 6:{const t=5===i.type?i.bo(m):i.Uh(m,u,c),e=t.length;if(0===e){const t=this.Lw(r,o,a,l,u,c,5===i.type?i.centerX:i.endX,5===i.type?i.centerY:i.endY);if(isNaN(t))return!0;h+=t;break}let n=null;for(let i=0;i<e;i++){if(n=t[i],0===i){const t=this.Lw(r,o,a,l,u,c,n[0],n[1]);if(isNaN(t))return!0;h+=t}d=S.Eg(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],a,l,r,o,.5),h+=d}null!==n&&(f=n[6],p=n[7]);break}default:e.o("Unknown Segment type: "+i.type)}u=f,c=p}if(y){if(0!==h)return!0}else if(h%2!=0)return!0;h=0}return!1}Lw(t,e,i,n,s,r,o,a){if(S.vi(s,r,o,a,.05,t,e))return NaN;const l=(t-i)*(r-a);if(0===l)return 0;const h=((t*n-e*i)*(s-o)-(t-i)*(s*a-r*o))/l,u=(t*n-e*i)*(r-a)/l;if(h>=t)return 0;if((s>o?s-o:o-s)<(r>a?r-a:a-r)){if(r<a){if(u<r||u>a)return 0}else if(u<a||u>r)return 0}else if(s<o){if(h<s||h>o)return 0}else if(h<o||h>s)return 0;return l>0?1:-1}UC(t,e,i){const n=this.figures.r,s=n.length;for(let r=0;r<s;r++)if(n[r].Wk(t,e,i))return!0;return!1}getPointAlongPath(t,e){if(t<0?t=0:t>1&&(t=1),void 0===e&&(e=new y),1===this.type)return e.i(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;const i=this.flattenedSegments,n=this.flattenedLengths,s=this.flattenedTotalLength,r=i.length,o=s*t;let a=0;for(let t=0;t<r;t++){const s=n[t],r=s.length;for(let n=0;n<r;n++){const r=s[n];if(a+r>=o){const s=0===r?0:(o-a)/r,l=i[t],h=l[2*n],u=l[2*n+1],c=l[2*n+2],d=l[2*n+3];return e.i(h+(c-h)*s,u+(d-u)*s),e}a+=r}}return e}getAngleAlongPath(t){if(t<0?t=0:t>1&&(t=1),1===this.type)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;const e=this.flattenedSegments,i=this.flattenedLengths,n=this.flattenedTotalLength,s=e.length,r=n*t;let o=0;for(let t=0;t<s;t++){const n=i[t],s=n.length;for(let i=0;i<s;i++){const s=n[i];if(o+s>=r){const n=e[t],s=n[2*i],r=n[2*i+1],o=n[2*i+2],a=n[2*i+3];return Math.abs(o-s)<1&&Math.abs(a-r)<1?0:Math.abs(o-s)<1?a-r>=0?90:270:Math.abs(a-r)<1?o-s>=0?0:180:180*Math.atan2(a-r,o-s)/Math.PI}o+=s}}return NaN}getPointAndAngleAlongPath(t,e){if(t<0?t=0:t>1&&(t=1),void 0===e&&(e=[]),e.length=3,1===this.type)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;const i=this.flattenedSegments,n=this.flattenedLengths,s=this.flattenedTotalLength,r=i.length,o=s*t;let a=0;for(let t=0;t<r;t++){const s=n[t],r=s.length;for(let n=0;n<r;n++){const r=s[n];if(a+r>=o){const s=0===r?0:(o-a)/r,l=i[t],h=l[2*n],u=l[2*n+1],c=l[2*n+2],d=l[2*n+3];let f;return e[0]=h+(c-h)*s,e[1]=u+(d-u)*s,f=Math.abs(c-h)<1&&Math.abs(d-u)<1?0:Math.abs(c-h)<1?d-u>=0?90:270:Math.abs(d-u)<1?c-h>=0?0:180:180*Math.atan2(d-u,c-h)/Math.PI,e[2]=f,e}a+=r}}return e}getFractionForPoint(t){if(1===this.type){const e=this.startX,i=this.startY,n=this.endX,s=this.endY;if(e===n&&i===s)return 0;{const r=t.x,o=t.y;let a=0,l=0;if(e===n)return i<s?(a=i,l=s):(a=s,l=i),o<=a?a===i?0:1:o>=l?l===i?0:1:Math.abs(o-i)/(l-a);if(i===s)return e<n?(a=e,l=n):(a=n,l=e),r<=a?a===e?0:1:r>=l?l===e?0:1:Math.abs(r-e)/(l-a);{const t=(n-e)**2+(s-i)**2,a=y.l();S.ul(e,i,n,s,r,o,a);const l=a.x,h=a.y;return y.e(a),Math.sqrt(((l-e)**2+(h-i)**2)/t)}}}if(2!==this.type){const e=this.flattenedSegments,i=this.flattenedLengths,n=this.flattenedTotalLength,s=y.l();let r=1/0,o=0,a=0;const l=e.length;let h=0,u=0;for(let n=0;n<l;n++){const l=e[n],c=i[n],d=l.length;for(let e=0;e<d;e+=2){const i=l[e],n=l[e+1];if(0===e){h=i,u=n;continue}S.ul(h,u,i,n,t.x,t.y,s);const d=(s.x-t.x)**2+(s.y-t.y)**2;d<r&&(r=d,o=a,o+=Math.sqrt((s.x-h)**2+(s.y-u)**2)),a+=c[(e-2)/2],h=i,u=n}}y.e(s);const c=o/n;return c<0?0:c>1?1:c}{const e=this.startX,i=this.startY,n=this.endX,s=this.endY;if(e===n&&i===s)return 0;{const r=n-e,o=s-i,a=2*r+2*o;let l=t.x,h=t.y;l=Math.min(Math.max(l,e),n),h=Math.min(Math.max(h,i),s);const u=Math.abs(l-e),c=Math.abs(l-n),d=Math.abs(h-i),f=Math.abs(h-s),p=Math.min(u,c,d,f);if(p===d)return l/a;if(p===c)return(r+h)/a;if(p===f)return(2*r+o-l)/a;if(p===u)return(2*r+2*o-h)/a}}return 0}get flattenedSegments(){return this.BC(),this.oc}BC(){if(null===this.oc){const t=this.oc=[],e=this.ru=[];this.fF(t,e)}}get flattenedLengths(){return this.BC(),this.ru}get flattenedTotalLength(){let t=this.lu;if(isNaN(t)){if(1===this.type){const e=Math.abs(this.endX-this.startX),i=Math.abs(this.endY-this.startY);t=Math.sqrt(e*e+i*i)}else if(2===this.type){t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY)}else{const e=this.flattenedLengths,i=e.length;t=0;for(let n=0;n<i;n++){const i=e[n],s=i.length;for(let e=0;e<s;e++)t+=i[e]}}this.lu=t}return t}Jk(t){const e=[];let i=0,n=0;const s=t.length;for(let r=0;r<s;r+=2){const s=t[r],o=t[r+1];if(0===r){i=s,n=o;continue}const a=Math.sqrt(y.distanceSquared(i,n,s,o));e.push(a),i=s,n=o}return e}fF(t,i){let n=[];const s=[];if(1===this.type)n.push(this.startX),n.push(this.startY),n.push(this.endX),n.push(this.endY),t.push(n),s.push(Math.sqrt((this.startX-this.endX)**2+(this.startY-this.endY)**2)),i.push(s);else if(2===this.type)n.push(this.startX),n.push(this.startY),n.push(this.endX),n.push(this.startY),n.push(this.endX),n.push(this.endY),n.push(this.startX),n.push(this.endY),n.push(this.startX),n.push(this.startY),t.push(n),s.push(Math.abs(this.startX-this.endX)),s.push(Math.abs(this.startY-this.endY)),s.push(Math.abs(this.startX-this.endX)),s.push(Math.abs(this.startY-this.endY)),i.push(s);else if(3===this.type){const e=new P;e.startX=this.endX,e.startY=(this.startY+this.endY)/2;const s=new D(5);s.startAngle=0,s.sweepAngle=360,s.centerX=(this.startX+this.endX)/2,s.centerY=(this.startY+this.endY)/2,s.radiusX=Math.abs(this.startX-this.endX)/2,s.radiusY=Math.abs(this.startY-this.endY)/2,e.add(s);const r=s.bo(e),o=r.length;if(0===o)n.push(s.centerX),n.push(s.centerY);else{let t=e.startX,i=e.startY;for(let e=0;e<o;e++){const s=r[e];S.vn(t,i,s[2],s[3],s[4],s[5],s[6],s[7],.5,n),t=s[6],i=s[7]}}t.push(n),i.push(this.Jk(n))}else{const s=this.figures.iterator;for(;s.next();){const r=s.value;n=[],n.push(r.startX),n.push(r.startY);let o=r.startX,a=r.startY,l=o,h=a;const u=r.segments.r,c=u.length;for(let s=0;s<c;s++){const c=u[s];switch(c.type){case 1:n.length>=4&&(t.push(n),i.push(this.Jk(n))),n=[],n.push(c.endX),n.push(c.endY),o=c.endX,a=c.endY,l=o,h=a;break;case 2:n.push(c.endX),n.push(c.endY),o=c.endX,a=c.endY;break;case 3:S.vn(o,a,c.point1X,c.point1Y,c.point2X,c.point2Y,c.endX,c.endY,.5,n),o=c.endX,a=c.endY;break;case 4:S.Og(o,a,c.point1X,c.point1Y,c.endX,c.endY,.5,n),o=c.endX,a=c.endY;break;case 5:{const t=c.bo(r),e=t.length;if(0===e){n.push(c.centerX),n.push(c.centerY),o=c.centerX,a=c.centerY;break}for(let i=0;i<e;i++){const e=t[i];S.vn(o,a,e[2],e[3],e[4],e[5],e[6],e[7],.5,n),o=e[6],a=e[7]}break}case 6:{const t=c.Uh(r,o,a),e=t.length,i=c.endX,s=c.endY;if(0===e){n.push(i),n.push(s),o=i,a=s;break}for(let i=0;i<e;i++){const e=t[i];S.vn(o,a,e[2],e[3],e[4],e[5],e[6],e[7],.5,n),o=e[6],a=e[7]}break}default:e.o("Segment not of valid type: "+c.type)}c.isClosed&&(n.push(l),n.push(h))}n.length>=4&&(t.push(n),i.push(this.Jk(n)))}}}get type(){return this.j}set type(t){this.j!==t&&(this.h&&e.L(this,t),this.j=t,4===t?this.Rs=new l:(null===A.Mw&&(A.Mw=(new l).u()),this.Rs=A.Mw),this.wt=!0)}get startX(){return this.we}set startX(t){this.we!==t&&(this.h&&e.L(this,t),this.we=t,this.wt=!0)}get startY(){return this.xe}set startY(t){this.xe!==t&&(this.h&&e.L(this,t),this.xe=t,this.wt=!0)}get endX(){return this.Qi}set endX(t){this.Qi!==t&&(this.h&&e.L(this,t),this.Qi=t,this.wt=!0)}get endY(){return this._i}set endY(t){this._i!==t&&(this.h&&e.L(this,t),this._i=t,this.wt=!0)}get figures(){return this.Rs}set figures(t){this.Rs!==t&&(this.h&&e.L(this,t),this.Rs=t,this.wt=!0)}add(t){return this.Rs.add(t),this}setSpots(t,i,n,s,r,o,a,l){return this.h&&e.L(this),this.En=new w(t,i,r,o).u(),this.Un=new w(n,s,a,l).u(),this}get spot1(){return this.En}set spot1(t){this.h&&e.L(this,t),this.En=t.P()}get spot2(){return this.Un}set spot2(t){this.h&&e.L(this,t),this.Un=t.P()}get defaultStretch(){return this.Bn}set defaultStretch(t){this.Bn=t}get bounds(){return this.jk()&&this.Cw(),this.Xg}}A.stringify=A.stringify,A.stringifyFixed=A.stringifyFixed,A.fillPath=A.fillPath,A.parse=A.parse;class P{n;we;xe;hc;Gg;Ee;constructor(t,e,i,n,s){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===s&&(s=!1),this.n=2|(i?4:0)|(n?8:0)|(s?16:0),this.we=void 0!==t?t:0,this.xe=void 0!==e?e:0,this.hc=new l,this.Gg=this.hc.nt,this.Ee=null}copy(){const t=new P;t.n=-2&this.n,t.we=this.we,t.xe=this.xe;const e=this.hc.r,i=e.length,n=t.hc;for(let t=0;t<i;t++){const i=e[t].copy();n.add(i)}return t.Gg=this.Gg,t.Ee=this.Ee,t}equalsApprox(t){if(!(t instanceof P&&S.f(this.startX,t.startX)&&S.f(this.startY,t.startY)))return!1;const e=this.segments.r,i=t.segments.r,n=e.length;if(n!==i.length)return!1;for(let t=0;t<n;t++){const n=e[t],s=i[t];if(!n.equalsApprox(s))return!1}return!0}toString(t){void 0===t&&(t=-1);let e="";if(t<0)e="M"+this.startX.toString()+" "+this.startY.toString();else{const i=e=>0===e?"0":e.toFixed(t);e="M"+i(this.startX)+" "+i(this.startY)}const i=this.segments.r,n=i.length;for(let s=0;s<n;s++){e+=" "+i[s].toString(t)}return e}get h(){return!!(1&this.n)}set h(t){t?this.n|=1:this.n&=-2}get wt(){return!!(2&this.n)}set wt(t){t?this.n|=2:this.n&=-3}u(){this.h=!0;const t=this.segments;t.u();const e=t.r,i=t.length;for(let t=0;t<i;t++)e[t].u();return this}jk(){if(this.wt)return!0;const t=this.segments;if(this.Gg!==t.nt)return!0;for(const e of t)if(e.wt)return!0;return!1}aF(){this.wt=!1,this.Ee=null;const t=this.segments;this.Gg=t.nt;for(const e of t)e.wt=!1,e.vs=null}get isFilled(){return!!(4&this.n)}set isFilled(t){this.h&&e.L(this,t),t?this.n|=4:this.n&=-5}get isShadowed(){return!!(8&this.n)}set isShadowed(t){this.h&&e.L(this,t),t?this.n|=8:this.n&=-9}get isEvenOdd(){return!!(16&this.n)}set isEvenOdd(t){this.h&&e.L(this,t),t?this.n|=16:this.n&=-17}get startX(){return this.we}set startX(t){this.h&&e.L(this,t),this.we=t,this.Ee=null,this.wt=!0}get startY(){return this.xe}set startY(t){this.h&&e.L(this,t),this.xe=t,this.Ee=null,this.wt=!0}get segments(){return this.hc}set segments(t){this.h&&e.L(this,t),this.hc=t,this.Ee=null,this.wt=!0}add(t){return this.hc.add(t),this.Ee=null,this}Wk(t,i,n){const s=this;let r=s.startX,o=s.startY,a=r,l=o;const h=s.segments.r,u=h.length;for(let c=0;c<u;c++){const u=h[c];switch(u.type){case 1:a=u.endX,l=u.endY,r=u.endX,o=u.endY;break;case 2:if(S.vi(r,o,u.endX,u.endY,n,t,i))return!0;r=u.endX,o=u.endY;break;case 3:if(S.Pw(r,o,u.point1X,u.point1Y,u.point2X,u.point2Y,u.endX,u.endY,.5,t,i,n))return!0;r=u.endX,o=u.endY;break;case 4:if(S.Gk(r,o,u.point1X,u.point1Y,u.endX,u.endY,.5,t,i,n))return!0;r=u.endX,o=u.endY;break;case 5:case 6:const h=5===u.type?u.bo(s):u.Uh(s,r,o),c=h.length,d=5===u.type?u.centerX:u.endX,f=5===u.type?u.centerY:u.endY;if(0===c){if(S.vi(r,o,d,f,n,t,i))return!0;r=d,o=f;break}let p=null;for(let e=0;e<c;e++)if(p=h[e],0===e&&S.vi(r,o,p[0],p[1],n,t,i)||S.Pw(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,t,i,n))return!0;null!==p&&(r=p[6],o=p[7]);break;default:e.o("Unknown Segment type: "+u.type)}if(u.isClosed&&(r!==a||o!==l)&&S.vi(r,o,a,l,n,t,i))return!0}return!1}}var N=(t=>(t[t.Move=1]="Move",t[t.Line=2]="Line",t[t.Bezier=3]="Bezier",t[t.QuadraticBezier=4]="QuadraticBezier",t[t.Arc=5]="Arc",t[t.SvgArc=6]="SvgArc",t))(N||{});class D{j;n;Qi;_i;tn;gl;pl;ar;vs;constructor(t,e,i,n,s,r,o,a){if(u.Gi(this),void 0===t&&(t=2),this.j=t,this.n=2,this.Qi=void 0!==e?e:0,this._i=void 0!==i?i:0,void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===o&&(o=0),6===t){let t=r;t%=360,t<0&&(t+=360),this.tn=t,this.gl=0,this.pl=Math.max(n,0),this.ar=Math.max(s,0),"boolean"==typeof o?o&&(this.isLargeArc=!0):"number"==typeof o&&o&&(this.isLargeArc=!0),a&&(this.isClockwiseArc=!0)}else this.tn=n,this.gl=s,5===t&&(r=Math.max(r,0)),this.pl=r,"number"==typeof o?(5===t&&(o=Math.max(o,0)),this.ar=o):this.ar=0;this.vs=null}copy(){const t=new D;return t.j=this.j,t.n=-2&this.n,t.Qi=this.Qi,t._i=this._i,t.tn=this.tn,t.gl=this.gl,t.pl=this.pl,t.ar=this.ar,t}equalsApprox(t){if(!(t instanceof D)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case 1:case 2:return S.f(this.endX,t.endX)&&S.f(this.endY,t.endY);case 3:return S.f(this.endX,t.endX)&&S.f(this.endY,t.endY)&&S.f(this.point1X,t.point1X)&&S.f(this.point1Y,t.point1Y)&&S.f(this.point2X,t.point2X)&&S.f(this.point2Y,t.point2Y);case 4:return S.f(this.endX,t.endX)&&S.f(this.endY,t.endY)&&S.f(this.point1X,t.point1X)&&S.f(this.point1Y,t.point1Y);case 5:return S.f(this.startAngle,t.startAngle)&&S.f(this.sweepAngle,t.sweepAngle)&&S.f(this.centerX,t.centerX)&&S.f(this.centerY,t.centerY)&&S.f(this.radiusX,t.radiusX)&&S.f(this.radiusY,t.radiusY);case 6:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&S.f(this.xAxisRotation,t.xAxisRotation)&&S.f(this.endX,t.endX)&&S.f(this.endY,t.endY)&&S.f(this.radiusX,t.radiusX)&&S.f(this.radiusY,t.radiusY);default:return!1}}oi(t){t in N?this.type=t:e.er(this,t)}toString(t){void 0===t&&(t=-1);const e=e=>0===e?"0":e.toFixed(t);let i="";switch(this.type){case 1:i=t<0?"M"+this.endX.toString()+" "+this.endY.toString():"M"+e(this.endX)+" "+e(this.endY);break;case 2:i=t<0?"L"+this.endX.toString()+" "+this.endY.toString():"L"+e(this.endX)+" "+e(this.endY);break;case 3:i=t<0?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+e(this.point1X)+" "+e(this.point1Y)+" "+e(this.point2X)+" "+e(this.point2Y)+" "+e(this.endX)+" "+e(this.endY);break;case 4:i=t<0?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+e(this.point1X)+" "+e(this.point1Y)+" "+e(this.endX)+" "+e(this.endY);break;case 5:i=t<0?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+e(this.startAngle)+" "+e(this.sweepAngle)+" "+e(this.centerX)+" "+e(this.centerY)+" "+e(this.radiusX)+" "+e(this.radiusY);break;case 6:i=t<0?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+e(this.radiusX)+" "+e(this.radiusY)+" "+e(this.xAxisRotation)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+e(this.endX)+" "+e(this.endY);break;default:i=N[this.type]}return i+(this.isClosed?"z":"")}static Move=1;static Line=2;static Bezier=3;static QuadraticBezier=4;static Arc=5;static SvgArc=6;get h(){return!!(1&this.n)}set h(t){t?this.n|=1:this.n&=-2}get wt(){return!!(2&this.n)}set wt(t){t?this.n|=2:this.n&=-3}u(){return this.h=!0,this}close(){return this.isClosed=!0,this}bo(t){if(null!==this.vs&&!1===t.wt)return this.vs;const e=this.radiusX;let i=this.radiusY;if(void 0===i&&(i=e),0===e||0===i)return this.vs=[],this.vs;const n=this.tn,s=this.gl,r=S.DC(0,0,e<i?e:i,this.startAngle,this.startAngle+this.sweepAngle,!1);if(e!==i){const t=k.l();t.Ri(),e<i?t.tt(1,i/e):t.tt(e/i,1),A.IC(r,t),k.e(t)}const o=r.length;for(let t=0;t<o;t++){const e=r[t];e[0]+=n,e[1]+=s,e[2]+=n,e[3]+=s,e[4]+=n,e[5]+=s,e[6]+=n,e[7]+=s}return this.vs=r,this.vs}Uh(t,e,i){if(null!==this.vs&&!1===t.wt)return this.vs;if(0===this.radiusX||0===this.radiusY)return this.vs=[],this.vs;const n=e,s=i;let r=this.pl,o=this.ar;0===r&&(r=1e-4),0===o&&(o=1e-4);const a=this.tn*(Math.PI/180),l=this.isLargeArc,h=this.isClockwiseArc,u=this.Qi,c=this._i,d=Math.cos(a),f=Math.sin(a),p=d*(n-u)/2+f*(s-c)/2,g=-f*(n-u)/2+d*(s-c)/2,m=p*p/(r*r)+g*g/(o*o);m>1&&(r*=Math.sqrt(m),o*=Math.sqrt(m));let y=(l===h?-1:1)*Math.sqrt((r*r*o*o-r*r*g*g-o*o*p*p)/(r*r*g*g+o*o*p*p));isNaN(y)&&(y=0);let v=y*r*g/o,x=y*-o*p/r;isNaN(v)&&(v=0),isNaN(x)&&(x=0);const b=(n+u)/2+d*v-f*x,w=(s+c)/2+f*v+d*x,C=(t,e)=>Math.sqrt(t*t+e*e),M=(t,e,i,n)=>(t*i+e*n)/(C(t,e)*C(i,n)),T=(t,e,i,n)=>(t*n<e*i?-1:1)*Math.acos(M(t,e,i,n)),P=T(1,0,(p-v)/r,(g-x)/o),N=(p-v)/r,D=(g-x)/o,L=(-p-v)/r,E=(-g-x)/o;let _=T(N,D,L,E);const O=M(N,D,L,E);O<=-1?_=Math.PI:O>=1&&(_=0),!h&&_>0&&(_-=2*Math.PI),h&&_<0&&(_+=2*Math.PI);const F=r>o?r:o,R=r>o?1:r/o,I=r>o?o/r:1,B=S.DC(0,0,F,P,P+_,!0),j=k.l();return j.Ri(),j.Fs(b,w),j.cs(this.tn,0,0),j.tt(R,I),A.IC(B,j),k.e(j),this.vs=B,this.vs}get isClosed(){return!!(8&this.n)}set isClosed(t){this.isClosed!==t&&(t?this.n|=8:this.n&=-9,this.wt=!0)}get type(){return this.j}set type(t){this.h&&e.L(this,t),this.j=t,this.wt=!0}get endX(){return this.Qi}set endX(t){this.h&&e.L(this,t),this.Qi=t,this.wt=!0}get endY(){return this._i}set endY(t){this.h&&e.L(this,t),this._i=t,this.wt=!0}get point1X(){return this.tn}set point1X(t){this.h&&e.L(this,t),this.tn=t,this.wt=!0}get point1Y(){return this.gl}set point1Y(t){this.h&&e.L(this,t),this.gl=t,this.wt=!0}get point2X(){return this.pl}set point2X(t){this.h&&e.L(this,t),this.pl=t,this.wt=!0}get point2Y(){return this.ar}set point2Y(t){this.h&&e.L(this,t),this.ar=t,this.wt=!0}get centerX(){return this.tn}set centerX(t){this.h&&e.L(this,t),this.tn=t,this.wt=!0}get centerY(){return this.gl}set centerY(t){this.h&&e.L(this,t),this.gl=t,this.wt=!0}get radiusX(){return this.pl}set radiusX(t){t<0&&e.W(t,">= zero",D,"radiusX"),this.h&&e.L(this,t),this.pl=t,this.wt=!0}get radiusY(){return this.ar}set radiusY(t){t<0&&e.W(t,">= zero",D,"radiusY"),this.h&&e.L(this,t),this.ar=t,this.wt=!0}get startAngle(){return this.Qi}set startAngle(t){this.h&&e.L(this,t),(t%=360)<0&&(t+=360),this.Qi=t,this.wt=!0}get sweepAngle(){return this._i}set sweepAngle(t){this.h&&e.L(this,t),t>360&&(t=360),t<-360&&(t=-360),this._i=t,this.wt=!0}get isClockwiseArc(){return!!(4&this.n)}set isClockwiseArc(t){this.h&&e.L(this,t),t?this.n|=4:this.n&=-5,this.wt=!0}get isLargeArc(){return!!(16&this.n)}set isLargeArc(t){this.h&&e.L(this,t),t?this.n|=16:this.n&=-17,this.wt=!0}get xAxisRotation(){return this.tn}set xAxisRotation(t){this.h&&e.L(this,t),(t%=360)<0&&(t+=360),this.tn=t,this.wt=!0}}class L{N;Aw;Tw;Hg;jg;qg;Wg;Jg;$g;Zg;Qg;_g;tm;im;ko;em;sm;nm;be;constructor(){this.N=null,this.Aw=new y(0,0).u(),this.Tw=new y(0,0).u(),this.Hg=0,this.jg=0,this.qg=1,this.Wg="",this.Jg="",this.$g=!1,this.Zg=!1,this.Qg=0,this._g=0,this.tm=!1,this.im=!1,this.ko=!1,this.em=null,this.sm=0,this.nm=null,this.be=null}copy(){const t=new L;return this.clone(t)}clone(t){return t.N=this.N,t.Aw.a(this.viewPoint),t.Tw.a(this.documentPoint),t.Hg=this.Hg,t.jg=this.jg,t.qg=this.qg,t.Wg=this.Wg,t.Jg=this.Jg,t.$g=this.$g,t.Zg=this.Zg,t.Qg=this.Qg,t._g=this._g,t.tm=this.tm,t.im=this.im,t.ko=this.ko,t.em=this.em,t.sm=this.sm,t.nm=this.nm,t.be=this.be,t}toString(){let t="^";return 0!==this.modifiers&&(t+="M:"+this.modifiers),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.clickCount&&(t+="C:"+this.clickCount),0!==this.delta&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),null!==this.documentPoint&&(t+="@"+this.documentPoint.toString()),t}get diagram(){return this.N}set diagram(t){this.N=t}get viewPoint(){return this.Aw}set viewPoint(t){this.Aw.a(t)}get documentPoint(){return this.Tw}set documentPoint(t){this.Tw.a(t)}getMultiTouchViewPoint(t,e){const i=this.diagram;return null===i||i.VC(this.event,t,e),e}getMultiTouchDocumentPoint(t,e){const i=this.diagram;return null===i||(i.VC(this.event,t,e),e.a(i.transformViewToDoc(e))),e}get modifiers(){return this.Hg}set modifiers(t){this.Hg=t}get button(){return this.jg}set button(t){if(this.jg=t,null===this.event)switch(t){case 0:return void(this.buttons=1);case 1:return void(this.buttons=4);case 2:return void(this.buttons=2)}}get buttons(){return this.qg}set buttons(t){this.qg=t}get key(){return this.Wg}set key(t){this.Wg=t}get code(){return this.Jg}set code(t){this.Jg=t}get down(){return this.$g}set down(t){this.$g=t}get up(){return this.Zg}set up(t){this.Zg=t}get clickCount(){return this.Qg}set clickCount(t){this.Qg=t}get delta(){return this._g}set delta(t){this._g=t}get isMultiTouch(){return this.tm}set isMultiTouch(t){this.tm=t}get handled(){return this.im}set handled(t){this.im=t}get bubbles(){return this.ko}set bubbles(t){this.ko=t}get event(){return this.em}set event(t){this.em=t}get isTouchEvent(){const t=this.event;return null!==t&&("touch"===t.pointerType||"pen"===t.pointerType)}get timestamp(){return this.sm}set timestamp(t){this.sm=t}get targetDiagram(){return this.nm}set targetDiagram(t){this.nm=t}get targetObject(){return this.be}set targetObject(t){this.be=t}get control(){return!!(1&this.modifiers)}set control(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}get shift(){return!!(4&this.modifiers)}set shift(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}get alt(){return!!(2&this.modifiers)}set alt(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}get meta(){return!!(8&this.modifiers)}set meta(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}get left(){const t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?!!(1&this.buttons):0===this.button}set left(t){t?this.buttons|=1:this.buttons&=-2}get right(){const t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?!!(2&this.buttons):2===this.button}set right(t){t?this.buttons|=2:this.buttons&=-3}get middle(){const t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?!!(4&this.buttons):1===this.button}set middle(t){t?this.buttons|=4:this.buttons&=-5}get commandKey(){const t=this.code,e=this.key;return"cxvyzagCXVYZAG".includes(e)?e.toLowerCase():"KeyC"===t?"c":"KeyX"===t?"x":"KeyV"===t?"v":"KeyY"===t?"y":"KeyZ"===t?"z":"KeyA"===t?"a":"KeyG"===t?"g":""!==t?t:e}}class E{N;Pt;om;rm;constructor(){this.N=null,this.Pt="",this.om=null,this.rm=null}copy(){const t=new E;return t.N=this.N,t.Pt=this.Pt,t.om=this.om,t.rm=this.rm,t}toString(){let t="*"+this.name;return null!==this.subject&&(t+=":"+this.subject.toString()),null!==this.parameter&&(t+="("+this.parameter.toString()+")"),t}get diagram(){return this.N}set diagram(t){this.N=t}get name(){return this.Pt}set name(t){this.Pt=t}get subject(){return this.om}set subject(t){this.om=t}get parameter(){return this.rm}set parameter(t){this.rm=t}}var _=(t=>(t[t.Transaction=1]="Transaction",t[t.Property=2]="Property",t[t.Insert=3]="Insert",t[t.Remove=4]="Remove",t))(_||{});class O{au;lm;en;ki;N;cu;ac;cc;fc;uc;constructor(){this.au=2,this.lm="",this.en="",this.ki=null,this.N=null,this.cu=null,this.ac=null,this.cc=null,this.fc=null,this.uc=null}static Transaction=1;static Property=2;static Insert=3;static Remove=4;clear(){this.ki=null,this.N=null,this.cu=null,this.ac=null,this.cc=null,this.fc=null,this.uc=null}copy(){const t=new O;t.au=this.au,t.lm=this.lm,t.en=this.en,t.ki=this.ki,t.N=this.N,t.cu=this.cu;let i=this.ac;return e.K(i)&&e.it(i.copyFrozen)?t.ac=i.copyFrozen():t.ac=i,i=this.cc,e.K(i)&&e.it(i.copyFrozen)?t.cc=i.copyFrozen():t.cc=i,i=this.fc,e.K(i)&&e.it(i.copyFrozen)?t.fc=i.copyFrozen():t.fc=i,i=this.uc,e.K(i)&&e.it(i.copyFrozen)?t.uc=i.copyFrozen():t.uc=i,t}oi(t){t in _?this.change=t:e.er(this,t)}toString(){let t="";return 1===this.change?t+="* ":2===this.change?t+=null!==this.model?"!m":"!d":t+=(null!==this.model?"!m":"!d")+this.change,this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",1===this.change?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=e.toString(this.object)),null!==this.oldValue&&(t+="  old: "+e.toString(this.oldValue)),null!==this.oldParam&&(t+=" "+this.oldParam),null!==this.newValue&&(t+="  new: "+e.toString(this.newValue)),null!==this.newParam&&(t+=" "+this.newParam)),t}getValue(t){return t?this.oldValue:this.newValue}getParam(t){return t?this.oldParam:this.newParam}canUndo(){return null!==this.model||null!==this.diagram}undo(){this.canUndo()&&(null!==this.model?this.model.changeState(this,!0):null!==this.diagram&&this.diagram.zC(this,!0))}canRedo(){return null!==this.model||null!==this.diagram}redo(){this.canRedo()&&(null!==this.model?this.model.changeState(this,!1):null!==this.diagram&&this.diagram.zC(this,!1))}get model(){return this.ki}set model(t){this.ki=t}get diagram(){return this.N}set diagram(t){this.N=t}get change(){return this.au}set change(t){this.au=t}get modelChange(){return this.lm}set modelChange(t){this.lm=t}get propertyName(){return this.en}set propertyName(t){this.en=t}get isTransactionFinished(){return 1===this.au&&("CommittedTransaction"===this.en||"FinishedUndo"===this.en||"FinishedRedo"===this.en)}get object(){return this.cu}set object(t){this.cu=t}get oldValue(){return this.ac}set oldValue(t){this.ac=t}get oldParam(){return this.cc}set oldParam(t){this.cc=t}get newValue(){return this.fc}set newValue(t){this.fc=t}get newParam(){return this.uc}set newParam(t){this.uc=t}}class F{XC;Pt;$k;constructor(){this.XC=(new l).u(),this.Pt="",this.$k=!1}toString(t){let e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(void 0!==t&&t>0){const t=this.changes.count;for(let i=0;i<t;i++){const t=this.changes.elt(i);null!==t&&(e+="\n  "+t.toString())}}return e}clear(){const t=this.changes;t.Nt();for(let e=t.count-1;e>=0;e--){const i=t.elt(e);null!==i&&i.clear()}t.clear(),t.u()}canUndo(){return this.isComplete}undo(){if(this.canUndo())for(let t=this.changes.count-1;t>=0;t--){const e=this.changes.elt(t);null!==e&&e.undo()}}canRedo(){return this.isComplete}redo(){if(!this.canRedo())return;const t=this.changes.count;for(let e=0;e<t;e++){const t=this.changes.elt(e);null!==t&&t.redo()}}uF(t){const e=this.changes;for(let i=e.count-1;i>=t;i--){const t=e.elt(i);null!==t&&t.undo(),e.Nt(),e.removeAt(i)}e.u()}optimize(){if(!this.isComplete)return;const t=this.changes;t.Nt();const e=new m;for(let i=0;i<t.count;i++){const n=t.elt(i);if(null===n||2!==n.change||!n.object)continue;let s=e.get(n.object);s||(s=new m,e.set(n.object,s));const r=s.get(n.propertyName);null===r?s.set(n.propertyName,-1):(r>0&&t.setElt(r,null),s.set(n.propertyName,i))}let i=0;for(let e=0;e<t.count;e++){const n=t.elt(e);null!==n&&(e>i&&t.setElt(i,n),i++)}for(;t.length>i;)t.pop();t.u()}get changes(){return this.XC}get name(){return this.Pt}set name(t){this.Pt=t}get isComplete(){return this.$k}set isComplete(t){this.$k=t}}class R{Dw;Oi;YC;Os;Zk;hm;Vn;Qk;_k;sn;dc;Fw;Is;Rw;vw;am;Ow;constructor(t){this.Dw=new u,this.Oi=!1,this.YC=(new l).u(),this.Os=-1,this.Zk=999,this.Is=!1,this.hm=null,this.Vn=0,this.Qk=!1,this._k=23,this.sn=(new l).u(),this.dc=new l,this.Fw=!0,this.Rw=!1,this.vw=!1,this.am=!1,this.Ow=!1,t&&Object.assign(this,t)}toString(t){let e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";let i=this.nestedTransactionNames.count;for(let t=0;t<i;t++)t>0&&(e+=" "),e+=this.nestedTransactionNames.elt(t);if(e+="]",void 0!==t&&t>0){i=this.history.count;for(let n=0;n<i;n++)e+="\n "+this.history.elt(n).toString(t-1)}return e}clear(){const t=this.history;t.Nt();for(let e=t.count-1;e>=0;e--){const i=t.elt(e);null!==i&&i.clear()}t.clear(),this.Os=-1,t.u(),this.Is=!1,this.hm=null,this.Vn=0,this.sn.Nt(),this.sn.clear(),this.sn.u(),this.dc.clear(),this.Rw=!1,this.vw=!1,this.am=!1,this.Ow=!1}copyProperties(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.cm=t.cm}addModel(t){this.Dw.add(t)}removeModel(t){this.Dw.delete(t)}startTransaction(t){if(void 0===t&&(t=""),null===t&&(t=""),this.isUndoingRedoing)return!1;!0===this.Fw&&(this.Fw=!1,this.Vn++,this.yl||this.wl("StartingFirstTransaction",t,this.currentTransaction),this.Vn>0&&this.Vn--),this.isEnabled&&(this.sn.Nt(),this.sn.add(t),this.sn.u(),null===this.currentTransaction?this.dc.add(0):this.dc.add(this.currentTransaction.changes.count)),this.Vn++;const e=1===this.transactionLevel;return e&&(this.yl||this.wl("StartedTransaction",t,this.currentTransaction)),e}commitTransaction(t){return void 0===t&&(t=""),this.KC(!0,t)}rollbackTransaction(){return this.KC(!1,"")}KC(t,i){if(this.isUndoingRedoing)return!1;this.cm&&this.transactionLevel<1&&e.ni("Ending transaction without having started a transaction: "+i);const n=1===this.transactionLevel;let s=this.currentTransaction;n&&t&&(this.yl||this.wl("CommittingTransaction",i,s));let r=0;if(this.transactionLevel>0&&(this.Vn--,this.isEnabled)){const t=this.sn.count;t>0&&(""===i&&(i=this.sn.elt(0)),this.sn.Nt(),this.sn.removeAt(t-1),this.sn.u());const e=this.dc.count;e>0&&(r=this.dc.elt(e-1),this.dc.removeAt(e-1))}if(n){if(t){if(this.am=!1,null===s&&""!==i&&(s=this.currentTransaction),this.isEnabled&&null!==s){const t=s;t.isComplete||(t.isComplete=!0,t.name=i),this.discardHistoryAfterIndex();const e=this.history;e.Nt();const n=this.maxHistoryLength;if(n>=0)if(0===n)e.clear();else if(e.count>=n){const t=e.elt(0);null!==t&&t.clear(),e.removeAt(0),this.Os--}0!==n&&(0===e.count||e.get(e.count-1)!==t)&&(e.add(t),this.Os++),e.u(),s=t}this.yl||this.wl("CommittedTransaction",i,s)}else{this.Is=!0;try{this.isEnabled&&null!==s&&(s.isComplete=!0,s.undo())}finally{this.yl||this.wl("RolledBackTransaction",i,s),this.Is=!1}null!==s&&s.clear()}return this.hm=null,this.Iw&&this.clear(),this.Iw=!1,this.Ew=!1,!0}return this.isEnabled&&!t&&null!==s&&s.uF(r),!1}discardHistoryAfterIndex(){if(this.isUndoingRedoing||!this.canRedo())return;const t=this.history;t.Nt();for(let e=t.count-1;e>this.historyIndex;e--){const i=t.elt(e);null!==i&&i.clear(),t.removeAt(e),this.am=!0}t.u()}SE(t){this.Vn+=t,this.Vn<0&&(this.Vn=0)}canUndo(){if(!this.isEnabled||this.transactionLevel>0)return!1;const t=this.transactionToUndo;return!(null===t||!t.canUndo())}undo(){if(!this.canUndo())return;const t=this.transactionToUndo;try{this.Is=!0,this.wl("StartingUndo","Undo",t),this.Os--,t.undo()}catch(t){e.ni("undo error: "+t.toString())}finally{this.wl("FinishedUndo","Undo",t),this.Is=!1}}canRedo(){if(!this.isEnabled||this.transactionLevel>0)return!1;const t=this.transactionToRedo;return!(null===t||!t.canRedo())}redo(){if(!this.canRedo())return;const t=this.transactionToRedo;try{this.Is=!0,this.wl("StartingRedo","Redo",t),this.Os++,t.redo()}catch(t){e.ni("redo error: "+t.toString())}finally{this.wl("FinishedRedo","Redo",t),this.Is=!1}}wl(t,e,i){void 0===i&&(i=null);const n=new O;n.change=1,n.propertyName=t,n.object=i,n.oldValue=e;const s=this.models;for(;s.next();){const t=s.value;n.model=t,t.dF(n)}}handleChanged(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){let i=this.currentTransaction;null===i&&(i=new F,this.hm=i);const n=t.copy(),s=i.changes;if(s.Nt(),s.add(n),s.u(),this.cm&&this._k>0&&this.transactionLevel<=0&&!this.Fw){const i=t.diagram;if(null!==i&&!1===i.Bh)return;e.ni("Change not within a transaction: "+n.toString()),this._k--}}}skipsEvent(t){if(null===t||1===t.change)return!0;const e=t.object;if(null===e)return!1;if(void 0!==e.layer){const t=e.layer;if(null!==t&&t.isTemporary)return!0}else if(e.isTemporary)return!0;return!1}get models(){return this.Dw.iterator}get isEnabled(){return this.Oi}set isEnabled(t){this.Oi=t}get transactionToUndo(){return this.historyIndex>=0&&this.historyIndex<=this.history.count-1?this.history.elt(this.historyIndex):null}get transactionToRedo(){return this.historyIndex<this.history.count-1?this.history.elt(this.historyIndex+1):null}get isUndoingRedoing(){return this.Is}get history(){return this.YC}get maxHistoryLength(){return this.Zk}set maxHistoryLength(t){this.Zk=t}get historyIndex(){return this.Os}get currentTransaction(){return this.hm}get transactionLevel(){return this.Vn}get isInTransaction(){return this.Vn>0}get cm(){return this.Qk}set cm(t){this.Qk=t}get nestedTransactionNames(){return this.sn}get Iw(){return this.Rw}set Iw(t){this.Rw=t}get Ew(){return this.vw}set Ew(t){this.vw=t}get yl(){return this.Ow}set yl(t){this.Ow=t}get isJustDiscarded(){return this.am}}class I{N;Pt;Oi;tP;iP;fm;GC;constructor(){u.Gi(this),this.N=xt.um(),this.Pt="",this.Oi=!0,this.tP=!1,this.iP=null,this.GC=new L,this.fm=-1}get diagram(){return this.N}set diagram(t){t instanceof xt&&(this.N=t)}toString(){return""!==this.name?this.name+" Tool":e.Dn(this.constructor)}updateAdornments(t){}canStart(){return this.isEnabled}doStart(){}doActivate(){this.isActive=!0}doDeactivate(){this.isActive=!1}doStop(){}doCancel(){this.transactionResult=null,this.stopTool()}stopTool(){const t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")}doMouseDown(){!this.isActive&&this.canStart()&&this.doActivate()}doMouseMove(){}doMouseUp(){this.stopTool()}doMouseWheel(){}canStartMultiTouch(){return!0}standardPinchZoomStart(){const t=this.diagram,e=t.lastInput,i=e.getMultiTouchViewPoint(0,y.V(NaN,NaN)),n=e.getMultiTouchViewPoint(1,y.V(NaN,NaN));if(!i.isReal()||!n.isReal())return y.e(i),void y.e(n);if(this.doCancel(),t.getInputOption("hasGestureZoom")){t.eP=t.scale;const s=n.x-i.x,r=n.y-i.y,o=Math.sqrt(s*s+r*r);t.sP=o,e.bubbles=!1}y.e(i),y.e(n)}standardPinchZoomMove(){const t=this.diagram,e=t.lastInput,i=e.getMultiTouchViewPoint(0,y.V(NaN,NaN)),n=e.getMultiTouchViewPoint(1,y.V(NaN,NaN));if(!i.isReal()||!n.isReal())return y.e(i),void y.e(n);if(this.doCancel(),t.getInputOption("hasGestureZoom")){const s=n.x-i.x,r=n.y-i.y,o=Math.sqrt(s*s+r*r)/t.sP,a=new y((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2),l=t.eP*o,h=t.commandHandler;if(l!==t.scale&&h.canResetZoom(l)){const e=t.zoomPoint;t.zoomPoint=a,h.resetZoom(l),t.zoomPoint=e}e.bubbles=!1}y.e(i),y.e(n)}doKeyDown(){"Escape"===this.diagram.lastInput.code&&this.doCancel()}doKeyUp(){}startTransaction(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.startTransaction(t)}stopTransaction(){const t=this.diagram;return null===this.transactionResult?t.rollbackTransaction():t.commitTransaction(this.transactionResult)}standardMouseSelect(){const t=this.diagram;if(!t.allowSelect)return;const i=t.lastInput,n=t.findPartAt(i.documentPoint,!1);if(null!==n){if(e.tr?i.meta:i.control){t.D("ChangingSelection",t.selection);let e=n;for(;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.D("ChangedSelection",t.selection)}else if(i.shift){if(!n.isSelected){t.D("ChangingSelection",t.selection);let e=n;for(;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.D("ChangedSelection",t.selection)}}else if(!n.isSelected){let e=n;for(;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else i.left&&!(e.tr?i.meta:i.control)&&!i.shift&&t.clearSelection()}standardMouseClick(t,e){void 0===t&&(t=null),void 0===e&&(e=t=>!t.layer?.isTemporary);const i=this.diagram,n=i.lastInput,s=i.findObjectAt(n.documentPoint,t,e);return n.targetObject=s,this.gF(s,n,i),n.handled}gF(t,e,i){if(e.handled=!1,null!==t&&!t.isEnabledObject())return;let n=0;e.left?n=1===e.clickCount?1:2===e.clickCount?2:1:e.right&&1===e.clickCount&&(n=3);let s="ObjectSingleClicked";if(null!==t){switch(n){case 1:s="ObjectSingleClicked";break;case 2:s="ObjectDoubleClicked";break;case 3:s="ObjectContextClicked"}0!==n&&i.D(s,t)}else{switch(n){case 1:s="BackgroundSingleClicked";break;case 2:s="BackgroundDoubleClicked";break;case 3:s="BackgroundContextClicked"}0!==n&&i.D(s)}if(null!==t)for(;null!==t;){let i=null;switch(n){case 1:i=t.click;break;case 2:i=t.doubleClick?t.doubleClick:t.click;break;case 3:i=t.contextClick}if(null!==i&&(i(e,t),e.handled))break;t=t.panel}else{let t=null;switch(n){case 1:t=i.click;break;case 2:t=i.doubleClick?i.doubleClick:i.click;break;case 3:t=i.contextClick}null!==t&&t(e)}}standardMouseOver(){const t=this.diagram,e=t.lastInput;if(!0===t.animationManager.pi)return;const i=t.skipsUndoManager;t.skipsUndoManager=!0;let n=t.viewportBounds.containsPoint(e.documentPoint)?t.findObjectAt(e.documentPoint,null,null):null;e.event&&("pointercancel"===e.event.type||"pointerout"===e.event.type)&&(n=null),e.targetObject=n;let s=!1;if(n!==t.gc){let i=t.gc;const r=i;for(t.gc=n,this.doCurrentObjectChanged(i,n),e.handled=!1;null!==i;){const t=i.mouseLeave;if(null!==t&&(n===i||null!==n&&n.isContainedBy(i)||(t(e,i,n),s=!0,e.handled)))break;i=i.panel}for(i=r,e.handled=!1;null!==n;){const t=n.mouseEnter;if(null!==t&&(i===n||null!==i&&i.isContainedBy(n)||(t(e,n,i),s=!0,e.handled)))break;n=n.panel}n=t.gc}if(null!==n){let i=n,r="";for(;null!==i&&(r=i.cursor,""===r);)i=i.panel;for(t.currentCursor=r,e.handled=!1,i=n;null!==i;){const t=i.mouseOver;if(null!==t&&(t(e,i),s=!0,e.handled))break;i=i.panel}}else{this.doUpdateCursor(null);const i=t.mouseOver;null!==i&&(i(e),s=!0)}s&&t.requestUpdate(),t.skipsUndoManager=i}doUpdateCursor(t){const e=this.diagram;e&&(e.currentCursor="")}doCurrentObjectChanged(t,e){}standardMouseWheel(){const t=this.diagram,e=t.lastInput;let i=e.delta;if(0===i||!t.documentBounds.isReal())return;const n=t.commandHandler,s=t.toolManager.mouseWheelBehavior;if(null!==n&&(2===s&&!e.shift||1===s&&e.control)){if(i>0?n.canIncreaseZoom():n.canDecreaseZoom()){const s=t.zoomPoint;t.zoomPoint=e.viewPoint,i>0?n.increaseZoom():n.decreaseZoom(),t.zoomPoint=s}e.bubbles=!1}else if(2===s&&e.shift||1===s&&!e.control){const n=t.position.copy(),s=e.event,r=s.deltaMode;let o=s.deltaX,a=s.deltaY,l="pixel";if(0===o&&0===a||e.shift)!e.shift&&t.allowVerticalScroll?(i=3*i*t.scrollVerticalLineChange,t.scroll(l,i>0?"up":"down",Math.abs(i))):e.shift&&t.allowHorizontalScroll&&(i=3*i*t.scrollHorizontalLineChange,t.scroll(l,i>0?"left":"right",Math.abs(i)));else{switch(r){case 0:l="pixel";break;case 1:l="line";break;case 2:l="page"}if(0!==o&&t.allowHorizontalScroll){o*=t.scrollHorizontalLineChange/16,t.scroll(l,o>0?"right":"left",Math.abs(o))}if(0!==a&&t.allowVerticalScroll){a*=t.scrollVerticalLineChange/16,t.scroll(l,a>0?"down":"up",Math.abs(a))}}this.doWheelChange(t,n,e)}}doWheelChange(t,e,i){(!t.position.equals(e)||0!==i.event.wheelDeltaX)&&(i.bubbles=!1)}standardWaitAfter(t,i){void 0===i&&(i=this.diagram.lastInput),this.cancelWaitAfter();const n=this,s=i.clone(this.GC);this.fm=e.ir((()=>n.doWaitAfter(s)),t)}cancelWaitAfter(){-1!==this.fm&&e.Tg(this.fm),this.fm=-1}doWaitAfter(t){}findToolHandleAt(t,e){const i=this.diagram.findObjectAt(t,(t=>{for(;null!==t&&!(t.panel instanceof fe);)t=t.panel;return t}));return null===i?null:i.part.category===e?i:null}isBeyondDragSize(t,e){const i=this.diagram;void 0===t&&(t=i.firstInput.viewPoint),void 0===e&&(e=i.lastInput.viewPoint);const n=i.toolManager.dragSize;let s=n.width,r=n.height;return i.firstInput.isTouchEvent&&(s+=6,r+=6),Math.abs(e.x-t.x)>s||Math.abs(e.y-t.y)>r}get name(){return this.Pt}set name(t){e.s(t,"string",I,"name"),this.Pt=t}get isEnabled(){return this.Oi}set isEnabled(t){e.s(t,"boolean",I,"isEnabled"),this.Oi=t}get isActive(){return this.tP}set isActive(t){e.s(t,"boolean",I,"isActive"),this.tP=t}get transactionResult(){return this.iP}set transactionResult(t){null!==t&&e.s(t,"string",I,"transactionResult"),this.iP=t}}var B=(t=>(t[t.Scroll=1]="Scroll",t[t.Zoom=2]="Zoom",t[t.None=3]="None",t))(B||{}),j=(t=>(t[t.Zoom=1]="Zoom",t[t.Cancel=2]="Cancel",t[t.None=3]="None",t))(j||{});class z extends I{HC;jC;qC;nP;oP;rP;lP;hP;aP;cP;dm;Vh;constructor(t){super(),this.name="ToolManager",this.HC=new l,this.jC=new l,this.qC=new l,this.nP=850,this.oP=850,this.rP=new v(2,2).$(),this.lP=5e3,this.hP=1,this.aP=1,this.cP=null,this.dm=null,this.Vh=-1,t&&Object.assign(this,t)}static WheelScroll=1;static WheelZoom=2;static WheelNone=3;static GestureZoom=1;static GestureCancel=2;static GestureNone=3;get mouseWheelBehavior(){return this.hP}set mouseWheelBehavior(t){this.hP=t}get gestureBehavior(){return this.aP}set gestureBehavior(t){this.aP=t}initializeStandardTools(){}updateAdornments(t){const e=this.currentToolTip;if(e instanceof fe&&this.dm===t){const i=e.adornedObject;(null!==t?null!==i&&i.part===t:null===i)?this.showToolTip(e,i):this.hideToolTip()}}doMouseDown(){const t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&2===this.gestureBehavior&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),3===this.gestureBehavior)return void(e.bubbles=!0);if(2===this.gestureBehavior)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}t.undoManager;const i=this.mouseDownTools.length;for(let e=0;e<i;e++){const i=this.mouseDownTools.elt(e);if(i.diagram=this.diagram,i.canStart())return t.doFocus(),t.currentTool=i,void(t.currentTool===i&&(i.isActive||i.doActivate(),i.doMouseDown()))}1===t.lastInput.button&&(1===this.mouseWheelBehavior?this.mouseWheelBehavior=2:2===this.mouseWheelBehavior&&(this.mouseWheelBehavior=1)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)}doMouseMove(){const t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(3===this.gestureBehavior)return void(e.bubbles=!0);if(2===this.gestureBehavior)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive){const e=this.mouseMoveTools.length;for(let i=0;i<e;i++){const e=this.mouseMoveTools.elt(i);if(e.diagram=this.diagram,e.canStart())return t.doFocus(),t.currentTool=e,void(t.currentTool===e&&(e.isActive||e.doActivate(),e.doMouseMove()))}}this.standardMouseActivity(t);const i=e.event;null!==i&&("pointermove"===i.type||!i.cancelable)&&(e.bubbles=!0)}standardMouseActivity(t){this.standardMouseOver(),this.isBeyondDragSize()&&this.standardWaitAfter(this.isActive?this.holdDelay:this.hoverDelay,t.lastInput)}doCurrentObjectChanged(t,e){const i=this.currentToolTip;null!==i&&(null!==e&&i instanceof fe&&(e===i||e.isContainedBy(i))||this.hideToolTip())}doWaitAfter(t){const e=this.diagram;if(e.mF()&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled)){const i=t.copy();return i.button=2,e.lastInput=i,e.Uw=!0,void e.doMouseUp()}}doMouseHover(){const t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.findObjectAt(e.documentPoint,null,null));let i=e.targetObject;if(null!==i)for(e.handled=!1;null!==i;){const t=this.isActive?i.mouseHold:i.mouseHover;if(null!==t&&(t(e,i),e.handled))break;i=i.panel}else{const i=this.isActive?t.mouseHold:t.mouseHover;null!==i&&i(e)}}doToolTip(){const t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.findObjectAt(e.documentPoint,null,null));let i=e.targetObject;if(null!==i){const t=this.currentToolTip;if(t instanceof fe&&(i===t||i.isContainedBy(t)))return;for(;null!==i;){const t=i.toolTip;if(null!==t)return void this.showToolTip(t,i);i=i.panel}this.hideToolTip()}else{const e=t.toolTip;null!==e?this.showToolTip(e,null):this.hideToolTip()}}showToolTip(t,i){const n=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof fe){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category="ToolTip",t.hasPlaceholder()&&(t.placeholder.scale=n.scale);const e=t.diagram;null!==e&&e!==n&&e.remove(t),n.add(t),null!==i?t.adornedObject=i:t.data=n.model,t.ensureBounds(),this.positionToolTip(t,i)}else t instanceof et&&t!==this.currentToolTip&&null!==t.show&&t.show(i,n,this);this.currentToolTip=t,-1!==this.Vh&&(e.Tg(this.Vh),this.Vh=-1);const s=this.toolTipDuration;if(s>0&&s!==1/0){const t=this;this.Vh=e.ir((()=>t.hideToolTip()),s)}}positionToolTip(t,e){if(t.hasPlaceholder())return;const i=t,n=this.diagram,s=n.lastInput.documentPoint.copy(),r=i.measuredBounds,o=n.viewportBounds;n.lastInput.isTouchEvent&&(s.x-=r.width),s.x+r.width>o.right&&(s.x-=r.width+5/n.scale),s.x<o.x&&(s.x=o.x),s.y+20/n.scale+r.height>o.bottom?s.y-=r.height+5/n.scale:s.y+=20/n.scale,s.y<o.y&&(s.y=o.y),i.position=s}hideToolTip(){-1!==this.Vh&&(e.Tg(this.Vh),this.Vh=-1);const t=this.diagram,i=this.currentToolTip;null!==i&&(i instanceof fe?(t.remove(i),null!==this.dm&&this.dm.removeAdornment(i.category),i.data=null,i.adornedObject=null):i instanceof et&&null!==i.hide&&i.hide(t,this),this.currentToolTip=null)}get currentToolTip(){return this.cP}set currentToolTip(t){this.cP=t,this.dm=null!==t&&t instanceof fe?t.adornedPart:null}doMouseUp(){this.cancelWaitAfter();const t=this.diagram;if(this.isActive){const e=this.mouseUpTools.length;for(let i=0;i<e;i++){const e=this.mouseUpTools.elt(i);if(e.diagram=this.diagram,e.canStart())return t.doFocus(),t.currentTool=e,void(t.currentTool===e&&(e.isActive||e.doActivate(),e.doMouseUp()))}}t.doFocus(),this.doDeactivate()}doMouseWheel(){this.standardMouseWheel()}doKeyDown(){const t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()}doKeyUp(){const t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()}findTool(t){e.s(t,"string",z,"findTool:name");let i=this.mouseDownTools.length;for(let e=0;e<i;e++){const i=this.mouseDownTools.elt(e);if(i.name===t)return i}i=this.mouseMoveTools.length;for(let e=0;e<i;e++){const i=this.mouseMoveTools.elt(e);if(i.name===t)return i}i=this.mouseUpTools.length;for(let e=0;e<i;e++){const i=this.mouseUpTools.elt(e);if(i.name===t)return i}return null}replaceTool(t,i){e.s(t,"string",z,"replaceTool:name"),null!==i&&(i.diagram=this.diagram);let n=this.mouseDownTools.length;for(let e=0;e<n;e++){const n=this.mouseDownTools.elt(e);if(n.name===t)return null!==i?this.mouseDownTools.setElt(e,i):this.mouseDownTools.removeAt(e),n}n=this.mouseMoveTools.length;for(let e=0;e<n;e++){const n=this.mouseMoveTools.elt(e);if(n.name===t)return null!==i?this.mouseMoveTools.setElt(e,i):this.mouseMoveTools.removeAt(e),n}n=this.mouseUpTools.length;for(let e=0;e<n;e++){const n=this.mouseUpTools.elt(e);if(n.name===t)return null!==i?this.mouseUpTools.setElt(e,i):this.mouseUpTools.removeAt(e),n}return null}replaceStandardTool(t,e,i){this.Jt(t,e,i)}Jt(t,i,n){e.s(t,"string",z,"replaceStandardTool:name"),null!==i&&(i.name=t,i.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,i):null!==i&&n.add(i)}get mouseDownTools(){return this.HC}get mouseMoveTools(){return this.jC}get mouseUpTools(){return this.qC}get hoverDelay(){return this.nP}set hoverDelay(t){e.s(t,"number",z,"hoverDelay"),this.nP=t}get holdDelay(){return this.oP}set holdDelay(t){e.s(t,"number",z,"holdDelay"),this.oP=t}get dragSize(){return this.rP}set dragSize(t){this.rP=t.P()}get toolTipDuration(){return this.lP}set toolTipDuration(t){e.s(t,"number",z,"toolTipDuration"),this.lP=t}get actionTool(){return this.findTool("Action")}set actionTool(t){this.Jt("Action",t,this.mouseDownTools)}get relinkingTool(){return this.findTool("Relinking")}set relinkingTool(t){this.Jt("Relinking",t,this.mouseDownTools)}get linkReshapingTool(){return this.findTool("LinkReshaping")}set linkReshapingTool(t){this.Jt("LinkReshaping",t,this.mouseDownTools)}get resizingTool(){return this.findTool("Resizing")}set resizingTool(t){this.Jt("Resizing",t,this.mouseDownTools)}get rotatingTool(){return this.findTool("Rotating")}set rotatingTool(t){this.Jt("Rotating",t,this.mouseDownTools)}get linkingTool(){return this.findTool("Linking")}set linkingTool(t){this.Jt("Linking",t,this.mouseMoveTools)}get draggingTool(){return this.findTool("Dragging")}set draggingTool(t){this.Jt("Dragging",t,this.mouseMoveTools)}get dragSelectingTool(){return this.findTool("DragSelecting")}set dragSelectingTool(t){this.Jt("DragSelecting",t,this.mouseMoveTools)}get panningTool(){return this.findTool("Panning")}set panningTool(t){this.Jt("Panning",t,this.mouseMoveTools)}get contextMenuTool(){return this.findTool("ContextMenu")}set contextMenuTool(t){this.Jt("ContextMenu",t,this.mouseUpTools)}get textEditingTool(){return this.findTool("TextEditing")}set textEditingTool(t){this.Jt("TextEditing",t,this.mouseUpTools)}get clickCreatingTool(){return this.findTool("ClickCreating")}set clickCreatingTool(t){this.Jt("ClickCreating",t,this.mouseUpTools)}get clickSelectingTool(){return this.findTool("ClickSelecting")}set clickSelectingTool(t){this.Jt("ClickSelecting",t,this.mouseUpTools)}}class H extends I{fP;uP;nn;dP;gP;mP;pP;mc;gm;yP;zh;cr;WC;wP;fu;uu;xP;bP;kP;PP;constructor(t){super(),this.name="Dragging",this.fP=!0,this.PP=!0,this.uP=!0,this.nn=null,this.dP=null,this.gP=null,this.mP=null,this.pP=!1,this.fu=!1,this.mc=new y(NaN,NaN),this.gm=new y,this.yP=!0,this.zh=100,this.cr=[],this.WC=(new u).u(),this.wP=new St,this.uu=null,this.xP="copy",this.bP="",this.kP="no-drop",t&&Object.assign(this,t)}get isCopyEnabled(){return this.fP}set isCopyEnabled(t){e.s(t,"boolean",H,"isCopyEnabled"),this.fP=t}get copiesEffectiveCollection(){return this.uP}set copiesEffectiveCollection(t){e.s(t,"boolean",H,"copiesEffectiveCollection"),this.uP=t}get dragOptions(){return this.wP}set dragOptions(t){this.wP=t}get isGridSnapEnabled(){return this.dragOptions.isGridSnapEnabled}set isGridSnapEnabled(t){e.s(t,"boolean",H,"isGridSnapEnabled"),this.dragOptions.isGridSnapEnabled=t}get isComplexRoutingRealtime(){return this.yP}set isComplexRoutingRealtime(t){this.yP=t;const e=this.diagram.findRouter("AvoidsLinks");null!==e&&(e.isRealtime=t)}get isGridSnapRealtime(){return this.dragOptions.isGridSnapRealtime}set isGridSnapRealtime(t){e.s(t,"boolean",H,"isGridSnapRealtime"),this.dragOptions.isGridSnapRealtime=t}get gridSnapCellSize(){return this.dragOptions.gridSnapCellSize}set gridSnapCellSize(t){this.dragOptions.gridSnapCellSize.equals(t)||(t=t.P(),this.dragOptions.gridSnapCellSize=t)}get gridSnapCellSpot(){return this.dragOptions.gridSnapCellSpot}set gridSnapCellSpot(t){this.dragOptions.gridSnapCellSpot.equals(t)||(t=t.P(),this.dragOptions.gridSnapCellSpot=t)}get gridSnapOrigin(){return this.dragOptions.gridSnapOrigin}set gridSnapOrigin(t){this.dragOptions.gridSnapOrigin.equals(t)||(t=t.P(),this.dragOptions.gridSnapOrigin=t)}get dragsLink(){return this.dragOptions.dragsLink}set dragsLink(t){e.s(t,"boolean",H,"dragsLink"),this.dragOptions.dragsLink=t}get dragsTree(){return this.dragOptions.dragsTree}set dragsTree(t){e.s(t,"boolean",H,"dragsTree"),this.dragOptions.dragsTree=t}get copyCursor(){return this.xP}set copyCursor(t){this.xP=t}get moveCursor(){return this.bP}set moveCursor(t){this.bP=t}get nodropCursor(){return this.kP}set nodropCursor(t){this.kP=t}get currentPart(){return this.dP}set currentPart(t){this.dP=t}get copiedParts(){return this.mP}set copiedParts(t){this.mP=t}get draggedParts(){return this.gP}set draggedParts(t){this.gP=t}get draggingParts(){return null!==this.copiedParts?this.copiedParts.toKeySet():null!==this.draggedParts?this.draggedParts.toKeySet():this.WC}get draggedLink(){return this.diagram.draggedLink}set draggedLink(t){this.diagram.draggedLink=t}get isDragOutStarted(){return this.pP}set isDragOutStarted(t){this.pP=t}get startPoint(){return this.gm}set startPoint(t){this.gm.equals(t)||this.gm.a(t)}get delay(){return this.zh}set delay(t){e.s(t,"number",H,"delay"),this.zh=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(null===t||t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;const e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.zh))&&null!==this.findDraggablePart()}findDraggablePart(){const t=this.diagram;let e=t.findPartAt(t.firstInput.documentPoint,!1);if(null===e)return null;for(;null!==e&&!e.canSelect();)e=e.containingGroup;return null!==e&&(e.canMove()||e.canCopy())?e:null}standardMouseSelect(){const t=this.diagram;if(!t.allowSelect)return;let i=t.findPartAt(t.firstInput.documentPoint,!1);if(null!==i){for(;null!==i&&!i.canSelect();)i=i.containingGroup;if(this.currentPart=i,null!==this.currentPart&&!this.currentPart.isSelected){t.D("ChangingSelection",t.selection);const i=t.lastInput;!(e.tr?i.meta:i.control)&&!i.shift&&t.clearSelection(!0),this.currentPart.isSelected=!0,t.D("ChangedSelection",t.selection)}}}doActivate(){const t=this.diagram;this.uu=null,null===this.currentPart&&this.standardMouseSelect();const e=this.currentPart;if(null===e||!e.canMove()&&!e.canCopy())return;t.cacheGroupExternalLinks(!0),H.dt=null,this.isActive=!0,this.mc.set(t.position),this.SP(t.selection),this.cr.length=0,t.animationManager.stopAnimation();const i=this.computeEffectiveCollection(t.selection,this.dragOptions);this.draggedParts=i,this.PP=!!this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.du=!0,!0===t.getRenderingHint("temporaryPixelRatio")&&t.avgSpf>30&&t.Bw(),t.JC(this.draggedParts),t.gu=!0,this.startTransaction("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&this.pF()}SP(t){if(!this.dragsLink)return;const e=this.diagram,i=e.model.mm(),n=t.first();i&&1===t.count&&n instanceof be&&this.mayDragLink(n)?(this.draggedLink=n,this.draggedLink.canRelinkFrom()&&this.draggedLink.canRelinkTo()&&this.draggedLink.clearAdornments(),this.nn=e.toolManager.findTool("Relinking"),null===this.nn&&(this.nn=new q,this.nn.diagram=e),this.nn.originalLink=this.draggedLink):(this.draggedLink=null,this.nn=null)}mayDragLink(t){const e=this.diagram;return null!==e&&e.allowRelink}computeEffectiveCollection(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)}Es(t){return void 0===t?new wt(y.xo):this.isGridSnapEnabled?new wt(new y(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3)):new wt(t.copy())}doDeactivate(){this.isActive=!1;const t=this.diagram;this.diagram.layout.isRealtime=this.PP,t.gu=!1,t.xl=!0,t.cacheGroupExternalLinks(!1),t.stopAutoScroll(),this.MP(),t.NP(this.draggedParts),this.uu=null,this.currentPart=null,this.draggedParts=null,this.isDragOutStarted=!1,this.fu=!1,H.yF(),this.$C(),this.mc.i(NaN,NaN),null!==H.Xh&&(H.Xh.currentCursor=""),H.Xh=null,H.dt=null,this.bl(),t.isMouseCaptured=!1,t.currentCursor="",t.du=!1,this.stopTransaction(),t.CP(!0)}stopTransaction(){const t=this.diagram,e=super.stopTransaction();return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.optimize(),e}MP(){const t=this.diagram,e=t.skipsUndoManager;t.skipsUndoManager=!0;const i=t.lastInput;this.ZC(i,null),t.skipsUndoManager=e,this.cr.length=0}QC(){this.bl(),this.LP();const t=this.diagram;this.mc.isReal()&&(t.position=this.mc),t.stopAutoScroll()}doCancel(){this.bl(),this.LP();const t=this.diagram;this.mc.isReal()&&(t.position=this.mc),this.stopTool()}doKeyDown(){const t=this.diagram;if(!this.isActive)return;const e=t.lastInput,i=t.previousInput;"Escape"===e.code?this.doCancel():(e.code!==i.code||e.modifiers!==i.modifiers)&&this.doMouseMove()}doKeyUp(){this.isActive&&this.doMouseMove()}wF(t,e){let i=1/0,n=1/0,s=-1/0,r=-1/0;const o=t.iterator;for(;o.next();){const t=o.value;if(!t.isVisible())continue;const e=t.location,a=e.x,l=e.y;isNaN(a)||isNaN(l)||(a<i&&(i=a),l<n&&(n=l),a>s&&(s=a),l>r&&(r=l))}return i===1/0?e.i(0,0,0,0):e.i(i,n,s-i,r-n),e}AP(t){if(null!==this.copiedParts)return;const e=this.diagram;if(t&&(e.isReadOnly||e.isModelReadOnly)||null===this.draggedParts)return;const i=e.undoManager;i.isEnabled&&i.isInTransaction?null!==i.currentTransaction&&i.currentTransaction.changes.count>0&&(e.undoManager.rollbackTransaction(),e.startTransaction("Drag")):this.LP(),e.skipsUndoManager=!t,e.partManager.addsToTemporaryLayer=!t,this.startPoint=e.firstInput.documentPoint;const n=this.copiesEffectiveCollection?this.draggedParts.toKeySet():e.selection,s=e.copyParts(n,e,!0),r=new m,o=this.draggedParts.iterator;for(;o.next();){const t=o.key;if(t.ke()&&t.canCopy()){const e=s.get(t);if(null===e)continue;e.location=t.location,e.ensureBounds(),r.set(e,this.Es(e.location))}}const a=s.iterator;for(;a.next();){const t=a.value;t instanceof be&&t.canCopy()&&r.set(t,this.Es())}if(this.copiedParts=r,this.SP(r.toKeySet()),null!==this.draggedLink){const t=this.draggedLink,e=t.routeBounds;t.fr(this.startPoint.x-(e.x+e.width/2),this.startPoint.y-(e.y+e.height/2))}this.doUpdateCursor(null)}bl(){const t=this.diagram;if(null!==this.copiedParts){if(t.removeParts(this.copiedParts.toKeySet(),!1),this.copiedParts=null,null!==this.draggedParts){const t=this.draggedParts.iterator;for(;t.next();)if(t.key instanceof be){t.value.point=new y(0,0)}}this.doUpdateCursor(null)}t.skipsUndoManager=!1,t.partManager.addsToTemporaryLayer=!1,this.startPoint=t.firstInput.documentPoint}$C(){null!==this.draggedLink&&(this.dragsLink&&null!==this.nn&&(this.nn.stopDraggingMouseMove(),this.nn.originalLink=null),this.draggedLink=null,this.nn=null)}pc(t,e){if(null===t)return;const i=this.diagram,n=this.startPoint,s=y.l();s.a(i.lastInput.documentPoint),this.moveParts(t,s.subtract(n),e),y.e(s),!0===i.getRenderingHint("temporaryPixelRatio")&&null===i.kl&&i.avgSpf>30&&(i.Bw(),i.mu())}moveParts(t,e,i){void 0===i&&(i=!1);const n=this.diagram;null!==n&&n.TP(t,e,this.dragOptions,i)}LP(){if(null===this.draggedParts)return;const t=this.diagram;let e=this.draggedParts.iterator;for(;e.next();){const t=e.key;t.ke()&&(t.location=e.value.point)}for(e=this.draggedParts.iterator;e.next();){const t=e.key;if(t instanceof be&&t.suspendsRouting){const i=e.value.point;this.draggedParts.set(t,this.Es()),t.fr(-i.x,-i.y)}}t.maybeUpdate()}xF(t){if(null===t)return!0;const e=t.part;return!!(null===e||e instanceof fe||e.layer?.isTemporary||this.draggedParts&&this.draggedParts.has(e)||this.copiedParts&&this.copiedParts.has(e))}DP(t){const e=this.diagram;this.dragsLink&&(null!==this.draggedLink&&(this.draggedLink.fromNode=null,this.draggedLink.toNode=null),this._C(!1));const i=this.findDragOverObject(t),n=e.lastInput;n.targetObject=i,this.doUpdateCursor(i);const s=e.skipsUndoManager;let r=!1;try{if(e.skipsUndoManager=!0,r=this.ZC(n,i),!this.isActive&&null===H.dt)return;const s=null!==i?i.part:null;if(null===s||e.handlesDragDropForTopLevelParts&&s.isTopLevel&&!(s instanceof Ae)){const t=e.mouseDragOver;null!==t&&(t(n),r=!0)}if(!this.isActive&&null===H.dt||(this.doDragOver(t,i),!this.isActive&&null===H.dt))return}finally{e.skipsUndoManager=s,r&&e.maybeUpdate()}this.uu=i,!e.isReadOnly&&(e.allowMove||e.allowCopy)&&(e.allowHorizontalScroll||e.allowVerticalScroll)&&e.doAutoScroll(n.viewPoint)}findDragOverObject(t){return this.diagram.FP(t,null,(t=>!this.xF(t)))}doUpdateCursor(t){const e=this.diagram;(null===t||this.uu!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?e.currentCursor=this.copyCursor:this.mayMove()?e.currentCursor=this.moveCursor:this.mayDragOut()&&(e.currentCursor=this.nodropCursor))}ZC(t,e){let i=!1,n=this.cr.length;const s=n>0?this.cr[0]:null;if(e===s)return!1;t.handled=!1;for(let s=0;s<n;s++){const n=this.cr[s],r=n.mouseDragLeave;if(null!==r&&(r(t,n,e),i=!0,t.handled))break}if(this.cr.length=0,!this.isActive&&null===H.dt||null===e)return i;t.handled=!1;let r=e;for(;null!==r;)this.cr.push(r),r=this.tL(r);n=this.cr.length;for(let e=0;e<n;e++){const n=this.cr[e],r=n.mouseDragEnter;if(null!==r&&(r(t,n,s),i=!0,t.handled))break}return i}ME(t,e){return null!==t&&!!(t===e||t.isContainedBy(e)||e instanceof Ae&&!(t instanceof Ae)&&e.handlesDragDropForMembers&&t.part?.isMemberOf(e))}tL(t){const e=t.panel;if(null!==e)return e;if(t instanceof ce&&!(t instanceof Ae)){const e=t.containingGroup;if(null!==e&&e.handlesDragDropForMembers)return e}return null}iL(t,e){const i=this.diagram,n=this.nn;if(null===n)return null;const s=n.portGravity,r=i.findObjectsNear(t,s,(t=>n.findValidLinkablePort(t,e))),o=y.l();let a=1/0,l=null;for(const e=r.iterator;e.next();){const i=e.value;if(null===i.part)continue;const n=i.getDocumentPoint(w.Center,o),s=t.distanceSquaredPoint(n);s<a&&(l=i,a=s)}return y.e(o),l}_C(t){const e=this.draggedLink;if(null!==e){if(e.pointsCount<2)return;const i=this.diagram;if(i.isReadOnly)return;const n=this.nn;if(null===n)return;let s=null,r=null;null===e.fromNode&&(s=this.iL(e.getPoint(0),!1),null!==s&&(r=s.part));let o=null,a=null;null===e.toNode&&(o=this.iL(e.getPoint(e.pointsCount-1),!0),null!==o&&(a=o.part)),n.isValidLink(r,s,a,o)?t?(e.defaultFromPoint=e.getPoint(0),e.defaultToPoint=e.getPoint(e.pointsCount-1),e.suspendsRouting=!1,e.fromNode=r,null!==s&&(e.fromPortId=s.portId),e.toNode=a,null!==o&&(e.toPortId=o.portId),e.fromPort!==i.RP&&i.D("LinkRelinked",e,i.RP),e.toPort!==i.vP&&i.D("LinkRelinked",e,i.vP)):n.doDraggingMouseMove(r,s,a,o):n.doDraggingMouseMove(null,null,null,null)}}doDragOver(t,e){}eL(t){const e=this.diagram;this.dragsLink&&this._C(!0),this.MP();const i=this.findDragOverObject(t),n=e.lastInput;if(n.targetObject=i,null!==i){n.handled=!1;let t=i;for(;null!==t;){const e=t.mouseDrop;if(null!==e&&(e(n,t),n.handled))break;this.bF(n,t),t=this.tL(t)}}else{const t=e.mouseDrop;null!==t&&t(n)}if(!this.isActive&&null===H.dt)return;const s=this.copiedParts||this.draggedParts;if(null!==s){const t=s.iterator;for(;t.next();){const e=t.key;e instanceof ge&&e.linksConnected.each((t=>t.suspendsRouting=!1))}}if(this.doDropOnto(t,i),!this.isActive&&null===H.dt)return;const r=x.l(),o=e.selection.iterator;for(;o.next();){const t=o.value;t instanceof ge&&this.kF(e,t,r)}x.e(r)}bF(t,e){const i=this.diagram,n=e.part;if(i.handlesDragDropForTopLevelParts&&null!==n&&n.isTopLevel&&!(n instanceof Ae)){const e=i.mouseDrop;null!==e&&e(t)}}kF(t,e,i){if(!e.canAvoid())return;let n=!1;i=e.getAvoidableRect(i),t.viewportBounds.containsRect(i)&&(n=!0);const s=this.copiedParts||this.draggedParts;if(null===s)return;const r=t.OP(i,(t=>t.part),(t=>t instanceof be),!0,(t=>t instanceof be),n);if(0===r.count)return;const o=r.iterator;for(;o.next();){const t=o.value;s.has(t)&&s.has(e)||!t.isMemberOf(e)&&t.isAvoiding&&t.invalidateRoute()}}doDropOnto(t,e){}doMouseMove(){if(!this.isActive)return;const t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||null!==this.currentPart&&null!==this.draggedParts&&(this.mayCopy()?(this.AP(!1),this.pc(this.copiedParts,!1)):this.mayMove()?(this.bl(),this.pc(this.draggedParts,!0)):this.mayDragOut()?(this.AP(!1),this.pc(this.copiedParts,!1)):this.bl(),this.DP(t.lastInput.documentPoint))}doMouseUp(){if(!this.isActive)return;const t=this.diagram,e=t.lastInput;if(this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram))return;let i=!1;const n=this.mayCopy();if(n&&null!==this.copiedParts?(this.bl(),this.AP(!0),this.pc(this.copiedParts,!1),null!==this.copiedParts&&(t.D("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each((t=>{t.isSelected=!0})))):(i=!0,this.bl(),this.mayMove()&&(this.pc(this.draggedParts,!0),this.DP(t.lastInput.documentPoint))),this.fu=!0,this.eL(t.lastInput.documentPoint),this.isActive){const e=n&&this.copiedParts,s=e?this.copiedParts?.toKeySet():this.draggedParts?this.draggedParts.toKeySet():null;this.copiedParts=null,i&&this.PF(),t.invalidateDocumentBounds(),t.NP(this.draggedParts),this.transactionResult=e?"Copy":"Move",t.D(e?"SelectionCopied":"SelectionMoved",s)}this.stopTool(),n&&t.D("ChangedSelection",t.selection)}simulatedMouseMove(t,e,i){if(null===H.dt)return!1;const n=H.dt.diagram;i instanceof xt||(i=null);const s=H.Xh;if(i!==s){if(null!==s&&s!==n){s.stopAutoScroll(),H.dt.isDragOutStarted=!1;const t=s.toolManager.findTool("Dragging");null!==t&&t.doSimulatedDragLeave()}if(H.Xh=i,null!==i&&i!==n){H.dt.QC();const t=i.toolManager.findTool("Dragging");null!==t&&(t.sL(),t.doSimulatedDragEnter())}this.doUpdateCursor(null)}if(null===i||i===n||!i.allowDrop||i.isReadOnly||!i.allowInsert)return!1;const r=i.toolManager.findTool("Dragging");if(null!==r){let n=e;null!==t&&(void 0!==t.targetTouches&&(t.targetTouches.length>0?t=t.targetTouches[0]:t.changedTouches.length>0&&(t=t.changedTouches[0])),n=i.getMouse(t)),i.lastInput.documentPoint=n,i.lastInput.viewPoint=i.transformDocToView(n),i.lastInput.down=!1,i.lastInput.up=!1,r.doSimulatedDragOver()}return!0}simulatedMouseUp(t,e,i){if(null===H.dt)return!1;const n=H.Xh,s=H.dt.diagram;if(null===i)return H.dt.doCancel(),!0;if(i!==n){if(null!==n){const t=n.toolManager.findTool("Dragging");if(null!==n&&n!==s&&null!==t)return n.stopAutoScroll(),H.dt.isDragOutStarted=!1,t.doSimulatedDragLeave(),!1}H.Xh=i;const t=i.toolManager.findTool("Dragging");null!==t&&(H.dt.QC(),t.sL(),t.doSimulatedDragEnter())}if(i!==this.diagram){let n=e;null!==t?(void 0!==t.targetTouches&&(t.targetTouches.length>0?t=t.targetTouches[0]:t.changedTouches.length>0&&(t=t.changedTouches[0])),n=i.getMouse(t)):null===n&&(n=new y),i.lastInput.documentPoint=n,i.lastInput.viewPoint=i.transformDocToView(n),i.lastInput.down=!1,i.lastInput.up=!0;const s=i.toolManager.findTool("Dragging");null!==s&&s.doSimulatedDrop();const r=H.dt;if(null!==r){const t=r.mayCopy();r.transactionResult=t?"Copy":"Move",r.stopTool()}return!0}return!1}PF(){if(null===this.draggedParts)return;const t=this.draggedParts.iterator;for(;t.next();){const e=t.key;if(e instanceof ge){const t=e.containingGroup;null!==t&&t.hasPlaceholder()&&!this.draggedParts.has(t)&&t.placeholder.c()}}}mayCopy(){if(!this.isCopyEnabled)return!1;const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||!(e.tr?t.lastInput.alt:t.lastInput.control))return!1;const i=t.selection.iterator;for(;i.next();)if(i.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())}mayDragOut(){if(!this.isCopyEnabled)return!1;const t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;const e=t.selection.iterator;for(;e.next();)if(e.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())}mayMove(){const t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;const e=t.selection.iterator;for(;e.next();)if(e.value.canMove())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())}sL(){H.Vw.has(this)||H.Vw.add(this)}static yF(){if(H.Vw.count>0){const t=H.Vw,e=t.length;for(let i=0;i<e;i++){const e=t.elt(i);e.$C(),e.bl(),e.MP(),e.diagram.stopAutoScroll()}t.clear()}}computeBorder(t,e,i){return this.fu||null===this.draggedParts||this.draggedParts.has(t)?null:i.a(e)}getDraggingSource(){return H.dt}mayDragIn(){const t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;const e=H.dt;return!(null===e||e.diagram.model.dataFormat!==t.model.dataFormat)}doSimulatedDragEnter(){if(!this.mayDragIn())return;const t=this.diagram;t.animationManager.stopAnimation(),t.ur(),t.animationManager.stopAnimation();const e=H.dt;null!==e&&(this.diagram.du=!0,null===t.lastInput.event&&(t.lastInput.event=e.diagram.lastInput.event)),this.doUpdateCursor(null)}doSimulatedDragLeave(){const t=H.dt;null!==t&&t.doSimulatedDragOut(),this.diagram.du=!1,this.doCancel()}doSimulatedDragOver(){const t=this.diagram;t.animationManager.pu=!0;const e=H.dt;if(null!==e&&null!==e.draggedParts){if(!this.mayDragIn())return;this.nL(e.draggedParts.toKeySet(),!1,t.firstInput),this.pc(this.copiedParts,!1),this.DP(t.lastInput.documentPoint)}t.animationManager.pu=!1}doSimulatedDrop(){const t=this.diagram,e=H.dt;if(null!==e){const i=e.diagram;if(e.fu=!0,this.bl(),null===e.draggedParts||!this.mayDragIn())return;t.animationManager.pu=!0,t.D("ChangingSelection",t.selection),this.startTransaction("Drop"),this.nL(e.draggedParts.toKeySet(),!0,t.lastInput),this.pc(this.copiedParts,!1);const n=new u;null!==this.copiedParts&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each((t=>{t.isSelected=!0,n.add(t)}))),this.eL(t.lastInput.documentPoint),t.invalidateDocumentBounds(),null!==this.copiedParts&&(this.transactionResult="ExternalCopy"),this.copiedParts=null,t.doFocus(),t.du=!1,t.D("ExternalObjectsDropped",n,i),this.stopTransaction(),t.D("ChangedSelection",t.selection)}t.animationManager.pu=!1}nL(t,e,i){if(null!==this.copiedParts)return;const n=this.diagram;if(n.isReadOnly||n.isModelReadOnly)return;n.skipsUndoManager=!e,n.partManager.addsToTemporaryLayer=!e,this.startPoint=i.documentPoint;const s=n.copyParts(t,n,!0),r=x.l();this.wF(t,r);const o=r.x+r.width/2,a=r.y+r.height/2;x.e(r);const l=this.gm,h=new m,u=y.l(),c=t.iterator;for(;c.next();){const t=c.value;if(t instanceof be&&t.canCopy()){const e=s.get(t);if(null===e)continue;e.points=t.points,e.fr(l.x-o,l.y-a),e.suspendsRouting=!0,h.set(e,this.Es())}}const d=t.iterator;for(;d.next();){const t=d.value;if(t.ke()&&t.canCopy()){const e=s.get(t);if(null===e)continue;const i=t.location;u.i(l.x-(o-i.x),l.y-(a-i.y)),e.location=u,e.ensureBounds(),h.set(e,this.Es(u))}}if(y.e(u),this.copiedParts=h,this.SP(h.toKeySet()),null!==this.draggedLink){const t=this.draggedLink,e=t.routeBounds;t.fr(this.startPoint.x-(e.x+e.width/2),this.startPoint.y-(e.y+e.height/2))}this.doUpdateCursor(null)}pF(){this.isDragOutStarted=!0,this.fu=!1,H.dt=this,H.Xh=this.diagram,this.doSimulatedDragOut()}doSimulatedDragOut(){const t=this.diagram;this.mayCopy()||this.mayMove()?t.currentCursor="":t.currentCursor=this.nodropCursor,this.uu=null}computeMove(t,e,i,n){const s=this.diagram;return null!==s?s.computeMove(t,e,this.dragOptions,n):new y}static Vw=new l;static dt=null;static Xh=null}z.prototype.doCancel=function(){null!==H.dt&&H.dt.doCancel(),I.prototype.doCancel.call(this)};class U extends I{IP;EP;Pl;UP;BP;Yh;VP;Kh;zP;XP;YP;KP;GP;HP;oL;jP;Sl;qP;constructor(){super(),this.IP=100,this.EP=!1,this.Pl="pointer",this.UP=new be({layerName:"Tool"}).add(new Jt({isPanelMain:!0,stroke:"blue"}).theme("stroke","tempLink"),new Jt({toArrow:"Standard",fill:"blue",stroke:"blue"}).theme("fill","tempLink").theme("stroke","tempLink")).Et(),this.Yh=new Jt("Rectangle",{portId:"",fill:null,stroke:"magenta",strokeWidth:2,desiredSize:v.Uk}).theme("stroke","tempPort"),this.BP=new ge({selectable:!1,layerName:"Tool"}).add(this.Yh).Et(),this.Kh=new Jt("Rectangle",{portId:"",fill:null,stroke:"magenta",strokeWidth:2,desiredSize:v.Uk}).theme("stroke","tempPort"),this.VP=new ge({selectable:!1,layerName:"Tool"}).add(this.Kh).Et(),this.zP=null,this.XP=null,this.YP=null,this.KP=null,this.GP=null,this.HP=!0,this.oL=new m,this.jP=null,this.Sl=null,this.qP=null}doStop(){this.diagram.stopAutoScroll(),this.originalLink=null,this.originalFromNode=null,this.originalFromPort=null,this.originalToNode=null,this.originalToPort=null,this.validPortsCache.clear(),this.targetPort=null}get portGravity(){return this.IP}set portGravity(t){e.s(t,"number",U,"portGravity"),t>=0&&(this.IP=t)}get isUnconnectedLinkValid(){return this.EP}set isUnconnectedLinkValid(t){e.s(t,"boolean",U,"isUnconnectedLinkValid"),this.EP=t}get linkingCursor(){return this.Pl}set linkingCursor(t){this.Pl=t}get temporaryLink(){return this.UP}set temporaryLink(t){t.Et(),this.UP=t}get temporaryFromNode(){return this.BP}set temporaryFromNode(t){t.Et(),this.BP=t,t&&(this.Yh=t.port)}get temporaryFromPort(){return this.Yh}set temporaryFromPort(t){if(null!==this.Yh){const e=this.Yh.panel;if(null!==e){const i=e.C.indexOf(this.Yh);e.removeAt(i),e.insertAt(i,t)}}this.Yh=t}get temporaryToNode(){return this.VP}set temporaryToNode(t){t.Et(),this.VP=t,t&&(this.Kh=t.port)}get temporaryToPort(){return this.Kh}set temporaryToPort(t){if(null!==this.Kh){const e=this.Kh.panel;if(null!==e){const i=e.C.indexOf(this.Kh);e.removeAt(i),e.insertAt(i,t)}}this.Kh=t}get originalLink(){return this.zP}set originalLink(t){this.zP=t}get originalFromNode(){return this.XP}set originalFromNode(t){this.XP=t}get originalFromPort(){return this.YP}set originalFromPort(t){this.YP=t}get originalToNode(){return this.KP}set originalToNode(t){this.KP=t}get originalToPort(){return this.GP}set originalToPort(t){this.GP=t}get isForwards(){return this.HP}set isForwards(t){this.HP=t}get validPortsCache(){return this.oL}get targetPort(){return this.jP}set targetPort(t){this.jP=t}copyPortProperties(t,e,i,n,s){if(null===t||null===e||null===i||null===n)return;const r=e.getDocumentScale(),o=v.l();o.width=e.naturalBounds.width*r,o.height=e.naturalBounds.height*r,n.desiredSize=o,v.e(o),s?(n.toSpot=e.toSpot,n.toEndSegmentLength=e.toEndSegmentLength):(n.fromSpot=e.fromSpot,n.fromEndSegmentLength=e.fromEndSegmentLength),i.locationSpot=w.Center;const a=y.l();i.location=e.getDocumentPoint(w.Center,a),y.e(a),n.angle=e.getDocumentAngle(),null!==this.portTargeted&&this.portTargeted(t,e,i,n,s)}setNoTargetPortProperties(t,e,i){null!==e&&(e.desiredSize=v.Uk,e.fromSpot=w.None,e.toSpot=w.None),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,i)}doMouseDown(){this.isActive&&this.doMouseMove()}doMouseMove(){if(this.isActive){const t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof ge){const t=this.targetPort.part;this.isForwards?this.copyPortProperties(t,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(t,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.doAutoScroll(t.lastInput.viewPoint)}}findValidLinkablePort(t,e){if(null===t)return null;const i=t.part;if(!(i instanceof ge))return null;for(;null!==t;){const n=e?t.toLinkable:t.fromLinkable;if(!0===n&&(null!==t.portId||t instanceof ge)&&(e?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(!1===n)return null;t=t.panel}return null}findTargetPort(t){const e=this.diagram,i=e.lastInput.documentPoint;let n=this.portGravity;let s=1/0,r=null;const o=e.findObjectsNear(i,n,(e=>this.findValidLinkablePort(e,t)),null,!0).iterator;for(;o.next();){const e=o.value,n=e.part;if(!(n instanceof ge))continue;const a=e.getDocumentPoint(w.Center,y.l()),l=i.x-a.x,h=i.y-a.y;y.e(a);const u=l*l+h*h;if(u<s){const i=this.validPortsCache.get(e);null!==i?i&&(r=e,s=u):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,n,e)||!t&&this.isValidLink(n,e,this.originalToNode,this.originalToPort)?(this.validPortsCache.set(e,!0),r=e,s=u):this.validPortsCache.set(e,!1)}}if(null!==r){const t=r.part;if(t instanceof ge&&(null===t.layer||t.layer.allowLink))return r}return null}isValidFrom(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;const i=e.fromMaxLinks;if(i<1/0){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;let n=e.portId;if(null===n&&(n=""),t.findLinksOutOf(n).count>=i)return!1}return!0}isValidTo(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;const i=e.toMaxLinks;if(i<1/0){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;let n=e.portId;if(null===n&&(n=""),t.findLinksInto(n).count>=i)return!1}return!0}isInSameNode(t,e){if(null===t||null===e)return!1;if(t===e)return!0;const i=t.part,n=e.part;return null!==i&&i===n}isLinked(t,e){if(null===t||null===e)return!1;const i=t.part;if(!(i instanceof ge))return!1;let n=t.portId;null===n&&(n="");const s=e.part;if(!(s instanceof ge))return!1;let r=e.portId;null===r&&(r="");const o=s.findLinksInto(r);for(;o.next();){const t=o.value;if(t.fromNode===i&&t.fromPortId===n)return!0}return!1}isValidLink(t,e,i,n){if(!this.isValidFrom(t,e)||!this.isValidTo(i,n)||null!==e&&null!==n&&((!e.fromLinkableSelfNode||!n.toLinkableSelfNode)&&this.isInSameNode(e,n)||(!e.fromLinkableDuplicates||!n.toLinkableDuplicates)&&this.isLinked(e,n))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==i&&this.isLabelDependentOnLink(i,this.originalLink))||null!==t&&null!==i&&(null===t.data&&null!==i.data||null!==t.data&&null===i.data)||!this.isValidCycle(t,i,this.originalLink))return!1;let s;return!(null!==t&&null!==e&&(s=t.linkValidation,null!==s&&!s(t,e,i,n,this.originalLink))||null!==i&&null!==n&&(s=i.linkValidation,null!==s&&!s(t,e,i,n,this.originalLink)))&&(s=this.linkValidation,null===s||s(t,e,i,n,this.originalLink))}isLabelDependentOnLink(t,e){if(null===t)return!1;const i=t.labeledLink;if(null===i)return!1;if(i===e)return!0;const n=new u;return n.add(t),this.WP(i,e,n)}WP(t,e,i){if(t===e)return!0;const n=t.fromNode;if(null!==n&&n.labeledLink&&(i.add(n),this.WP(n.labeledLink,e,i)))return!0;const s=t.toNode;return!(null===s||!s.labeledLink||(i.add(s),!this.WP(s.labeledLink,e,i)))}isValidCycle(t,e,i){if(void 0===i&&(i=null),null===t||null===e)return this.isUnconnectedLinkValid;const n=this.diagram;let s=1;if(n&&(s=n.model.pm()?n.isTreePathToChildren?5:6:n.validCycle),1===s)return!0;if(5===s){const n=i||this.temporaryLink;if(null!==n&&!n.isTreeLink)return!0;const s=e.linksConnected;for(;s.next();){const t=s.value;if(t!==i&&t.isTreeLink&&t.toNode===e)return!1}return!this.yu(t,e,i,!0)}if(6===s){const n=i||this.temporaryLink;if(null!==n&&!n.isTreeLink)return!0;const s=t.linksConnected;for(;s.next();){const e=s.value;if(e!==i&&e.isTreeLink&&e.fromNode===t)return!1}return!this.yu(t,e,i,!0)}return 2===s?!this.SF(t,e,i):3===s?!this.yu(t,e,i,!1):4!==s||!this.MF(t,e,i)}yu(t,e,i,n){if(t===e)return!0;if(null===t||null===e)return!1;const s=t.linksConnected;for(;s.next();){const r=s.value;if(r===i||n&&!r.isTreeLink||r.toNode!==t)continue;const o=r.fromNode;if(o!==t&&null!==o&&this.yu(o,e,i,n))return!0}return!1}SF(t,e,i){if(t===e)return!0;const n=new u;return n.add(e),this.rL(n,t,e,i)}rL(t,e,i,n){if(e===i)return!0;if(null===e||null===i||t.has(e))return!1;t.add(e);const s=e.linksConnected;for(;s.next();){const r=s.value;if(r===n||r.toNode!==e)continue;const o=r.fromNode;if(o!==e&&null!==o&&this.rL(t,o,i,n))return!0}return!1}MF(t,e,i){if(t===e)return!0;const n=new u;return n.add(e),this.lL(n,t,e,i)}lL(t,e,i,n){if(e===i)return!0;if(null===e||null===i||t.has(e))return!1;t.add(e);const s=e.linksConnected;for(;s.next();){const r=s.value;if(r===n)continue;const o=r.fromNode,a=r.toNode,l=o===e?a:o;if(l!==e&&null!==l&&this.lL(t,l,i,n))return!0}return!1}get linkValidation(){return this.Sl}set linkValidation(t){null!==t&&e.k(t,U,"linkValidation"),this.Sl=t}get portTargeted(){return this.qP}set portTargeted(t){null!==t&&e.k(t,U,"portTargeted"),this.qP=t}}var V=(t=>(t[t.Either=1]="Either",t[t.ForwardsOnly=2]="ForwardsOnly",t[t.BackwardsOnly=3]="BackwardsOnly",t))(V||{});class Y extends U{JP;$P;b;ZP;constructor(t){super(),this.name="Linking",this.JP={},this.$P=null,this.b=1,this.ZP=null,t&&Object.assign(this,t)}static Either=1;static ForwardsOnly=2;static BackwardsOnly=3;get archetypeLinkData(){return this.JP}set archetypeLinkData(t){null!==t&&e.ec(t,Y,"archetypeLinkData"),this.JP=t}get archetypeLabelNodeData(){return this.$P}set archetypeLabelNodeData(t){null!==t&&e.ec(t,Y,"archetypeLabelNodeData"),this.$P=t}get direction(){return this.b}set direction(t){this.b=t}get startObject(){return this.ZP}set startObject(t){this.ZP=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.zw()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()}findLinkablePort(){const t=this.diagram;let e=this.startObject;if(null===e&&(e=t.findObjectAt(t.firstInput.documentPoint,null,null)),null===e)return null;const i=e.part;if(!(i instanceof ge))return null;const n=this.direction;if(1===n||2===n){const t=this.findValidLinkablePort(e,!1);if(null!==t)return this.isForwards=!0,t;if(this.startObject===i){const t=i.port;if(this.findValidLinkablePort(t,!1))return this.isForwards=!0,t}}if(1===n||3===n){const t=this.findValidLinkablePort(e,!0);if(null!==t)return this.isForwards=!1,t;if(this.startObject===i){const t=i.port;if(this.findValidLinkablePort(t,!0))return this.isForwards=!1,t}}return null}doActivate(){const t=this.diagram,e=this.findLinkablePort();if(null!==e){if(this.startTransaction(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards){null!==this.temporaryToNode&&(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e;const i=this.originalFromPort.part;i instanceof ge&&(this.originalFromNode=i),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else{null!==this.temporaryFromNode&&(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e;const i=this.originalToPort.part;i instanceof ge&&(this.originalToNode=i),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)}t.add(this.temporaryFromNode),this.temporaryFromNode&&this.temporaryFromNode.ensureBounds(),t.add(this.temporaryToNode),this.temporaryToNode&&this.temporaryToNode.ensureBounds(),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.invalidateRoute(),t.add(this.temporaryLink)),this.isActive=!0}else this.stopTool()}doDeactivate(){this.isActive=!1;const t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()}doStop(){super.doStop(),this.startObject=null}doMouseUp(){if(this.isActive){const t=this.diagram;this.transactionResult=null;let e=null,i=null,n=null,s=null,r=null;try{this.targetPort=this.findTargetPort(this.isForwards);const o=this.targetPort;if(null!==o){const t=o.part;t instanceof ge&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,i=this.originalFromPort),n=t,s=o):(e=t,i=o,null!==this.originalToNode&&(n=this.originalToNode,s=this.originalToPort)))}else this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,i=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(n=this.originalToNode,s=this.originalToPort);null!==e||null!==n?(r=this.insertLink(e,i,n,s),null!==r?(null===o&&(this.isForwards?r.defaultToPoint=t.lastInput.documentPoint:r.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.D("ChangingSelection",t.selection),t.clearSelection(!0),r.isSelected=!0),this.transactionResult=this.name,t.D("LinkDrawn",r)):this.doNoLink(e,i,n,s)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),r&&t.allowSelect&&t.D("ChangedSelection",t.selection)}}}isNewTreeLink(){const t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof be)return t.isTreeLink;const e=this.diagram;if(null===e)return!0;const i=e.partManager.getLinkCategoryForData(t),n=e.partManager.findLinkTemplateForCategory(i);return null===n||n.isTreeLink}insertLink(t,e,i,n){return this.diagram.partManager.insertLink(t,e,i,n)}doNoLink(t,e,i,n){}}class q extends U{hL=null;aL=null;QP=null;_P=null;fs;tS;constructor(t){super(),this.name="Relinking",this.fromHandleArchetype=new Jt("Diamond",{desiredSize:v.nu,fill:"lightblue",stroke:"dodgerblue",cursor:this.linkingCursor,segmentIndex:0}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.toHandleArchetype=new Jt("Diamond",{desiredSize:v.nu,fill:"lightblue",stroke:"dodgerblue",cursor:this.linkingCursor,segmentIndex:-1}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.fs=null,this.tS=new x,t&&Object.assign(this,t)}updateAdornments(t){if(null===t||!(t instanceof be))return;let e="RelinkFrom",i=null;if(t.isSelected&&!this.diagram.isReadOnly){const n=t.selectionObject;null!==n&&t.canRelinkFrom()&&t.actualBounds.isReal()&&t.isVisible()&&n.actualBounds.isReal()&&n.isVisibleObject()&&(i=t.findAdornment(e),null===i&&(i=this.makeAdornment(n,!1),t.addAdornment(e,i)))}if(null===i&&t.removeAdornment(e),e="RelinkTo",i=null,t.isSelected&&!this.diagram.isReadOnly){const n=t.selectionObject;null!==n&&t.canRelinkTo()&&t.actualBounds.isReal()&&t.isVisible()&&n.actualBounds.isReal()&&n.isVisibleObject()&&(i=t.findAdornment(e),null===i?(i=this.makeAdornment(n,!0),t.addAdornment(e,i)):i.c())}null===i&&t.removeAdornment(e)}makeAdornment(t,e){let i=e?this._P:this.QP;return i&&(i=i.copy(),i.adornedObject=t),i}get fromHandleArchetype(){return this.hL}set fromHandleArchetype(t){this.hL=t,this.QP=null!==t?new fe(qt.Link).add(t).Et():null}get toHandleArchetype(){return this.aL}set toHandleArchetype(t){this.aL=t,this._P=null!==t?new fe(qt.Link).add(t).Et():null}get handle(){return this.fs}set handle(t){null!==t&&(t.part instanceof fe||e.o("new handle is not in an Adornment: "+t)),this.fs=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.zw()||!t.lastInput.left)return!1;let e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null!==e}doActivate(){const t=this.diagram;if(null===this.originalLink){let e=this.handle;if(null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"),null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),null===e)return;const i=e.part;if(!(i instanceof fe&&i.adornedPart instanceof be))return;this.handle=e,this.isForwards=null===i||"RelinkTo"===i.category,this.originalLink=i.adornedPart}const e=this.originalLink;null!==e&&(this.startTransaction(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=e.fromPort,this.originalFromNode=e.fromNode,this.originalToPort=e.toPort,this.originalToNode=e.toNode,this.tS.set(e.actualBounds),e.pointsCount>0&&(null===e.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=v.sc),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=e.getPoint(0))),null===e.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=v.sc),null!==this.temporaryToNode&&(this.temporaryToNode.location=e.getPoint(e.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(e,this.temporaryLink),this.temporaryLink.invalidateRoute(),t.add(this.temporaryLink)),this.isActive=!0)}copyLinkProperties(t,e){if(null===t||null===e)return;e.adjusting=t.adjusting,e.corner=t.corner;let i=t.curve;(11===i||10===i)&&(i=0),e.curve=i,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}doDeactivate(){this.isActive=!1;const t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()}doStop(){super.doStop(),this.handle=null}doMouseUp(){if(this.isActive){const t=this.diagram;this.transactionResult=null;let e=this.originalFromNode,i=this.originalFromPort,n=this.originalToNode,s=this.originalToPort,r=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort){const t=this.targetPort.part;t instanceof ge&&(this.isForwards?(n=t,s=this.targetPort):(e=t,i=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?(n=null,s=null):(e=null,i=null):r=null;null!==r?(this.reconnectLink(r,this.isForwards?n:e,this.isForwards?s:i,this.isForwards),null===this.targetPort&&(this.isForwards?r.defaultToPoint=t.lastInput.documentPoint:r.defaultFromPoint=t.lastInput.documentPoint,r.invalidateRoute()),this.transactionResult=this.name,t.D("LinkRelinked",r,this.isForwards?this.originalToPort:this.originalFromPort)):null!==this.originalLink&&this.doNoRelink(this.originalLink,this.isForwards),null!==this.originalLink&&this.originalLink.invalidateOtherJumpOvers(this.tS)}finally{this.stopTool()}}}reconnectLink(t,e,i,n){const s=null!==i&&null!==i.portId?i.portId:"";return n?(t.toNode=e,t.toPortId=s):(t.fromNode=e,t.fromPortId=s),!0}doNoRelink(t,e){}doDraggingMouseMove(t,e,i,n){null!==t?(this.copyPortProperties(t,e,this.temporaryFromNode,this.temporaryFromPort,!1),this.diagram.add(this.temporaryFromNode)):this.diagram.remove(this.temporaryFromNode),null!==i?(this.copyPortProperties(i,n,this.temporaryToNode,this.temporaryToPort,!0),this.diagram.add(this.temporaryToNode)):this.diagram.remove(this.temporaryToNode)}stopDraggingMouseMove(){this.diagram.remove(this.temporaryFromNode),this.diagram.remove(this.temporaryToNode)}}var $=(t=>(t[t.None=0]="None",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical",t[t.All=3]="All",t))($||{});class W extends I{dr;iS;eS;fs;Xw;sS;ym;constructor(t){super(),this.name="LinkReshaping",this.dr=new Jt("Rectangle",{desiredSize:v.wC,fill:"lightblue",stroke:"dodgerblue"}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.iS=new Jt("Diamond",{desiredSize:v.nu,fill:"lightblue",stroke:"dodgerblue",cursor:"move"}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.eS=3,this.fs=null,this.Xw=null,this.sS=new y,this.ym=new l,t&&Object.assign(this,t)}static None=0;static Horizontal=1;static Vertical=2;static All=3;getReshapingBehavior(t){return t?t.gr:0}setReshapingBehavior(t,e){t.gr=e}updateAdornments(t){if(null===t||!(t instanceof be))return;let e=null;if(t.isSelected&&!this.diagram.isReadOnly){const i=t.path;null!==i&&t.canReshape()&&t.actualBounds.isReal()&&t.isVisible()&&i.actualBounds.isReal()&&i.isVisibleObject()&&(e=t.findAdornment(this.name),(null===e||e.nS!==t.pointsCount||e.oS!==t.resegmentable)&&(e=this.makeAdornment(i),null!==e&&(e.nS=t.pointsCount,e.oS=t.resegmentable,t.addAdornment(this.name,e))))}null===e&&t.removeAdornment(this.name)}makeAdornment(t){const e=t.part,i=e.points,n=e.pointsCount,s=e.isOrthogonal;let r=null;if(null!==i&&n>1){r=new fe,r.type=qt.Link;const i=e.firstPickIndex,n=e.lastPickIndex,o=s?1:0;if(e.resegmentable&&9!==e.computeCurve())for(let e=i+o;e<n-o;e++){const i=this.makeResegmentHandle(t,e);null!==i&&(i.segmentIndex=e,i.segmentFraction=.5,i.fromMaxLinks=999,r.add(i))}for(let o=i+1;o<n;o++){const a=this.makeHandle(t,o);if(null!==a){if(a.segmentIndex=o,o!==i)if(o===i+1&&s){const t=e.getPoint(i);let n=e.getPoint(i+1);S.f(t.x,n.x)&&S.f(t.y,n.y)?(n=e.getPoint(i-1),S.f(t.x,n.x)?(this.setReshapingBehavior(a,2),a.cursor="n-resize"):S.f(t.y,n.y)&&(this.setReshapingBehavior(a,1),a.cursor="w-resize")):S.f(t.x,n.x)?(this.setReshapingBehavior(a,2),a.cursor="n-resize"):S.f(t.y,n.y)&&(this.setReshapingBehavior(a,1),a.cursor="w-resize")}else if(o===n-1&&s){let t=e.getPoint(n-1);const i=e.getPoint(n);S.f(t.x,i.x)&&S.f(t.y,i.y)?(t=e.getPoint(n+1),S.f(t.x,i.x)?(this.setReshapingBehavior(a,2),a.cursor="n-resize"):S.f(t.y,i.y)&&(this.setReshapingBehavior(a,1),a.cursor="w-resize")):S.f(t.x,i.x)?(this.setReshapingBehavior(a,2),a.cursor="n-resize"):S.f(t.y,i.y)&&(this.setReshapingBehavior(a,1),a.cursor="w-resize")}else o===n||(this.setReshapingBehavior(a,3),a.cursor="move");r.add(a)}}r.adornedObject=t}return r}makeHandle(t,e){const i=this.handleArchetype;return null===i?null:i.copy().rS()}get handleArchetype(){return this.dr}set handleArchetype(t){this.dr=t}makeResegmentHandle(t,e){const i=this.midHandleArchetype;return null===i?null:i.copy().rS()}get midHandleArchetype(){return this.iS}set midHandleArchetype(t){this.iS=t}get handle(){return this.fs}set handle(t){null!==t&&(t.part instanceof fe||e.o("new handle is not in an Adornment: "+t)),this.fs=t}get adornedLink(){return this.Xw}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)}doActivate(){const t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;const e=this.handle.part.adornedPart;if(e instanceof be){if(this.Xw=e,t.isMouseCaptured=!0,this.startTransaction(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){const i=e.points.copy(),n=this.getResegmentingPoint();if(i.insertAt(this.handle.segmentIndex+1,n),e.isOrthogonal&&i.insertAt(this.handle.segmentIndex+1,n),e.points=i,e.invalidateAdornments(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.sS=e.getPoint(this.handle.segmentIndex),this.ym=e.points.copy(),this.isActive=!0}}doDeactivate(){this.stopTransaction(),this.handle=null,this.Xw=null;this.diagram.isMouseCaptured=!1,this.isActive=!1}stopTransaction(){const t=this.diagram,e=super.stopTransaction();return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.optimize(),e}doCancel(){const t=this.adornedLink;null!==t&&(t.points=this.ym),this.stopTool()}getResegmentingPoint(){return null===this.handle?this.diagram.lastInput.documentPoint:this.handle.getDocumentPoint(w.Center)}doMouseMove(){const t=this.diagram;if(this.isActive){const e=this.computeReshape(t.lastInput.documentPoint);this.reshape(e)}}doMouseUp(){const t=this.diagram;if(this.isActive){const e=this.computeReshape(t.lastInput.documentPoint);this.reshape(e);const i=this.adornedLink;if(null!==i&&i.resegmentable&&null!==this.handle){const t=this.handle.segmentIndex,e=i.getPoint(t-1),n=i.getPoint(t),s=i.getPoint(t+1);if(i.isOrthogonal){if(t>i.firstPickIndex+1&&t<i.lastPickIndex-1){let r=i.getPoint(t-2);if(this.isWithinResegmentingDistance(e,n)&&(this.isInLineOrtho(r,e,n,s,!0)||this.isInLineOrtho(r,e,n,s,!1))){const o=i.points.copy();this.isInLineOrtho(r,e,n,s,!0)?(o.setElt(t-2,new y(r.x,(s.y+r.y)/2)),o.setElt(t+1,new y(s.x,(s.y+r.y)/2))):(o.setElt(t-2,new y((s.x+r.x)/2,r.y)),o.setElt(t+1,new y((s.x+r.x)/2,s.y))),o.removeAt(t),o.removeAt(t-1),i.points=o,i.invalidateAdornments()}else if(r=i.getPoint(t+2),this.isWithinResegmentingDistance(n,s)&&(this.isInLineOrtho(e,n,s,r,!0)||this.isInLineOrtho(e,n,s,r,!1))){const o=i.points.copy();this.isInLineOrtho(e,n,s,r,!0)?(o.setElt(t-1,new y(e.x,(e.y+r.y)/2)),o.setElt(t+2,new y(r.x,(e.y+r.y)/2))):(o.setElt(t-1,new y((e.x+r.x)/2,e.y)),o.setElt(t+2,new y((e.x+r.x)/2,r.y))),o.removeAt(t+1),o.removeAt(t),i.points=o,i.invalidateAdornments()}}}else{const r=y.l();if(S.ul(e.x,e.y,s.x,s.y,n.x,n.y,r)&&r.distanceSquaredPoint(n)<this.resegmentingDistance*this.resegmentingDistance){const e=i.points.copy();e.removeAt(t),i.points=e,i.invalidateAdornments()}y.e(r)}}t.invalidateDocumentBounds(),this.transactionResult=this.name,t.D("LinkReshaped",this.adornedLink,this.ym)}this.stopTool()}isWithinResegmentingDistance(t,e){return Math.abs(t.x-e.x)<this.resegmentingDistance&&Math.abs(t.y-e.y)<this.resegmentingDistance}isInLineOrtho(t,e,i,n,s){return s?Math.abs(t.y-e.y)<this.resegmentingDistance&&Math.abs(e.y-i.y)<this.resegmentingDistance&&Math.abs(i.y-n.y)<this.resegmentingDistance:Math.abs(t.x-e.x)<this.resegmentingDistance&&Math.abs(e.x-i.x)<this.resegmentingDistance&&Math.abs(i.x-n.x)<this.resegmentingDistance}get resegmentingDistance(){return this.eS}set resegmentingDistance(t){e.s(t,"number",W,"resegmentingDistance"),this.eS=t}reshape(t){const e=this.adornedLink;if(null===e)return;const i=this.handle;if(null===i)return;e.startRoute();let n=i.segmentIndex;const s=this.getReshapingBehavior(i);if(e.isOrthogonal)if(n===e.firstPickIndex+1){const i=e.firstPickIndex+1;2===s?(e.setPointAt(i,e.getPoint(i-1).x,t.y),e.setPointAt(i+1,e.getPoint(i+2).x,t.y)):1===s&&(e.setPointAt(i,t.x,e.getPoint(i-1).y),e.setPointAt(i+1,t.x,e.getPoint(i+2).y))}else if(n===e.lastPickIndex-1){const i=e.lastPickIndex-1;2===s?(e.setPointAt(i-1,e.getPoint(i-2).x,t.y),e.setPointAt(i,e.getPoint(i+1).x,t.y)):1===s&&(e.setPointAt(i-1,t.x,e.getPoint(i-2).y),e.setPointAt(i,t.x,e.getPoint(i+1).y))}else{let i=n;const s=e.getPoint(i),r=e.getPoint(i-1),o=e.getPoint(i+1);S.f(r.x,s.x)&&S.f(s.y,o.y)?(S.f(r.x,e.getPoint(i-2).x)&&!S.f(r.y,e.getPoint(i-2).y)?(e.insertPointAt(i,t.x,r.y),n++,i++):e.setPointAt(i-1,t.x,r.y),S.f(o.y,e.getPoint(i+2).y)&&!S.f(o.x,e.getPoint(i+2).x)?e.insertPointAt(i+1,o.x,t.y):e.setPointAt(i+1,o.x,t.y)):S.f(r.y,s.y)&&S.f(s.x,o.x)?(S.f(r.y,e.getPoint(i-2).y)&&!S.f(r.x,e.getPoint(i-2).x)?(e.insertPointAt(i,r.x,t.y),n++,i++):e.setPointAt(i-1,r.x,t.y),S.f(o.x,e.getPoint(i+2).x)&&!S.f(o.y,e.getPoint(i+2).y)?e.insertPointAt(i+1,t.x,o.y):e.setPointAt(i+1,t.x,o.y)):S.f(r.x,s.x)&&S.f(s.x,o.x)?(S.f(r.x,e.getPoint(i-2).x)&&!S.f(r.y,e.getPoint(i-2).y)?(e.insertPointAt(i,t.x,r.y),n++,i++):e.setPointAt(i-1,t.x,r.y),S.f(o.x,e.getPoint(i+2).x)&&!S.f(o.y,e.getPoint(i+2).y)?e.insertPointAt(i+1,t.x,o.y):e.setPointAt(i+1,t.x,o.y)):S.f(r.y,s.y)&&S.f(s.y,o.y)&&(S.f(r.y,e.getPoint(i-2).y)&&!S.f(r.x,e.getPoint(i-2).x)?(e.insertPointAt(i,r.x,t.y),n++,i++):e.setPointAt(i-1,r.x,t.y),S.f(o.y,e.getPoint(i+2).y)&&!S.f(o.x,e.getPoint(i+2).x)?e.insertPointAt(i+1,o.x,t.y):e.setPointAt(i+1,o.x,t.y)),e.setPointAt(n,t.x,t.y)}else{e.setPointAt(n,t.x,t.y);let i=e.fromNode,s=e.fromPort;if(null!==i){const t=i.findVisibleNode();null!==t&&t!==i&&(i=t,s=i.port)}if(1===n&&null!==s&&e.computeSpot(!0,s).isNoSpot()){const n=s.getDocumentPoint(w.Center,y.l()),r=e.getLinkPointFromPoint(i,s,n,t,!0,y.l());e.setPointAt(0,r.x,r.y),y.e(n),y.e(r)}let r=e.toNode,o=e.toPort;if(null!==r){const t=r.findVisibleNode();null!==t&&t!==r&&(r=t,o=r.port)}if(n===e.pointsCount-2&&null!==o&&e.computeSpot(!1,o).isNoSpot()){const i=o.getDocumentPoint(w.Center,y.l()),n=e.getLinkPointFromPoint(r,o,i,t,!1,y.l());e.setPointAt(e.pointsCount-1,n.x,n.y),y.e(i),y.e(n)}}e.commitRoute()}computeReshape(t){const e=this.adornedLink;if(null===e)return t;const i=this.handle;if(null===i)return t;const n=i.segmentIndex;switch(this.getReshapingBehavior(i)){case 3:return t;case 2:{const i=e.getPoint(n);return new y(i.x,t.y)}case 1:{const i=e.getPoint(n);return new y(t.x,i.y)}default:return e.getPoint(n)}}get originalPoint(){return this.sS}get originalPoints(){return this.ym}}class G extends I{pr;yr;Po;yc;lS;us;dr;fs;wm;hS;wc;Yw;Kw;Gw;constructor(t){super(),this.name="Resizing",this.pr=new v(1,1).u(),this.yr=new v(9999,9999).u(),this.Po=new v(NaN,NaN).u(),this.yc=!1,this.lS=!0,this.us=null,this.dr=new Jt("Rectangle",{alignmentFocus:w.Center,desiredSize:v.wC,fill:"lightblue",stroke:"dodgerblue",strokeWidth:1,cursor:"pointer"}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.fs=null,this.wm=new y,this.hS=new v,this.wc=new y,this.Yw=new v(0,0),this.Kw=new v(1/0,1/0),this.Gw=new v(1,1),t&&Object.assign(this,t)}updateAdornments(t){if(!(null===t||t instanceof be)){if(t.isSelected&&!this.diagram.isReadOnly){const e=t.resizeObject;let i=t.findAdornment(this.name);if(null!==e&&t.canResize()&&t.actualBounds.isReal()&&t.isVisible()&&e.actualBounds.isReal()&&e.isVisibleObject()&&((null===i||i.adornedObject!==e)&&(i=this.makeAdornment(e)),null!==i)){const n=e.getDocumentAngle();return t.Ml()&&this.updateResizeHandles(i,n),void t.addAdornment(this.name,i)}}t.removeAdornment(this.name)}}makeAdornment(t){let e=null;const i=t.part?.resizeAdornmentTemplate;if(i){if(e=i.copy(),null===e)return null}else{e=new fe,e.type=qt.Spot,e.locationSpot=w.Center;const i=new Pe;i.isPanelMain=!0,e.add(i);let n=this.makeHandle(t,w.TopLeft);null!==n&&e.add(n),n=this.makeHandle(t,w.TopRight),null!==n&&e.add(n),n=this.makeHandle(t,w.BottomRight),null!==n&&e.add(n),n=this.makeHandle(t,w.BottomLeft),null!==n&&e.add(n),n=this.makeHandle(t,w.MiddleTop),null!==n&&e.add(n),n=this.makeHandle(t,w.MiddleRight),null!==n&&e.add(n),n=this.makeHandle(t,w.MiddleBottom),null!==n&&e.add(n),n=this.makeHandle(t,w.MiddleLeft),null!==n&&e.add(n)}return e.adornedObject=t,e}makeHandle(t,e){const i=this.handleArchetype;if(null===i)return null;const n=i.copy().rS();return n.alignment=e,n}updateResizeHandles(t,e){if(null!==t)if(!t.alignment.isDefault()&&("pointer"===t.cursor||t.cursor.indexOf("resize")>0))this.NF(t,e);else if(t instanceof qt){const i=t.elements;for(;i.next();){const t=i.value;this.updateResizeHandles(t,e)}}}NF(t,e){let i=t.alignment;i.isNoSpot()&&(i=w.Center);let n=e;if(i.x<=0)i.y<=0?n+=225:i.y>=1?n+=135:n+=180;else if(i.x>=1)i.y<=0?n+=315:i.y>=1&&(n+=45);else if(i.y<=0)n+=270;else{if(!(i.y>=1))return;n+=90}n<0?n+=360:n>=360&&(n-=360),t.cursor=n<22.5?"e-resize":n<67.5?"se-resize":n<112.5?"s-resize":n<157.5?"sw-resize":n<202.5?"w-resize":n<247.5?"nw-resize":n<292.5?"n-resize":n<337.5?"ne-resize":"e-resize"}get handleArchetype(){return this.dr}set handleArchetype(t){this.dr=t}get handle(){return this.fs}set handle(t){null!==t&&(t.part instanceof fe||e.o("new handle is not in an Adornment: "+t)),this.fs=t}get adornedObject(){return this.us}set adornedObject(t){null!==t&&t.part instanceof fe&&e.o("new handle must not be in an Adornment: "+t),this.us=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)}doActivate(){const t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&null!==this.adornedObject.part&&(t.isMouseCaptured=!0,t.animationManager.stopAnimation(),t.gu=!0,this.startTransaction(this.name),this.wm.set(this.adornedObject.getDocumentPoint(this.handle.alignment.opposite())),this.wc.set(this.adornedObject.part.location),this.hS.set(this.adornedObject.desiredSize),this.Gw=this.computeCellSize(),this.Yw=this.computeMinSize(),this.Kw=this.computeMaxSize(),this.isActive=!0))}doDeactivate(){const t=this.diagram;t.gu=!1,t.xl=!0,this.stopTransaction(),this.handle=null,this.us=null,t.isMouseCaptured=!1,this.isActive=!1}stopTransaction(){const t=this.diagram,e=super.stopTransaction();return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.optimize(),e}doCancel(){null!==this.adornedObject&&null!==this.adornedObject.part&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()}doMouseMove(){const t=this.diagram;if(!this.isActive||null===this.adornedObject||null===this.handle)return;const e=this.Yw,i=this.Kw,n=this.Gw,s=t.lastInput.documentPoint,r=this.adornedObject.getLocalPoint(s,y.l()),o=this.computeReshape(),a=this.computeResize(r,this.handle.alignment,e,i,n,o);this.resize(a),t.maybeUpdate(),y.e(r)}doMouseUp(){const t=this.diagram;if(this.isActive&&null!==this.adornedObject&&null!==this.handle){const e=this.Yw,i=this.Kw,n=this.Gw,s=this.adornedObject.getLocalPoint(t.lastInput.documentPoint,y.l()),r=this.computeReshape(),o=this.computeResize(s,this.handle.alignment,e,i,n,r);this.resize(o),y.e(s),t.invalidateDocumentBounds(),this.transactionResult=this.name,t.D("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()}resize(t){const e=this.diagram,i=this.adornedObject;if(null===i)return;i.desiredSize=t.size;const n=i.part;if(null===n||null===this.handle)return;n.ensureBounds();const s=i.getDocumentPoint(this.handle.alignment.opposite());if(n instanceof Ae){const t=new l;let i;t.add(n),!this.dragsMembers&&!n.hasPlaceholder()&&(i=new St,i.dragsMembers=!1),e.moveParts(t,this.oppositePoint.copy().subtract(s),!0,i)}else n.location=n.location.copy().subtract(s).add(this.oppositePoint);e.maybeUpdate()}computeResize(t,e,i,n,s,r){if(null===this.adornedObject)return x.Fg;e.isNoSpot()&&(e=w.Center);const o=this.adornedObject.naturalBounds,a=o.x,l=o.y,h=o.x+o.width,u=o.y+o.height;let c=1;if(!r){let t=o.width,e=o.height;t<=0&&(t=1),e<=0&&(e=1),c=e/t}const d=y.l();S.Dg(t.x,t.y,a,l,s.width,s.height,d);const f=o.copy();return e.x<=0?e.y<=0?(f.x=Math.max(d.x,h-n.width),f.x=Math.min(f.x,h-i.width),f.width=Math.max(h-f.x,i.width),f.y=Math.max(d.y,u-n.height),f.y=Math.min(f.y,u-i.height),f.height=Math.max(u-f.y,i.height),r||(f.height/f.width>=1?(f.height=Math.max(Math.min(c*f.width,n.height),i.height),f.width=f.height/c):(f.width=Math.max(Math.min(f.height/c,n.width),i.width),f.height=c*f.width),f.x=h-f.width,f.y=u-f.height)):e.y>=1?(f.x=Math.max(d.x,h-n.width),f.x=Math.min(f.x,h-i.width),f.width=Math.max(h-f.x,i.width),f.height=Math.max(Math.min(d.y-l,n.height),i.height),r||(f.height/f.width>=1?(f.height=Math.max(Math.min(c*f.width,n.height),i.height),f.width=f.height/c):(f.width=Math.max(Math.min(f.height/c,n.width),i.width),f.height=c*f.width),f.x=h-f.width)):(f.x=Math.max(d.x,h-n.width),f.x=Math.min(f.x,h-i.width),f.width=h-f.x,r||(f.height=Math.max(Math.min(c*f.width,n.height),i.height),f.width=f.height/c,f.y=l+.5*(u-l-f.height))):e.x>=1?e.y<=0?(f.width=Math.max(Math.min(d.x-a,n.width),i.width),f.y=Math.max(d.y,u-n.height),f.y=Math.min(f.y,u-i.height),f.height=Math.max(u-f.y,i.height),r||(f.height/f.width>=1?(f.height=Math.max(Math.min(c*f.width,n.height),i.height),f.width=f.height/c):(f.width=Math.max(Math.min(f.height/c,n.width),i.width),f.height=c*f.width),f.y=u-f.height)):e.y>=1?(f.width=Math.max(Math.min(d.x-a,n.width),i.width),f.height=Math.max(Math.min(d.y-l,n.height),i.height),r||(f.height/f.width>=1?(f.height=Math.max(Math.min(c*f.width,n.height),i.height),f.width=f.height/c):(f.width=Math.max(Math.min(f.height/c,n.width),i.width),f.height=c*f.width))):(f.width=Math.max(Math.min(d.x-a,n.width),i.width),r||(f.height=Math.max(Math.min(c*f.width,n.height),i.height),f.width=f.height/c,f.y=l+.5*(u-l-f.height))):e.y<=0?(f.y=Math.max(d.y,u-n.height),f.y=Math.min(f.y,u-i.height),f.height=u-f.y,r||(f.width=Math.max(Math.min(f.height/c,n.width),i.width),f.height=c*f.width,f.x=a+.5*(h-a-f.width))):e.y>=1&&(f.height=Math.max(Math.min(d.y-l,n.height),i.height),r||(f.width=Math.max(Math.min(f.height/c,n.width),i.width),f.height=c*f.width,f.x=a+.5*(h-a-f.width))),y.e(d),f}computeReshape(){let t=0;return this.adornedObject instanceof Jt&&(t=this.adornedObject.aS()),!(6===t||this.diagram.lastInput.shift)}computeMinSize(){if(null===this.adornedObject)return v.sc;const t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t}computeMaxSize(){if(null===this.adornedObject)return v.Bk;const t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t}computeCellSize(){const t=new v(NaN,NaN),e=this.adornedObject?.part;if(e){const i=e.resizeCellSize;!isNaN(i.width)&&i.width>0&&(t.width=i.width),!isNaN(i.height)&&i.height>0&&(t.height=i.height)}let i=this.cellSize;isNaN(t.width)&&!isNaN(i.width)&&i.width>0&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&i.height>0&&(t.height=i.height);const n=this.diagram;if((isNaN(t.width)||isNaN(t.height))&&n){const e=n.grid;null!==e&&e.visible&&this.isGridSnapEnabled&&(i=e.gridCellSize,isNaN(t.width)&&!isNaN(i.width)&&i.width>0&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&i.height>0&&(t.height=i.height))}return(isNaN(t.width)||0===t.width||t.width===1/0)&&(t.width=1),(isNaN(t.height)||0===t.height||t.height===1/0)&&(t.height=1),t}get minSize(){return this.pr}set minSize(t){if(!this.pr.equals(t)){let e=t.width;isNaN(e)&&(e=0);let i=t.height;isNaN(i)&&(i=0),this.pr.i(e,i)}}get maxSize(){return this.yr}set maxSize(t){if(!this.yr.equals(t)){let e=t.width;isNaN(e)&&(e=1/0);let i=t.height;isNaN(i)&&(i=1/0),this.yr.i(e,i)}}get cellSize(){return this.Po}set cellSize(t){this.Po.equals(t)||this.Po.a(t)}get isGridSnapEnabled(){return this.yc}set isGridSnapEnabled(t){e.s(t,"boolean",G,"isGridSnapEnabled"),this.yc=t}get dragsMembers(){return this.lS}set dragsMembers(t){e.s(t,"boolean",G,"dragsMembers"),this.lS=t}get oppositePoint(){return this.wm}set oppositePoint(t){this.wm.equals(t)||this.wm.a(t)}get originalDesiredSize(){return this.hS}get originalLocation(){return this.wc}}class X extends I{cS;fS;us=null;dr=null;Hw=null;fs=null;uS;xm;wc;dS;gS;constructor(t){super(),this.name="Rotating",this.cS=45,this.fS=2,this.wc=new y,this.us=null,this.handleArchetype=new Jt("Ellipse",{desiredSize:v.nu,fill:"lightblue",stroke:"dodgerblue",strokeWidth:1,cursor:"pointer"}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.fs=null,this.uS=0,this.xm=new y(NaN,NaN),this.dS=0,this.gS=50,t&&Object.assign(this,t)}updateAdornments(t){if(null!==t){if(t.Nl()){const e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly){const e=t.rotateObject;if(null!==e&&t.canRotate()&&t.actualBounds.isReal()&&t.isVisible()&&e.actualBounds.isReal()&&e.isVisibleObject()){let i=t.findAdornment(this.name);if((null===i||i.adornedObject!==e)&&(i=this.makeAdornment(e)),null!==i)return i.angle=e.getDocumentAngle(),i.hasPlaceholder()||(i.location=this.computeAdornmentLocation(e)),void t.addAdornment(this.name,i)}}t.removeAdornment(this.name)}}makeAdornment(t){let e=null;const i=t.part?.rotateAdornmentTemplate;return i?e=i.copy():null!==this.Hw&&(e=this.Hw.copy()),null===e?null:(e.adornedObject=t,e)}get handleArchetype(){return this.dr}set handleArchetype(t){this.dr=t,this.Hw=null!==t?new fe(qt.Position,{locationSpot:w.Center}).add(t).Et():null}get handle(){return this.fs}set handle(t){null!==t&&(t.part instanceof fe||e.o("new handle is not in an Adornment: "+t)),this.fs=t}get adornedObject(){return this.us}set adornedObject(t){null!==t&&t.part instanceof fe&&e.o("new handle must not be in an Adornment: "+t),this.us=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)}doActivate(){const t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null===this.adornedObject||null===this.adornedObject.part||(t.isMouseCaptured=!0,t.delaysLayout=!0,this.startTransaction(this.name),this.uS=this.adornedObject.angle,this.xm=this.computeRotationPoint(this.adornedObject),this.wc=this.adornedObject.part.location.copy(),this.isActive=!0)}computeRotationPoint(t){const e=t.part;if(null!==e){const i=e.locationObject;if(e.rotationSpot.isSpot())return t.getDocumentPoint(e.rotationSpot);if(t===e||t===i)return i.getDocumentPoint(e.locationSpot)}return t.getDocumentPoint(w.Center)}computeAdornmentLocation(t){let e=this.rotationPoint;e.isReal()||(e=this.computeRotationPoint(t));const i=t.getLocalPoint(e);let n=this.handleAngle;n<0?n+=360:n>=360&&(n-=360),n=Math.round(45*Math.round(n/45));const s=this.handleDistance;return 0===n?i.x=t.naturalBounds.width+s:45===n?(i.x=t.naturalBounds.width+s,i.y=t.naturalBounds.height+s):90===n?i.y=t.naturalBounds.height+s:135===n?(i.x=-s,i.y=t.naturalBounds.height+s):180===n?i.x=-s:225===n?(i.x=-s,i.y=-s):270===n?i.y=-s:315===n&&(i.x=t.naturalBounds.width+s,i.y=-s),t.getDocumentPoint(i)}doDeactivate(){const t=this.diagram;this.stopTransaction(),this.handle=null,this.us=null,this.xm=new y(NaN,NaN),t.isMouseCaptured=!1,this.isActive=!1}stopTransaction(){const t=this.diagram,e=super.stopTransaction();return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.optimize(),e}doCancel(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()}doMouseMove(){const t=this.diagram;if(this.isActive){const e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e)}}doMouseUp(){const t=this.diagram;if(this.isActive){t.delaysLayout=!1;const e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.invalidateDocumentBounds(),this.transactionResult=this.name,t.D("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()}rotate(t){const e=this.adornedObject;if(null===e||null===e.part)return;e.angle=t;const i=e.part;i.ensureBounds();const n=i.locationObject,s=i.rotateObject;if(n===s||n.isContainedBy(s)){const e=this.wc.copy();i.location=e.subtract(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)}this.diagram.maybeUpdate()}computeRotate(t){let e=this.rotationPoint.directionPoint(t)-this.handleAngle;const i=this.adornedObject?.panel;i&&(e-=i.getDocumentAngle()),e>=360?e-=360:e<0&&(e+=360);const n=Math.min(Math.abs(this.snapAngleMultiple),180),s=Math.min(Math.abs(this.snapAngleEpsilon),n/2);return!this.diagram.lastInput.shift&&n>0&&s>0&&(e%n<s?e=Math.floor(e/n)*n:e%n>n-s&&(e=(Math.floor(e/n)+1)*n)),e>=360?e-=360:e<0&&(e+=360),e}get snapAngleMultiple(){return this.cS}set snapAngleMultiple(t){e.s(t,"number",X,"snapAngleMultiple"),this.cS=t}get snapAngleEpsilon(){return this.fS}set snapAngleEpsilon(t){e.s(t,"number",X,"snapAngleEpsilon"),this.fS=t}get originalAngle(){return this.uS}get rotationPoint(){return this.xm}set rotationPoint(t){this.xm=t.copy()}get handleAngle(){return this.dS}set handleAngle(t){e.s(t,"number",X,"handleAngle"),this.dS=t}get handleDistance(){return this.gS}set handleDistance(t){e.s(t,"number",X,"handleDistance"),this.gS=t}}class K extends I{constructor(t){super(),this.name="ClickSelecting",t&&Object.assign(this,t)}canStart(){return!(!this.isEnabled||this.isBeyondDragSize())}doMouseUp(){this.isActive&&(this.standardMouseSelect(),this.standardMouseClick()||this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()}}class J extends I{xc;constructor(t){super(),this.name="Action",this.xc=null,t&&Object.assign(this,t)}canStart(){if(!this.isEnabled)return!1;const t=this.diagram,e=t.lastInput,i=t.findObjectAt(e.documentPoint,(t=>{for(;null!==t.panel;){if(t.isActionable)return t;t=t.panel}return t}));return!(null===i||!i.isActionable)&&(this.xc=i,t.gc=t.findObjectAt(e.documentPoint,null,null),!0)}doMouseDown(){if(this.isActive){const t=this.diagram.lastInput,e=this.xc;if(null===e)return;t.targetObject=e,null!==e.actionDown&&e.actionDown(t,e)}else this.canStart()&&this.doActivate()}doMouseMove(){if(this.isActive){const t=this.diagram.lastInput,e=this.xc;if(null===e)return;t.targetObject=e,null!==e.actionMove&&e.actionMove(t,e)}}doMouseUp(){if(this.isActive){const t=this.diagram.lastInput,e=this.xc;if(null===e)return;t.targetObject=e,null!==e.actionUp&&e.actionUp(t,e),this.standardMouseClick((t=>{for(;null!==t.panel;){if(t.isActionable&&t===e)return t;t=t.panel}return t}),(t=>t===e))}this.stopTool()}doCancel(){const t=this.diagram.lastInput,e=this.xc;null!==e&&(t.targetObject=e,null!==e.actionCancel&&e.actionCancel(t,e),this.stopTool())}doStop(){this.xc=null}}class Z extends I{Cl;mS;yc;pS;constructor(t){super(),this.name="ClickCreating",this.Cl=null,this.mS=!0,this.yc=!1,this.pS=new y(0,0),t&&Object.assign(this,t)}canStart(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.pS=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.pS))return!1}else if(1!==t.lastInput.clickCount)return!1;return!(t.currentTool!==this&&null!==t.findPartAt(t.lastInput.documentPoint,!0))}doMouseUp(){const t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()}insertPart(t){const i=this.diagram,n=this.archetypeNodeData;if(null===n)return null;let s=null;try{if(i.D("ChangingSelection",i.selection),this.startTransaction(this.name),n instanceof ce)n.ke()&&(n.Et(),s=n.copy(),null!==s&&i.add(s));else if(null!==n){const t=i.model.copyNodeData(n);e.K(t)&&(i.model.addNodeData(t),s=i.findPartForData(t))}if(null!==s){const e=y.V(t.x,t.y);this.isGridSnapEnabled&&this.diagram.yS(s,t,e),s.location=e,i.allowSelect&&(i.clearSelection(!0),s.isSelected=!0),y.e(e)}i.invalidateDocumentBounds(),this.transactionResult=this.name,i.D("PartCreated",s)}finally{this.stopTransaction(),i.D("ChangedSelection",i.selection)}return s}get archetypeNodeData(){return this.Cl}set archetypeNodeData(t){null!==t&&e.ec(t,Z,"archetypeNodeData"),this.Cl=t}get isDoubleClick(){return this.mS}set isDoubleClick(t){e.s(t,"boolean",Z,"isDoubleClick"),this.mS=t}get isGridSnapEnabled(){return this.yc}set isGridSnapEnabled(t){e.s(t,"boolean",Z,"isGridSnapEnabled"),this.yc=t}}class Q extends I{zh;wS;Ll;constructor(t){super(),this.name="DragSelecting",this.zh=175,this.wS=!1,this.Ll=new ce({layerName:"Tool",selectable:!1}).add(new Jt("Rectangle",{name:"SHAPE",fill:null,stroke:"magenta"}).theme("stroke","dragSelect")).Et(),t&&Object.assign(this,t)}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(!t.allowSelect)return!1;const e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.findPartAt(e.documentPoint,!0)))}doActivate(){const t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,this.box&&t.add(this.box),this.doMouseMove()}doDeactivate(){const t=this.diagram;t.stopAutoScroll(),this.box&&t.remove(this.box),t.skipsUndoManager=!1,t.isMouseCaptured=!1,this.isActive=!1}doMouseMove(){const t=this.diagram;if(this.isActive&&null!==this.box){const e=this.computeBoxBounds();let i=this.box.findObject("SHAPE");null===i&&(i=this.box.findMainElement());const n=v.l().i(e.width,e.height);null!==i&&(i.desiredSize=n),this.box.bc(e.x,e.y,!1),v.e(n),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.doAutoScroll(t.lastInput.viewPoint)}}doMouseUp(){if(this.isActive){const t=this.diagram;this.box&&t.remove(this.box);try{t.currentCursor="wait",t.D("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.D("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()}computeBoxBounds(){const t=this.diagram;return new x(t.firstInput.documentPoint,t.lastInput.documentPoint)}selectInRect(t){const i=this.diagram,n=i.lastInput,s=i.findPartsIn(t,this.isPartialInclusion);if(e.tr?n.meta:n.control)if(n.shift){const t=s.iterator;for(;t.next();){const e=t.value;e.isSelected&&(e.isSelected=!1)}}else{const t=s.iterator;for(;t.next();){const e=t.value;e.isSelected=!e.isSelected}}else if(n.shift){const t=s.iterator;for(;t.next();){const e=t.value;e.isSelected||(e.isSelected=!0)}}else{const t=new l,e=i.selection.iterator;for(;e.next();){const i=e.value;s.has(i)||t.add(i)}const n=t.iterator;for(;n.next();){n.value.isSelected=!1}const r=s.iterator;for(;r.next();){const t=r.value;t.isSelected||(t.isSelected=!0)}}}get delay(){return this.zh}set delay(t){e.s(t,"number",Q,"delay"),this.zh=t}get isPartialInclusion(){return this.wS}set isPartialInclusion(t){e.s(t,"boolean",Q,"isPartialInclusion"),this.wS=t}get box(){return this.Ll}set box(t){null!==t&&t.Et(),this.Ll=t}}class tt extends I{jw;cL;ko;xS;constructor(e){super(),this.name="Panning",this.jw=new y,this.cL=new y,this.ko=!1;const i=this;this.xS=()=>{const e=i.diagram;null!==e&&e.Pi(t.document,"scroll",i.xS,!1),i.stopTool()},e&&Object.assign(this,e)}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())}doActivate(){const e=this.diagram;this.ko?(e.lastInput.bubbles=!0,e.Ut(t.document,"scroll",this.xS,!1)):(e.currentCursor="move",e.isMouseCaptured=!0,this.jw.a(e.position)),this.isActive=!0}doDeactivate(){const t=this.diagram;t.currentCursor="",t.isMouseCaptured=!1,this.isActive=!1}doCancel(){const t=this.diagram;t.position=this.jw,t.isMouseCaptured=!1,this.stopTool()}doMouseMove(){this.fL()}doMouseUp(){this.fL(),this.stopTool()}fL(){const t=this.diagram;if(this.isActive&&t){if(this.ko)return void(t.lastInput.bubbles=!0);const e=t.position,i=t.firstInput.documentPoint,n=t.lastInput.documentPoint;let s=e.x+i.x-n.x,r=e.y+i.y-n.y;t.allowHorizontalScroll||(s=e.x),t.allowVerticalScroll||(r=e.y),t.position=this.cL.i(s,r)}}get bubbles(){return this.ko}set bubbles(t){e.s(t,"boolean",tt,"bubbles"),this.ko=t}get originalPosition(){return this.jw}}class et{qw;Ww;bS;kS;constructor(t){this.qw=null,this.Ww=null,this.bS=null,this.kS=null,t&&Object.assign(this,t)}get mainElement(){return this.bS}set mainElement(t){this.bS=t}get show(){return this.qw}set show(t){this.qw!==t&&(null!==t&&e.k(t,et,"show"),this.qw=t)}get hide(){return this.Ww}set hide(t){this.Ww!==t&&(null!==t&&e.k(t,et,"hide"),this.Ww=t)}get valueFunction(){return this.kS}set valueFunction(t){this.kS=t}}class it{ri;Jw;kc;constructor(t,e,i){this.ri=t,this.Jw=e,this.kc=i}}class nt extends I{PS;$w;SS;MS;Zw;Qw;bm;constructor(t){super(),this.name="ContextMenu",this.PS=null,this.$w=null,this.SS=null,this.MS=new y,this.Zw=null,this.bm=!1;const e=this;this.Qw=()=>e.stopTool(),t&&Object.assign(this,t)}CF(){const i=new et;i.show=(t,e,i)=>i.showDefaultContextMenu(),i.hide=(t,e)=>e.hideDefaultContextMenu(),nt.wu=i;const n=this;this.Qw=()=>n.stopTool();const s=e.hs("div"),r=e.hs("div");s.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",r.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";const o=e.hs("style");t.document.getElementsByTagName("head")[0].appendChild(o),o.sheet.insertRule(".goCXul { list-style: none; }",0),o.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),o.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);const a=this.diagram;null!==a&&(a.Ut(s,"contextmenu",nt.Gh,!1),a.Ut(s,"selectstart",nt.Gh,!1),a.Ut(r,"contextmenu",nt.Gh,!1)),s.className="goCXforeground",r.className="goCXbackground",t.document.body&&(t.document.body.appendChild(s),t.document.body.appendChild(r)),nt.km=s,nt.Pm=r,nt.NS=!0}static wu=null;static NS=!1;static Pm;static km;static Gh(t){return t.preventDefault(),!1}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right||t.lastInput.clickCount>1)&&!!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu())}doStart(){const t=this.diagram;this.MS.set(t.firstInput.documentPoint)}doStop(){this.hideContextMenu(),this.currentObject=null,this.bm=!1}findObjectWithContextMenu(t){void 0===t&&(t=null);const e=this.diagram,i=e.lastInput;let n=null;if(t instanceof xt||(n=t instanceof Dt?t:e.findObjectAt(i.documentPoint,null,(t=>!t.layer?.isTemporary))),null!==n){let t=n;for(;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return n.part}else if(null!==e.contextMenu)return e;return null}doActivate(){}doMouseDown(){if(super.doMouseDown(),this.isActive&&this.currentContextMenu instanceof fe){const t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.has(this)&&this.doContextClick()}doMouseUp(){if(this.isActive&&this.currentContextMenu instanceof fe){const t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}this.doContextClick()}doContextClick(){const t=this.diagram;if(this.isActive){const e=this.currentContextMenu;if(null===e)return;let i=null;e instanceof et||(i=t.findObjectAt(t.lastInput.documentPoint,null,null),null!==i&&i.isContainedBy(e)&&this.standardMouseClick(null,null)),this.maybeStopTool(i)}else this.canStart()&&(this.openMenu(!0),this.isActive||this.stopTool())}maybeStopTool(t){this.stopTool(),this.canStart()&&(this.diagram.currentTool=this,this.doMouseUp())}openMenu(t,e){if(void 0===e&&(e=null),this.bm)return;this.bm=!0,t&&this.standardMouseSelect();const i=this.standardMouseClick();if(this.bm=!1,!i){this.isActive=!0;const t=nt.wu;if(null===e&&(e=this.findObjectWithContextMenu()),null!==e){const i=e.contextMenu;null!==i?(this.currentObject=e instanceof Dt?e:null,this.showContextMenu(i,this.currentObject)):null!==t&&this.showContextMenu(t,this.currentObject)}else null!==t&&this.showContextMenu(t,null);this.currentContextMenu instanceof fe&&!this.currentContextMenu.visible&&this.stopTool()}}doMouseMove(){const t=this.diagram.toolManager.findTool("Action");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()}showContextMenu(t,e){const i=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof fe){const n=t;n.layerName="Tool",n.selectable=!1,n.scale=1/i.scale,n.category=this.name,n.hasPlaceholder()&&(n.placeholder.scale=i.scale);const s=n.diagram;null!==s&&s!==i&&s.remove(n),i.add(n),null!==e?n.adornedObject=e:n.data=i.model,n.ensureBounds(),this.positionContextMenu(n,e)}else t instanceof et&&null!==t.show&&t.show(e,i,this);this.currentContextMenu=t}positionContextMenu(t,e){if(t.hasPlaceholder())return;const i=t,n=this.diagram,s=n.lastInput.documentPoint.copy(),r=i.measuredBounds,o=n.viewportBounds;n.lastInput.isTouchEvent&&(s.x-=r.width),s.x+r.width>o.right&&(s.x-=r.width+5/n.scale),s.x<o.x&&(s.x=o.x),s.y+r.height>o.bottom&&(s.y-=r.height+5/n.scale),s.y<o.y&&(s.y=o.y),i.position=s}hideContextMenu(){const t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof fe?(t.remove(e),null!==this.$w&&this.$w.removeAdornment(e.category),e.data=null,e.adornedObject=null):e instanceof et&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())}LF(){const t=this,e=new l;return e.add(new it("Copy",(t=>t.commandHandler.copySelection()),(t=>t.commandHandler.canCopySelection()))),e.add(new it("Cut",(t=>t.commandHandler.cutSelection()),(t=>t.commandHandler.canCutSelection()))),e.add(new it("Delete",(t=>t.commandHandler.deleteSelection()),(t=>t.commandHandler.canDeleteSelection()))),e.add(new it("Paste",(e=>e.commandHandler.pasteSelection(t.mouseDownPoint)),(e=>e.commandHandler.canPasteSelection(t.mouseDownPoint)))),e.add(new it("Select All",(t=>t.commandHandler.selectAll()),(t=>t.commandHandler.canSelectAll()))),e.add(new it("Undo",(t=>t.commandHandler.undo()),(t=>t.commandHandler.canUndo()))),e.add(new it("Redo",(t=>t.commandHandler.redo()),(t=>t.commandHandler.canRedo()))),e.add(new it("Scroll To Part",(t=>t.commandHandler.scrollToPart()),(t=>t.commandHandler.canScrollToPart()))),e.add(new it("Zoom To Fit",(t=>t.commandHandler.zoomToFit()),(t=>t.commandHandler.canZoomToFit()))),e.add(new it("Reset Zoom",(t=>t.commandHandler.resetZoom()),(t=>t.commandHandler.canResetZoom()))),e.add(new it("Group Selection",(t=>t.commandHandler.groupSelection()),(t=>t.commandHandler.canGroupSelection()))),e.add(new it("Ungroup Selection",(t=>t.commandHandler.ungroupSelection()),(t=>t.commandHandler.canUngroupSelection()))),e.add(new it("Edit Text",(t=>t.commandHandler.editTextBlock()),(t=>t.commandHandler.canEditTextBlock()))),e}showDefaultContextMenu(){const t=this.diagram;null===this.Zw&&(this.Zw=this.LF()),nt.km.innerHTML="",nt.Pm.addEventListener("pointerdown",this.Qw,!1);const i=this,n=e.hs("ul");n.className="goCXul",nt.km.appendChild(n),n.innerHTML="";const s=this.Zw.iterator;for(;s.next();){const r=s.value,o=r.Jw,a=r.kc;if(!e.it(o)||e.it(a)&&!a(t))continue;const l=e.hs("li");l.className="goCXli";const h=e.hs("a");h.className="goCXa",h.href="#",h.Jw=o,h.addEventListener("pointerdown",(function(e){return this.Jw(t),i.stopTool(),e.preventDefault(),!1}),!1),h.textContent=r.ri,l.appendChild(h),n.appendChild(l)}nt.km.style.display="block",nt.Pm.style.display="block"}hideDefaultContextMenu(){if(null===this.currentContextMenu||this.currentContextMenu!==nt.wu)return;nt.km.style.display="none",nt.Pm.style.display="none";const t=this.diagram;null!==t&&t.Pi(nt.Pm,"pointerdown",this.Qw,!1),this.currentContextMenu=null}get currentContextMenu(){return this.PS}set currentContextMenu(t){this.PS=t,this.$w=t instanceof fe?t.adornedPart:null}get defaultTouchContextMenu(){return!1===nt.NS&&null===nt.wu&&xt.isUsingDOM()&&this.CF(),nt.wu}set defaultTouchContextMenu(t){null===t&&(nt.NS=!0),nt.wu=t}get currentObject(){return this.SS}set currentObject(t){this.SS=t}get mouseDownPoint(){return this.MS}}var st=(t=>(t[t.LostFocus=1]="LostFocus",t[t.MouseDown=2]="MouseDown",t[t.Tab=3]="Tab",t[t.Enter=4]="Enter",t))(st||{}),rt=(t=>(t[t.SingleClick=1]="SingleClick",t[t.SingleClickSelected=2]="SingleClickSelected",t[t.DoubleClick=3]="DoubleClick",t))(rt||{}),ot=(t=>(t[t.None=1]="None",t[t.Active=2]="Active",t[t.Editing=3]="Editing",t[t.Validating=4]="Validating",t[t.Invalid=5]="Invalid",t[t.Validated=6]="Validated",t))(ot||{});class at extends I{Pe;CS;LS;Al;Kt;AS;TS;DS;_w;FS;constructor(t){super(),this.name="TextEditing",this.Pe=new ie,this.CS=null,this.LS=2,this.Al=null,this.Kt=1,this.AS=1,this.TS=!0,this.DS=null,this._w=new et,this.AF(this._w),t&&Object.assign(this,t)}static LostFocus=1;static MouseDown=2;static Tab=3;static Enter=4;static SingleClick=1;static SingleClickSelected=2;static DoubleClick=3;static StateNone=1;static StateActive=2;static StateEditing=3;static StateValidating=4;static StateInvalid=5;static StateValidated=6;AF(t){if(!xt.isUsingDOM())return;const i=e.hs("textarea");this.FS=i;const n=this;i.addEventListener("input",(function(t){if(null===n.textBlock)return;const e=n.measureTemporaryTextBlock(this.value),i=this.textScale;this.style.width=20+Math.max(n.textBlock.measuredBounds.width,e.measuredBounds.width)*i+"px",this.rows=Math.max(n.textBlock.lineCount,e.lineCount)}),!1),i.addEventListener("keydown",(function(t){if(t.isComposing||null===n.textBlock)return;const e=t.key;return"Enter"===e?(!1===n.textBlock.isMultiline&&t.preventDefault(),void n.acceptText(4)):"Tab"===e?(n.acceptText(3),void t.preventDefault()):void("Escape"===e&&(n.doCancel(),null!==n.diagram&&n.diagram.doFocus()))}),!1),i.addEventListener("focus",(function(t){n.TF(t)}),!1),i.addEventListener("blur",(function(t){n.DF(t)}),!1),t.valueFunction=()=>i.value,t.mainElement=i,t.show=(t,e,n)=>{if(!(t instanceof ie&&e&&e.div&&n instanceof at))return;if(5===n.state)return i.style.border="3px solid red",void i.focus();const s=t.getDocumentPoint(w.Center),r=e.position,o=e.scale;let a=t.getDocumentScale()*o;a<n.minimumEditorScale&&(a=n.minimumEditorScale);const l=t.naturalBounds.width*a+6,h=t.naturalBounds.height*a+2,u=(s.x-r.x)*o,c=(s.y-r.y)*o,d=t.verticalAlignment,f=(t.lineHeight+t.spacingAbove+t.spacingBelow)*t.lineCount*a,p=.5*h-.5*f,g=d.y*h-d.y*f+d.offsetY-p-f/2;i.value=t.text,e.div.style.font=t.font;i.style.position="absolute",i.style.zIndex="100",i.style.font="inherit",i.style.fontSize=100*a+"%",i.style.lineHeight="normal",i.style.width=l+"px",i.style.left=(u-l/2|0)-1+"px",i.style.top=(c+g|0)-1+"px",i.style.textAlign=t.textAlign,i.style.margin="0",i.style.padding="1px",i.style.border="0",i.style.outline="none",i.style.whiteSpace="pre-wrap",i.style.overflow="hidden",i.rows=t.lineCount,i.textScale=a,i.className="goTXarea",e.div.appendChild(i),i.focus(),n.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))},t.hide=(t,e)=>{t.div&&t.div.removeChild(i)}}get textBlock(){return this.CS}set textBlock(t){this.CS=t}get currentTextEditor(){return this.DS}set currentTextEditor(t){this.DS=t}get defaultTextEditor(){return this._w}set defaultTextEditor(t){this._w=t}get starting(){return this.LS}set starting(t){this.LS=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(null===t||t.isReadOnly||at.Pc&&at.Pc!==this&&(at.Pc.acceptText(2),at.Pc&&at.Pc!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;const e=t.lastInput.documentPoint,i=t.findObjectAt(e);if(!(null!==i&&i instanceof ie&&i.editable&&null!==i.part&&i.part.canEdit()))return!1;const n=i.part;return!(null===n||2===this.starting&&!n.isSelected||3===this.starting&&t.lastInput.clickCount<2)}doStart(){at.Pc=this,null!==this.textBlock&&this.doActivate()}doActivate(){if(this.isActive)return;const t=this.diagram;if(null===t)return;let e=this.textBlock;if(null===e&&(e=t.findObjectAt(t.lastInput.documentPoint)),null===e||!(e instanceof ie)||(this.textBlock=e,null===e.part))return;t.animationManager.stopAnimation(),this.isActive=!0,this.Kt=2;let i=this.defaultTextEditor;null!==e.textEditor&&(i=e.textEditor),this.Pe=this.textBlock.copy();const n=new x(this.textBlock.getDocumentPoint(w.TopLeft),this.textBlock.getDocumentPoint(w.BottomRight));t.scrollToRect(n),null!==i&&null!==i.show&&i.show(e,t,this),this.currentTextEditor=i}doCancel(){this.stopTool()}doMouseUp(){this.canStart()&&this.doActivate()}doMouseDown(){this.isActive&&this.acceptText(2)}acceptText(t){switch(t){case 2:6===this.Kt?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(2===this.Kt||5===this.Kt||3===this.Kt)&&(this.Kt=4,this.uL());break;case 1:case 4:case 3:if(4===t&&null!==this.textBlock&&!0===this.textBlock.isMultiline)return;(2===this.Kt||5===this.Kt||3===this.Kt)&&(this.Kt=4,this.uL())}}uL(){const t=this.textBlock,e=this.diagram,i=this.currentTextEditor;if(null!==t&&null!==i){const n=t.text;let s="";if(null!==i.valueFunction&&(s=i.valueFunction()),!this.isValidText(t,n,s))return this.Kt=5,void this.doError(n,s);this.startTransaction(this.name),this.Kt=6,this.transactionResult=this.name,t.text=s,this.doSuccess(n,s),null!==e&&e.D("TextEdited",t,n),this.stopTransaction(),this.stopTool(),null!==e&&e.doFocus()}}doError(t,e){const i=this.textBlock;if(null===i)return;null!==i.errorFunction&&i.errorFunction(this,t,e);const n=this.currentTextEditor;null!==n&&null!==n.show&&n.show(i,this.diagram,this)}doSuccess(t,e){const i=this.textBlock;null!==i&&null!==i.textEdited&&i.textEdited(i,t,e)}doDeactivate(){const t=this.diagram;if(null!==t){if(this.Kt=1,null!==this.currentTextEditor){const e=this.currentTextEditor;null!==e&&null!==e.hide&&e.hide(t,this)}this.textBlock=null,this.isActive=!1}}doStop(){at.Pc=null}TF(t){if(null===this.currentTextEditor||1===this.state)return;const i=this.FS;2===this.Kt&&(this.Kt=3),e.it(i.select)&&this.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}DF(t){if(null===this.currentTextEditor||1===this.state)return;const i=this.FS;e.it(i.focus)&&i.focus(),e.it(i.select)&&this.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}isValidText(t,e,i){const n=this.textValidation;if(null!==n&&!n(t,e,i))return!1;const s=t.textValidation;return!(null!==s&&!s(t,e,i))}get textValidation(){return this.Al}set textValidation(t){null!==t&&e.k(t,at,"textValidation"),this.Al=t}get minimumEditorScale(){return this.AS}set minimumEditorScale(t){null!==t&&e.s(t,"number",at,"minimumEditorScale"),this.AS=t}get selectsTextOnActivate(){return this.TS}set selectsTextOnActivate(t){null!==t&&e.s(t,"boolean",at,"selectsTextOnActivate"),this.TS=t}get state(){return this.Kt}set state(t){this.Kt!==t&&(this.Kt=t)}measureTemporaryTextBlock(t){const e=this.Pe;return e.text=t,null!==this.textBlock&&e.ht(this.textBlock.Tl,1/0),e}static Pc=null}var lt=(t=>(t[t.Default=1]="Default",t[t.AnimateLocations=2]="AnimateLocations",t[t.None=3]="None",t))(lt||{});class ht{N;Si;Oi;wr;zn;So;RS;vS;Sm;pi;Sc;on;Mm;Hh;tx;Nm;ix;Mc;pu;Cm;constructor(t){this.N=xt.um(),this.Si=!1,this.Sm=!1,this.pi=!1,this.Sc=!1,this.ix=!0,this.Mc=1,this.pu=!1,this.Oi=!0,this.wr=!0,this.So=600,this.RS=!1,this.vS=!1,this.zn=new u,this.on=new ut,this.Mm=new ut,this.on.ds=this,this.Hh=new u,this.tx=new u,this.Nm=new u,this.Cm=new u,t&&Object.assign(this,t)}Mo(t){this.N=t}NE(){return this.N}canStart(t){return!0}Dl(t){return!(!this.Oi||!this.canStart(t))&&(this.zn.add(t),this.defaultAnimation.isAnimating&&this.stopAnimation(),this.N.Mi(),this.pi=!0,!0)}getBundleAnimation(){return this.Mm}OS(){if(!this.Oi||(this.Mm.ce.count>0&&this.Mm.start(),!this.pi))return;const e=this.on,i=this.N,n=this.zn.has("Model");if(n&&(this.Sc=!0,1===this.Mc?(e.isViewportUnconstrained=!0,e.ce.clear(),e.add(i,"position",i.position.copy().offset(0,-200),i.position),e.add(i,"opacity",0,1)):3===this.Mc&&e.ce.clear(),2===this.Mc&&i.ex.equals(i.at)?this.ix=!0:this.ix=!1,i.D("InitialAnimationStarting",this)),n&&!this.wr||0===e.ce.count)return this.zn.clear(),this.pi=!1,e.ce.clear(),e.nx(i),this.Sc=!1,void i.S();this.zn.clear(),i.xr=!1;const s=e.ce.get(i);1!==i.autoScale&&null!==s&&(delete s.ei.scale,delete s.gs.scale);const r=this;t.requestAnimationFrame((()=>{!1===r.pi||e.Si||(i.getRenderingHint("temporaryPixelRatio")&&i.Bw(),i.IS(),r.pi=!1,e.start(),e.Si&&(r.xu(),i.invalidateDocumentBounds(),e.dL(0),i.ur(!0),r.bu(),i.D("AnimationStarting",r)))}))}ES(){return this.zn.has("Trigger")&&1===this.zn.count}gL(t,e,i,n){this.isTicking||this.ES()||t instanceof be&&(null!==t.fromNode||null!==t.toNode)||this.on.add(t,"position",e,i,n)}lx(t){return this.on.lx(t)}US(t){return this.on.US(t)}FF(e){const i=this.Hh,n=this;function s(){if(n.Nm.count>0&&(i.addAll(n.Nm),n.Nm.clear(),n.Si=!0),!1===n.Si||0===i.count)return;n.tx.addAll(i);const e=n.tx.iterator;for(;e.next();){const t=e.value;!1!==t.Si&&(t.RF()?t.mL(!1):t.Nc=!0)}n.tx.clear(),!1!==n.Si?(n.xu(),n.N.ur(),n.bu(),t.requestAnimationFrame(s)):t.requestAnimationFrame(s)}this.Si?this.vF(e):(this.Si=!0,i.add(e),t.requestAnimationFrame((()=>s())))}vF(t){this.Nm.add(t)}OF(){const t=this.Hh.iterator;for(;t.next();)t.value.Nc=!1}xu(){if(this.Sm)return;const t=this.N;this.RS=t.skipsUndoManager,this.vS=t.fe,t.skipsUndoManager=!0,t.fe=!0,this.Sm=!0}bu(){const t=this.N;t.skipsUndoManager=this.RS,t.fe=this.vS,this.Sm=!1}stopAnimation(t){const e=this.on;if(!0===this.pi&&(this.pi=!1,this.Sc=!1,this.zn.clear(),e.IF()&&this.N.requestUpdate()),!this.Si)return e.ce.clear(),void e.nx(this.N);if(e.ku(!0),e.nx(null),!0===t){const t=this.Hh.toArray();for(let e=0;e<t.length;e++)t[e].ku(!0)}}ku(t){this.Hh.delete(t),0===this.Hh.count&&(this.Si=!1,this.N.requestUpdate()),t===this.defaultAnimation&&this.N.D("AnimationFinished",this)}Cc(t,e){this.pi&&(!this.zn.has("Expand Tree")&&!this.zn.has("Expand SubGraph")||(this.on.Cc(t,e),this.pL(t)))}Lc(t,e){this.pi&&(!this.zn.has("Collapse Tree")&&!this.zn.has("Collapse SubGraph")||(this.on.Lc(t,e),this.on.BS(e,"position",e.position,e.position),this.pL(t)))}yL(t,e){!this.pi||t.equals(e)||this.ES()||(this.N.Bh||(t=e.copy()),this.on.BS(this.N,"position",t,e))}wL(t,e){this.pi&&(this.ES()||this.on.add(this.N,"scale",t,e))}VS(t,e){t.Se&&(t.br=e,this.Cm.add(t))}pL(t){const e=t.findLinksConnected();for(;e.next();){const t=e.value;t.Se&&(t.br=t.points.copy(),this.Cm.add(t))}}get isEnabled(){return this.Oi}set isEnabled(t){e.s(t,"boolean",ht,"isEnabled"),this.Oi=t,t&&this.Hh.each((t=>{!t.isAnimating&&t.runCount===1/0&&t.start()}))}get duration(){return this.So}set duration(t){e.s(t,"number",ht,"duration"),t<1&&e.W(t,">= 1",ht,"duration"),this.So=t}get isAnimating(){return this.Si}get isTicking(){return this.Sm}get isInitial(){return this.wr}set isInitial(t){e.s(t,"boolean",ht,"isInitial"),this.wr=t}get defaultAnimation(){return this.on}get activeAnimations(){return this.Hh}get initialAnimationStyle(){return this.Mc}set initialAnimationStyle(t){this.Mc=t}static hx=new m;static defineAnimationEffect(t,e){ht.hx.set(t,e)}static zS(t,e,i,n,s){null===t&&(t=[0,0,0,0]),null===e&&(e=[0,0,0,0]);let r=t[0],o=t[1];const a=t[2],l=t[3];let h=e[0],u=e[1];const c=e[2],d=e[3];0===a||100===a?(r=h,o=u):(0===c||100===c)&&(h=r,u=o),Math.abs(h-r)>180&&(h>r?r+=360:h+=360);return"hsla("+s(i,r,h-r,n)%360+", "+s(i,o,u-o,n)+"%, "+s(i,a,c-a,n)+"%, "+s(i,l,d-l,n)+")"}static{const t=ht.hx,e=(t,e,i,n,s,r)=>{t.position=new y(n(s,e.x,i.x-e.x,r),n(s,e.y,i.y-e.y,r))};t.set("position:diagram",e),t.set("position",e),t.set("position:part",((t,e,i,n,s,r)=>{s<r?t.bc(n(s,e.x,i.x-e.x,r),n(s,e.y,i.y-e.y,r),!1):t.position=new y(n(s,e.x,i.x-e.x,r),n(s,e.y,i.y-e.y,r))})),t.set("location",((t,e,i,n,s,r)=>{s<r?t.bc(n(s,e.x,i.x-e.x,r),n(s,e.y,i.y-e.y,r),!0):t.location=new y(n(s,e.x,i.x-e.x,r),n(s,e.y,i.y-e.y,r))})),t.set("position:placeholder",((t,e,i,n,s,r)=>{s<r?t.bc(n(s,e.x,i.x-e.x,r),n(s,e.y,i.y-e.y,r),!1):t.position=new y(n(s,e.x,i.x-e.x,r),n(s,e.y,i.y-e.y,r))})),t.set("position:nodeCollapse",((t,e,i,n,s,r)=>{const o=t.actualBounds,a=i.actualBounds,l=a.x+a.width/2-o.width/2,h=a.y+a.height/2-o.height/2;s<r?t.bc(n(s,e.x,l-e.x,r),n(s,e.y,h-e.y,r),!1):t.position=new y(n(s,e.x,l-e.x,r),n(s,e.y,h-e.y,r))})),t.set("desiredSize",((t,e,i,n,s,r)=>{t.desiredSize=new v(n(s,e.width,i.width-e.width,r),n(s,e.height,i.height-e.height,r))})),t.set("width",((t,e,i,n,s,r)=>{t.width=n(s,e,i-e,r)})),t.set("height",((t,e,i,n,s,r)=>{t.height=n(s,e,i-e,r)})),t.set("fill",((t,e,i,n,s,r)=>{t.fill=ht.zS(e,i,s,r,n)})),t.set("stroke",((t,e,i,n,s,r)=>{t.stroke=ht.zS(e,i,s,r,n)})),t.set("strokeWidth",((t,e,i,n,s,r)=>{t.strokeWidth=n(s,e,i-e,r)})),t.set("strokeDashOffset",((t,e,i,n,s,r)=>{t.strokeDashOffset=n(s,e,i-e,r)})),t.set("background",((t,e,i,n,s,r)=>{t.background=ht.zS(e,i,s,r,n)})),t.set("opacity",((t,e,i,n,s,r)=>{t.opacity=n(s,e,i-e,r)})),t.set("scale",((t,e,i,n,s,r)=>{t.scale=n(s,e,i-e,r)})),t.set("angle",((t,e,i,n,s,r)=>{t.angle=n(s,e,i-e,r)}))}static Default=1;static AnimateLocations=2;static None=3}class ut{ax;Lm;Si;Pu;So;ms;xL;Ac;ce;cx;ei;Xn;Su;Tc;fx;ux;Nc;XS;gx;ds;N;YS;KS;GS;constructor(t){this.N=null,this.ds=null,this.XS=null,this.gx=null,this.YS=!1,this.Si=!1,this.Nc=!1,this.ei=0,this.Xn=0,this.ax=ut.EaseInOutQuad,this.Lm=ut.EaseInOutQuad,this.Su=!1,this.Tc=!1,this.fx=1,this.ux=0,this.So=NaN,this.ms=NaN,this.KS=0,this.Pu=null,this.xL=y.xo,this.ce=new m,this.cx=new m,this.Ac=new u,this.GS=1,t&&Object.assign(this,t)}suspend(){this.Nc=!0}advanceTo(t,e){e&&(this.Nc=!1),this.Su&&t>=this.ms&&(this.Tc=!0,t-=this.ms),this.KS=t,this.mL(!0),this.ds.xu(),this.N.ur(),this.ds.bu(),this.N.redraw()}nx(t){if(this.cx.clear(),this.Tc=!1,this.ux=0,this.ms=NaN,this.Ac.count>0&&this.Ac.clear(),null!==t){const e=t.links;for(;e.next();)e.value.br=null}}IF(){return this.ce.count>0}start(){if(0===this.ce.count)return this;if(this.Si)return this;let t=this.N;const e=this.ce.iterator;for(;e.next();){const i=e.key;null===t&&(i instanceof xt?t=i:i instanceof Dt&&(t=i.diagram))}if(null===t)return this;this.N=t,this.ds=t.animationManager;const i=this.ds;return!1===i.isEnabled||(this.ms=isNaN(this.So)?i.duration:this.So,this.Lm=this.ax,i.Sc&&1===i.Mc&&this===i.defaultAnimation&&(this.Lm=ut.EaseOutExpo,this.ms=isNaN(this.So)?600===i.duration?900:i.duration:this.So),this.GS=t.scrollMode,this.isViewportUnconstrained&&(t.jh=2),i.xu(),this.Ac.each((e=>{e.data=null,t.add(e)})),i.bu(),this.Si=!0,this.ei=+new Date,this.Xn=this.ei+this.ms,i.FF(this)),this}addTemporaryPart(t,e){return t.ke()?(this.Ac.add(t),this.N=e,this):this}add(t,e,i,n,s){if(null===this.N&&(t instanceof xt?this.N=t:t instanceof Dt&&null!==t.diagram&&(this.N=t.diagram)),t instanceof ce){if(!t.isAnimated)return this;"position"===e&&(e="position:part")}return this.BS(t,e,i,n,s),this}BS(t,e,i,n,s){const r=this.ce;let o,a,l;if(t instanceof xt&&"position"===e&&(e="position:diagram"),("fill"===e||"stroke"===e||"background"===e)&&(Ht.No(i),Ht.HS(),i=[Ht.Ii.n0,Ht.Ii.n1,Ht.Ii.n2,Ht.Ii.n3],Ht.No(n),Ht.HS(),n=[Ht.Ii.n0,Ht.Ii.n1,Ht.Ii.n2,Ht.Ii.n3]),r.has(t))o=r.get(t),a=o.ei,l=o.gs,void 0===a[e]&&(a[e]=this.Mu(i)),l[e]=this.Mu(n);else{if("position"===e&&i.equalsApprox(n))return;a={},l={},a[e]=this.Mu(i),l[e]=this.Mu(n),o=new ct(a,l,s),r.set(t,o)}const h=a[e];h instanceof y&&!h.isReal()&&h.a(this.xL),s&&0===e.indexOf("position:")&&t instanceof ce?o.mx.location=this.Mu(t.location):s&&(o.mx[e]=this.Mu(i))}Mu(t){return t instanceof y||t instanceof v?t.copy():t}EF(t){const e=this.ce;if(e.has(t)){e.get(t).yx=!0}}lx(t){if(!this.Si)return!1;const e=this.ce.get(t);return null!==e&&e.yx}US(t){if(!this.Si)return!1;const e=this.ce.get(t);return null!==e&&!!(e.ei.position||e.ei["position:part"]||e.ei.location)}RF(){if(this.Ac.count>0)return!0;const t=this.ce.iterator;for(;t.next();){const e=t.key;if(e instanceof Dt&&null!==e.diagram||e instanceof xt)return!0}return!1}mL(t){if(this.Nc&&!t)return;const e=this.ds;if(!1===this.Si)return;const i=+new Date;let n=i>this.Xn?this.ms:i-this.ei;t&&(n=this.KS,n<this.ms?(this.ei=+new Date-n,this.Xn=this.ei+this.ms):n=this.ms),e.xu(),this.dL(n),this.N.ur(!0),e.bu(),i>this.Xn&&(this.Su&&!this.Tc?(this.ei=+new Date,this.Xn=this.ei+this.ms,this.Tc=!0):this.ku(!1))}dL(t){const e=this.ms,i=this.ce.iterator,n=this.Tc;for(;i.next();){const s=i.key;if(s instanceof Dt&&null===s.diagram)continue;const r=i.value,o=n?r.gs:r.ei,a=n?r.ei:r.gs,l=ht.hx;for(const i in a)"position"===i&&(a["position:placeholder"]||a["position:nodeCollapse"])||null!==l.get(i)&&l.get(i)(s,o[i],a[i],this.Lm,t,e,this)}}stop(){return this.Si?(this.ku(!0),this):this}ku(t){if(null!==this.gx&&this.gx.UF(this.XS),!this.Si)return;const e=this.N,i=this.ds;i.Sc=!1,this.Si=!1,this.Nc=!1,i.xu();const n=this.ce,s=this.Ac.iterator;for(;s.next();)e.remove(s.value);const r=this.Su,o=n.iterator,a=ht.hx;for(;o.next();){const t=o.key,e=o.value,i=r?e.gs:e.ei,n=r?e.ei:e.gs,s=e.mx;for(const r in n)if(null!==a.get(r)){let o=r;e.wx&&("position:nodeCollapse"===o||"position:placeholder"===o)&&(o="position"),a.get(o)(t,i[r],void 0!==s[r]?s[r]:e.wx?i[r]:n[r],this.Lm,this.ms,this.ms,this)}e.wx&&void 0!==s.location&&t instanceof ce&&(t.location=s.location),e.yx&&t instanceof ce&&t.Ei(!1)}this.ux++;const l=!t&&this.fx>this.ux;if(!l&&(this===i.Mm||this===i.defaultAnimation)&&this.ce.clear(),e.xx.clear(),e.CP(!1),e.invalidateDocumentBounds(),e.S(),e.ur(!0),i.defaultAnimation===this){const t=i.Cm.iterator;for(;t.next();)t.value.BF();i.Cm.clear()}if(e.ur(!0),this.isViewportUnconstrained&&(e.scrollMode=this.GS),i.bu(),l)return this.Tc=!1,void this.start();this.nx(null),e.bL(),i.ku(this),this.Pu&&this.Pu(this),e.requestUpdate()}Cc(t,e){const i=e.actualBounds;let n=null;if(e instanceof Ae&&(n=e.placeholder),null!==n&&n.visible){const e=n.getDocumentPoint(w.TopLeft),i=n.padding;e.x+=i.left,e.y+=i.top,this.add(t,"position",e,t.position,!1)}else this.add(t,"position",new y(i.x+i.width/2,i.y+i.height/2),t.position,!1);this.add(t,"scale",.01,t.scale,!1),t instanceof Ae&&this.VF(t,e)}VF(t,e){const i=t.memberParts;for(;i.next();){const t=i.value;t instanceof ge&&this.Cc(t,e)}}Lc(t,e){if(!t.isVisible())return;let i=null;if(e instanceof Ae&&(i=e.placeholder),null!==i&&i.visible){const e=i.getDocumentPoint(w.TopLeft),n=i.padding;e.x+=n.left,e.y+=n.top,this.add(t,"position:placeholder",t.position,e,!0)}else this.add(t,"position:nodeCollapse",t.position,e,!0);this.add(t,"scale",t.scale,.01,!0),this.EF(t),t instanceof Ae&&this.zF(t,e)}zF(t,e){const i=t.memberParts;for(;i.next();){const t=i.value;t instanceof ge&&this.Lc(t,e)}}get duration(){return this.So}set duration(t){e.s(t,"number",ut,"duration"),t<1&&e.W(t,">= 1",ut,"duration"),this.So=t}get reversible(){return this.Su}set reversible(t){this.Su=t}get runCount(){return this.fx}set runCount(t){t>0?this.fx=t:e.o("Animation.runCount value must be a positive integer.")}get finished(){return this.Pu}set finished(t){this.Pu!==t&&(null!==t&&e.k(t,ut,"finished"),this.Pu=t)}get easing(){return this.ax}set easing(t){this.ax=t}get isViewportUnconstrained(){return this.YS}set isViewportUnconstrained(t){this.YS=t}get isAnimating(){return this.Si}getTemporaryState(t){let e=this.cx.get(t);return null===e&&(e={},this.cx.set(t,e)),e}static EaseLinear=(t,e,i,n)=>i*t/n+e;static EaseInOutQuad=(t,e,i,n)=>(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e;static EaseInQuad=(t,e,i,n)=>i*(t/=n)*t+e;static EaseOutQuad=(t,e,i,n)=>-i*(t/=n)*(t-2)+e;static EaseInExpo=(t,e,i,n)=>0===t?e:i*Math.pow(2,10*(t/n-1))+e;static EaseOutExpo=(t,e,i,n)=>t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e}class ct{ei;gs;mx;wx;yx;constructor(t,e,i){this.ei=t,this.gs=e,this.mx={},this.wx=i,this.yx=!1}}var dt=(t=>(t[t.Default=1]="Default",t[t.Immediate=2]="Immediate",t[t.Bundled=3]="Bundled",t))(dt||{});class ft{be;en;Nu;Dc;constructor(t,e,i){this.be=null,this.en=t,this.Nu=i||1,this.Dc=null,void 0!==e&&(this.Dc=e,void 0===i&&(this.Nu=2))}copy(){const t=new ft(this.en);t.Nu=this.Nu;const e=this.Dc;if(null!==e){const i={};void 0!==e.duration&&(i.duration=e.duration),void 0!==e.finished&&(i.finished=e.finished),void 0!==e.easing&&(i.easing=e.easing),t.Dc=i}return t}get propertyName(){return this.en}set propertyName(t){this.en=t}get animationSettings(){return this.Dc}set animationSettings(t){this.Dc=t}XF(t){const e=this.Dc;null!==e&&(e.duration&&(t.duration=e.duration),e.finished&&(t.finished=e.finished),e.easing&&(t.easing=e.easing))}get startCondition(){return this.Nu}set startCondition(t){this.Nu=t}static Default=1;static Immediate=2;static Bundled=3}class pt{N;Pt;$t;kr;Fl;Rl;vl;Ol;Il;El;Ul;Bl;Vl;zl;Xl;Yl;kc;Kl;bx;Am;Cu;Ct;constructor(t){u.Gi(this),this.N=null,this.Ct=new l,this.Pt="",this.$t=1,this.kr=!1,this.Fl=!0,this.Rl=!0,this.vl=!0,this.Ol=!0,this.Il=!0,this.El=!0,this.Ul=!0,this.Bl=!0,this.Vl=!0,this.zl=!0,this.Xl=!0,this.Yl=!0,this.kc=!0,this.Kl=!0,this.bx=!0,this.Am=!1,this.Cu=[],t&&Object.assign(this,t)}YF(){const t=this.Ct;for(let e=0;e<t.length;e++)t.r[e].jS(null);t.clear(),this.Cu.length=0}Mo(t){this.N=t}toString(t){void 0===t&&(t=0);const i='Layer "'+this.name+'"';if(t<=0)return i;let n=0,s=0,r=0,o=0,a=0;const l=this.Ct.iterator;for(;l.next();){const t=l.value;t instanceof Ae?r++:t instanceof ge?s++:t instanceof be?o++:t instanceof fe?a++:n++}let h="";if(n>0&&(h+=n+" Parts "),s>0&&(h+=s+" Nodes "),r>0&&(h+=r+" Groups "),o>0&&(h+=o+" Links "),a>0&&(h+=a+" Adornments "),t>1){const t=this.Ct.iterator;for(;t.next();){const i=t.value;h+="\n    "+i.toString();const n=i.data;null!==n&&u.as(n)&&(h+=" #"+u.as(n)),i instanceof ge?h+=" "+e.toString(n):i instanceof be&&(h+=" "+e.toString(i.fromNode)+" "+e.toString(i.toNode))}}return i+" "+this.Ct.count+": "+h}findObjectAt(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),!1===this.Kl)return null;let n=!1;null!==this.diagram&&this.diagram.viewportBounds.containsPoint(t)&&(n=!0);const s=y.l(),r=this.Ct.r;for(let o=r.length;o--;){const a=r[o];if(!0===n&&!1===a.Ml()||!a.isVisible())continue;s.a(t),s.Oe(a.Us);let l=a.kL(s,e,i);if(null!==l&&(null!==e&&(l=e(l)),null!==l&&(null===i||i(l))))return y.e(s),l}return y.e(s),null}findObjectsAt(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i=null),!(n instanceof l)&&!(n instanceof u)&&(n=new u),!1===this.Kl)return n;let s=!1;null!==this.diagram&&this.diagram.viewportBounds.containsPoint(t)&&(s=!0);const r=y.l(),o=this.Ct.r;for(let a=o.length;a--;){const l=o[a];if(!0===s&&!1===l.Ml()||!l.isVisible())continue;r.a(t),r.Oe(l.Us);let h=l;l.PL(r,e,i,n)&&(null!==e&&(h=e(h)),null!==h&&(null===i||i(h))&&n.add(h))}return y.e(r),n}findObjectsIn(t,e,i,n,s){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),!(s instanceof l)&&!(s instanceof u)&&(s=new u),!1===this.Kl)return s;let r=!1;null!==this.diagram&&this.diagram.viewportBounds.containsRect(t)&&(r=!0);const o=this.Ct.r;for(let a=o.length;a--;){const l=o[a];if(!0===r&&!1===l.Ml()||!l.isVisible())continue;let h=l;l.Tm(t,e,i,n,s)&&(null!==e&&(h=e(h)),null!==h&&(null===i||i(h))&&s.add(h))}return s}OP(t,e,i,n,s,r,o){if(!1===this.Kl)return s;const a=this.Ct.r;for(let l=a.length;l--;){const h=a[l];if(!0===o&&!1===h.Ml()||!r(h)||!h.isVisible())continue;let u=h;h.Tm(t,e,i,n,s)&&(null!==e&&(u=e(u)),null!==u&&(null===i||i(u))&&s.add(u))}return s}findObjectsNear(t,e,i,n,s,r){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=!0),!1!==s&&!0!==s&&((s instanceof l||s instanceof u)&&(r=s),s=!0),!(r instanceof l)&&!(r instanceof u)&&(r=new u),!1===this.Kl)return r;let o=!1;null!==this.diagram&&this.diagram.viewportBounds.containsPoint(t)&&(o=!0);const a=y.l(),h=y.l(),c=this.Ct.r;for(let l=c.length;l--;){const u=c[l];if(!0===o&&!1===u.Ml()||!u.isVisible())continue;a.a(t),a.Oe(u.Us),h.i(t.x+e,t.y),h.Oe(u.Us);let d=u;u.SL(a,h,i,n,s,r)&&(null!==i&&(d=i(d)),null!==d&&(null===n||n(d))&&r.add(d))}return y.e(a),y.e(h),r}qS(){return this.Ct.r}ps(t,i){if(!this.visible)return;const n=this.Ct.r,s=n.length;if(0===s)return;const r=e.et(),o=e.et();for(let t=0;t<s;t++){const e=n[t];if(e.WS=t,e instanceof be){if(!1===e.Se)continue}else if(e instanceof fe&&null!==e.adornedPart)continue;const s=e.actualBounds;e.isVisible()&&s.intersectsRectPlus(i,10)?(e.ps(!0),r.push(e)):(e.ps(!1),null!==e.adornments&&e.adornments.count>0&&o.push(e))}for(let t=0;t<r.length;t++){const e=r[t];e.JS();const i=e.adornments;for(;i.next();){const t=i.value;t.ht(1/0,1/0),t.Bt(),t.ps(!0)}}for(let t=0;t<o.length;t++)o[t].JS();e.J(r),e.J(o)}Lu(t){let e=1;return 1!==this.$t&&(e=t.globalAlpha,t.globalAlpha=e*this.$t),e}ML(t,e){for(let i=0;i<e;i++)t[i].Au()}Ui(t,e,i){if(!this.visible||0===this.$t||(void 0===i&&(i=!0),!i&&this.isTemporary))return;const n=this.Ct.r,s=n.length;if(0===s)return;t.kr&&this.ML(n,s);const r=this.Lu(t),o=this.Cu;o.length=0;const a=e.scale,l=x.l();for(let i=0;i<s;i++){const s=n[i];this.Dm(t,s,e,o,a,l,!0)}x.e(l),t.kr&&this.ML(n,s),t.globalAlpha=r}CE(t,e,i){if(!this.visible||0===this.$t)return;const n=this.Ct.r,s=n.length;if(0===s)return;const r=this.Lu(t),o=this.Cu;o.length=0;const a=e.scale,l=x.l();for(let r=0;r<s;r++){const s=n[r];i.has(s)||this.Dm(t,s,e,o,a,l,!0)}x.e(l),t.globalAlpha=r}KF(t,e,i,n){if(!this.visible||0===this.$t||!n&&this.isTemporary)return;const s=this.Ct.r,r=s.length;if(0===r)return;const o=this.Lu(t),a=this.Cu;a.length=0;const l=e.scale,h=x.l();for(let n=0;n<r;n++){const r=s[n];i.has(r)&&this.Dm(t,r,e,a,l,h,!1)}x.e(h),t.globalAlpha=o}GF(t,e,i,n,s){if(!this.visible||0===this.opacity)return;const r=this.diagram.grid.part;if(!n&&this.isTemporary){if(s&&r.layer===this){const e=this.Lu(t);r.Ui(t,i),t.globalAlpha=e}}else{const e=this.Lu(t),n=i.scale,o=x.l(),a=this.Ct.r,l=a.length;for(let e=0;e<l;e++){const l=a[e];!s&&l===r||this.Dm(t,l,i,null,n,o,!1)}x.e(o),t.globalAlpha=e}}LE(t,e,i){if(!this.visible||0===this.$t)return;const n=this.Lu(t),s=this.Cu;s.length=0;const r=e.scale,o=x.l(),a=this.Ct.r,l=a.length,h=i.length;for(let n=0;n<l;n++){const l=a[n],u=l.qh(l.actualBounds);this.HF(u,i,h,r)&&this.Dm(t,l,e,s,r,o,!0)}x.e(o),t.globalAlpha=n}Dm(t,e,i,n,s,r,o){if(o&&!e.Ml())return void t.removePartFromView(e);if(null!==n&&e instanceof be&&(e.isOrthogonal&&n.push(e),!1===e.Se))return void t.removePartFromView(e);let a=!1,l=e.containingGroup;for(;null!==l;)a?null!==l.si&&r.intersectRect(l.si):null!==l.si&&(a=!0,r.a(l.si)),l=l.containingGroup;const h=e.actualBounds;let u=!1;if(a&&e.isVisible()){if(!r.intersectsRect(h))return void t.removePartFromView(e);u=!r.containsRect(h)}u&&(t.save(),t instanceof Ft?t.partClipRect=r.copy():(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.clip())),h.width*s>i.Fm||h.height*s>i.Fm?e.Ui(t,i):this.jF(t,e,i),u&&(t.restore(),t.clearContextCache(!0))}jF(t,e,i){if(t instanceof Ft)return void e.Ui(t,i);const n=e.actualBounds,s=e.naturalBounds;if(0===n.width||0===n.height||isNaN(n.x)||isNaN(n.y)||!e.isVisible())return;const r=e.T;if(null===e.background)return e.rn(t,"rgba(0,0,0,0.3)",!0,!1,s,n),void t.fillRect(n.x,n.y,n.width,n.height);if(t.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),e.rn(t,e.background,!0,!1,s,n),t.fillRect(0,0,s.width/2,s.height/2),!r.Yk()){const e=1/(r.m11*r.m22-r.m12*r.m21);t.transform(r.m22*e,-r.m12*e,-r.m21*e,r.m11*e,e*(r.m21*r.dy-r.m22*r.dx),e*(r.m12*r.dx-r.m11*r.dy))}}HF(t,e,i,n){const s=2/n,r=4/n;for(let n=0;n<i;n++){const i=e[n];if(0!==i.width&&0!==i.height&&t.intersects(i.x-s,i.y-s,i.width+r,i.height+r))return!0}return!1}t(t,e,i,n,s){const r=this.diagram;null!==r&&r.raiseChangedEvent(2,t,this,e,i,n,s)}Wh(t,e,i){const n=this.Ct;if(e.jS(this),t>=n.count)t=n.count;else if(n.elt(t)===e)return-1;n.insertAt(t,e),e.Rm(i);const s=this.diagram;return null!==s&&(i?s.S():s.Wh(e)),this.kx(t,e),t}te(t,e,i){if(!i&&e.layer!==this&&null!==e.layer)return e.layer.te(t,e,i);const n=this.Ct;if(t<0||t>=n.length){if((t=n.indexOf(e))<0)return-1}else if(n.elt(t)!==e&&(t=n.indexOf(e))<0)return-1;e.vm(i),n.removeAt(t);const s=this.diagram;return null!==s&&(i?s.S():s.te(e)),e.jS(null),t}kx(t,e){t=this.qF(t,e),e instanceof Ae&&this.WF(t,e),null!==e.svg&&e.svg.remove()}qF(t,e){const i=e.zOrder;if(isNaN(i))return t;const n=this.Ct,s=n.count;if(s<=1)return t;if(t<0&&(t=n.indexOf(e)),t<0)return-1;let r=t-1,o=NaN;for(;r>=0&&(o=n.elt(r).zOrder,isNaN(o));)r--;let a=t+1,l=NaN;for(;a<s&&(l=n.elt(a).zOrder,isNaN(l));)a++;if(!isNaN(o)&&o>i)for(;;){if(-1===r||o<=i)return r++,r===t?t:(n.removeAt(t),n.insertAt(r,e),r);for(o=NaN;--r>=0&&(o=n.elt(r).zOrder,isNaN(o)););}else if(!isNaN(l)&&l<i)for(;;){if(a===s||l>=i)return a--,a===t?t:(n.removeAt(t),n.insertAt(a,e),a);for(l=NaN;++a<s&&(l=n.elt(a).zOrder,isNaN(l)););}return t}WF(t,e){if(null===e||!isNaN(e.zOrder))return;this.JF(t,e);const i=e.containingGroup;null!==i&&this.kx(-1,i)}JF(t,e){if(0===e.memberParts.count)return;let i=-1;const n=this.Ct.r,s=n.length;for(let r=0;r<s;r++){const s=n[r];if(s===e&&(t=r,i>=0)||i<0&&s.containingGroup===e&&(i=r,t>=0))break}if(!(i<0)&&i<t){const n=this.Ct;n.removeAt(t),n.insertAt(i,e)}}get parts(){return this.Ct.iterator}get partsBackwards(){return this.Ct.iteratorBackwards}get diagram(){return this.N}get name(){return this.Pt}set name(t){e.s(t,"string",pt,"name");const i=this.Pt;if(i!==t){const n=this.diagram;if(null!==n){""===i&&e.o("Cannot rename default Layer to: "+t);const s=n.layers;for(;s.next();)s.value.name===t&&e.o("Layer.name is already present in this diagram: "+t)}this.Pt=t,this.t("name",i,t);const s=this.Ct.iterator;for(;s.next();){s.value.layerName=this.Pt}}}get opacity(){return this.$t}set opacity(t){const i=this.$t;if(i!==t){e.s(t,"number",pt,"opacity"),(t<0||t>1)&&e.W(t,"0 <= value <= 1",pt,"opacity"),this.$t=t;const n=this.diagram;null!==n&&n.S(),this.t("opacity",i,t)}}get isViewportAligned(){return this.Am}set isViewportAligned(t){const e=this.Am;e!==t&&(this.Am=t,this.diagram&&(this.NL(),this.diagram.S()),this.t("isViewportAligned",e,t),t&&(this.isInDocumentBounds=!1))}NL(){if(!this.Am)return;const t=this.diagram,e=this.Ct.r,i=e.length,n=t.xt,s=t.bt;for(let r=0;r<i;r++){const i=e[r],o=i.naturalBounds.width,a=i.naturalBounds.height;let l=i.alignment;(l.isDefault()||!l.isSpot())&&(l=w.BottomRight);let h=i.alignmentFocus;h.isDefault()&&(h=new w(l.x,l.y));const u=l.x*n+l.offsetX-(h.x*o+h.offsetX),c=l.y*s+l.offsetY-(h.y*a+h.offsetY),d=y.V(u,c);t.$F(d),i.bc(d.x,d.y,!0),y.e(d),i.tt=1/t.scale}}get isTemporary(){return this.kr}set isTemporary(t){const i=this.kr;i!==t&&(e.s(t,"boolean",pt,"isTemporary"),this.kr=t,this.t("isTemporary",i,t))}get visible(){return this.kc}set visible(t){const i=this.kc;if(i!==t){e.s(t,"boolean",pt,"visible"),this.kc=t;const n=this.Ct.iterator;for(;n.next();)n.value.Ei(t);const s=this.diagram;null!==s&&s.S(),this.t("visible",i,t)}}get pickable(){return this.Kl}set pickable(t){const i=this.Kl;i!==t&&(e.s(t,"boolean",pt,"pickable"),this.Kl=t,this.t("pickable",i,t))}get isInDocumentBounds(){return this.bx}set isInDocumentBounds(t){const e=this.bx;e!==t&&(this.bx=t,null!==this.diagram&&this.diagram.invalidateDocumentBounds(),this.t("isInDocumentBounds",e,t))}get allowCopy(){return this.Fl}set allowCopy(t){const i=this.Fl;i!==t&&(e.s(t,"boolean",pt,"allowCopy"),this.Fl=t,this.t("allowCopy",i,t))}get allowDelete(){return this.Rl}set allowDelete(t){const i=this.Rl;i!==t&&(e.s(t,"boolean",pt,"allowDelete"),this.Rl=t,this.t("allowDelete",i,t))}get allowTextEdit(){return this.vl}set allowTextEdit(t){const i=this.vl;i!==t&&(e.s(t,"boolean",pt,"allowTextEdit"),this.vl=t,this.t("allowTextEdit",i,t))}get allowGroup(){return this.Ol}set allowGroup(t){const i=this.Ol;i!==t&&(e.s(t,"boolean",pt,"allowGroup"),this.Ol=t,this.t("allowGroup",i,t))}get allowUngroup(){return this.Il}set allowUngroup(t){const i=this.Il;i!==t&&(e.s(t,"boolean",pt,"allowUngroup"),this.Il=t,this.t("allowUngroup",i,t))}get allowLink(){return this.El}set allowLink(t){const i=this.El;i!==t&&(e.s(t,"boolean",pt,"allowLink"),this.El=t,this.t("allowLink",i,t))}get allowRelink(){return this.Ul}set allowRelink(t){const i=this.Ul;i!==t&&(e.s(t,"boolean",pt,"allowRelink"),this.Ul=t,this.t("allowRelink",i,t))}get allowMove(){return this.Bl}set allowMove(t){const i=this.Bl;i!==t&&(e.s(t,"boolean",pt,"allowMove"),this.Bl=t,this.t("allowMove",i,t))}get allowReshape(){return this.Vl}set allowReshape(t){const i=this.Vl;i!==t&&(e.s(t,"boolean",pt,"allowReshape"),this.Vl=t,this.t("allowReshape",i,t))}get allowResize(){return this.zl}set allowResize(t){const i=this.zl;i!==t&&(e.s(t,"boolean",pt,"allowResize"),this.zl=t,this.t("allowResize",i,t))}get allowRotate(){return this.Xl}set allowRotate(t){const i=this.Xl;i!==t&&(e.s(t,"boolean",pt,"allowRotate"),this.Xl=t,this.t("allowRotate",i,t))}get allowSelect(){return this.Yl}set allowSelect(t){const i=this.Yl;i!==t&&(e.s(t,"boolean",pt,"allowSelect"),this.Yl=t,this.t("allowSelect",i,t))}}var gt=(t=>(t[t.None=1]="None",t[t.Uniform=2]="Uniform",t[t.UniformToFill=3]="UniformToFill",t))(gt||{}),mt=(t=>(t[t.All=1]="All",t[t.NotDirected=2]="NotDirected",t[t.NotDirectedFast=3]="NotDirectedFast",t[t.NotUndirected=4]="NotUndirected",t[t.DestinationTree=5]="DestinationTree",t[t.SourceTree=6]="SourceTree",t))(mt||{}),yt=(t=>(t[t.Document=1]="Document",t[t.Infinite=2]="Infinite",t))(yt||{}),vt=(t=>(t[t.TreeParent=1]="TreeParent",t[t.AllParents=2]="AllParents",t[t.AnyParents=3]="AnyParents",t))(vt||{});class xt{ds;Wt;$S;Px;Pr;Tu;Sx;Mx;Nx;Cx;Lx;Ax;Jh;jh;Tx;Dx;Fx;Gl;Fc;Sr;Om;Rx;vx;Du;Yn;Mr;$h;Co;Im;Rc;Em;vc;Fu;Nr;Kn;ZS;QS;Ox;Ix;_S;Ex;tM;iM;eM;Ux;Um;Cr;Lr;Ar;Tr;Dr;Fr;Bx;Rr;Vx;vr;Or;Ir;Er;zx;sM;Lo;nM;Xx;Yx;oM;ki;rM;lM;hM;Os;Ao;Oi;Kx;Fl;Rl;Gx;Hx;vl;Ol;Il;jx;El;Ul;Bl;Vl;zl;Xl;Yl;qx;Wx;aM;Ru;vu;Jx;$x;Zx;Qx;Bm;_x;tb;ib;Zt;cM;eb;fM;Ou;ln;Gn;ie;Hn;CL;Hl;uM;dM;Vm;sb;Iu;zm;nb;Ur;jl;Zh;gM;mM;Xm;ob;rb;Ze;Eu;Ym;Uu;ql;Oc;Km;Br;Qh;pM;Gm;jt;T;Ue;xr;Bi;ys;yM;Wl;Vr;xl;zr;_h;Ic;wM;Bu;ta;Vu;Xt;Jl;at;tt;zu;xt;bt;ft;Ec;Uw;lb;ia;Uc;hb;ab;cb;ZF;QF;Vi;kl;Fm;Hm;xM;bM;LL;jm;_F;tR;iR;fb;eR;sR;nR;ea;AL;$l;sa;na;oa;ra;mu;Gh;Qt;St;Bc;eP;sP;gc;$t;static ub=null;static TL=new m;static kM;static PM=null;gu;db;gb;pb;yb;wb;qm;SM;Wm;Jm;$m;ex;MM;NM;Vc;constructor(e,i){if(xt.gw||(xt.Kk(),xt.gw=!0),u.Gi(this),xt.DL(this),this.jt=!0,this.St=null,this.xt=0,this.bt=0,this.ft=null,xt.isUsingDOM()){const e=this,i=()=>{e.Pi(t.document,"DOMContentLoaded",i,!1),e.setRTL()};null!==t.document.body?this.setRTL():e.Ut(t.document,"DOMContentLoaded",i,!1)}this.Ec=null,xt.CM("Model",Ie);const n=this;return this.rM=t=>n.partManager.doModelDataChanged(t),this.lM=t=>n.partManager.doModelChanged(t),this.hb=null,this.ab=null,this.FL(),this.model=He.LM(),this.themeManager=new Ti,this.Lo=!0,this.RL(),this.layout=new Ne,this.Lo=!1,this._F=null,this.tR=null,this.iR=null,this.fb=null,this.eR=null,this.sR=null,this.nR=null,this.ea=null,this.AL=null,this.$l=null,this.sa=null,this.na=null,this.oa=null,this.ra=null,this.mu=()=>{},this.Gh=null,this.Uu=!1,this.Bc=new bt(this),void 0!==e&&("string"==typeof e||t.Element&&e instanceof Element?this.AM(e):i=e),i&&this.setProperties(i),this.jt=!1,this.requestUpdate(),this}mF(){return null!==this.ft}get renderer(){return this.Oc}set renderer(e){if(this instanceof Ct)return;""===e&&(e="default");const i=e.toLowerCase();if(i===this.Oc)return;this.Oc=i;let n=null;"default"===i||"canvas"===i?(n=this.ql.get("svg"),null!==n&&n.Tt.remove(),this.ft&&(this.Qt=this.ft.li),this.Qt.clearContextCache(!0)):"svg"===i?(this.ql.has("svg")?n=this.ql.get("svg"):(n=new Ot(this,t.document),this.addRenderer("svg",n)),null!==this.div&&this.div.appendChild(n.Tt),this.Qt=n.li,this.ft&&(this.ft.li.setTransform(this.Vi,0,0,this.Vi,0,0),this.ft.li.clearRect(0,0,this.xt,this.bt))):"debug"===i&&(this.ql.has("SVG")||(n=new Ot(this,t.document),this.addRenderer("SVG",n),n.Tt.style.backgroundColor="whitesmoke",null!==this.div&&this.div.after(n.Tt))),this.jt||this.redraw()}FL(){this.Vc=new l,this.setupRouters(),this.ds=new ht,this.ds.Mo(this),this.Wt=17,this.$S=!1,this.zu=!1,this.Px="default",this.Xt=new l,this.ql=new m,this.Oc="default",this.resetRenderingHints(),this.oR(),this.$t=1,this.at=new y(NaN,NaN).u(),this.ex=new y(NaN,NaN),this.tt=1,this.Gm=1,this.Sx=new y(NaN,NaN).u(),this.Mx=NaN,this.Nx=1e-4,this.Cx=100,this.T=new k,this.Lx=new y(NaN,NaN).u(),this.Ax=new x(NaN,NaN,NaN,NaN).u(),this.Jh=new b(0,0,0,0).u(),this.jh=1,this.Tx=!1,this.Dx=null,this.Fx=null,this.Gl=1,this.Fc=w.Default,this.Sr=1,this.Om=w.Default,this.Rx=w.None,this.vx=w.None,this.Ue=!0,this.Du=!1,this.Yn=new Set,this.Mr=new u,this.$h=new u,this.Co=!1,this.Jl=new m,this.Bu=!0,this.Im=250,this.Rc=-1,this.Em=new b(16,16,16,16).u(),this.xr=!1,this.vc=!1,this.Fu=!0,this.Km=new L,this.Km.diagram=this,this.Br=new L,this.Br.diagram=this,this.Qh=new L,this.Qh.diagram=this,this.Nr=null,this.Kn=null,this.Uw=!1,this.rR(),this.zr=new u,this.Ox=!0,this.Ix=1,this._S=!1,this.Ex=1,this.Ux="auto",this.Um="auto",this.Cr=null,this.Lr=null,this.Ar=null,this.Tr=null,this.Dr=null,this.Fr=null,this.Bx=null,this.Rr=null,this.Vx=!1,this.vr=null,this.Or=null,this.Ir=null,this.Er=null,this.zx=!1,this.lb={},this.ia=[null,null],this.Lo=!1,this.nM=!1,this.Xx=!1,this.Yx=!1,this.oM=!0,this.ys=!1,this.ta=!1,this.hM=!0,this.Os=-2,this.Wl=new m,this.Vu=new l,this.Ao=!1,this.Oi=!0,this.Kx=!0,this.Fl=!0,this.Rl=!0,this.Gx=!1,this.Hx=!0,this.vl=!0,this.Ol=!0,this.Il=!0,this.jx=!0,this.El=!0,this.Ul=!0,this.Bl=!0,this.Vl=!0,this.zl=!0,this.Xl=!0,this.Yl=!0,this.qx=!0,this.Wx=!0,this.aM=!1,this.Uc=!1,this.Ru=!0,this.vu=!0,this.Jx=!0,this.$x=!0,this.Zx=16,this.Qx=16,this.Bm=!1,this._x=!1,this.tb=0,this.ib=0,this.Zt=new b(5).u(),this.cM=(new u).u(),this.eb=999999999,this.fM=(new u).u(),this._h=!0,this.Ou=!0,this.Ic=!0,this.ln=!1,this.Gn=!1,this.Vr=!0,this.xl=!1,this.Hn=!1,this.CL=new u,this.wM=new u,this.Hl=null,this.uM=new v(8,8),this.dM=999,this.Vm=!1,this.eP=1,this.sP=0,this.Bi={scale:1,position:new y,bounds:new x,canvasSize:new v,newCanvasSize:new v,isScroll:!1},this.Bi.canvasSize=this.Bi.canvasSize,this.Bi.newCanvasSize=this.Bi.newCanvasSize,this.Bi.isScroll=!1,this.sb=new x(NaN,NaN,NaN,NaN).u(),this.Iu=new v(NaN,NaN).u(),this.zm=new x(NaN,NaN,NaN,NaN).u(),this.nb=!1,this.lR(),this.Ze=null,this.Eu=!1,this.gc=null,this.partManager=new Ie,this.toolManager=new z,this.toolManager.initializeStandardTools(),this.defaultTool=this.toolManager,this.currentTool=this.defaultTool,this.gb=null,this.pb=new St,this.yb=null,this.wb=null,this.db=!1,this.gu=!1,this.commandHandler=new Tt,this.Jm=null,this.$m=y.Ik,this.MM=!1,this.Vi=1,this.kl=null,this.Fm=1,this.qm=0,this.SM=[0,0,0,0,0],this.Wm=0,this.Hm=1,this.xM=0,this.bM=new y,this.LL=500,this.Ym=new y,this.jm=!1}static vL=void 0!==t.document;static isUsingDOM(){return xt.vL}static useDOM(e){xt.vL=!!e&&void 0!==t.document}static Qe=new WeakMap;clear(){this.animationManager.stopAnimation(),this.model.clear(),xt.OL(),this.IL(!1),this.Vu.clear(),this.EL(),this.Hl=null,this.invalidateDocumentBounds(),this.ensureBounds(),this.S()}IL(t){this.animationManager.stopAnimation(!0),this.cM=(new u).u(),this.fM=(new u).u();const i=this.skipsUndoManager,n=null!==this.ki&&void 0!==this.ki;n&&(this.skipsUndoManager=!0);let s=null;null!==this.Ze&&(s=this.Ze.part,null!==s&&this.remove(s));const r=[],o=this.Xt.length;if(t){for(let t=0;t<o;t++){const e=this.Xt.r[t].parts;for(;e.next();){const t=e.value;t!==s&&null===t.data&&r.push(t)}}for(let t=0;t<r.length;t++){const e=r[t];this.remove(e)}}for(let t=0;t<o;t++)this.Xt.r[t].YF();return this.partManager.clear(),this.Yn.clear(),this.Mr.clear(),this.$h.clear(),this.Jl.clear(),this.zr.clear(),this.gc=null,this.Vu.clear(),this.EL(),e.vk=[],null!==s&&(this.add(s),this.partManager.parts.delete(s)),n&&(this.skipsUndoManager=i),r}static Zm=null;static xb="";static OL(){xt.Zm=null,xt.xb=""}static AE(){return null}reset(){this.clear(),this.jt=!0,this.FL(),this.themeManager=new Ti,this.Zl(),this.Lo=!0,this.RL(),this.layout=new Ne,this.Lo=!1,this.model=He.LM(),this.model.undoManager=new R,this.Uu=!1,this.jt=!1,this.S()}lR(){this.Ur=new m,this.gM=(new ge).add(new ie({stroke:"black",font:"10pt sans-serif"}).bind("text","",e.toString).theme("stroke","text").theme("font","normal")),this.Ur.set("",this.gM),this.Ur.set("Comment",(new ge).add(new ie({stroke:"brown",font:"10pt sans-serif"}).bind("text","",e.toString).theme("stroke","comment").theme("font","normal"))),this.Ur.set("LinkLabel",new ge({selectable:!1,avoidable:!1}).add(new Jt("Ellipse",{fill:"black",stroke:null,desiredSize:new v(3,3).$()}).theme("fill","link"))),this.Zh=new m,this.yM=new Ae(qt.Vertical,{selectionObjectName:"GROUPPANEL"}).add(new ie({stroke:"black",font:"bold 12pt sans-serif"}).bind("text","",e.toString).theme("stroke","text").theme("font","bold"),new qt(qt.Auto,{name:"GROUPPPANEL"}).add(new Jt({fill:"rgba(128,128,128,0.2)",stroke:"black",strokeWidth:1}).theme("fill","group").theme("stroke","outline").theme("strokeWidth","group"),new Pe({padding:5}).theme("padding","group"))),this.Zh.set("",this.yM),this.jl=new m,this.mM=(new be).add(new Jt({isPanelMain:!0,stroke:"black"}).theme("stroke","link"),new Jt({toArrow:"Standard",fill:"black",stroke:null,strokeWidth:0}).theme("toArrow").theme("fill","link")),this.jl.set("",this.mM),this.jl.set("Comment",(new be).add(new Jt({isPanelMain:!0,stroke:"brown"}).theme("stroke","comment"))),this.Xm=new fe(qt.Auto).add(new Jt({fill:null,stroke:"dodgerblue",strokeWidth:3}).theme("stroke","selection").theme("strokeWidth","selection"),new Pe({margin:1.5}).theme("margin","selection","numbers",null,(t=>t?new b(t/2):1.5))),this.ob=this.Xm,this.rb=new fe(qt.Link).add(new Jt({isPanelMain:!0,fill:null,stroke:"dodgerblue",strokeWidth:3}).theme("stroke","selection").theme("strokeWidth","selection"))}setRTL(i){let n=void 0===i?this.div:i;null===n&&(n=t.document.body);const s=e.hs("div");s.dir="rtl",s.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",s.textContent="A",n.appendChild(s);let r="reverse";s.scrollLeft>0?r="default":(s.scrollLeft=1,0===s.scrollLeft&&(r="negative")),n.removeChild(s),this.Px=r}setScrollWidth(i){let n=void 0===i?this.div:i;null===n&&(n=t.document.body);let s=0;if(xt.isUsingDOM()){let t=xt.PM,i=xt.kM;null===t&&(xt.PM=e.hs("p"),t=xt.PM,t.style.width="100%",t.style.height="200px",t.style.boxSizing="content-box",xt.kM=e.hs("div"),i=xt.kM,i.style.position="absolute",i.style.visibility="hidden",i.style.width="200px",i.style.height="150px",i.style.boxSizing="content-box",i.appendChild(t)),i.style.overflow="hidden",n.appendChild(i);const r=t.offsetWidth;i.style.overflow="scroll";let o=t.offsetWidth;r===o&&(o=i.clientWidth),n.removeChild(i),s=r-o,0===s&&!e.tr&&(s=11)}this.Wt=s,this.$S=!0}oi(t){t in gt?this.autoScale=t:e.er(this,t)}toString(t){void 0===t&&(t=0);let e="";this.div&&this.div.id&&(e=this.div.id);let i='Diagram "'+e+'"';if(t<=0)return i;const n=this.Xt.iterator;for(;n.next();){i+="\n  "+n.value.toString(t-1)}return i}static DL(t){xt.ub=t}static um(){return xt.ub}static fromDiv(e){let i=e;if("string"==typeof e&&(i=t.document.getElementById(e)),i instanceof HTMLDivElement){const t=xt.Qe.get(i);if(t)return t}return null}get div(){return this.St}set div(e){if(this.St!==e){const i=this.St;if(null!==i){if(xt.Qe.delete(i),i.goDiagram=void 0,i.go=void 0,i.innerHTML="",null!==this.ft){const t=this.ft.Tt;this.Pi(t,"pointermove",this.sa,!1),this.Pi(t,"pointerdown",this.$l,!1),this.Pi(t,"pointerup",this.na,!1),this.Pi(t,"pointerout",this.oa,!1),this.Pi(t,"pointercancel",this.ra,!1),this.ft.dispose()}this.Ec&&(this.Ec.disconnect(),this.Ec=null);const e=this.toolManager;null!==e&&(e.mouseDownTools.each((t=>t.cancelWaitAfter())),e.mouseMoveTools.each((t=>t.cancelWaitAfter())),e.mouseUpTools.each((t=>t.cancelWaitAfter()))),e.cancelWaitAfter(),this.currentTool.doCancel(),this.ft=null,this.Pi(t,"resize",this.fb,!1),this.Pi(t,"wheel",this.ea,!0),xt.um()===this&&xt.DL(null)}else null===this.$l&&(this.Hn=!1);if(this.St=null,null!==e){const t=xt.Qe.get(e);t&&(t.div=null),this.AM(e),this.mu(),this.themeManager&&this.themeManager.hR()}else this.themeManager&&this.themeManager.aR()}}setupRouters(){this.Vc.push(new Pi)}AM(i){const n=this;if(!xt.isUsingDOM())return;null==i&&e.o("Diagram setup requires an argument DIV."),null!==n.St&&e.o("Diagram has already completed setup."),"string"==typeof i?n.St=t.document.getElementById(i):i instanceof HTMLDivElement?n.St=i:e.o("No DIV or DIV id supplied: "+i),null===n.St&&e.o("Invalid DIV id; could not get element with id: "+i);const s=xt.Qe.get(n.St);if(s&&s!==this&&e.o("Invalid div id; div already has a Diagram associated with it."),!n.Ec&&t.ResizeObserver){const i=t.ResizeObserver,s=e.Rk((()=>n.requestUpdate()),250,!1);n.Ec=new i((()=>s())),n.Ec.observe(n.St)}"static"===t.getComputedStyle(n.St,null).position&&(n.St.style.position="relative");let r=5;const o="rgba(2"+r+"5, 255, 255, 0)";r--,n.St.style["-webkit-tap-highlight-color"]=o,n.St.innerHTML="",xt.Qe.set(n.St,n),n.St.goDiagram=n,n.St.go=t.go;const a=new Rt(n);void 0!==a.style&&(a.style.position="absolute",a.style.top="0px",a.style.left="0px","rtl"===t.getComputedStyle(n.St,null).getPropertyValue("direction")&&(n.zu=!0),a.style.zIndex="2",a.style.userSelect="none",a.style.MozUserSelect="none",a.style.touchAction="none",a.style.letterSpacing="normal !important",a.style.wordSpacing="normal !important",a.style.lang="unknown"),n.ft=a,n.Qt=a.li;const l=n.Qt;n.Vi=n.computePixelRatio(),n.viewSize.isReal()||(n.xt=n.St.clientWidth||1,n.bt=n.St.clientHeight||1),n.UL(n.xt,n.bt);const h=n;n.St.insertBefore(a.Tt,n.St.firstChild);const u=new Rt(null);if(u.width=1,u.height=1,n.ZF=u,n.QF=u.li,xt.isUsingDOM()){const t=e.hs("div"),i=e.hs("div");t.style.position="absolute",t.style.overflow="auto",t.style.width=n.xt+"px",t.style.height=n.bt+"px",t.style.zIndex="1",i.style.position="absolute",i.style.width="1px",i.style.height="1px",n.St.appendChild(t),t.appendChild(i),t.onscroll=xt.cR,t.addEventListener("pointerdown",xt.fR),t.N=n,t.uR=!0,t.dR=!0,n.hb=t,n.ab=i}n.mu=e.Rk((()=>{n.kl=null,n.S()}),300,!1),n.fb=e.Rk((()=>{n.IS()}),250,!1),n.Gh=t=>(t.preventDefault(),!1),n.ea=t=>{if(!h.isEnabled)return;const e=h.zc(t,!0);e.bubbles=!0;let i=0,n=0;e.delta=0,void 0!==t.deltaX?(0!==t.deltaX&&(i=t.deltaX>0?1:-1),0!==t.deltaY&&(n=t.deltaY>0?1:-1),e.delta=Math.abs(t.deltaX)>Math.abs(t.deltaY)?-i:-n):void 0!==t.wheelDeltaX?(0!==t.wheelDeltaX&&(i=t.wheelDeltaX>0?-1:1),0!==t.wheelDeltaY&&(n=t.wheelDeltaY>0?-1:1),e.delta=Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)?-i:-n):void 0!==t.wheelDelta&&0!==t.wheelDelta&&(e.delta=t.wheelDelta>0?1:-1),h.doMouseWheel(),h.la(e,t)},n.AL=t=>{if(!h.isEnabled)return;n.Uc=!1,h.zc(t,!0);const e=h.currentTool;e.cancelWaitAfter(),e.standardMouseOver()},n.$l=t=>{if(!h.isEnabled)return;n.Uc=!0;const e=h.lb;void 0===e[t.pointerId]&&(e[t.pointerId]=t);const i=h.ia;let s=!1;if(null===i[0]||i[0].pointerId!==t.pointerId&&i[0].pointerType===t.pointerType)if(null!==i[1]&&i[1].pointerId===t.pointerId)i[1]=t,s=!0;else if(null===i[0])i[0]=t;else{if(null!==i[1])return void t.preventDefault();i[1]=t,s=!0}else i[0]=t;const r="touch"===t.pointerType||"pen"===t.pointerType;r&&(h.Uw=!1,h.jm=!0);const o=h.gR(t,t,s),a=h.bM,l=r?25:10;t.timeStamp-h.xM<h.LL&&!(Math.abs(a.x-t.screenX)>l||Math.abs(a.y-t.screenY)>l)?h.Hm++:h.Hm=1,o.clickCount=h.Hm,h.xM=t.timeStamp,h.bM.setTo(t.screenX,t.screenY),h.doMouseDown(),1!==t.button?h.la(o,t):t.preventDefault()},n.sa=t=>{if(!h.isEnabled)return;n.Uc=!0;const e=h.ia;if(null===e[0]||e[0].pointerId!==t.pointerId&&e[0].pointerType===t.pointerType){if(null!==e[1]&&e[1].pointerId===t.pointerId)return void(e[1]=t);if(null!==e[0])return;e[0]=t}else e[0]=t;if(e[0].pointerId!==t.pointerId)return;const i=h.mR(t,t,null!==e[1]);h.doMouseMove(),h.la(i,t)},n.na=e=>{if(!h.isEnabled)return;n.Uc=!0;const i="touch"===e.pointerType||"pen"===e.pointerType,s=h.lb;if(i&&h.Uw)return delete s[e.pointerId],void e.preventDefault();const r=h.ia;if(null===r[0]||r[0].pointerId!==e.pointerId&&r[0].pointerType===e.pointerType)return null!==r[1]&&r[1].pointerId===e.pointerId?void(r[1]=null):void 0;r[0]=null;const o=h.TM(e,!1,!0,!1,!0,!1);let a=t.document.elementFromPoint(e.clientX,e.clientY)||null;null!==a&&void 0!==a.shadowRoot&&null!==a.shadowRoot&&(a=a.shadowRoot.elementFromPoint(e.clientX,e.clientY)),null!==a&&a.N instanceof xt&&a.N!==h&&a.N.Qm(e,o),null===a&&(a=e.target),h.Qm(e,o),o.clickCount=h.Hm,o.targetDiagram=h.bb(e,a),o.targetObject=null,h.doMouseUp(),h.la(o,e),i&&(h.jm=!1)},n.oa=t=>{if(!h.isEnabled)return;n.Uc=!1;const e=h.lb;e[t.pointerId]&&delete e[t.pointerId];const i=h.ia;if(null!==i[0]&&i[0].pointerId===t.pointerId&&(i[0]=null),null!==i[1]&&i[1].pointerId===t.pointerId&&(i[1]=null),"touch"===t.pointerType||"pen"===t.pointerType)return;const s=h.currentTool;s.cancelWaitAfter(),s.standardMouseOver()},n.ra=t=>{const e=h.ia;null!==e[0]&&e[0].pointerId===t.pointerId?(e[0]=null,h.jm=!1):null!==e[1]&&e[1].pointerId===t.pointerId&&(e[1]=null)};const c=l;if(n.cb=c.E[e.Ts("7eba17a4ca3b1a8346")][e.Ts("78a118b7")](c.E,xt.Xu,r,r),l.clearContextCache(!0),n.pR(),"svg"===this.Oc){const t=this.ql.get("svg");this.St&&this.St.appendChild(t.Tt),this.Qt=t.li}}addEventListener(t,e,i,n){t.addEventListener(e,i,{capture:n,passive:!1})}Ut(t,e,i,n){t.addEventListener(e,i,{capture:n,passive:!1})}removeEventListener(t,e,i,n){t.removeEventListener(e,i,{capture:n})}Pi(t,e,i,n){t.removeEventListener(e,i,{capture:n})}pR(){const e=this;let i=this.ft.Tt;i instanceof HTMLCanvasElement||(i=e.div),this.Ut(i,"pointerdown",e.$l,!1),this.Ut(i,"pointermove",e.sa,!1),this.Ut(i,"pointerup",e.na,!1),this.Ut(i,"pointerout",e.oa,!1),this.Ut(i,"pointercancel",e.ra,!1),this.Ut(i,"pointerenter",e.yR,!1),this.Ut(i,"pointerleave",e.wR,!1),this.Ut(i,"wheel",e.ea,!1),this.Ut(i,"keydown",e.xR,!1),this.Ut(i,"keyup",e.bR,!1),this.Ut(i,"blur",e.kR,!1),this.Ut(i,"focus",e.PR,!1),this.Ut(i,"selectstart",(t=>(t.preventDefault(),!1)),!1),this.Ut(i,"contextmenu",(t=>(t.preventDefault(),!1)),!1),this.Ut(t,"resize",e.fb,!1)}Bw(){this.qm>30&&(this.kl=1)}CP(t){null!==this.kl&&(this.kl=null,t&&this.mu(),this.qm=0,this.SM=[0,0,0,0,0],this.Wm=0)}computePixelRatio(){return null!==this.kl?this.kl:t.devicePixelRatio||1}get avgSpf(){return this.qm}doMouseDown(){this.currentTool.doMouseDown()}doMouseMove(){this.currentTool.doMouseMove()}doMouseUp(){this.currentTool.doMouseUp()}doMouseWheel(){this.currentTool.doMouseWheel()}doKeyDown(){this.currentTool.doKeyDown()}doKeyUp(){this.currentTool.doKeyUp()}doFocus(){this.focus()}focus(){if(this.ft)if(this.scrollsPageOnFocus)this.ft.focus();else{const e=t.scrollX,i=t.scrollY;this.ft.focus(),t.scrollTo(e,i)}}PR(t){const e=xt.Qe.get(this);e&&e.D("GainedFocus")}kR(t){const e=xt.Qe.get(this);e&&e.D("LostFocus")}IS(){if(null===this.ft)return;const t=this.St;if(null===t||0===t.clientWidth||0===t.clientHeight)return;this.$S||this.setScrollWidth();const e=this.Gn?this.Wt:0,i=this.ln?this.Wt:0,n=this.Vi;if(this.Vi=this.computePixelRatio(),this.Vi!==n&&(this.Du=!0,this.requestUpdate()),t.clientWidth!==this.xt+e||t.clientHeight!==this.bt+i){this.ha(),this.Ue=!0;const t=this.layout;null!==t&&t.isViewportSized&&1===this.autoScale&&(this.vc=!0,t.invalidateLayout()),this.ys||this.requestUpdate()}}RL(){let t=0,e=new pt;e.name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,this.Xr(e,t++),e=new pt,e.name="ViewportBackground",e.isViewportAligned=!0,e.isTemporary=!0,e.isInDocumentBounds=!1,this.Xr(e,t++),e=new pt,e.name="Background",this.Xr(e,t++),e=new pt,e.name="",this.Xr(e,t++),e=new pt,e.name="Foreground",this.Xr(e,t++),e=new pt,e.name="ViewportForeground",e.isViewportAligned=!0,e.isTemporary=!0,e.isInDocumentBounds=!1,this.Xr(e,t++),e=new pt,e.name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,this.Xr(e,t++),e=new pt,e.name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,this.Xr(e,t++)}BL(){const t=new qt(qt.Grid,{name:"GRID"}).add(new Jt("LineH",{stroke:"lightgray",strokeWidth:.5,interval:1}).theme("stroke","gridMinor"),new Jt("LineV",{stroke:"lightgray",strokeWidth:.5,interval:1}).theme("stroke","gridMinor"),new Jt("LineH",{stroke:"gray",strokeWidth:.5,interval:5}).theme("stroke","gridMajor"),new Jt("LineV",{stroke:"gray",strokeWidth:.5,interval:5}).theme("stroke","gridMajor"),new Jt("LineH",{stroke:"gray",strokeWidth:1,interval:10}).theme("stroke","gridMajor"),new Jt("LineV",{stroke:"gray",strokeWidth:1,interval:10}).theme("stroke","gridMajor")),e=new ce({layerName:"Grid",zOrder:0,isInDocumentBounds:!1,isAnimated:!1,pickable:!1,locationObjectName:"GRID"}).add(t);return this.add(e),this.partManager.parts.delete(e),t.visible=!1,t}static cR(){const t=xt.Qe.get(this.parentElement||this);if(t){if(t._x)return void(t._x=!1);if(!t.isEnabled)return void t.VL();t.diagramScroll(this)}}static fR(t){this.N.isEnabled?(this.N.tb=t.target.scrollTop,this.N.ib=t.target.scrollLeft):this.N.updateScroll()}diagramScroll(t){if(null===this.ft)return;const e=this.hb,i=this.ab;this.Bm=!0;let n=this.documentBounds,s=this.viewportBounds;const r=this.Jh;let o=n.x-r.left,a=n.y-r.top;const l=n.width+r.left+r.right,h=n.height+r.top+r.bottom;let u=n.right+r.right,c=n.bottom+r.bottom,d=s.x,f=s.y;const p=s.width,g=s.height;let m=s.right,v=s.bottom;const x=this.scale;let b,w=t.scrollLeft;if(this.zu)switch(this.Px){case"negative":w=w+t.scrollWidth-t.clientWidth;break;case"reverse":w=t.scrollWidth-w-t.clientWidth}const k=w;if(p<l||g<h)return b=y.V(this.position.x,this.position.y),this.allowHorizontalScroll&&this.ib!==k&&(b.x=k/x+o,this.ib=k),this.allowVerticalScroll&&this.tb!==t.scrollTop&&(b.y=t.scrollTop/x+a,this.tb=t.scrollTop),this.position=b,y.e(b),this.Bm=!1,void(this.Ou=!1);if(b=y.l(),t.uR&&this.allowHorizontalScroll&&(o<d&&(this.position=b.i(k+o,this.position.y)),u>m)){const t=e.scrollWidth-this.xt;this.position=b.i(-t+k-this.xt/x+u,this.position.y)}if(t.dR&&this.allowVerticalScroll&&(a<f&&(this.position=b.i(this.position.x,t.scrollTop+a)),c>v)){const i=e.scrollHeight-this.bt;this.position=b.i(this.position.x,-i+t.scrollTop-this.bt/x+c)}y.e(b),this.Ql(),this.Bm=!1,this.Ou=!1,n=this.documentBounds,s=this.viewportBounds,u=n.right,m=s.right,c=n.bottom,v=s.bottom,o=n.x,d=s.x,a=n.y,f=s.y,p>=l&&o>=d&&u<=m&&(i.style.width="1px"),g>=h&&a>=f&&c<=v&&(i.style.height="1px")}computeBounds(t){return void 0===t&&(t=new x),this.Mi(),this.zL(t)}zL(t){if(this.fixedBounds.isReal())return t.a(this.fixedBounds),t.addMargin(this.Zt),t;let e=!0;const i=this.Xt.r,n=i.length;for(let s=0;s<n;s++){const n=i[s];if(!n.visible||!n.isInDocumentBounds)continue;const r=n.Ct.r,o=r.length;for(let i=0;i<o;i++){const n=r[i];if(!n.isInDocumentBounds||!n.isVisible())continue;const s=n.actualBounds;s.isReal()&&(e?(e=!1,t.a(s)):t.unionRect(s))}}return e&&t.i(0,0,0,0),t.addMargin(this.Zt),t}computePartsBounds(t,e){void 0===e&&(e=!1);let i=null;if(Array.isArray(t))for(let n=0;n<t.length;n++){const s=t[n];!e&&s instanceof be||(s.ensureBounds(),null===i?i=s.actualBounds.copy():i.unionRect(s.actualBounds))}else{const n=t.iterator;for(;n.next();){const t=n.value;!e&&t instanceof be||(t.ensureBounds(),null===i?i=t.actualBounds.copy():i.unionRect(t.actualBounds))}}return null===i?new x(NaN,NaN,0,0):i}Bs(t){if(!t&&!this.Hn||this.jt||null===this.ft||!this.documentBounds.isReal())return;if(this.jt=!0,t){const t=this.initialPosition;if(t.isReal())return this.jt=!1,void(this.position=t);let e=this.initialDocumentSpot,i=this.initialViewportSpot;e.isNoSpot()&&(e=w.TopLeft),i.isNoSpot()&&(i=w.TopLeft);const n=y.l();n.setRectSpot(this.documentBounds,e);const s=this.viewportBounds,r=x.V(0,0,s.width,s.height),o=y.l();o.setRectSpot(r,i),o.i(n.x-o.x,n.y-o.y),this.jt=!1,this.position=o,x.e(r),y.e(o)}let e=this.Gl;t&&1!==this.Sr&&(e=this.Sr);const i=1!==e?this.Yu(e):this.scale,n=this.at.x,s=this.at.y,r=this.xt/i,o=this.bt/i;let a=this.Fc;const l=this.Om;if(t&&!a.isSpot()&&(l.isSpot()||l.isDefault())){const t=this.initialDocumentSpot.isSpot()&&this.initialViewportSpot.isSpot();a=l.isDefault()&&!t?w.Center:l}this.DM(this.documentBounds,r,o,a,t);const h=this.scale;this.scale=i,this.jt=!1;const u=this.viewportBounds;u.equalsApproxTo(n,s,r,o)||this.onViewportBoundsChanged(new x(n,s,r,o),u,h,!1)}Yu(t){const e=this.Gm;if(null===this.ft)return e;if(1===t)return this.scale;this.ensureBounds();const i=this.documentBounds;if(!i.isReal())return e;const n=i.width,s=i.height,r=this.xt+(this.Gn?this.Wt:0),o=this.bt+(this.ln?this.Wt:0);let a=r/n,l=o/s;const h=this.Jh,u=h.left+h.right!==0,c=h.top+h.bottom!==0;(u||c)&&(l===a?(l=(o-this.Wt)/s,a=(r-this.Wt)/n):l>a?l=(o-this.Wt)/s:a=(r-this.Wt)/n);let d=0;return 2===t?d=Math.min(l,a):3===t&&(d=l>a?(o-this.Wt)/s:(r-this.Wt)/n),d>e&&(d=e),d<this.minScale&&(d=this.minScale),d>this.maxScale&&(d=this.maxScale),d}zoomToFit(){const t=this.jh;this.jh=1,this.scale=this.Yu(2),this.alignDocument(w.Center,w.Center),1!==t&&(this.Bs(!1),this.DM(this.documentBounds,this.xt/this.tt,this.bt/this.tt,this.Fc,!1)),this.jh=t}zoomToRect(t,e){void 0===e&&(e=2);const i=t.width,n=t.height;if(0===i||0===n||isNaN(i)&&isNaN(n))return;let s=1;if(2===e||3===e)if(isNaN(i))s=this.viewportBounds.height*this.scale/n;else if(isNaN(n))s=this.viewportBounds.width*this.scale/i;else{const t=this.xt,r=this.bt;s=3===e?r/n>t/i?(r-(this.ln?this.Wt:0))/n:(t-(this.Gn?this.Wt:0))/i:Math.min(r/n,t/i)}this.scale=s,this.position=new y(t.x,t.y)}get SR(){return this.jt}set SR(t){this.jt=t}alignDocument(t,e){this.ensureBounds();const i=this.documentBounds,n=this.viewportBounds;this.position=new y(i.x+(t.x*i.width+t.offsetX)-(e.x*n.width-e.offsetX),i.y+(t.y*i.height+t.offsetY)-(e.y*n.height-e.offsetY))}focusObject(t){if(t instanceof Dt){this.Jm=t;const e=y.l();this.$m=this.transformDocToView(t.getDocumentPoint(w.TopLeft,e)),y.e(e)}else this.Jm=null,this.$m=y.Ik}DM(t,e,i,n,s){const r=y.V(this.at.x,this.at.y);let o=r.x,a=r.y;if(null!==this.Jm){let t=y.l();t=this.Jm.getDocumentPoint(w.TopLeft,t),o=t.x-this.$m.x/this.scale,a=t.y-this.$m.y/this.scale,n=w.None,y.e(t)}if(s||1===this.scrollMode){n.isSpot()&&(e>t.width&&(o=t.x+(n.x*t.width+n.offsetX)-(n.x*e-n.offsetX)),i>t.height&&(a=t.y+(n.y*t.height+n.offsetY)-(n.y*i-n.offsetY)));const s=this.Jh,r=e-t.width;if(e<t.width+s.left+s.right){let i=o+e/2;i=Math.min(i,t.right+Math.max(r,s.right)-e/2),i=Math.max(i,t.left-Math.max(r,s.left)+e/2),o=i-e/2}else o>t.left?o=t.left:o<t.right-e&&(o=t.right-e);const l=i-t.height;if(i<t.height+s.top+s.bottom){let e=a+i/2;e=Math.min(e,t.bottom+Math.max(l,s.bottom)-i/2),e=Math.max(e,t.top-Math.max(l,s.top)+i/2),a=e-i/2}else a>t.top?a=t.top:a<t.bottom-i&&(a=t.bottom-i)}if(r.x=isFinite(o)?o:-this.Zt.left,r.y=isFinite(a)?a:-this.Zt.top,null!==this.positionComputation){const t=this.positionComputation(this,r);r.x=t.x,r.y=t.y}this.ds.yL(this.at,r),this.at.i(r.x,r.y),this.kb(),this.Zl(),this.MR(),y.e(r)}findPartAt(t,e){if(void 0===e&&(e=!0),e){const e=this.FP(t,(t=>t.part),(t=>t.canSelect()));if(e instanceof ce)return e}else{const e=this.FP(t,(t=>t.part));if(e instanceof ce)return e}return null}findObjectAt(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.Mi();const n=this.Xt.iteratorBackwards;for(;n.next();){const s=n.value;if(!s.visible)continue;const r=s.findObjectAt(t,e,i);if(null!==r)return r}return null}FP(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.Mi();const n=this.Xt.iteratorBackwards;for(;n.next();){const s=n.value;if(!s.visible||s.isTemporary)continue;const r=s.findObjectAt(t,e,i);if(null!==r)return r}return null}findPartsAt(t,e,i){return void 0===e&&(e=!0),this.NR(t,(t=>t.part),e?t=>t instanceof ce&&t.canSelect():null,i)}NR(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),!(n instanceof l)&&!(n instanceof u)&&(n=new u),this.Mi();const s=this.Xt.iteratorBackwards;for(;s.next();){const r=s.value;!r.visible||r.isTemporary||r.findObjectsAt(t,e,i,n)}return n}findObjectsAt(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),!(n instanceof l)&&!(n instanceof u)&&(n=new u),this.Mi();const s=this.Xt.iteratorBackwards;for(;s.next();){const r=s.value;r.visible&&r.findObjectsAt(t,e,i,n)}return n}findPartsIn(t,e,i,n){return void 0===e&&(e=!1),void 0===i&&(i=!0),this.CR(t,null,(t=>t instanceof ce&&(!i||t.canSelect())),e,n)}findObjectsIn(t,e,i,n,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),!(s instanceof l)&&!(s instanceof u)&&(s=new u),this.Mi();const r=this.Xt.iteratorBackwards;for(;r.next();){const o=r.value;o.visible&&o.findObjectsIn(t,e,i,n,s)}return s}OP(t,e,i,n,s,r){const o=new u;this.Mi();const a=this.Xt.iteratorBackwards;for(;a.next();){const l=a.value;l.visible&&l.OP(t,e,i,n,o,s,r)}return o}CR(t,e,i,n,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),!(s instanceof l)&&!(s instanceof u)&&(s=new u),this.Mi();const r=this.Xt.iteratorBackwards;for(;r.next();){const o=r.value;!o.visible||o.isTemporary||o.findObjectsIn(t,e,i,n,s)}return s}findPartsNear(t,e,i,n,s){return void 0===i&&(i=!0),void 0===n&&(n=!0),this.LR(t,e,null,(t=>t instanceof ce&&(!n||t.canSelect())),i,s)}findObjectsNear(t,e,i,n,s,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=!0),!1!==s&&!0!==s&&((s instanceof l||s instanceof u)&&(r=s),s=!0),!(r instanceof l)&&!(r instanceof u)&&(r=new u),this.Mi();const o=this.Xt.iteratorBackwards;for(;o.next();){const a=o.value;a.visible&&a.findObjectsNear(t,e,i,n,s,r)}return r}LR(t,e,i,n,s,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=!0),!1!==s&&!0!==s&&((s instanceof l||s instanceof u)&&(r=s),s=!0),!(r instanceof l)&&!(r instanceof u)&&(r=new u),this.Mi();const o=this.Xt.iteratorBackwards;for(;o.next();){const a=o.value;!a.visible||a.isTemporary||a.findObjectsNear(t,e,i,n,s,r)}return r}acceptEvent(t){return this.zc(t,t instanceof MouseEvent)}zc(t,i){const n=this.Br;this.Br=this.Qh,this.Qh=n,n.diagram=this,n.event=t,i?this.Qm(t,n):(n.viewPoint=this.Br.viewPoint,n.documentPoint=this.Br.documentPoint);let s=0;const r=t;return r.ctrlKey&&(s+=1),r.altKey&&(s+=2),r.shiftKey&&(s+=4),r.metaKey&&(s+=8),n.modifiers=s,n.button=r.button,void 0!==r.buttons&&(n.buttons=r.buttons),e.tr&&0===r.button&&r.ctrlKey&&(n.button=2),n.down=!1,n.up=!1,n.clickCount=1,n.delta=0,n.handled=!1,n.bubbles=!1,n.timestamp=t.timeStamp,n.isMultiTouch=!1,n.targetDiagram=this.bb(t,t.target),n.targetObject=null,n}bb(t,i){if(null===i)return null;const n=xt.Qe.get(i);if(n)return n;let s=t.path;if(!s&&e.it(t.composedPath)&&(s=t.composedPath()),s&&s[0]){const t=xt.Qe.get(s[0]);if(t)return t}return null}gR(t,e,i){const n=this.TM(t,!0,!1,!1,!0,i);return this.Qm(e,n),n.targetDiagram=this.bb(t,t.target),n.targetObject=null,i||n.clone(this.Km),n}mR(e,i,n){const s=this.TM(e,!1,!1,!1,!1,n);let r=t.document.elementFromPoint(i.clientX,i.clientY)||null;null!==r&&void 0!==r.shadowRoot&&null!==r.shadowRoot&&(r=r.shadowRoot.elementFromPoint(i.clientX,i.clientY));let o=this,a=e;if(r){const t=this.bb(e,r);t&&(a=i,o=t)}return s.targetDiagram=o,this.Qm(a,s),s.targetObject=null,s}TM(t,i,n,s,r,o){const a=this.Br;this.Br=this.Qh,this.Qh=a,a.diagram=this,a.clickCount=1,a.delta=0;let l=0;return t.ctrlKey&&(l+=1),t.altKey&&(l+=2),t.shiftKey&&(l+=4),t.metaKey&&(l+=8),a.modifiers=l,a.event=t,a.timestamp=t.timeStamp,a.button=n?this.firstInput.button:t.button,a.buttons=t.buttons,e.tr&&0===t.button&&t.ctrlKey&&(a.button=2),a.down=i,a.up=n,a.handled=s,a.bubbles=r,a.isMultiTouch=o,a}la(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),e.cancelBubble=!0,!1)}xR(t){const e=xt.Qe.get(this);if(!e||!e.isEnabled)return!1;const i=e.zc(t,!1);return i.key=t.key,i.code=t.code,i.down=!0,e.doKeyDown(),e.la(i,t)}bR(t){const e=xt.Qe.get(this);if(!e||!e.isEnabled)return!1;const i=e.zc(t,!1);return i.key=t.key,i.code=t.code,i.up=!0,e.doKeyUp(),e.la(i,t)}yR(t){const e=xt.Qe.get(this);if(!e||!e.isEnabled)return!1;const i=e.zc(t,!0);return null!==e.mouseEnter&&e.mouseEnter(i),e.currentTool.standardMouseOver(),e.la(i,t)}wR(t){const e=xt.Qe.get(this);if(!e||!e.isEnabled)return!1;const i=e.zc(t,!0);return null!==e.mouseLeave&&e.mouseLeave(i),e.la(i,t)}getMouse(t){const e=this.ft;if(null===e)return new y(0,0);const i=e.getBoundingClientRect(),n=(t.clientX-i.left)*(this.xt/i.width),s=(t.clientY-i.top)*(this.bt/i.height);return new y(n,s).Oe(this.T)}Qm(t,e){const i=this.ft;let n=0,s=0;if(null!==i){const e=i.getBoundingClientRect();n=(t.clientX-e.left)*(this.xt/e.width),s=(t.clientY-e.top)*(this.bt/e.height)}e.viewPoint.i(n,s);const r=y.V(n,s);this.T.$e(r),e.documentPoint.a(r),y.e(r)}VC(t,e,i){let n;if(null===this.ia[0])return;n=this.ia[e];const s=this.ft;if(null!==s){const t=s.getBoundingClientRect();i.i((n.clientX-t.left)*(this.xt/t.width),(n.clientY-t.top)*(this.bt/t.height))}}invalidateDocumentBounds(){this._h||(this._h=!0,this.requestUpdate(!1))}AR(){this.ys||this.Mi(),this.ensureBounds()}redraw(){this.jt||this.ys||(this.S(),this.maybeUpdate())}isUpdateRequested(){return this.xr}delayInitialization(t){void 0===t&&(t=null);const i=this.animationManager,n=i.isEnabled;i.stopAnimation(),i.isEnabled=!1,this.ur(),this.Hn=!1,this.ex=new y(NaN,NaN),i.isEnabled=n,this.ys=!0;const s=this;null!==t&&e.ir((()=>{s.ys=!1,i.Dl("Model"),t(s)}),1)}requestUpdate(e){if(void 0===e&&(e=!1),!0===this.xr||this.jt||!1===e&&this.ys)return;this.xr=!0;const i=this;t.requestAnimationFrame((()=>{i.xr&&i.maybeUpdate()}))}maybeUpdate(){this.Fu&&!this.xr||(this.Fu&&(this.Fu=!1),this.ur())}FM(t,e){!this.Ou||this.jt||this.animationManager.defaultAnimation.isAnimating||this.VL()||(t&&this.Mi(),e&&this.Bs(!1))}ur(t){if(this.ys||(this.xr=!1,null===this.St&&!this.Iu.isReal()))return;this.ys=!0;const e=this.animationManager,i=this.Vu;if(!e.isAnimating&&0!==i.length){const t=i.r,e=t.length;for(let i=0;i<e;i++){const e=t[i];e.ue(!1),e.c()}i.clear()}const n=this.wM;n.count>0&&(n.each((t=>t.RM())),n.clear());let s=!1,r=!1;e.defaultAnimation.isAnimating&&(r=!0,s=this.skipsUndoManager,this.skipsUndoManager=!0),e.pi||this.IS(),t||this.FM(!1,!0);const o=!this.undoManager.isUndoingRedoing&&(this.xl||0!==this.Vc.count&&0!==this.Mr.size),a=!this.Hn||this.Vr;this.Mi(!0);let l=!1;(a||o)&&(this.Hn?this.vM(!this.vc,o):(this.startTransaction("Initial Layout"),!1===e.isEnabled&&e.stopAnimation(),this.vM(!1,o)),l=a),this.vc=!1,this.xl=!1,this.Mi(),null!==this.Ze&&(this.Ze.visible&&!this.Eu&&(this._l(),this.Eu=!0),!this.Ze.visible&&this.Eu&&(this.Eu=!1)),this.Xx||this.AR(),t||this.FM(!0,!1);let h=!1;if(l){const e=x.l();e.a(this.viewportBounds),this.Hn||(this.Hn=!0,h=!0,this.skipsUndoManager||(this.undoManager.Iw=!0),this.undoManager.Ew=!0,this.TR()),this.DR(),this.Mi(!1),t||this.FM(!0,!0),x.e(e)}else if(e.Sc&&e.ix){if(1!==this.Sr)this.scale=this.Yu(this.Sr);else if(1!==this.Gl)this.scale=this.Yu(this.Gl);else{const t=this.initialScale;isFinite(t)&&t>0&&(this.scale=t)}this.Bs(!0)}l&&h&&this.commitTransaction("Initial Layout"),t||this.Ui(this.Qt),r&&(this.skipsUndoManager=s),this.ys=!1}get Bh(){return this.Hn}TR(){if(1!==this.Sr)this.scale=this.Yu(this.Sr);else if(1!==this.Gl)this.scale=this.Yu(this.Gl);else{const t=this.initialScale;isFinite(t)&&t>0&&(this.scale=t)}this.Bs(!0);const t=this.Xt.r;this.ps(t,t.length,this,this.viewportBounds),this.D("InitialLayoutCompleted"),this.ex.a(this.at),this._l()}DR(){this.D("LayoutCompleted")}_m(t){this.Yn.add(t)}addInvalidRoute(t){this.Co?this.$h.add(t):this.Mr.add(t)}Mi(t){if(0!==this.Yn.size&&(this.ys||!this.animationManager.isTicking)){if(this.ys||(this.xl=!0),t)return void this.XL(this.Yn);for(let t=0;t<23&&0!==this.Yn.size;t++){const t=new Set(this.Yn);this.Yn.clear(),this.RM(t,this.Yn)}this.nodes.each((t=>{t instanceof Ae&&t.YL(!1)}))}}XL(t,e){for(const i of t)!i.ke()||i instanceof Ae||(i.Yr()?(i.ht(1/0,1/0),i.Bt()):e&&e.add(i));for(const e of t)if(e instanceof Ae){if(!e.isVisible())continue;this.Pb(e)}}RM(t,e){this.XL(t,e);for(const i of t){if(!(i instanceof be))continue;const t=i;t.isVisible()&&(t.Yr()?(t.ht(1/0,1/0),t.Bt()):e.add(t))}for(const i of t)i instanceof fe&&i.isVisible()&&(i.Yr()?(i.ht(1/0,1/0),i.Bt()):e.add(i))}t0(t){const e=t instanceof xt,i=e?t.links:t.memberParts,n=this.Yn;if(e)this.Mi(!0);else{for(;i.next();){const t=i.value;n.has(t)&&(!t.ke()||t instanceof Ae||t.Yr()&&(t.ht(1/0,1/0),t.Bt()))}for(i.reset();i.next();){const t=i.value;if(n.has(t)&&t instanceof Ae){if(!t.isVisible())continue;this.Pb(t)}}i.reset()}for(;i.next();){const t=i.value;t instanceof be&&n.has(t)&&t.isVisible()&&t.Yr()&&(t.ht(1/0,1/0),t.Bt())}}Pb(t){const i=e.et(),n=e.et(),s=t.memberParts;for(;s.next();){const e=s.value;e.isVisible()&&(e instanceof Ae?(e.To()||e._e()||e.th())&&this.Pb(e):e instanceof be?e.fromNode===t||e.toNode===t?n.push(e):i.push(e):(e.ht(1/0,1/0),e.Bt()))}let r=i.length;for(let t=0;t<r;t++){const e=i[t];e.ht(1/0,1/0),e.Bt()}e.J(i),t.ht(1/0,1/0),t.Bt(),r=n.length;for(let t=0;t<r;t++){const e=n[t];e.ht(1/0,1/0),e.Bt()}e.J(n)}ps(t,e,i,n){if(this.Ic||this.animationManager.isAnimating){for(let s=0;s<e;s++)t[s].ps(i,n);this.Mi()}}Ui(t){null!==this.St&&(null===this.ft&&e.o("No canvas specified"),"svg"===this.Oc?this.FR(t):this.RR(t))}RR(t){const e=this.animationManager;if(e.pi||e.isAnimating&&!e.isTicking)return;const i=new Date;if(this.i0(),this.St&&"0"===this.St.style.opacity)return;const n=t!==this.Qt,s=this.Xt.r,r=s.length,o=this;if(this.ps(s,r,o,o.viewportBounds),n)t.clearContextCache(!0),this.Ql();else if(!this.Ue&&!e.isAnimating)return;const a=this.T,l=this.Vi;t.setTransform(l,0,0,l,0,0),t.clearRect(0,0,this.xt,this.bt),1!==this.$t&&(t.globalAlpha=this.$t),this.OM(t);for(let e=0;e<r;e++)t.setTransform(l,0,0,l,0,0),t.transform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),t.commitTransform(),s[e].Ui(t,o);let h=!1;this.Bc?this.Bc.Xu(this)&&(h=this.cb()):h=!0,h&&(k.prototype.$e=k.prototype.bw),n?(this.Qt.clearContextCache(!0),this.Ql()):(this.Ic=!1,this.Ue=!1);const u=+new Date-+i,c=!1,d=this.SM;if(null===this.kl){d[this.Wm]=u,this.Wm=(this.Wm+1)%d.length;let t=0;for(let e=0;e<d.length;e++)t+=d[e];this.qm=t/d.length}1!==this.$t&&(t.globalAlpha=1)}FR(t){if(null===this.St)return;const e=this.animationManager;if(e.pi||e.isAnimating&&!e.isTicking)return;this.i0();const i=this.xt,n=this.bt;t.surface.resize(i,n,i,n);const s=this.Xt.r,r=s.length,o=this;if(this.ps(s,r,o,o.viewportBounds),!this.Ue&&!e.isAnimating)return;const a=this.T;t.lastDrawnPart=null,t.setDiagramPosScale(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),1!==this.$t&&(t.globalAlpha=this.$t),this.OM(t);const l=this.Vi;this.ft.li.setTransform(l,0,0,l,0,0),this.ft.li.clearRect(0,0,this.xt,this.bt);for(let e=0;e<r;e++)s[e].Ui(t,o);let h=!1;this.Bc?this.Bc.Xu(this)&&(h=this.cb()):h=!0,h&&(k.prototype.$e=k.prototype.bw),this.Ic=!1,this.Ue=!1}Sb(t,i,n,s,r,o,a,l,h){if(null===this.St)return;null===this.ft&&e.o("No canvas specified"),void 0===o&&(o=null),void 0===a&&(a=null),void 0===l&&(l=!1),void 0===h&&(h=!1),this.i0(),this.Qt.clearContextCache(!0),this.Ql(),this.ta=!0;const c=this.tt;this.tt=s;const d=this,f=this.Xt.r,p=f.length;try{const e=new x(r.x,r.y,n.width/s,n.height/s),c=e.copy();c.addMargin(i),this._l(c),this.Mi(),this.ps(f,p,d,e),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,n.width,n.height),null!==a&&""!==a&&(t.fillStyle=a,t.fillBackground(0,0,n.width,n.height));const g=this.Vi;t.scale(g,g);const m=k.l();m.Ri(),m.Fs(i.left,i.top),m.tt(s),(0!==r.x||0!==r.y)&&m.Fs(-r.x,-r.y),t.setTransform(m.m11,m.m12,m.m21,m.m22,m.dx,m.dy),t.commitTransform(),t instanceof Ft&&t.setDiagramPosScale(m.m11,m.m12,m.m21,m.m22,m.dx,m.dy),k.e(m),this.OM(t),t.globalAlpha=this.$t;const y=this.findLayer("Grid");if(o){const e=new u,i=o.iterator;for(i.reset();i.next();){const t=i.value;t instanceof ce&&(!h&&t.layer===y||(t.Au(),e.add(t)))}for(let i=0;i<p;i++)f[i].KF(t,d,e,l);e.each((t=>t.Au()))}else for(let e=0;e<p;e++){const i=f[e];i===y?h&&i.Ui(t,d,!0):i.Ui(t,d,l)}this.ta=!1,this.Bc&&this.Bc.Xu(this)&&this.cb()}finally{this.tt=c,this.Qt.clearContextCache(!0),this.Ql(),this.ps(f,p,d,d.viewportBounds),this._l(),this.Qt instanceof Ft&&(this.Qt.diagramGroup.replaceChildren(),this.redraw())}}getRenderingHint(t){return this.Pr[t]}setRenderingHint(t,e){"minDrawingLength"===t&&(this.Fm=e),this.Pr[t]=e,this.redraw()}resetRenderingHints(){this.Pr=new n,this.Pr.drawShadows=!0,this.Pr.textGreeking=!0,this.Pr.viewportOptimizations=!e.tr,this.Pr.temporaryPixelRatio=!0,this.Pr.pictureRatioOptimization=!0,this.Pr.minDrawingLength=1,this.Fm=1}OM(t){const e=this.Pr;if(null===e)return;if(void 0!==e.imageSmoothingEnabled){const i=!!e.imageSmoothingEnabled;t.setImageSmoothingEnabled(i)}const i=e.defaultFont;null!=i&&(t.font=i)}getInputOption(t){return this.Tu[t]}setInputOption(t,e){this.Tu[t]=e}oR(){this.Tu=new n,this.Tu.extraTouchArea=10,this.Tu.extraTouchThreshold=10,this.Tu.hasGestureZoom=!0}set(t){return Object.assign(this,t),this}attach(t){return this.setProperties(t)}setProperties(t){return xt.e0(this,t),this}static e0(t,i){const n=t instanceof qt,s=t instanceof xt;for(const r in i){""===r&&e.o("Setting properties requires non-empty property names");let o=t,a=r;if(n||s){const i=r.indexOf(".");if(i>0){const s=r.substring(0,i);n?o=t.findObject(s):(o=t[s],null==o&&(o=t.toolManager[s])),e.K(o)?a=r.substring(i+1):e.o("Unable to find object named: "+s+" in "+t.toString()+" when trying to set property: "+r)}}if("_"!==a[0]&&!e.dw(o,a)){if(s&&"ModelChanged"===a){t.addModelChangedListener(i[a]);continue}if(s&&"Changed"===a){t.addChangedListener(i[a]);continue}if(s&&e.dw(t.toolManager,a))o=t.toolManager;else{if(s&&t.KL(a)){t.addDiagramListener(a,i[a]);continue}if(t instanceof He&&"Changed"===a){t.addChangedListener(i[a]);continue}e.o('Trying to set undefined property "'+a+'" on object: '+o.toString())}}const l=i[r];o[a]=l,"_"===a[0]&&o instanceof Dt&&o.addCopyProperty(a)}}bL(){if(0!==this.Jl.count&&!(this.undoManager.transactionLevel>1)){for(;this.Jl.count>0;){const t=this.Jl;this.Jl=new m;const e=t.iterator;for(;e.next();){const t=e.key;t.invalidateOtherJumpOvers(e.value),t.ee()}}this.S()}}S(t){if(void 0===t)this.Ue=!0,this.requestUpdate();else{const e=this.viewportBounds;t.isReal()&&e.intersectsRect(t)&&(this.Ue=!0,this.requestUpdate())}this.D("InvalidateDraw")}invalidateViewport(t,e){!0!==this.Ue&&(this.Ue=!0,"svg"!==this.Oc&&!0===this.getRenderingHint("temporaryPixelRatio")?(this.Bw(),this.maybeUpdate(),this.CP(!0)):this.maybeUpdate())}ha(){this.Ou=!0}Ql(){this.Ic=!0}i0(){!1!==this.Du&&(this.Du=!1,this.UL(this.xt,this.bt))}UL(t,e){this.Zl();const i=this.Vi,n=t*i,s=e*i;this.ft.resize(n,s,t,e)&&(this.Ue=!0,this.Qt.clearContextCache(!0))}VL(){const t=this.ft;if(null===t||this.Iu.isReal())return!0;const e=this.xt,i=this.bt,n=this.St;let s=!1,r=this.Gn?this.Wt:0,o=this.ln?this.Wt:0,a=n.clientWidth||e+r,l=n.clientHeight||i+o;const h=this.viewportBounds,u=h.x,c=h.y,d=h.width,f=h.height;if((a!==e+r||l!==i+o)&&(this.Gn=!1,this.ln=!1,r=0,o=0,this.xt=a,this.bt=l,this.Du=!0,s=!0,this.Zl()),!this.Hn||!this.viewportBounds.isReal())return!0;const p=this.hb,g=this.ab;if(this.Ou=!1,!(s||this.Gn||this.ln||this.Ru||this.vu))return!0;const m=this.documentBounds;let v=0,b=0,w=0,k=0;const S=h.width,C=h.height,M=this.Jh;this.contentAlignment.isSpot()?(m.width>S&&(v=M.left,b=M.right),m.height>C&&(w=M.top,k=M.bottom)):(v=M.left,b=M.right,w=M.top,k=M.bottom);const T=m.width+v+b,A=m.height+w+k,P=this.scale,N=P;let D=T>a/P,L=A>l/P;if(!(s||this.Gn||this.ln||D||L))return!0;const E=m.x-v,_=h.x,O=m.right+b;let F=h.right+r;const R=m.y-w,I=h.y,B=m.bottom+k;let j=h.bottom+o,z="1px",H="1px";if(1===this.scrollMode&&(D||L)){if(D&&this.hasHorizontalScrollbar&&this.allowHorizontalScroll){let t=1;E+1<_&&(t=Math.max((_-E)*P+this.xt,t)),O>F+1&&(t=Math.max((O-F)*P+this.xt,t)),S+r+1<T&&(t=Math.max((T-S)*P+this.xt,t)),z=t.toString()+"px"}if(L&&this.hasVerticalScrollbar&&this.allowVerticalScroll){let t=1;R+1<I&&(t=Math.max((I-R)*P+this.bt,t)),B>j+1&&(t=Math.max((B-j)*P+this.bt,t)),C+o+1<A&&(t=Math.max((A-C)*P+this.bt,t)),H=t.toString()+"px"}}let U="1px"!==z,V="1px"!==H;if((!U||!V)&&(U||V)){if(D=!(T<S+r),L=!(A<C+o),V&&(F-=this.Wt),U&&(j-=this.Wt),D&&this.hasHorizontalScrollbar&&this.allowHorizontalScroll){let t=1;E+1<_&&(t=Math.max((_-E)*P+this.xt,t)),O>F+1&&(t=Math.max((O-F)*P+this.xt,t)),S+1<T&&(t=Math.max((T-S)*P+this.xt,t)),z=t.toString()+"px"}U="1px"!==z;let t=this.bt;if(U!==this.ln&&(t=U?this.bt-this.Wt:this.bt+this.Wt),L&&this.hasVerticalScrollbar&&this.allowVerticalScroll){let e=1;R+1<I&&(e=Math.max((I-R)*P+t,e)),B>j+1&&(e=Math.max((B-j)*P+t,e)),C+1<A&&(e=Math.max((A-C)*P+t,e)),H=e.toString()+"px"}V="1px"!==H}if(this.Bm&&U===this.ln&&V===this.Gn)return(e!==this.xt||i!==this.bt)&&this.maybeUpdate(),!1;if(U!==this.ln&&(this.bt="1px"===z?this.bt+this.Wt:Math.max(this.bt-this.Wt,1),s=!0),this.ln=U,g.style.width=z,V!==this.Gn&&(this.xt="1px"===H?this.xt+this.Wt:Math.max(this.xt-this.Wt,1),s=!0,this.zu)){const e=y.l();V?(t.style.left=this.Wt+"px",this.position=e.i(this.at.x+this.Wt/this.scale,this.at.y)):(t.style.left="0px",this.position=e.i(this.at.x-this.Wt/this.scale,this.at.y)),y.e(e)}s&&this.Zl(),this.Gn=V,g.style.height=H,this._x=!0,s&&(this.Du=!0);let Y=p.scrollLeft;if(this.hasHorizontalScrollbar&&this.allowHorizontalScroll&&(S+1<T?Y=(this.position.x-E)*P:E+1<_?Y=p.scrollWidth-p.clientWidth:O>F+1&&(Y=this.position.x*P)),this.zu)switch(this.Px){case"negative":Y=-(p.scrollWidth-Y-p.clientWidth);break;case"reverse":Y=p.scrollWidth-Y-p.clientWidth}if(p.scrollLeft=Y,this.hasVerticalScrollbar&&this.allowVerticalScroll&&(C+1<A?p.scrollTop=(this.position.y-R)*P:R+1<I?p.scrollTop=p.scrollHeight-p.clientHeight:B>j+1&&(p.scrollTop=this.position.y*P)),a=this.xt,l=this.bt,p.style.width=a+(this.Gn?this.Wt:0)+"px",p.style.height=l+(this.ln?this.Wt:0)+"px",e!==a||i!==l||this.animationManager.pi){const t=x.V(u,c,d,f);return this.onViewportBoundsChanged(t,this.viewportBounds,N,s),x.e(t),!1}return!0}add(t){const i=t.diagram;if(i===this)return;null!==i&&e.o("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+i.toString());let n=this.findLayer(t.layerName);if(null===n&&(n=this.findLayer("")),null===n&&e.o('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer===n)return;const s=n.Wh(99999999,t,t.diagram===this);s>=0&&this.raiseChangedEvent(3,"parts",n,null,t,null,s),n.isTemporary||this.invalidateDocumentBounds(),t.invalidateLayout(1);const r=t.layerChanged;null!==r&&r(t,null,n)}Wh(t){this.partManager.Wh(t);const e=this;t.Kr((t=>e.GL(t))),t.data||t.Do(),t.hasPlaceholder()&&t.c(),null!==t.data&&t.Kr((t=>e.partManager.IM(t,null))),(!0===t._e()||!0===t.th())&&this._m(t),t.HL(!0,this),t.jL()?(t.actualBounds.isReal()&&this.S(t.qh(t.actualBounds)),this.invalidateDocumentBounds()):t.isVisible()&&t.actualBounds.isReal()&&this.S(t.qh(t.actualBounds)),this.requestUpdate()}te(t){t.clearAdornments(),this.partManager.te(t);const e=this;null!==t.data&&t.Kr((t=>e.partManager.EM(t,e))),this.Yn.delete(t),t instanceof be&&this.Mr.delete(t),t.jL()?(t.actualBounds.isReal()&&this.S(t.qh(t.actualBounds)),this.invalidateDocumentBounds()):t.isVisible()&&t.actualBounds.isReal()&&this.S(t.qh(t.actualBounds)),this.requestUpdate()}remove(t){this.UM(t,!0)}UM(t,e){const i=t.layer;if(null===i||i.diagram!==this)return;t.isSelected=!1,t.isHighlighted=!1,t.invalidateLayout(2),e&&t.Xc();const n=i.te(-1,t,!1);n>=0&&this.raiseChangedEvent(4,"parts",i,t,null,n,null);const s=t.layerChanged;null!==s&&s(t,i,null)}removeParts(t,e){if(void 0===e&&(e=!1),Array.isArray(t)){const i=t.length;for(let n=0;n<i;n++){const i=t[n];e&&!i.canDelete()||this.remove(i)}}else{const i=new u;i.addAll(t);const n=i.iterator;for(;n.next();){const t=n.value;e&&!t.canDelete()||this.remove(t)}}}copyParts(t,e,i){void 0===i&&(i=!1);let n=null;const s=e||this,r=s.model;let o=!1,a=!1;try{r.pm()&&(o=r.copiesParentKeyOfNodeData,r.copiesParentKeyOfNodeData=s.commandHandler.copiesParentKey),(r.mm()||r.Mb())&&(a=r.copiesGroupKeyOfNodeData,r.copiesGroupKeyOfNodeData=s.commandHandler.copiesGroupKey),n=this.partManager.copyParts(t,e,i)}finally{r.pm()&&(r.copiesParentKeyOfNodeData=o),(r.mm()||r.Mb())&&(r.copiesGroupKeyOfNodeData=a)}return n}moveParts(t,e,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=this.s0()),null===this.toolManager)return;const s=new m;if(null!==t)if(Array.isArray(t))for(let e=0;e<t.length;e++)this.Gr(s,t[e],i,n);else{const e=t.iterator;for(;e.next();)this.Gr(s,e.value,i,n)}else{let t=this.parts;for(;t.next();){const e=t.value;this.Gr(s,e,i,n)}for(t=this.nodes;t.next();){const e=t.value;this.Gr(s,e,i,n)}for(t=this.links;t.next();){const e=t.value;this.Gr(s,e,i,n)}}this.TP(s,e,n,i)}Gr(t,e,i,n,s){if(!t.has(e)&&(void 0===s&&(s=!1),!i||s||e.canMove()||e.canCopy()))if(void 0===n&&(n=this.s0()),e instanceof ge){if(t.set(e,this.Es(n,e,e.location)),e instanceof Ae&&(e.hasPlaceholder()||n.dragsMembers)){const s=e.memberParts;for(;s.next();){const e=s.value;this.Gr(t,e,i,n,n.groupsAlwaysMove)}}const s=e.linksConnected;for(;s.next();){const e=s.value;if(t.has(e))continue;const r=e.fromNode,o=e.toNode;null!==r&&t.has(r)&&null!==o&&t.has(o)&&this.Gr(t,e,i,n)}if(n.dragsTree){const s=e.findTreeChildrenNodes();for(;s.next();){const e=s.value;this.Gr(t,e,i,n)}}}else if(e instanceof be){t.set(e,this.Es(n,e));const s=e.labelNodes;for(;s.next();){const e=s.value;this.Gr(t,e,i,n)}}else e instanceof fe||t.set(e,this.Es(n,e,e.location))}TP(t,i,n,s){if(null===t||0===t.count)return;const r=y.l(),o=y.l();o.a(i),isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0);const a=this.db;a||this.JC(t);const l=e.et(),h=e.et(),u=t.iterator;let c=y.l();for(;u.next();){const e=u.key,i=u.value;if(e.ke()){const a=this.qL(e,t);if(null!==a)l.push(new kt(e,i,a));else if(!s||e.canMove()){const t=i.point;r.a(t),this.computeMove(e,r.add(o),n,c),e.location=c,void 0===i.shifted&&(i.shifted=new y),i.shifted.a(c.subtract(t))}}else u.key instanceof be&&h.push(new p(u.key,u.value))}y.e(c);const d=l.length;for(let t=0;t<d;t++){const e=l[t],i=e.WL.point;r.a(i),void 0===e.Nb.shifted&&(e.Nb.shifted=new y),e.Me.location=r.add(e.Nb.shifted)}const f=y.l(),g=y.l(),m=h.length;for(let e=0;e<m;e++){const i=h[e],s=i.key;if(s instanceof be)if(s.suspendsRouting){s.br=null;const e=s.fromNode,a=s.toNode;if(null!==this.draggedLink&&n.dragsLink){const e=i.value.point;if(null===s.dragComputation){t.set(s,this.Es(n,s,o));const i=o.x-e.x,r=o.y-e.y;s.fr(i,r)}else{const i=y.V(0,0),r=s.getPoint(0);r&&r.isReal()&&i.a(r),c=y.l().a(i).add(o);let a=c;n.isGridSnapEnabled&&(n.isGridSnapRealtime||this.lastInput.up)&&(a=y.l(),this.yS(s,c,a,n)),c.a(s.dragComputation(s,c,a)).subtract(i),t.set(s,this.Es(n,s,c));const l=c.x-e.x,h=c.y-e.y;s.fr(l,h),y.e(i),y.e(c),a!==c&&y.e(a)}}else{if(null!==e){f.a(e.location);const i=t.get(e);null!==i&&f.subtract(i.point)}if(null!==a){g.a(a.location);const e=t.get(a);null!==e&&g.subtract(e.point)}if(null!==e&&null!==a)if(f.equalsApprox(g)){const e=i.value.point,o=r;o.a(f),o.subtract(e),t.set(s,this.Es(n,s,f)),s.fr(o.x,o.y)}else s.suspendsRouting=!1,s.invalidateRoute();else{const r=i.value.point;let l;l=null!==e?f:null!==a?g:o,t.set(s,this.Es(n,s,l));const h=l.x-r.x,u=l.y-r.y;s.fr(h,u)}}}else if(null===s.fromNode||null===s.toNode){const e=i.value.point;t.set(s,this.Es(n,s,o));const r=o.x-e.x,a=o.y-e.y;s.fr(r,a)}}y.e(r),y.e(o),y.e(f),y.e(g),e.J(l),e.J(h),a||(this.Mi(),this.NP(t))}computeMove(t,e,i,n){if(void 0===n&&(n=new y),n.a(e),null===t)return n;let s=e;const r=i.isGridSnapEnabled;r&&(i.isGridSnapRealtime||this.lastInput.up)&&(s=y.l(),this.yS(t,e,s,i));const o=null!==t.dragComputation?t.dragComputation(t,e,s):s,a=t.minLocation;let l=a.x;isNaN(l)&&(l=r?Math.round(1e3*t.location.x)/1e3:t.location.x);let h=a.y;isNaN(h)&&(h=r?Math.round(1e3*t.location.y)/1e3:t.location.y);const u=t.maxLocation;let c=u.x;isNaN(c)&&(c=r?Math.round(1e3*t.location.x)/1e3:t.location.x);let d=u.y;return isNaN(d)&&(d=r?Math.round(1e3*t.location.y)/1e3:t.location.y),n.i(Math.max(l,Math.min(o.x,c)),Math.max(h,Math.min(o.y,d))),s!==e&&y.e(s),n}s0(){const t=this.toolManager.findTool("Dragging");return t instanceof H?t.dragOptions:this.pb}yS(t,e,i,n){if(void 0===n&&(n=this.s0()),i.a(e),null===t)return i;const s=this.grid,r=n.gridSnapCellSize;let o=r.width,a=r.height;const l=n.gridSnapOrigin;let h=l.x,u=l.y;const c=n.gridSnapCellSpot;if(null!==s){const t=s.gridCellSize;isNaN(o)&&(o=t.width),isNaN(a)&&(a=t.height);const e=s.gridOrigin;isNaN(h)&&(h=e.x),isNaN(u)&&(u=e.y)}const d=y.V(0,0);return d.setSpot(0,0,o,a,c),S.Dg(e.x,e.y,h+d.x,u+d.y,o,a,i),y.e(d),i}JC(t){if(null===t)return;this.db=!0;const e=t.iterator;for(;e.next();){const t=e.key;t instanceof be&&(t.suspendsRouting=!0)}}NP(t){if(null===t)return;const e=t.iterator;for(;e.next();){const t=e.key;t instanceof be&&(t.suspendsRouting=!1,t.JL()&&t.invalidateRoute())}this.db=!1}get draggedLink(){return this.gb}set draggedLink(t){this.gb!==t&&(this.gb=t,null!==t&&(this.yb=t.fromPort,this.wb=t.toPort))}get RP(){return this.yb}set RP(t){this.yb=t}get vP(){return this.wb}set vP(t){this.wb=t}qL(t,e){const i=t.containingGroup;if(null!==i){let t=this.qL(i,e);if(null!==t||(t=e.get(i),null!==t))return t}return null}Es(t,e,i){if(void 0===i)return new wt(y.xo);let n=t.isGridSnapEnabled;return!t.groupsSnapMembers&&null!==e.containingGroup&&(n=!1),new wt(n?new y(Math.round(1e3*i.x)/1e3,Math.round(1e3*i.y)/1e3):i.copy())}BM(t,i){if(null!==t.diagram&&t.diagram!==this&&e.o("Cannot share a Layer with another Diagram: "+t+" of "+t.diagram),null===i?null!==t.diagram&&e.o("Cannot add an existing Layer to this Diagram again: "+t):(i.diagram!==this&&e.o("Existing Layer must be in this Diagram: "+i+" not in "+i.diagram),t===i&&e.o("Cannot move a Layer before or after itself: "+t)),t.diagram===this)return;const n=t.name,s=this.Xt,r=s.count;for(let t=0;t<r;t++)s.elt(t).name===n&&e.o("Cannot add Layer with the name '"+n+"'; a Layer with the same name is already present in this Diagram.")}addLayer(t){this.BM(t,null),t.Mo(this);const e=this.Xt;let i=e.count-1;if(!t.isTemporary)for(;i>=0&&e.elt(i).isTemporary;)i--;return e.insertAt(i+1,t),null!==this.ki&&this.raiseChangedEvent(3,"layers",this,null,t,null,i+1),this.S(),this.invalidateDocumentBounds(),this}addLayerBefore(t,e){this.BM(t,e),t.Mo(this);const i=this.Xt,n=i.indexOf(t);n>=0&&(i.delete(t),null!==this.ki&&this.raiseChangedEvent(4,"layers",this,t,null,n,null));const s=i.count;let r;for(r=0;r<s;r++)if(i.elt(r)===e){i.insertAt(r,t);break}return null!==this.ki&&this.raiseChangedEvent(3,"layers",this,null,t,null,r),this.S(),n<0&&this.invalidateDocumentBounds(),this}addLayerAfter(t,e){this.BM(t,e),t.Mo(this);const i=this.Xt,n=i.indexOf(t);n>=0&&(i.delete(t),null!==this.ki&&this.raiseChangedEvent(4,"layers",this,t,null,n,null));const s=i.count;let r;for(r=0;r<s;r++)if(i.elt(r)===e){i.insertAt(r+1,t);break}return null!==this.ki&&this.raiseChangedEvent(3,"layers",this,null,t,null,r+1),this.S(),n<0&&this.invalidateDocumentBounds(),this}Xr(t,e){t.Mo(this),this.Xt.insertAt(e,t)}$L(t){this.Xt.removeAt(t)}removeLayer(t){if(t.diagram!==this&&e.o("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),""===t.name)return;const i=this.Xt,n=i.indexOf(t);if(i.delete(t)){const e=t.Ct.copy().iterator;for(;e.next();){const i=e.value,n=i.layerName;n!==t.name?i.layerName=n:i.layerName=""}null!==this.ki&&this.raiseChangedEvent(4,"layers",this,t,null,n,null),this.S(),this.invalidateDocumentBounds()}}findLayer(t){const e=this.layers;for(;e.next();){const i=e.value;if(i.name===t)return i}return null}findRouter(t){for(const e of this.Vc)if(e.name===t)return e;return null}addModelChangedListener(t){return e.k(t,xt,"addModelChangedListener:listener"),null===this.Kn&&(this.Kn=new l),this.Kn.add(t),this.model.addChangedListener(t),this}removeModelChangedListener(t){e.k(t,xt,"removeModelChangedListener:listener"),null!==this.Kn&&(this.Kn.delete(t),0===this.Kn.count&&(this.Kn=null)),this.model.removeChangedListener(t)}addChangedListener(t){return e.k(t,xt,"addChangedListener:listener"),null===this.Nr&&(this.Nr=new l),this.Nr.add(t),this}removeChangedListener(t){e.k(t,xt,"removeChangedListener:listener"),null!==this.Nr&&(this.Nr.delete(t),0===this.Nr.count&&(this.Nr=null))}VM(t){if(!this.skipsUndoManager&&!this.model.skipsUndoManager&&this.model.undoManager.handleChanged(t),1!==t.change&&(this.isModified=!0),null!==this.Nr){const e=this.Nr,i=e.length;for(let n=0;n<i;n++)e.elt(n)(t)}}raiseChangedEvent(t,e,i,n,s,r,o){void 0===r&&(r=null),void 0===o&&(o=null);const a=new O;a.diagram=this,a.change=t,a.propertyName=e,a.object=i,a.oldValue=n,a.oldParam=r,a.newValue=s,a.newParam=o,this.VM(a)}raiseChanged(t,e,i,n,s){this.raiseChangedEvent(2,t,this,e,i,n,s)}t(t,e,i,n,s){this.raiseChangedEvent(2,t,this,e,i,n,s)}get animationManager(){return this.ds}get undoManager(){return this.ki.undoManager}get skipsUndoManager(){return this.Lo}set skipsUndoManager(t){e.s(t,"boolean",xt,"skipsUndoManager"),this.Lo=t,this.ki.skipsUndoManager=t}get delaysLayout(){return this.Yx}set delaysLayout(t){this.Yx=t}zC(t,i){if(null===t||t.diagram!==this)return;const n=this.fe;try{this.fe=!0;const n=t.change;if(2===n){const e=t.object,n=t.propertyName,s=t.getValue(i);if(t.diagram.model.Z(e,n,s),e instanceof Dt){const t=e.part;null!==t&&t.invalidateAdornments()}this.isModified=!0}else if(3===n){const n=t.object,s=t.newParam,r=t.newValue;if(n instanceof qt)if("number"==typeof s&&r instanceof Dt){i?n.te(s):n.insertAt(s,r);const t=n.part;null!==t&&t.invalidateAdornments()}else"number"==typeof s&&r instanceof Kt&&(r.isRow?n.ZL(s,i?void 0:r):n.QL(s,i?void 0:r));else if(n instanceof pt){const e=!0===t.oldParam;"number"==typeof s&&r instanceof ce&&(i?(e||(r.isSelected=!1,r.isHighlighted=!1,r.invalidateAdornments()),n.te(e?s:-1,r,e)):n.Wh(s,r,e))}else n instanceof xt?"number"==typeof s&&r instanceof pt&&(i?this.$L(s):this.Xr(r,s)):e.o("unknown ChangeType.Insert object: "+t.toString());this.isModified=!0}else if(4===n){const n=t.object,s=t.oldParam,r=t.oldValue;if(n instanceof qt)"number"==typeof s&&r instanceof Dt?i?n.insertAt(s,r):n.te(s):"number"==typeof s&&r instanceof Kt&&(r.isRow?n.ZL(s,i?r:void 0):n.QL(s,i?r:void 0));else if(n instanceof pt){const e=!0===t.newParam;"number"==typeof s&&r instanceof ce&&(i?n.Ct.indexOf(r)<0&&n.Wh(s,r,e):(e||(r.isSelected=!1,r.isHighlighted=!1,r.invalidateAdornments()),n.te(e?s:-1,r,e)))}else n instanceof xt?"number"==typeof s&&r instanceof pt&&(i?this.Xr(r,s):this.$L(s)):e.o("unknown ChangeType.Remove object: "+t.toString());this.isModified=!0}else 1===n||e.o("unknown ChangedEvent: "+t.toString())}finally{this.fe=n}}startTransaction(t){return this.undoManager.startTransaction(t)}commitTransaction(t){return this.undoManager.commitTransaction(t)}rollbackTransaction(){return this.undoManager.rollbackTransaction()}commit(t,e){let i=e;void 0===i&&(i="");const n=this.skipsUndoManager;null===i&&(this.skipsUndoManager=!0,i=""),this.undoManager.startTransaction(i);let s=!1;try{t(this),s=!0}finally{s?this.undoManager.commitTransaction(i):this.undoManager.rollbackTransaction(),this.skipsUndoManager=n}}updateAllTargetBindings(t){this.partManager.updateAllTargetBindings(t)}updateAllThemeBindings(){if(this.partManager.updateAllThemeBindings(),null!==this.Ze){const t=this.Ze.part;null!==t&&t.Do()}}setDivBackground(t){this.div&&(this.div.style.backgroundColor=t)}updateAllRelationshipsFromData(){this.partManager.updateAllRelationshipsFromData()}kb(){const t=this.T,e=this.tt,i=this.at;t.Ri(),1!==e&&t.tt(e),(0!==i.x||0!==i.y)&&t.Fs(-i.x,-i.y)}_L(t,e){const i=this.animationManager;if(this.jt||this.ys)return this.tt=e,this.Zl(),this.S(),this.ha(),i.wL(t,this.tt),void this.kb();if(null===this.ft)return this.tt=e,void this.kb();this.jt=!0;const n=this.viewportBounds.copy(),s=this.xt,r=this.bt;let o=this.zoomPoint.x,a=this.zoomPoint.y;const l=this.contentAlignment;isNaN(o)&&(l.isSide()?l.includesSide(w.LeftSide)?o=0:l.includesSide(w.RightSide)&&(o=s-1):o=l.isSpot()?l.x*(s-1):s/2),isNaN(a)&&(l.isSide()?l.includesSide(w.TopSide)?a=0:l.includesSide(w.BottomSide)&&(a=r-1):a=l.isSpot()?l.y*(r-1):r/2),null!==this.scaleComputation&&!this.animationManager.defaultAnimation.isAnimating&&(e=this.scaleComputation(this,e)),e<this.minScale&&(e=this.minScale),e>this.maxScale&&(e=this.maxScale);const h=y.V(this.at.x+o/t-o/e,this.at.y+a/t-a/e);this.position=h,y.e(h),this.tt=e,this.Zl(),this.jt=!1,this.onViewportBoundsChanged(n,this.viewportBounds,t,!1),this.Bs(!1),i.wL(t,this.tt),this.S()}MR(){const t=this.Xt.r;for(let e=0;e<t.length;e++)t[e].NL()}onViewportBoundsChanged(t,e,i,n){if(t.equals(e))return;void 0===n&&(n=!1),n||this.ha(),this.Ql();const s=this.layout;null!==s&&s.isViewportSized&&1===this.autoScale&&(t.width!==e.width||t.height!==e.height)&&s.invalidateLayout();const r=this.currentTool;!0===this.Uc&&r instanceof z&&!this.animationManager.isTicking&&(this.lastInput.documentPoint=this.transformViewToDoc(this.lastInput.viewPoint),r.standardMouseActivity(this)),this.jt||this.invalidateViewport(t,e),this._l(),this.Bi.scale=i,this.Bi.position.x=t.x,this.Bi.position.y=t.y,this.Bi.bounds.a(t),this.Bi.canvasSize.width=Math.round(t.width*i),this.Bi.canvasSize.height=Math.round(t.height*i),this.Bi.newCanvasSize.width=this.xt,this.Bi.newCanvasSize.height=this.bt,this.Bi.isScroll=n,this.D("ViewportBoundsChanged",this.Bi,t),this.isVirtualized&&this.links.each((t=>{t.isAvoiding&&t.actualBounds.intersectsRect(e)&&t.invalidateRoute()}))}_l(t){const e=this.Ze;if(null===e||!e.visible||null===e.part||null===e.layer)return;const i=void 0!==t?t:this.sb;if(!i.isReal())return;const n=i.width,s=i.height;if(e.scale=1,e.angle=0,e.layer.isViewportAligned)e.width=n*this.scale,e.height=s*this.scale,e.part.alignment=w.TopLeft;else{null===e.yi&&(e.yi=new Wt);const t=e.yi.Yc;if(!t.isReal())return;e.width=n+2*t.width,e.height=s+2*t.height;const r=y.l();S.Dg(i.x,i.y,0,0,t.width,t.height,r),r.offset(-t.width,-t.height),e.part.location=r,y.e(r)}}clearSelection(t){void 0===t&&(t=!1);const e=this.selection;if(0===e.count)return;t||this.D("ChangingSelection",e);const i=e.toArray(),n=i.length;for(let t=0;t<n;t++){i[t].isSelected=!1}e.Nt(),e.clear(),e.u(),t||this.D("ChangedSelection",e)}select(t){null!==t&&t.diagram===this&&(!t.isSelected||this.selection.count>1)&&(this.D("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.D("ChangedSelection",this.selection))}selectCollection(t){if(this.D("ChangingSelection",this.selection),this.clearSelection(!0),Array.isArray(t)){const i=t.length;for(let n=0;n<i;n++){const i=t[n];i instanceof ce||e.o("Diagram.selectCollection given something that is not a Part: "+i),i.isSelected=!0}}else{const i=t.iterator;for(;i.next();){const t=i.value;t instanceof ce||e.o("Diagram.selectCollection given something that is not a Part: "+t),t.isSelected=!0}}this.D("ChangedSelection",this.selection)}clearHighlighteds(){const t=this.highlighteds;if(t.count>0){const e=t.toArray(),i=e.length;for(let t=0;t<i;t++){e[t].isHighlighted=!1}t.Nt(),t.clear(),t.u()}}highlight(t){null!==t&&t.diagram===this&&(!t.isHighlighted||this.highlighteds.count>1)&&(this.clearHighlighteds(),t.isHighlighted=!0)}highlightCollection(t){const i=(new u).addAll(t),n=this.highlighteds.copy().removeAll(i).iterator;for(;n.next();){n.value.isHighlighted=!1}const s=i.iterator;for(;s.next();){const t=s.value;t instanceof ce||e.o("Diagram.highlightCollection given something that is not a Part: "+t),t.isHighlighted=!0}}scroll(t,i,n){void 0===n&&(n=1);const s="up"===i||"down"===i;let r=0;const o=y.l();if("pixel"===t)r=n;else if("line"===t)r=n*(s?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if("page"===t){let t=s?this.viewportBounds.height:this.viewportBounds.width;if(t*=this.scale,0!==t){r=n*Math.max(t-(s?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0)}}else{if("document"===t){const t=this.documentBounds,e=this.viewportBounds;return"up"===i?this.position=o.i(e.x,t.y):"left"===i?this.position=o.i(t.x,e.y):"down"===i?this.position=o.i(e.x,t.bottom-e.height):"right"===i&&(this.position=o.i(t.right-e.width,e.y)),void y.e(o)}e.o("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}r/=this.scale;const a=this.position;"up"===i?this.position=o.i(a.x,a.y-r):"down"===i?this.position=o.i(a.x,a.y+r):"left"===i?this.position=o.i(a.x-r,a.y):"right"===i?this.position=o.i(a.x+r,a.y):e.o("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+i),y.e(o)}scrollToRect(t){const e=this.viewportBounds;if(e.containsRect(t))return;const i=t.center;i.x-=e.width/2,i.y-=e.height/2,this.position=i}centerRect(t){const e=this.viewportBounds,i=t.center;i.x-=e.width/2,i.y-=e.height/2,this.position=i}transformDocToView(t){return t.copy().T(this.T)}transformViewToDoc(t){return t.copy().Oe(this.T)}$F(t){return t.Oe(this.T)}static None=1;static Uniform=2;static UniformToFill=3;static CycleAll=1;static CycleNotDirected=2;static CycleNotDirectedFast=3;static CycleNotUndirected=4;static CycleDestinationTree=5;static CycleSourceTree=6;static DocumentScroll=1;static InfiniteScroll=2;static TreeParentCollapsed=1;static AllParentsCollapsed=2;static AnyParentsCollapsed=3;get opacity(){return this.$t}set opacity(t){const i=this.$t;i!==t&&(e.s(t,"number",xt,"opacity"),(t<0||t>1)&&e.W(t,"0 <= value <= 1",xt,"opacity"),this.$t=t,this.t("opacity",i,t),this.S())}get validCycle(){return this.Ex}set validCycle(t){const e=this.Ex;e!==t&&(this.Ex=t,this.t("validCycle",e,t))}get layers(){return this.Xt.iterator}get isModelReadOnly(){const t=this.ki;return null!==t&&t.isReadOnly}set isModelReadOnly(t){const e=this.ki;null!==e&&(e.isReadOnly=t)}get isReadOnly(){return this.Ao}set isReadOnly(t){const i=this.Ao;i!==t&&(e.s(t,"boolean",xt,"isReadOnly"),this.Ao=t,this.t("isReadOnly",i,t))}get isEnabled(){return this.Oi}set isEnabled(t){const i=this.Oi;i!==t&&(e.s(t,"boolean",xt,"isEnabled"),this.Oi=t,this.t("isEnabled",i,t))}get allowClipboard(){return this.Kx}set allowClipboard(t){const i=this.Kx;i!==t&&(e.s(t,"boolean",xt,"allowClipboard"),this.Kx=t,this.t("allowClipboard",i,t))}get allowCopy(){return this.Fl}set allowCopy(t){const i=this.Fl;i!==t&&(e.s(t,"boolean",xt,"allowCopy"),this.Fl=t,this.t("allowCopy",i,t))}get allowDelete(){return this.Rl}set allowDelete(t){const i=this.Rl;i!==t&&(e.s(t,"boolean",xt,"allowDelete"),this.Rl=t,this.t("allowDelete",i,t))}get allowDragOut(){return this.Gx}set allowDragOut(t){const i=this.Gx;i!==t&&(e.s(t,"boolean",xt,"allowDragOut"),this.Gx=t,this.t("allowDragOut",i,t))}get allowDrop(){return this.Hx}set allowDrop(t){const i=this.Hx;i!==t&&(e.s(t,"boolean",xt,"allowDrop"),this.Hx=t,this.t("allowDrop",i,t))}get allowTextEdit(){return this.vl}set allowTextEdit(t){const i=this.vl;i!==t&&(e.s(t,"boolean",xt,"allowTextEdit"),this.vl=t,this.t("allowTextEdit",i,t))}get allowGroup(){return this.Ol}set allowGroup(t){const i=this.Ol;i!==t&&(e.s(t,"boolean",xt,"allowGroup"),this.Ol=t,this.t("allowGroup",i,t))}get allowUngroup(){return this.Il}set allowUngroup(t){const i=this.Il;i!==t&&(e.s(t,"boolean",xt,"allowUngroup"),this.Il=t,this.t("allowUngroup",i,t))}get allowInsert(){return this.jx}set allowInsert(t){const i=this.jx;i!==t&&(e.s(t,"boolean",xt,"allowInsert"),this.jx=t,this.t("allowInsert",i,t))}get allowLink(){return this.El}set allowLink(t){const i=this.El;i!==t&&(e.s(t,"boolean",xt,"allowLink"),this.El=t,this.t("allowLink",i,t))}get allowRelink(){return this.Ul}set allowRelink(t){const i=this.Ul;i!==t&&(e.s(t,"boolean",xt,"allowRelink"),this.Ul=t,this.t("allowRelink",i,t))}get allowMove(){return this.Bl}set allowMove(t){const i=this.Bl;i!==t&&(e.s(t,"boolean",xt,"allowMove"),this.Bl=t,this.t("allowMove",i,t))}get allowReshape(){return this.Vl}set allowReshape(t){const i=this.Vl;i!==t&&(e.s(t,"boolean",xt,"allowReshape"),this.Vl=t,this.t("allowReshape",i,t))}get allowResize(){return this.zl}set allowResize(t){const i=this.zl;i!==t&&(e.s(t,"boolean",xt,"allowResize"),this.zl=t,this.t("allowResize",i,t))}get allowRotate(){return this.Xl}set allowRotate(t){const i=this.Xl;i!==t&&(e.s(t,"boolean",xt,"allowRotate"),this.Xl=t,this.t("allowRotate",i,t))}get allowSelect(){return this.Yl}set allowSelect(t){const i=this.Yl;i!==t&&(e.s(t,"boolean",xt,"allowSelect"),this.Yl=t,this.t("allowSelect",i,t))}get allowUndo(){return this.qx}set allowUndo(t){const i=this.qx;i!==t&&(e.s(t,"boolean",xt,"allowUndo"),this.qx=t,this.t("allowUndo",i,t))}get allowZoom(){return this.Wx}set allowZoom(t){const i=this.Wx;i!==t&&(e.s(t,"boolean",xt,"allowZoom"),this.Wx=t,this.t("allowZoom",i,t))}get hasVerticalScrollbar(){return this.vu}set hasVerticalScrollbar(t){const i=this.vu;i!==t&&(e.s(t,"boolean",xt,"hasVerticalScrollbar"),this.vu=t,this.ha(),this.S(),this.t("hasVerticalScrollbar",i,t),this.Bs(!1))}get hasHorizontalScrollbar(){return this.Ru}set hasHorizontalScrollbar(t){const i=this.Ru;i!==t&&(e.s(t,"boolean",xt,"hasHorizontalScrollbar"),this.Ru=t,this.ha(),this.S(),this.t("hasHorizontalScrollbar",i,t),this.Bs(!1))}get allowHorizontalScroll(){return this.Jx}set allowHorizontalScroll(t){const i=this.Jx;i!==t&&(e.s(t,"boolean",xt,"allowHorizontalScroll"),this.Jx=t,this.t("allowHorizontalScroll",i,t),this.Bs(!1))}get allowVerticalScroll(){return this.$x}set allowVerticalScroll(t){const i=this.$x;i!==t&&(e.s(t,"boolean",xt,"allowVerticalScroll"),this.$x=t,this.t("allowVerticalScroll",i,t),this.Bs(!1))}get scrollHorizontalLineChange(){return this.Zx}set scrollHorizontalLineChange(t){const i=this.Zx;i!==t&&(e.s(t,"number",xt,"scrollHorizontalLineChange"),t<0&&e.W(t,">= 0",xt,"scrollHorizontalLineChange"),this.Zx=t,this.t("scrollHorizontalLineChange",i,t))}get scrollVerticalLineChange(){return this.Qx}set scrollVerticalLineChange(t){const i=this.Qx;i!==t&&(e.s(t,"number",xt,"scrollVerticalLineChange"),t<0&&e.W(t,">= 0",xt,"scrollVerticalLineChange"),this.Qx=t,this.t("scrollVerticalLineChange",i,t))}get lastInput(){return this.Qh}set lastInput(t){this.Qh=t}get previousInput(){return this.Br}set previousInput(t){this.Br=t}get firstInput(){return this.Km}set firstInput(t){this.Km=t}get currentCursor(){return this.Ux}set currentCursor(t){if(""===t&&(t=this.Um),this.Ux!==t){e.s(t,"string",xt,"currentCursor");const i=this.ft,n=this.St;if(null===i||null===n)return;this.Ux=t;const s=i.style.cursor;i.style.cursor=t,n.style.cursor=t,i.style.cursor===s&&(i.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,i.style.cursor===s&&(i.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,i.style.cursor===s&&(i.style.cursor=t,n.style.cursor=t)))}}get defaultCursor(){return this.Um}set defaultCursor(t){""===t&&(t="auto");const i=this.Um;i!==t&&(e.s(t,"string",xt,"defaultCursor"),this.Um=t,this.t("defaultCursor",i,t))}get click(){return this.Cr}set click(t){const i=this.Cr;i!==t&&(null!==t&&e.k(t,xt,"click"),this.Cr=t,this.t("click",i,t))}get doubleClick(){return this.Lr}set doubleClick(t){const i=this.Lr;i!==t&&(null!==t&&e.k(t,xt,"doubleClick"),this.Lr=t,this.t("doubleClick",i,t))}get contextClick(){return this.Ar}set contextClick(t){const i=this.Ar;i!==t&&(null!==t&&e.k(t,xt,"contextClick"),this.Ar=t,this.t("contextClick",i,t))}get mouseOver(){return this.Tr}set mouseOver(t){const i=this.Tr;i!==t&&(null!==t&&e.k(t,xt,"mouseOver"),this.Tr=t,this.t("mouseOver",i,t))}get mouseHover(){return this.Dr}set mouseHover(t){const i=this.Dr;i!==t&&(null!==t&&e.k(t,xt,"mouseHover"),this.Dr=t,this.t("mouseHover",i,t))}get mouseHold(){return this.Fr}set mouseHold(t){const i=this.Fr;i!==t&&(null!==t&&e.k(t,xt,"mouseHold"),this.Fr=t,this.t("mouseHold",i,t))}get mouseDragOver(){return this.Bx}set mouseDragOver(t){const i=this.Bx;i!==t&&(null!==t&&e.k(t,xt,"mouseDragOver"),this.Bx=t,this.t("mouseDragOver",i,t))}get mouseDrop(){return this.Rr}set mouseDrop(t){const e=this.Rr;e!==t&&(this.Rr=t,this.t("mouseDrop",e,t))}get handlesDragDropForTopLevelParts(){return this.Vx}set handlesDragDropForTopLevelParts(t){const i=this.Vx;i!==t&&(e.s(t,"boolean",xt,"handlesDragDropForTopLevelParts"),this.Vx=t,this.t("handlesDragDropForTopLevelParts",i,t))}get mouseEnter(){return this.vr}set mouseEnter(t){const i=this.vr;i!==t&&(null!==t&&e.k(t,xt,"mouseEnter"),this.vr=t,this.t("mouseEnter",i,t))}get mouseLeave(){return this.Or}set mouseLeave(t){const i=this.Or;i!==t&&(null!==t&&e.k(t,xt,"mouseLeave"),this.Or=t,this.t("mouseLeave",i,t))}get toolTip(){return this.Ir}set toolTip(t){const e=this.Ir;e!==t&&(this.Ir=t,this.t("toolTip",e,t))}get contextMenu(){return this.Er}set contextMenu(t){const e=this.Er;e!==t&&(this.Er=t,this.t("contextMenu",e,t))}get commandHandler(){return this.sM}set commandHandler(t){const e=this.sM;e!==t&&(e&&e.doStop(),this.sM=t,t.Mo(this),t.doStart())}get toolManager(){return this.tM}set toolManager(t){this.tM!==t&&(this.tM=t,t.diagram=this)}get defaultTool(){return this.iM}set defaultTool(t){const e=this.iM;e!==t&&(this.iM=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}get currentTool(){return this.eM}set currentTool(t){const e=this.eM;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&(this.eM=t,t.diagram=this,t.doStart())}get selection(){return this.cM}get maxSelectionCount(){return this.eb}set maxSelectionCount(t){const i=this.eb;if(i!==t)if(e.s(t,"number",xt,"maxSelectionCount"),t>=0&&!isNaN(t)){if(this.eb=t,this.t("maxSelectionCount",i,t),!this.undoManager.isUndoingRedoing){const e=this.selection.count-t;if(e>0){this.D("ChangingSelection",this.selection);const t=this.selection.toArray();for(let i=0;i<e;i++)t[i].isSelected=!1;this.D("ChangedSelection",this.selection)}}}else e.W(t,">= 0",xt,"maxSelectionCount")}get nodeSelectionAdornmentTemplate(){return this.Xm}set nodeSelectionAdornmentTemplate(t){const e=this.Xm;e!==t&&(this.Xm=t.Et(),this.t("nodeSelectionAdornmentTemplate",e,t))}get groupSelectionAdornmentTemplate(){return this.ob}set groupSelectionAdornmentTemplate(t){const e=this.ob;e!==t&&(this.ob=t.Et(),this.t("groupSelectionAdornmentTemplate",e,t))}get linkSelectionAdornmentTemplate(){return this.rb}set linkSelectionAdornmentTemplate(t){const e=this.rb;e!==t&&(this.rb=t.Et(),this.t("linkSelectionAdornmentTemplate",e,t))}get highlighteds(){return this.fM}get isModified(){const t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.Uu&&this.Os!==t.historyIndex:this.Uu}set isModified(t){if(this.Uu!==t){e.s(t,"boolean",xt,"isModified"),this.Uu=t;const i=this.undoManager;!t&&i.isEnabled&&(this.Os=i.historyIndex),t||this.tA()}}tA(){const t=this.isModified;this.hM!==t&&(this.hM=t,this.D("Modified"))}get model(){return this.ki}set model(t){const i=this.ki;if(i!==t){this.currentTool.doCancel(),i&&i.undoManager!==t.undoManager&&i.undoManager.isInTransaction&&e.o("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.stopAnimation(!0);const n=this.IL(!0);this.Hn=!1,this.Fu=!0,this.Os=-2,this.xr=!1;const s=this.jt;this.jt=!0,this.animationManager.Dl("Model"),i&&(null!==this.Kn&&this.Kn.each((t=>i.removeChangedListener(t))),i.removeChangedListener(this.lM)),this.ki=t,this.partManager=this.vR(this.ki.type),this.initializePartManager(this.partManager);for(let t=0;t<n.length;t++)this.add(n[t]);t.addChangedListener(this.rM),this.partManager.zM(),t.removeChangedListener(this.rM),t.addChangedListener(this.lM),null!==this.Kn&&this.Kn.each((e=>t.addChangedListener(e))),this.jt=s,this.invalidateDocumentBounds(),this.jt||this.S(),i&&t.undoManager.copyProperties(i.undoManager)}}get themeManager(){return this.NM}set themeManager(t){const e=this.NM;e!==t&&(e&&e.removeDiagram(this),this.NM=t,null!==t&&t.addDiagram(this))}initializePartManager(t){}static CM(t,e){xt.TL.set(t,e)}static get licenseKey(){return xt.XM.last()}static set licenseKey(t){xt.XM.add(t.replace(/\s/g,""))}static get version(){return xt.OR}static XM=new l;static OR="3.0.22";vR(t){const e=xt.TL.get(t);return null!==e?new e:new Ie}get X(){return this.oM}set X(t){this.oM=t}get xx(){return this.CL}IR(t){if(t.model!==this.model)return;const i=t.change,n=t.propertyName;if(1!==i||"S"!==n[0]){if(this.X){this.X=!1;try{if(""===t.modelChange&&1===i){("FinishedUndo"===n||"FinishedRedo"===n)&&(this.D("ChangedSelection",this.selection),this.Mi());const i=this.animationManager;"RolledBackTransaction"===n&&i.stopAnimation(),this.bL(),this.vc=!0,this.maybeUpdate(),(0===this.undoManager.transactionLevel||1===this.undoManager.transactionLevel)&&i.OS(),"CommittedTransaction"===n&&this.undoManager.isJustDiscarded&&(this.Os=Math.min(this.Os,this.undoManager.historyIndex-1)),("CommittedTransaction"===n||"RolledBackTransaction"===n)&&this.undoManager.Ew&&e.ir((()=>{this.isModified=!1}),1);const s=t.isTransactionFinished;if(s&&(this.tA(),this.xx.clear(),this.animationManager.OF()),!this.zx&&s&&this.lastInput.targetDiagram){this.zx=!0;const t=this;e.ir((()=>{t.currentTool.standardMouseOver(),t.zx=!1}),10)}}}finally{this.X=!0}}}else if("StartingFirstTransaction"===n){const t=this,e=this.toolManager;e.mouseDownTools.each((e=>e.diagram=t)),e.mouseMoveTools.each((e=>e.diagram=t)),e.mouseUpTools.each((e=>e.diagram=t)),this.routers.each((e=>e.diagram=t)),!this.ys&&!this.Hn&&(this.vc=!0,this.Fu&&(this.xr=!0))}else if("StartingUndo"===n||"StartingRedo"===n){const t=this.animationManager;this.skipsUndoManager||(t.defaultAnimation.isAnimating&&t.stopAnimation(),t.getBundleAnimation().isAnimating&&t.getBundleAnimation().stop()),this.D("ChangingSelection",this.selection)}else if("StartedTransaction"===n){const t=this.animationManager;t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.stopAnimation()}}get fe(){return this.nM}set fe(t){this.nM=t}get du(){return this.Xx}set du(t){this.Xx=t}GL(t){const e=t.C.r;for(const t of e)t instanceof oe&&this.YM(t)}YM(t){const e=t.element;if(!(null!==e&&e instanceof HTMLImageElement&&(e.ts instanceof u&&e.ts.add(this),t.ER(),e.o0)))return;const i=e.getAttribute("src")||"",n=this.Wl.get(i);if(null===n){oe.iA(t,e);const n=[];n.push(t),this.Wl.set(i,n)}else{for(let e=0;e<n.length;e++)if(n[e]===t)return;n.push(t)}}UR(t){const e=t.C.r,i=e.length;for(let t=0;t<i;t++)this.KM(e[t])}KM(t){if(!(t instanceof oe))return;const e=t.element;if(!(null!==e&&e instanceof HTMLImageElement&&e.o0))return;const i=e.getAttribute("src")||"",n=this.Wl.get(i);if(null!==n)for(let s=0;s<n.length;s++)if(n[s]===t)return n.splice(s,1),void(0===n.length&&(this.Wl.delete(i),oe.BR(e),e.ts instanceof u&&e.ts.delete(this),oe.clearCache(i)))}EL(){oe.clearCache(),this.Wl.clear()}rebuildParts(){this.partManager.rebuildParts()}Lc(t,e){this.ds.Lc(t,e)}Cc(t,e){this.ds.Cc(t,e)}findPartForKey(t){return this.partManager.findPartForKey(t)}findNodeForKey(t){return this.partManager.findNodeForKey(t)}findLinkForKey(t){return this.partManager.findLinkForKey(t)}findPartForData(t){return this.partManager.findPartForData(t)}findNodeForData(t){return this.partManager.findNodeForData(t)}findLinkForData(t){return this.partManager.findLinkForData(t)}findNodesByExample(...t){return this.partManager.findNodesByExample(...t)}findLinksByExample(...t){return this.partManager.findLinksByExample(...t)}get nodeTemplate(){return this.Ur.get("")}set nodeTemplate(t){const e=this.Ur.get("");e!==t&&(this.Ur.set("",t),this.t("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.rebuildParts())}get nodeTemplateMap(){return this.Ur}set nodeTemplateMap(t){const e=this.Ur;e!==t&&(this.Ur=t,this.t("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.rebuildParts())}get groupTemplate(){return this.Zh.get("")}set groupTemplate(t){const e=this.Zh.get("");e!==t&&(this.Zh.set("",t),this.t("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.rebuildParts())}get groupTemplateMap(){return this.Zh}set groupTemplateMap(t){const e=this.Zh;e!==t&&(this.Zh=t,this.t("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.rebuildParts())}get linkTemplate(){return this.jl.get("")}set linkTemplate(t){const e=this.jl.get("");e!==t&&(this.jl.set("",t),this.t("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.rebuildParts())}get linkTemplateMap(){return this.jl}set linkTemplateMap(t){const e=this.jl;e!==t&&(this.jl=t,this.t("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.rebuildParts())}get isMouseCaptured(){return this.aM}set isMouseCaptured(e){const i=this.ft;if(null===i)return;const n=i.Tt;n instanceof SVGElement||(e?(this.lastInput.bubbles=!1,this.Pi(n,"pointermove",this.sa,!1),this.Pi(n,"pointerdown",this.$l,!1),this.Pi(n,"pointerup",this.na,!1),this.Pi(n,"pointerout",this.oa,!1),this.Pi(n,"pointercancel",this.ra,!1),this.Ut(t,"pointermove",this.sa,!0),this.Ut(t,"pointerdown",this.$l,!0),this.Ut(t,"pointerup",this.na,!0),this.Ut(t,"pointerout",this.oa,!0),this.Ut(t,"pointercancel",this.ra,!0),this.Pi(n,"wheel",this.ea,!1),this.Ut(t,"wheel",this.ea,!0),this.Ut(t,"selectstart",this.Gh,!1)):(this.Pi(t,"pointermove",this.sa,!0),this.Pi(t,"pointerdown",this.$l,!0),this.Pi(t,"pointerup",this.na,!0),this.Pi(t,"pointerout",this.oa,!0),this.Pi(t,"pointercancel",this.ra,!0),this.Ut(n,"pointermove",this.sa,!1),this.Ut(n,"pointerdown",this.$l,!1),this.Ut(n,"pointerup",this.na,!1),this.Ut(n,"pointerout",this.oa,!1),this.Ut(n,"pointercancel",this.ra,!1),this.Pi(t,"wheel",this.ea,!0),this.Pi(t,"selectstart",this.Gh,!1),this.Ut(n,"wheel",this.ea,!1)),this.aM=e)}get position(){return this.at}set position(t){if(this.at.equals(t))return;const e=y.l().a(this.at),i=this.viewportBounds.copy();if(this.at.a(t),this.animationManager.yL(e,this.at),this.jt||null===this.ft&&!this.Iu.isReal())this.Zl(),this.kb();else{this.jt=!0;const t=this.scale,e=this.xt/t,i=this.bt/t;this.DM(this.zm,e,i,this.Fc,!1),this.jt=!1}if(!this.jt){const t=this.viewportBounds;this.onViewportBoundsChanged(i,t,this.tt,!1)}y.e(e)}get initialPosition(){return this.Sx}set initialPosition(t){this.Sx.equals(t)||(this.Sx=t.P())}get initialScale(){return this.Mx}set initialScale(t){this.Mx!==t&&(e.s(t,"number",xt,"initialScale"),this.Mx=t)}get grid(){return null===this.Ze&&(this.Ze=this.BL()),this.Ze}set grid(t){let i=this.Ze;if(i!==t){null===i&&(this.Ze=this.BL(),i=this.Ze),t.type!==qt.Grid&&e.o("Diagram.grid must be a Panel of type Panel.Grid");const n=i.panel;null!==n&&n.remove(i),this.Ze=t,t.name="GRID",null!==n&&n.add(t),this.Eu=!1,this.S(),this.t("grid",i,t)}}get viewportBounds(){return this.sb}Zl(){const t=this.sb,e=this.at,i=this.tt;t.i(e.x,e.y,Math.max(this.xt,0)/i,Math.max(this.bt,0)/i),this.Ql()}get viewSize(){return this.Iu}set viewSize(t){const e=this.viewSize;if(!e.equals(t)){t=t.P(),this.Iu=t;let i=0,n=0;t.isReal()?(i=t.width,n=t.height):null!==this.St&&(i=this.St.clientWidth||1,n=this.St.clientHeight||1),this.xt=i,this.bt=n,this.Zl(),this.invalidateDocumentBounds(),this.t("viewSize",e,t),this.S()}}get fixedBounds(){return this.Ax}set fixedBounds(t){const i=this.Ax;i.equals(t)||((t.width===-1/0||t.height===1/0||t.height===-1/0)&&e.o("fixedBounds width/height must not be Infinity"),t=t.P(),this.Ax=t,this.invalidateDocumentBounds(),this.t("fixedBounds",i,t))}get scrollMargin(){return this.Jh}set scrollMargin(t){"number"==typeof t&&(t=new b(t));const e=this.Jh;e.equals(t)||(t=t.P(),this.Jh=t,this.t("scrollMargin",e,t),this.mu())}get scrollMode(){return this.jh}set scrollMode(t){const e=this.jh;e!==t&&(this.jh=t,1===t&&this.Bs(!1),this.t("scrollMode",e,t),this.ha(),this.S())}get scrollsPageOnFocus(){return this.Tx}set scrollsPageOnFocus(t){const i=this.Tx;i!==t&&(e.s(t,"boolean",xt,"scrollsPageOnFocus"),this.Tx=t,this.t("scrollsPageOnFocus",i,t))}get positionComputation(){return this.Dx}set positionComputation(t){const i=this.Dx;i!==t&&(null!==t&&e.k(t,xt,"positionComputation"),this.Dx=t,this.Bs(!1),this.t("positionComputation",i,t))}get scaleComputation(){return this.Fx}set scaleComputation(t){const i=this.Fx;i!==t&&(null!==t&&e.k(t,xt,"scaleComputation"),this.Fx=t,this._L(this.scale,this.scale),this.t("scaleComputation",i,t))}get documentBounds(){return this.zm}eA(t){this._h=!1;let e=this.zm;e.equals(t)||(e=e.copy(),this.zm.a(t),this.Bs(!1),this.D("DocumentBoundsChanged",void 0,e),this.ha(),this.S())}ensureBounds(){if(this._h){const t=x.l();this.eA(this.computeBounds(t)),x.e(t)}}get isVirtualized(){return this.nb}set isVirtualized(t){const i=this.nb;i!==t&&(e.s(t,"boolean",xt,"isVirtualized"),this.nb=t,this.t("isVirtualized",i,t))}get scale(){return this.tt}set scale(t){const e=this.tt;e!==t&&this._L(e,t)}get defaultScale(){return this.Gm}set defaultScale(t){this.Gm=t}get autoScale(){return this.Gl}set autoScale(t){const e=this.Gl;e!==t&&(this.Gl=t,this.t("autoScale",e,t),1!==t&&this.Bs(!1))}get initialAutoScale(){return this.Sr}set initialAutoScale(t){const e=this.Sr;e!==t&&(this.Sr=t,this.t("initialAutoScale",e,t))}get initialViewportSpot(){return this.vx}set initialViewportSpot(t){const i=this.vx;i!==t&&(t.isSpot()||e.o("initialViewportSpot must be a specific Spot: "+t),this.vx=t,this.t("initialViewportSpot",i,t))}get initialDocumentSpot(){return this.Rx}set initialDocumentSpot(t){const i=this.Rx;i!==t&&(t.isSpot()||e.o("initialViewportSpot must be a specific Spot: "+t),this.Rx=t,this.t("initialDocumentSpot",i,t))}get minScale(){return this.Nx}set minScale(t){const i=this.Nx;i!==t&&(t>0?(this.Nx=t,this.t("minScale",i,t),t>this.scale&&(this.scale=t)):e.W(t,"> 0",xt,"minScale"))}get maxScale(){return this.Cx}set maxScale(t){const i=this.Cx;i!==t&&(t>0?(this.Cx=t,this.t("maxScale",i,t),t<this.scale&&(this.scale=t)):e.W(t,"> 0",xt,"maxScale"))}get zoomPoint(){return this.Lx}set zoomPoint(t){this.Lx.equals(t)||(t=t.P(),this.Lx=t)}get contentAlignment(){return this.Fc}set contentAlignment(t){const e=this.Fc;e.equals(t)||(t=t.P(),this.Fc=t,this.t("contentAlignment",e,t),this.Bs(!1))}get initialContentAlignment(){return this.Om}set initialContentAlignment(t){const e=this.Om;e.equals(t)||(t=t.P(),this.Om=t,this.t("initialContentAlignment",e,t))}get padding(){return this.Zt}set padding(t){"number"==typeof t&&(t=new b(t));const e=this.Zt;e.equals(t)||(t=t.P(),this.Zt=t,this.invalidateDocumentBounds(),this.t("padding",e,t))}get partManager(){return this.pM}set partManager(t){const i=this.pM;i!==t&&(null!==t.diagram&&e.o("Cannot share PartManagers between Diagrams: "+t.toString()),i&&i.Mo(null),this.pM=t,t.Mo(this))}get nodes(){return this.partManager.nodes.iterator}get links(){return this.partManager.links.iterator}get parts(){return this.partManager.parts.iterator}findTopLevelNodesAndLinks(){const t=new u,e=this.nodes;for(;e.next();){const i=e.value;i.isTopLevel&&t.add(i)}const i=this.links;for(;i.next();){const e=i.value;e.isTopLevel&&t.add(e)}return t.iterator}findTopLevelGroups(){return this.zr.iterator}get routers(){return this.Vc}doLinkRouting(t){this.Co=!0;const e=this.Vc.r;for(let i=0;i<e.length;i++)e[i].canRoute(t)&&e[i].routeLinks(this.Mr,t);this.Co=!1}get layout(){return this.ie}set layout(t){const e=this.ie;e!==t&&(this.ie=t,t.diagram=this,t.group=null,this.Vr=!0,this.t("layout",e,t),this.requestUpdate())}layoutDiagram(t){this.Mi(),t&&this.Cb(!0),this.ys?this.vM(!1,this.xl||0!==this.Vc.count&&0!==this.Yn.size):(this.vc=!0,this.ur())}Cb(t){const e=this.zr.iterator;for(;e.next();)this.sA(e.value,t);this.layout&&(t?this.layout.isValidLayout=!1:this.layout.invalidateLayout())}sA(t,e){if(null===t)return;const i=t.aa.iterator;for(;i.next();){const t=i.value;this.sA(t,e)}null!==t.layout&&(e?t.layout.isValidLayout=!1:t.layout.invalidateLayout())}vM(t,e){if(this.Yx)return;const i=this.X;this.X=!0;const n="Layout",s=this.undoManager.transactionLevel,r=this.layout,o=this.animationManager;try{0===s&&(this.undoManager.yl=!0,this.startTransaction(n)),s<=1&&!o.defaultAnimation.isAnimating&&!o.pi&&(t||o.Dl(n)),this.Vr=!1;let i=this.zr.iterator;for(;i.next();)this.nA(i.value,t,s,e);let a=!1;if(r.isValidLayout||(!t||r.isRealtime||null===r.isRealtime||0===s?(r.doLayout(this),this.t0(this),a=!0,r.isValidLayout=!0):this.Vr=!0),a||this.t0(this),this.doLinkRouting(this),this.Mr.clear(),0!==this.$h.size){for(let t=0;t<23&&0!==this.$h.size;t++){for(i=this.zr.iterator;i.next();)this.oA(i.value);const t=this.Mr;this.Mr=this.$h,this.$h=t,this.t0(this),this.doLinkRouting(this)}this.Mr.clear(),this.$h.clear()}}finally{const t=this.undoManager.yl;0===s&&(this.commitTransaction(n),this.undoManager.yl=!1),t&&(0===s||1===s)&&o.OS(),this.Vr&&(this.Vr=!r.isValidLayout),this.X=i}}nA(t,e,i,n){const s=t.aa.iterator;for(;s.next();)this.nA(s.value,e,i,n);const r=t.layout;null===r||r.isValidLayout?n&&this.doLinkRouting(t):!e||r.isRealtime||0===i?(t.ca=!t.location.isReal(),r.doLayout(t),t.invalidateLayout(32),this.Pb(t),this.t0(t),this.doLinkRouting(t),r.isValidLayout=!0):(this.doLinkRouting(t),this.Vr=!0)}oA(t){const e=t.aa.iterator;for(;e.next();)this.oA(e.value);this.t0(t),this.doLinkRouting(t)}get isTreePathToChildren(){return this.Ox}set isTreePathToChildren(t){const i=this.Ox;if(i!==t&&(e.s(t,"boolean",xt,"isTreePathToChildren"),this.Ox=t,this.t("isTreePathToChildren",i,t),!this.undoManager.isUndoingRedoing)){const t=this.nodes;for(;t.next();)t.value.r0()}}findTreeRoots(){const t=new l,e=this.nodes;for(;e.next();){const i=e.value;i.isTopLevel&&null===i.findTreeParentLink()&&t.add(i)}return t.iterator}get treeCollapsePolicy(){return this.Ix}set treeCollapsePolicy(t){const i=this.Ix;i!==t&&(1!==t&&2!==t&&3!==t&&e.o("Unknown Diagram.treeCollapsePolicy: "+t),this.Ix=t,this.t("treeCollapsePolicy",i,t))}get isCollapsingExpanding(){return this._S}set isCollapsingExpanding(t){this._S=t}rR(){const t=new m,e=new m;function i(i){const n=i.toLowerCase(),s=new l;t.set(i,s),t.set(n,s),e.set(i,i),e.set(n,i)}i("InitialAnimationStarting"),i("AnimationStarting"),i("AnimationFinished"),i("BackgroundSingleClicked"),i("BackgroundDoubleClicked"),i("BackgroundContextClicked"),i("ClipboardChanged"),i("ClipboardPasted"),i("DocumentBoundsChanged"),i("ExternalObjectsDropped"),i("GainedFocus"),i("InitialLayoutCompleted"),i("LayoutCompleted"),i("LinkDrawn"),i("LinkRelinked"),i("LinkReshaped"),i("LostFocus"),i("Modified"),i("ObjectSingleClicked"),i("ObjectDoubleClicked"),i("ObjectContextClicked"),i("PartCreated"),i("PartResized"),i("PartRotated"),i("SelectionMoved"),i("SelectionCopied"),i("SelectionDeleting"),i("SelectionDeleted"),i("SelectionGrouped"),i("SelectionUngrouped"),i("ChangingSelection"),i("ChangedSelection"),i("SubGraphCollapsed"),i("SubGraphExpanded"),i("TextEdited"),i("ThemeChanged"),i("TreeCollapsed"),i("TreeExpanded"),i("ViewportBoundsChanged"),i("InvalidateDraw"),this.ZS=t,this.QS=e}KL(t){const e=this.QS.get(t);return null!==e?e:this.QS.get(t.toLowerCase())}GM(t){let i=this.ZS.get(t);if(null!==i)return i;const n=t.toLowerCase();if(i=this.ZS.get(n),null!==i)return i;e.o("Unknown DiagramEvent name: "+t)}addDiagramListener(t,i){e.s(t,"string",xt,"addDiagramListener:name"),e.k(i,xt,"addDiagramListener:listener");const n=this.GM(t);return null!==n&&n.add(i),this}removeDiagramListener(t,i){e.s(t,"string",xt,"removeDiagramListener:name"),e.k(i,xt,"addDiagramListener:listener");const n=this.GM(t);null!==n&&n.delete(i)}raiseDiagramEvent(t,e,i){this.D(t,e,i)}D(t,e,i){const n=this.GM(t),s=new E;s.diagram=this;const r=this.KL(t);null!==r&&(s.name=r),void 0!==e&&(s.subject=e),void 0!==i&&(s.parameter=i);const o=n.length;if(1===o)n.elt(0)(s);else if(0!==o){const t=n.toArray();for(let e=0;e<o;e++){(0,t[e])(s)}}}isUnoccupied(t,e){return this.getPositions(!1,null,e||null).isUnoccupied(t.x,t.y,t.width,t.height)}computeOccupiedArea(t){return this.isVirtualized?this.viewportBounds.copy():this._h?this.zL(t):t.a(this.documentBounds)}getPositions(t,e,i){let n=this.Hl;null===n&&(this.Hl=n=new ke(this.avoidanceCellSize));let s=e;if(n.Fo||n.fa!==s||n.HM!==i){if(n.jM=Math.max(n.Kc+1,Math.floor(this.avoidanceLimit/this.avoidanceCellSize.width)),n.qM=Math.max(n.Kc+1,Math.floor(this.avoidanceLimit/this.avoidanceCellSize.height)),null!==s&&(s=this.rA(s)),null===s){const t=x.l();this.computeOccupiedArea(t),t.inflate(100,100),n.Lb(t);const e=this.nodes;for(;e.next();){const n=e.value,s=n.layer;null===s||!s.visible||s.isTemporary||this.WM(n,i,t)}x.e(t)}else{if(s.memberParts.count>0){const t=this.computePartsBounds(s.memberParts,!1);t.inflate(20,20),n.Lb(t)}const t=x.l(),e=s.memberParts;for(;e.next();){const n=e.value;n instanceof ge&&this.WM(n,i,t)}x.e(t)}n.fa=s,n.HM=i,n.Fo=!1}else t&&n.lA();return n}get avoidanceCellSize(){return this.uM}set avoidanceCellSize(t){this.Hl=null,this.uM=new v(Math.max(1,t.width),Math.max(1,t.height))}get avoidanceLimit(){return this.dM}set avoidanceLimit(t){this.dM=Math.max(1,t)}rA(t){return t.canAvoid()?t:null!==t.containingGroup?this.rA(t.containingGroup):null}WM(t,e,i){if(t===e||!t.isVisible())return;const n=t.canAvoid();if(n){const e=t.getAvoidableRect(i);this.Hl.VR(e.x,e.y,e.width,e.height)}if(t instanceof Ae&&(!n||t.avoidableMembers)){const n=t.memberParts;for(;n.next();){const t=n.value;t instanceof ge&&this.WM(t,e,i)}}}JM(t){null!==this.Hl&&!this.Hl.Fo&&(void 0===t||t.canAvoid())&&(this.Hl.Fo=!0)}get autoScrollInterval(){return this.Im}set autoScrollInterval(t){const e=this.Im;e!==t&&(this.Im=t,this.t("autoScrollInterval",e,t))}get autoScrollRegion(){return this.Em}set autoScrollRegion(t){"number"==typeof t&&(t=new b(t));const e=this.Em;e.equals(t)||(t=t.P(),this.Em=t,this.invalidateDocumentBounds(),this.t("autoScrollRegion",e,t))}doAutoScroll(t){this.Ym.a(t),this.computeAutoScrollPosition(this.Ym).equalsApprox(this.position)?this.stopAutoScroll():this.hA()}hA(){if(-1!==this.Rc)return;const t=this.Im,i=this;this.Rc=e.ir((()=>{if(-1===i.Rc||(i.stopAutoScroll(),null===i.lastInput.event))return;const t=i.computeAutoScrollPosition(i.Ym);if(t.equalsApprox(i.position))return;i.position=t,i.lastInput.documentPoint=i.transformViewToDoc(i.Ym),i.doMouseMove(),i._h=!0;const e=x.l();i.computeBounds(e),e.unionRect(i.documentBounds),i.eA(e),x.e(e),i.Ue=!0,i.maybeUpdate(),i.hA()}),t)}stopAutoScroll(){-1!==this.Rc&&(e.Tg(this.Rc),this.Rc=-1)}computeAutoScrollPosition(t){let e=this.position;const i=this.Em;if(i.top<=0&&i.left<=0&&i.right<=0&&i.bottom<=0)return e;const n=this.viewportBounds,s=this.scale,r=x.V(0,0,n.width*s,n.height*s),o=y.V(0,0);if(t.x>=r.x&&t.x<r.x+i.left&&this.allowHorizontalScroll){let e=Math.max(this.scrollHorizontalLineChange,1);e|=0,o.x-=e,t.x<r.x+i.left/2&&(o.x-=e),t.x<r.x+i.left/4&&(o.x-=4*e)}else if(t.x<=r.x+r.width&&t.x>r.x+r.width-i.right&&this.allowHorizontalScroll){let e=Math.max(this.scrollHorizontalLineChange,1);e|=0,o.x+=e,t.x>r.x+r.width-i.right/2&&(o.x+=e),t.x>r.x+r.width-i.right/4&&(o.x+=4*e)}if(t.y>=r.y&&t.y<r.y+i.top&&this.allowVerticalScroll){let e=Math.max(this.scrollVerticalLineChange,1);e|=0,o.y-=e,t.y<r.y+i.top/2&&(o.y-=e),t.y<r.y+i.top/4&&(o.y-=4*e)}else if(t.y<=r.y+r.height&&t.y>r.y+r.height-i.bottom&&this.allowVerticalScroll){let e=Math.max(this.scrollVerticalLineChange,1);e|=0,o.y+=e,t.y>r.y+r.height-i.bottom/2&&(o.y+=e),t.y>r.y+r.height-i.bottom/4&&(o.y+=4*e)}return o.equalsApprox(y.xo)||(e=new y(e.x+o.x/s,e.y+o.y/s)),x.e(r),y.e(o),e}makeSvg(i){this.ql.has("SVG")||this.addRenderer("SVG",new Ot(this,t.document));const n=new Ot(this,t.document,!0);void 0===i&&(i={});const s=this;return this.cA((function(t,i){const r=s.aA(t,"SVG",n),o=null!==r?r.svg:null;return e.it(i)?(i(o),null):o}),i)}makeSVG(t){return this.makeSvg(t)}addRenderer(t,e){this.ql.set(t,e)}removeRenderer(t){this.ql.delete(t)}cacheGroupExternalLinks(t){this.MM=t,t||this.nodes.each((t=>{t instanceof Ae&&(t.l0=null)}))}cA(i,n){const s=n.callback;let r=!0;const o=this.Wl.iterator;for(;o.next();)if(!o.value[0].hn){r=!1;break}if(!e.it(s)||r)return i(n,s,this);const a=this;function l(){const e=+new Date;for(r=!0,o.reset();o.next();)if(!o.value[0].hn){r=!1;break}r||e-u>h?i(n,s,a):t.requestAnimationFrame(l)}const h=n.callbackTimeout||300,u=+new Date;return t.requestAnimationFrame((()=>l())),null}makeImage(t){return xt.isUsingDOM()?(void 0===t&&(t={}),t.returnType="Image",this.makeImageData(t)):null}makeImageData(t){return void 0===t&&(t={}),this.cA(this.zR,t)}static img="image";zR(t,i,n){const s=n.aA(t,"canvas",null);if(null===s)return null;const r=s.E.canvas;let o=null;if(null!==r){let n=t.returnType;switch(n=void 0===n?"string":n.toLowerCase(),n){case xt.img+"data":o=s.getImageData(0,0,r.width,r.height);break;case xt.img:const n=(t.document||document).createElement("img");n.src=r.toDataURL(t.type,t.details),o=n;break;case"blob":{const n=r;return e.it(i)||(o="",e.o('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.')),e.it(n.toBlob)?(n.toBlob(i,t.type,t.details),"toBlob"):(i(null),null)}default:o=r.toDataURL(t.type,t.details)}}return e.it(i)?(i(o),null):o}static XR=!1;aA(t,i,n){if(this.animationManager.stopAnimation(),this.maybeUpdate(),null===this.ft)return null;e.K(t)||e.o("properties argument must be an Object.");let s=!1,r=t.size||null,o=t.scale||null;void 0!==t.scale&&isNaN(t.scale)&&(o="NaN");let a=t.maxSize;void 0===t.maxSize&&(s=!0,a="SVG"===i?new v(1/0,1/0):new v(2e3,2e3));const h=t.position||null;let u=t.parts||null;Array.isArray(u)&&(u=new l(u));let c=void 0===t.padding?1:t.padding;const d=t.background||null;let f=t.omitTemporary;void 0===f&&(f=!0);const p=t.document||document,g=t.elementFinished||null;let m=t.showTemporary;void 0===m&&(m=!f);let w=t.showGrid;void 0===w&&(w=m),null!==r&&isNaN(r.width)&&isNaN(r.height)&&(r=null),"number"==typeof c?c=new b(c):c instanceof b||e.o("MakeImage padding must be a Margin or a number."),c.left=Math.max(c.left,0),c.right=Math.max(c.right,0),c.top=Math.max(c.top,0),c.bottom=Math.max(c.bottom,0),this.Qt.clearContextCache(!0);const k=new Rt(null,p,void 0,!0),S=k.li;if(!(r||o||u||h))return k.width=this.xt+Math.ceil(c.left+c.right),k.height=this.bt+Math.ceil(c.top+c.bottom),"SVG"===i?null===n?null:(n.resize(k.width,k.height,k.width,k.height),n.ua=p,n.Ku=g,this.Sb(n.li,c,new v(k.width,k.height),this.tt,this.at,u,d,m,w),n.li):(this.Bu=!1,this.Sb(S,c,new v(k.width,k.height),this.tt,this.at,u,d,m,w),this.Bu=!0,k.li);const C=this.Gm,M=this.documentBounds.copy();if(M.subtractMargin(this.Zt),m){const t=this.Xt.r,e=t.length;for(let i=0;i<e;i++){const e=t[i];if(!e.visible||!e.isTemporary)continue;const n=e.Ct.r,s=n.length;for(let t=0;t<s;t++){const e=n[t];if(!e.isInDocumentBounds||!e.isVisible())continue;const i=e.actualBounds;i.isReal()&&M.unionRect(i)}}}let T=new y(M.x,M.y);if(null!==u){const t=new x(0,0,0,0);let e=!0;const i=u.iterator;for(i.reset();i.next();){const n=i.value;if(!(n instanceof ce))continue;const s=n.layer;if(null!==s&&!s.visible||null!==s&&!m&&s.isTemporary||!n.isVisible())continue;const r=n.actualBounds;r.isReal()&&(e?(e=!1,t.a(r)):t.unionRect(r))}M.width=t.width,M.height=t.height,T.x=t.x,T.y=t.y}null!==h&&h.isReal()&&(T=h,o||(o=C));let A=0,P=0;null!==c&&(A=c.left+c.right,P=c.top+c.bottom);let N=0,D=0;null!==r&&(N=r.width,D=r.height,isFinite(N)&&(N=Math.max(0,N-A)),isFinite(D)&&(D=Math.max(0,D-P)));let L=0,E=0;if(null!==r&&null!==o?("NaN"===o&&(o=C),r.isReal()?(L=N,E=D):isNaN(D)?(L=N,E=M.height*o):(L=M.width*o,E=D)):null!==r?r.isReal()?(o=Math.min(N/M.width,D/M.height),L=N,E=D):isNaN(D)?(o=N/M.width,L=N,E=M.height*o):(o=D/M.height,L=M.width*o,E=D):null!==o?"NaN"===o&&a.isReal()?(o=Math.min((a.width-A)/M.width,(a.height-P)/M.height),o>C?(o=C,L=M.width,E=M.height):(L=a.width,E=a.height)):(L=M.width*o,E=M.height*o):(o=C,L=M.width,E=M.height),null!==c?(L+=A,E+=P):c=new b(0),null!==a){let t=a.width,e=a.height;"SVG"!==i&&s&&xt.XR,isNaN(t)&&(t=2e3),isNaN(e)&&(e=2e3),isFinite(t)&&(L=Math.min(L,t)),isFinite(e)&&(E=Math.min(E,e))}return k.width=Math.ceil(L),k.height=Math.ceil(E),"SVG"===i?null===n?null:(n.resize(k.width,k.height,k.width,k.height),n.ua=p,n.Ku=g,this.Sb(n.li,c,new v(Math.ceil(L),Math.ceil(E)),o,T,u,d,m,w),n.li):(this.Bu=!1,this.Sb(S,c,new v(Math.ceil(L),Math.ceil(E)),o,T,u,d,m,w),this.Bu=!0,k.li)}static Xu=null;static fA="5da73c80a36555d4038e4972187c3cae51fd22";static gw=!1;static Kk=()=>{if(void 0===xt.fA[5]&&(k.prototype.$e=k.prototype.bw),!xt.isUsingDOM())return;const t=e.hs("canvas"),i=t.getContext("2d"),n=e.Ts("7ca11abfd022028846");i[n]=e.Ts("398c3597c01238");const s="7ca11abfd7330390",r=[xt.fA,e.gw+"4ae6247590da4bb21c324ba3a84e385776",k.Kk+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",S.za];for(let t=1;t<5;t++)i[e.Ts(s)](e.Ts(r[t-1]),10,15*t+0);i[n]=e.Ts("39f046ebb36e4b");for(let t=1;t<5;t++)i[e.Ts(s)](e.Ts(r[t-1]),10,15*t+0);(4!==r.length||"5"!==r[0][0]||"7"!==r[3][0])&&(k.prototype.$e=k.prototype.bw),xt.Xu=t}}class bt{uA;dA;$M;Ne;constructor(t){if(this.uA=null,this.dA="63ad05bbe23a1786468a4c741b6d2",this.$M="@onz",this.dA===this._tk)return this.$M=!0,void(this.Ne=this.$M);this.Ne=null}YR(i,n){let s="f";const r=t[e.Ts("76a715b2f73f148a")][e.Ts("72ba13b5")]||"",o=e.Ts;if(this.Ne=!0,!xt.isUsingDOM())return;let a=xt[o("76a115b6ed251eaf4692")];if(!a){const t=r[o("76ad18b4f73e")];for(let e=r[o("73a612b6fb191d")](o("35e7"))+2;e<t;e++)s+=r[e];const e=s[o("73a612b6fb191d")](o("7da71ca0ad381e90"));return void(this.Ne=!(e>=0&&e<s[o("73a612b6fb191d")](o("35"))))}const l=xt.XM.iterator;for(;l.next();){a=l.value;const i=o(a).split(o("39e9"));if(i.length<6)return;const h=o(i[1]).split(".");if("7da71ca0"!==i[4])return;const u=o(e[o("6cae19")]).split(".");if(!(h[0]>u[0]||h[0]===u[0]&&h[1]>=u[1]))continue;const c="73a612b6fb191d",d=t[o("74a900bae4370f8b51")][o("6fbb13a1c2311e8a57")].toLowerCase(),f=d[o(c)](o("3aad1ab6e022098b4dc4")),p=o(i[2]);if(f>-1){const t=d[o(c)](p.toLowerCase()+"/");if(this.Ne=!(t>-1&&t<f),!this.Ne)return}const g=r[o("76ad18b4f73e")];for(let t=r[o(c)](o("35e7"))+2;t<g;t++)s+=r[t];let m=s[o(c)](p);if(m<0&&p!==o("7da71ca0ad381e90")&&(m=s[o(c)](o("76a715b2ef3e149757"))),m<0&&(m=s[o(c)](o("76a715b2ef3e149757"))),m<0&&(m=s[o(c)](o("2bfa41fdb3784bca12"))),m<0&&(m=r[o(c)](o("7baa19a6f76c1988428554"))),m<0&&(m=r[o(c)](o("7ea902b2b9221e9c57c45767196566"))),this.Ne=!(m>=0&&m<s[o(c)](o("35"))||-1===s[o(c)](o("35"))),!this.Ne||r[o(c)](o("7fb002b6ed25128b4da25b2e"))&&(this.Ne=!(r[o(c)](p)>-1),!this.Ne))return;const y=t[e.Ts("76a715b2f73f148a")][e.Ts("69ad17a1e03e")],v=y[o(c)](o("7fb002b6ed25128b4da25b2e"));if(v>-1&&(this.Ne=!(y[o(c)](p)>v),!this.Ne))return;const x=p;if("#"!==x[0])continue;const b=e.hs("div");let w=i[0].replace(/[A-Za-z]/g,"");for(;w.length<4;)w+="9";const k=w;w=w.substring(w.length-4);let S="";const C=["Header","Background","Display","Feedback"];if(S+=["gsh","gsf"][parseInt(w.substring(0,1),10)%2],S+=C[parseInt(w.substring(0,1),10)%4],b[o("79a417a0f0181a8946")]=S,t.document[o("78a712aa")]){t.document[o("78a712aa")][o("7bb806b6ed32388c4a875b")](b);const e=t.getComputedStyle(b).getPropertyValue(o("78a704b7e62456904c9b12701b6532a8")),i=t.getComputedStyle(b).getPropertyValue(o("75b817b0ea2202"));if(t.document[o("78a712aa")][o("68ad1bbcf533388c4a875b")](b),!e)continue;const n=t[o("77a902b0eb1b1e804a8a")];if(i==="0."+parseInt(k,10)%100||-1!==e.indexOf(parseInt(x[1]+x[2],16))&&-1!==e.indexOf(parseInt(x[3]+x[4],16)))return void(this.Ne=!1);if(n&&n(o("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches){S="."+S;for(let t=0;t<document.styleSheets.length;t++){const e=document.styleSheets[t].rules||document.styleSheets[t].cssRules;for(const t in e)if(S===e[t].selectorText)return void(this.Ne=!1)}}}else this.Ne=null,n&&(this.Ne=!1)}}Xu(t){return t.Qt.setTransform(t.Vi,0,0,t.Vi,0,0),t.Qt.commitTransform(),null===this.Ne&&this.YR(t,!0),0<this.Ne&&this!==this.uA}}class wt{ZM;QM;constructor(t){this.ZM=void 0===t?new y:t,this.QM=new y}get point(){return this.ZM}set point(t){this.ZM=t}get shifted(){return this.QM}set shifted(t){this.QM=t}}class kt{Me;WL;Nb;constructor(t,e,i){this.Me=t,this.WL=e,this.Nb=i}}class St{isGridSnapEnabled;isGridSnapRealtime;gridSnapCellSize;gridSnapCellSpot;gridSnapOrigin;dragsLink;dragsTree;groupsSnapMembers;groupsAlwaysMove;dragsMembers;constructor(t){this.Ri(),t&&Object.assign(this,t)}Ri(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new v(NaN,NaN).u(),this.gridSnapCellSpot=w.TopLeft,this.gridSnapOrigin=new y(NaN,NaN).u(),this.dragsLink=!1,this.dragsTree=!1,this.groupsSnapMembers=!1,this.groupsAlwaysMove=!0,this.dragsMembers=!0}}class Ct extends xt{Ab;Tb;Db;Fb;h0;Gc;Ll;_M;t2;Rb;i2;constructor(i,n){let s;return void 0===i||"string"==typeof i||t.Element&&i instanceof Element?s=i:e.K(i)&&(n=i),super(s),this.animationManager.isEnabled=!1,this.jt=!0,this.Ab=null,this.Ru=!1,this.vu=!1,this.Tb=!0,this.Db=!0,this.Fb=0,this.h0=!1,this.Gc=null,this.setRenderingHint("drawShadows",!1),this.Ll=new ce({selectable:!0,selectionAdorned:!1,selectionObjectName:"BOXSHAPE",locationObjectName:"BOXSHAPE",resizeObjectName:"BOXSHAPE",cursor:"move"}).add(new Jt({name:"BOXSHAPE",fill:"transparent",stroke:"magenta",strokeWidth:2}).theme("stroke","overviewBox")).Et(),this.allowCopy=!1,this.allowDelete=!1,this.allowDrop=!1,this.allowSelect=!0,this.autoScrollRegion=new b(0,0,0,0),this.at.i(0,0),this.toolManager.Jt("Dragging",new Mt,this.toolManager.mouseMoveTools),this.click=()=>{const t=this.observed;if(null===t)return;const e=t.viewportBounds,i=this.lastInput.documentPoint;t.position=new y(i.x-e.width/2,i.y-e.height/2)},this._M=t=>{this.invalidateDocumentBounds(),this.a0()},this.t2=t=>{null!==this.observed&&(this.invalidateDocumentBounds(),this.S())},this.Rb=t=>{this.updateDelay<1?this.S():this.h0||(this.h0=!0,e.ir((()=>this.redraw()),this.updateDelay))},this.i2=t=>{null!==this.observed&&this.a0()},this.autoScale=2,this.jt=!1,n&&Object.assign(this,n),this}setupRouters(){}computePixelRatio(){return 1}redraw(){this.h0&&this.updateDelay>=1&&(this.h0=!1,this.KR()),super.redraw()}Ui(){if(null===this.St&&e.o("No div specified"),null===this.ft&&e.o("No canvas specified"),this.ft instanceof Ot||(this.box.JS(),!this.Ue))return;const t=this.observed;if(null===t||t.animationManager.defaultAnimation.isAnimating||!t.Bh)return;this.i0();const i=this.ft,n=this.Qt;if(n.clearContextCache(!0),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height),this.updateDelay<1)this.mA();else if(null!==this.Gc){n.drawImage(this.Gc.Tt,0,0);const t=this.T;n.scale(this.Vi,this.Vi),n.transform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),n.commitTransform()}const s=this.Xt.r,r=s.length;for(let t=0;t<r;t++)s[t].Ui(n,this);this.Ic=!1,this.Ue=!1}KR(){const t=this.ft,e=this.Qt;if(null!==t&&null!==e){if(this.i0(),null===this.Gc){const e=new Rt(null);e.width=t.width,e.height=t.height,this.Gc=e}try{this.ft=this.Gc,this.Qt=this.ft.li,this.Qt.clearContextCache(!0),this.Qt.setTransform(1,0,0,1,0,0),this.Qt.clearRect(0,0,this.ft.width,this.ft.height),this.mA()}finally{this.ft=t,this.Qt=e}}}mA(){const t=this.observed;if(null===t)return;const e=this.drawsTemporaryLayers,i=this.drawsGrid&&e,n=t.grid;if(i&&null!==n&&n.visible&&!isNaN(n.width)&&!isNaN(n.height)){const e=x.l().a(this.viewportBounds).unionRect(t.viewportBounds);t._l(e),x.e(e),t.Mi()}const s=this.T,r=this.Qt;r.scale(this.Vi,this.Vi),r.transform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),r.commitTransform();const o=this.viewportBounds,a=t.Xt.r,l=a.length,h=this.Xt.r;this.ps(h,h.length,this,this.viewportBounds);for(let t=0;t<l;t++)a[t].GF(r,o,this,e,i)}get observed(){return this.Ab}set observed(t){const i=this.Ab;if(t instanceof Ct&&e.o("Overview.observed Diagram may not be an Overview itself: "+t),i!==t){if(null!==i&&this.GR(i),this.Ab=t,null!==t&&this.HR(t),this.invalidateDocumentBounds(),null===t){this.Gc=null;const t=this.ft,e=this.Qt;t&&e&&(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height))}else this.Rb(null),this.a0(),this.S();this.t("observed",i,t)}}get box(){return this.Ll}set box(t){const e=this.Ll;e!==t&&(t.Et(),this.Ll=t,this.remove(e),this.add(this.Ll),this.a0(),this.t("box",e,t))}get drawsTemporaryLayers(){return this.Tb}set drawsTemporaryLayers(t){this.Tb!==t&&(this.Tb=t,this.redraw())}get drawsGrid(){return this.Db}set drawsGrid(t){this.Db!==t&&(this.Db=t,this.redraw())}get updateDelay(){return this.Fb}set updateDelay(t){t<0&&(t=0),this.Fb!==t&&(this.Fb=t)}HR(t){null!==t&&(t.addDiagramListener("ViewportBoundsChanged",this._M),t.addDiagramListener("DocumentBoundsChanged",this.t2),t.addDiagramListener("InvalidateDraw",this.Rb),t.addDiagramListener("AnimationFinished",this.i2),this.add(this.box))}GR(t){null!==t&&(this.remove(this.box),t.removeDiagramListener("ViewportBoundsChanged",this._M),t.removeDiagramListener("DocumentBoundsChanged",this.t2),t.removeDiagramListener("InvalidateDraw",this.Rb),t.removeDiagramListener("AnimationFinished",this.i2))}a0(){const t=this.box,e=this.observed;if(null===e)return;this.Ue=!0;const i=e.viewportBounds,n=t.selectionObject,s=v.l();s.i(i.width,i.height),n.desiredSize=s,v.e(s);const r=2/this.scale;n instanceof Jt&&(n.strokeWidth=r),t.location=new y(i.x-r/2,i.y-r/2),t.isSelected=!0}computeBounds(){const t=this.observed;if(null===t)return x.Fg;const e=t.documentBounds.copy();return e.unionRect(t.viewportBounds),e}invalidateViewport(t,e){!0!==this.Ue&&(this.Ue=!0,this.requestUpdate())}onViewportBoundsChanged(t,e,i,n){this.jt||(this.Ql(),this.S(),this.ha(),this.invalidateDocumentBounds(),this.a0(),this.Bi.scale=i,this.Bi.position.x=t.x,this.Bi.position.y=t.y,this.Bi.bounds.a(t),this.Bi.isScroll=n,this.D("ViewportBoundsChanged",this.Bi,t))}}class Mt extends H{ih;constructor(){super(),this.ih=null}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;const e=t.observed;if(null===e)return!1;const i=t.lastInput;if(!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.isTouchEvent&&i.timestamp-t.firstInput.timestamp<this.delay))return!1;if(null===this.findDraggablePart()){const i=e.viewportBounds;this.ih=new y(i.width/2,i.height/2);const n=t.firstInput.documentPoint;e.position=new y(n.x-this.ih.x,n.y-this.ih.y)}return!0}doActivate(){this.ih=null,super.doActivate()}doUpdateCursor(t){const e=this.diagram,i=e.box;null!==i&&i.cursor&&(e.currentCursor=i.cursor)}moveParts(t,e,i){void 0===i&&(i=!1);const n=this.diagram,s=n.observed;if(null===s)return;const r=n.box;if(null===r)return;if(null===this.ih){const t=n.firstInput.documentPoint,e=r.location;this.ih=new y(t.x-e.x,t.y-e.y)}const o=n.lastInput.documentPoint;s.position=new y(o.x-this.ih.x,o.y-this.ih.y)}}class Tt{N;e2;s2;o2;l2;h2;a2;c2;f2;eh;u2;vb;Ob;Ib;Eb;d2;Ro;g2;constructor(t){u.Gi(this),this.N=xt.um(),this.e2=!0,this.s2=!0,this.o2=!0,this.l2=!1,this.h2=!1,this.a2=!1,this.c2=!1,this.f2=null,this.eh=null,this.u2=1.05,this.vb=NaN,this.Ob=null,this.Ib=NaN,this.Eb=x.Fg,this.d2=!1,this.Ro=null,this.g2=200,t&&Object.assign(this,t)}toString(){return"CommandHandler"}get diagram(){return this.N}Mo(t){this.N=t}doStart(){}doStop(){}doKeyDown(){const t=this.diagram,i=t.lastInput,n=e.tr?i.meta:i.control,s=i.shift,r=i.alt,o=i.commandKey;!n||"Insert"!==o&&"c"!==o?n&&"x"===o||s&&"Delete"===o?this.canCutSelection()&&this.cutSelection():n&&"v"===o||s&&"Insert"===o?this.canPasteSelection()&&this.pasteSelection():n&&"y"===o||n&&s&&"z"===o||r&&s&&"Backspace"===o?this.canRedo()&&this.redo():n&&"z"===o||r&&"Backspace"===o?this.canUndo()&&this.undo():"Delete"===o||"Backspace"===o?this.canDeleteSelection()&&this.deleteSelection():n&&"a"===o?this.canSelectAll()&&this.selectAll():"Escape"===o?this.canStopCommand()&&this.stopCommand():"ArrowUp"===o?t.allowVerticalScroll&&(n?t.scroll("pixel","up"):t.scroll("line","up")):"ArrowDown"===o?t.allowVerticalScroll&&(n?t.scroll("pixel","down"):t.scroll("line","down")):"ArrowLeft"===o?t.allowHorizontalScroll&&(n?t.scroll("pixel","left"):t.scroll("line","left")):"ArrowRight"===o?t.allowHorizontalScroll&&(n?t.scroll("pixel","right"):t.scroll("line","right")):"PageUp"===o?s&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):"PageDown"===o?s&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):"Home"===o?n&&t.allowVerticalScroll?t.scroll("document","up"):!n&&t.allowHorizontalScroll&&t.scroll("document","left"):"End"===o?n&&t.allowVerticalScroll?t.scroll("document","down"):!n&&t.allowHorizontalScroll&&t.scroll("document","right"):"Space"===o?this.canScrollToPart()&&this.scrollToPart():"Minus"===o||"NumpadSubtract"===o?this.canDecreaseZoom()&&this.decreaseZoom():"Equal"===o||"NumpadAdd"===o?this.canIncreaseZoom()&&this.increaseZoom():n&&"Digit0"===o?this.canResetZoom()&&this.resetZoom():s&&"z"===o?this.canZoomToFit()&&this.zoomToFit():n&&!s&&"g"===o?this.canGroupSelection()&&this.groupSelection():n&&s&&"g"===o?this.canUngroupSelection()&&this.ungroupSelection():"F2"===o?this.canEditTextBlock()&&this.editTextBlock():"ContextMenu"===o||s&&"F10"===o||n&&s&&"Backslash"===o?this.canShowContextMenu()&&this.showContextMenu():i.bubbles=!0:this.canCopySelection()&&this.copySelection()}doKeyUp(){this.diagram.lastInput.bubbles=!0}stopCommand(){const t=this.diagram,e=t.currentTool;e instanceof z&&t.allowSelect&&t.clearSelection(),null!==e&&e.doCancel()}canStopCommand(){return!0}selectAll(){const t=this.diagram;t.S();try{t.currentCursor="wait",t.D("ChangingSelection",t.selection);const e=t.parts;for(;e.next();){const t=e.value;t.canSelect()&&!t.layer.isTemporary&&(t.isSelected=!0)}const i=t.nodes;for(;i.next();){const t=i.value;t.canSelect()&&!t.layer.isTemporary&&(t.isSelected=!0)}const n=t.links;for(;n.next();){const t=n.value;t.canSelect()&&!t.layer.isTemporary&&(t.isSelected=!0)}}finally{t.D("ChangedSelection",t.selection),t.currentCursor=""}}canSelectAll(){return this.diagram.allowSelect}deleteSelection(){const t=this.diagram;try{t.currentCursor="wait",t.D("ChangingSelection",t.selection),t.startTransaction("Delete"),t.D("SelectionDeleting",t.selection);const e=new u,i=t.selection.iterator;for(;i.next();){const t=i.value;ce.nh(e,t,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,(t=>t.canDelete()))}t.removeParts(e,!0),t.D("SelectionDeleted",e)}finally{t.commitTransaction("Delete"),t.D("ChangedSelection",t.selection),t.currentCursor=""}}canDeleteSelection(){const t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)}copySelection(){const t=this.diagram;try{const e=new u,i=t.selection.iterator;for(;i.next();){const t=i.value;ce.nh(e,t,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,(t=>t.canCopy()))}this.copyToClipboard(e)}finally{}}canCopySelection(){const t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)}cutSelection(){this.copySelection(),this.deleteSelection()}canCutSelection(){const t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)}copyToClipboard(t){const e=this.diagram;let i=null;if(null===t)xt.OL();else{let n=null;try{n=e.copyParts(t,null,!0)}finally{i=new l,null!==n&&i.addAll(n.iteratorValues),xt.Zm=i,xt.xb=e.model.dataFormat}}e.D("ClipboardChanged",i)}pasteFromClipboard(){const t=new u,e=xt.Zm;if(null===e)return t;const i=this.diagram;if(xt.xb!==i.model.dataFormat)return t;let n=null;try{n=i.copyParts(e,i,!1)}finally{if(null!==n){const e=n.iterator;for(;e.next();){const i=e.value,n=e.key;i.location.isReal()||(n.location.isReal()?i.location=n.location:!i.position.isReal()&&n.position.isReal()&&(i.position=n.position)),t.add(i)}}}return t}pasteSelection(t){void 0===t&&(t=null);const e=this.diagram;try{e.currentCursor="wait",e.D("ChangingSelection",e.selection),e.startTransaction("Paste");const i=this.pasteFromClipboard();i.count>0&&e.clearSelection(!0);const n=i.iterator;for(;n.next();){n.value.isSelected=!0}if(null!==t){const i=e.computePartsBounds(e.selection);if(i.isReal()){const n=this.computeEffectiveCollection(e.selection,e.pb);e.TP(n,new y(t.x-i.centerX,t.y-i.centerY),e.pb,!1)}}e.D("ClipboardPasted",i)}finally{e.commitTransaction("Paste"),e.D("ChangedSelection",e.selection),e.currentCursor=""}}canPasteSelection(t){const e=this.diagram;return!(e.isReadOnly||e.isModelReadOnly||!e.allowInsert||!e.allowClipboard||null===xt.Zm||0===xt.Zm.count||xt.xb!==e.model.dataFormat)}undo(){this.diagram.undoManager.undo()}canUndo(){const t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&(t.allowUndo&&t.undoManager.canUndo())}redo(){this.diagram.undoManager.redo()}canRedo(){const t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&(t.allowUndo&&t.undoManager.canRedo())}decreaseZoom(t){void 0===t&&(t=1/this.zoomFactor);const e=this.diagram;if(1!==e.autoScale)return;const i=e.scale*t;i<e.minScale||i>e.maxScale||(e.scale=i)}canDecreaseZoom(t){void 0===t&&(t=1/this.zoomFactor);const e=this.diagram;if(1!==e.autoScale)return!1;const i=e.scale*t;return!(i<e.minScale||i>e.maxScale)&&e.allowZoom}increaseZoom(t){void 0===t&&(t=this.zoomFactor);const e=this.diagram;if(1!==e.autoScale)return;const i=e.scale*t;i<e.minScale||i>e.maxScale||(e.scale=i)}canIncreaseZoom(t){void 0===t&&(t=this.zoomFactor);const e=this.diagram;if(1!==e.autoScale)return!1;const i=e.scale*t;return!(i<e.minScale||i>e.maxScale)&&e.allowZoom}resetZoom(t){void 0===t&&(t=this.defaultScale);const e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)}canResetZoom(t){void 0===t&&(t=this.defaultScale);const e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom}zoomToFit(){const t=this.diagram,e=t.animationManager;e.stopAnimation(),t.redraw();const i=t.position,n=t.scale;e.Dl("Zoom To Fit"),this.isZoomToFitRestoreEnabled&&n===this.Ib&&!isNaN(this.vb)&&null!==this.Ob&&t.documentBounds.equals(this.Eb)?(t.scale=this.vb,t.position=this.Ob,this.Ib=NaN,this.Eb=x.Fg):(this.vb=n,this.Ob=i.copy(),t.zoomToFit(),this.Ib=t.scale,this.Eb=t.documentBounds.copy()),e.OS()}canZoomToFit(){return this.diagram.allowZoom}scrollToPart(t){void 0===t&&(t=null);const i=this.diagram;if(i.ensureBounds(),null===t){try{null!==this.Ro&&(this.Ro.next()?t=this.Ro.value:this.Ro=null)}catch{this.Ro=null}null===t&&(i.highlighteds.count>0?this.Ro=i.highlighteds.iterator:i.selection.count>0&&(this.Ro=i.selection.iterator),null!==this.Ro&&this.Ro.next()&&(t=this.Ro.value))}if(null!==t){const n=i.animationManager;n.Dl("Scroll To Part");const s=this.scrollToPartPause;if(s>0){const r=this.Hc(t,[t]);if(1===r.length)i.startTransaction(),i.centerRect(t.actualBounds),i.commitTransaction("Scroll To Part");else{const t=()=>{i.startTransaction();let t=r.pop();for(;r.length>0&&t instanceof ge&&t.isTreeExpanded&&(!(t instanceof Ae)||t.isSubGraphExpanded);)t=r.pop();r.length>0?(t instanceof ce&&i.scrollToRect(t.actualBounds),t instanceof ge&&!t.isTreeExpanded&&(t.isTreeExpanded=!0),t instanceof Ae&&!t.isSubGraphExpanded&&(t.isSubGraphExpanded=!0)):(t instanceof ce&&i.centerRect(t.actualBounds),i.removeDiagramListener("LayoutCompleted",o)),i.commitTransaction("Scroll To Part")},o=()=>{e.ir(t,(n.isEnabled?n.duration:0)+s)};i.addDiagramListener("LayoutCompleted",o),t()}}else{const e=i.position.copy();i.centerRect(t.actualBounds),e.equalsApprox(i.position)&&n.stopAnimation()}}}Hc(t,e){if(t.isVisible())return e;if(t instanceof fe){const i=t.adornedPart;null!==i&&this.Hc(i,e)}else if(t instanceof be){const i=t.fromNode;null!==i&&this.Hc(i,e);const n=t.toNode;null!==n&&this.Hc(n,e)}else{if(t instanceof ge){const i=t.labeledLink;null!==i&&this.Hc(i,e);const n=t.findTreeParentNode();null!==n&&(!n.isTreeExpanded&&!n.wasTreeExpanded&&e.push(n),this.Hc(n,e))}const i=t.containingGroup;null!==i&&(!i.isSubGraphExpanded&&!i.wasSubGraphExpanded&&e.push(i),this.Hc(i,e))}return e}canScrollToPart(t){if(void 0===t&&(t=null),null!==t&&!(t instanceof ce))return!1;const e=this.diagram;return(0!==e.selection.count||0!==e.highlighteds.count)&&(e.allowHorizontalScroll&&e.allowVerticalScroll)}collapseTree(t){void 0===t&&(t=null);const e=this.diagram,i="Collapse Tree";try{e.startTransaction(i),e.animationManager.Dl(i);const n=new l;if(null!==t&&t.isTreeExpanded)t.collapseTree(),n.add(t);else if(null===t){const t=e.selection.iterator;for(;t.next();){const e=t.value;e instanceof ge&&e.isTreeExpanded&&(e.collapseTree(),n.add(e))}}e.D("TreeCollapsed",n)}finally{e.commitTransaction(i)}}canCollapseTree(t){void 0===t&&(t=null);const e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof ge&&t.isTreeExpanded))return!1;if(t.findTreeChildrenLinks().count>0)return!0}else{const t=e.selection.iterator;for(;t.next();){const e=t.value;if(e instanceof ge){if(!e.isTreeExpanded)continue;if(e.findTreeChildrenLinks().count>0)return!0}}}return!1}expandTree(t){void 0===t&&(t=null);const e=this.diagram,i="Expand Tree";try{e.startTransaction(i),e.animationManager.Dl(i);const n=new l;if(null===t||t.isTreeExpanded){if(null===t){const t=e.selection.iterator;for(;t.next();){const e=t.value;e instanceof ge&&(e.isTreeExpanded||(e.expandTree(),n.add(e)))}}}else t.expandTree(),n.add(t);e.D("TreeExpanded",n)}finally{e.commitTransaction(i)}}canExpandTree(t){void 0===t&&(t=null);const e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof ge)||t.isTreeExpanded)return!1;if(t.findTreeChildrenLinks().count>0)return!0}else{const t=e.selection.iterator;for(;t.next();){const e=t.value;if(e instanceof ge){if(e.isTreeExpanded)continue;if(e.findTreeChildrenLinks().count>0)return!0}}}return!1}groupSelection(){const t=this.diagram,i=t.model;if(!i.jc())return;const n=this.archetypeGroupData;if(null===n)return;let s=null;try{t.currentCursor="wait",t.D("ChangingSelection",t.selection),t.startTransaction("Group");const r=new l,o=t.selection.iterator;for(;o.next();){const t=o.value;t.ke()&&t.canGroup()&&r.add(t)}const a=new l,h=r.iterator;for(;h.next();){const t=h.value;let e=!1;const i=r.iterator;for(;i.next();){const n=i.value;if(t.isMemberOf(n)){e=!0;break}}e||a.add(t)}const u=a.first();if(null!==u){let r=u.containingGroup;if(null!==r)for(;null!==r;){let t=!1;const e=a.iterator;for(;e.next();)if(!e.value.isMemberOf(r)){t=!0;break}if(!t)break;r=r.containingGroup}if(n instanceof Ae)n.Et(),s=n.copy(),null!==s&&t.add(s);else if(i.isGroupForData(n)){const r=i.copyNodeData(n);e.K(r)&&(i.addNodeData(r),s=t.findNodeForData(r))}if(null!==s){null!==r&&this.isValidMember(r,s)&&(s.containingGroup=r);const e=a.iterator;for(;e.next();){const t=e.value;this.isValidMember(s,t)&&(t.containingGroup=s)}t.clearSelection(!0),s.isSelected=!0}}t.D("SelectionGrouped",s)}finally{t.commitTransaction("Group"),t.D("ChangedSelection",t.selection),t.currentCursor=""}}canGroupSelection(){const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.jc()||null===this.archetypeGroupData)return!1;const e=t.selection.iterator;for(;e.next();){const t=e.value;if(t.ke()&&t.canGroup())return!0}return!1}m2(t){const i=e.et();if(Array.isArray(t))t.forEach((t=>{t instanceof be||t instanceof ce&&i.push(t)}));else{const e=t.iterator;for(;e.next();){const t=e.value;t instanceof be||t instanceof ce&&i.push(t)}}const n=new u,s=i.length;for(let t=0;t<s;t++){const e=i[t];let r=!0;for(let t=0;t<s;t++)if(e.isMemberOf(i[t])){r=!1;break}r&&n.add(e)}return e.J(i),n}isValidMember(t,e){if(null===e||t===e||e instanceof be)return!1;let i;return(null===t||!(t===e||t.isMemberOf(e)||(i=t.memberValidation,null!==i&&!i(t,e))||null===t.data&&null!==e.data||null!==t.data&&null===e.data))&&(i=this.memberValidation,null===i||i(t,e))}ungroupSelection(t){void 0===t&&(t=null);const e=this.diagram,i=e.model;if(i.jc())try{e.currentCursor="wait",e.D("ChangingSelection",e.selection),e.startTransaction("Ungroup");const n=new l;if(null!==t)n.add(t);else{const t=e.selection.iterator;for(;t.next();){const e=t.value;e instanceof Ae&&e.canUngroup()&&n.add(e)}}const s=new l;if(n.count>0){e.clearSelection(!0);const t=n.iterator;for(;t.next();){const n=t.value;n.expandSubGraph();const r=n.containingGroup,o=null!==r&&null!==r.data?i.getKeyForNodeData(r.data):void 0;s.addAll(n.memberParts);const a=s.iterator;for(;a.next();){const t=a.value;if(t.isSelected=!0,t instanceof be)continue;const e=t.data;null!==e?i.setGroupForData(e,o):t.containingGroup=r}e.remove(n)}}e.D("SelectionUngrouped",n,s)}finally{e.commitTransaction("Ungroup"),e.D("ChangedSelection",e.selection),e.currentCursor=""}}canUngroupSelection(t){void 0===t&&(t=null);const e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.jc())return!1;if(null!==t){if(!(t instanceof Ae))return!1;if(t.canUngroup())return!0}else{const t=e.selection.iterator;for(;t.next();){const e=t.value;if(e instanceof Ae&&e.canUngroup())return!0}}return!1}addTopLevelParts(t,e){let i=!0;const n=this.m2(t).iterator;for(;n.next();){const t=n.value;null!==t.containingGroup&&(!e||this.isValidMember(null,t)?t.containingGroup=null:i=!1)}return i}collapseSubGraph(t){void 0===t&&(t=null);const e=this.diagram,i="Collapse SubGraph";try{e.startTransaction(i),e.animationManager.Dl(i);const n=new l;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),n.add(t);else if(null===t){const t=e.selection.iterator;for(;t.next();){const e=t.value;e instanceof Ae&&e.isSubGraphExpanded&&(e.collapseSubGraph(),n.add(e))}}e.D("SubGraphCollapsed",n)}finally{e.commitTransaction(i)}}canCollapseSubGraph(t){void 0===t&&(t=null);const e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof Ae&&t.isSubGraphExpanded);{const t=e.selection.iterator;for(;t.next();){const e=t.value;if(e instanceof Ae&&e.isSubGraphExpanded)return!0}}return!1}expandSubGraph(t){void 0===t&&(t=null);const e=this.diagram,i="Expand SubGraph",n=new l;try{if(e.startTransaction(i),e.animationManager.Dl(i),null===t||t.isSubGraphExpanded){if(null===t){const t=e.selection.iterator;for(;t.next();){const e=t.value;e instanceof Ae&&(e.isSubGraphExpanded||(e.expandSubGraph(),n.add(e)))}}}else t.expandSubGraph(),n.add(t);e.D("SubGraphExpanded",n)}finally{for(const t of n)this.pA(e,t);t&&this.pA(e,t),e.commitTransaction(i)}}pA(t,e){for(const i of e.memberParts)i instanceof ge&&t.Cc(i,e)}canExpandSubGraph(t){void 0===t&&(t=null);const e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!(!(t instanceof Ae)||t.isSubGraphExpanded);{const t=e.selection.iterator;for(;t.next();){const e=t.value;if(e instanceof Ae&&!e.isSubGraphExpanded)return!0}}return!1}editTextBlock(t){void 0===t&&(t=null);const e=this.diagram,i=e.toolManager.findTool("TextEditing");if(null!==i){if(null===t){let i=null;const n=e.selection.iterator;for(;n.next();){const t=n.value;if(t.canEdit()){i=t;break}}if(null===i)return;t=i.findInVisualTree((t=>t instanceof ie&&t.editable))}null!==t&&(e.currentTool=null,i.textBlock=t,e.currentTool=i)}}canEditTextBlock(t){void 0===t&&(t=null);const e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool("TextEditing"))return!1;if(null!==t){if(!(t instanceof ie))return!1;const e=t.part;if(null!==e&&e.canEdit())return!0}else{const i=e.selection.iterator;for(;i.next();){const e=i.value;if(e.canEdit()&&null!==(t=e.findInVisualTree((t=>t instanceof ie&&t.editable))))return!0}}return!1}showContextMenu(t){const e=this.diagram,i=e.toolManager.findTool("ContextMenu");if(null===i)return;void 0===t&&(t=null),null===t&&(t=e.selection.count>0?e.selection.first():e);const n=i.findObjectWithContextMenu(t);if(null!==n){const t=e.lastInput;let s=null;if(n instanceof Dt)s=n.getDocumentPoint(w.Center);else if(!e.viewportBounds.containsPoint(t.documentPoint)){const t=e.viewportBounds;s=new y(t.x+t.width/2,t.y+t.height/2)}if(null!==s){const t=new L;t.diagram=e,t.viewPoint=e.transformDocToView(s),t.documentPoint=s,t.button=2,t.up=!0,e.lastInput=t}e.currentTool=i,i.openMenu(!1,n)}}canShowContextMenu(t){const e=this.diagram,i=e.toolManager.findTool("ContextMenu");return!(null===i||(void 0===t&&(t=null),null===t&&(t=e.selection.count>0?e.selection.first():e),null===i.findObjectWithContextMenu(t)))}get copiesClipboardData(){return this.e2}set copiesClipboardData(t){e.s(t,"boolean",Tt,"copiesClipboardData"),this.e2=t}get copiesConnectedLinks(){return this.s2}set copiesConnectedLinks(t){e.s(t,"boolean",Tt,"copiesConnectedLinks"),this.s2=t}get deletesConnectedLinks(){return this.o2}set deletesConnectedLinks(t){e.s(t,"boolean",Tt,"deletesConnectedLinks"),this.o2=t}get copiesTree(){return this.l2}set copiesTree(t){e.s(t,"boolean",Tt,"copiesTree"),this.l2=t}get deletesTree(){return this.h2}set deletesTree(t){e.s(t,"boolean",Tt,"deletesTree"),this.h2=t}get copiesParentKey(){return this.a2}set copiesParentKey(t){e.s(t,"boolean",Tt,"copiesParentKey"),this.a2=t}get copiesGroupKey(){return this.c2}set copiesGroupKey(t){e.s(t,"boolean",Tt,"copiesGroupKey"),this.c2=t}get archetypeGroupData(){return this.f2}set archetypeGroupData(t){null!==t&&e.ec(t,Tt,"archetypeGroupData");this.diagram;this.f2=t}get memberValidation(){return this.eh}set memberValidation(t){null!==t&&e.k(t,Tt,"memberValidation"),this.eh=t}get defaultScale(){return this.diagram.defaultScale}set defaultScale(t){this.diagram.defaultScale=t}get zoomFactor(){return this.u2}set zoomFactor(t){t>1||e.o("zoomFactor must be larger than 1.0, not: "+t),this.u2=t}get isZoomToFitRestoreEnabled(){return this.d2}set isZoomToFitRestoreEnabled(t){e.s(t,"boolean",Tt,"isZoomToFitRestoreEnabled"),this.d2=t}get scrollToPartPause(){return this.g2}set scrollToPartPause(t){this.g2=t}computeEffectiveCollection(t,e){const i=this.diagram,n=i.toolManager.findTool("Dragging"),s=i.currentTool===n;void 0===e&&(e=i.s0());const r=new m;if(null===t)return r;let o=t.iterator;for(;o.next();){const t=o.value;i.Gr(r,t,s,e)}if(null!==i.draggedLink&&e.dragsLink)return r;for(o=t.iterator;o.next();){const t=o.value;if(t instanceof be){const e=t.fromNode;if(null===e||r.has(e)){const e=t.toNode;null!==e&&!r.has(e)&&r.delete(t)}else r.delete(t)}}return r}}var At=(t=>(t[t.None=0]="None",t[t.Default=1]="Default",t[t.Vertical=4]="Vertical",t[t.Horizontal=5]="Horizontal",t[t.Fill=2]="Fill",t))(At||{}),Pt=(t=>(t[t.None=0]="None",t[t.Along=21]="Along",t[t.Plus90=22]="Plus90",t[t.Minus90=23]="Minus90",t[t.Opposite=24]="Opposite",t[t.Upright=25]="Upright",t[t.Plus90Upright=26]="Plus90Upright",t[t.Minus90Upright=27]="Minus90Upright",t[t.Upright45=28]="Upright45",t))(Pt||{}),Nt=(t=>(t[t.None=0]="None",t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal",t[t.Both=3]="Both",t))(Nt||{});class Dt{n;c0;f0;Hr;p;oh;ct;at;se;$t;u0;Vs;Lt;is;jr;lh;wi;da;tt;Yt;qr;Ni;zi;Gu;hi;Hu;Ot;si;Wr;Ub;hh;ju;constructor(){u.Gi(this),this.n=30723,this.$t=1,this.u0="",this.Vs=null,this.Lt=null,this.at=new y(NaN,NaN).u(),this.is=v.yw,this.jr=new k,this.lh=new k,this.wi=null,this.da=1,this.tt=1,this.Yt=0,this.qr=b.Rg,this.se=new x(NaN,NaN,NaN,NaN).u(),this.Ni=new x(NaN,NaN,NaN,NaN).u(),this.zi=new x(0,0,NaN,NaN).u(),this.Gu=null,this.c0=null,this.ct=null,this.hi=w.Default,this.Hu=w.Default,this.f0=0,this.Hr=0,this.Ot=null,this.p=null,this.oh=null,this.si=null,this.Ub=null,this.hh=null,this.Wr=null,this.ju=null}cloneProtected(t){t.n=-32769&this.n|6144,t.$t=this.$t,t.u0=this.u0,t.Lt=this.Lt,t.at.a(this.at),t.is=this.is.P(),null!==this.wi?t.wi=this.wi.copy():t.wi=null,t.tt=this.tt,t.Yt=this.Yt,t.qr=this.qr.P(),t.se.a(this.se),t.Ni.a(this.Ni),t.zi.a(this.zi),t.c0=this.c0,null!==this.ct&&(t.ct=this.ct.copy()),t.hi=this.hi.P(),t.Hu=this.Hu.P(),t.f0=this.f0,t.Hr=this.Hr,null!==this.Ot&&(t.Ot=this.Ot.copy()),null!==this.p&&(this.p.fi?t.p=this.p:t.p=this.p.copy()),null!==this.oh&&(t.oh=this.oh.slice()),null!==this.si&&(t.si=this.si.copy())}addCopyProperty(t){let e=this.oh;if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]===t)return}else e=[],this.oh=e;e.push(t)}vo(t){t.Gu=null,t.Wr=null,t.c()}clone(){const t=new this.constructor;if(this.cloneProtected(t),null!==this.oh)for(let e=0;e<this.oh.length;e++){const i=this.oh[e];t[i]=this[i]}return t}copy(){return this.clone()}rS(){const t=this.Ci;if(null!==t){this.Ci=null;for(const e of t)e.qu()&&(e.isToData?this.themeData(e.targetProperty,e.sourceProperty,e.themeSource,e.converter,e.themeConverter):e.isToObject?this.themeObject(e.targetProperty,e.sourceProperty,e.themeSource,e.converter,e.themeConverter,e.sourceName):e.isToModel?this.themeModel(e.targetProperty,e.sourceProperty,e.themeSource,e.converter,e.themeConverter):this.theme(e.targetProperty,e.sourceProperty,e.themeSource,e.converter,e.themeConverter))}return this}oi(t){t in Pt?this.segmentOrientation=t:t in At?this.stretch=t:e.er(this,t)}toString(){return e.Dn(this.constructor)+"#"+u.as(this)}static None=0;static Default=1;static Fill=2;static Vertical;static Horizontal;static Uniform=6;static UniformToFill=7;static FlipVertical=1;static FlipHorizontal=2;static FlipBoth=3;ah(){null!==this.p&&(this.p.fi=!0)}Gt(){return null===this.p?this.p=new Lt:this.p.fi&&(this.p=this.p.copy()),this.p}Be(){if(null===this.ct){const t=new Me;t.ga=w.None,t.ma=w.None,t.pa=10,t.ya=10,t.wa=0,t.xa=0,this.ct=t}return this.ct}raiseChangedEvent(t,e,i,n,s,r,o){const a=this.part;if(null!==a){a.qc(t,e,i,n,s,r,o),i===this&&2===t&&this.Wc()&&this.ba(a,e);const l=this.diagram;if(null!==this.ws&&null!==l&&l.Bh&&!l.undoManager.isUndoingRedoing&&!l.animationManager.pu){const t=this.ws.get(e);if(null!==t&&l.animationManager.isEnabled&&!l.animationManager.isTicking){null===this.ju&&(this.ju=new m);let i=0===l.undoManager.transactionLevel;if(2===t.startCondition?i=!0:3===t.startCondition&&(i=!1),i){const i=new ut;t.XF(i);const r=this.ju.get(t);null!==r&&r.stop(),this.ju.set(t,i),i.gx=this,i.XS=t,i.add(this,e,n,s),i.start()}else l.animationManager.getBundleAnimation().add(this,e,n,s)}}if(this instanceof qt&&i===a&&a.p2()&&null!==a.data){const t=this.C.r,i=t.length;for(let n=0;n<i;n++){const i=t[n];i instanceof qt&&i.Kr((t=>{null!==t.data&&t.p2()&&t.updateTargetBindings(e)}))}}}}UF(t){this.ju.delete(t)}Do(){if(null!==this.diagram&&null===this.findBindingPanel()&&null!==this.Ci){const t=this.diagram.model,e=this.Ci.iterator;for(;e.next();){const i=e.value;if(!i.isToTheme)continue;let n=null;const s=i.sourceName;i.isToObject&&(n=this.yA(s));let r=this;const o=i.targetId;-1!==o&&(r=this.d0(o),null===r)||("/"===s?n=r.part:"."===s?n=r:".."===s&&(n=r.panel),i.updateTarget(r,n,void 0,t))}}}ba(t,e){const i=this.findBindingPanel();if(null!==i){const n=t.diagram,s=this.Ci.iterator;for(;s.next();){const t=s.value;let r=null;if(t.isToObject){if(r=t.wA(i,this),null===r)continue;t.updateSource(this,r,e,null)}else if(t.isToModel)null!==n&&!n.fe&&t.updateSource(this,n.model.modelData,e,i);else if(!t.isToTheme){const s=i.data;if(null===s)continue;null!==n&&!n.fe&&t.updateSource(this,s,e,i)}if(r===this){const s=t.targetId,o=i.d0(s);null!==o&&t.updateTarget(o,r,e,n?.model)}}}}d0(t){return this.jn===t?this:null}yA(t){let e;return e=""===t||"/"===t||"."===t||".."===t?this:this.part.findObject(t),e}get jn(){return null!==this.p?this.p.jn:-1}set jn(t){this.jn!==t&&(null===this.p&&(this.p=new Lt),this.p.jn=t)}get Ci(){return null!==this.p?this.p.Ci:null}set Ci(t){this.Ci!==t&&(null===this.p&&(this.p=new Lt),this.p.Ci=t)}get qn(){return null!==this.p?this.p.qn:null}set qn(t){this.qn!==t&&(null===this.p&&(this.p=new Lt),this.p.qn=t)}raiseChanged(t,e,i){this.raiseChangedEvent(2,t,this,e,i)}t(t,e,i){this.raiseChangedEvent(2,t,this,e,i)}Wn(t,e,i,n){const s=this.se;if(s.i(t,e,i,n),1!==this.tt||0!==this.Yt){null===this.wi&&(this.wi=new k);const r=this.wi;r.Ri(),this.g0(r,t,e,i,n),r.vg(s)}}xA(t,e,i){return!1!==this.pickable&&(i.nc(this.T),e?this.intersectsRect(t,i):this.containedInRect(t,i))}bA(t,e,i){if(!1===this.pickable)return!1;const n=this.naturalBounds,s=t.distanceSquaredPoint(e);return i?y.distanceLineSegmentSquared(t.x,t.y,0,0,0,n.height)<=s||y.distanceLineSegmentSquared(t.x,t.y,0,n.height,n.width,n.height)<=s||y.distanceLineSegmentSquared(t.x,t.y,n.width,n.height,n.width,0)<=s||y.distanceLineSegmentSquared(t.x,t.y,n.width,0,0,0)<=s:t.distanceSquared(0,0)<=s&&t.distanceSquared(0,n.height)<=s&&t.distanceSquared(n.width,0)<=s&&t.distanceSquared(n.width,n.height)<=s}an(){return!0}containsPoint(t){const e=y.l();e.a(t),this.T.gt(e);const i=this.actualBounds;if(!i.isReal())return y.e(e),!1;const n=this.diagram;if(null!==n&&n.jm){const t=n.getInputOption("extraTouchThreshold"),s=n.getInputOption("extraTouchArea"),r=s/2,o=this.naturalBounds,a=this.getDocumentScale()*n.scale,l=1/a;if(o.width*a<t&&o.height*a<t){const t=x.contains(i.x-r*l,i.y-r*l,i.width+s*l,i.height+s*l,e.x,e.y);return y.e(e),t}}let s=!1;return(this instanceof fe||this instanceof Jt?x.contains(i.x-5,i.y-5,i.width+10,i.height+10,e.x,e.y):i.containsPoint(e))&&(s=!(this.si&&!this.si.containsPoint(e))&&(!(null===this.Lt||!this.zi.containsPoint(t))||this.ch(t))),y.e(e),s}ch(t){const e=this.naturalBounds;return x.contains(0,0,e.width,e.height,t.x,t.y)}containsRect(t){if(0===this.angle)return this.actualBounds.containsRect(t);const e=this.naturalBounds,i=x.V(0,0,e.width,e.height),n=this.T;let s=!1;const r=y.V(t.x,t.y);return i.containsPoint(n.$e(r))&&(r.i(t.x,t.bottom),i.containsPoint(n.$e(r))&&(r.i(t.right,t.bottom),i.containsPoint(n.$e(r))&&(r.i(t.right,t.y),i.containsPoint(n.$e(r))&&(s=!0)))),y.e(r),x.e(i),s}containedInRect(t,e){if(void 0===e)return t.containsRect(this.actualBounds);const i=this.naturalBounds,n=e;let s=!1;const r=y.V(0,0);return t.containsPoint(n.gt(r))&&(r.i(0,i.height),t.containsPoint(n.gt(r))&&(r.i(i.width,i.height),t.containsPoint(n.gt(r))&&(r.i(i.width,0),t.containsPoint(n.gt(r))&&(s=!0)))),y.e(r),s}intersectsRect(t,e){if(void 0===e&&(e=this.T,0===this.angle))return t.intersectsRect(this.actualBounds);const i=this.naturalBounds,n=e,s=y.V(0,0),r=y.V(0,i.height),o=y.V(i.width,i.height),a=y.V(i.width,0);let l=!1;if(t.containsPoint(n.gt(s))||t.containsPoint(n.gt(r))||t.containsPoint(n.gt(o))||t.containsPoint(n.gt(a)))l=!0;else{const e=x.V(0,0,i.width,i.height),h=y.V(t.x,t.y);e.containsPoint(n.$e(h))?l=!0:(h.i(t.x,t.bottom),e.containsPoint(n.$e(h))?l=!0:(h.i(t.right,t.bottom),e.containsPoint(n.$e(h))?l=!0:(h.i(t.right,t.y),e.containsPoint(n.$e(h))&&(l=!0)))),y.e(h),x.e(e),l||(S.Sw(t,s,r)||S.Sw(t,r,o)||S.Sw(t,o,a)||S.Sw(t,a,s))&&(l=!0)}return y.e(s),y.e(r),y.e(o),y.e(a),l}getDocumentPoint(t,e){if(void 0===e&&(e=new y),t instanceof w){const i=t,n=this.naturalBounds;return e.i(i.x*n.width+i.offsetX,i.y*n.height+i.offsetY),this.Us.gt(e),e}return e.set(t),this.Us.gt(e),e}getDocumentBounds(t){void 0===t&&(t=new x);const e=this.naturalBounds,i=this.Us,n=y.V(0,0).T(i);return t.i(n.x,n.y,0,0),n.i(e.width,0).T(i),t.unionNoCheck(n.x,n.y,0,0),n.i(e.width,e.height).T(i),t.unionNoCheck(n.x,n.y,0,0),n.i(0,e.height).T(i),t.unionNoCheck(n.x,n.y,0,0),y.e(n),t}getDocumentAngle(){return this.Us.ZD()}getDocumentScale(){if(!1===this.m0())return this.da;const t=this.tt;return null!==this.panel?t*this.panel.getDocumentScale():t}getLocalPoint(t,e){return void 0===e&&(e=new y),e.a(t),this.Us.$e(e),e}getNearestIntersectionPoint(t,e,i){return this.Jc(t.x,t.y,e.x,e.y,i)}Jc(t,e,i,n,s){const r=this.T,o=1/(r.m11*r.m22-r.m12*r.m21),a=r.m22*o,l=-r.m12*o,h=-r.m21*o,u=r.m11*o,c=o*(r.m21*r.dy-r.m22*r.dx),d=o*(r.m12*r.dx-r.m11*r.dy),f=t*a+e*h+c,p=t*l+e*u+d,g=i*a+n*h+c,m=i*l+n*u+d;s.i(0,0);const y=this.naturalBounds,v=S.dl(0,0,y.width,y.height,f,p,g,m,s);return s.T(r),v}ht(t,i,n,s){if(!1===this.To())return;const r=this.qr,o=r.right+r.left,a=r.top+r.bottom;t=Math.max(t-o,0),i=Math.max(i-a,0),n=n||0,s=s||0,n=Math.max(n-o,0),s=Math.max(s-a,0);const l=this.angle;let h=0;const u=this.desiredSize,c=this.p0();90===l||270===l?(t=isFinite(u.height)?u.height+c:t,i=isFinite(u.width)?u.width+c:i):(t=isFinite(u.width)?u.width+c:t,i=isFinite(u.height)?u.height+c:i);let d=n||0,f=s||0;const p=this instanceof qt;switch(this.zs(!0)){case 0:d=0,f=0,p&&(t=1/0,i=1/0);break;case 2:isFinite(t)&&t>n&&(d=t),isFinite(i)&&i>s&&(f=i);break;case 5:isFinite(t)&&t>n&&(d=t),f=0,p&&(i=1/0);break;case 4:isFinite(i)&&i>s&&(f=i),d=0,p&&(t=1/0)}const g=this.maxSize,m=this.minSize;d>g.width&&m.width<g.width&&(d=g.width),f>g.height&&m.height<g.height&&(f=g.height),n=Math.max(d,m.width),s=Math.max(f,m.height),g.width<n&&(n=Math.min(m.width,n)),g.height<s&&(s=Math.min(m.height,s)),t=Math.min(g.width,t),i=Math.min(g.height,i),t=Math.max(n,t),i=Math.max(s,i),(90===l||270===l)&&(h=t,t=i,i=h,h=n,n=s,s=h),this.se.Nt(),this.Wu(t,i,n,s),this.se.u(),this.se.isReal()||e.o("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.se.toString()),this.ue(!1)}Wu(t,e,i,n){}Xs(){return!1}Bt(t,i,n,s,r){this.$c();const o=x.l();o.a(this.Ni),this.Ni.Nt(),!1===this._e()?this.Ni.i(t,i,n,s):this.fh(t,i,n,s),this.Ni.u(),this.si=void 0===r?null:r;let a=!1;if(void 0!==r)a=!0;else{let e=this.panel;if(null!==e&&e.Jr()&&(e=e.panel),null!==e){const n=e.zi,s=this.measuredBounds,r=i+s.height,o=t+s.width;if(a=!(0<=t+.05&&o<=n.width+.05&&0<=i+.05&&r<=n.height+.05),this instanceof ie){const t=this.naturalBounds;(this.y0>t.height||this.ui>t.width)&&(a=!0)}}}a?this.n|=256:this.n&=-257,this.Ni.isReal()||e.o("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Ni.toString()),this.Ju(o,this.Ni),this.Jn(!1),x.e(o)}fh(t,e,i,n){}commonArrange(t,e,i,n){if(this.Ni.i(t,e,i,n),this.desiredSize.isReal())return;const s=this.se,r=this.qr,o=r.right+r.left,a=r.top+r.bottom,l=s.width+o,h=s.height+a;i+=o,n+=a;let u=this.zs(!0);switch(l===i&&h===n&&(u=0),u){case 0:(l>i||h>n)&&(this.ue(!0),this.ht(l>i?i:l,h>n?n:h,0,0));break;case 2:this.ue(!0),this.ht(i,n,0,0);break;case 5:this.ue(!0),this.ht(i,h,0,0);break;case 4:this.ue(!0),this.ht(l,n,0,0)}}Ju(t,e){const i=this.part;null!==i&&null!==i.diagram&&((i.selectionObject===this||i.resizeObject===this||i.rotateObject===this)&&i.w2(!0),this.S(),!t.equalsApproxClose(e)&&(i.uh(),this.w0(i)))}w0(t){null!==this.portId&&(t.w2(!0),t instanceof ge&&t.kA(this))}get shadowVisible(){return null!==this.p?this.p.x0:null}set shadowVisible(t){const e=this.shadowVisible;e!==t&&(this.Gt().x0=t,this.Ve(!0),this.S(),this.t("shadowVisible",e,t))}jR(t,e){const i=this.naturalBounds,n=this.lh,s=n.m11,r=n.m21,o=n.dx,a=n.m12,l=n.m22,h=n.dy;let u=0,c=0,d=u,f=c;u=d*s+f*r+o,c=d*a+f*l+h;let p=u,g=c,m=0,y=0;d=i.width+e,f=0,u=d*s+f*r+o,c=d*a+f*l+h;let v=Math.min(p,u),x=Math.min(g,c);m=Math.max(p+m,u)-v,y=Math.max(g+y,c)-x,p=v,g=x,d=i.width+e,f=i.height+e,u=d*s+f*r+o,c=d*a+f*l+h,v=Math.min(p,u),x=Math.min(g,c),m=Math.max(p+m,u)-v,y=Math.max(g+y,c)-x,p=v,g=x,d=0,f=i.height+e,u=d*s+f*r+o,c=d*a+f*l+h,v=Math.min(p,u),x=Math.min(g,c),m=Math.max(p+m,u)-v,y=Math.max(g+y,c)-x,p=v,g=x;const b=t.viewportBounds,w=b.x,k=b.y,S=b.width,C=b.height;return p>S+w||w>m+p||g>C+k||k>y+g}Ui(t,e){if(this.qR(t,e)||!this.visible)return;const i=this.opacity;if(0===i)return;let n=1;1!==i&&(n=t.globalAlpha,t.globalAlpha=n*i);let s="";""!==this.filter&&(s=t.filter,t.filter=this.filter);const r=this.T,o=this.panel;!0===this.m0()&&this.Bb();const a=this.part;let l=!1,h=0;if(a&&e.getRenderingHint("drawShadows")&&(l=a.isShadowed,l)){const t=a.shadowOffset;h=Math.max(t.y,t.x)*e.scale*e.Vi}const u=this instanceof qt&&this.Jr(),c=this.Ni;if(u&&(this.PA(l,t,!1,o),this.WR(t,e),this.SA(l,t,!1,o),this.MA(l,t,!1)),u||!u&&(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y)))return 1!==i&&(t.globalAlpha=n),void(""!==this.filter&&(t.filter=s));const d=this.Xs();if(!e.ta&&d&&this.jR(e,h))return 1!==i&&(t.globalAlpha=n),void(""!==this.filter&&(t.filter=s));let f=!!(256&this.n);if(t.clipInsteadOfFill&&(f=!1),this instanceof ie&&(t.font=this.font),f){const e=o.an()?o.naturalBounds:o.actualBounds;let r=Math.max(c.x,e.x),a=Math.max(c.y,e.y),l=Math.min(c.right,e.right)-r,h=Math.min(c.bottom,e.bottom)-a;const u=this.si;if(null!==u&&(r=u.x,a=u.y,l=u.width,h=u.height),r>c.width+c.x||c.x>e.width+e.x)return 1!==i&&(t.globalAlpha=n),void(""!==this.filter&&(t.filter=s));t.save(),t.beginPath(),t.rect(r,a,l,h),t.clip()}if(d){if(!a.isVisible())return 1!==i&&(t.globalAlpha=n),void(""!==this.filter&&(t.filter=s));if(l){const i=a.shadowOffset;t.shadowsSet(i.x*e.scale*this.scale*e.Vi,i.y*e.scale*this.scale*e.Vi,a.shadowBlur),t.shadowsOn(),t.shadowColor=a.shadowColor}}const p=this.naturalBounds;if(t.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),this.PA(l,t,d,o),null!==this.Lt&&(t.commitTransform(),this.Vb(t,p,c)),this.SA(l,t,d,o),this.dh(t,e),this.MA(l,t,d),f&&(t.restore(),t.clearContextCache(this instanceof qt)),!r.Yk()){const e=1/(r.m11*r.m22-r.m12*r.m21);t.transform(r.m22*e,-r.m12*e,-r.m21*e,r.m11*e,e*(r.m21*r.dy-r.m22*r.dx),e*(r.m12*r.dx-r.m11*r.dy))}1!==i&&(t.globalAlpha=n),""!==this.filter&&(t.filter=s)}PA(t,e,i,n){t&&!0===this.shadowVisible?e.shadowsOn():t&&!1===this.shadowVisible&&e.shadowsOff(),t&&this.zb(n)&&null===this.shadowVisible&&e.shadowsOff()}SA(t,e,i,n){t&&(null!==this.Lt||this.zb(n))?(this.Xb(!0),null===this.shadowVisible&&e.shadowsOff()):this.Xb(!1)}MA(t,e,i){t&&!0===this.b2()&&e.shadowsOn(),i&&t&&e.shadowsOff()}JR(t,e,i){const n=this.part;let s=!1;n&&t.getRenderingHint("drawShadows")&&(s=n.isShadowed),e.clipInsteadOfFill&&(s=!1),this.Xs()&&s&&e.shadowsOn(),s&&!0===this.shadowVisible?e.shadowsOn():s&&!1===this.shadowVisible&&e.shadowsOff();const r=this.panel;if(s&&this.zb(r)&&null===this.shadowVisible&&e.shadowsOff(),e.$r){const n=t.computePixelRatio(),s=`drop-shadow(${e.shadowOffsetX/n}px ${e.shadowOffsetY/n}px ${e.shadowBlur/n/2}px ${e.shadowColor})`;null!==this.background&&i.Lt.setAttributeNS(null,"filter",s)}return s&&(null!==this.Lt||this.zb(r))?(this.Xb(!0),null===this.shadowVisible&&e.shadowsOff()):this.Xb(!1),s}$R(t,e,i,n){if(i.$r){const n=e.computePixelRatio(),s=`drop-shadow(${i.shadowOffsetX/n}px ${i.shadowOffsetY/n}px ${i.shadowBlur/n/2}px ${i.shadowColor})`;this.k2(t,s)}n&&!0===this.b2()&&i.shadowsOn(),this.Xs()&&i.shadowsOff()}zb(t){return null!==t&&(t.Jr()&&(t=t.panel),t.b2()||(t.type===qt.Auto||t.type===qt.Spot)&&t.findMainElement()!==this)}k2(t,e){}Vb(t,e,i){const n=this.p0(),s=e.x,r=e.y,o=e.width+n,a=e.height+n;this.rn(t,this.Lt,!0,!1,e,i),this.Lt instanceof Ht&&3===this.Lt.type?(t.beginPath(),t.rect(s-n/2,r-n/2,o,a),t.fillContext(this.Lt,!1,null)):t.fillRect(s-n/2,r-n/2,o,a)}NA(t,e){let i=t.ZR(this);const n=null!==t.hh?t.hh:t.svg;if(-1!==i)if(0===i)if(n.Lt)n.Lt.after(e);else if(t.type===qt.Table){const t=n.getElementsByClassName("gojs-ts"),i=0!==t.length?t[0]:null;null!==i&&i.after(e)}else n.prepend(e);else{for(;0!==i&&!t.elt(i-1).isVisibleObject();)i--;if(0===i)n.prepend(e);else{const s=t.elt(i-1).svg;null!==s?s.after(e):n.appendChild(e)}}}qR(t,e){if(!(t instanceof Ft))return!1;if(!this.visible||0===this.opacity)return null!==this.svg&&null!==this.svg.parentNode&&this.svg.remove(),!0;const i=this.Ni;if(this.Xs()&&(!this.isVisible()||0===i.width||0===i.height||isNaN(i.x)||isNaN(i.y)))return null!==this.svg&&null!==this.svg.parentNode&&this.svg.remove(),!0;const n=this.panel,s=this.$u(t);if(this.Zc(t,e,s))return this.CA(this.svg),null!==this.svg.parentElement?(this.Xs()&&(t.lastDrawnPart=this.svg),!0):(this.Xs()?(null!==t.lastDrawnPart?t.lastDrawnPart.after(this.svg):t.diagramGroup.prepend(this.svg),t.lastDrawnPart=this.svg):n&&this.NA(n,this.svg),!0);if(this.Ve(!1),this.Xs()&&this.isShadowed){const i=this.shadowOffset;t.shadowsSet(i.x*e.scale*this.scale*e.Vi,i.y*e.scale*this.scale*e.Vi,this.shadowBlur),t.shadowsOn(),t.shadowColor=this.shadowColor}this instanceof ie&&(t.font=this.font),t.currentElement=null;const r=this.T,o=this instanceof qt,a=this instanceof qt&&this.Jr(),l=this.svg;if(!0===this.m0()&&this.Bb(),t.setCurrentTransform(1,0,0,1,0,0),t.outerGroup=!1,s)if(t.outerGroup=!0,o&&a)t.newGroup(1,0,0,1,0,0),this.svg=t.lastCreatedElement;else if(o&&this.isClipping){const e=this.findMainElement();let i=0,n=0;null!==e&&(i=e.actualBounds.x,n=e.actualBounds.y),t.newGroup(r.m11,r.m12,r.m21,r.m22,r.dx+i,r.dy+n),this.svg=t.lastCreatedElement,null!==e&&t.createOrUpdateClipGroup(this,e.actualBounds),t.currentElement=t.lastCreatedElement}else o?(t.newGroup(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),this.svg=t.lastCreatedElement):t.newGroup(1,0,0,1,0,0);const h=this.naturalBounds;o||t.setCurrentTransform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),null!==this.background&&(o?(a&&t.setCurrentTransform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),this.Vb(t,h,i),a&&t.setCurrentTransform(1,0,0,1,0,0)):(t.setCurrentTransform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),this.Vb(t,h,i)),t.currentElement.Lt=t.lastCreatedElement,t.currentElement.prepend(t.lastCreatedElement));const u=this.JR(e,t,t.currentElement);this.dh(t,e),o&&t.endGroup(),t.outerGroup&&t.endGroup();const c=t.surface.Ku,d=o?this.svg:t.currentElement;if(null!==l&&d!==l&&l.parentNode===this.panel.svg){const e=this.svg.getAttribute("filter");return null!==e&&d.setAttribute("filter",e),l.replaceWith(d),this.svg=d,null!==d&&this.b0(t,n,i,d),!0}if(this.svg=d,null!==c&&null===d&&t.dummyGroup(),null===d)return!0;this.b0(t,n,i,d),this.$R(d,e,t,u);const f=this.Xs()?this.opacity*t.globalAlpha:this.opacity;if(1!==f&&d.setAttributeNS(null,"opacity",f.toString()),""!==this.filter&&d.setAttributeNS(null,"filter",this.filter),this.Xs()){if(null!==l&&d!==l&&l.parentNode===t.diagramGroup){const t=l.getAttribute("filter");null!==t&&d.setAttribute("filter",t),l.replaceWith(d)}else t.lastDrawnPart?t.lastDrawnPart.after(d):t.diagramGroup.prepend(d);t.lastDrawnPart=d}else null!==n&&this.NA(n,d);return null!==c&&c(this,d),this.CA(d),!0}CA(t){const i=this,n=t.dataset;i instanceof Dt&&(null!==i.portId&&(n.portId=i.portId),i instanceof qt&&(isNaN(i.itemIndex)||(n.itemIndex=i.itemIndex.toString()),i instanceof ce&&(n.className=e.Dn(i),void 0!==i.key&&(n.key=i.key.toString()),null!==i.containingGroup&&(n.group=i.containingGroup.key.toString()),i instanceof be&&(null!==i.fromNode&&void 0!==i.fromNode.key&&(n.fromKey=i.fromNode.key.toString()),""!==i.fromPortId&&(n.fromPortId=i.fromPortId),null!==i.toNode&&void 0!==i.toNode.key&&(n.toKey=i.toNode.key.toString()),""!==i.toPortId&&(n.toPortId=i.toPortId)))))}b0(t,e,i,n){let s=!!(256&this.n);if(t.clipInsteadOfFill&&(s=!1),!s)return void n.removeAttributeNS(null,"clip-path");const r=e.an()?e.naturalBounds:e.actualBounds;let o=Math.max(i.x,r.x),a=Math.max(i.y,r.y),l=Math.min(i.right,r.right)-o,h=Math.min(i.bottom,r.bottom)-a;const u=this.si;null!==u&&(o=u.x,a=u.y,l=u.width,h=u.height);const c=new x(o,a,Math.max(l,0),Math.max(h,0));this instanceof qt&&this.T.copy().xw().vg(c),n.setAttributeNS(null,"clip-path",`path('      M ${c.x},${c.y}       L ${c.width+c.x} ${c.y}       L ${c.width+c.x} ${c.height+c.y}       L ${c.x} ${c.height+c.y} z') view-box`)}QR(){if(null===this.svg)return;const t=this.svg.innerHTML.match(/url\(#((CLIP|GRAD).+?)\)/g),e=this.svg.ownerDocument;if(null!==t)for(const i of t){const t=e.getElementById(i.split("#")[1].slice(0,-1));null!==t&&t.remove()}this.svg.remove()}WR(t,e){const i=this.Ni,n=this.zi,s=this.Lt;null!==s&&t.commitTransform(),null!==s&&(this.rn(t,s,!0,!1,n,i),s instanceof Ht&&3===s.type?(t.beginPath(),t.rect(i.x,i.y,i.width,i.height),t.fillContext(s,!1,null)):t.fillRect(i.x,i.y,i.width,i.height)),this.dh(t,e)}dh(t,e){}Qc(){this.Ve(!0)}Zc(t,e,i){const n=this.svg;if(this._R()){if(this.Qc(),this.Ve(!1),null===n)return!1;const e=n.getAttribute("clip-path");if(null!==e&&e.includes("url")){const i=t.svg.getElementById(e.split("#")[1].slice(0,-1));null!==i&&i.remove()}return n.getAttribute("filter")&&n.removeAttribute("filter"),!1}if(null===n)return!1;if(!this.visible)return n.remove(),!1;if("g"!==n.nodeName&&i||"g"===n.nodeName&&!i)return!1;const s=this.T,r="matrix("+s.m11+", "+s.m12+", "+s.m21+", "+s.m22+", "+s.dx+", "+s.dy+")",o=this instanceof qt,a=!!o&&this.Jr();if(!o||!a)if(this instanceof oe){const e=this.Yb;t.setCurrentTransform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),null!==e&&t.amendImageTransform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]),i?n.lastElementChild.setAttributeNS(null,"transform",t.getCurrentTransform()):n.setAttributeNS(null,"transform",t.getCurrentTransform())}else if(i&&!o)if(this instanceof Jt){const t=n.getElementsByTagName("path");for(let e=0;e<t.length;e++)t[e].setAttributeNS(null,"transform",r)}else if(this instanceof ie){const t=n.getElementsByTagName("text"),e="string"==typeof this.stroke?this.stroke:null;for(let i=0;i<t.length;i++)t[i].setAttributeNS(null,"transform",r),e&&t[i].setAttributeNS(null,"fill",e)}else(n.lastElementChild||n).setAttributeNS(null,"transform",r);else if(o&&this.isClipping&&this.hh){const t=this.findMainElement(),e=null!==t?t.actualBounds.x:0,i=null!==t?t.actualBounds.y:0;this.hh.setAttributeNS(null,"transform","matrix(1,0,0,1,"+-e+", "+-i+")"),n.setAttributeNS(null,"transform","matrix("+s.m11+", "+s.m12+", "+s.m21+", "+s.m22+", "+(s.dx+e)+", "+(s.dy+i)+")")}else n.setAttributeNS(null,"transform",r);const l=this.Xs()?this.opacity*t.globalAlpha:this.opacity;1===l?n.removeAttribute("opacity"):n.setAttributeNS(null,"opacity",l.toString()),t.setCurrentTransform(1,0,0,1,0,0);const h=this.hh?this.hh:this.Ub;if(null!==this.background||void 0!==h.Lt){const e=h.Lt;if(null===this.background)t.removeOldGradient(this,h.Lt,"fill"),h.Lt.remove(),h.Lt=void 0;else{if((a||i&&!(this instanceof qt))&&t.setCurrentTransform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),this.Vb(t,this.naturalBounds,this.actualBounds),h.Lt){t.removeOldGradient(this,h.Lt,"fill");const e=h.Lt.getAttribute("filter");null!==e&&t.lastCreatedElement.setAttribute("filter",e),h.Lt.replaceWith(t.lastCreatedElement)}else h.prepend(t.lastCreatedElement);h.Lt=t.lastCreatedElement}e&&t.removeOldGradient(this,e,"fill")}return this.b0(t,this.panel,this.actualBounds,n),!0}$u(t){if(null!==this.background)return!0;let e=!!(256&this.n);return t.clipInsteadOfFill&&(e=!1),!!e}static TE(t,e,i,n,s,r,o){let a=.001;const l=r.length;t.moveTo(e,i);let h=n-e;const u=s-i;0===h&&(h=.001);const c=u/h;let d=Math.sqrt(h*h+u*u),f=0,p=!0;a=r[f%l];let g=0!==o;for(;d>=.1;){if(g){for(a=r[f++%l],a-=o;a<0;)a+=r[f++%l],p=!p;g=!1}else a=r[f++%l];a>d&&(a=d);let n=Math.sqrt(a*a/(1+c*c));h<0&&(n=-n),e+=n,i+=c*n,p?t.lineTo(e,i):t.moveTo(e,i),d-=a,p=!p}}rn(t,i,n,s,r,o){let a,l=1,h=1;if("string"==typeof i)return void(n?t.fillStyle=i:t.strokeStyle=i);if(1===i.type)return void(n?t.fillStyle=i.color:t.strokeStyle=i.color);const u=this.p0();l=r.width,h=r.height,s?(l=o.width,h=o.height):n||(l+=u,h+=u);const c=t instanceof It;if(c&&i.cn&&(4===i.type||i._c===l&&i.Kb===h))a=i.cn;else{let r=0,d=0,f=0,p=0,g=0,m=0,y=0,v=0;if(s?(y=o.x,v=o.y):n||(y-=u/2,v-=u/2),r=i.start.x*l+i.start.offsetX+y,d=i.start.y*h+i.start.offsetY+v,f=i.end.x*l+i.end.offsetX+y,p=i.end.y*h+i.end.offsetY+v,2===i.type)a=t.createLinearGradient(r,d,f,p);else if(3===i.type)m=isNaN(i.endRadius)?Math.max(l,h)/2:i.endRadius,isNaN(i.startRadius)?(g=0,m=Math.max(l,h)/2):g=i.startRadius,a=t.createRadialGradient(r,d,g,f,p,m);else if(4===i.type)try{a=t.createPattern(i.pattern,"repeat")}catch{a=null}else e.Zi(i.type,"Brush type");if(4!==i.type){const t=i.colorStops;if(null!==t){const e=t.iterator;for(;e.next();)a.addColorStop(e.key,e.value)}}if(c&&(i.cn=a,null!==a&&(i._c=l,i.Kb=h),null===a&&4===i.type&&-1!==i._c)){i._c=-1;const t=this.diagram;null!==t&&-1===i._c&&e.ir((()=>{t.redraw()}),600)}}n?t.fillStyle=a:t.strokeStyle=a}isContainedBy(t){return t instanceof qt&&this.tv(this,t)}tv(t,e){if(t===e||null===e)return!1;let i=t.panel;for(;null!==i;){if(i===e)return!0;i=i.panel}return!1}isVisibleObject(){if(!this.visible)return!1;const t=this.panel;return null===t||t.isVisibleObject()}isEnabledObject(){let t=this instanceof qt?this:this.panel;for(;null!==t&&t.isEnabled;)t=t.panel;return null===t}get enabledChanged(){return null!==this.p?this.p.k0:null}set enabledChanged(t){const i=this.enabledChanged;i!==t&&(null!==t&&e.k(t,Dt,"enabledChanged"),this.Gt().k0=t,this.t("enabledChanged",i,t))}Bb(){if(!0===this.Gb()){const t=this.jr;if(t.Ri(),!this.Ni.isReal()||!this.se.isReal())return void this.Zu(!1);if(t.Fs(this.Ni.x-this.se.x,this.Ni.y-this.se.y),1!==this.scale||0!==this.angle){const e=this.naturalBounds;this.g0(t,e.x,e.y,e.width,e.height)}this.Zu(!1),this.ka(!0)}if(!0===this.m0()){const t=this.panel;if(null===t)this.lh.set(this.jr),this.da=this.scale;else if(null!==t.Us){const e=this.lh;e.Ri(),t.an()?e.nc(t.lh):null!==t.panel&&e.nc(t.panel.lh),e.nc(this.jr),this.da=this.scale*t.da}this.ka(!1)}}g0(t,e,i,n,s){if(1!==this.tt&&t.tt(this.tt),0===this.Yt)return;const r=y.l();r.setSpot(e,i,n,s,w.Center),t.cs(this.Yt,r.x,r.y),y.e(r)}c(t){if(this.To())return;void 0===t&&(t=!1),this.ue(!0),this.Jn(!0);const e=this.panel;null!==e&&!t&&e.c()}tf(){this.To()||(this.ue(!0),this.Jn(!0))}ef(t){if(this._e())return;const e=this.panel;!t&&null!==e&&e.c(),this.Jn(!0)}$c(){!1===this.Gb()&&(this.Zu(!0),this.ka(!0))}P2(){this.ka(!0)}S(){const t=this.part;null!==t&&t.S()}zs(t){const e=this.stretch,i=this.panel;if(null===i)return this.Oo(1===e?0:e,t);if(i.type===qt.Table)return this.P0(i.getRowDefinition(this.row),i.getColumnDefinition(this.column),t);if(i.type===qt.Auto&&i.findMainElement()===this)return this.Oo(2,t);if(1===e){if(i.type===qt.Spot&&i.findMainElement()===this)return this.Oo(2,t);const e=i.defaultStretch;return 1===e?this.Oo(0,t):this.Oo(e,t)}return this.Oo(e,t)}P0(t,e,i){const n=this.stretch;if(1!==n)return this.Oo(n,i);let s=null,r=null;switch(t.stretch){case 1:case 5:break;case 4:case 2:r=!0}switch(e.stretch){case 1:case 4:break;case 5:case 2:s=!0}const o=this.panel.defaultStretch;return null===s&&(s=5===o||2===o),null===r&&(r=4===o||2===o),!0===s&&!0===r?this.Oo(2,i):!0===s?this.Oo(5,i):!0===r?this.Oo(4,i):this.Oo(0,i)}Oo(t,e){if(e)return t;if(0===t)return 0;const i=this.desiredSize;if(i.isReal())return 0;const n=!isNaN(i.width),s=!isNaN(i.height),r=this.angle;if(n)if(90!==r&&270!==r){if(5===t)return 0;if(2===t)return 4}else{if(4===t)return 0;if(2===t)return 5}if(s)if(90!==r&&270!==r){if(4===t)return 0;if(2===t)return 5}else{if(5===t)return 0;if(2===t)return 4}return t}get segmentOrientation(){return null!==this.Ot?this.Ot.S0:0}set segmentOrientation(t){const e=this.segmentOrientation;e!==t&&(null===this.Ot&&(this.Ot=new Te),this.Ot.S0=t,this.c(),this.t("segmentOrientation",e,t),0===t&&(this.angle=0))}iv(){this.segmentOrientation=21}get segmentIndex(){return null!==this.Ot?this.Ot.M0:-1/0}set segmentIndex(t){t=Math.round(t);const e=this.segmentIndex;e!==t&&(null===this.Ot&&(this.Ot=new Te),this.Ot.M0=t,this.c(),this.t("segmentIndex",e,t))}get segmentFraction(){return null!==this.Ot?this.Ot.N0:0}set segmentFraction(t){t<0?t=0:t>1&&(t=1);const e=this.segmentFraction;e!==t&&(null===this.Ot&&(this.Ot=new Te),this.Ot.N0=t,this.c(),this.t("segmentFraction",e,t))}get segmentOffset(){return null!==this.Ot?this.Ot.C0:y.xo}set segmentOffset(t){const e=this.segmentOffset;e.equals(t)||(t=t.P(),null===this.Ot&&(this.Ot=new Te),this.Ot.C0=t,this.c(),this.t("segmentOffset",e,t))}get stretch(){return null!==this.p?this.p.$n:1}set stretch(t){const e=this.stretch;e!==t&&(this.Gt().$n=t,this.c(),this.t("stretch",e,t))}get name(){return null!==this.p?this.p.Pt:""}set name(t){const e=this.name;e!==t&&(this.Gt().Pt=t,null!==this.part&&this.part.L0(),this.t("name",e,t))}get opacity(){return this.$t}set opacity(t){t<0?t=0:t>1&&(t=1);const e=this.opacity;if(e!==t){this.$t=t,this.t("opacity",e,t);const i=this.diagram,n=this.part;null!==i&&null!==n&&i.S(n.qh(n.actualBounds))}}get filter(){return this.u0}set filter(t){const e=this.filter;if(e!==t){this.u0=t,this.Ve(!0),this.t("filter",e,t);const i=this.diagram,n=this.part;null!==i&&null!==n&&i.S(n.qh(n.actualBounds))}}get visible(){return!!(1&this.n)}set visible(t){const e=!!(1&this.n);if(e!==t){this.n=1^this.n,this.Qc(),this.t("visible",e,t);const i=this.panel;null!==i?i.c():this.Xs()&&this.Ei(t),this.S(),this.LA()}}get pickable(){return!!(2&this.n)}set pickable(t){const e=!!(2&this.n);e!==t&&(this.n=2^this.n,this.t("pickable",e,t))}get fromLinkableDuplicates(){return!!(4&this.n)}set fromLinkableDuplicates(t){const e=!!(4&this.n);e!==t&&(this.n=4^this.n,this.t("fromLinkableDuplicates",e,t))}get fromLinkableSelfNode(){return!!(8&this.n)}set fromLinkableSelfNode(t){const e=!!(8&this.n);e!==t&&(this.n=8^this.n,this.t("fromLinkableSelfNode",e,t))}get toLinkableDuplicates(){return!!(16&this.n)}set toLinkableDuplicates(t){const e=!!(16&this.n);e!==t&&(this.n=16^this.n,this.t("toLinkableDuplicates",e,t))}get toLinkableSelfNode(){return!!(32&this.n)}set toLinkableSelfNode(t){const e=!!(32&this.n);e!==t&&(this.n=32^this.n,this.t("toLinkableSelfNode",e,t))}get isPanelMain(){return!!(64&this.n)}set isPanelMain(t){const e=!!(64&this.n);e!==t&&(this.n=64^this.n,this.c(),this.t("isPanelMain",e,t))}get isActionable(){return!!(128&this.n)}set isActionable(t){const e=!!(128&this.n);e!==t&&(this.n=128^this.n,this.t("isActionable",e,t))}get background(){return this.Lt}set background(t){const e=this.background;e!==t&&(null!==t&&Ht.Qu(t,"GraphObject.background"),t instanceof Ht&&t.u(),this.Lt=t,this.S(),this.t("background",e,t))}b2(){return!!(512&this.n)}Xb(t){t?this.n|=512:this.n&=-513}Wc(){return!!(1024&this.n)}S2(t){t?this.n|=1024:this.n&=-1025}Gb(){return!!(2048&this.n)}Zu(t){t?this.n|=2048:this.n&=-2049}m0(){return!!(4096&this.n)}ka(t){t?this.n|=4096:this.n&=-4097}To(){return!!(8192&this.n)}ue(t){t?this.n|=8192:this.n&=-8193}_e(){return!!(16384&this.n)}Jn(t){t?this.n|=16384:this.n&=-16385}_R(){return!!(32768&this.n)}Ve(t){t?this.n|=32768:this.n&=-32769}get part(){if(this.Xs())return this;if(null!==this.Wr)return this.Wr;let t=this;for(t=t.panel;t;){if(t instanceof ce)return this.Wr=t,t;t=t.panel}return null}get svg(){return this.Ub}set svg(t){this.Ub=t}Au(){this.svg=null}get panel(){return this.Vs}Pa(t){this.Vs=t,null!==this.svg&&this.svg.remove()}get layer(){const t=this.part;return null!==t?t.layer:null}get diagram(){const t=this.part;return null!==t?t.diagram:null}get position(){return this.at}set position(t){const e=t.x,i=t.y,n=this.position,s=n.x,r=n.y;(s===e||isNaN(s)&&isNaN(e))&&(r===i||isNaN(r)&&isNaN(i))?this.N2():(t=t.copy(),this.M2(t,s,r)&&this.t("position",new y(s,r),t.copy()))}N2(){}M2(t,e,i){return this.at=t,this.ef(),!0}bc(t,e,i){this.at.x===t&&this.at.y===e||(this.at.i(t,e),this.$c())}get actualBounds(){return this.Ni}get scale(){return this.tt}set scale(t){const i=this.scale;i!==t&&(t<=0&&e.o("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.tt=t,this.c(),this.t("scale",i,t))}get angle(){return this.Yt}set angle(t){const e=this.angle;if(e!==t){if((t%=360)<0&&(t+=360),e===t)return;this.Yt=t,this.LA(),this.c(),this.t("angle",e,t)}}get desiredSize(){return this.is}set desiredSize(t){const e=t.width,i=t.height,n=this.desiredSize,s=n.width,r=n.height;if((s!==e&&(!isNaN(s)||!isNaN(e))||r!==i&&(!isNaN(r)||!isNaN(i)))&&(t=t.P(),this.is=t,this.c(),this instanceof Jt&&this.ee(),this.t("desiredSize",n,t),this.Wc())){const t=this.part;null!==t&&(this.ba(t,"width"),this.ba(t,"height"))}}get width(){return this.is.width}set width(t){const e=this.is.width;if(!(e===t||isNaN(e)&&isNaN(t))){const e=this.is,i=new v(t,this.is.height).u();if(this.is=i,this.c(),this instanceof Jt&&this.ee(),this.t("desiredSize",e,i),this.Wc()){const t=this.part;null!==t&&this.ba(t,"width")}}}get height(){return this.is.height}set height(t){const e=this.is.height;if(!(e===t||isNaN(e)&&isNaN(t))){const e=this.is,i=new v(this.is.width,t).u();if(this.is=i,this.c(),this instanceof Jt&&this.ee(),this.t("desiredSize",e,i),this.Wc()){const t=this.part;null!==t&&this.ba(t,"height")}}}get minSize(){return null!==this.p?this.p.pr:v.sc}set minSize(t){const e=this.minSize;e.equals(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.u(),this.Gt().pr=t,this.c(),this.t("minSize",e,t))}get maxSize(){return null!==this.p?this.p.yr:v.Bk}set maxSize(t){const e=this.maxSize;e.equals(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.u(),this.Gt().yr=t,this.c(),this.t("maxSize",e,t))}get measuredBounds(){return this.se}get naturalBounds(){return this.zi}p0(){return 0}get margin(){return this.qr}set margin(t){"number"==typeof t&&(t=new b(t));const e=this.qr;e.equals(t)||(t=t.P(),this.qr=t,this.c(),this.t("margin",e,t))}get T(){return!0===this.Gb()&&this.Bb(),this.jr}get Us(){return!0===this.m0()&&this.Bb(),this.lh}trigger(t,e,i){let n=null;return n="string"==typeof t?new ft(t,e,i):t,n.be=this,null===this.ws&&(this.ws=new m),this.ws.set(n.propertyName,n),this}get ws(){return null!==this.p?this.p.ws:null}set ws(t){this.ws!==t&&(this.Gt().ws=t)}get gr(){return null!==this.p?this.p.gr:0}set gr(t){this.gr!==t&&(this.Gt().gr=t)}get alignment(){return this.hi}set alignment(t){const i=this.alignment;i.equals(t)||(t.isNoSpot()&&!t.isDefault()&&e.o("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),t=t.P(),this.hi=t,this.ef(),this.t("alignment",i,t))}get column(){return this.Hr}set column(t){t=Math.round(t);const i=this.column;i!==t&&(t<0&&e.W(t,">= 0",Dt,"column"),this.Hr=t,this.c(),this.t("column",i,t),null!==this.svg&&this.svg.remove())}get columnSpan(){return null!==this.p?this.p.A0:1}set columnSpan(t){t=Math.round(t);const i=this.columnSpan;i!==t&&(t<1&&e.W(t,">= 1",Dt,"columnSpan"),this.Gt().A0=t,this.c(),this.t("columnSpan",i,t))}get row(){return this.f0}set row(t){t=Math.round(t);const i=this.row;i!==t&&(t<0&&e.W(t,">= 0",Dt,"row"),this.f0=t,this.c(),this.t("row",i,t),null!==this.svg&&this.svg.remove())}get rowSpan(){return null!==this.p?this.p.T0:1}set rowSpan(t){t=Math.round(t);const i=this.rowSpan;i!==t&&(t<1&&e.W(t,">= 1",Dt,"rowSpan"),this.Gt().T0=t,this.c(),this.t("rowSpan",i,t))}get spanAllocation(){return null!==this.p?this.p.D0:null}set spanAllocation(t){const i=this.spanAllocation;i!==t&&(null!==t&&e.k(t,Dt,"spanAllocation"),this.Gt().D0=t,this.c(),this.t("spanAllocation",i,t))}get alignmentFocus(){return this.Hu}set alignmentFocus(t){const e=this.alignmentFocus;e.equals(t)||(t=t.P(),this.Hu=t,this.c(),this.t("alignmentFocus",e,t))}get portId(){return this.c0}set portId(t){const i=this.portId;if(i!==t){const n=this.part;null!==n&&!(n instanceof ge)&&e.o("Cannot set portID on a Link: "+t);const s=n;null!==i&&null!==s&&s.C2(this),this.c0=t,null!==t&&null!==s&&(s.fn=!0,s.AA(this)),this.t("portId",i,t)}}Sa(){const t=this.part;if(t instanceof ge&&(null!==this.portId||this===t.port)){const e=t.diagram;null!==e&&!e.undoManager.isUndoingRedoing&&t.kA(this)}}LA(){const t=this.diagram;null===t||t.undoManager.isUndoingRedoing||(this instanceof qt?this instanceof ge?this.invalidateConnectedLinks():this.walkVisualTreeFrom(this,(t=>{t.Sa()})):this.Sa())}get toSpot(){return null!==this.ct?this.ct.ma:w.None}set toSpot(t){const e=this.toSpot;e.equals(t)||(t=t.P(),this.Be().ma=t,this.t("toSpot",e,t),this.Sa())}get toEndSegmentLength(){return null!==this.ct?this.ct.ya:10}set toEndSegmentLength(t){const i=this.toEndSegmentLength;i!==t&&(t<0&&e.W(t,">= 0",Dt,"toEndSegmentLength"),this.Be().ya=t,this.t("toEndSegmentLength",i,t),this.Sa())}get toShortLength(){return null!==this.ct?this.ct.xa:0}set toShortLength(t){const e=this.toShortLength;e!==t&&(this.Be().xa=t,this.t("toShortLength",e,t),this.Sa())}get toLinkable(){return null!==this.ct?this.ct.F0:null}set toLinkable(t){const e=this.toLinkable;e!==t&&(this.Be().F0=t,this.t("toLinkable",e,t))}get toMaxLinks(){return null!==this.ct?this.ct.R0:1/0}set toMaxLinks(t){const i=this.toMaxLinks;i!==t&&(t<0&&e.W(t,">= 0",Dt,"toMaxLinks"),this.Be().R0=t,this.t("toMaxLinks",i,t))}get fromSpot(){return null!==this.ct?this.ct.ga:w.None}set fromSpot(t){const e=this.fromSpot;e.equals(t)||(t=t.P(),this.Be().ga=t,this.t("fromSpot",e,t),this.Sa())}get fromEndSegmentLength(){return null!==this.ct?this.ct.pa:10}set fromEndSegmentLength(t){const i=this.fromEndSegmentLength;i!==t&&(t<0&&e.W(t,">= 0",Dt,"fromEndSegmentLength"),this.Be().pa=t,this.t("fromEndSegmentLength",i,t),this.Sa())}get fromShortLength(){return null!==this.ct?this.ct.wa:0}set fromShortLength(t){const e=this.fromShortLength;e!==t&&(this.Be().wa=t,this.t("fromShortLength",e,t),this.Sa())}get fromLinkable(){return null!==this.ct?this.ct.v0:null}set fromLinkable(t){const e=this.fromLinkable;e!==t&&(this.Be().v0=t,this.t("fromLinkable",e,t))}get fromMaxLinks(){return null!==this.ct?this.ct.O0:1/0}set fromMaxLinks(t){const i=this.fromMaxLinks;i!==t&&(t<0&&e.W(t,">= 0",Dt,"fromMaxLinks"),this.Be().O0=t,this.t("fromMaxLinks",i,t))}get cursor(){return null!==this.p?this.p.Pl:""}set cursor(t){const i=this.cursor;i!==t&&(e.s(t,"string",Dt,"cursor"),this.Gt().Pl=t,this.t("cursor",i,t))}get click(){return null!==this.p?this.p.Cr:null}set click(t){const i=this.click;i!==t&&(null!==t&&e.k(t,Dt,"click"),this.Gt().Cr=t,this.t("click",i,t))}get doubleClick(){return null!==this.p?this.p.Lr:null}set doubleClick(t){const i=this.doubleClick;i!==t&&(null!==t&&e.k(t,Dt,"doubleClick"),this.Gt().Lr=t,this.t("doubleClick",i,t))}get contextClick(){return null!==this.p?this.p.Ar:null}set contextClick(t){const i=this.contextClick;i!==t&&(null!==t&&e.k(t,Dt,"contextClick"),this.Gt().Ar=t,this.t("contextClick",i,t))}get mouseEnter(){return null!==this.p?this.p.vr:null}set mouseEnter(t){const i=this.mouseEnter;i!==t&&(null!==t&&e.k(t,Dt,"mouseEnter"),this.Gt().vr=t,this.t("mouseEnter",i,t))}get mouseLeave(){return null!==this.p?this.p.Or:null}set mouseLeave(t){const i=this.mouseLeave;i!==t&&(null!==t&&e.k(t,Dt,"mouseLeave"),this.Gt().Or=t,this.t("mouseLeave",i,t))}get mouseOver(){return null!==this.p?this.p.Tr:null}set mouseOver(t){const i=this.mouseOver;i!==t&&(null!==t&&e.k(t,Dt,"mouseOver"),this.Gt().Tr=t,this.t("mouseOver",i,t))}get mouseHover(){return null!==this.p?this.p.Dr:null}set mouseHover(t){const i=this.mouseHover;i!==t&&(null!==t&&e.k(t,Dt,"mouseHover"),this.Gt().Dr=t,this.t("mouseHover",i,t))}get mouseHold(){return null!==this.p?this.p.Fr:null}set mouseHold(t){const i=this.mouseHold;i!==t&&(null!==t&&e.k(t,Dt,"mouseHold"),this.Gt().Fr=t,this.t("mouseHold",i,t))}get mouseDragEnter(){return null!==this.p?this.p.I0:null}set mouseDragEnter(t){const i=this.mouseDragEnter;i!==t&&(null!==t&&e.k(t,Dt,"mouseDragEnter"),this.Gt().I0=t,this.t("mouseDragEnter",i,t))}get mouseDragLeave(){return null!==this.p?this.p.E0:null}set mouseDragLeave(t){const i=this.mouseDragLeave;i!==t&&(null!==t&&e.k(t,Dt,"mouseDragLeave"),this.Gt().E0=t,this.t("mouseDragLeave",i,t))}get mouseDrop(){return null!==this.p?this.p.Rr:null}set mouseDrop(t){const i=this.mouseDrop;i!==t&&(null!==t&&e.k(t,Dt,"mouseDrop"),this.Gt().Rr=t,this.t("mouseDrop",i,t))}get actionDown(){return null!==this.p?this.p.U0:null}set actionDown(t){const i=this.actionDown;i!==t&&(null!==t&&e.k(t,Dt,"actionDown"),this.Gt().U0=t,this.t("actionDown",i,t))}get actionMove(){return null!==this.p?this.p.B0:null}set actionMove(t){const i=this.actionMove;i!==t&&(null!==t&&e.k(t,Dt,"actionMove"),this.Gt().B0=t,this.t("actionMove",i,t))}get actionUp(){return null!==this.p?this.p.V0:null}set actionUp(t){const i=this.actionUp;i!==t&&(null!==t&&e.k(t,Dt,"actionUp"),this.Gt().V0=t,this.t("actionUp",i,t))}get actionCancel(){return null!==this.p?this.p.z0:null}set actionCancel(t){const i=this.actionCancel;i!==t&&(null!==t&&e.k(t,Dt,"actionCancel"),this.Gt().z0=t,this.t("actionCancel",i,t))}get toolTip(){return null!==this.p?this.p.Ir:null}set toolTip(t){const e=this.toolTip;e!==t&&(this.Gt().Ir=t,this.t("toolTip",e,t))}get contextMenu(){return null!==this.p?this.p.Er:null}set contextMenu(t){const e=this.contextMenu;e!==t&&(this.Gt().Er=t,this.t("contextMenu",e,t))}findBindingPanel(){let t=this instanceof qt?this:this.panel;for(;null!==t;){if(t.L2())return t;t=t.panel}return null}bind(t,e,i,n){return this.sf(t,e,i,n),this}bindTwoWay(t,e,i,n){return this.sf(t,e,i,n).makeTwoWay(),this}bindModel(t,e,i,n){return this.sf(t,e,i,n).ofModel(),this}bindObject(t,e,i,n,s){return this.sf(t,e,i,n).ofObject(s),this}theme(t,e,i,n,s){return this.gh(t,e,i,n,s),this}themeData(t,e,i,n,s){return this.gh(t,e,i,n,s).ofData(),this}themeObject(t,e,i,n,s,r){return this.gh(t,e,i,n,s).ofObject(r),this}themeModel(t,e,i,n,s){return this.gh(t,e,i,n,s).ofModel(),this}sf(t,e,i,n){let s=null;return s="string"==typeof t?new je(t,e,i,n):t,this.X0(s),s}gh(t,e,i,n,s){let r=null;return r="string"==typeof t?new ze(t,e,i,n,s):t,this.X0(r),r}X0(t){t.be=this;const i=this.findBindingPanel();null!==i&&i.TA()&&e.o("Cannot add a Binding to a template that has already been copied: "+t),null===this.Ci&&(this.Ci=new l),this.Ci.add(t)}set(t){return Object.assign(this,t),this}attach(t){return Dt.A2(this,t),this}apply(t){return t(this),this}setProperties(t){return xt.e0(this,t),this}static make(i,...n){let s=arguments,r=null,o=null;if(e.it(i))o=i;else if("string"==typeof i){const n=Dt.Hb.get(i);e.it(n)?(s=Array.prototype.slice.call(s),r=n(s),e.K(r)||e.o('GraphObject.make invoked object builder "'+i+'", but it did not return an Object')):o=t.go[i]}null===r&&((null==o||!o.constructor)&&e.o("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+i),r=new o);let a=1;if(r instanceof xt&&s.length>1){const t=r,e=s[1];("string"==typeof e||e instanceof HTMLDivElement)&&(t.AM(e),a++)}for(let t=a;t<s.length;t++){const i=s[t];void 0===i?e.o("Undefined value at argument "+t+" for object being constructed by GraphObject.make: "+r):Dt.A2(r,i)}return r}static A2(t,i){if("number"==typeof i)Dt.ev(t,i);else if("string"==typeof i)Dt.sv(t,i);else if(i instanceof Dt)t instanceof qt||e.o("A GraphObject can only be added to a Panel, not to: "+t),t.add(i);else if(i instanceof Kt){let n;i.isRow&&e.it(t.getRowDefinition)?n=t.getRowDefinition(i.index):!i.isRow&&e.it(t.getColumnDefinition)&&(n=t.getColumnDefinition(i.index)),n instanceof Kt?n.jb(i):e.o("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(i instanceof Ut){t.type=i}else if(i instanceof je)t instanceof Dt||t instanceof Kt?t.bind(i):e.o("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(i instanceof ft)t instanceof Dt?t.trigger(i):e.o("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(i instanceof P)t instanceof A&&4===t.type?t.figures.add(i):e.o("A PathFigure can only be added to a Path Geometry, not to: "+t);else if(i instanceof D)t instanceof P?t.segments.add(i):e.o("A PathSegment can only be added to a PathFigure, not to: "+t);else if(i instanceof Ne)t instanceof xt||t instanceof Ae?t.layout=i:e.o("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(i))for(let e=0;e<i.length;e++){const n=i[e];Dt.A2(t,n)}else e.K(i)?Dt.nv(t,i):e.o('Unknown initializer "'+i+'" for object being constructed by GraphObject.make: '+t)}static sv(t,i){if(t instanceof ie)t.text=i;else if(t instanceof Jt)t.figure=i;else if(t instanceof oe)t.source=i;else if(t instanceof qt){const e=Ut.es.get(i);null!==e&&(t.type=e)}else if(t instanceof Ht){const n=e.Eh(Bt,i);null!==n?t.type=n:e.o("Unknown Brush type as an argument to GraphObject.make: "+i)}else if(t instanceof A){const n=e.Eh(M,i);null!==n&&(t.type=n)}else if(t instanceof D){const n=e.Eh(N,i);null!==n&&(t.type=n)}}static ev(t,i){e.it(t.oi)?t.oi(i):e.er(t,i)}static nv(t,i){if(t instanceof Ht){const e=new n;for(const n in i){const s=parseFloat(n);isNaN(s)?e[n]=i[n]:t.addColorStop(s,i[n])}xt.e0(t,e)}else if(t instanceof Kt){if(void 0!==i.row){const n=i.row;(null==n||n===1/0||isNaN(n)||n<0)&&e.o("Must specify non-negative integer row for RowColumnDefinition "+i+", not: "+n),t.isRow=!0,t.index=n}else if(void 0!==i.column){const n=i.column;(null==n||n===1/0||isNaN(n)||n<0)&&e.o("Must specify non-negative integer column for RowColumnDefinition "+i+", not: "+n),t.isRow=!1,t.index=n}const s=new n;for(const t in i)"row"===t||"column"===t||(s[t]=i[t]);xt.e0(t,s)}else xt.e0(t,i)}static build(t,i,...n){const s=Dt.Hb.get(t);if(e.it(s)){const e=s([t].concat(n));if(e instanceof Dt)return i&&e.setProperties(i),e}e.o('GraphObject.build invoked object builder "'+t+'", but it did not return an Object')}static defineBuilder(t,i){e.s(t,"string",Dt,"defineBuilder:name"),e.k(i,Dt,"defineBuilder:func");t.toLowerCase();Dt.Hb.set(t,i)}static isBuilderDefined(t){return Dt.Hb.has(t)}static takeBuilderArgument(t,i,n){void 0===n&&(n=null);const s=t[1];return(e.it(n)?n(s):"string"==typeof s)?(t.splice(1,1),s):(void 0===i&&e.o("no "+(e.it(n)?"satisfactory":"string")+" argument for GraphObject builder "+t[0]),i)}static Hb=new m;static{Dt.Vertical=4,Dt.Horizontal=5,Dt.defineBuilder("Button",(t=>{const e=2.76142374915397,i=2.761423749153969,n=new qt(qt.Auto,{isActionable:!0,enabledChanged:(t,e)=>{if(t instanceof qt){const i=t.findObject("ButtonBorder");if(null!==i)if(void 0===t._buttonFillNormal&&(t._buttonFillNormal=i.fill),e){let e=null;null!==t.layer&&null!==t.diagram&&t.isVisibleObject()&&(e=t.layer.findObjectAt(t.diagram.lastInput.documentPoint)),e===t||null!==e&&e.isContainedBy(t)?i.fill=t._buttonFillOver:i.fill=t._buttonFillNormal}else i.fill=t._buttonFillDisabled}},cursor:"pointer"}).attach({_buttonFillNormal:void 0,_buttonStrokeNormal:void 0,_buttonFillOver:"#d4d4d4",_buttonStrokeOver:"#737373",_buttonFillDisabled:"#a3a3a3"}).add(new Jt("RoundedRectangle",{name:"ButtonBorder",spot1:new w(0,0,e,i),spot2:new w(1,1,-e,-i),parameter1:2,fill:"#f5f5f5",stroke:"#737373"}));return n.mouseEnter=(t,e,i)=>{if(!(e.isEnabledObject()&&e instanceof qt))return;const n=e.findObject("ButtonBorder");n instanceof Jt&&(void 0===e._buttonFillNormal&&(e._buttonFillNormal=n.fill),n.fill=e._buttonFillOver,void 0===e._buttonStrokeNormal&&(e._buttonStrokeNormal=n.stroke),n.stroke=e._buttonStrokeOver)},n.mouseLeave=(t,e,i)=>{if(!(e.isEnabledObject()&&e instanceof qt))return;const n=e.findObject("ButtonBorder");n instanceof Jt&&(void 0!==e._buttonFillNormal&&(n.fill=e._buttonFillNormal),void 0!==e._buttonStrokeNormal&&(n.stroke=e._buttonStrokeNormal))},n})),Dt.defineBuilder("TreeExpanderButton",(t=>{const e=Dt.build("Button");return e.attach({_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine",visible:!1}),e.add(new Jt("MinusLine",{name:"ButtonIcon",stroke:"#0a0a0a",strokeWidth:2,desiredSize:v.nu}).bindObject("figure","isTreeExpanded",((t,e)=>{const i=e.panel;return t?i._treeExpandedFigure:i._treeCollapsedFigure}))),e.bindObject("visible","isTreeLeaf",(t=>!t)),e.click=(t,e)=>{let i=e.part;if(i instanceof fe&&(i=i.adornedPart),!(i instanceof ge))return;const n=i.diagram;if(null===n)return;const s=n.commandHandler;if(i.isTreeExpanded){if(!s.canCollapseTree(i))return}else if(!s.canExpandTree(i))return;t.handled=!0,i.isTreeExpanded?s.collapseTree(i):s.expandTree(i)},e})),Dt.defineBuilder("SubGraphExpanderButton",(t=>{const e=Dt.build("Button");return e.attach({_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"}),e.add(new Jt("MinusLine",{name:"ButtonIcon",stroke:"#0a0a0a",strokeWidth:2,desiredSize:v.nu}).bindObject("figure","isSubGraphExpanded",((t,e)=>{const i=e.panel;return t?i._subGraphExpandedFigure:i._subGraphCollapsedFigure}))),e.click=(t,e)=>{let i=e.part;if(i instanceof fe&&(i=i.adornedPart),!(i instanceof Ae))return;const n=i.diagram;if(null===n)return;const s=n.commandHandler;if(i.isSubGraphExpanded){if(!s.canCollapseSubGraph(i))return}else if(!s.canExpandSubGraph(i))return;t.handled=!0,i.isSubGraphExpanded?s.collapseSubGraph(i):s.expandSubGraph(i)},e})),Dt.defineBuilder("ToolTip",(t=>new fe(qt.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new y(0,2)}).add(new Jt("RoundedRectangle",{name:"Border",parameter1:1,fill:"#f5f5f5",strokeWidth:0,spot1:new w(0,0,4,6),spot2:new w(1,1,-4,-4)})))),Dt.defineBuilder("ContextMenu",(t=>new fe(qt.Vertical,{background:"#f5f5f5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new y(0,2)}).bindObject("background","",(t=>null!==t.adornedPart&&t.hasPlaceholder()?null:"#f5f5f5")))),Dt.defineBuilder("ContextMenuButton",(t=>{const e=Dt.build("Button");e.stretch=5;const i=e.findObject("ButtonBorder");return i instanceof Jt&&(i.figure="Rectangle",i.strokeWidth=0,i.spot1=new w(0,0,4,6),i.spot2=new w(1,1,-4,-4)),e})),Dt.defineBuilder("PanelExpanderButton",(t=>{const e=Dt.takeBuilderArgument(t,"COLLAPSIBLE"),i=Dt.build("Button");i.attach({_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8","ButtonBorder.fill":"rgba(0, 0, 0, 0)",_buttonFillNormal:"rgba(0, 0, 0, 0)","ButtonBorder.stroke":null,_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null}),i.add(new Jt({name:"ButtonIcon",strokeWidth:2}).bindObject("geometryString","visible",(t=>t?i._buttonExpandedFigure:i._buttonCollapsedFigure),void 0,e));const n=i.findObject("ButtonBorder");return n instanceof Jt&&(n.stroke=null,n.fill="rgba(0, 0, 0, 0)"),i.click=(t,i)=>{if(!(i instanceof qt))return;const n=i.diagram;if(null===n||n.isReadOnly)return;let s=i.findBindingPanel();if(null===s&&(s=i.part),null!==s){const i=s.findObject(e);null!==i&&(t.handled=!0,n.startTransaction("Collapse/Expand Panel"),i.visible=!i.visible,n.commitTransaction("Collapse/Expand Panel"))}},i})),Dt.defineBuilder("CheckBoxButton",(t=>{const i=Dt.takeBuilderArgument(t),n=Dt.build("Button",{desiredSize:new v(14,14)});n.attach({"ButtonBorder.spot1":new w(0,0,1,1),"ButtonBorder.spot2":new w(1,1,-1,-1)});const s=new Jt({name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:2,geometryStretch:6,visible:!1});return""!==i&&s.bindTwoWay("visible",i),n.add(s),n.click=(t,n)=>{if(!(n instanceof qt))return;const s=t.diagram;if(null===s||s.isReadOnly||""!==i&&s.model.isReadOnly)return;t.handled=!0;const r=n.findObject("ButtonIcon");s.startTransaction("checkbox"),null!==r&&(r.visible=!r.visible),e.it(n._doClick)&&n._doClick(t,n),s.commitTransaction("checkbox")},n})),Dt.defineBuilder("CheckBox",(t=>{const e=Dt.takeBuilderArgument(t),i=Dt.build("CheckBoxButton",{name:"Button",isActionable:!1,margin:new b(0,1,0,0)},e),n=new qt("Horizontal",{isActionable:!0,cursor:i.cursor,margin:new b(1),mouseEnter:i.mouseEnter,mouseLeave:i.mouseLeave,click:i.click}).attach({_buttonFillNormal:i._buttonFillNormal,_buttonStrokeNormal:i._buttonStrokeNormal,_buttonFillOver:i._buttonFillOver,_buttonStrokeOver:i._buttonStrokeOver,_buttonFillDisabled:i._buttonFillDisabled,_buttonClick:i.click});return n.add(i),i.mouseEnter=null,i.mouseLeave=null,i.click=null,n}))}}class Lt{fi;Pt;jn;Ci;qn;Ys;Pl;Cr;Lr;Ar;vr;Or;Tr;Dr;Fr;I0;E0;Rr;U0;B0;V0;z0;Ir;Er;k0;D0;ws;pr;yr;$n;T0;A0;gr;x0;Y0;K0;constructor(){this.fi=!1,this.Pt="",this.jn=-1,this.Ci=null,this.qn=null,this.Ys=null,this.Pl="",this.Cr=null,this.Lr=null,this.Ar=null,this.vr=null,this.Or=null,this.Tr=null,this.Dr=null,this.Fr=null,this.I0=null,this.E0=null,this.Rr=null,this.U0=null,this.B0=null,this.V0=null,this.z0=null,this.Ir=null,this.Er=null,this.k0=null,this.D0=null,this.ws=null,this.pr=v.sc,this.yr=v.Bk,this.$n=1,this.T0=1,this.A0=1,this.gr=0,this.x0=null,this.Y0=null,this.K0="category"}copy(){const t=new Lt;return t.Pt=this.Pt,t.jn=this.jn,t.Ci=this.Ci,t.Ys=this.Ys,t.Pl=this.Pl,t.Cr=this.Cr,t.Lr=this.Lr,t.Ar=this.Ar,t.vr=this.vr,t.Or=this.Or,t.Tr=this.Tr,t.Dr=this.Dr,t.Fr=this.Fr,t.I0=this.I0,t.E0=this.E0,t.Rr=this.Rr,t.U0=this.U0,t.B0=this.B0,t.V0=this.V0,t.z0=this.z0,t.Ir=this.Ir,t.Er=this.Er,t.k0=this.k0,t.D0=this.D0,t.ws=this.ws,t.pr=this.pr.P(),t.yr=this.yr.P(),t.$n=this.$n,t.T0=this.T0,t.A0=this.A0,t.gr=this.gr,t.x0=this.x0,t.Y0=this.Y0,t.K0=this.K0,t}}class Et{m;constructor(){this.m=[1,0,0,1,0,0]}copy(){const t=new Et;return t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5],t}translate(t,e){this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e}scale(t,e){this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e}rotate(t,e,i){if(t>=360?t-=360:t<0&&(t+=360),0===t)return;this.translate(e,i);let n=0,s=0;if(90===t)n=0,s=1;else if(180===t)n=-1,s=0;else if(270===t)n=0,s=-1;else{const e=t*Math.PI/180;n=Math.cos(e),s=Math.sin(e)}const r=this.m[0]*n+this.m[2]*s,o=this.m[1]*n+this.m[3]*s,a=this.m[0]*-s+this.m[2]*n,l=this.m[1]*-s+this.m[3]*n;this.m[0]=r,this.m[1]=o,this.m[2]=a,this.m[3]=l,this.translate(-e,-i)}}class _t{type;x1;y1;r1;x2;y2;r2;colors;pattern;constructor(t){this.type=t,this.x1=0,this.y1=0,this.r1=0,this.x2=0,this.y2=0,this.r2=0,this.colors=[],this.pattern=null}addColorStop(t,e){this.colors.push({offset:t,color:e})}}class Ot{Tt;li;ua;Ku;T2;constructor(e,i,n){const s=void 0===i?t.document:i;this.ua=s,this.T2="http://www.w3.org/2000/svg";const r="http://www.w3.org/2000/xmlns/";void 0!==s&&(this.Tt=this.makeElement("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.style.display="block",this.style.letterSpacing="normal",this.style.wordSpacing="normal",n||(this.style.position="absolute"),this.Tt.setAttributeNS(r,"xmlns",this.T2),this.Tt.setAttributeNS(r,"xmlns:xlink","http://www.w3.org/1999/xlink")),this.Ku=null,this.li=new Ft(this,n)}resize(t,e,i,n){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",this.Tt.setAttributeNS(null,"width",i+"px"),this.Tt.setAttributeNS(null,"height",n+"px"),this.Tt.setAttributeNS(null,"viewBox","0 0 "+i+" "+n),this.li.D2.firstElementChild.setAttributeNS(null,"width",i+"px"),this.li.D2.firstElementChild.setAttributeNS(null,"height",n+"px"),!0)}makeElement(t,i,n){const s=this.ua.createElementNS(this.T2,t);if(e.K(i))for(const t in i)s.setAttributeNS("href"===t?"http://www.w3.org/1999/xlink":"",t,i[t]);return void 0!==n&&(s.textContent=n),s}getBoundingClientRect(){return this.Tt.getBoundingClientRect()}focus(){this.Tt.focus()}get width(){return this.Tt.width.baseVal.value}set width(t){this.Tt.setAttribute("width",t+"px")}get height(){return this.Tt.height.baseVal.value}set height(t){this.Tt.setAttribute("height",t+"px")}dispose(){this.ua=null}get style(){return this.Tt.style}}class Ft{nf;of;un;Li;ze;fillStyle;font;globalAlpha;lineCap;lineDashOffset;lineJoin;lineWidth;miterLimit;shadowBlur;shadowColor;shadowOffsetX;shadowOffsetY;strokeStyle;textAlign;imageSmoothingEnabled;clipInsteadOfFill;lastCreatedElement;rf;lf;surface;svg;D2;DA;qb;Io;mh;Ma;currentElement;clipPathGroup;diagramGroup;lastDrawnPart;currentPath;outerGroup;pathAttributes;$r;kr;filter;partClipRect;constructor(t,e){this.surface=t,this.svg=t.Tt,this.rf=[],this.lf=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetX=0,this.shadowOffsetY=0,this.$r=!1,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.nf=0,this.of=0,this.un=0,this.lastCreatedElement=null,this.currentElement=null,this.Li=[],this.pathAttributes={},this.qb=!1,this.Io=null,this.mh=0,this.ze=new Et,this.clipPathGroup=this.newGroup2(),this.diagramGroup=this.newGroup2("gojs-diagram"),this.lastDrawnPart=null,this.currentPath=null;const i=u.mw++,n=this.makeElement("clipPath",{id:"mainClip"+i}),s={x:0,y:0,width:t.width,height:t.height};n.appendChild(this.makeElement("rect",s)),this.D2=n,this.svg.appendChild(this.clipPathGroup),this.clipPathGroup.appendChild(this.diagramGroup),this.svg.appendChild(n),this.clipPathGroup.setAttributeNS(null,"clip-path","url(#mainClip"+i+")"),this.DA={},this.kr=!!e,this.filter="",this.partClipRect=null}setDiagramPosScale(t,e,i,n,s,r){void 0===this.diagramGroup?this.newGroup(t,e,i,n,s,r):this.diagramGroup.setAttribute("transform","matrix("+t+", "+e+", "+i+", "+n+", "+s+", "+r+")")}resetInnerSVG(){null!==this.diagramGroup&&(this.diagramGroup.innerHTML="")}arc(t,e,i,n,s,r,o,a){const l=2*Math.PI,h=1e-6,u=l-h,c=i*Math.cos(n),d=i*Math.sin(n),f=t+c,p=e+d,g=r?0:1;let m=r?n-s:s-n;(Math.abs(o-f)>h||Math.abs(a-p)>h)&&this.Li.push(["L",f,+p]),m<0&&(m=m%l+l),m>u?(this.Li.push(["A",i,i,0,1,g,t-c,e-d]),this.Li.push(["A",i,i,0,1,g,f,p])):m>h&&this.Li.push(["A",i,i,0,+(m>=Math.PI),g,t+i*Math.cos(s),e+i*Math.sin(s)])}beginPath(){this.Li=[],this.pathAttributes={stroke:"none",fill:"none"}}endPath(t){this.ov(this.Li,this.ze,t||0)}bezierCurveTo(t,e,i,n,s,r){this.Li.push(["C",t,e,i,n,s,r])}clearRect(t,e,i,n){}clip(){this.pathAttributes.clipPath=!0}closePath(){this.Li.push(["z"])}createLinearGradient(t,e,i,n){const s=new _t("linear");return s.x1=t,s.y1=e,s.x2=i,s.y2=n,s}createPattern(t,e){let i="";t instanceof HTMLCanvasElement&&(i=t.toDataURL()),t instanceof HTMLImageElement&&(i=t.getAttribute("src"));const n=this.DA;if(n[i])return"url(#"+n[i]+")";const s="PATTERN"+u.mw++,r={width:t.width,height:t.height,id:s,patternUnits:"userSpaceOnUse"},o={x:0,y:0,width:t.width,height:t.height,href:i},a=this.makeElement("pattern",r);return a.appendChild(this.makeElement(xt.img,o)),this.svg.appendChild(a),n[i]=s,"url(#"+s+")"}createRadialGradient(t,e,i,n,s,r){const o=new _t("radial");return o.x1=t,o.y1=e,o.r1=i,o.x2=n,o.y2=s,o.r2=r,o}amendImageTransform(t,e,i,n,s,r,o,a){const l=o/i,h=a/n;(0!==s||0!==r)&&this.ze.translate(s,r),(1!==l||1!==h)&&this.ze.scale(l,h),(0!==t||0!==e)&&this.ze.translate(-t,-e)}drawImage(t,e,i,n,s,r,o,a,l){let h="";t instanceof HTMLCanvasElement&&(h=t.toDataURL()),t instanceof HTMLImageElement&&(h=t.getAttribute("src"));const u=t instanceof HTMLImageElement?t.naturalWidth:t.width,c=t instanceof HTMLImageElement?t.naturalHeight:t.height;void 0===n&&(r=e,o=i,a=n=u,l=s=c),n=n||0,s=s||0,r=r||0,o=o||0,a=a||0,l=l||0,this.amendImageTransform(e,i,n,s,r,o,a,l);const d={x:0,y:0,width:u||n,height:c||s,href:h};S.z(n,a)&&S.z(s,l)?-1===h.toLowerCase().indexOf(".svg")&&-1===h.toLowerCase().indexOf("data:image/svg")&&(d.preserveAspectRatio="xMidYMid slice"):d.preserveAspectRatio="none",(0!==e||0!==i||n!==u||s!==c)&&(n+=e,s+=i,d["clip-path"]=`path('M ${e},${i} L ${n} ${i} L ${n} ${s} L ${e} ${s} z')`),this.processCommon(xt.img,d,this.ze),this._u(xt.img,d)}fill(t,e){t&&(this.pathAttributes["fill-rule"]="evenodd"),this.setFill(this.pathAttributes)}fillContext(t,e,i){this.clipInsteadOfFill?this.clip():this.fill(e,i)}createOrUpdateClipGroup(t,e){const i=this.newGroup(1,0,0,1,-e.x,-e.y);i.setAttributeNS(null,"class","spotClip"),t.hh=i}fillRect(t,e,i,n){this.addRect("fill",[t,e,i,n],this.ze)}fillBackground(t,e,i,n){const s={x:t,y:e,width:i,height:n};this.processCommon("fill",s,this.ze),this.setFill(s),this.svg.prepend(this.makeElement("rect",s))}fillText(t,e,i){this.addText("fill",[t,e,i],this.ze)}lineTo(t,e){this.Li.push(["L",t,e])}moveTo(t,e){this.Li.push(["M",t,e])}quadraticCurveTo(t,e,i,n){this.Li.push(["Q",t,e,i,n])}rect(t,e,i,n){this.Li.push(["M",t,e],["L",t+i,e],["L",t+i,e+n],["L",t,e+n],["z"])}restore(){this.ze=this.rf.pop(),this.Li=this.rf.pop();const t=this.rf.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign,this.partClipRect=t.partClipRect}save(){const t={fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign,partClipRect:this.partClipRect};this.rf.push(t);const e=[];for(let t=0;t<this.Li.length;t++)e.push(this.Li[t]);this.rf.push(e),this.rf.push(this.ze.copy())}setTransform(t,e,i,n,s,r){1===t&&0===e&&0===i&&1===n&&0===s&&0===r||this.newGroup(t,e,i,n,s,r)}setCurrentTransform(t,e,i,n,s,r){this.ze.m=[t,e,i,n,s,r]}getCurrentTransform(){const t=this.ze.m;return"matrix("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}scale(t,e){this.ze.scale(t,e)}translate(t,e){this.ze.translate(t,e)}transform(t,e,i,n,s,r){}commitTransform(){}stroke(){this.setStroke(this.pathAttributes)}strokeContext(){this.clipInsteadOfFill||this.stroke()}strokeRect(t,e,i,n){this.addRect("stroke",[t,e,i,n],this.ze)}makeElement(t,e,i){return this.surface.makeElement(t,e,i)}_u(t,e,i){const n=this.makeElement(t,e,i);return null!==this.currentElement?this.currentElement.appendChild(n):this.currentElement=n,this.lastCreatedElement=n,n}processCommon(t,e,i){if("fill"===t?this.setFill(e):"stroke"===t&&this.setStroke(e),null!==i){const t=i.m;e.transform="matrix("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}}setFill(t){if(this.fillStyle instanceof _t)t.fill=this.addGradient(this.fillStyle,!0);else if(/^rgba\(/.test(this.fillStyle)){const e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(this.fillStyle);t.fill="rgb("+e[1]+","+e[2]+","+e[3]+")",t["fill-opacity"]=e[4]}else t.fill=this.fillStyle}setFillOrStrokeInPlace(t,e){const i=e?"fill":"stroke";if(this.fillStyle instanceof _t)t.setAttributeNS(null,"fill",this.addGradient(this.fillStyle,!0));else if(/^rgba\(/.test(this.fillStyle)){const e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(this.fillStyle);t.setAttributeNS(null,i,"rgb("+e[1]+","+e[2]+","+e[3]+")"),t.setAttributeNS(null,i+"-opacity",e[4])}else t.setAttributeNS(null,i,this.fillStyle)}setStroke(t){if(this.strokeStyle instanceof _t)t.stroke=this.addGradient(this.strokeStyle,!1);else if(/^rgba\(/.test(this.strokeStyle)){const e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(this.strokeStyle);t.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",t["stroke-opacity"]=e[4]}else t.stroke=this.strokeStyle;t["stroke-width"]=this.lineWidth,t["stroke-linecap"]=this.lineCap,t["stroke-linejoin"]=this.lineJoin,t["stroke-miterlimit"]=this.miterLimit,this.qb&&(t["stroke-dasharray"]=this.Io.toString(),t["stroke-dashoffset"]=this.mh)}addGradient(t,i){let n="";const s=null!==this.currentPath?this.currentPath.getAttribute(i?"fill":"stroke"):null;if(null!==s&&-1!==s.indexOf("GRAD")){n=s.split("#")[1].slice(0,-1);const t=this.svg.getElementById(n);null!==t&&t.remove()}else n="GRAD"+u.mw++;let r;if("linear"===t.type){const e={x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,id:n,gradientUnits:"userSpaceOnUse"};r=this.makeElement("linearGradient",e)}else if("radial"===t.type){const e={x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,r1:t.r1,r2:t.r2,id:n};r=this.makeElement("radialGradient",e)}else e.o("invalid gradient");const o=t.colors,a=o.length,l=[];for(let t=0;t<a;t++){const e=o[t],i=e.color,n={offset:e.offset,"stop-color":i};if(/^rgba\(/.test(i)){const t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(i);n["stop-color"]="rgb("+t[1]+","+t[2]+","+t[3]+")",n["stop-opacity"]=t[4]}l.push(n)}l.sort(((t,e)=>t.offset>e.offset?1:-1));for(let t=0;t<a;t++)r.appendChild(this.makeElement("stop",l[t]));return this.svg.appendChild(r),"url(#"+n+")"}addRect(t,e,i){const n={x:e[0],y:e[1],width:e[2],height:e[3]};this.processCommon(t,n,i),this._u("rect",n)}addText(t,e,i){let n=this.textAlign;"left"===n?n="start":"right"===n?n="end":"center"===n&&(n="middle");const s={x:e[1],y:e[2],style:"font: "+this.font,"text-anchor":n};this.processCommon(t,s,i),this._u("text",s,e[0])}ov(t,e,i){const n=this.rv(t),s=this.pathAttributes;if(s.clipPath)this.lf.length>1&&this.lf[this.lf.length-2].setAttributeNS(null,"clip-path",'path("'+n+'") view-box');else if(s.d=n,this.processCommon("",s,e),null!==this.currentPath){const t=this.currentPath;if("g"!==t.nodeName)for(const e in s)"transform"!==e&&t.setAttributeNS(null,e,s[e]);else{const e=t.getElementsByTagName("path");for(const t in s)"transform"!==t&&e[i].setAttributeNS(null,t,s[t])}}else this._u("path",s)}rv(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i].slice(),s=[n.shift()];if("A"===s[0])s.push(n.shift()+","+n.shift(),n.shift(),n.shift()+","+n.shift(),n.shift()+","+n.shift());else for(;n.length;)s.push(n.shift()+","+n.shift());e.push(s.join(" "))}return e.join(" ")}newGroup(t,e,i,n,s,r){const o=new Et;o.m=[t,e,i,n,s,r];const a={};this.processCommon("g",a,o);const l=this._u("g",a);return this.lf.push(l),l}newGroup2(t){const e={};t&&(e.class=t);const i=this._u("g",e);return this.lf.push(i),i}endGroup(){return this.lf.pop()}dummyGroup(){return this.newGroup2(),this.endGroup()}shadowsSet(t,e,i){this.nf=t,this.of=e,this.un=i}shadowsOff(){this.$r=!1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0}shadowsOn(){this.$r=!0,this.shadowOffsetX=this.nf,this.shadowOffsetY=this.of,this.shadowBlur=this.un}enableDash(t,e){this.qb=!0,this.Io=t,this.mh=e}disableDash(){this.qb=!1}clearContextCache(t){}setImageSmoothingEnabled(t){}rotate(t){this.ze.rotate(57.2958*t,0,0)}getImageData(t,e,i,n){return null}measureText(t){return null}removeOldGradient(t,e,i){const n=e.getAttribute(i);if(null===n)return;const s=n.split("#");if(1===s.length)return;const r=this.svg.getElementById(s[1].slice(0,-1));if(null!==r){const t=new RegExp(r.id,"g");1===this.svg.innerHTML.match(t).length&&r.remove()}}removePartFromView(t){null!==t.svg&&t.svg.parentNode===this.diagramGroup&&t.svg.remove()}}class Rt{Tt;li;ua;Ku;constructor(e,i,n,s){const r=void 0===i?t.document:i;this.ua=r,this.Ku=null;const o=r.createElement("canvas");o.tabIndex=0,this.Tt=o,this.li=new It(o,n,s),xt.Qe.set(o,e)}resize(t,e,i,n){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",!0)}toDataURL(t,e){return this.Tt.toDataURL(t,e)}getBoundingClientRect(){return this.Tt.getBoundingClientRect()}focus(){this.Tt.focus()}get width(){return this.Tt.width}set width(t){this.Tt.width=t}get height(){return this.Tt.height}set height(t){this.Tt.height=t}dispose(){xt.Qe.delete(this.Tt),this.ua=null}get style(){return this.Tt.style}}class It{E;Wb;Jb;$b;clipInsteadOfFill;nf;of;un;Ma;$r;kr;constructor(t,i,n){this.E=t.getContext?t.getContext("2d",i):null,null===this.E&&e.o("Browser does not support HTML Canvas Element"),this.Wb="",this.Jb="",this.$b="",this.clipInsteadOfFill=!1,this.nf=0,this.of=0,this.un=0,this.$r=!1,this.Ma=new k,this.kr=!!n}createOrUpdateClipGroup(t,e){}setImageSmoothingEnabled(t){this.E.imageSmoothingEnabled=t}get fillStyle(){return this.E.fillStyle}set fillStyle(t){this.$b!==t&&(this.E.fillStyle=t,this.$b=t)}get font(){return this.E.font}set font(t){this.Wb!==t&&(this.E.font=t,this.Wb=t)}get globalAlpha(){return this.E.globalAlpha}set globalAlpha(t){this.E.globalAlpha=t}get lineCap(){return this.E.lineCap}set lineCap(t){this.E.lineCap=t}get lineDashOffset(){return this.E.lineDashOffset}set lineDashOffset(t){this.E.lineDashOffset=t}get lineJoin(){return this.E.lineJoin}set lineJoin(t){this.E.lineJoin=t}get lineWidth(){return this.E.lineWidth}set lineWidth(t){this.E.lineWidth=t}get miterLimit(){return this.E.miterLimit}set miterLimit(t){this.E.miterLimit=t}get shadowBlur(){return this.E.shadowBlur}set shadowBlur(t){this.E.shadowBlur=t}get shadowColor(){return this.E.shadowColor}set shadowColor(t){this.E.shadowColor=t}get shadowOffsetX(){return this.E.shadowOffsetX}set shadowOffsetX(t){this.E.shadowOffsetX=t}get shadowOffsetY(){return this.E.shadowOffsetY}set shadowOffsetY(t){this.E.shadowOffsetY=t}get strokeStyle(){return this.E.strokeStyle}set strokeStyle(t){this.Jb!==t&&(this.E.strokeStyle=t,this.Jb=t)}get textAlign(){return this.E.textAlign}set textAlign(t){this.E.textAlign=t}get imageSmoothingEnabled(){return this.E.imageSmoothingEnabled}set imageSmoothingEnabled(t){this.E.imageSmoothingEnabled=t}get filter(){return this.E.filter}set filter(t){this.E.filter=""===t?"none":t}arc(t,e,i,n,s,r,o,a){this.E.arc(t,e,i,n,s,r)}beginPath(){this.E.beginPath()}endPath(){}bezierCurveTo(t,e,i,n,s,r){this.E.bezierCurveTo(t,e,i,n,s,r)}clearRect(t,e,i,n){this.commitTransform(),this.E.clearRect(t,e,i,n)}clip(t){t?this.E.clip(t):this.E.clip()}closePath(){this.E.closePath()}createLinearGradient(t,e,i,n){return this.E.createLinearGradient(t,e,i,n)}createPattern(t,e){return this.E.createPattern(t,e)}createRadialGradient(t,e,i,n,s,r){return this.E.createRadialGradient(t,e,i,n,s,r)}drawImage(t,e,i,n,s,r,o,a,l){void 0===n?this.E.drawImage(t,e,i):this.E.drawImage(t,e,i,n,s,r,o,a,l)}fill(t,e){e?this.E.fill(e,t?"evenodd":"nonzero"):this.E.fill(t?"evenodd":"nonzero")}fillRect(t,e,i,n){this.E.fillRect(t,e,i,n)}fillBackground(t,e,i,n){this.E.fillRect(t,e,i,n)}fillText(t,e,i){this.E.fillText(t,e,i)}getImageData(t,e,i,n){return this.E.getImageData(t,e,i,n)}lineTo(t,e){this.E.lineTo(t,e)}measureText(t){return this.E.measureText(t)}moveTo(t,e){this.E.moveTo(t,e)}quadraticCurveTo(t,e,i,n){this.E.quadraticCurveTo(t,e,i,n)}rect(t,e,i,n){this.E.rect(t,e,i,n)}restore(){this.E.restore()}save(){this.commitTransform(),this.E.save()}rotate(t){this.Ma.cs(57.2958*t,0,0)}setTransform(t,e,i,n,s,r){this.Ma.setTo(t,e,i,n,s,r)}scale(t,e){this.Ma.tt(t,e)}translate(t,e){this.Ma.Fs(t,e)}stroke(t){t?this.E.stroke(t):this.E.stroke()}transform(t,e,i,n,s,r){if(1===t&&0===e&&0===i&&1===n&&0===s&&0===r)return;const o=this.Ma,a=o.m11*t+o.m21*e,l=o.m12*t+o.m22*e,h=o.m11*i+o.m21*n,u=o.m12*i+o.m22*n;o.dx=o.m11*s+o.m21*r+o.dx,o.dy=o.m12*s+o.m22*r+o.dy,o.m11=a,o.m12=l,o.m21=h,o.m22=u}commitTransform(){const t=this.Ma;this.E.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)}fillContext(t,e,i){this.radialFill(t,e,i)||this.fillOrClip(e,i)}radialFill(t,e,i){if(!(t instanceof Ht)||3!==t.type)return!1;const n=t._c,s=t.Kb;return s>n?(this.scale(n/s,1),this.translate((s-n)/2,0)):n>s&&(this.scale(1,s/n),this.translate(0,(n-s)/2)),this.fillOrClip(e,i),s>n?(this.translate(-(s-n)/2,0),this.scale(1/(n/s),1)):n>s&&(this.translate(0,-(n-s)/2),this.scale(1,1/(s/n))),!0}strokeContext(){this.clipInsteadOfFill||this.stroke()}fillOrClip(t,e){this.clipInsteadOfFill?this.clip(e):this.fill(t,e)}shadowsSet(t,e,i){this.nf=t,this.of=e,this.un=i}shadowsOff(){this.$r=!1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0}shadowsOn(){this.$r=!0,this.shadowOffsetX=this.nf,this.shadowOffsetY=this.of,this.shadowBlur=this.un}enableDash(t,e){const i=this.E;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)}disableDash(){const t=this.E;void 0!==t.setLineDash&&(t.setLineDash(It.EmptyArray),t.lineDashOffset=0)}clearContextCache(t){t&&(this.Wb=""),this.Jb="",this.$b=""}removePartFromView(t){}static EmptyArray=Object.freeze([])}var Bt=(t=>(t[t.Solid=1]="Solid",t[t.Linear=2]="Linear",t[t.Radial=3]="Radial",t[t.Pattern=4]="Pattern",t))(Bt||{}),jt=(t=>(t[t.Lab=1]="Lab",t[t.HSL=2]="HSL",t[t.Oklch=3]="Oklch",t))(jt||{});class zt{n0;n1;n2;n3;constructor(){this.n0=0,this.n1=0,this.n2=0,this.n3=0}}class Ht{h;j;Na;ei;gs;G0;H0;Eo;j0;cn;_c;Kb;constructor(t,i){if(u.Gi(this),this.h=!1,void 0===t)this.j=1,this.Na="black";else if("string"==typeof t){const i=e.Eh(Bt,t);null!==i?(this.j=i,this.Na="black"):(this.j=1,this.Na=t)}else Object.keys(Bt).hasOwnProperty(t)?(this.j=t,this.Na="black"):"object"==typeof t&&(this.j=1,i=t);const n=this.j;if(2===n?(this.ei=w.TopCenter,this.gs=w.BottomCenter):3===n?(this.ei=w.Center,this.gs=w.Center):(this.ei=w.None,this.gs=w.None),this.G0=0,this.H0=NaN,this.Eo=null,this.j0=null,this.cn=null,this._c=0,this.Kb=0,i){const t={};for(const e in i)isFinite(parseFloat(e))?this.addColorStop(parseFloat(e),i[e]):t[e]=i[e];Object.assign(this,t)}}copy(){const t=new Ht;return t.j=this.j,t.Na=this.Na,t.ei=this.ei.P(),t.gs=this.gs.P(),t.G0=this.G0,t.H0=this.H0,null!==this.Eo&&(t.Eo=this.Eo.copy()),t.j0=this.j0,t}u(){return this.h=!0,null!==this.Eo&&this.Eo.u(),this}oi(t){t in Bt?this.type=t:e.er(this,t)}toString(){let t="Brush(";if(1===this.type)t+=this.color;else if(2===this.type?t+="Linear ":3===this.type?t+="Radial ":4===this.type?t+="Pattern ":t+="(unknown) ",t+=this.start+" "+this.end,null!==this.colorStops){const e=this.colorStops.iterator;for(;e.next();){t+=" "+e.key+":"+e.value}}return t+=")",t}addColorStop(t,i){return this.h&&e.L(this),("number"!=typeof t||!isFinite(t)||t>1||t<0)&&e.W(t,"0 <= loc <= 1",Ht,"addColorStop:loc"),e.s(i,"string",Ht,"addColorStop:color"),null===this.Eo&&(this.Eo=new m),this.Eo.set(t,i),1===this.j&&(this.type=2),this.cn=null,this}get type(){return this.j}set type(t){this.h&&e.L(this,t),this.j=t,this.start.isNoSpot()&&(2===t?this.start=w.TopCenter:3===t&&(this.start=w.Center)),this.end.isNoSpot()&&(2===t?this.end=w.BottomCenter:3===t&&(this.end=w.Center)),this.cn=null}get color(){return this.Na}set color(t){this.h&&e.L(this,t),this.Na=t,this.cn=null}get start(){return this.ei}set start(t){this.h&&e.L(this,t),this.ei=t.P(),this.cn=null}get end(){return this.gs}set end(t){this.h&&e.L(this,t),this.gs=t.P(),this.cn=null}get startRadius(){return this.G0}set startRadius(t){this.h&&e.L(this,t),t<0&&e.W(t,">= zero",Ht,"startRadius"),this.G0=t,this.cn=null}get endRadius(){return this.H0}set endRadius(t){this.h&&e.L(this,t),t<0&&e.W(t,">= zero",Ht,"endRadius"),this.H0=t,this.cn=null}get colorStops(){return this.Eo}set colorStops(t){this.h&&e.L(this,t),this.Eo=t,this.cn=null}get pattern(){return this.j0}set pattern(t){this.h&&e.L(this,t),this.j0=t,this.cn=null}static randomColor(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));const i=Math.abs(e-t);let n=Math.floor(t+Math.random()*i).toString(16),s=Math.floor(t+Math.random()*i).toString(16),r=Math.floor(t+Math.random()*i).toString(16);return n.length<2&&(n="0"+n),s.length<2&&(s="0"+s),r.length<2&&(r="0"+r),"#"+n+s+r}static isValidColor(e){return!t.CSS||t.CSS.supports("color",e)}static lighten(t){return Ht.lightenBy(t)}lightenBy(t,i){this.h&&e.L(this);const n=void 0===t||"number"!=typeof t?.2:t,s=void 0===i?3:i;if(1===this.type)Ht.No(this.color),this.color=Ht.td(n,s);else if((2===this.type||3===this.type)&&null!==this.colorStops){const t=this.colorStops.iterator;for(;t.next();)Ht.No(t.value),this.addColorStop(t.key,Ht.td(n,s))}return this}static lightenBy(t,e,i){const n=void 0===e||"number"!=typeof e?.2:e,s=void 0===i?3:i;return Ht.No(t),Ht.td(n,s)}static darken(t){return Ht.darkenBy(t)}darkenBy(t,i){this.h&&e.L(this);const n=void 0===t||"number"!=typeof t?.2:t,s=void 0===i?3:i;if(1===this.type)Ht.No(this.color),this.color=Ht.td(-n,s);else if((2===this.type||3===this.type)&&null!==this.colorStops){const t=this.colorStops.iterator;for(;t.next();)Ht.No(t.value),this.addColorStop(t.key,Ht.td(-n,s))}return this}static darkenBy(t,e,i){const n=void 0===e||"number"!=typeof e?.2:e,s=void 0===i?3:i;return Ht.No(t),Ht.td(-n,s)}static mix(t,e,i){Ht.No(t);const n=Ht.Y.n0,s=Ht.Y.n1,r=Ht.Y.n2,o=Ht.Y.n3;Ht.No(e),void 0===i&&(i=.5);return`rgba(${Math.round((Ht.Y.n0-n)*i+n)}, ${Math.round((Ht.Y.n1-s)*i+s)}, ${Math.round((Ht.Y.n2-r)*i+r)}, ${Math.round((Ht.Y.n3-o)*i+o)})`}isDark(){if(1===this.type)return Ht.isDark(this.color);if((2===this.type||3===this.type)&&null!==this.colorStops){const t=this.colorStops;if(3===this.type)return Ht.isDark(t.first().value);if(null!==t.get(.5))return Ht.isDark(t.get(.5));if(2===t.count){const e=t.toArray();return Ht.isDark(Ht.mix(e[0].value,e[1].value))}const e=t.iterator;let i=-1,n=-1,s=1,r=1;for(;e.next();){const t=e.key,o=Math.abs(.5-e.key);s>r&&o<s?(i=t,s=o):r>=s&&o<r&&(n=t,r=o)}if(i>n){let t=i;i=n,n=t,t=s,s=r,r=t}const o=n-i;return Ht.isDark(Ht.mix(t.get(i),t.get(n),1-r/o))}return!1}static isDark(t){return!!t&&(t instanceof Ht?t.isDark():(Ht.No(t),(299*Ht.Y.n0+587*Ht.Y.n1+114*Ht.Y.n2)/1e3<128))}static td(t,i){switch(i){case 1:return Ht.lv(),Ht.Zn.n0=Math.min(100,Math.max(0,Ht.Zn.n0+100*t)),Ht.hv(),"rgba("+Ht.Y.n0+", "+Ht.Y.n1+", "+Ht.Y.n2+", "+Ht.Y.n3+")";case 2:return Ht.HS(),Ht.Ii.n2=Math.min(100,Math.max(0,Ht.Ii.n2+100*t)),"hsla("+Ht.Ii.n0+", "+Ht.Ii.n1+"%, "+Ht.Ii.n2+"%, "+Ht.Ii.n3+")";case 3:return Ht.av(),Ht.Qn.n0=Math.min(100,Math.max(0,Ht.Qn.n0+100*t)),Ht.cv(),"rgba("+Ht.Y.n0+", "+Ht.Y.n1+", "+Ht.Y.n2+", "+Ht.Y.n3+")";default:e.o("Unknown color space: "+i)}}static No(t){!1===Ht.q0&&(Ht.q0=!0,Ht._n=xt.isUsingDOM()?new Rt(null,void 0,{willReadFrequently:!0}).li:null);const e=Ht._n;if(null===e)return;e.clearRect(0,0,1,1),e.fillStyle="#000000";const i=e.fillStyle;if(e.fillStyle=t,e.fillStyle!==i){e.fillRect(0,0,1,1);const t=e.getImageData(0,0,1,1).data;Ht.Y.n0=t[0],Ht.Y.n1=t[1],Ht.Y.n2=t[2],Ht.Y.n3=t[3]/255}else{e.fillStyle="#FFFFFF";e.fillStyle;e.fillStyle=t,e.fillStyle,Ht.Y.n0=0,Ht.Y.n1=0,Ht.Y.n2=0,Ht.Y.n3=1}}static HS(){const t=Ht.Y.n0/255,e=Ht.Y.n1/255,i=Ht.Y.n2/255,n=Math.max(t,e,i),s=Math.min(t,e,i),r=n-s;let o,a;const l=(n+s)/2;if(0===r)o=a=0;else{switch(n){case t:o=(e-i)/r%6;break;case e:o=(i-t)/r+2;break;case i:o=(t-e)/r+4}o*=60,o<0&&(o+=360),a=r/(1-Math.abs(2*l-1))}Ht.Ii.n0=Math.round(o),Ht.Ii.n1=Math.round(100*a),Ht.Ii.n2=Math.round(100*l),Ht.Ii.n3=Ht.Y.n3}static DE(){const t=Ht.Ii.n0,e=Ht.Ii.n1/100,i=Ht.Ii.n2/100;let n,s,r;const o=(1-Math.abs(2*i-1))*e,a=t/60,l=o*(1-Math.abs(a%2-1));a>=0&&a<1?(n=o,s=l,r=0):a>=1&&a<2?(n=l,s=o,r=0):a>=2&&a<3?(n=0,s=o,r=l):a>=3&&a<4?(n=0,s=l,r=o):a>=4&&a<5?(n=l,s=0,r=o):a>=5&&a<6&&(n=o,s=0,r=l);const h=i-.5*o;n+=h,s+=h,r+=h,Ht.Y.n0=Math.round(255*n),Ht.Y.n1=Math.round(255*s),Ht.Y.n2=Math.round(255*r),Ht.Y.n3=Ht.Ii.n3}static lv(){Ht.FA(),Ht.fv()}static hv(){Ht.uv(),Ht.RA()}static F2(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}static R2(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}static FA(){const t=Ht.F2(Ht.Y.n0),e=Ht.F2(Ht.Y.n1),i=Ht.F2(Ht.Y.n2);Ht.Dt.n0=.4124564*t+.3575761*e+.1804375*i,Ht.Dt.n1=.2126729*t+.7151522*e+.072175*i,Ht.Dt.n2=.0193339*t+.119192*e+.9503041*i,Ht.Dt.n3=Ht.Y.n3}static RA(){const t=3.2404542*Ht.Dt.n0+-1.5371385*Ht.Dt.n1+-.4985314*Ht.Dt.n2,e=-.969266*Ht.Dt.n0+1.8760108*Ht.Dt.n1+.041556*Ht.Dt.n2,i=.0556434*Ht.Dt.n0+-.2040259*Ht.Dt.n1+1.0572252*Ht.Dt.n2;Ht.Y.n0=255*Ht.R2(t),Ht.Y.n1=255*Ht.R2(e),Ht.Y.n2=255*Ht.R2(i),Ht.Y.n3=Ht.Dt.n3,Ht.Y.n0=Math.round(Ht.Y.n0),Ht.Y.n0>255?Ht.Y.n0=255:Ht.Y.n0<0&&(Ht.Y.n0=0),Ht.Y.n1=Math.round(Ht.Y.n1),Ht.Y.n1>255?Ht.Y.n1=255:Ht.Y.n1<0&&(Ht.Y.n1=0),Ht.Y.n2=Math.round(Ht.Y.n2),Ht.Y.n2>255?Ht.Y.n2=255:Ht.Y.n2<0&&(Ht.Y.n2=0)}static v2=216/24389;static Zb=24389/27;static ed=[95.047,100,108.883];static O2(t){return t>Ht.v2?Math.pow(t,1/3):(Ht.Zb*t+16)/116}static fv(){const t=Ht.O2(100*Ht.Dt.n0/Ht.ed[0]),e=Ht.O2(100*Ht.Dt.n1/Ht.ed[1]),i=Ht.O2(100*Ht.Dt.n2/Ht.ed[2]);Ht.Zn.n0=116*e-16,Ht.Zn.n1=500*(t-e),Ht.Zn.n2=200*(e-i),Ht.Zn.n3=Ht.Dt.n3}static vA(t){const e=t*t*t;return e>Ht.v2?e:(116*t-16)/Ht.Zb}static uv(){const t=(Ht.Zn.n0+16)/116,e=Ht.Zn.n1/500+t,i=t-Ht.Zn.n2/200;Ht.Dt.n0=Ht.ed[0]/100*Ht.vA(e),Ht.Dt.n1=Ht.ed[1]/100*(Ht.Zn.n0>Ht.Zb*Ht.v2?Math.pow(t,3):Ht.Zn.n0/Ht.Zb),Ht.Dt.n2=Ht.ed[2]/100*Ht.vA(i),Ht.Dt.n3=Ht.Zn.n3}static dv(){let t=.8190224*Ht.Dt.n0+.3619062*Ht.Dt.n1+-.1288737*Ht.Dt.n2,e=.03298366*Ht.Dt.n0+.9292868*Ht.Dt.n1+.03614466*Ht.Dt.n2,i=.04817719*Ht.Dt.n0+.2642395*Ht.Dt.n1+.6335478*Ht.Dt.n2;t=Math.cbrt(t),e=Math.cbrt(e),i=Math.cbrt(i),Ht.ai.n0=.2104542*t+.7936177*e+-.004072046*i,Ht.ai.n1=1.977998*t+-2.428592*e+.4505937*i,Ht.ai.n2=.02590403*t+.7827717*e+-.8086757*i,Ht.ai.n3=Ht.Dt.n3,Ht.ai.n0*=100}static gv(){Ht.ai.n0/=100;let t=.9999999*Ht.ai.n0+.3963377*Ht.ai.n1+.2158037*Ht.ai.n2,e=1.000000009*Ht.ai.n0+-.1055613*Ht.ai.n1+-.06385417*Ht.ai.n2,i=1.00000005*Ht.ai.n0+-.08948418*Ht.ai.n1+-1.291485*Ht.ai.n2;t=t**3,e=e**3,i=i**3,Ht.Dt.n0=1.2268798*t+-.5578149*e+.281391*i,Ht.Dt.n1=-.04057576*t+1.112286*e+-.07171106*i,Ht.Dt.n2=-.07637294*t+-.4214933*e+1.586924*i,Ht.Dt.n3=Ht.ai.n3}static mv(){const t=180*Math.atan2(Ht.ai.n2,Ht.ai.n1)/Math.PI;Ht.Qn.n0=Ht.ai.n0,Ht.Qn.n1=Math.sqrt(Ht.ai.n1**2+Ht.ai.n2**2),Ht.Qn.n2=t>=0?t:t+360,Ht.Qn.n3=Ht.ai.n3}static pv(){Ht.ai.n0=Ht.Qn.n0,Ht.ai.n1=Ht.Qn.n1*Math.cos(Ht.Qn.n2*Math.PI/180),Ht.ai.n2=Ht.Qn.n1*Math.sin(Ht.Qn.n2*Math.PI/180),Ht.ai.n3=Ht.Qn.n3}static av(){Ht.FA(),Ht.dv(),Ht.mv()}static cv(){Ht.pv(),Ht.gv(),Ht.RA()}static Qu(t,i){"string"==typeof t||t instanceof Ht||e.o("Value for "+i+" must be a color string or a Brush, not "+t)}static Solid=1;static Linear=2;static Radial=3;static Pattern=4;static Lab=1;static HSL=2;static _n=null;static q0=!1;static Y=new zt;static Ii=new zt;static Dt=new zt;static Zn=new zt;static ai=new zt;static Qn=new zt}class Ut{Pt="Base";static es=new m;static dn(t,e){e.name=t,Ut.es.set(t,e)}get name(){return this.Pt}set name(t){this.Pt=t}constructor(){}get classType(){return qt}measure(t,e,i,n,s,r,o){}measureElement(t,e,i,n,s){t.ht(e,i,n,s)}arrange(t,e,i){}arrangeElement(t,e,i,n,s,r){t.Bt(e,i,n,s,r)}remeasureObject(t){t.tf()}Ui(t,e,i){}}Ut.dn("Position",new class extends Ut{constructor(){super()}measure(t,e,i,n,s,r,o){const a=n.length,l=t.Uo();for(let t=0;t<a;t++){const a=n[t];if(!a.visible&&a!==l)continue;const h=a.margin,u=h.right+h.left,c=h.top+h.bottom;a.ht(e,i,r,o);const d=a.measuredBounds,f=Math.max(d.width+u,0),p=Math.max(d.height+c,0);let g=a.position.x,m=a.position.y;if(isFinite(g)||(g=0),isFinite(m)||(m=0),a instanceof Jt&&a.isGeometryPositioned){const t=a.strokeWidth/2;g-=t,m-=t}s.unionNoCheck(g,m,f,p)}}arrange(t,e,i){const n=e.length,s=t.padding,r=i.x-s.left,o=i.y-s.top;for(let t=0;t<n;t++){const i=e[t],n=i.measuredBounds,s=i.margin,a=i.position.x,l=i.position.y;let h=isNaN(a)?-r:a-r,u=isNaN(l)?-o:l-o;if(i instanceof Jt&&i.isGeometryPositioned){const t=i.strokeWidth/2;h-=t,u-=t}i.visible&&i.Bt(h+s.left,u+s.top,n.width,n.height)}}});Ut.dn("Horizontal",new class extends Ut{constructor(){super()}measure(t,i,n,s,r,o,a){const l=s.length,h=e.et(),u=t.Uo();for(let t=0;t<l;t++){const e=s[t];if(!e.visible&&e!==u)continue;const i=e.zs(!1);if(0!==i&&5!==i){h.push(e);continue}e.ht(1/0,n,0,a);const o=e.margin,l=e.measuredBounds,c=Math.max(l.width+o.right+o.left,0),d=Math.max(l.height+o.top+o.bottom,0);r.Fn(r.width+c,Math.max(r.height,d))}const c=h.length;t.desiredSize.height?n=Math.min(t.desiredSize.height,t.maxSize.height):0!==r.height&&(n=Math.min(r.height,t.maxSize.height));for(let t=0;t<c;t++){const e=h[t];if(!e.visible&&e!==u)continue;const i=e.margin,s=i.right+i.left,o=i.top+i.bottom;e.ht(1/0,n,0,a);const l=e.measuredBounds,c=Math.max(l.width+s,0),d=Math.max(l.height+o,0);r.width+=c,r.height=Math.max(r.height,d)}e.J(h)}arrange(t,e,i){const n=e.length,s=t.padding,r=s.top,o=t.isOpposite;let a=o?i.width:s.left;for(let l=0;l<n;l++){const n=r,h=e[l];if(!h.visible)continue;const u=h.measuredBounds,c=h.margin,d=c.top+c.bottom,f=r+s.bottom;let p=u.height;const g=h.zs(!1);(isNaN(h.desiredSize.height)&&2===g||4===g)&&(p=Math.max(i.height-d-f,0));const m=p+d+f;let y=h.alignment;y.isDefault()&&(y=t.defaultAlignment),y.isSpot()||(y=w.Center),o&&(a-=u.width+c.left+c.right),h.Bt(a+y.offsetX+c.left,n+y.offsetY+c.top+(i.height*y.y-m*y.y),u.width,p),o||(a+=u.width+c.left+c.right)}}});Ut.dn("Vertical",new class extends Ut{constructor(){super()}measure(t,i,n,s,r,o,a){const l=s.length,h=e.et(),u=t.Uo();for(let t=0;t<l;t++){const e=s[t];if(!e.visible&&e!==u)continue;const n=e.zs(!1);if(0!==n&&4!==n){h.push(e);continue}e.ht(i,1/0,o,0);const a=e.margin,l=e.measuredBounds,c=Math.max(l.width+a.right+a.left,0),d=Math.max(l.height+a.top+a.bottom,0);r.Fn(Math.max(r.width,c),r.height+d)}const c=h.length;t.desiredSize.width?i=Math.min(t.desiredSize.width,t.maxSize.width):0!==r.width&&(i=Math.min(r.width,t.maxSize.width));for(let t=0;t<c;t++){const e=h[t];if(!e.visible&&e!==u)continue;const n=e.margin,s=n.right+n.left,a=n.top+n.bottom;e.ht(i,1/0,o,0);const l=e.measuredBounds,c=Math.max(l.width+s,0),d=Math.max(l.height+a,0);r.width=Math.max(r.width,c),r.height+=d}e.J(h)}arrange(t,e,i){const n=e.length,s=t.padding,r=s.left,o=t.isOpposite;let a=o?i.height:s.top;for(let l=0;l<n;l++){const n=r,h=e[l];if(!h.visible)continue;const u=h.measuredBounds,c=h.margin,d=c.left+c.right,f=r+s.right;let p=u.width;const g=h.zs(!1);(isNaN(h.desiredSize.width)&&2===g||5===g)&&(p=Math.max(i.width-d-f,0));const m=p+d+f;let y=h.alignment;y.isDefault()&&(y=t.defaultAlignment),y.isSpot()||(y=w.Center),o&&(a-=u.height+c.bottom+c.top),h.Bt(n+y.offsetX+c.left+(i.width*y.x-m*y.x),a+y.offsetY+c.top,p,u.height),o||(a+=u.height+c.bottom+c.top)}}});class Vt extends Ut{constructor(){super()}static OA=!1;measure(t,i,n,s,r,o,a){const l=s.length;if(0===l)return;const h=t.findMainElement();let u=h.margin,c=0,d=0;const f=u.right+u.left,p=u.top+u.bottom;h.ht(i,n,o,a);let g=h.measuredBounds,m=g.width,v=g.height,b=Math.max(m+f,0),k=Math.max(v+p,0);const S=t.isClipping;S&&0!==h.p0()&&!Vt.OA&&(Vt.OA=!0,e.ni("Main Shape for Spot Panel with isClipping = true must have a zero strokeWidth: "+t.toString()));const C=x.V(-u.left,-u.top,b,k);let M=x.V(0,0,m,v);this.I2(h,M,!0),m=M.width,v=M.height;let T=!0;const A=t.Uo();let P;for(let e=0;e<l;e++){const o=s[e];let a=i,l=n;if(o===h||!o.visible&&o!==A)continue;u=o.margin;let f=u.left,p=u.top;switch(c=u.right+u.left,d=u.top+u.bottom,P=o.zs(!1),P){case 2:a=m,l=v,c=0,d=0,f=0,p=0;break;case 5:a=m,c=0,f=0;break;case 4:l=v,d=0,p=0}o.ht(a,l,0,0),g=o.measuredBounds,b=Math.max(g.width+c,0),k=Math.max(g.height+d,0);let x=o.alignment;x.isDefault()&&(x=t.defaultAlignment),x.isSpot()||(x=w.Center);let S=o.alignmentFocus;S.isDefault()&&(S=w.Center);let C=null;o instanceof qt&&""!==o.to&&(C=o.findObject(o.to),C===o&&(C=null));let N=M.x-f,D=M.y-p;if(null!==C){o.Bt(0,0,g.width,g.height);const t=C.actualBounds,e=y.V(t.x+(S.x*t.width-S.offsetX),t.y+(S.y*t.height-S.offsetY));for(C=C.panel;C!==o;)C.T.gt(e),C=C.panel;N+=x.x*m+x.offsetX-e.x,D+=x.y*v+x.offsetY-e.y,y.e(e)}else N+=x.x*m+x.offsetX-(S.x*g.width+S.offsetX),D+=x.y*v+x.offsetY-(S.y*g.height+S.offsetY);T?(T=!1,r.i(N,D,b,k)):r.unionNoCheck(N,D,b,k)}switch(T?r.a(C):S?r.intersect(M.x,M.y,M.width,M.height):r.unionNoCheck(C.x,C.y,C.width,C.height),x.e(C),x.e(M),P=h.stretch,1===P&&(P=h.zs(!1)),P){case 0:return;case 2:if(!isFinite(i)&&!isFinite(n))return;break;case 5:if(!isFinite(i))return;break;case 4:if(!isFinite(n))return}g=h.measuredBounds,m=g.width,v=g.height,b=Math.max(m+f,0),k=Math.max(v+p,0),u=h.margin,M=x.V(-u.left,-u.top,b,k),this.I2(h,M,!0),m=M.width,v=M.height;for(let e=0;e<l;e++){const i=s[e];if(i===h||!i.visible&&i!==A)continue;u=i.margin,c=u.right+u.left,d=u.top+u.bottom,g=i.measuredBounds,b=Math.max(g.width+c,0),k=Math.max(g.height+d,0);let n=i.alignment;n.isDefault()&&(n=t.defaultAlignment),n.isSpot()||(n=w.Center);let o=i.alignmentFocus;o.isDefault()&&(o=w.Center),T?(T=!1,r.i(n.x*m+n.offsetX-(o.x*g.width+o.offsetX)-u.left,n.y*v+n.offsetY-(o.y*g.height+o.offsetY)-u.top,b,k)):r.unionNoCheck(n.x*m+n.offsetX-(o.x*g.width+o.offsetX)-u.left,n.y*v+n.offsetY-(o.y*g.height+o.offsetY)-u.top,b,k)}T?r.a(C):S?r.intersect(M.x,M.y,M.width,M.height):r.unionNoCheck(C.x,C.y,C.width,C.height),x.e(M)}arrange(t,e,i){const n=e.length;if(0===n)return;const s=t.findMainElement(),r=s.measuredBounds,o=r.width,a=r.height,l=t.padding,h=l.left,u=l.top;let c=h-i.x,d=u-i.y;s.Bt(c,d,o,a);const f=x.V(0,0,o,a);this.I2(s,f,!1);for(let r=0;r<n;r++){const n=e[r];if(n===s)continue;const o=n.measuredBounds,a=o.width,l=o.height;let p=n.alignment;p.isDefault()&&(p=t.defaultAlignment),p.isSpot()||(p=w.Center);let g=n.alignmentFocus;g.isDefault()&&(g=w.Center);let m=null;if(n instanceof qt&&""!==n.to&&(m=n.findObject(n.to),m===n&&(m=null)),null!==m){const t=m.actualBounds,e=y.V(t.x+(g.x*t.width-g.offsetX),t.y+(g.y*t.height-g.offsetY));for(m=m.panel;m!==n;)m.T.gt(e),m=m.panel;c=p.x*f.width+p.offsetX-e.x,d=p.y*f.height+p.offsetY-e.y,y.e(e)}else c=p.x*f.width+p.offsetX-(g.x*a+g.offsetX),d=p.y*f.height+p.offsetY-(g.y*l+g.offsetY);c+=f.x-i.x,d+=f.y-i.y,n.visible&&n.Bt(h+c,u+d,a,l)}x.e(f)}I2(t,e,i){let n=null;if(t instanceof qt&&""!==t.to&&(n=t.findObject(t.to),n===t&&(n=null)),null!==n)for(i&&t.Bt(0,0,e.width,e.height),e.a(n.actualBounds),n=n.panel;n!==t;)n.T.vg(e),n=n.panel}}Ut.dn("Spot",new Vt);Ut.dn("Auto",new class extends Ut{constructor(){super()}measure(t,e,i,n,s,r,o){const a=n.length;if(0===a)return;const l=t.findMainElement();let h=l.margin,u=e,c=i;const d=h.right+h.left,f=h.top+h.bottom;l.ht(e,i,r,o);let p=l.measuredBounds,g=0,m=null;l instanceof Jt&&(m=l,g=m.strokeWidth*m.scale);let y=Math.max(p.width+d,0),x=Math.max(p.height+f,0),b=t.E2(l);const w=b.x*y+b.offsetX,k=b.y*x+b.offsetY;let S=t.U2(l);const C=S.x*y+S.offsetX,M=S.y*x+S.offsetY;isFinite(e)&&(u=Math.max(Math.abs(w-C)-g,0)),isFinite(i)&&(c=Math.max(Math.abs(k-M)-g,0));let T=0,A=0;r>0&&(T=Math.max(Math.abs(b.x*r+b.offsetX-(S.x*r+S.offsetX))-g,0)),o>0&&(A=Math.max(Math.abs(b.y*o+b.offsetY-(S.y*o+S.offsetY))-g,0));const P=v.l();P.i(0,0);const N=t.Uo();for(let t=0;t<a;t++){const e=n[t];if(e===l||!e.visible&&e!==N)continue;h=e.margin;const i=h.right+h.left,s=h.top+h.bottom;e.ht(u,c,T,A),p=e.measuredBounds,y=Math.max(p.width+i,0),x=Math.max(p.height+s,0),P.i(Math.max(y,P.width),Math.max(x,P.height))}if(1===a)return p=l.measuredBounds,s.width=y,s.height=x,void v.e(P);b=t.E2(l),S=t.U2(l);let D=0,L=0;S.x!==b.x&&S.y!==b.y&&(D=P.width/Math.abs(S.x-b.x),L=P.height/Math.abs(S.y-b.y)),v.e(P),g=0,null!==m&&(g=m.strokeWidth*m.scale,6===m.aS()&&(D=L=Math.max(D,L))),D+=Math.abs(b.offsetX)+Math.abs(S.offsetX)+g,L+=Math.abs(b.offsetY)+Math.abs(S.offsetY)+g;let E=l.stretch;switch(1===E&&(E=l.zs(!1)),E){case 0:r=0,o=0;break;case 2:isFinite(e)&&(D=e),isFinite(i)&&(L=i);break;case 5:isFinite(e)&&(D=e),o=0;break;case 4:r=0,isFinite(i)&&(L=i)}l.tf(),l.ht(D,L,r,o),s.width=l.measuredBounds.width+d,s.height=l.measuredBounds.height+f}arrange(t,e,i){const n=e.length;if(0===n)return;const s=t.findMainElement(),r=s.measuredBounds,o=x.l();o.i(0,0,1,1);let a=s.margin;const l=a.left,h=a.top,u=t.padding,c=u.left,d=u.top;let f=l,p=h,g=r.width,m=r.height;s.Bt(c+f,d+p,g,m);const y=t.E2(s),v=t.U2(s),b=0+y.x*r.width+y.offsetX,k=0+y.y*r.height+y.offsetY,S=0+v.x*r.width+v.offsetX,C=0+v.y*r.height+v.offsetY;o.x=b,o.y=k,o.unionNoCheck(S,C,0,0),o.x+=l+c,o.y+=h+d;for(let i=0;i<n;i++){const n=e[i];if(n===s)continue;const r=n.measuredBounds;a=n.margin;const l=Math.max(r.width+a.right+a.left,0),h=Math.max(r.height+a.top+a.bottom,0);let u=n.alignment;u.isDefault()&&(u=t.defaultAlignment),u.isSpot()||(u=w.Center),f=o.width*u.x+u.offsetX-l*u.x+a.left+o.x,p=o.height*u.y+u.offsetY-h*u.y+a.top+o.y,g=o.width,m=o.height,n.visible&&(x.contains(o.x,o.y,o.width,o.height,f,p,r.width,r.height)?n.Bt(f,p,r.width,r.height):n.Bt(f,p,r.width,r.height,new x(o.x,o.y,o.width,o.height)))}x.e(o)}});Ut.dn("Table",new class extends Ut{constructor(){super(),this.name="Table"}measure(t,i,n,s,r,o,a){let l=s.length;const h=e.et(),u=e.et();for(let t=0;t<l;t++){const e=s[t],i=e instanceof qt?e:null;if(null!==i&&i.Jr()&&e.visible){u.push(i);const t=i.C.r,n=t.length;for(let s=0;s<n;s++){const n=t[s];i.type===qt.TableRow?n.row=e.row:i.type===qt.TableColumn&&(n.column=e.column),h.push(n)}}else h.push(e)}l=h.length,0===l&&(t.getRowDefinition(0),t.getColumnDefinition(0));const c=[];for(let t=0;t<l;t++){const e=h[t];e.visible&&(e.ue(!0),e.Jn(!0),c[e.row]||(c[e.row]=[]),c[e.row][e.column]||(c[e.row][e.column]=[]),c[e.row][e.column].push(e))}e.J(h);const d=e.et(),f=e.et(),p=e.et(),g={count:0},m={count:0};let y=i,x=n;const b=t.Xe,w=t.Ye;let k=null;l=b.length;for(let t=0;t<l;t++)k=b[t],void 0!==k&&(k.actual=0,k.Ai=0);l=w.length;for(let t=0;t<l;t++)k=w[t],void 0!==k&&(k.actual=0,k.Ai=0);let S=c.length,C=0;for(let t=0;t<S;t++)c[t]&&(C=Math.max(C,c[t].length));const M=Math.min(t.topIndex,S-1),T=Math.min(t.leftIndex,C-1);let A,P=0;S=c.length;const N=t.Uo();for(let e=0;e<S;e++){if(!c[e])continue;C=c[e].length;const i=t.getRowDefinition(e);i.actual=0,i.Ai=0;for(let n=0;n<C;n++){if(!c[e][n])continue;const s=t.getColumnDefinition(n);void 0===d[n]&&(s.actual=0,s.Ai=0,d[n]=!0);const r=c[e][n],o=r.length;for(let a=0;a<o;a++){const o=r[a];if(!o.visible&&o!==N)continue;const l=o.rowSpan>1,h=o.columnSpan>1;(l||h)&&!(e<M)&&!(n<T)&&f.push(o);const u=o.margin,c=u.right+u.left,d=u.top+u.bottom;A=o.P0(i,s,!1);const v=o.desiredSize,b=!isNaN(v.width),w=!isNaN(v.height);if(0!==A&&!(b&&w)&&!(e<M)&&!(n<T)&&(!h&&void 0===g[n]&&(2===A||5===A)&&(g[n]=-1,g.count++),!l&&void 0===m[e]&&(2===A||4===A)&&(m[e]=-1,m.count++),!l&&!h&&p.push(o)),o.ht(1/0,1/0,0,0),e<M||n<T)continue;const S=o.measuredBounds,C=Math.max(S.width+c,0),D=Math.max(S.height+d,0);if(1===o.rowSpan&&(0===A||5===A)){k=t.getRowDefinition(e);const i=k.computeEffectiveSpacing(),n=0===k._;P=Math.max(D-k.actual,0),P+(n?i:0)>x&&(P=Math.max(x-i,0)),k.Ai=k.Ai+P,k.actual=k._+P,x=Math.max(x-(P+(n?i:0)),0)}if(1===o.columnSpan&&(0===A||4===A)){k=t.getColumnDefinition(n);const e=k.computeEffectiveSpacing(),i=0===k._;P=Math.max(C-k.actual,0),P+(i?e:0)>y&&(P=Math.max(y-e,0)),k.Ai=k.Ai+P,k.actual=k._+P,y=Math.max(y-(P+(i?e:0)),0)}(l||h)&&o.tf()}}}e.J(d);let D=0,L=0;l=t.columnCount;for(let t=0;t<l;t++){const e=w[t];void 0!==e&&(D+=isNaN(e.de)?e.Ai:e.de,0!==e.Ai&&(D+=e.computeEffectiveSpacing()))}l=t.rowCount;for(let t=0;t<l;t++){const e=b[t];void 0!==e&&(L+=isNaN(e.de)?e.Ai:e.de,0!==e.Ai&&(L+=e.computeEffectiveSpacing()))}y=Math.max(i-D,0),x=Math.max(n-L,0);let E=x,_=y;l=p.length;for(let e=0;e<l;e++){const i=p[e],n=t.getRowDefinition(i.row),s=t.getColumnDefinition(i.column),r=i.measuredBounds,o=i.margin,a=o.right+o.left,l=o.top+o.bottom;0===s.Ai&&void 0!==g[i.column]?g[i.column]=Math.max(r.width+a,g[i.column]):g[i.column]=null,0===n.Ai&&void 0!==m[i.row]?m[i.row]=Math.max(r.height+l,m[i.row]):m[i.row]=null}let O,F=0,R=0;for(O in m)"count"!==O&&(F+=m[O]);for(O in g)"count"!==O&&(R+=g[O]);const I=v.l();for(let e=0;e<l;e++){const i=p[e];if(!i.visible&&i!==N)continue;const n=t.getRowDefinition(i.row),s=t.getColumnDefinition(i.column);let r=0;isFinite(s.width)?r=s.width:(r=isFinite(y)&&null!==g[i.column]?0===R?s.actual+y:g[i.column]/R*_:null!==g[i.column]?y:s.actual||y,r=Math.max(0,r-s.computeEffectiveSpacing()));let o=0;switch(isFinite(n.height)?o=n.height:(o=isFinite(x)&&null!==m[i.row]?0===F?n.actual+x:m[i.row]/F*E:null!==m[i.row]?x:n.actual||x,o=Math.max(0,o-n.computeEffectiveSpacing())),I.i(Math.max(s.minimum,Math.min(r,s.maximum)),Math.max(n.minimum,Math.min(o,n.maximum))),A=i.P0(n,s,!1),A){case 5:I.height=Math.max(I.height,n.actual+x);break;case 4:I.width=Math.max(I.width,s.actual+y)}const a=i.margin,l=a.right+a.left,h=a.top+a.bottom;i.tf();let u=s.minimum,c=n.minimum;const d=i.measuredBounds;0===d.width&&null!==g[i.column]&&(u=Math.max(u,g[i.column])),0===d.height&&null!==m[i.row]&&(c=Math.max(u,m[i.row])),i.ht(I.width,I.height,u,c);const f=i.measuredBounds;let v=Math.max(f.width+l,0),b=Math.max(f.height+h,0);isFinite(y)&&(v=Math.min(v,I.width)),isFinite(x)&&(b=Math.min(b,I.height));let w=0;w=n.actual,n.actual=Math.max(n.actual,b),n.Ai=Math.max(n.Ai,b),P=n.actual-w,x=Math.max(x-P,0),null===m[i.row]&&(E=Math.max(E-P,0)),w=s.actual,s.actual=Math.max(s.actual,v),s.Ai=Math.max(s.Ai,v),P=s.actual-w,y=Math.max(y-P,0),null===g[i.column]&&(_=Math.max(_-P,0))}e.J(p);const B=v.l(),j=e.et(),z=e.et();if(l=f.length,0!==l)for(let e=0;e<S;e++){if(!c[e])continue;C=c[e].length;const i=t.getRowDefinition(e);j[e]=i.actual;for(let i=0;i<C;i++){if(!c[e][i])continue;const n=t.getColumnDefinition(i);z[i]=n.actual}}for(let e=0;e<l;e++){const s=f[e];if(!s.visible&&s!==N)continue;const r=t.getRowDefinition(s.row),o=t.getColumnDefinition(s.column);switch(I.i(Math.max(o.minimum,Math.min(i,o.maximum)),Math.max(r.minimum,Math.min(n,r.maximum))),A=s.P0(r,o,!1),A){case 2:0!==z[o.index]&&(I.width=Math.min(I.width,z[o.index])),0!==j[r.index]&&(I.height=Math.min(I.height,j[r.index]));break;case 5:0!==z[o.index]&&(I.width=Math.min(I.width,z[o.index]));break;case 4:0!==j[r.index]&&(I.height=Math.min(I.height,j[r.index]))}isFinite(o.width)&&(I.width=o.width),isFinite(r.height)&&(I.height=r.height),B.i(0,0);let a=o.minimum,l=r.minimum;for(let e=1;e<s.rowSpan&&!(s.row+e>=t.rowCount);e++)k=t.getRowDefinition(s.row+e),P=0,P=2===A||4===A?Math.max(k.minimum,0===j[s.row+e]?k.maximum:Math.min(j[s.row+e],k.maximum)):Math.max(k.minimum,isNaN(k.de)?k.maximum:Math.min(k.de,k.maximum)),B.height+=P,l+=k.minimum;for(let e=1;e<s.columnSpan&&!(s.column+e>=t.columnCount);e++)k=t.getColumnDefinition(s.column+e),P=0,P=2===A||5===A?Math.max(k.minimum,0===z[s.column+e]?k.maximum:Math.min(z[s.column+e],k.maximum)):Math.max(k.minimum,isNaN(k.de)?k.maximum:Math.min(k.de,k.maximum)),B.width+=P,a+=k.minimum;I.width+=B.width,I.height+=B.height;const h=s.margin,u=h.right+h.left,c=h.top+h.bottom;s.ht(I.width,I.height,a,l);const d=s.measuredBounds,p=Math.max(d.width+u,0),g=Math.max(d.height+c,0);let m=0;for(let e=0;e<s.rowSpan&&!(s.row+e>=t.rowCount);e++)k=t.getRowDefinition(s.row+e),m+=k.total||0;if(m<g){let e=g-m;const i=g-m;if(null!==s.spanAllocation){const n=s.spanAllocation;for(let r=0;r<s.rowSpan&&!(e<=0||s.row+r>=t.rowCount);r++){k=t.getRowDefinition(s.row+r);const o=k._||0,a=n(s,k,i);k.actual=Math.min(k.maximum,o+a),k._!==o&&(e-=k._-o)}}for(;e>0;){const i=k._||0;if(isNaN(k.height)&&k.maximum>i&&(k.actual=Math.min(k.maximum,i+e),k._!==i&&(e-=k._-i)),0===k.index)break;k=t.getRowDefinition(k.index-1)}}let y=0;for(let e=0;e<s.columnSpan&&!(s.column+e>=t.columnCount);e++)k=t.getColumnDefinition(s.column+e),y+=k.total||0;if(y<p){let e=p-y;const i=p-y;if(null!==s.spanAllocation){const n=s.spanAllocation;for(let r=0;r<s.columnSpan&&!(e<=0||s.column+r>=t.columnCount);r++){k=t.getColumnDefinition(s.column+r);const o=k._||0,a=n(s,k,i);k.actual=Math.min(k.maximum,o+a),k._!==o&&(e-=k._-o)}}for(;e>0;){const i=k._||0;if(isNaN(k.width)&&k.maximum>i&&(k.actual=Math.min(k.maximum,i+e),k._!==i&&(e-=k._-i)),0===k.index)break;k=t.getColumnDefinition(k.index-1)}}}e.J(f),v.e(B),v.e(I),void 0!==j&&e.J(j),void 0!==z&&e.J(z);let H=0,U=0;const V=t.desiredSize,Y=t.maxSize;A=t.zs(!0),D=0,L=0;let q=0,$=0;l=t.columnCount;for(let e=0;e<l;e++)if(void 0!==w[e]){if(k=t.getColumnDefinition(e),isFinite(k.width)){q+=k.width,q+=k.computeEffectiveSpacing();continue}if(2===k.Qb()){q+=k._,q+=k.computeEffectiveSpacing();continue}0!==k._&&(D+=k._,D+=k.computeEffectiveSpacing())}H=isFinite(V.width)?Math.min(V.width,Y.width):0!==A&&isFinite(i)?i:D,H=Math.max(H,isFinite(i)?Math.min(o,i):o),H=Math.max(H-q,0);const W=0===D?1:Math.max(H/D,1);for(let e=0;e<l;e++)void 0!==w[e]&&(k=t.getColumnDefinition(e),!isFinite(k.width)&&2!==k.Qb()&&(k.actual=k._*W),k.position=r.width,0!==k._&&(r.width+=k._,r.width+=k.computeEffectiveSpacing()));l=t.rowCount;for(let e=0;e<l;e++)if(void 0!==b[e]){if(k=t.getRowDefinition(e),isFinite(k.height)){$+=k.height,$+=k.computeEffectiveSpacing();continue}if(2===k.Qb()){$+=k._,$+=k.computeEffectiveSpacing();continue}0!==k._&&(L+=k._,L+=k.computeEffectiveSpacing())}U=isFinite(V.height)?Math.min(V.height,Y.height):0!==A&&isFinite(n)?n:L,U=Math.max(U,isFinite(n)?Math.min(a,n):a),U=Math.max(U-$,0);const G=0===L?1:Math.max(U/L,1);for(let e=0;e<l;e++)void 0!==b[e]&&(k=t.getRowDefinition(e),!isFinite(k.height)&&2!==k.Qb()&&(k.actual=k._*G),k.position=r.height,0!==k._&&(r.height+=k._,r.height+=k.computeEffectiveSpacing()));l=u.length;for(let e=0;e<l;e++){const i=u[e];let n=0,s=0;i.type===qt.TableRow?(n=r.width,k=t.getRowDefinition(i.row),s=k.actual):(k=t.getColumnDefinition(i.column),n=k.actual,s=r.height),i.measuredBounds.i(0,0,n,s),i.ue(!1)}e.J(u),t.ph=c}arrange(t,e,i){const n=e.length,s=t.padding,r=s.left,o=s.top,a=t.ph;if(null===a)return;let l=0,h=0;const u=a.length;let c=0;for(let t=0;t<u;t++)a[t]&&(c=Math.max(c,a[t].length));const d=t.Xe,f=t.Ye;let p=0,g=0,m=Math.min(t.topIndex,u-1);if(d.length>0){for(;m!==u&&(void 0===d[m]||0===d[m]._);)m++;m=Math.max(Math.min(m,u-1),0),p=-d[m].position}let y=Math.min(t.leftIndex,c-1);if(f.length>0){for(;y!==c&&(void 0===f[y]||0===f[y]._);)y++;y=Math.max(Math.min(y,c-1),0),g=-f[y].position}let b=0,k=0;for(;b!==u&&void 0===d[b];)b++;for(;k!==u&&void 0===f[k];)k++;const S=t.part;let C=t.getRowDefinition(b),M=t.getColumnDefinition(k);for(let i=0;i<e.length;i++){const n=e[i];if(!(n instanceof qt&&n.visible&&n.Jr()))continue;n.type===qt.TableRow?(C=t.getRowDefinition(n.row),M=t.getColumnDefinition(k)):(C=t.getRowDefinition(b),M=t.getColumnDefinition(n.column)),h=C.position+p+o,0!==C._&&(h+=C.computeEffectiveSpacingTop(Math.max(b,m))),l=M.position+g+r,0!==M._&&(l+=M.computeEffectiveSpacingTop(Math.max(k,y)));const s=n.measuredBounds;n.$c(),n.actualBounds.Nt();const a=n.actualBounds,u=x.V(a.x,a.y,a.width,a.height);(a.x=n.type===qt.TableRow?r:l,a.y=n.type===qt.TableColumn?o:h,a.width=s.width,a.height=s.height,n.actualBounds.u(),n.Jn(!1),u.equalsApproxClose(a))?x.e(u):(null!==S&&(S.uh(),n.w0(S)),x.e(u))}const T=v.l();for(let e=0;e<u;e++){if(!a[e])continue;c=a[e].length;const n=t.getRowDefinition(e);h=n.position+p+o,0!==n._&&(h+=n.computeEffectiveSpacingTop(Math.max(b,m)));for(let s=0;s<c;s++){if(!a[e][s])continue;const o=t.getColumnDefinition(s);l=o.position+g+r,0!==o._&&(l+=o.computeEffectiveSpacingTop(Math.max(k,y)));const u=a[e][s],c=u.length;for(let r=0;r<c;r++){const a=u[r],c=a.measuredBounds;T.i(0,0);for(let i=1;i<a.rowSpan&&!(e+i>=t.rowCount);i++){const n=t.getRowDefinition(e+i);0!==n._&&(T.height+=n.total)}for(let e=1;e<a.columnSpan&&!(s+e>=t.columnCount);e++){const i=t.getColumnDefinition(s+e);0!==i._&&(T.width+=i.total)}const d=o._+T.width,f=n._+T.height;let p=l,g=h;const m=d,y=f,v=l,b=h;let k=d,S=f;l+d>i.width&&(k=Math.max(i.width-l,0)),h+f>i.height&&(S=Math.max(i.height-h,0));let C=a.alignment,M=0,A=0,P=0,N=0;if(C.isDefault()){C=t.defaultAlignment,C.isSpot()||(C=w.Center),M=C.x,A=C.y,P=C.offsetX,N=C.offsetY;const e=o.alignment,i=n.alignment;e.isSpot()&&(M=e.x,P=e.offsetX),i.isSpot()&&(A=i.y,N=i.offsetY)}else M=C.x,A=C.y,P=C.offsetX,N=C.offsetY;(isNaN(M)||isNaN(A))&&(M=.5,A=.5,P=0,N=0);let D=c.width,L=c.height;const E=a.margin,_=E.left+E.right,O=E.top+E.bottom,F=a.P0(n,o,!1);isNaN(a.desiredSize.width)&&(2===F||5===F)&&(D=Math.max(d-_,0)),isNaN(a.desiredSize.height)&&(2===F||4===F)&&(L=Math.max(f-O,0));const R=a.maxSize,I=a.minSize;D=Math.min(R.width,D),L=Math.min(R.height,L),D=Math.max(I.width,D),L=Math.max(I.height,L);const B=L+O;p+=m*M-(D+_)*M+P+E.left,g+=y*A-B*A+N+E.top,a.visible&&(x.contains(v,b,k,S,p,g,c.width,c.height)?a.Bt(p,g,D,L):a.Bt(p,g,D,L,new x(v,b,k,S)))}}}v.e(T);for(let t=0;t<n;t++){const i=e[t],n=i instanceof qt?i:null;if(null!==n&&n.Jr()){const t=i.actualBounds;i.naturalBounds.Nt(),i.naturalBounds.i(0,0,t.width,t.height),i.naturalBounds.u()}}}});Ut.dn("TableRow",new class extends Ut{constructor(){super()}measure(t,e,i,n,s,r,o){}arrange(t,e,i){}});Ut.dn("TableColumn",new class extends Ut{constructor(){super()}measure(t,e,i,n,s,r,o){}arrange(t,e,i){}});Ut.dn("Viewbox",new class extends Ut{constructor(){super()}measure(t,i,n,s,r,o,a){1!==s.length&&e.o("Viewbox Panel must contain exactly one GraphObject.");const l=s[0];l.tt=1,l.tf(),l.ht(1/0,1/0,o,a);let h=l.measuredBounds;const u=l.margin,c=u.right+u.left,d=u.top+u.bottom;if(isFinite(i)||isFinite(n)){const e=l.scale,s=h.width,r=h.height,u=Math.max(i-c,0),f=Math.max(n-d,0);let p=1;6===t.viewboxStretch?(0!==s&&0!==r&&(p=Math.min(u/s,f/r)),0===p&&(p=1e-4),l.tt*=p):(0!==s&&0!==r&&(p=Math.max(u/s,f/r)),0===p&&(p=1e-4),l.tt*=p),e!==l.scale&&(l.ue(!0),l.ht(1/0,1/0,o,a))}h=l.measuredBounds,r.width=isFinite(i)?i:Math.max(h.width+c,0),r.height=isFinite(n)?n:Math.max(h.height+d,0)}arrange(t,e,i){const n=e[0],s=n.measuredBounds,r=n.margin,o=r.right+r.left,a=r.top+r.bottom,l=Math.max(s.width+o,0),h=Math.max(s.height+a,0);let u=n.alignment;u.isDefault()&&(u=t.defaultAlignment),u.isSpot()||(u=w.Center),n.Bt(i.width*u.x-l*u.x+u.offsetX,i.height*u.y-h*u.y+u.offsetY,s.width,s.height)}});Ut.dn("Grid",new class extends Ut{constructor(){super()}measure(t,e,i,n,s,r,o){null===t.yi&&(t.yi=new Wt),this.yv(t),this.wv(t)}arrange(t,e,i){}Ui(t,e,i){const n=t.naturalBounds,s=n.width,r=n.height;e.save(),e.beginPath(),e.rect(0,0,s,r),e.clip(),e.endPath(),this.xv(t,e,i),e.restore(),e.clearContextCache(!1)}xv(t,e,i){let n=t.getDocumentScale()*i.scale;n<=0&&(n=1);const s=t.gridCellSize,r=s.width,o=s.height,a=t.naturalBounds,l=t.actualBounds,h=a.width,u=a.height,c=Math.ceil(h/r),d=Math.ceil(u/o),f=t.gridOrigin,p=f.x,g=f.y,m=t.yi.W0,y=t.C.r,v=y.length;for(let i=0;i<v;i++){const s=y[i];if(!s.visible)continue;const f=s.interval||1,v=Math.abs(f);if(r*v*n<2)continue;let x=s.segmentIndex;(!isFinite(x)||isNaN(x))&&(x=0),x<0&&(x=v-Math.min(-x,v)),x=Math.round(x%v);const b=s.opacity;let w=1;if(1!==b){if(0===b)continue;w=e.globalAlpha,e.globalAlpha=w*b}const k=m[i];let S=!1;const C=s.strokeDashArray;if(null!==C&&(S=!0,e.enableDash(C,s.strokeDashOffset)),null!==s.stroke&&s.strokeWidth>0&&("LineV"===s.figure||"LineH"===s.figure)){if(e.lineWidth=s.strokeWidth,t.rn(e,s.stroke,!1,!1,a,l),e.beginPath(),"LineV"===s.figure){const t=Math.floor((p-r)/r);for(let i=t;i<=t+c;i++){const t=i*r+p;0<=t&&t<=h&&this._b(i,f,x,k)&&(e.moveTo(t,0),e.lineTo(t,u))}}else if("LineH"===s.figure){const t=Math.floor((g-o)/o);for(let i=t;i<=t+d;i++){const t=i*o+g;0<=t&&t<=u&&this._b(i,f,x,k)&&(e.moveTo(0,t),e.lineTo(h,t))}}e.stroke(),e.endPath()}else if(null!==s.fill)if(t.rn(e,s.fill,!0,!1,a,l),"BarV"===s.figure){let t=s.width;isNaN(t)&&(t=r);const i=Math.floor((p-r)/r);for(let n=i;n<=i+c;n++){const i=n*r+p;0<=i+t&&i<=h&&this._b(n,f,x,k)&&e.fillRect(i,0,t,u)}}else if("BarH"===s.figure){let t=s.height;isNaN(t)&&(t=o);const i=Math.floor((g-o)/o);for(let n=i;n<=i+d;n++){const i=n*o+g;0<=i+t&&i<=u&&this._b(n,f,x,k)&&e.fillRect(0,i,h,t)}}S&&e.disableDash(),1!==b&&(e.globalAlpha=w)}}_b(t,e,i,n){if(e<0)return t%e===i;if(t%e!==i)return!1;const s=n.length;for(let e=0;e<s;e++){if(t%n[e]===i)return!1}return!0}wv(t){const e=[],i=t.C.r,n=i.length;for(let t=0;t<n;t++){const s=i[t],r=[];if(e.push(r),!s.visible)continue;const o=s.interval;if(o<0)continue;const a=s.figure,l=this.B2(a);for(let e=0;e<n;e++){if(e===t)continue;const n=i[e];if(!n.visible)continue;const s=n.figure;if(this.B2(s)!==l)continue;const a=n.interval;a>o&&r.push(a)}}t.yi.W0=e}B2(t){return"LineV"===t||"BarV"===t}yv(t){let e=1,i=1;const n=t.C.r,s=n.length;for(let t=0;t<s;t++){const s=n[t],r=Math.abs(s.interval);r<2||(this.B2(s.figure)?i=i*r/S.FC(i,r):e=e*r/S.FC(e,r))}const r=t.gridCellSize,o=t.yi;o.Yc.isReal()?o.Yc.i(i*r.width,e*r.height):o.Yc=new v(i*r.width,e*r.height)}});Ut.dn("Link",new class extends Ut{constructor(){super()}measure(t,i,n,s,r,o,a){const l=s.length;if(!(t instanceof fe||t instanceof be))return;let h=null,u=null;if(t instanceof be&&(h=t),t instanceof fe&&(u=t,h=u.adornedPart,null===t.hf&&(t.hf=[])),!(h instanceof be))return;const c=h;if(0===l)return t.naturalBounds.Fn(0,0),void t.measuredBounds.i(0,0,0,0);const d=t instanceof fe?null:h.path,f=h.routeBounds,p=t.Bo;p.i(0,0,f.width,f.height);const g=c.points,m=h.pointsCount;null!==u?u.sd(!1):null!==h&&h.sd(!1);const v=f.width,b=f.height,S=t.hf;if(S.length=0,null!==d){this.measureLinkPath(t,v,b,d);const e=d.measuredBounds;p.unionRect(e),S.push(e)}const C=k.l(),M=y.l(),T=y.l();for(let i=0;i<l;i++){const n=s[i];if(n===d)continue;let r=n.measuredBounds;if(n.isPanelMain&&n instanceof Jt){this.measureLinkPath(t,v,b,n),r=n.measuredBounds,p.unionRect(r),S.push(r);continue}if(m<2){n.ht(1/0,1/0,0,0),r=n.measuredBounds,p.unionRect(r),S.push(r);continue}const o=n.segmentIndex,a=n.segmentFraction;let l=n.alignmentFocus;l.isNoSpot()&&(l=w.Center);const h=n.segmentOrientation,u=n.segmentOffset;let k=0,A=0,P=0,N=0;if(isNaN(o)){const t=c.ot,i=e.et();t.getPointAndAngleAlongPath(a,i);const s=y.V(i[0],i[1]);N=i[2],0!==h&&(P=c.computeAngle(n,h,N),n.Yt=P,n.ue(!0),n.Jn(!0)),k=s.x,A=s.y,y.e(s),e.J(i)}else if(o<-m||o>=m){const t=y.l();c.IA(t),N=c.midAngle,0!==h&&(P=c.computeAngle(n,h,N),n.Yt=P,n.ue(!0),n.Jn(!0)),k=t.x-f.x,A=t.y-f.y,y.e(t)}else{let t,e,i=0;if(o>=0?(t=g.elt(o),e=o<m-1?g.elt(o+1):t):(i=m+o,t=g.elt(i),e=i>0?g.elt(i-1):t),N=0,t.equalsApprox(e)){let n,s;o>=0?(n=o>0?g.elt(o-1):t,s=o<m-2?g.elt(o+2):e):(n=i<m-1?g.elt(i+1):t,s=i>1?g.elt(i-2):e);const r=n.distanceSquaredPoint(t),a=e.distanceSquaredPoint(s);N=r>a+10?o>=0?n.directionPoint(t):t.directionPoint(n):a>r+10?o>=0?e.directionPoint(s):s.directionPoint(e):o>=0?n.directionPoint(s):s.directionPoint(n)}else N=o>=0?t.directionPoint(e):e.directionPoint(t);0!==h&&(P=c.computeAngle(n,h,N),n.Yt=P,n.ue(!0),n.Jn(!0)),k=t.x+(e.x-t.x)*a-f.x,A=t.y+(e.y-t.y)*a-f.y}n.ht(1/0,1/0,0,0),r=n.measuredBounds;const D=n.naturalBounds;let L=0;n instanceof Jt&&(L=n.strokeWidth);const E=D.width+L,_=D.height+L;C.Ri(),C.Fs(-r.x,-r.y),C.tt(n.scale,n.scale),C.cs(0===h?n.angle:N,E/2,_/2),(22===h||26===h)&&C.cs(90,E/2,_/2),(23===h||27===h)&&C.cs(-90,E/2,_/2),28===h&&(N>45&&N<135||N>225&&N<315)&&C.cs(-N,E/2,_/2);const O=new x(0,0,E,_);M.setRectSpot(O,l),C.gt(M);const F=-M.x+L/2*n.scale,R=-M.y+L/2*n.scale;T.a(u);const I=isNaN(u.x),B=isNaN(u.y);if(I||B){const t=E/2+3,e=_/2+3,i=N>=45&&N<=135,n=N>=225&&N<=315;0===h&&(i||n)?(T.x=B?t:u.y,T.y=I?e:u.x,i?o>=0||isNaN(o)&&a<.5||I&&(T.y=-e):n&&((o>=0||isNaN(o)&&a<.5)&&I&&(T.y=-e),B&&(T.x=-t))):(I&&(o>=0||isNaN(o)&&a<.5?T.x=t:T.x=-t),B&&(T.y=-e),T.rotate(N))}else T.rotate(N);k+=T.x,A+=T.y,O.i(k+F,A+R,r.width,r.height),S.push(O),p.unionRect(O)}if(null!==h){const t=h.labelNodes;for(;t.next();)t.value.ht(1/0,1/0)}t.Bo=p,t.position.i(f.x+p.x,f.y+p.y),r.Fn(p.width||0,p.height||0),k.e(C),y.e(M),y.e(T)}arrange(t,e,i){const n=e.length;if(!(t instanceof fe||t instanceof be))return;let s=t,r=null;t instanceof fe&&(r=t,s=r.adornedPart);const o=t,a=t instanceof fe?null:s.path,l=t.hf;if(0!==l.length){let t=0;if(null!==a&&t<l.length){const e=l[t];t++,a.Bt(e.x-o.Bo.x,e.y-o.Bo.y,e.width,e.height)}for(let i=0;i<n;i++){const n=e[i];if(n!==a&&t<l.length){const e=l[t];t++,n.Bt(e.x-o.Bo.x,e.y-o.Bo.y,e.width,e.height)}}}const h=s.points,u=h.count;if(u>=2&&o instanceof be){const t=o.labelNodes;for(;t.next();){const e=t.value;o.bv(e,u,h)}}null!==r?r.sd(!1):s.sd(!1);const c=t.EA(y.l());t.location.i(t.position.x+c.x,t.position.y+c.y),y.e(c)}measureLinkPath(t,e,i,n){if(!1===n.To())return;let s=n.strokeWidth;if(0===s&&t instanceof fe&&t.type===qt.Link&&t.adornedObject instanceof Jt&&(s=t.adornedObject.strokeWidth),s*=n.tt,t instanceof be&&null!==t.ot){const e=t.geometry.bounds;n.Wn(e.x-s/2,e.y-s/2,e.width+s,e.height+s)}else if(t instanceof fe&&null!==t.adornedPart.ot){const e=t.adornedPart.ot.bounds;n.Wn(e.x-s/2,e.y-s/2,e.width+s,e.height+s)}else n.Wn(-s/2,-s/2,e+s,i+s);n.kv(),n.ue(!1)}});Ut.dn("Graduated",new class extends Ut{constructor(){super()}measure(t,e,i,n,s,r,o){const a=t.findMainElement();t.Ke=[];const l=a.margin,h=l.right+l.left,u=l.top+l.bottom;a.ht(e,i,r,o);const c=a.measuredBounds,d=c.width,f=c.height,p=Math.max(d+h,0),g=Math.max(f+u,0),m=new x(-l.left,-l.top,p,g);t.Ke.push(m),s.a(m),this.determineGraduatedMarks(t,a);const y=t.xs;if(null===y)return;const v=n.length;for(let e=0;e<v;e++){const i=n[e],r=y[e];!i.visible||i===a||0===r.length||(i instanceof Jt?this.measureGraduatedTicks(t,i,r,s):i instanceof ie&&this.measureGraduatedLabels(t,i,r,s),i.ue(!1))}}arrange(t,e,i){if(null===t.Ke)return;const n=t.findMainElement(),s=t.xs;if(null===s)return;const r=t.Ke;let o=0,a=r[o];o++,null!==n&&n.Bt(a.x-i.x,a.y-i.y,a.width,a.height);const l=e.length;for(let t=0;t<l;t++){const l=e[t],h=s[t];!l.visible||l===n||0===h.length||(a=r[o],o++,l.Bt(a.x-i.x,a.y-i.y,a.width,a.height))}t.Ke=null}measureGraduatedTicks(t,e,i,n){let s=e.alignmentFocus;s.isNoSpot()&&(s=w.TopCenter);const r=e.angle;e.Yt=0,e.ht(1/0,1/0,0,0),e.Yt=r;const o=e.measuredBounds,a=o.width,l=o.height,h=x.V(0,0,a,l),u=y.l();u.setRectSpot(h,s),x.e(h);const c=-u.x,d=-u.y,f=new x,p=i.length;for(let t=0;t<p;t++){const n=i[t],s=n.pt.x,r=n.pt.y,o=n.angle;for(let i=0;i<4;i++){switch(i){case 0:u.i(c,d);break;case 1:u.i(c+a,d);break;case 2:u.i(c,d+l);break;case 3:u.i(c+a,d+l)}u.rotate(o+e.angle),u.offset(s,r),0===t&&0===i?f.i(u.x,u.y,0,0):f.unionPoint(u),u.offset(-s,-r),u.rotate(-o-e.angle)}}y.e(u),null!==t.Ke&&t.Ke.push(f),n.unionNoCheck(f.x,f.y,f.width,f.height)}measureGraduatedLabels(t,e,i,n){null===t.Pe&&(t.Pe=new ie);const s=t.Pe;this.UA(e,s);let r=e.alignmentFocus;r.isNoSpot()&&(r=w.TopCenter);const o=e.segmentOrientation,a=e.segmentOffset,l=new x;let h=0,u=0,c=0,d=0,f=0;const p=i.length;for(let t=0;t<p;t++){const n=i[t];h=n.pt.x,u=n.pt.y,c=n.angle,d=e.angle,f=e.angle,0!==o&&(f=21===o||25===o?c+e.angle:c,d=be.computeAngle(o,f)),s.Yt=d,s.text=n.text||"",s.ht(1/0,1/0,0,0);const p=s.measuredBounds,g=s.naturalBounds,m=g.width,v=g.height,b=k.l();b.Ri(),b.Fs(-p.x,-p.y),b.tt(s.scale,s.scale),b.cs(f,m/2,v/2),(22===o||26===o)&&b.cs(90,m/2,v/2),(23===o||27===o)&&b.cs(-90,m/2,v/2),28===o&&(c>45&&c<135||c>225&&c<315)&&b.cs(-c,m/2,v/2);const w=x.V(0,0,m,v),S=y.l();S.setRectSpot(w,r),b.gt(S);const C=-S.x,M=-S.y,T=y.l();T.a(a),isNaN(T.x)&&(T.x=m/2+3),isNaN(T.y)&&(T.y=-(v/2+3)),T.rotate(c),h+=T.x+C,u+=T.y+M;const A=new x(h,u,p.width,p.height),P=new x(p.x,p.y,p.width,p.height),N=new x(g.x,g.y,g.width,g.height);n.labelAngle=d,n.lineCount=s.lineCount,n.lines=s.getMetrics(),n.actualBounds=A,n.measuredBounds=P,n.naturalBounds=N,0===t?l.a(A):l.unionRect(A),y.e(T),y.e(S),x.e(w),k.e(b)}null!==t.Ke&&t.Ke.push(l),n.unionNoCheck(l.x,l.y,l.width,l.height)}determineGraduatedMarks(t,i){const n=i.geometry,s=i.strokeWidth,r=n.flattenedSegments,o=n.flattenedLengths,a=n.flattenedTotalLength,l=r.length;let h=0,u=0;const c=e.et();for(let t=0;t<l;t++){const e=r[t],i=[];h=0,u=0;const n=e.length;for(let t=0;t<n;t+=2){const n=e[t],s=e[t+1];if(0===t){h=n,u=s;continue}let r=180*Math.atan2(s-u,n-h)/Math.PI;r<0&&(r+=360),i.push(r),h=n,u=s}c.push(i)}const d=this.Pv(t),f=t.C.r,p=f.length;let g,m=0,v=0,x=a;t.xs=[];for(let e=0;e<p;e++){const l=f[e];if(g=[],!l.visible||l===i){t.xs.push(g);continue}const h=Math.abs(l.interval),u=t.graduatedTickUnit;if(u*h*a/t.graduatedRange<2&&null===l.graduatedSkip){t.xs.push(g);continue}let p=o[0][0],b=0,w=0;v=a*l.graduatedStart-1e-4,x=a*l.graduatedEnd+1e-4;const k=u*h;let S=t.graduatedTickBase;if(S<t.graduatedMin){let e=(t.graduatedMin-S)/k;e=e%1==0?e:Math.floor(e+1),S+=e*k}else if(S>t.graduatedMin+k){S-=Math.floor((S-t.graduatedMin)/k)*k}const C=d[e],M=S,T=1e-6*t.graduatedMax;for(let e=1;S<=t.graduatedMax+T;e++){if(this.Sv(t,S-t.graduatedTickBase,C)&&(S>t.graduatedMax&&(S=t.graduatedMax),(null===l.graduatedSkip||l instanceof ie&&!l.graduatedSkip(S,l)||l instanceof Jt&&!l.graduatedSkip(S,l))&&(m=(S-t.graduatedMin)*a/t.graduatedRange,m>a&&(m=a),v<=m&&m<=x))){let t=c[b][w],e=o[b][w];for(;b<o.length;){for(;m>p&&w<o[b].length-1;)w++,t=c[b][w],e=o[b][w],p+=e;if(m<=p)break;b++,w=0,t=c[b][w],e=o[b][w],p+=e}const a=r[b],h=a[2*w],u=a[2*w+1],d=a[2*w+2],f=a[2*w+3],v=(m-(p-e))/e,x=new y(h+(d-h)*v+s/2-n.bounds.x,u+(f-u)*v+s/2-n.bounds.y);if(x.scale(i.scale,i.scale),t=this.Mv(t,v,a,c[b],w),l instanceof ie){let e="";null!==l.graduatedFunction?(e=l.graduatedFunction(S,l),e=null!=e?e.toString():""):e=(+S.toFixed(2)).toString(),""!==e&&g.push({pt:x,angle:t,text:e})}else g.push({pt:x,angle:t})}S=M+e*k}t.xs.push(g)}e.J(c)}Mv(t,e,i,n,s){if(e<.5005&&e>.4995)return t;let r=t;if(e<.5?s>0?r=n[s-1]:S.z(i[0],i[i.length-2])&&S.z(i[1],i[i.length-1])&&(r=n[n.length-1]):e>.5&&(s+1<n.length?r=n[s+1]:S.z(i[0],i[i.length-2])&&S.z(i[1],i[i.length-1])&&(r=n[0])),t!==r){let i=Math.abs(t-r);if(i>180&&(t<r?t+=360:r+=360,i=Math.abs(t-r)),e<5e-4||e>.9995)return(t+r)/2%360;if(i<10){const i=1-Math.abs(.5-e);return(t*i+r*(1-i))%360}}return t}Pv(t){if(null===t.ss){const e=[],i=t.C.r,n=i.length;for(let t=0;t<n;t++){const s=i[t],r=[];if(e.push(r),!s.visible)continue;const o=s.interval;if(!(o<0))for(let e=0;e<n;e++){if(e===t)continue;const n=i[e];if(!n.visible||s.constructor!==n.constructor)continue;const a=n.interval;a>o&&r.push(a)}}t.ss=e}return t.ss}Sv(t,e,i){const n=i.length;for(let s=0;s<n;s++){const n=e%(i[s]*t.graduatedTickUnit),r=1e-6*t.graduatedTickUnit;if(n<r&&n>-r)return!1}return!0}Ui(t,e,i){const n=i.ta;i.ta=!0;const s=t.naturalBounds,r=s.width,o=s.height,a=e instanceof Ft;e.save(),e.beginPath(),e.rect(-1,-1,r+1,o+1),e.clip(),e.endPath();const l=t.findMainElement();l.Ui(e,i);let h=t.getDocumentScale()*i.scale;h<=0&&(h=1);const u=l.actualBounds,c=t.C.r,d=t.xs,f=c.length;for(let n=0;n<f;n++){const s=c[n],r=d[n],o=r.length;if(s.visible&&s!==l&&0!==r.length)if(s instanceof Jt){if(t.graduatedTickUnit*s.interval*l.geometry.flattenedTotalLength/t.graduatedRange*h<2&&null===s.graduatedSkip)continue;const n=s.measuredBounds,c=s.strokeWidth*s.scale;let d=s.alignmentFocus;d.isNoSpot()&&(d=w.TopCenter);for(let l=0;l<o;l++){const o=r[l].pt,h=r[l].angle;this.Nv(s,o,u,h,n,c,d),s.Ui(e,i),a&&(t.svg.appendChild(s.svg),s.svg=null),s.jr.Ri()}}else if(s instanceof ie){null===t.Pe&&(t.Pe=new ie);const n=t.Pe;this.UA(s,n),n.V2=!0;for(let l=0;l<o;l++){const o=r[l];if(o.actualBounds&&o.measuredBounds&&o.naturalBounds){n.Cv(o);const r=o.actualBounds;n.Bt(r.x,r.y,r.width,r.height),this.Lv(n,u,r,o.measuredBounds,o.naturalBounds),n.Wr=s.part,n.Vs=s.panel,n.Ui(e,i),n.Vs=null,n.Wr=null,a&&(t.svg.appendChild(n.svg),n.svg=null)}}}}i.ta=n,e.restore(),e.clearContextCache(!0)}Nv(t,e,i,n,s,r,o){const a=t.jr;a.Ri(),a.Fs(e.x+i.x,e.y+i.y),a.cs(n+t.angle,0,0),a.Fs(-s.width*o.x+o.offsetX+r/2,-s.height*o.y+o.offsetY+r/2),a.tt(t.scale,t.scale),t.Zu(!1),t.lh.set(t.jr),t.da=t.scale,t.ka(!1)}Lv(t,e,i,n,s){const r=t.jr;r.Ri(),r.Fs(i.x+e.x,i.y+e.y),r.Fs(-n.x,-n.y),t.g0(r,s.x,s.y,s.width,s.height),t.Zu(!1),t.lh.set(t.jr),t.da=t.scale,t.ka(!1)}UA(t,e){e.Av(t)}});var Yt=(t=>(t[t.Uniform=6]="Uniform",t[t.UniformToFill=7]="UniformToFill",t))(Yt||{});class qt extends Dt{j;C;Zt;nd;Bn;Zr;to;Bo;z2;F;od;st;yi;_t;rd;yh;Ks;constructor(t,i){if(super(),this.j=null,void 0===t)this.j=qt.Position;else if("string"==typeof t){const e=Ut.es.get(t);null!==e&&(this.j=e)}else t instanceof Ut?this.j=t:t&&(this.j=qt.Position,i=t);null===this.j&&e.o("Panel type not specified or PanelLayout not loaded: "+t),this.n|=4194304|(this.j===qt.Grid?1048576:0),this.C=new l,this.Zt=b.Rg,this.nd=w.Default,this.Bn=1,this.Zr=null,this.to="",this.Bo=new x(NaN,NaN,NaN,NaN),this.z2=null,this.F=null,this.od=6,this.yi=null,this.st=null,this._t=null,this.rd=NaN,this.yh=null,this.Ks=null,i&&Object.assign(this,i)}cloneProtected(t){super.cloneProtected(t),t.j=this.j,t.Zt=this.Zt.P(),t.nd=this.nd.P(),t.Bn=this.Bn,t.to=this.to,t.Bo.a(this.Bo),null!==this.F&&(t.F=this.F.copy(t)),t.od=this.od,null!==this.st&&(t.st=this.st.copy()),null!==this.yi&&(t.yi=this.yi.copy()),t._t=this._t,t.rd=this.rd,t.yh=this.yh}vo(t){super.vo(t),t.C=this.C;const e=t.C.r,i=e.length;for(let n=0;n<i;n++){e[n].Vs=t}t.Zr=null}copy(){const t=super.copy();if(null!==t){const e=this.C.r,i=e.length;for(let n=0;n<i;n++){const i=e[n].copy();t.Tv(i)}return t}return null}toString(){return"Panel("+this.type.name+")#"+u.as(this)}get type(){return this.j}set type(t){const e=this.j;e!==t&&(this.j=t,this.af=this.j===qt.Grid,this.c(),this.t("type",e,t))}get elements(){return this.C.iterator}get naturalBounds(){return this.zi}get padding(){return this.Zt}set padding(t){"number"==typeof t?(t<0&&e.W(t,">= 0",qt,"padding"),t=new b(t)):(t.left<0&&e.W(t.left,">= 0",qt,"padding:value.left"),t.right<0&&e.W(t.right,">= 0",qt,"padding:value.right"),t.top<0&&e.W(t.top,">= 0",qt,"padding:value.top"),t.bottom<0&&e.W(t.bottom,">= 0",qt,"padding:value.bottom"));const i=this.Zt;i.equals(t)||(t=t.P(),this.Zt=t,this.c(),this.t("padding",i,t))}get defaultAlignment(){return this.nd}set defaultAlignment(t){const e=this.nd;e.equals(t)||(t=t.P(),this.nd=t,this.c(),this.t("defaultAlignment",e,t))}get defaultStretch(){return this.Bn}set defaultStretch(t){const e=this.Bn;e!==t&&(this.Bn=t,this.c(),this.t("defaultStretch",e,t))}get defaultSeparatorPadding(){return null!==this.F?this.F.J0:b.Rg}set defaultSeparatorPadding(t){"number"==typeof t&&(t=new b(t));const e=this.defaultSeparatorPadding;e.equals(t)||(t=t.P(),null===this.F&&(this.F=new Gt),this.F.J0=t,this.c(),this.t("defaultSeparatorPadding",e,t))}get defaultRowSeparatorStroke(){return null!==this.F?this.F.$0:null}set defaultRowSeparatorStroke(t){const e=this.defaultRowSeparatorStroke;e!==t&&(null===t||"string"==typeof t||t instanceof Ht)&&(t instanceof Ht&&t.u(),null===this.F&&(this.F=new Gt),this.F.$0=t,this.S(),this.t("defaultRowSeparatorStroke",e,t))}get defaultRowSeparatorStrokeWidth(){return null!==this.F?this.F.Z0:1}set defaultRowSeparatorStrokeWidth(t){const e=this.defaultRowSeparatorStrokeWidth;e!==t&&isFinite(t)&&t>=0&&(null===this.F&&(this.F=new Gt),this.F.Z0=t,this.c(),this.t("defaultRowSeparatorStrokeWidth",e,t))}get defaultRowSeparatorDashArray(){return null!==this.F?this.F.Q0:null}set defaultRowSeparatorDashArray(t){const i=this.defaultRowSeparatorDashArray;if(i!==t){if(null!==t&&!Array.isArray(t)&&e.Zi(t,"Array",qt,"defaultRowSeparatorDashArray:value"),null!==t){const n=t.length;let s=0;for(let i=0;i<n;i++){const n=t[i];("number"!=typeof n||!(n>=0)||!isFinite(n))&&e.o("defaultRowSeparatorDashArray value "+n+" at index "+i+" must be a positive number or zero."),s+=n}if(0===s){if(null===i)return;t=null}}null===this.F&&(this.F=new Gt),this.F.Q0=t,this.S(),this.t("defaultRowSeparatorDashArray",i,t)}}get defaultColumnSeparatorStroke(){return null!==this.F?this.F._0:null}set defaultColumnSeparatorStroke(t){const e=this.defaultColumnSeparatorStroke;e!==t&&(null===t||"string"==typeof t||t instanceof Ht)&&(t instanceof Ht&&t.u(),null===this.F&&(this.F=new Gt),this.F._0=t,this.S(),this.t("defaultColumnSeparatorStroke",e,t))}get defaultColumnSeparatorStrokeWidth(){return null!==this.F?this.F.tp:1}set defaultColumnSeparatorStrokeWidth(t){const e=this.defaultColumnSeparatorStrokeWidth;e!==t&&isFinite(t)&&t>=0&&(null===this.F&&(this.F=new Gt),this.F.tp=t,this.c(),this.t("defaultColumnSeparatorStrokeWidth",e,t))}get defaultColumnSeparatorDashArray(){return null!==this.F?this.F.ip:null}set defaultColumnSeparatorDashArray(t){const i=this.defaultColumnSeparatorDashArray;if(i!==t){if(null!==t&&!Array.isArray(t)&&e.Zi(t,"Array",qt,"defaultColumnSeparatorDashArray:value"),null!==t){const n=t.length;let s=0;for(let i=0;i<n;i++){const n=t[i];("number"!=typeof n||!(n>=0)||!isFinite(n))&&e.o("defaultColumnSeparatorDashArray value "+n+" at index "+i+" must be a positive number or zero."),s+=n}if(0===s){if(null===i)return;t=null}}null===this.F&&(this.F=new Gt),this.F.ip=t,this.S(),this.t("defaultColumnSeparatorDashArray",i,t)}}get ph(){return null!==this.F?this.F.ph:null}set ph(t){null===this.F&&(this.F=new Gt),this.F.ph=t}get viewboxStretch(){return this.od}set viewboxStretch(t){const e=this.od;e!==t&&(this.od=t,this.c(),this.t("viewboxStretch",e,t))}get gridCellSize(){return null!==this.yi?this.yi.ld:v.xC}set gridCellSize(t){null===this.yi&&(this.yi=new Wt);const i=this.yi.ld;if(!i.equals(t)){(!t.isReal()||0===t.width||0===t.height)&&e.o("Invalid Panel.gridCellSize: "+t),this.yi.ld=t.P();const n=this.diagram;null!==n&&this===n.grid&&n._l(),this.S(),this.t("gridCellSize",i,t)}}get gridOrigin(){return null!==this.yi?this.yi.hd:y.xo}set gridOrigin(t){null===this.yi&&(this.yi=new Wt);const i=this.yi.hd;if(!i.equals(t)){t.isReal()||e.o("Invalid Panel.gridOrigin: "+t),this.yi.hd=t.P();const n=this.diagram;null!==n&&this===n.grid&&n._l(),this.S(),this.t("gridOrigin",i,t)}}get graduatedMin(){return null!==this.st?this.st.ep:0}set graduatedMin(t){const e=this.graduatedMin;if(e!==t&&(null===this.st&&(this.st=new $t),this.st.ep=t,this.c(),this.t("graduatedMin",e,t),this.Wc())){const t=this.part;null!==t&&this.ba(t,"graduatedRange")}}get graduatedMax(){return null!==this.st?this.st.sp:100}set graduatedMax(t){const e=this.graduatedMax;if(e!==t&&(null===this.st&&(this.st=new $t),this.st.sp=t,this.c(),this.t("graduatedMax",e,t),this.Wc())){const t=this.part;null!==t&&this.ba(t,"graduatedRange")}}get graduatedRange(){return this.graduatedMax-this.graduatedMin}get graduatedTickUnit(){return null!==this.st?this.st.np:10}set graduatedTickUnit(t){const e=this.graduatedTickUnit;e!==t&&t>0&&(null===this.st&&(this.st=new $t),this.st.np=t,this.c(),this.t("graduatedTickUnit",e,t))}get graduatedTickBase(){return null!==this.st?this.st.op:0}set graduatedTickBase(t){const e=this.graduatedTickBase;e!==t&&(null===this.st&&(this.st=new $t),this.st.op=t,this.c(),this.t("graduatedTickBase",e,t))}get xs(){return null!==this.st?this.st.xs:null}set xs(t){null!==this.st?this.st.xs=t:null!==t&&(this.st=new $t,this.st.xs=t)}get Ke(){return null!==this.st?this.st.Ke:null}set Ke(t){null!==this.st?this.st.Ke=t:null!==t&&(this.st=new $t,this.st.Ke=t)}get ss(){return null!==this.st?this.st.ss:null}set ss(t){null!==this.st?this.st.ss=t:null!==t&&(this.st=new $t,this.st.ss=t)}get Pe(){return null!==this.st?this.st.Pe:null}set Pe(t){null!==this.st?this.st.Pe=t:null!==t&&(this.st=new $t,this.st.Pe=t)}w0(t){super.w0(t);const e=this.C.r,i=e.length;for(let n=0;n<i;n++)e[n].w0(t)}dh(t,e){if(this.j===qt.Grid)return t.commitTransform(),void this.j.Ui(this,t,e);if(this.j===qt.Graduated)return t.commitTransform(),void this.j.Ui(this,t,e);if(this.j===qt.Table)if(t.commitTransform(),t instanceof Ft){const i=t.currentElement;t.currentElement=t.newGroup2("gojs-ts"),this.X2(t,e),t.endGroup(),t.currentElement=i}else this.X2(t,e);const i=this.isClipping&&this.j===qt.Spot;i&&t.save();const n=this.findMainElement(),s=this.C.r,r=s.length;for(let o=0;o<r;o++){const r=s[o];i&&r===n&&(t.clipInsteadOfFill=!0),r.Ui(t,e),i&&r===n&&(t.clipInsteadOfFill=!1)}i&&(t.restore(),t.clearContextCache(!0))}X2(t,e){t.lineCap="butt";const i=this.rowCount>0?this.Xe:null,n=this.columnCount>0?this.Ye:null;null!==i&&this.t1(t,e,!0,i,!0),null!==n&&this.t1(t,e,!1,n,!0),null!==i&&this.BA(t,!0,i),null!==n&&this.BA(t,!1,n),null!==i&&this.t1(t,e,!0,i,!1),null!==n&&this.t1(t,e,!1,n,!1)}BA(t,e,i){const n=i.length,s=this.actualBounds,r=this.naturalBounds;let o=!0;for(let a=0;a<n;a++){const n=i[a];if(void 0===n||0===n.actual)continue;if(o){o=!1;continue}if(e){if(n.position>r.height)continue}else if(n.position>r.width)continue;let l=n.separatorStrokeWidth;isNaN(l)&&(l=e?this.defaultRowSeparatorStrokeWidth:this.defaultColumnSeparatorStrokeWidth);let h=n.separatorStroke;if(null===h&&(h=e?this.defaultRowSeparatorStroke:this.defaultColumnSeparatorStroke),0===l||null===h)continue;this.rn(t,h,!1,!1,r,s);let u=!1,c=n.separatorDashArray;null===c&&(c=e?this.defaultRowSeparatorDashArray:this.defaultColumnSeparatorDashArray),null!==c&&(u=!0,t.enableDash(c,0)),t.beginPath();const d=n.position+l;e?d>r.height&&(l-=d-r.height):d>r.width&&(l-=d-r.width);let f=n.position+l/2;t.lineWidth=l;const p=this.Zt;if(e){f+=p.top;const e=p.left,i=r.width-p.right;t.moveTo(e,f),t.lineTo(i,f)}else{f+=p.left;const e=p.top,i=r.height-p.bottom;t.moveTo(f,e),t.lineTo(f,i)}t.stroke(),t.endPath(),u&&t.disableDash()}}t1(t,e,i,n,s){const r=n.length,o=this.actualBounds,a=this.naturalBounds,l=this.VA(!0),h=this.VA(!1);for(let e=0;e<r;e++){const r=n[e];if(void 0===r||null===r.background||r.coversSeparators===s||0===r.actual)continue;const u=i?o.height:o.width;if(r.position>u)continue;let c=r.computeEffectiveSpacing(),d=r.separatorStrokeWidth;isNaN(d)&&(d=i?this.defaultRowSeparatorStrokeWidth:this.defaultColumnSeparatorStrokeWidth);let f=r.separatorStroke;null===f&&(f=i?this.defaultRowSeparatorStroke:this.defaultColumnSeparatorStroke),(null===f||r.index===(i?l:h))&&(d=0),c-=d;const p=r.position+d;let g=c+r.actual;if(p+g>u&&(g=u-p),g<=0)continue;const m=this.Zt;this.rn(t,r.background,!0,!1,a,o),i?t.fillRect(m.left,p+m.top,o.width-(m.left+m.right),g):t.fillRect(p+m.left,m.top,g,o.height-(m.top+m.bottom))}}VA(t){const e=t?this.rowCount:this.columnCount;for(let i=0;i<e;i++){const e=t?this.Xe[i]:this.Ye[i];if(void 0!==e)return e.index}return 0}Qc(){const t=this.C.r,e=t.length;for(let i=0;i<e;i++)t[i].Qc();this.Ve(!0)}Zc(t,e,i){const n=this.svg;if(null===n)return!1;if(this.type===qt.Table){const i=n.getElementsByClassName("gojs-ts"),s=0!==i.length?i[0]:null;null!==s&&(s.innerHTML=""),t.currentElement=s,this.X2(t,e),t.currentElement=null}else{if(this.j===qt.Grid)return n.innerHTML="",n.remove(),!1;if(this.j===qt.Graduated)return n.innerHTML="",n.remove(),!1;if(this.j===qt.Spot&&this.isClipping)return n.innerHTML="",n.remove(),this.hh=null,this.Qc(),!1}if(!super.Zc(t,e,i))return!1;const s=this.C.r,r=s.length;for(let i=0;i<r;i++)s[i].Ui(t,e);return!0}$u(t){return!0}b0(t,e,i,n){if(!this.isClipping){if(this.Xs()&&null!==t.partClipRect){const e=t.partClipRect,s=this.C.r;let r=0,o=0;for(let t=0;t<s.length;t++){if(!s[t].isVisibleObject())continue;const e=s[t].actualBounds;r=0===t?e.x:Math.min(e.x,r),o=0===t?e.y:Math.min(e.y,o)}return void n.setAttributeNS(null,"clip-path",`path('M ${e.x-i.x-r},${e.y-i.y-o} l ${e.width} 0 l 0 ${e.height} l -${e.width} 0 z')`)}super.b0(t,e,i,n)}}Jc(t,e,i,n,s){const r=this.an(),o=this.T,a=1/(o.m11*o.m22-o.m12*o.m21);let l=o.m22*a,h=-o.m12*a,u=-o.m21*a,c=o.m11*a,d=a*(o.m21*o.dy-o.m22*o.dx),f=a*(o.m12*o.dx-o.m11*o.dy);if(null!==this.background){const r=t*l+e*u+d,a=t*h+e*c+f,p=i*l+n*u+d,g=i*h+n*c+f;s.i(0,0);const m=this.naturalBounds,y=S.dl(0,0,m.width,m.height,r,a,p,g,s);return s.T(o),y}{r||(l=1,h=0,u=0,c=1,d=0,f=0);const a=t*l+e*u+d,p=t*h+e*c+f,g=i*l+n*u+d,m=i*h+n*c+f;s.i(g,m);let v=(g-a)**2+(m-p)**2,x=!1;const b=this.C.r,w=b.length,k=y.l();let S=null,C=1/0,M=null;const T=this.isClipping&&this.j===qt.Spot;T&&(M=y.l(),S=this.findMainElement(),x=S.Jc(a,p,g,m,M),x&&(C=(a-M.x)**2+(p-M.y)**2));for(let t=0;t<w;t++){const e=b[t];if(!e.visible||e===S||!e.Jc(a,p,g,m,k))continue;x=!0;const i=(a-k.x)**2+(p-k.y)**2;i<v&&(v=i,s.set(k))}return T&&(C>v&&s.set(M),y.e(M)),y.e(k),r&&s.T(o),x}}Au(){const t=this.C.r,e=t.length;for(let i=0;i<e;i++)t[i].Au();super.Au()}c(t){if(this.To())return;super.c(t);let e=null;(this.j===qt.Auto||this.j===qt.Link)&&(e=this.findMainElement());const i=this.C.r,n=i.length;for(let t=0;t<n;t++){const n=i[t];if((n===e||n.isPanelMain)&&n.c(!0),n.desiredSize.isReal())continue;const s=n.zs(!1);!(n instanceof Pe)&&!(n instanceof qt)&&!(n instanceof ie)&&0===s||n.c(!0)}}tf(){if(this.To())return;this.ue(!0),this.Jn(!0);const t=this.C.r,e=t.length;for(let i=0;i<e;i++)t[i].tf()}$c(){if(!1===this.Gb()){this.Zu(!0),this.ka(!0);const t=this.C.r,e=t.length;for(let i=0;i<e;i++)t[i].P2()}}P2(){this.ka(!0);const t=this.C.r,e=t.length;for(let i=0;i<e;i++)t[i].P2()}Wu(t,e,i,n){const s=this.Bo;s.i(0,0,0,0);const r=this.desiredSize,o=this.minSize;void 0===i&&(i=o.width,n=o.height),i=Math.max(i,o.width),n=Math.max(n,o.height);const a=this.maxSize;isNaN(r.width)||(t=Math.min(r.width,a.width)),isNaN(r.height)||(e=Math.min(r.height,a.height)),t=Math.max(i,t),e=Math.max(n,e);const l=this.Zt;t=Math.max(t-l.left-l.right,0),e=Math.max(e-l.top-l.bottom,0);const h=this.C.r;this.j.measure(this,t,e,h,s,i,n);let u=s.width+l.left+l.right,c=s.height+l.top+l.bottom;isFinite(r.width)&&(u=r.width),isFinite(r.height)&&(c=r.height),u=Math.min(a.width,u),c=Math.min(a.height,c),u=Math.max(o.width,u),c=Math.max(o.height,c),u=Math.max(i,u),c=Math.max(n,c),s.Fn(u,c),this.naturalBounds.Fn(u,c),this.Wn(0,0,u,c)}findMainElement(){if(null===this.Zr){const t=this.C.r,e=t.length;if(0===e)return null;for(let i=0;i<e;i++){const e=t[i];if(!0===e.isPanelMain)return this.Zr=e,e}this.Zr=t[0]}return this.Zr}Uo(){return null!==this.part?this.part.locationObject:null}get panelLayoutState(){return this.z2}set panelLayoutState(t){this.z2=t}fh(t,e,i,n){const s=this.C.r;if(this.actualBounds.i(t,e,i,n),!this.desiredSize.isReal()){let t=this.zs(!0);const e=this.measuredBounds,s=e.width,r=e.height,o=this.qr,a=o.left+o.right,l=o.top+o.bottom;switch(s===i&&r===n&&(t=0),t){case 0:(s>i||r>n)&&(this.c(),this.ht(s>i?i:s,r>n?n:r,0,0));break;case 2:this.c(!0),this.ht(i+a,n+l,0,0);break;case 5:this.c(!0),this.ht(i+a,r+l,0,0);break;case 4:this.c(!0),this.ht(s+a,n+l,0,0)}}this.j.arrange(this,s,this.Bo)}ch(t){const e=this.naturalBounds,i=this.Uo();if(x.contains(0,0,e.width,e.height,t.x,t.y)){const e=this.C.r,n=e.length,s=y.V(0,0);for(let r=n;r--;){const n=e[r];if((n.visible||n===i)&&(s.set(t).Oe(n.T),n.containsPoint(s)))return y.e(s),!0}return y.e(s),null!==this.Lt}return!1}d0(t){if(this.jn===t)return this;const e=this.C.r,i=e.length;for(let n=0;n<i;n++){const i=e[n].d0(t);if(null!==i)return i}return null}walkVisualTreeFrom(t,e){if(e(this,t),t instanceof qt){const i=t.C.r,n=i.length;for(let t=0;t<n;t++)this.walkVisualTreeFrom(i[t],e)}}Kr(t){this.zA(this,t)}zA(t,e){e(t);const i=t.C.r,n=i.length;for(let t=0;t<n;t++){const n=i[t];n instanceof qt&&this.zA(n,e)}}Dv(t){this.XA(this,t)}XA(t,e){if(e(t),t instanceof qt){const i=t.C.r,n=i.length;for(let t=0;t<n;t++)this.XA(i[t],e)}}findInVisualTree(t){return this.YA(this,t)}YA(t,e){if(e(t))return t;if(t instanceof qt){const i=t.C.r,n=i.length;for(let t=0;t<n;t++){const n=this.YA(i[t],e);if(null!==n)return n}}return null}findObject(t){if(this.name===t)return this;const e=this.C.r;let i=e.length;this.Fv()&&(i=this.rp());for(let n=0;n<i;n++){const i=e[n];if(i instanceof qt){const e=i.findObject(t);if(null!==e)return e}if(i.name===t)return i}return null}KA(){const t=this.C.r,e=t.length;let i=0;for(let n=0;n<e;n++){const e=t[n];e instanceof qt?i=Math.max(i,e.KA()):e instanceof Jt&&(i=Math.max(i,e.Rv()))}return i}an(){return!(this.type===qt.TableRow||this.type===qt.TableColumn)}Jr(){return this.type===qt.TableRow||this.type===qt.TableColumn}kL(t,e,i){if(!1===this.pickable||(void 0===e&&(e=null),void 0===i&&(i=null),this._e()))return null;const n=this.naturalBounds,s=1/this.getDocumentScale(),r=this.an(),o=r?t:y.V(t.x,t.y).Oe(this.T),a=this.diagram;let l=10,h=5;if(null!==a&&(l=a.getInputOption("extraTouchArea"),h=l/2),x.contains(-h*s,-h*s,n.width+l*s,n.height+l*s,o.x,o.y)){if(!this.af){const n=this.C.r,s=n.length,a=y.l(),l=this.isClipping&&this.j===qt.Spot,h=l?this.findMainElement():null;if(l&&(h.an()?a.set(t).Oe(h.T):a.set(t),!h.containsPoint(a)))return y.e(a),r||y.e(o),null;const u=this.Uo();for(let c=s;c--;){const s=n[c];if(!s.visible&&s!==u||(s.an()?a.set(t).Oe(s.T):a.set(t),l&&s===h))continue;let d=null;if(s instanceof qt?d=s.kL(a,e,i):!0===s.pickable&&s.containsPoint(a)&&(d=s),null!==d&&(null!==e&&(d=e(d)),null!==d&&(null===i||i(d))))return y.e(a),r||y.e(o),d}y.e(a)}if(null===this.background)return r||y.e(o),null;const s=x.contains(0,0,n.width,n.height,o.x,o.y)?this:null;return r||y.e(o),s}return r||y.e(o),null}PL(t,e,i,n){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);const s=this.naturalBounds,r=this.an(),o=r?t:y.V(t.x,t.y).Oe(this.T),a=this.Jr(),l=x.contains(0,0,s.width,s.height,o.x,o.y);if(a||l){if(!this.af){const s=this.C.r,r=s.length,o=y.l(),a=this.Uo();for(let l=r;l--;){const r=s[l];if(!r.visible&&r!==a)continue;r.an()?o.set(t).Oe(r.T):o.set(t);let h=r;const u=r instanceof qt?r:null;if(null!==u?u.PL(o,e,i,n):h.containsPoint(o)){if(!1===h.pickable)continue;null!==e&&(h=e(h)),null!==h&&(null===i||i(h))&&n.add(h)}}y.e(o)}return r||y.e(o),l&&null!==this.background}return r||y.e(o),!1}Tm(t,e,i,n,s,r){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===i&&(i=null);let o=r;if(void 0===o&&(o=k.l(),o.Ri()),o.nc(this.T),this.containedInRect(t,o))return this.Y2(e,i,s),void 0===r&&k.e(o),!0;if(this.intersectsRect(t,o)){if(!this.af){const r=this.Uo(),a=this.C.r;for(let l=a.length;l--;){const h=a[l];if(!h.visible&&h!==r)continue;const u=h.actualBounds,c=this.naturalBounds;if(u.x>c.width||u.y>c.height||u.x+u.width<0||u.y+u.height<0)continue;let d=h;const f=h instanceof qt?h:null,p=k.l();p.set(o),(null!==f?f.Tm(t,e,i,n,s,p):d.xA(t,n,p))&&(null!==e&&(d=e(d)),null!==d&&(null===i||i(d))&&s.add(d)),k.e(p)}}return void 0===r&&k.e(o),n}return void 0===r&&k.e(o),!1}Y2(t,e,i){const n=this.C.r;for(let s=n.length;s--;){const r=n[s];if(!r.visible)continue;const o=r.actualBounds,a=this.naturalBounds;if(o.x>a.width||o.y>a.height||o.x+o.width<0||o.y+o.height<0)continue;r instanceof qt&&r.Y2(t,e,i);let l=r;null!==t&&(l=t(l)),null!==l&&(null===e||e(l))&&i.add(l)}}SL(t,e,i,n,s,r){if(!1===this.pickable)return!1;void 0===i&&(i=null),void 0===n&&(n=null);const o=this.naturalBounds,a=this.an(),l=a?t:y.V(t.x,t.y).Oe(this.T),h=a?e:y.V(e.x,e.y).Oe(this.T),u=l.distanceSquaredPoint(h),c=l.x>0&&l.x<o.width&&l.y>0&&l.y<o.height||y.distanceLineSegmentSquared(l.x,l.y,0,0,0,o.height)<=u||y.distanceLineSegmentSquared(l.x,l.y,0,o.height,o.width,o.height)<=u||y.distanceLineSegmentSquared(l.x,l.y,o.width,o.height,o.width,0)<=u||y.distanceLineSegmentSquared(l.x,l.y,o.width,0,0,0)<=u,d=l.distanceSquared(0,0)<=u&&l.distanceSquared(0,o.height)<=u&&l.distanceSquared(o.width,0)<=u&&l.distanceSquared(o.width,o.height)<=u;if(a||(y.e(l),y.e(h)),c){if(!this.af){const o=y.l(),l=y.l(),h=this.Uo(),u=this.C.r;for(let c=u.length;c--;){const d=u[c];if(!d.visible&&d!==h)continue;const f=d.actualBounds,p=this.naturalBounds;if(a&&(f.x>p.width||f.y>p.height||f.x+f.width<0||f.y+f.height<0))continue;if(d.an()){const i=d.T;o.set(t).Oe(i),l.set(e).Oe(i)}else o.set(t),l.set(e);let g=d;const m=d instanceof qt?d:null;(null!==m?m.SL(o,l,i,n,s,r):g.bA(o,l,s))&&(null!==i&&(g=i(g)),null!==g&&(null===n||n(g))&&r.add(g))}y.e(o),y.e(l)}return s?c:d}return!1}E2(t){let e=null;if(t instanceof Jt){e=t.spot1,e===w.Default&&(e=null);const i=t.geometry;null!==i&&null===e&&(e=i.spot1)}return null===e&&(e=w.TopLeft),e}U2(t){let e=null;if(t instanceof Jt){e=t.spot2,e===w.Default&&(e=null);const i=t.geometry;null!==i&&null===e&&(e=i.spot2)}return null===e&&(e=w.BottomRight),e}add(...t){for(let e=0;e<t.length;e++)this.insertAt(this.C.count,t[e]);return this}elt(t){return this.C.elt(t)}insertAt(t,i){i instanceof ce&&e.o("Cannot add a Part to a Panel: "+i+"; use a Panel instead"),(this===i||this.isContainedBy(i))&&(this===i&&e.o("Cannot make a Panel contain itself: "+this.toString()),e.o("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+i.toString()));const n=i.panel;if(null!==n&&n!==this&&e.o("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+i.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.j===qt.Grid&&!(i instanceof Jt)&&e.o("Can only add Shapes to a Grid Panel, not: "+i),this.j===qt.Graduated&&!(i instanceof Jt||i instanceof ie)&&e.o("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+i),i.Pa(this),i.Wr=null,null!==this.itemArray){const t=i.data;e.K(t)&&(null===this.Ks&&(this.Ks=new m),this.Ks.set(t,i))}const s=this.C;let r=-1;if(n===this){let o=-1;const a=this.C.r,l=a.length;for(let t=0;t<l;t++)if(a[t]===i){o=t;break}if(-1!==o){if(o===t||o+1>=s.count&&t>=s.count)return;s.removeAt(o),r=o}else e.o("element "+i.toString()+" has panel "+n.toString()+" but is not contained by it.")}(t<0||t>s.count)&&(t=s.count),s.insertAt(t,i),(0===t||i.isPanelMain)&&(this.Zr=null),this.To()||this.c(),i.c(!1),(null!==i.portId||i instanceof qt&&!0===i.fn)&&(this.fn=!0),this.ss=null,this.isEnabledObject()||this.i1(i,!1);const o=this.part;if(null!==o){o.L0(),o.cf(),this.fn&&o instanceof ge&&(o.fn=!0),o.fn&&o instanceof ge&&(o.ne=null);const e=this.diagram;if(null!==e&&e.undoManager.isUndoingRedoing)return;-1!==r&&o.raiseChangedEvent(4,"elements",this,i,null,r,null),o.raiseChangedEvent(3,"elements",this,null,i,null,t)}}get fn(){return!!(8388608&this.n)}set fn(t){!!(8388608&this.n)!==t&&(this.n=8388608^this.n)}p2(){return!!(16777216&this.n)}K2(t){t?this.n|=16777216:this.n&=-16777217}Tv(t){t.Pa(this),t.Wr=null;const e=this.C,i=e.count;e.insertAt(i,t);const n=this.part;if(null!==n){n.L0(),null!==t.portId&&n instanceof ge&&(n.fn=!0);const e=this.diagram;if(null!==e&&e.undoManager.isUndoingRedoing)return;n.raiseChangedEvent(3,"elements",this,null,t,null,i)}}ZR(t){const e=this.C.r,i=e.length;let n=-1;for(let s=0;s<i;s++)if(e[s]===t){n=s;break}return n}remove(t){const e=this.C.r,i=e.length;let n=-1;for(let s=0;s<i;s++)if(e[s]===t){n=s;break}-1!==n&&this.te(n,!0)}removeAt(t){t>=0&&this.te(t,!0)}te(t,i){const n=this.C,s=n.elt(t);if(s.Wr=null,s.Pa(null),null!==this.Ks){const t=s.data;e.K(t)&&this.Ks.delete(t)}n.removeAt(t),this.ue(!1),this.c(),this.Zr===s&&(this.Zr=null),this.ss=null;const r=this.part;if(null!==r){r.L0(),r.cf(),r.invalidateAdornments(),r instanceof ge&&(s instanceof qt?s.walkVisualTreeFrom(s,((t,e)=>r.C2(e,i))):r.C2(s,i));const e=this.diagram;if(null!==e&&e.undoManager.isUndoingRedoing)return;r.raiseChangedEvent(4,"elements",this,s,null,t,null)}}get Xe(){return null===this.F&&(this.F=new Gt),this.F.Xe}get rowCount(){return null===this.F?0:this.Xe.length}getRowDefinition(t){t<0&&e.W(t,">= 0",qt,"getRowDefinition:idx"),t=Math.round(t);const i=this.Xe;if(void 0===i[t]){const e=new Kt;e.Pa(this),e.isRow=!0,e.index=t,i[t]=e,this.raiseChangedEvent(3,"rowdefs",this,null,e,null,t)}return i[t]}removeRowDefinition(t){if(t<0&&e.W(t,">= 0",qt,"removeRowDefinition:idx"),0===this.rowCount)return;t=Math.round(t);const i=this.Xe,n=i[t];if(n){i[t]=void 0;let e=i.length-1;for(;e>=0&&void 0===i[e--];)i.length--;this.raiseChangedEvent(4,"rowdefs",this,n,null,t,null),this.c()}}ZL(t,e){const i=this.Xe;if(!(t<0)){if(i[t]=e instanceof Kt?e:void 0,!e){let t=i.length-1;for(;t>=0&&void 0===i[t--];)i.length--}this.c()}}get Ye(){return null===this.F&&(this.F=new Gt),this.F.Ye}get columnCount(){return null===this.F?0:this.Ye.length}getColumnDefinition(t){t<0&&e.W(t,">= 0",qt,"getColumnDefinition:idx"),t=Math.round(t);const i=this.Ye;if(void 0===i[t]){const e=new Kt;e.Pa(this),e.isRow=!1,e.index=t,i[t]=e,this.raiseChangedEvent(3,"coldefs",this,null,e,null,t)}return i[t]}removeColumnDefinition(t){if(t<0&&e.W(t,">= 0",qt,"removeColumnDefinition:idx"),0===this.columnCount)return;t=Math.round(t);const i=this.Ye,n=i[t];if(n){i[t]=void 0;let e=i.length-1;for(;e>=0&&void 0===i[e--];)i.length--;this.raiseChangedEvent(4,"coldefs",this,n,null,t,null),this.c()}}QL(t,e){const i=this.Ye;if(!(t<0)){if(i[t]=e instanceof Kt?e:void 0,!e){let t=i.length-1;for(;t>=0&&void 0===i[t--];)i.length--}this.c()}}addRowColumnDefinition(t){let e=null;return t.isRow?e=this.getRowDefinition(t.index):t.isRow||(e=this.getColumnDefinition(t.index)),e&&e.jb(t),this}addRowDefinition(t,e){const i=this.getRowDefinition(t);return i&&i.jb(new Kt(e)),this}addColumnDefinition(t,e){const i=this.getColumnDefinition(t);return i&&i.jb(new Kt(e)),this}get rowSizing(){return null!==this.F?this.F.lp:3}set rowSizing(t){const e=this.rowSizing;e!==t&&(null===this.F&&(this.F=new Gt),this.F.lp=t,this.c(),this.t("rowSizing",e,t))}get columnSizing(){return null!==this.F?this.F.hp:3}set columnSizing(t){const e=this.columnSizing;e!==t&&(null===this.F&&(this.F=new Gt),this.F.hp=t,this.c(),this.t("columnSizing",e,t))}get topIndex(){return null!==this.F?this.F.ap:0}set topIndex(t){const i=this.topIndex;i!==t&&((!isFinite(t)||t<0)&&e.o("Panel.topIndex must be greater than zero and a real number, not: "+t),null===this.F&&(this.F=new Gt),this.F.ap=t,this.c(),this.t("topIndex",i,t))}get leftIndex(){return null!==this.F?this.F.cp:0}set leftIndex(t){const i=this.leftIndex;i!==t&&((!isFinite(t)||t<0)&&e.o("Panel.leftIndex must be greater than zero and a real number, not: "+t),null===this.F&&(this.F=new Gt),this.F.cp=t,this.c(),this.t("leftIndex",i,t))}findRowForLocalY(t){if(t<0||this.type!==qt.Table||0===this.rowCount)return-1;let e=0;const i=this.Xe,n=i.length;let s=this.topIndex;for(;s<n;s++){const n=i[s];if(void 0!==n&&(e+=n.total,t<e))return s}return s}findColumnForLocalX(t){if(t<0||this.type!==qt.Table||0===this.columnCount)return-1;let e=0;const i=this.Ye,n=i.length;let s=this.leftIndex;for(;s<n;s++){const n=i[s];if(void 0!==n&&(e+=n.total,t<e))return s}return s}graduatedPointForValue(t,e){if(void 0===e&&(e=new y(NaN,NaN)),this.type!==qt.Graduated)return e.i(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);const i=this.findMainElement();return i.geometry.getPointAlongPath((t-this.graduatedMin)/this.graduatedRange,e),i.T.gt(e)}graduatedValueForPoint(t){if(this.type!==qt.Graduated)return NaN;const e=this.findMainElement();return e.T.$e(t),e.geometry.getFractionForPoint(t)*this.graduatedRange+this.graduatedMin}get data(){return this._t}set data(t){const i=this._t;if(i!==t){const n=this instanceof ce&&!(this instanceof fe);n&&e.s(t,"object",qt,"data"),this.Et(),this._t=t;const s=this.diagram;if(null!==s)if(n)s.partManager.vv(this,i,t);else{const e=this.panel;null!==e&&null!==e.Ks&&(null!==i&&e.Ks.delete(i),null!==t&&e.Ks.set(t,this))}if(this.t("data",i,t),null!==s&&s.undoManager.isUndoingRedoing)return;null!==t&&this.updateTargetBindings()}}get itemIndex(){return this.rd}set itemIndex(t){const e=this.rd;e!==t&&(this.rd=t,this.t("itemIndex",e,t))}get Ys(){return null!==this.p?this.p.Ys:null}set Ys(t){this.Ci!==t&&(null===this.p&&(this.p=new Lt),this.p.Ys=t)}L2(){return null!==this.Ys}TA(){const t=this.Ys;return null!==t&&t.h}freezeBindings(){return this.Et()}Et(){let t=this.Ys;if(null===t)null!==this.data&&e.o("Template cannot have .data be non-null: "+this),this.Ys=t=new l;else if(t.h)return this;const i=new l;this.K2(!1),this.walkVisualTreeFrom(this,((e,n)=>{n.ah();const s=n.Ci;if(null!==s){n.S2(!1);const r=s.iterator;for(;r.next();){const s=r.value;2===s.mode&&n.S2(!0);const o=s.sourceName;if(s.isToObject){"/"===o&&e.K2(!0);const t=s.wA(e,n);null!==t&&(i.add(t),null===t.qn&&(t.qn=new l),t.qn.add(s))}t.add(s)}}if(n instanceof qt&&n.type===qt.Table){if(n.rowCount>0){const e=n.Xe,i=e.length;for(let n=0;n<i;n++){const i=e[n];if(void 0!==i&&null!==i.bs){const e=i.bs.iterator;for(;e.next();){const n=e.value;n.be=i,n.ad=2,n.ff=i.index,t.add(n)}}}}if(n.columnCount>0){const e=n.Ye,i=e.length;for(let n=0;n<i;n++){const i=e[n];if(void 0!==i&&null!==i.bs){const e=i.bs.iterator;for(;e.next();){const n=e.value;n.be=i,n.ad=1,n.ff=i.index,t.add(n)}}}}}}));const n=i.iterator;for(;n.next();){const t=n.value;if(null!==t.qn){t.S2(!0);const e=t.qn.iterator;for(;e.next();){const i=e.value;null===t.Ci&&(t.Ci=new l),t.Ci.add(i)}}t.qn=null}let s=t.iterator;for(;s.next();){const t=s.value;let i=t.be;if(null!==i){t.be=null;const n=t.targetProperty,s=n.indexOf(".");if(s>0&&i instanceof qt){const r=n.substring(0,s),o=n.substring(s+1),a=i.findObject(r);null!==a?(i=a,t.targetProperty=o):(e.ni('Warning: unable to find GraphObject named "'+r+'" for Binding: '+t.toString()),i=null)}if(i instanceof Kt){const e=u.as(i.panel);t.targetId=void 0===e?-1:e,i.panel.jn=t.targetId}else if(i instanceof Dt){const e=u.as(i);t.targetId=void 0===e?-1:e,i.jn=t.targetId}else e.o("Unknown type of binding target: "+i);t.check(i)}}return t.u(),this instanceof ce&&this.ke()&&this.ensureBounds(),this}static FE=!1;copyTemplate(t){void 0===t&&(t=!1);const e=this.copy();return e.Dv((t=>{t instanceof qt&&(t.Ys=null,t._t=null);const e=t.Ci;null!==e&&(t.Ci=null,e.each((e=>t.bind(e.copy()))));const i=t.ws;null!==i&&(t.ws=null,i.each((e=>t.trigger(e.value.copy()))))})),t&&e.Et(),e}updateTargetBindings(t){const e=this.Ys;if(null===e)return;void 0===t&&(t="");const i=this.diagram?.model,n=e.iterator;for(;n.next();){const e=n.value,s=this.GA(e,t);if(null===s)continue;const{data:r,elt:o}=s;e.isToTheme&&null===this.diagram||void 0!==o&&e.updateTarget(o,r,void 0,i)}}Do(){if(null!==this.diagram)if(this.L2()){const t=this.diagram.model,e=this.Ys.iterator;for(;e.next();){const i=e.value;if(!i.isToTheme)continue;const n=this.GA(i);if(null===n)continue;const{data:s,elt:r}=n;void 0!==r&&i.updateTarget(r,s,void 0,t)}}else{const t=this.C.r,e=t.length;for(let i=0;i<e;i++)t[i].Do()}}GA(t,e=""){const i=t.sourceProperty;if(""!==e&&""!==i&&i!==e)return null;const n=t.targetProperty;if(null===t.converter&&""===n)return null;let s=this.data;const r=t.sourceName;if(t.isToObject){if(s=this.yA(r),null===s)return null}else if(t.isToModel){const t=this.diagram;if(null===t)return null;s=t.model.modelData}let o=this;const a=t.targetId;if(-1!==a){if(o=this.d0(a),null===o)return null}else null!==t.be&&(o=t.be);"/"===r?s=o.part:"."===r?s=o:".."===r&&(s=o.panel);const l=t.ad;if(0!==l){if(!(o instanceof qt))return null;1===l?o=o.getColumnDefinition(t.ff):2===l&&(o=o.getRowDefinition(t.ff))}return{data:s,elt:o}}get itemArray(){return this.yh}set itemArray(t){const e=this.yh;if(e!==t||null!==t&&this.Ov(t)){const i=this.diagram;if(e!==t&&(null!==i&&null!==e&&i.partManager.EM(this,i),this.yh=t,null!==i&&null!==t&&i.partManager.IM(this,i)),this.t("itemArray",e,t),null!==i&&i.undoManager.isUndoingRedoing)return;this.HA(e,t)}}findItemPanelForData(t){return null==t||null===this.Ks?null:(e.ec(t,qt,"findItemPanelForData"),this.Ks.get(t))}Ov(t){const e=this.C.r,i=e.length,n=t.length;let s=0,r=null;for(;s<i&&(r=e[s],!(r instanceof qt)||null===r.data);)s++,r=e[s];if(i-s!==n)return!0;if(null===r)return n>0;let o=0;for(;s<i&&o<n;){if(r=e[s],!(r instanceof qt)||r.data!==t[o])return!0;s++,o++}return!1}rp(){if(this.type===qt.Spot||this.type===qt.Auto)return Math.min(this.C.length,1);if(this.type===qt.Link){const t=this.C,e=t.length;let i=0;for(;i<e;i++){const e=t.elt(i);if(!(e instanceof Jt&&e.isPanelMain))return i}return i}if(this.type===qt.Table&&this.C.length>0){const t=this.C.elt(0);if(t.isPanelMain&&t instanceof qt&&t.Jr())return 1}return 0}rebuildItemElements(){const t=this.rp();for(;this.C.length>t;)this.te(this.C.length-1,!1);this.HA(null,this.itemArray)}HA(t,e){const i=this.rp(),n=e;if(null!==n&&0!==n.length)if(this.C.length<=i){const t=n.length;for(let e=0;e<t;e++)this.e1(n[e],e,!0)}else{let t=i;for(let e=0;e<n.length;e++,t++){const i=n[e],s=t<this.C.length?this.C.elt(t):null;if(s instanceof qt){if(s.data!==i){const n=this.G2(s.data,e),r=this.G2(i,e);let o=r!==n;if(!o){const t=this.H2(s.data,e,n);o=this.H2(i,e,r)!==t}o?(this.te(t,!1),this.e1(i,e,!1)):s.data=i}}else this.e1(i,e,!1)}for(;t<this.C.length;)this.te(t,!1);this.Zr=null,this.j2(i,0),this.To()||this.c(),this.ss=null,this.isEnabledObject()||this.i1(this,!1);const e=this.part;null!==e&&(e.L0(),e.cf(),this.fn&&e instanceof ge&&(e.fn=!0),e.fn&&e instanceof ge&&(e.ne=null))}else for(;this.C.length>i;)this.te(this.C.length-1,!1)}e1(t,i,n){if(null==t||i<0)return null;const s=this.G2(t,i),r=this.H2(t,i,s);if(null!==r){r.Et();const s=r.copy();if(s.p2()){const t=this.findBindingPanel();null!==t&&t.K2(!0)}e.K(t)&&(null===this.Ks&&(this.Ks=new m),this.Ks.set(t,s));const o=i+this.rp();return this.insertAt(o,s),n&&(s._t=t,this.j2(o,i),s._t=null),s.data=t,s}return null}Iv(t){if(t<0)return;const e=t+this.rp();this.te(e,!0),this.j2(e,t)}j2(t,e){const i=this.C;let n=t,s=e;for(;n<i.length;){const t=i.elt(n);t instanceof qt&&t.Ev(n,s),n++,s++}}Ev(t,e){this.type===qt.TableRow?this.row=t:this.type===qt.TableColumn&&(this.column=t),this.itemIndex=e}Fv(){return null!==this.yh||null!==this.itemTemplateMap}get itemTemplate(){return null===this.itemTemplateMap?null:this.itemTemplateMap.get("")}set itemTemplate(t){if(null===this.itemTemplateMap){if(null===t)return;this.itemTemplateMap=new m}const i=this.itemTemplateMap.get("");if(i!==t){(t instanceof ce||t.isPanelMain)&&e.o("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.set("",t),this.t("itemTemplate",i,t);const n=this.diagram;if(null!==n&&n.undoManager.isUndoingRedoing)return;this.rebuildItemElements()}}get itemTemplateMap(){return null!==this.p?this.p.Y0:null}set itemTemplateMap(t){const e=this.itemTemplateMap;if(e!==t){const i=t.iterator;for(;i.next();){i.value}this.Gt().Y0=t,this.t("itemTemplateMap",e,t);const n=this.diagram;if(null!==n&&n.undoManager.isUndoingRedoing)return;this.rebuildItemElements()}}get itemCategoryProperty(){return null!==this.p?this.p.K0:"category"}set itemCategoryProperty(t){const i=this.itemCategoryProperty;i!==t&&("string"!=typeof t&&!e.it(t)&&e.Zi(t,"string or function",qt,"itemCategoryProperty"),this.Gt().K0=t,this.t("itemCategoryProperty",i,t))}G2(t,i){if(null===t)return"";const n=this.itemCategoryProperty;let s="";if(e.it(n))s=n(t);else{if("string"!=typeof n||!e.K(t))return"";{if(""===n)return"";const e=this.diagram,i=null!==e?e.model:null;s=i?i.yt(t,n):He.yt(t,n)}}return void 0===s?"":"string"==typeof s?s:void e.o("Panel.getCategoryForItemData found a non-string category for "+t+": "+s)}static jA=!1;static qA=null;H2(t,i,n){const s=this.itemTemplateMap;let r=null;return null!==s&&(r=s.get(n)),null===r&&(null!==s&&(r=s.get("")),null===r&&(qt.jA||(qt.jA=!0,e.ni('No item template Panel found for category "'+n+'" on '+this),e.ni("  Using default item template."),qt.qA=(new qt).add((new ie).bind("text","",e.toString).theme("stroke","text"))),r=qt.qA)),r}get af(){return!!(1048576&this.n)}set af(t){const i=!!(1048576&this.n);i!==t&&(e.s(t,"boolean",qt,"isAtomic"),this.n=1048576^this.n,this.t("isAtomic",i,t))}get isClipping(){return!!(2097152&this.n)}set isClipping(t){const e=!!(2097152&this.n);e!==t&&(this.Qc(),this.n=2097152^this.n,this instanceof Ae&&(this.si=null),this.c(),this.t("isClipping",e,t))}get isOpposite(){return!!(33554432&this.n)}set isOpposite(t){const e=!!(33554432&this.n);e!==t&&(this.n=33554432^this.n,this.c(),this.t("isOpposite",e,t))}get isEnabled(){return!!(4194304&this.n)}set isEnabled(t){const e=!!(4194304&this.n);if(e!==t){const i=null===this.panel||this.panel.isEnabledObject();this.n=4194304^this.n,this.t("isEnabled",e,t);const n=this.diagram;if(null!==n&&n.undoManager.isUndoingRedoing)return;i&&this.i1(this,t)}}i1(t,e){const i=t.enabledChanged;if(null!==i&&i(t,e),t instanceof qt){const i=t.C.r,n=i.length;for(let t=0;t<n;t++){const n=i[t];e&&n instanceof qt&&!n.isEnabled||this.i1(n,e)}}}get alignmentFocusName(){return this.to}set alignmentFocusName(t){const e=this.to;e!==t&&(this.to=t,this.c(),this.t("alignmentFocusName",e,t))}static definePanelLayout(t,e){Ut.dn(t,e)}static isBuilderDefined(t){return Ut.es.has(t)}static Position=Ut.es.get("Position");static Horizontal=Ut.es.get("Horizontal");static Vertical=Ut.es.get("Vertical");static Spot=Ut.es.get("Spot");static Auto=Ut.es.get("Auto");static Table=Ut.es.get("Table");static Viewbox=Ut.es.get("Viewbox");static TableRow=Ut.es.get("TableRow");static TableColumn=Ut.es.get("TableColumn");static Link=Ut.es.get("Link");static Grid=Ut.es.get("Grid");static Graduated=Ut.es.get("Graduated")}qt.definePanelLayout=qt.definePanelLayout;class $t{ep;sp;np;op;xs;Ke;ss;Pe;constructor(){this.ep=0,this.sp=100,this.np=10,this.op=0,this.xs=null,this.Ke=null,this.ss=null,this.Pe=null}copy(){const t=new $t;return t.ep=this.ep,t.sp=this.sp,t.np=this.np,t.op=this.op,t.xs=this.xs,t.Ke=this.Ke,t.ss=this.ss,t.Pe=this.Pe,t}}class Wt{ld;hd;Yc;W0;constructor(){this.ld=v.xC,this.hd=y.xo,this.Yc=v.yw,this.W0=[]}copy(){const t=new Wt;return t.ld=this.ld.copy(),t.hd=this.hd.copy(),t.Yc=this.Yc.copy(),t.W0=this.W0,t}}class Gt{Xe;Ye;lp;hp;ap;cp;J0;Z0;$0;Q0;tp;_0;ip;ph;constructor(){this.Xe=[],this.Ye=[],this.lp=3,this.hp=3,this.ap=0,this.cp=0,this.J0=b.Rg,this.Z0=1,this.$0=null,this.Q0=null,this.tp=1,this._0=null,this.ip=null,this.ph=null}copy(t){const e=new Gt,i=this.Xe,n=i.length,s=e.Xe;for(let e=0;e<n;e++){if(void 0===i[e])continue;const n=i[e].copy();n.Pa(t),s[e]=n}const r=this.Ye,o=r.length,a=e.Ye;for(let e=0;e<o;e++){if(void 0===r[e])continue;const i=r[e].copy();i.Pa(t),a[e]=i}return e.lp=this.lp,e.hp=this.hp,e.ap=this.ap,e.cp=this.cp,e.J0=this.J0.P(),e.Z0=this.Z0,e.$0=this.$0,e.Q0=this.Q0,e.tp=this.tp,e._0=this._0,e.ip=this.ip,e.ph=this.ph,e}}var Xt=(t=>(t[t.Default=1]="Default",t[t.None=2]="None",t[t.ProportionalExtra=3]="ProportionalExtra",t))(Xt||{});class Kt{Vs;fp;At;Ca;La;hi;at;cd;$n;Qr;fd;ud;Aa;Lt;dd;bs;_;Ai;de;constructor(t){u.Gi(this),this.Vs=null,this.fp=!0,this.At=0,this.de=NaN,this.Ca=0,this.La=1/0,this.hi=w.Default,this._=0,this.Ai=0,this.at=0,this.bs=null,this.cd=1,this.$n=1,this.Qr=null,this.fd=null,this.ud=NaN,this.Aa=null,this.Lt=null,this.dd=!1,t&&(Object.assign(this,t),void 0!==t.column?(this.isRow=!1,this.index=t.column):void 0!==t.row&&(this.isRow=!0,this.index=t.row))}copy(){const t=new Kt;return t.fp=this.fp,t.At=this.At,t.de=this.de,t.Ca=this.Ca,t.La=this.La,t.hi=this.hi,t._=this._,t.Ai=this.Ai,t.at=this.at,t.$n=this.$n,t.cd=this.cd,null===this.Qr?t.Qr=null:t.Qr=this.Qr.P(),t.fd=this.fd,t.ud=this.ud,t.Aa=null,null!==this.Aa&&(t.separatorDashArray=this.Aa.slice()),t.Lt=this.Lt,t.dd=this.dd,t.bs=this.bs,t}jb(t){t.isRow?void 0!==t.height&&(this.height=t.height):void 0!==t.width&&(this.width=t.width),void 0!==t.minimum&&(this.minimum=t.minimum),void 0!==t.maximum&&(this.maximum=t.maximum),void 0!==t.alignment&&(this.alignment=t.alignment),void 0!==t.stretch&&(this.stretch=t.stretch),void 0!==t.sizing&&(this.sizing=t.sizing),void 0!==t.separatorPadding&&(this.separatorPadding=t.separatorPadding),void 0!==t.separatorStroke&&(this.separatorStroke=t.separatorStroke),void 0!==t.separatorStrokeWidth&&(this.separatorStrokeWidth=t.separatorStrokeWidth),void 0!==t.separatorDashArray&&(this.Aa=t.separatorDashArray),void 0!==t.background&&(this.background=t.background),void 0!==t.coversSeparators&&(this.coversSeparators=t.coversSeparators),void 0!==t.bs&&(this.bs=t.bs)}oi(t){t in Xt?this.sizing=t:e.er(this,t)}toString(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+u.as(this)}static Default=1;static None=2;static ProportionalExtra=3;Pa(t){this.Vs=t}computeEffectiveSpacingTop(t){let e=0;const i=this.Vs;if(this.index!==t){let t=this.separatorStroke;null===t&&null!==i&&(t=this.isRow?i.defaultRowSeparatorStroke:i.defaultColumnSeparatorStroke),null!==t&&(e=this.separatorStrokeWidth,isNaN(e)&&(e=null!==i?this.isRow?i.defaultRowSeparatorStrokeWidth:i.defaultColumnSeparatorStrokeWidth:0))}let n=this.Qr;if(null===n){if(null===i)return e;n=i.defaultSeparatorPadding}return e+(this.isRow?n.top:n.left)}computeEffectiveSpacing(){let t=0;const e=this.Vs;let i=0;const n=this.isRow;if(null!==e&&e.type===qt.Table){const t=n?e.Xe.length:e.Ye.length;for(let s=0;s<t;s++){const t=n?e.Xe[s]:e.Ye[s];if(void 0!==t&&0!==t._){i=t.index;break}}}if(this.index!==i){let i=this.separatorStroke;null===i&&null!==e&&(i=n?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==i&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?n?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))}let s=this.Qr;if(null===s){if(null===e)return t;s=e.defaultSeparatorPadding}return t+(this.isRow?s.top+s.bottom:s.left+s.right)}t(t,e,i,n,s){const r=this.Vs;if(null!==r&&(r.raiseChangedEvent(2,t,this,e,i,n,s),null!==this.bs)){const e=r.diagram;if(null!==e&&!e.fe){const e=r.findBindingPanel();if(null!==e){const i=e.data;if(null!==i){const n=this.bs.iterator;for(;n.next();)n.value.updateSource(this,i,t,e)}}}}}get panel(){return this.Vs}get isRow(){return this.fp}set isRow(t){this.fp=t}get index(){return this.At}set index(t){this.At=t}get height(){return this.de}set height(t){const i=this.de;i!==t&&(t<0&&e.W(t,">= 0",Kt,"height"),this.de=t,this.actual=this._,null!==this.panel&&this.panel.c(),this.t("height",i,t))}get width(){return this.de}set width(t){const i=this.de;i!==t&&(t<0&&e.W(t,">= 0",Kt,"width"),this.de=t,this.actual=this._,null!==this.panel&&this.panel.c(),this.t("width",i,t))}get minimum(){return this.Ca}set minimum(t){const i=this.Ca;i!==t&&((t<0||!isFinite(t))&&e.W(t,">= 0",Kt,"minimum"),this.Ca=t,this.actual=this._,null!==this.panel&&this.panel.c(),this.t("minimum",i,t))}get maximum(){return this.La}set maximum(t){const i=this.La;i!==t&&(t<0&&e.W(t,">= 0",Kt,"maximum"),this.La=t,this.actual=this._,null!==this.panel&&this.panel.c(),this.t("maximum",i,t))}get alignment(){return this.hi}set alignment(t){const e=this.hi;e.equals(t)||(this.hi=t.P(),null!==this.panel&&this.panel.c(),this.t("alignment",e,t))}get stretch(){return this.$n}set stretch(t){const e=this.$n;e!==t&&(this.$n=t,null!==this.panel&&this.panel.c(),this.t("stretch",e,t))}get separatorPadding(){return this.Qr}set separatorPadding(t){"number"==typeof t&&(t=new b(t));const e=this.Qr;(null===t||null===e||!e.equals(t))&&(null!==t&&(t=t.P()),this.Qr=t,null!==this.panel&&this.panel.c(),this.t("separatorPadding",e,t))}get separatorStroke(){return this.fd}set separatorStroke(t){const e=this.fd;e!==t&&(null!==t&&Ht.Qu(t,"RowColumnDefinition.separatorStroke"),t instanceof Ht&&t.u(),this.fd=t,null!==this.panel&&this.panel.c(),this.t("separatorStroke",e,t))}get separatorStrokeWidth(){return this.ud}set separatorStrokeWidth(t){const e=this.ud;e!==t&&(this.ud=t,null!==this.panel&&this.panel.c(),this.t("separatorStrokeWidth",e,t))}get separatorDashArray(){return this.Aa}set separatorDashArray(t){const i=this.Aa;if(i!==t){if(null!==t&&!Array.isArray(t)&&e.Zi(t,"Array",Kt,"separatorDashArray:value"),null!==t){const n=t.length;let s=0;for(let i=0;i<n;i++){const n=t[i];("number"!=typeof n||!(n>=0)||!isFinite(n))&&e.o("separatorDashArray value "+n+" at index "+i+" must be a positive number or zero."),s+=n}if(0===s){if(null===i)return;t=null}}this.Aa=t,null!==this.panel&&this.panel.S(),this.t("separatorDashArray",i,t)}}get background(){return this.Lt}set background(t){const e=this.Lt;e!==t&&(null!==t&&Ht.Qu(t,"RowColumnDefinition.background"),t instanceof Ht&&t.u(),this.Lt=t,null!==this.panel&&this.panel.S(),this.t("background",e,t))}get coversSeparators(){return this.dd}set coversSeparators(t){const i=this.dd;i!==t&&(e.s(t,"boolean",Kt,"coversSeparators"),this.dd=t,null!==this.panel&&this.panel.S(),this.t("coversSeparators",i,t))}get sizing(){return this.cd}set sizing(t){const e=this.cd;e!==t&&(this.cd=t,null!==this.panel&&this.panel.c(),this.t("sizing",e,t))}Qb(){if(1===this.sizing){const t=this.Vs;return this.isRow?t.rowSizing:t.columnSizing}return this.sizing}get actual(){return this._}set actual(t){isNaN(this.de)?this._=Math.max(Math.min(this.La,t),this.Ca):this._=Math.max(Math.min(this.La,this.de),this.Ca)}get measured(){return this.Ai}set measured(t){this.Ai=t}get total(){return this._+this.computeEffectiveSpacing()}get position(){return this.at}set position(t){this.at=t}bind(t,e,i,n){return this.sf(t,e,i,n),this}bindTwoWay(t,e,i,n){const s=this.sf(t,e,i,n);return void 0===n&&s.makeTwoWay(),this}theme(t,e,i,n,s){return this.gh(t,e,i,n,s),this}themeData(t,e,i,n,s){return this.gh(t,e,i,n,s).ofData(),this}themeObject(t,e,i,n,s,r){return this.gh(t,e,i,n,s).ofObject(r),this}themeModel(t,e,i,n,s){return this.gh(t,e,i,n,s).ofModel(),this}sf(t,e,i,n){let s;return s="string"==typeof t?new je(t,e,i,n):t,this.X0(s),s}gh(t,e,i,n,s){let r;return r="string"==typeof t?new ze(t,e,i,n,s):t,this.X0(r),r}X0(t){t.be=this;const i=this.panel;if(null!==i){const n=i.findBindingPanel();null!==n&&n.TA()&&e.o("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+i)}null===this.bs&&(this.bs=new l),this.bs.add(t)}}class Jt extends Dt{ot;ks;gd;Ta;Hi;Vo;Io;Ht;md;pd;G;constructor(t,e){super(),this.ot=null,this.ks=null,this.gd="None",this.Ta="black",this.Hi="black",this.Vo=1,this.Io=null,this.Ht=null,this.md=NaN,this.pd=NaN,this.G=null,"string"==typeof t?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}cloneProtected(t){super.cloneProtected(t),t.ot=this.ot,t.ks=this.ks,t.gd=this.gd,t.Ta=this.Ta,t.Hi=this.Hi,t.Vo=this.Vo,null!==this.Io&&(t.Io=this.Io.slice()),null!==this.Ht&&(this.Ht.fi?t.Ht=this.Ht:t.Ht=this.Ht.copy()),t.md=this.md,t.pd=this.pd,null!==this.G&&(t.G=this.G.copy())}Da(){return null===this.Ht?this.Ht=new Zt:this.Ht.fi&&(this.Ht=this.Ht.copy()),this.Ht}ah(){super.ah(),null!==this.Ht&&(this.Ht.fi=!0)}oi(t){t in T?this.geometryStretch=t:super.oi(t)}toString(){return"Shape("+("None"!==this.figure?this.figure:"None"!==this.toArrow?this.toArrow:this.fromArrow)+")#"+u.as(this)}Uv(t,i){const n=this.pathPattern;n.ht(1/0,1/0);const s=n.measuredBounds;n.Bt(0,0,s.width,s.height);const r=this.geometry;t.save(),t.beginPath();const o=e.et();if(1===r.type)o.push(r.startX),o.push(r.startY),o.push(r.endX),o.push(r.endY),this.yd(t,i,o,n);else if(4===r.type){const s=r.figures.iterator;for(;s.next();){const r=s.value;o.length=0,o.push(r.startX),o.push(r.startY);let a=r.startX,l=r.startY,h=a,u=l;const c=r.segments.r,d=c.length;for(let s=0;s<d;s++){const d=c[s];switch(d.type){case 1:this.yd(t,i,o,n),o.length=0,o.push(d.endX),o.push(d.endY),a=d.endX,l=d.endY,h=a,u=l;break;case 2:o.push(d.endX),o.push(d.endY),a=d.endX,l=d.endY;break;case 3:S.vn(a,l,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.5,o),a=d.endX,l=d.endY;break;case 4:S.Og(a,l,d.point1X,d.point1Y,d.endX,d.endY,.5,o),a=d.endX,l=d.endY;break;case 5:{const t=d.bo(r),e=t.length;if(0===e){o.push(d.centerX),o.push(d.centerY),a=d.centerX,l=d.centerY;break}for(let i=0;i<e;i++){const e=t[i];S.vn(a,l,e[2],e[3],e[4],e[5],e[6],e[7],.5,o),a=e[6],l=e[7]}break}case 6:{const t=d.Uh(r,a,l),e=t.length;if(0===e){o.push(d.endX),o.push(d.endY),a=d.endX,l=d.endY;break}for(let i=0;i<e;i++){const e=t[i];S.vn(a,l,e[2],e[3],e[4],e[5],e[6],e[7],.5,o),a=e[6],l=e[7]}break}default:e.o("Segment not of valid type: "+d.type)}d.isClosed&&(o.push(h),o.push(u),this.yd(t,i,o,n))}this.yd(t,i,o,n)}}else if(2===r.type)o.push(r.startX),o.push(r.startY),o.push(r.endX),o.push(r.startY),o.push(r.endX),o.push(r.endY),o.push(r.startX),o.push(r.endY),o.push(r.startX),o.push(r.startY),this.yd(t,i,o,n);else if(3===r.type){const e=new P;e.startX=r.endX,e.startY=(r.startY+r.endY)/2;const s=new D(5);s.startAngle=0,s.sweepAngle=360,s.centerX=(r.startX+r.endX)/2,s.centerY=(r.startY+r.endY)/2,s.radiusX=Math.abs(r.startX-r.endX)/2,s.radiusY=Math.abs(r.startY-r.endY)/2,e.add(s);const a=s.bo(e),l=a.length;if(0===l)o.push(s.centerX),o.push(s.centerY);else{let t=e.startX,i=e.startY;for(let e=0;e<l;e++){const n=a[e];S.vn(t,i,n[2],n[3],n[4],n[5],n[6],n[7],.5,o),t=n[6],i=n[7]}}this.yd(t,i,o,n)}e.J(o),t.restore(),t.clearContextCache(!1)}Bv(t){let e=t.measuredBounds.width;return t instanceof Jt&&(e-=t.strokeWidth),e<1&&(e=1),e}yd(t,i,n,s){const r=n.length;if(r<4)return;const o=s.measuredBounds,a=Math.max(1,o.width),l=o.height;let h=n[0],u=n[1],c=0,d=0,f=0,p=0,g=0,m=0,y=0,v=0;const x=e.et();for(let t=2;t<r;t+=2)c=n[t],d=n[t+1],f=c-h,p=d-u,0===f&&(f=.001),g=p/f,m=Math.atan2(p,f),y=Math.sqrt(f*f+p*p),x.push([f,m,g,y]),v+=y,h=c,u=d;h=n[0],u=n[1];const b=this.Bv(s);let w=b;const k=a/2;let S=0!==k,C=0,M=x[C];f=M[0],m=M[1],g=M[2],y=M[3];let T=0;for(;v>=.1;){if(0===T&&(S?(w=b,w-=k,v-=k,S=!1):w=b,0===w&&(w=1)),w>v)return w=v,void e.J(x);w>y?(T=w-y,w=y):T=0;let n=Math.sqrt(w*w/(1+g*g));if(f<0&&(n=-n),h+=n,u+=g*n,t.translate(h,u),t.rotate(m),t.translate(-a/2,-l/2),0===T&&s.dh(t,i),t.translate(a/2,l/2),t.rotate(-m),t.translate(-h,-u),v-=w,y-=w,0!==T){if(C++,C===x.length)return void e.J(x);M=x[C],f=M[0],m=M[1],g=M[2],y=M[3],w=T}}e.J(x)}dh(t,e){const i=t instanceof Ft;let n=this.Hi;const s=this.Ta;if(null===n&&null===s)return;const r=this.ot;if(null===r)return;t.commitTransform();const o=this.actualBounds,a=this.naturalBounds;null!==s&&this.rn(t,s,!0,!1,a,o);const l=this.part;let h=this.Vo;null!==n&&0===h&&null!==l&&(this.isPanelMain||l.findMainElement()===this)&&(h=l.Vv()),0===h&&(n=null),null!==n&&0!==h&&(this.rn(t,n,!1,!1,a,o),t.lineWidth=h,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit);let u=!1;l&&e.getRenderingHint("drawShadows")&&(u=l.isShadowed),!1===t.$r&&(u=!1);let c=!0;null!==n&&(null===s||"transparent"===s)&&(c=!1);let d=!1;const f=this.strokeDashArray;if(null!==f&&(d=!0,t.enableDash(f,this.strokeDashOffset)),1===r.type)t.beginPath(),t.moveTo(r.startX,r.startY),t.lineTo(r.endX,r.endY),null!==n&&t.strokeContext(),t.endPath();else if(2===r.type){const e=r.startX,i=r.startY,o=r.endX,a=r.endY,l=Math.min(e,o),h=Math.min(i,a),d=Math.abs(o-e),f=Math.abs(a-i);t.beginPath(),t.rect(l,h,d,f),null!==s&&t.fillContext(s,!1,null),null!==n&&(c&&u&&t.shadowsOff(),t.strokeContext(),c&&u&&t.shadowsOn()),t.endPath()}else if(3===r.type){const e=r.startX,i=r.startY,o=r.endX,a=r.endY,l=Math.abs(o-e)/2,h=Math.abs(a-i)/2,d=Math.min(e,o)+l,f=Math.min(i,a)+h;t.beginPath(),t.moveTo(d,f-h),t.bezierCurveTo(d+S.Rn*l,f-h,d+l,f-S.Rn*h,d+l,f),t.bezierCurveTo(d+l,f+S.Rn*h,d+S.Rn*l,f+h,d,f+h),t.bezierCurveTo(d-S.Rn*l,f+h,d-l,f+S.Rn*h,d-l,f),t.bezierCurveTo(d-l,f-S.Rn*h,d-S.Rn*l,f-h,d,f-h),t.closePath(),null!==s&&t.fillContext(s,!1,null),null!==n&&(c&&u&&t.shadowsOff(),t.strokeContext(),c&&u&&t.shadowsOn()),t.endPath()}else if(4===r.type){const e=r.figures,o=e.length;for(let r=0;r<o;r++){const o=e.r[r];i?this.buildPath(t,o):null===o.Ee&&(o.Ee=new Path2D,this.buildPath(o.Ee,o));const a=o.isFilled;u?o.isShadowed?(!0===a&&"transparent"!==s&&null!==s&&t.fillContext(s,o.isEvenOdd,o.Ee),null!==n&&(a&&c&&t.shadowsOff(),t.stroke(o.Ee),a&&c&&t.shadowsOn())):(t.shadowsOff(),a&&"transparent"!==s&&null!==s&&t.fillContext(s,o.isEvenOdd,o.Ee),null!==n&&t.stroke(o.Ee),t.shadowsOn()):(a&&null!==s&&t.fillContext(s,o.isEvenOdd,o.Ee),null!==n&&t.stroke(o.Ee)),t.endPath(r)}}d&&t.disableDash(),null!==this.pathPattern&&this.Uv(t,e)}buildPath(t,e){t instanceof Path2D||t.beginPath(),t.moveTo(e.startX,e.startY);const i=e.segments.r,n=i.length;let s=null;for(let r=0;r<n;r++){const n=i[r];switch(n.type){case 1:t.moveTo(n.endX,n.endY);break;case 2:t.lineTo(n.endX,n.endY);break;case 3:t.bezierCurveTo(n.point1X,n.point1Y,n.point2X,n.point2Y,n.endX,n.endY);break;case 4:t.quadraticCurveTo(n.point1X,n.point1Y,n.endX,n.endY);break;case 5:if(n.radiusX===n.radiusY){const i=null!==s?s.endX:e.startX,r=null!==s?s.endY:e.startY,o=Math.PI/180;t.arc(n.point1X,n.point1Y,n.radiusX,n.startAngle*o,(n.startAngle+n.sweepAngle)*o,n.sweepAngle<0,i,r)}else{const i=n.bo(e),s=i.length;if(0===s){t.lineTo(n.centerX,n.centerY);break}for(let e=0;e<s;e++){const n=i[e];0===e&&t.lineTo(n[0],n[1]),t.bezierCurveTo(n[2],n[3],n[4],n[5],n[6],n[7])}}break;case 6:{let i,r=0,o=0;if(null!==s&&5===s.type){i=s.bo(e);const a=i.length;if(0===a){t.lineTo(n.endX,n.endY);break}const l=i[a-1]||null;null!==l&&(r=l[6],o=l[7])}else r=null!==s?s.endX:e.startX,o=null!==s?s.endY:e.startY;i=n.Uh(e,r,o);const a=i.length;if(0===a){t.lineTo(n.endX,n.endY);break}for(let e=0;e<a;e++){const n=i[e];t.bezierCurveTo(n[2],n[3],n[4],n[5],n[6],n[7])}break}}n.isClosed&&t.closePath(),s=n}}Zc(t,e,i){if(!super.Zc(t,e,i)||null===this.Hi&&null===this.Ta||null===this.ot||null!==this.pathPattern)return!1;const n=this.svg.getElementsByTagName("path");return this.geometry.figures.length===n.length&&(t.currentPath=this.svg,this.dh(t,e),t.currentPath=null,!0)}$u(t){return null!==this.geometry&&this.geometry.figures.length>1||null!==this.pathPattern||super.$u(t)}k2(t,e){if("g"!==t.nodeName)t.setAttributeNS(null,"filter",e);else{const i=t.getElementsByTagName("path");for(let t=0;t<i.length;t++)i[t].setAttributeNS(null,"filter",e)}}getDocumentPoint(t,i){if(void 0===i&&(i=new y),t instanceof w){const n=t;n.isNoSpot()&&e.o("getDocumentPoint Spot must be a real, specific Spot, not: "+n.toString());const s=this.naturalBounds,r=this.strokeWidth;return i.i(n.x*(s.width+r)-r/2+s.x+n.offsetX,n.y*(s.height+r)-r/2+s.y+n.offsetY),this.Us.gt(i),i}return i.set(t),this.Us.gt(i),i}getDocumentBounds(t){void 0===t&&(t=new x);const e=this.naturalBounds,i=this.Us,n=x.V(e.x,e.y,e.width,e.height),s=this.strokeWidth;n.inflate(s/2,s/2);const r=y.V(n.x,n.y).T(i);return t.i(r.x,r.y,0,0),r.i(n.right,n.y).T(i),t.unionNoCheck(r.x,r.y,0,0),r.i(n.right,n.bottom).T(i),t.unionNoCheck(r.x,r.y,0,0),r.i(n.x,n.bottom).T(i),t.unionNoCheck(r.x,r.y,0,0),x.e(n),y.e(r),t}ch(t,i){const n=this.geometry;if(null===n||null===this.fill&&null===this.stroke)return!1;const s=n.bounds;let r=this.strokeWidth/2;1===n.type&&!i&&(r+=2);const o=x.l();if(o.a(s),o.inflate(r+2,r+2),!o.containsPoint(t))return x.e(o),!1;const a=r+1e-4;if(1===n.type){if(null===this.stroke)return!1;const e=(n.startX-n.endX)*(t.x-n.endX)+(n.startY-n.endY)*(t.y-n.endY),i=(n.endX-n.startX)*(t.x-n.startX)+(n.endY-n.startY)*(t.y-n.startY);return!(e<0||i<0)&&(x.e(o),S.vi(n.startX,n.startY,n.endX,n.endY,r,t.x,t.y))}if(2===n.type){const e=n.startX,i=n.startY,s=n.endX,l=n.endY;if(o.x=Math.min(e,s),o.y=Math.min(i,l),o.width=Math.abs(s-e),o.height=Math.abs(l-i),null===this.fill){if(o.inflate(-a,-a),o.containsPoint(t))return x.e(o),!1;o.inflate(a,a)}null!==this.stroke&&o.inflate(r,r);const h=o.containsPoint(t);return x.e(o),h}if(3===n.type){const e=n.startX,i=n.startY,s=n.endX,r=n.endY;let l=Math.min(e,s),h=Math.min(i,r);let u=Math.abs(s-e)/2,c=Math.abs(r-i)/2;if(l=t.x-(l+u),h=t.y-(h+c),null===this.fill){if(u-=a,c-=a,u<=0||c<=0)return x.e(o),!1;if(l*l/(u*u)+h*h/(c*c)<=1)return x.e(o),!1;u+=a,c+=a}return null!==this.stroke&&(u+=a,c+=a),x.e(o),!(u<=0||c<=0)&&l*l/(u*u)+h*h/(c*c)<=1}if(4===n.type)return x.e(o),null===this.fill?n.UC(t.x,t.y,r):n.qk(t,r,this.strokeWidth>1,i);e.o("Unknown Geometry type: "+n.type)}Wu(t,i,n,s){const r=this.desiredSize,o=this.Vo;let a;if(t=Math.max(t,0),i=Math.max(i,0),null!==this.ks)a=this.geometry.bounds;else{const t=this.figure;let i=Jt.q2[t];if(void 0===i){let n=S.In[t];"string"==typeof n&&(n=S.In[n]),e.it(n)?(i=n(null,100,100),Jt.q2[t]=i):e.o("Unsupported Figure: "+t)}a=i.bounds}let l=a.width,h=a.height,u=a.width,c=a.height;switch(this.zs(!0)){case 0:n=0,s=0;break;case 2:u=Math.max(t-o,0),c=Math.max(i-o,0);break;case 5:u=Math.max(t-o,0),s=0;break;case 4:n=0,c=Math.max(i-o,0)}isFinite(r.width)&&(u=r.width),isFinite(r.height)&&(c=r.height);const d=this.maxSize,f=this.minSize;n=Math.max(n-o,f.width),s=Math.max(s-o,f.height),u=Math.min(d.width,u),c=Math.min(d.height,c),u=isFinite(u)?Math.max(n,u):Math.max(l,n),c=isFinite(c)?Math.max(s,c):Math.max(h,s);const p=this.aS();switch(p){case 0:break;case 2:l=u,h=c;break;case 6:{let t=Math.min(u/l,c/h);isFinite(t)||(t=1),l*=t,h*=t;break}default:e.o(p+" is not a valid geometryStretch.")}if(null!==this.ks){0===l&&(l=.001),0===h&&(h=.001);const t=(null!==this.ks?this.ks:this.ot).cF(l,h);this.ot=t}else(null===this.ot||!S.z(this.ot.rc,t-o)||!S.z(this.ot.lc,i-o))&&(this.ot=Jt.zv(this,l,h));a=this.ot.bounds,t===1/0||i===1/0?this.Wn(a.x-o/2,a.y-o/2,0===t&&0===l?0:a.width+o,0===i&&0===h?0:a.height+o):this.Wn(-o/2,-o/2,u+o,c+o),r.isReal()?(u=r.width,c=r.height,u=Math.min(d.width,u),c=Math.min(d.height,c),u=Math.max(f.width,u),c=Math.max(f.height,c),this.zi.i(0,0,u,c)):this.zi.a(a)}aS(){const t=this.geometryStretch;return null!==this.ks?1===t?2:t:1===t?Jt.q2[this.figure].defaultStretch:t}fh(t,e,i,n){this.commonArrange(t,e,i,n)}getNearestIntersectionPoint(t,e,i){return this.Jc(t.x,t.y,e.x,e.y,i)}Jc(t,i,n,s,r){const o=this.T,a=1/(o.m11*o.m22-o.m12*o.m21),l=o.m22*a,h=-o.m12*a,u=-o.m21*a,c=o.m11*a,d=a*(o.m21*o.dy-o.m22*o.dx),f=a*(o.m12*o.dx-o.m11*o.dy),p=t*l+i*u+d,g=t*h+i*c+f,m=n*l+s*u+d,v=n*h+s*c+f,b=this.Vo/2;let w=this.ot;null===w&&(this.ht(1/0,1/0),w=this.ot);const k=w.bounds;let C=!1;if(1===w.type)if(this.strokeWidth<=1.5)C=S.On(w.startX,w.startY,w.endX,w.endY,p,g,m,v,r);else{let t=0,i=0;if(w.startX===w.endX)t=b,i=0;else{const e=(w.endY-w.startY)/(w.endX-w.startX);i=b/Math.sqrt(1+e*e),t=i*e}const n=e.et();let s=new y;S.On(w.startX+t,w.startY+i,w.endX+t,w.endY+i,p,g,m,v,s)&&n.push(s),s=new y,S.On(w.startX-t,w.startY-i,w.endX-t,w.endY-i,p,g,m,v,s)&&n.push(s),s=new y,S.On(w.startX+t,w.startY+i,w.startX-t,w.startY-i,p,g,m,v,s)&&n.push(s),s=new y,S.On(w.endX+t,w.endY+i,w.endX-t,w.endY-i,p,g,m,v,s)&&n.push(s);const o=n.length;if(0===o)return e.J(n),!1;C=!0;let a=1/0;for(let t=0;t<o;t++){const e=n[t],i=(e.x-p)**2+(e.y-g)**2;i<a&&(a=i,r.x=e.x,r.y=e.y)}e.J(n)}else if(2===w.type)C=S.dl(k.x-b,k.y-b,k.x+k.width+b,k.y+k.height+b,p,g,m,v,r);else if(3===w.type){const t=x.V(k.x,k.y,k.width,k.height).inflate(b,b);C=this.Xv(t,p,g,m,v,r),x.e(t)}else if(4===w.type){let o=0,a=0,l=0,h=0;const u=y.l();let c=m-p,d=v-g,f=c*c+d*d,x=p,M=g;if(f>0&&k.contains(x,M)&&(u.x=x,u.y=M,this.containsPoint(u)))for(0!==c&&Math.abs(c)<.5?(d*=.5/c,c=.5):0!==d&&Math.abs(d)<.5&&(c*=.5/d,d=.5),x-=c,M-=d;k.contains(x,M);)x-=c,M-=d;const T=.6;r.x=m,r.y=v;for(let t=0;t<w.figures.count;t++){const i=w.figures.r[t],n=i.isFilled?x:p,s=i.isFilled?M:g,c=i.segments;o=i.startX,a=i.startY;let d=o,y=a;for(let t=0;t<c.count;t++){const p=c.r[t],g=p.type;l=p.endX,h=p.endY;let x=!1;switch(g){case 1:d=l,y=h;break;case 2:x=this.s1(o,a,l,h,n,s,m,v,u);break;case 3:x=S.Ig(o,a,p.point1X,p.point1Y,p.point2X,p.point2Y,l,h,n,s,m,v,T,u);break;case 4:x=S.Ig(o,a,o+2/3*(p.point1X-o),a+2/3*(p.point1Y-a),l+2/3*(p.point1X-l),h+2/3*(p.point1Y-h),l,h,n,s,m,v,T,u);break;case 5:case 6:{const t=5===p.type?p.bo(i):p.Uh(i,o,a),e=t.length;if(0===e){x=this.s1(o,a,5===p.type?p.centerX:p.endX,5===p.type?p.centerY:p.endY,n,s,m,v,u);break}let c=null;for(let i=0;i<e;i++){if(c=t[i],0===i&&this.s1(o,a,c[0],c[1],n,s,m,v,u)){const t=this.o1(n,s,u,f,r);t<f&&(f=t,C=!0)}if(S.Ig(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],n,s,m,v,T,u)){const t=this.o1(n,s,u,f,r);t<f&&(f=t,C=!0)}}l=c[6],h=c[7];break}default:e.o("Unknown Segment type: "+g)}if(o=l,a=h,x){const t=this.o1(n,s,u,f,r);t<f&&(f=t,C=!0)}if(p.isClosed&&(l=d,h=y,this.s1(o,a,l,h,n,s,m,v,u))){const t=this.o1(n,s,u,f,r);t<f&&(f=t,C=!0)}}}let A=n-t,P=s-i;const N=Math.sqrt(A*A+P*P);0!==N&&(A/=N,P/=N),r.x-=A*b,r.y-=P*b,y.e(u)}else e.o("Unknown Geometry type: "+w.type);return!!C&&(this.T.gt(r),!0)}o1(t,e,i,n,s){const r=i.x-t,o=i.y-e,a=r*r+o*o;return a<n?(s.x=i.x,s.y=i.y,a):n}s1(t,e,i,n,s,r,o,a,l){if(S.z(t,i)&&S.z(e,n)||S.z(s,o)&&S.z(r,a))return!1;let h=!1;const u=(s-o)*(e-n)-(r-a)*(t-i);if(0===u)return!1;if(l.x=((s*a-r*o)*(t-i)-(s-o)*(t*n-e*i))/u,l.y=((s*a-r*o)*(e-n)-(r-a)*(t*n-e*i))/u,(t>i?t-i:i-t)<(e>n?e-n:n-e)){const t=e<n?e:n,i=e<n?n:e;(l.y>t||S.z(l.y,t))&&(l.y<i||S.z(l.y,i))&&(h=!0)}else{const e=t<i?t:i,n=t<i?i:t;(l.x>e||S.z(l.x,e))&&(l.x<n||S.z(l.x,n))&&(h=!0)}return h}Yv(t,e,i){return!1!==this.pickable&&(i.nc(this.T),e?this.Kv(t,i):this.containedInRect(t,i))}containedInRect(t,e){if(void 0===e)return t.containsRect(this.actualBounds);let i=this.ot;null===i&&(this.ht(1/0,1/0),i=this.ot);const n=i.bounds,s=this.strokeWidth/2;let r=!1;const o=y.l();return o.i(n.x-s,n.y-s),t.containsPoint(e.gt(o))&&(o.i(n.x-s,n.bottom+s),t.containsPoint(e.gt(o))&&(o.i(n.right+s,n.bottom+s),t.containsPoint(e.gt(o))&&(o.i(n.right+s,n.y-s),t.containsPoint(e.gt(o))&&(r=!0)))),y.e(o),r}intersectsRect(t,e){if(this.containedInRect(t,e)||void 0===e&&(e=this.T,t.containsRect(this.actualBounds)))return!0;const i=k.l();i.set(e),i.xw();const n=t.left,s=t.right,r=t.top,o=t.bottom,a=y.l();if(a.i(n,r),i.gt(a),this.ch(a,!0))return y.e(a),!0;if(a.i(s,r),i.gt(a),this.ch(a,!0))return y.e(a),!0;if(a.i(n,o),i.gt(a),this.ch(a,!0))return y.e(a),!0;if(a.i(s,o),i.gt(a),this.ch(a,!0))return y.e(a),!0;const l=y.l(),h=y.l();i.set(e),i.CC(this.T),i.xw(),l.x=s,l.y=r,l.T(i),a.x=n,a.y=r,a.T(i);let u=!1;return this.Fa(a,l,h)?u=!0:(a.x=s,a.y=o,a.T(i),this.Fa(a,l,h)?u=!0:(l.x=n,l.y=o,l.T(i),this.Fa(a,l,h)?u=!0:(a.x=n,a.y=r,a.T(i),this.Fa(a,l,h)&&(u=!0)))),y.e(a),k.e(i),y.e(l),y.e(h),u}Fa(t,e,i){if(!this.getNearestIntersectionPoint(t,e,i))return!1;const n=t.x,s=t.y,r=e.x,o=e.y,a=i.x,l=i.y;if(n===r){let t=0,e=0;return s<o?(t=s,e=o):(t=o,e=s),l>=t&&l<=e}{let t=0,e=0;return n<r?(t=n,e=r):(t=r,e=n),a>=t&&a<=e}}Kv(t,e){if(this.containedInRect(t,e)||void 0===e&&(e=this.T,t.containsRect(this.actualBounds)))return!0;const i=t.left,n=t.right,s=t.top,r=t.bottom,o=y.l(),a=y.l(),l=y.l(),h=k.l();h.set(e),h.CC(this.T),h.xw(),a.x=n,a.y=s,a.T(h),o.x=i,o.y=s,o.T(h);let u=!1;return this.Fa(o,a,l)?u=!0:(o.x=n,o.y=r,o.T(h),this.Fa(o,a,l)?u=!0:(a.x=i,a.y=r,a.T(h),this.Fa(o,a,l)?u=!0:(o.x=i,o.y=s,o.T(h),this.Fa(o,a,l)&&(u=!0)))),k.e(h),y.e(o),y.e(a),y.e(l),u}bA(t,i,n){if(n&&null!==this.fill&&this.ch(t,!0))return!0;let s=t.distanceSquaredPoint(i);const r=s;this.strokeWidth>1.5&&(s=this.strokeWidth/2+Math.sqrt(s),s*=s);let o=this.ot;if(null===o&&(this.ht(1/0,1/0),o=this.ot,null===o))return!1;if(!n){const e=o.bounds,i=e.x,n=e.y,r=e.x+e.width,a=e.y+e.height;if(y.distanceSquared(t.x,t.y,i,n)<=s&&y.distanceSquared(t.x,t.y,r,n)<=s&&y.distanceSquared(t.x,t.y,i,a)<=s&&y.distanceSquared(t.x,t.y,r,a)<=s)return!0}function a(t,e){const i=t.length;for(let n=0;n<i;n+=2)if(e.distanceSquared(t[n],t[n+1])>s)return!0;return!1}const l=o.startX,h=o.startY,u=o.endX,c=o.endY;if(1===o.type){const e=y.distanceLineSegmentSquared(t.x,t.y,l,h,u,c),i=(u-l)*(t.x-l)+(c-h)*(t.y-h),n=(l-u)*(t.x-u)+(h-c)*(t.y-c);return e<=(i>=0&&n>=0?s:r)}if(2===o.type){let e=!1;return n&&(e=y.distanceLineSegmentSquared(t.x,t.y,l,h,l,c)<=s||y.distanceLineSegmentSquared(t.x,t.y,l,h,u,h)<=s||y.distanceLineSegmentSquared(t.x,t.y,u,h,u,c)<=s||y.distanceLineSegmentSquared(t.x,t.y,l,c,u,c)<=s),e}if(3===o.type){const e=(l+u)/2,i=(h+c)/2,r=t.x-e,o=t.y-i,a=Math.abs(u-l)/2,d=Math.abs(c-h)/2;if(0===a||0===d)return y.distanceLineSegmentSquared(t.x,t.y,l,h,u,c)<=s;if(n){const t=S.iF(a,d,r,o);return t*t<=s}return!(y.distanceSquared(r,o,-a,0)>=s||y.distanceSquared(r,o,0,-d)>=s||y.distanceSquared(r,o,0,d)>=s||y.distanceSquared(r,o,a,0)>=s)}if(4===o.type){const i=o.bounds,r=i.x,l=i.y,h=i.x+i.width,u=i.y+i.height;if(t.x>h&&t.x<r&&t.y>u&&t.y<l&&y.distanceLineSegmentSquared(t.x,t.y,r,l,r,u)>s&&y.distanceLineSegmentSquared(t.x,t.y,r,l,h,l)>s&&y.distanceLineSegmentSquared(t.x,t.y,h,u,r,u)>s&&y.distanceLineSegmentSquared(t.x,t.y,h,u,h,l)>s)return!1;const c=Math.sqrt(s);if(!n){const i=o.figures;for(let n=0;n<i.count;n++){const r=i.r[n];let o=r.startX,l=r.startY;if(t.distanceSquared(o,l)>s)return!1;const h=r.segments.r,u=h.length;for(let i=0;i<u;i++){const n=h[i];switch(n.type){case 1:case 2:if(o=n.endX,l=n.endY,t.distanceSquared(o,l)>s)return!1;break;case 3:{const i=e.et();S.vn(o,l,n.point1X,n.point1Y,n.point2X,n.point2Y,n.endX,n.endY,.8,i);const r=a(i,t);if(e.J(i),r||(o=n.endX,l=n.endY,t.distanceSquared(o,l)>s))return!1;break}case 4:{const i=e.et();S.Og(o,l,n.point1X,n.point1Y,n.endX,n.endY,.8,i);const r=a(i,t);if(e.J(i),r||(o=n.endX,l=n.endY,t.distanceSquared(o,l)>s))return!1;break}case 5:case 6:{const i=5===n.type?n.bo(r):n.Uh(r,o,l),h=i.length;if(0===h){if(o=5===n.type?n.centerX:n.endX,l=5===n.type?n.centerY:n.endY,t.distanceSquared(o,l)>s)return!1;break}let u=null;const c=e.et();for(let n=0;n<h;n++)if(u=i[n],c.length=0,S.vn(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],.8,c),a(c,t))return e.J(c),!1;e.J(c),null!==u&&(o=u[6],l=u[7]);break}default:e.o("Unknown Segment type: "+n.type)}}}return!0}if(null===this.fill?o.UC(t.x,t.y,c):o.qk(t,c,!0,!1))return!0}return!1}Xv(t,e,i,n,s,r){if(0===t.width)return S.On(t.x,t.y,t.x,t.y+t.height,e,i,n,s,r);if(0===t.height)return S.On(t.x,t.y,t.x+t.width,t.y,e,i,n,s,r);{const o=t.width/2,a=t.height/2,l=t.x+o,h=t.y+a;let u=9999;if(e!==n&&(u=(i-s)/(e-n)),Math.abs(u)<9999){const t=i-h-u*(e-l);if(o*o*(u*u)+a*a-t*t<0)return r.x=NaN,r.y=NaN,!1;const n=Math.sqrt(o*o*(u*u)+a*a-t*t),s=(-o*o*u*t+o*a*n)/(a*a+o*o*(u*u))+l,c=(-o*o*u*t-o*a*n)/(a*a+o*o*(u*u))+l,d=u*(s-l)+t+h,f=u*(c-l)+t+h;Math.abs((e-s)**2)+Math.abs((i-d)**2)<Math.abs((e-c)**2)+Math.abs((i-f)**2)?(r.x=s,r.y=d):(r.x=c,r.y=f)}else{const t=a*a,n=e-l,s=t-t/(o*o)*(n*n);if(s<0)return r.x=NaN,r.y=NaN,!1;const u=Math.sqrt(s),c=h+u,d=h-u;Math.abs(c-i)<Math.abs(d-i)?(r.x=e,r.y=c):(r.x=e,r.y=d)}return!0}}Rv(){return this.Vo/2*this.strokeMiterLimit*this.getDocumentScale()}get geometry(){return null!==this.ot?this.ot:this.ks}set geometry(t){const e=this.ot,i=this.ks;if(e===t)return;null!==t?(this.ot=t.u(),this.ks=this.ot):(this.ot=null,this.ks=null);const n=this.part;if(null!==n&&n.cf(),this.c(),this.t("geometry",e||i,t),this.Wc()){const t=this.part;null!==t&&this.ba(t,"geometryString")}}get geometryString(){return null===this.geometry?"":this.geometry.toString()}set geometryString(t){const e=A.parse(t),i=e.normalize();this.geometry=e;const n=y.V(-i.x,-i.y);this.position=n,y.e(n)}get isGeometryPositioned(){return!!(1048576&this.n)}set isGeometryPositioned(t){const e=!!(1048576&this.n);e!==t&&(this.n=1048576^this.n,this.c(),this.t("isGeometryPositioned",e,t))}ee(){this.ot=null}get fill(){return this.Ta}set fill(t){const e=this.Ta;e!==t&&(null!==t&&Ht.Qu(t,"Shape.fill"),t instanceof Ht&&t.u(),this.Ta=t,this.S(),this.t("fill",e,t))}get stroke(){return this.Hi}set stroke(t){const e=this.Hi;e!==t&&(null!==t&&Ht.Qu(t,"Shape.stroke"),t instanceof Ht&&t.u(),this.Hi=t,this.S(),this.t("stroke",e,t))}get strokeWidth(){return this.Vo}set strokeWidth(t){const i=this.Vo;if(i!==t)if(t>=0){this.Vo=t,this.c();const e=this.part;null!==e&&e.cf(),this.t("strokeWidth",i,t)}else e.W(t,"value >= 0",Jt,"strokeWidth:value")}p0(){return this.Vo}get strokeCap(){return null!==this.Ht?this.Ht.dp:"butt"}set strokeCap(t){const i=this.strokeCap;i!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?e.W(t,'"butt", "round", or "square"',Jt,"strokeCap"):(this.Da().dp=t,this.S(),this.t("strokeCap",i,t)))}get strokeJoin(){return null!==this.Ht?this.Ht.gp:"miter"}set strokeJoin(t){const i=this.strokeJoin;i!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?e.W(t,'"miter", "bevel", or "round"',Jt,"strokeJoin"):(this.Da().gp=t,this.S(),this.t("strokeJoin",i,t)))}get strokeMiterLimit(){return null!==this.Ht?this.Ht.mp:10}set strokeMiterLimit(t){const e=this.strokeMiterLimit;if(e!==t&&t>=1){this.Da().mp=t,this.S();const i=this.part;null!==i&&i.cf(),this.t("strokeMiterLimit",e,t)}}get strokeDashArray(){return this.Io}set strokeDashArray(t){const i=this.Io;if(i!==t){if(null!==t&&!Array.isArray(t)&&e.Zi(t,"Array",Jt,"strokeDashArray:value"),null!==t){const n=t.length;let s=0;for(let i=0;i<n;i++){const n=t[i];(!(n>=0)||!isFinite(n))&&e.o("strokeDashArray:value "+n+" at index "+i+" must be a positive number or zero."),s+=n}if(0===s){if(null===i)return;t=null}}this.Io=t,this.S(),this.t("strokeDashArray",i,t)}}get strokeDashOffset(){return null!==this.Ht?this.Ht.mh:0}set strokeDashOffset(t){const e=this.strokeDashOffset;e!==t&&t>=0&&(this.Da().mh=t,this.S(),this.t("strokeDashOffset",e,t))}get figure(){return this.gd}set figure(t){const i=this.gd;if(i!==t){let n=S.In[t];if(e.it(n)?n=t:(n=S.In[t.toLowerCase()],n||e.o("Unknown Shape.figure: "+t)),i!==n){const t=this.part;null!==t&&t.cf(),this.gd=n,this.ks=null,this.ee(),this.c(),this.t("figure",i,n)}}}get toArrow(){return null!==this.Ot?this.Ot.pp:"None"}set toArrow(t){const i=this.toArrow;if(!0===t?t="Standard":!1===t&&(t=""),i!==t){const n=Jt.WA(t);null===n?e.o("Unknown Shape.toArrow: "+t):i!==n&&(null===this.Ot&&(this.Ot=new Te),this.Ot.pp=n,this.ks=null,this.ee(),this.c(),this.JA(n),this.t("toArrow",i,n))}}get fromArrow(){return null!==this.Ot?this.Ot.yp:"None"}set fromArrow(t){const i=this.fromArrow;if(!0===t?t="Standard":!1===t&&(t=""),i!==t){const n=Jt.WA(t);null===n?e.o("Unknown Shape.fromArrow: "+t):i!==n&&(null===this.Ot&&(this.Ot=new Te),this.Ot.yp=n,this.ks=null,this.ee(),this.c(),this.JA(n),this.t("fromArrow",i,n))}}JA(t){const e=this.diagram;if(null!==e&&e.undoManager.isUndoingRedoing)return;this.iv();const i=w.MiddleRight;"None"!==this.toArrow?(this.segmentIndex=-1,this.alignmentFocus=i):"None"!==this.fromArrow&&(this.segmentIndex=0,this.alignmentFocus=new w(1-i.x,i.y))}get spot1(){return null!==this.Ht?this.Ht.En:w.Default}set spot1(t){const e=this.spot1;e.equals(t)||(t=t.P(),this.Da().En=t,this.c(),this.t("spot1",e,t))}get spot2(){return null!==this.Ht?this.Ht.Un:w.Default}set spot2(t){const e=this.spot2;e.equals(t)||(t=t.P(),this.Da().Un=t,this.c(),this.t("spot2",e,t))}get parameter1(){return this.md}set parameter1(t){const e=this.md;e!==t&&(this.md=t,this.ee(),this.c(),this.t("parameter1",e,t))}get parameter2(){return this.pd}set parameter2(t){const e=this.pd;e!==t&&(this.pd=t,this.ee(),this.c(),this.t("parameter2",e,t))}get naturalBounds(){return this.zi}kv(){const t=this.desiredSize;if(t.isReal()||null===this.ot)this.zi.i(0,0,t.width,t.height);else{const t=this.ot.bounds;this.zi.a(t)}}get pathPattern(){return null!==this.Ht?this.Ht.wp:null}set pathPattern(t){const e=this.pathPattern;e!==t&&(this.Da().wp=t,this.S(),this.t("pathPattern",e,t))}get geometryStretch(){return null!==this.Ht?this.Ht.xp:1}set geometryStretch(t){const e=this.geometryStretch;e!==t&&(this.Da().xp=t,this.c(),this.t("geometryStretch",e,t))}get interval(){return null!==this.G?this.G.uf:1}set interval(t){const e=this.interval;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){null===this.G&&(this.G=new se),this.G.uf=t;const i=this.diagram;null!==i&&this.panel===i.grid&&i._l(),this.c();const n=this.panel;null!==n&&(n.ss=null),this.t("interval",e,t)}}get graduatedStart(){return null!==this.G?this.G.df:0}set graduatedStart(t){const e=this.graduatedStart;e!==t&&(t<0?t=0:t>1&&(t=1),null===this.G&&(this.G=new se),this.G.df=t,this.c(),this.t("graduatedStart",e,t))}get graduatedEnd(){return null!==this.G?this.G.gf:1}set graduatedEnd(t){const e=this.graduatedEnd;e!==t&&(t<0?t=0:t>1&&(t=1),null===this.G&&(this.G=new se),this.G.gf=t,this.c(),this.t("graduatedEnd",e,t))}get graduatedSkip(){return null!==this.G?this.G.mf:null}set graduatedSkip(t){const i=this.graduatedSkip;i!==t&&(null!==t&&e.k(t,Jt,"graduatedSkip"),null===this.G&&(this.G=new se),this.G.mf=t,this.c(),this.t("graduatedSkip",i,t))}static zv(t,i,n){let s=null;if("None"!==t.toArrow)s=Jt.gn[t.toArrow];else if("None"!==t.fromArrow)s=Jt.gn[t.fromArrow];else{let r=S.In[t.figure];"string"==typeof r&&(r=S.In[r]),void 0===r&&e.o("Unknown Shape.figure: "+t.figure),s=r(t,i,n),s.rc=i,s.lc=n}if(null===s){const r=S.In.Rectangle;e.it(r)&&(s=r(t,i,n))}return s}static getFigureGenerators(){const t=new m;for(const e in S.In){if(e===e.toLowerCase())continue;const i=S.In[e];t.set(e,i)}return t.u(),t}static defineFigureGenerator(t,i){e.s(t,"string",Jt,"defineFigureGenerator:name"),"string"==typeof i||e.k(i,Jt,"defineFigureGenerator:func");const n=t.toLowerCase(),s=S.In;s[t]=i,s[n]=t}static isFigureDefined(t){return S.In.has(t)}static getArrowheadGeometries(){const t=new m;for(const t in S.Bg)if(void 0===Jt.gn[t]){const e=A.parse(S.Bg[t],!1);Jt.gn[t]=e;const i=t.toLowerCase();i!==t&&(Jt.gn[i]=t)}for(const e in Jt.gn){if(e===e.toLowerCase())continue;const i=Jt.gn[e];i instanceof A&&t.set(e,i)}return t.u(),t}static defineArrowheadGeometry(t,i){e.s(t,"string",Jt,"defineArrowheadGeometry:name");let n=null;"string"==typeof i?(e.s(i,"string",Jt,"defineArrowheadGeometry:pathstr"),n=A.parse(i,!1)):n=i;const s=t.toLowerCase();("none"===s||t===s)&&e.o("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);const r=Jt.gn;r[t]=n,r[s]=t}static isArrowheadDefined(t){return Jt.gn.has(t)}static gn=new n;static q2=new n;static WA(t){let e=Jt.gn[t];if(void 0===e){const i=t.toLowerCase();if("none"===i)return"None";if(e=Jt.gn[i],void 0===e){let t=null;for(const e in S.Bg)if(e.toLowerCase()===i){t=e;break}if(null!==t){const e=A.parse(S.Bg[t],!1);return Jt.gn[t]=e,i!==t&&(Jt.gn[i]=t),t}}}return"string"==typeof e?e:e instanceof A?t:null}}class Zt{fi;dp;gp;mp;mh;wp;xp;En;Un;constructor(){this.fi=!1,this.dp="butt",this.gp="miter",this.mp=10,this.mh=0,this.wp=null,this.xp=1,this.En=w.Default,this.Un=w.Default}copy(){const t=new Zt;return t.dp=this.dp,t.gp=this.gp,t.mp=this.mp,t.mh=this.mh,t.wp=this.wp,t.xp=this.xp,t.En=this.En.P(),t.Un=this.Un.P(),t}}var Qt=(t=>(t[t.None=0]="None",t[t.Fit=1]="Fit",t[t.DesiredSize=2]="DesiredSize",t[t.BreakAll=3]="BreakAll",t))(Qt||{}),te=(t=>(t[t.Clip=0]="Clip",t[t.Ellipsis=1]="Ellipsis",t))(te||{}),ee=(t=>(t[t.Trim=0]="Trim",t[t.None=1]="None",t))(ee||{});class ie extends Dt{ri;Hi;mn;ge;ui;y0;wd;G;rt;Tl;io;pn;Ce;Ti;yn;constructor(t,e){return super(),!1===ie.q0&&(ie.q0=!0,ie._n=xt.isUsingDOM()?new Rt(null).li:null),this.n|=2097152,this.ri="",this.Hi="black",this.mn="13px sans-serif",this.ge=0,this.ui=0,this.y0=0,this.wd=null,this.G=null,this.rt=null,this.Tl=0,this.io=null,this.pn=0,this.Ce=null,this.Ti=null,this.yn=null,"string"==typeof t?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}cloneProtected(t){super.cloneProtected(t),t.ri=this.ri,t.Hi=this.Hi,t.mn=this.mn,t.ge=this.ge,t.ui=this.ui,t.y0=this.y0,t.wd=this.wd,null!==this.G&&(t.G=this.G.copy()),null!==this.rt&&(this.rt.fi?t.rt=this.rt:t.rt=this.rt.copy()),t.Tl=this.Tl,t.io=this.io,t.pn=this.pn,t.Ce=this.Ce,t.Ti=this.Ti,t.yn=this.yn}wn(){return null===this.rt?this.rt=new ne:this.rt.fi&&(this.rt=this.rt.copy()),this.rt}ah(){super.ah(),null!==this.rt&&(this.rt.fi=!0)}Av(t){this.n=6144|t.n,this.$t=t.opacity,this.Lt=t.background,this.is=t.desiredSize.P(),this.minSize=t.minSize.P(),this.maxSize=t.maxSize.P(),null!==t.wi?this.wi=t.wi.copy():this.wi=null,this.tt=t.scale,this.Yt=t.angle,this.stretch=t.stretch,this.qr=t.margin.P(),this.hi=t.alignment.P(),this.Hu=t.alignmentFocus.P(),this.segmentFraction=t.segmentFraction,this.segmentOffset=t.segmentOffset.P(),this.segmentOrientation=t.segmentOrientation,null!==t.si&&(this.si=t.si.copy()),this.shadowVisible=t.shadowVisible,this.ri=t.ri,this.Hi=t.Hi,this.mn=t.mn,null!==this.G&&(this.G=t.G.copy()),null!==t.rt&&(t.rt.fi?this.rt=t.rt:this.rt=t.rt.copy()),this.Tl=t.Tl}Cv(t){if(this.ri=t.text||"",this.Yt=t.labelAngle||0,this.ge=t.lineCount||0,this.Gv(t.lines),t.naturalBounds&&(this.zi=t.naturalBounds),t.actualBounds){const e=t.actualBounds;this.Bt(e.x,e.y,e.width,e.height)}}oi(t){t in Qt?this.wrap=t:super.oi(t)}toString(){return this.ri.length>22?'TextBlock("'+this.ri.substring(0,20)+'"...)':'TextBlock("'+this.ri+'")'}static getEllipsis(){return ie.bp}static setEllipsis(t){ie.bp=t,ie.l1=new n,ie.W2=0}static getBaseline(){return ie.h1}static setBaseline(t){ie.h1=t}static h1=null;static getUnderline(){return ie.a1}static setUnderline(t){ie.a1=t}static a1=null;static None=0;static WrapFit=1;static WrapDesiredSize=2;static WrapBreakAll=3;static OverflowClip=0;static OverflowEllipsis=1;static FormatTrim=0;static FormatNone=1;c(){super.c(),this.Ve(!0)}get font(){return this.mn}set font(t){const e=this.mn;e!==t&&(this.mn=t,this.io=null,this.c(),this.t("font",e,t))}static isValidFont(e){return!t.CSS||t.CSS.supports("font",e)}get text(){return this.ri}set text(t){const e=this.ri;e!==(t=null!=t?t.toString():"")&&(this.ri=t,this.c(),this.t("text",e,t))}get textAlign(){return null!==this.rt?this.rt.kp:"start"}set textAlign(t){const e=this.textAlign;e!==t&&("start"===t||"end"===t||"left"===t||"right"===t||"center"===t)&&(this.wn().kp=t,this.S(),this.t("textAlign",e,t))}get flip(){return null!==this.rt?this.rt.eo:0}set flip(t){const e=this.flip;e!==t&&(this.wn().eo=t,this.S(),this.t("flip",e,t))}get verticalAlignment(){return null!==this.rt?this.rt._r:w.Top}set verticalAlignment(t){const e=this.verticalAlignment;e.equals(t)||(t=t.P(),this.wn()._r=t,this.ef(),this.t("verticalAlignment",e,t))}get naturalBounds(){if(!this.zi.isReal()){const t=v.l();this.J2(this.ri,999999,t);let e=t.width;v.e(t);let i=this.$A(e);const n=this.desiredSize;isNaN(n.width)||(e=n.width),isNaN(n.height)||(i=n.height),this.zi.Fn(e,i)}return this.zi}get isMultiline(){return!!(2097152&this.n)}set isMultiline(t){const e=!!(2097152&this.n);e!==t&&(this.n=2097152^this.n,this.c(),this.t("isMultiline",e,t))}get isUnderline(){return!!(4194304&this.n)}set isUnderline(t){const e=!!(4194304&this.n);e!==t&&(this.n=4194304^this.n,this.Ve(!0),this.S(),this.t("isUnderline",e,t))}get isStrikethrough(){return!!(8388608&this.n)}set isStrikethrough(t){const e=!!(8388608&this.n);e!==t&&(this.n=8388608^this.n,this.Ve(!0),this.S(),this.t("isStrikethrough",e,t))}get wrap(){return null!==this.rt?this.rt.Pp:2}set wrap(t){const e=this.wrap;e!==t&&(this.wn().Pp=t,this.c(),this.t("wrap",e,t))}get overflow(){return null!==this.rt?this.rt.Sp:0}set overflow(t){const e=this.overflow;e!==t&&(this.wn().Sp=t,this.c(),this.t("overflow",e,t))}get isOverflowed(){return!!(16777216&this.n)}$2(t){t?this.n|=16777216:this.n&=-16777217}get stroke(){return this.Hi}set stroke(t){const e=this.Hi;e!==t&&(null!==t&&Ht.Qu(t,"TextBlock.stroke"),t instanceof Ht&&t.u(),this.Hi=t,"string"!=typeof t&&this.Qc(),this.S(),this.t("stroke",e,t))}get lineCount(){return this.ge}get lineHeight(){return this.Mp()}get editable(){return!!(1048576&this.n)}set editable(t){const e=!!(1048576&this.n);e!==t&&(this.n=1048576^this.n,this.t("editable",e,t))}get V2(){return!!(33554432&this.n)}set V2(t){this.n=33554432^this.n}get textEditor(){return null!==this.rt?this.rt.Np:null}set textEditor(t){const e=this.textEditor;e!==t&&(this.wn().Np=t,this.t("textEditor",e,t))}get errorFunction(){return null!==this.rt?this.rt.ns:null}set errorFunction(t){const i=this.errorFunction;i!==t&&(null!==t&&e.k(t,ie,"errorFunction"),this.wn().ns=t,this.t("errorFunction",i,t))}get interval(){return null!==this.G?this.G.uf:1}set interval(t){const e=this.interval;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){null===this.G&&(this.G=new se),this.G.uf=t,this.c();const i=this.panel;null!==i&&(i.ss=null),this.t("interval",e,t)}}get graduatedStart(){return null!==this.G?this.G.df:0}set graduatedStart(t){const e=this.graduatedStart;e!==t&&(t<0?t=0:t>1&&(t=1),null===this.G&&(this.G=new se),this.G.df=t,this.c(),this.t("graduatedStart",e,t))}get graduatedEnd(){return null!==this.G?this.G.gf:1}set graduatedEnd(t){const e=this.graduatedEnd;e!==t&&(t<0?t=0:t>1&&(t=1),null===this.G&&(this.G=new se),this.G.gf=t,this.c(),this.t("graduatedEnd",e,t))}get graduatedFunction(){return null!==this.G?this.G.Cp:null}set graduatedFunction(t){const i=this.graduatedFunction;i!==t&&(null!==t&&e.k(t,ie,"graduatedFunction"),null===this.G&&(this.G=new se),this.G.Cp=t,this.c(),this.t("graduatedFunction",i,t))}get graduatedSkip(){return null!==this.G?this.G.mf:null}set graduatedSkip(t){const i=this.graduatedSkip;i!==t&&(null!==t&&e.k(t,ie,"graduatedSkip"),null===this.G&&(this.G=new se),this.G.mf=t,this.c(),this.t("graduatedSkip",i,t))}dh(t,e){if(null===this.Hi||0===this.ri.length||null===this.mn)return;const i=this.naturalBounds,n=this.actualBounds,s=i.width,r=i.height,o=this.Mp();let a=t.textAlign=this.textAlign;const l=e.zu;"start"===a?a=l?"right":"left":"end"===a&&(a=l?"left":"right");const h=this.isUnderline,u=this.isStrikethrough;this.rn(t,this.Hi,!0,!1,i,n),(h||u)&&this.rn(t,this.Hi,!1,!1,i,n);let c=0;const d=s;let f=!1;e.Qt===t&&!(e.Qt instanceof Ft)&&!this.V2&&!0===e.getRenderingHint("textGreeking")&&o*this.da*e.scale<3&&(f=!0);const p=this.spacingAbove,g=this.spacingBelow;switch(this.flip){case 0:break;case 2:t.translate(s,0),t.scale(-1,1);break;case 1:t.translate(0,r),t.scale(1,-1);break;case 3:t.translate(s,r),t.scale(-1,-1)}t.commitTransform();const m=this.ge,y=(p+o+g)*m;if(r>y){const t=this.verticalAlignment;c=t.y*r-t.y*y+t.offsetY}if(1===m&&null!==this.yn){let e=this.ui;e>d&&(e=d),c+=p,this.ZA(this.yn,t,0,c,d,o,e,f,a,h,u)}else if(null!==this.Ce&&null!==this.Ti)for(let e=0;e<m;e++){let i=this.Ce[e];i>d&&(i=d),c+=p,this.ZA(this.Ti[e],t,0,c,d,o,i,f,a,h,u),c+=o+g}switch(this.flip){case 0:break;case 2:t.scale(-1,1),t.translate(-s,0);break;case 1:t.scale(1,-1),t.translate(0,-r);break;case 3:t.scale(-1,-1),t.translate(-s,-r)}}ZA(t,e,i,n,s,r,o,a,l,h,u){let c=0;if(a){"left"===l?c=0:"right"===l?c=s-o:"center"===l&&(c=(s-o)/2);const t=e.globalAlpha;return e.globalAlpha=t/2,e.fillRect(i+c,n+r/4,o,r/2),void(e.globalAlpha=t)}"left"===l?c=0:"right"===l?c=s:"center"===l&&(c=s/2);const d=null!==ie.h1?ie.h1(this,r):.75*r;e.fillText(t,i+c,n+d);let f=r/20|0;if(0===f&&(f=1),"right"===l?c-=o:"center"===l&&(c-=o/2),h){const t=null!==ie.a1?ie.a1(this,r):.8*r;this.QA(i+c,n+t,i+c+o,n+t,f,e),e instanceof Ft&&e.lastCreatedElement.classList.add("gojs-td")}if(u){let t=n+r-r/2.2|0;f%2!=0&&(t+=.5),this.QA(i+c,t,i+c+o,t,f,e),e instanceof Ft&&e.lastCreatedElement.classList.add("gojs-td")}}QA(t,e,i,n,s,r){r.beginPath(),r.lineWidth=s,r.moveTo(t,e),r.lineTo(i,n),r.stroke(),r.endPath()}Zc(t,e,i){if(!super.Zc(t,e,i))return!1;if(this.rn(t,this.Hi,!0,!1,this.naturalBounds,this.actualBounds),i){if(0===this.svg.getElementsByTagName("text").length)return!0;const e=this.svg.getElementsByClassName("gojs-td");for(let i=0;i<e.length;i++)t.setFillOrStrokeInPlace(e[i],!1)}else this.Hv(this.svg,this.text,t);return!0}Hv(t,e,i){t.innerHTML=e,i.setFillOrStrokeInPlace(t,!0)}$u(t){return!!(this.lineCount>1||this.isUnderline||this.isStrikethrough)||super.$u(t)}k2(t,e){if("g"!==t.nodeName)t.setAttributeNS(null,"filter",e);else{const i=t.getElementsByTagName("text");for(let t=0;t<i.length;t++)i[t].setAttributeNS(null,"filter",e)}}jv(){this.pn=0,this.ui=0,this.io=null,this.Ce=null,this.Ti=null,this.yn=null}Wu(t,e,i,n){const s=this.ge;this.Tl=t,this.$2(!1);const r=this.mn;null!==ie._n&&ie._A!==r&&(ie._n.font=r,ie._A=r),this.jv();let o=0,a=0;isNaN(this.desiredSize.width)?(o=this.qv(),o=Math.min(o,t/this.scale)):o=this.desiredSize.width,null!==this.panel&&(o=Math.min(o,this.panel.maxSize.width)),a=this.$A(o),a=isNaN(this.desiredSize.height)?Math.min(a,e/this.scale):this.desiredSize.height,this.Wv(t,a),(1===this.wrap||isNaN(this.desiredSize.width))&&(o=isNaN(t)?this.ui:Math.min(t,this.ui)),o=Math.max(i,o),a=Math.max(n,a),this.zi.Fn(o,a),this.Wn(0,0,o,a),null!==this.svg&&s!==this.ge&&this.Ve(!0)}fh(t,e,i,n){this.commonArrange(t,e,i,n)}xn(t,e){null===this.yn?(this.yn=t,this.ui=e):((null===this.Ti||null===this.Ce)&&(this.Ti=[],this.Ce=[],this.Ti.push(this.yn),this.Ce.push(this.ui)),this.Ti.push(t),this.Ce.push(e),this.Ti.length>this.maxLines&&(this.n|=16777216))}J2(t,e,i){const n=0===this.formatting;n&&(t=t.trim());let s=0,r=0,o=0;const a=this.mn,l=this.spacingAbove+this.spacingBelow,h=Math.max(0,this.Mp()+l),u=1===this.overflow?this.tT(a):0;if(this.ge>=this.maxLines)return void(null!==i&&i.i(0,h));let c=t;if(0===this.wrap){if(this.pn=1,r=this.getStringWidth(t),0===u||r<=e)return this.ui=Math.max(this.ui,r),this.xn(t,this.ui),void(null!==i&&i.i(r,h));let s=this.xd(c);c=c.substring(s.length);let a=this.xd(c);for(r=this.getStringWidth(s+a),o=0;a.length>0&&r<=e;){s+=a,c=c.substring(a.length),a=this.xd(c),o=r;let t=s+a;n&&(t=t.trim()),r=this.getStringWidth(t)}for(n&&(a=a.trim()),s+=a,e=Math.max(1,e-u);this.getStringWidth(s)>e&&s.length>1;)s=s.substring(0,s.length-1);return this.$2(!0),s+=ie.bp,o=this.getStringWidth(s),this.ui=o,this.xn(s,o),void(null!==i&&i.i(o,h))}let d=0;for(0===c.length&&(d=1,this.xn(c,0));c.length>0;){let t=this.xd(c);for(c=c.substring(t.length);this.getStringWidth(t)>e;){let i=1;for(r=this.getStringWidth(t.substring(0,i)),o=0;r<=e;)i++,o=r,r=this.getStringWidth(t.substring(0,i));let n=0;1===i?(n=r,s=Math.max(s,r)):(n=o,s=Math.max(s,o)),i--,i<1&&(i=1);const a=t.substring(0,i);if(this.xn(a,n),d++,t=t.substring(i),this.ge+d>this.maxLines)break}let i=this.xd(c);for(r=this.getStringWidth(t+i),o=0;i.length>0&&r<=e;){t+=i,c=c.substring(i.length),i=this.xd(c),o=r;let e=t+i;n&&(e=e.trim()),r=this.getStringWidth(e)}if(n&&(t=t.trim()),""===t)continue;"Â­"===t[t.length-1]&&(t=t.substring(0,t.length-1)+"â");let a=0;if(0===i.length?(a=r,s=Math.max(s,r)):(o=this.getStringWidth(t),a=o,s=Math.max(s,o)),this.xn(t,a),d++,this.ge+d>this.maxLines)break}this.pn=Math.min(this.maxLines-this.ge,d),this.ui=Math.max(this.ui,s),null!==i&&i.i(this.ui,h*this.pn)}Wv(t,e){if(0===this.ui||null===this.Ce||null===this.Ti||1!==this.overflow)return;const i=this.mn,n=1===this.overflow?this.tT(i):0,s=this.spacingAbove+this.spacingBelow,r=Math.max(0,this.Mp()+s),o=Math.min(this.maxLines-1,Math.max(Math.floor(e/r+.01)-1,0));if(o+1>=this.Ti.length)return;this.$2(!0);let a=this.Ti[o];const l=Math.max(1,t-n);for(;this.getStringWidth(a)>l&&a.length>1;)a=a.substring(0,a.length-1);a+=ie.bp;const h=this.getStringWidth(a);this.Ti[o]=a,this.Ti=this.Ti.slice(0,o+1),this.Ce[o]=h,this.Ce=this.Ce.slice(0,o+1),this.pn=this.Ti.length,this.ui=Math.max(this.ui,h),this.ge=this.pn,1===this.ge&&(this.yn=this.Ti[0])}xd(t){if(3===this.wrap)return t.substring(0,1);let e=t.length,i=0;const n=ie.Jv;for(;i<e&&!n.test(t.charAt(i));)i++;for(1===this.formatting&&(e=Math.min(e,i+1));i<e&&n.test(t.charAt(i));)i++;return i>=t.length?t:t.substring(0,i)}getStringWidth(t){return null===ie._n?8*t.length:ie._n.measureText(t).width}Mp(){if(null!==this.io)return this.io;const t=this.mn;let e=0;return null===ie._n?(e=16,this.io=e,e):(void 0!==ie.Z2[t]&&ie.iT<5e3?e=ie.Z2[t]:(e=1.3*ie._n.measureText("M").width,ie.Z2[t]=e,ie.iT++),this.io=e,e)}tT(t){if(null===ie._n)return 6;let e=0;return void 0!==ie.l1[t]&&ie.W2<5e3?e=ie.l1[t]:(e=ie._n.measureText(ie.bp).width,ie.l1[t]=e,ie.W2++),e}c1(t,e){return t.indexOf("\n",e)}$A(t){let e=this.ri.replace(/\r\n/g,"\n").replace(/\r/g,"\n");const i=this.spacingAbove+this.spacingBelow,n=Math.max(0,this.Mp()+i);if(0===e.length)return this.ui=0,this.ge=1,n;if(!this.isMultiline){const t=this.c1(e,0);t>=0&&(e=e.substring(0,t))}let s=0;this.ge=0;let r=0,o=-1,a=!1;for(;!a;){if(o=this.c1(e,r),-1===o&&(o=e.length,a=!0),r<=o){const i=e.substring(r,o);if(0!==this.wrap){this.pn=0;const e=v.l();this.J2(i,t,e),s+=e.height,v.e(e),this.ge+=this.pn}else this.J2(i,t,null),s+=n,this.ge++;this.ge===this.maxLines&&(a=!0)}r=o+1}return this.y0=s,s}qv(){let t=this.ri.replace(/\r\n/g,"\n").replace(/\r/g,"\n");if(0===t.length)return 8;if(this.isMultiline){let e=0,i=0,n=!1;for(;!n;){let s=this.c1(t,i);-1===s&&(s=t.length,n=!0);let r=t.substring(i,s);0===this.formatting&&(r=r.trim()),e=Math.max(e,this.getStringWidth(r)),i=s+1}return e}{const e=this.c1(t,0);return e>=0&&(t=t.substring(0,e)),this.getStringWidth(t)}}get textValidation(){return null!==this.rt?this.rt.Al:null}set textValidation(t){const i=this.textValidation;i!==t&&(null!==t&&e.k(t,ie,"textValidation"),this.wn().Al=t,this.t("textValidation",i,t))}get textEdited(){return null!==this.rt?this.rt.Lp:null}set textEdited(t){const i=this.textEdited;i!==t&&(null!==t&&e.k(t,ie,"textEdited"),this.wn().Lp=t,this.t("textEdited",i,t))}get spacingAbove(){return null!==this.rt?this.rt.Ap:0}set spacingAbove(t){const e=this.spacingAbove;e!==t&&(this.wn().Ap=t,this.c(),this.t("spacingAbove",e,t))}get spacingBelow(){return null!==this.rt?this.rt.Tp:0}set spacingBelow(t){const e=this.spacingBelow;e!==t&&(this.wn().Tp=t,this.c(),this.t("spacingBelow",e,t))}get formatting(){return null!==this.rt?this.rt.Dp:0}set formatting(t){const e=this.formatting;e!==t&&(this.wn().Dp=t,this.c(),this.t("formatting",e,t))}get maxLines(){return null!==this.rt?this.rt.Fp:1/0}set maxLines(t){const i=this.maxLines;i!==t&&((t=Math.floor(t))<=0&&e.W(t,"> 0",ie,"maxLines"),this.wn().Fp=t,this.c(),this.t("maxLines",i,t))}getMetrics(){return[this.ui,this.Tl,this.io,this.pn,this.Ce,this.Ti,this.yn]}Gv(t){void 0!==t&&(this.ui=t[0],this.Tl=t[1],this.io=t[2],this.pn=t[3],this.Ce=t[4],this.Ti=t[5],this.yn=t[6])}get metrics(){return{arrSize:null!==this.Ce?this.Ce:[this.ui],arrText:null!==this.Ti?this.Ti:[this.yn],maxLineWidth:this.ui,fontHeight:this.io}}get choices(){return this.wd}set choices(t){const e=this.wd;e!==t&&(this.wd=t,this.t("choices",e,t))}static Jv=new RegExp("[ âÂ­]");static Z2=new n;static iT=0;static l1=new n;static W2=0;static bp="...";static _A="";static _n=null;static q0=!1}class ne{fi;ns;eo;Dp;Fp;Sp;Ap;Tp;kp;Lp;Np;Al;_r;Pp;constructor(){this.fi=!1,this.ns=null,this.eo=0,this.Dp=0,this.Fp=1/0,this.Sp=0,this.Ap=0,this.Tp=0,this.kp="start",this.Lp=null,this.Np=null,this.Al=null,this._r=w.Top,this.Pp=2}copy(){const t=new ne;return t.ns=this.ns,t.eo=this.eo,t.Dp=this.Dp,t.Fp=this.Fp,t.Sp=this.Sp,t.Ap=this.Ap,t.Tp=this.Tp,t.kp=this.kp,t.Lp=this.Lp,t.Np=this.Np,t.Al=this.Al,t._r=this._r,t.Pp=this.Pp,t}}class se{uf;df;gf;Cp;mf;constructor(){this.uf=1,this.df=0,this.gf=1,this.Cp=null,this.mf=null}copy(){const t=new se;return t.uf=this.uf,t.df=this.df,t.gf=this.gf,t.Cp=this.Cp,t.mf=this.mf,t}}var re=(t=>(t[t.None=0]="None",t[t.Fill=2]="Fill",t[t.Uniform=6]="Uniform",t[t.UniformToFill=7]="UniformToFill",t))(re||{});class oe extends Dt{tl;dt;il;pf;ns;el;yf;eo;wf;xf;Yb;constructor(t,e){super(),this.n|=2097152,this.tl=null,this.dt="",this.il=x.$D,this.pf=2,this.ns=null,this.el=null,this.yf=w.Center,this.eo=0,this.wf=null,this.xf=null,this.Yb=null,"string"==typeof t?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}cloneProtected(t){super.cloneProtected(t),t.dt=this.dt,t.element=this.tl,t.il=this.il.P(),t.pf=this.pf,t.eo=this.eo,t.ns=this.ns,t.el=this.el,t.yf=this.yf.P(),t.xf=this.xf}oi(t){t in re?this.imageStretch=t:super.oi(t)}toString(){return"Picture("+this.source+")#"+u.as(this)}get bf(){return!!(1048576&this.n)}set bf(t){this.bf!==t&&(this.n=1048576^this.n)}get Rp(){return!!(2097152&this.n)}set Rp(t){this.Rp!==t&&(this.n=2097152^this.n)}get hn(){return!!(4194304&this.n)}set hn(t){this.hn!==t&&(this.n=4194304^this.n)}static clearCache(t){void 0===t&&(t=""),e.s(t,"string",oe,"clearCache:url"),""!==t?oe.vp[t]&&(delete oe.vp[t],oe.f1--):(oe.vp=new n,oe.f1=0)}static iA(t,e){e.eT||(e.u1=i=>{oe.$v(e,i),t.desiredSize.isReal()||(t.ue(!1),t.c())},e.d1=t=>oe.Zv(e,t),e.addEventListener("load",e.u1),e.addEventListener("error",e.d1),e.eT=!0)}static BR(t){t.u1&&t.removeEventListener("load",t.u1),t.d1&&t.removeEventListener("error",t.d1),delete t.u1,delete t.d1,delete t.eT}get element(){return this.tl}set element(t){const i=this.tl;if(this.Ve(!0),i!==t){this.bf=t instanceof HTMLCanvasElement;const n=t instanceof HTMLImageElement;null!==t&&!(n||t instanceof HTMLVideoElement||this.bf)&&e.o("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);const s=this.diagram;null!==s&&s.KM(this),this.tl=t,null!==t&&n&&void 0===t.ts&&(t.ts=new u),null!==s&&n&&s.YM(this),this.t("element",i,t),this.S()}}ER(){const t=this.tl;if(null===t)return;const e=this.desiredSize.isReal();(this.bf||!0===t.complete)&&(t.o0&&(t.Op instanceof Event&&null!==this.ns?this.ns(this,t.Op):!0===t.hn&&!t.Op&&null!==this.el&&t.Q2&&this.el(this,t.Q2)),t.hn=!0),t.hn&&e&&null!==this.diagram&&this.diagram.Vu.add(this)}Qv(){if(null===this.tl)return void(this.wf=!1);const t=new Rt(null).li;try{t.drawImage(this.tl,0,0)}catch{this.Rp=!1}try{t.getImageData(0,0,1,1).data[3]&&(this.wf=!1),this.wf=!1}catch{this.wf=!0}}get source(){return this.dt}set source(t){const i=this.dt;if(i!==t){this.Ve(!0),e.s(t,"string",oe,"source"),this.dt=t;let n=oe.vp;if(!xt.isUsingDOM())return void this.t("source",i,t);let s=null;if(void 0!==n[t])s=n[t];else if(""!==t){oe.f1>30&&(oe.clearCache(),n=oe.vp),s=e.hs("img"),s.o0=!0,oe.iA(this,s);const i=this.xf;null!==i&&(s.crossOrigin=i(this)),s.src=t,n[t]=s,oe.f1++}this.element=s,null!==s&&void 0===s.__goCache&&(s.__goCache=new ae),this.c(),this.S(),this.t("source",i,t)}}static $v(t,e){let i;t.hn=!0,t.Op=!1;const n=t.ts.copy();if(null==n)return;const s=n.iterator;for(;s.next();){const n=s.value;n.S();const r=t.getAttribute("src")||"",o=n.Wl.get(r);if(null===o)continue;const a=o.length;for(let s=0;s<a;s++)i=o[s],i.desiredSize.isReal()||n.Vu.add(i),i.Ve(!0),n.requestUpdate(),t.o0&&(void 0===t.Q2&&(t.Q2=e),null!==i.el&&i.el(i,e))}t.ts.clear()}static Zv(t,i){let n;t.Op=i;const s=t.ts.copy();if(null==s)return;const r=s.iterator;for(;r.next();){const s=r.value,o=t.getAttribute("src")||"",a=s.Wl.get(o);if(null===a)continue;const l=a.length,h=e.et();for(let t=0;t<l;t++)h.push(a[t]);if(t.o0)for(let t=0;t<l;t++)n=h[t],null!==n.ns&&n.ns(n,i);e.J(h)}t.ts.clear()}reloadSource(){if(""===this.source)return;oe.clearCache(this.source);const t=this.source;this.source="",this.source=t}redraw(){this.S(),this.Ve(!0)}get sourceCrossOrigin(){return this.xf}set sourceCrossOrigin(t){if(this.xf!==t&&(null!==t&&e.k(t,oe,"sourceCrossOrigin"),this.xf=t,null!==this.element)){const e=this.element.getAttribute("src");null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}get sourceRect(){return this.il}set sourceRect(t){const e=this.il;e.equals(t)||(t=t.P(),this.il=t,this.S(),this.t("sourceRect",e,t))}get imageStretch(){return this.pf}set imageStretch(t){const e=this.pf;e!==t&&(this.pf=t,this.S(),this.t("imageStretch",e,t))}get flip(){return this.eo}set flip(t){const e=this.eo;e!==t&&(this.eo=t,this.S(),this.t("flip",e,t))}get imageAlignment(){return this.yf}set imageAlignment(t){const e=this.yf;e.equals(t)||(t=t.P(),this.yf=t,this.S(),this.t("imageAlignment",e,t))}get errorFunction(){return this.ns}set errorFunction(t){const i=this.ns;i!==t&&(null!==t&&e.k(t,oe,"errorFunction"),this.ns=t,this.t("errorFunction",i,t))}get successFunction(){return this.el}set successFunction(t){const i=this.el;i!==t&&(null!==t&&e.k(t,oe,"successFunction"),this.el=t,this.t("successFunction",i,t))}dh(t,e){const i=this.tl;if(null===i)return;const n=i.getAttribute("src");if(i instanceof HTMLImageElement&&(null===n||""===n)||i.Op instanceof Event&&t instanceof It)return;const s=t instanceof Ft,r=this.naturalBounds;let o=0,a=0;const l=this.bf;let h=l?+i.width:i.naturalWidth,u=l?+i.height:i.naturalHeight;if(void 0===h&&i.videoWidth&&(h=i.videoWidth),void 0===u&&i.videoHeight&&(u=i.videoHeight),0===h||0===u)return;const c=h,d=u;this.sourceRect.isReal()&&(o=this.il.x,a=this.il.y,h=this.il.width,u=this.il.height);let f=h,p=u;const g=this.pf,m=this.yf;switch(g){case 0:if(this.sourceRect.isReal())break;f>=r.width&&(o=o+m.offsetX+(f*m.x-r.width*m.x)),p>=r.height&&(a=a+m.offsetY+(p*m.y-r.height*m.y)),h=Math.min(r.width,f),u=Math.min(r.height,p);break;case 2:f=r.width,p=r.height;break;case 6:case 7:let t=0;6===g?(t=Math.min(r.height/p,r.width/f),f*=t,p*=t):7===g&&(t=Math.max(r.height/p,r.width/f),f*=t,p*=t,f>=r.width&&(o=(o+m.offsetX+(f*m.x-r.width*m.x)/f)*h),p>=r.height&&(a=(a+m.offsetY+(p*m.y-r.height*m.y)/p)*u),h*=1/(f/r.width),u*=1/(p/r.height),f=r.width,p=r.height)}const y=h*u,v=this.getDocumentScale()*e.scale,x=f*v*(p*v),b=y/x,w=i.__goCache;let k=null;const S=oe._v;if(!s){if(i.hn&&void 0!==w&&c<8e3&&d<8e3&&x>4&&b>S*S){null===w.Vt&&(w.sT(4,c,d,i),w.sT(16,c,d,i));const t=w.Vt,e=t.length;for(let i=0;i<e&&t[i].bd*t[i].bd<b;i++)k=t[i]}if(!e.Bu&&(null===this.wf&&this.Qv(),this.wf))return}const C=f<r.width?m.offsetX+(r.width*m.x-f*m.x):0,M=p<r.height?m.offsetY+(r.height*m.y-p*m.y):0;switch(this.flip){case 0:break;case 2:t.translate(Math.min(r.width,f),0),t.scale(-1,1);break;case 1:t.translate(0,Math.min(r.height,p)),t.scale(1,-1);break;case 3:t.translate(Math.min(r.width,f),Math.min(r.height,p)),t.scale(-1,-1)}if(t.commitTransform(),e.getRenderingHint("pictureRatioOptimization")&&!e.ta&&void 0!==w&&null!==k&&1!==k.bd){t.save();const e=k.bd;try{t.drawImage(k.dt,o/e,a/e,Math.min(k.dt.width,h/e),Math.min(k.dt.height,u/e),C,M,Math.min(r.width,f),Math.min(r.height,p)),t instanceof Ft&&(this.Yb=[o/e,a/e,Math.min(k.dt.width,h/e),Math.min(k.dt.height,u/e),C,M,Math.min(r.width,f),Math.min(r.height,p)])}catch{this.Rp=!1}t.restore()}else try{t.drawImage(i,o,a,h,u,C,M,Math.min(r.width,f),Math.min(r.height,p)),t instanceof Ft&&(this.Yb=[o,a,h,u,C,M,Math.min(r.width,f),Math.min(r.height,p)])}catch{this.Rp=!1}switch(this.flip){case 0:break;case 2:t.scale(-1,1),t.translate(-Math.min(r.width,f),0);break;case 1:t.scale(1,-1),t.translate(0,-Math.min(r.height,p));break;case 3:t.scale(-1,-1),t.translate(-Math.min(r.width,f),-Math.min(r.height,p))}}get naturalBounds(){return this.zi}Wu(t,e,i,n){const s=this.desiredSize,r=this.zs(!0),o=this.tl,a=this.bf;let l=0,h=0;(a||!this.hn&&o&&o.complete)&&(this.hn=!0),null===o?(isFinite(s.width)||(t=i),isFinite(s.height)||(e=n)):(l=a?+o.width:o.naturalWidth,h=a?+o.height:o.naturalHeight),isFinite(s.width)||2===r||5===r?(isFinite(t)||(this.sourceRect.isReal()?t=this.sourceRect.width:null!==o&&(t=l)),i=0):null!==o&&!1!==this.hn&&(t=this.sourceRect.isReal()?this.sourceRect.width:l),isFinite(s.height)||2===r||4===r?(isFinite(e)||(this.sourceRect.isReal()?e=this.sourceRect.height:null!==o&&(e=h)),n=0):null!==o&&!1!==this.hn&&(e=this.sourceRect.isReal()?this.sourceRect.height:h),isFinite(s.width)&&(t=s.width),isFinite(s.height)&&(e=s.height);const u=this.maxSize,c=this.minSize;i=Math.max(i||0,c.width),n=Math.max(n||0,c.height),t=Math.min(u.width,t),e=Math.min(u.height,e),t=Math.max(i,t),e=Math.max(n,e),null!==o&&!o.complete&&(isFinite(t)||(t=0),isFinite(e)||(e=0)),this.zi.Fn(t,e),this.Wn(0,0,t,e)}fh(t,e,i,n){this.commonArrange(t,e,i,n)}static vp=new n;static f1=0;static _v=4}class ae{Vt;constructor(){this.Vt=null}sT(t,e,i,n){null===this.Vt&&(this.Vt=[]);const s=new Rt(null),r=s.li,o=1/t;if(s.width=e/t,s.height=i/t,0===s.width||0===s.height)return;const a=new le(s.Tt,t);let l=n,h=1;if(this.Vt.length>0){const t=this.Vt[this.Vt.length-1];l=t.dt,h=t.bd}r.setTransform(o*h,0,0,o*h,0,0),r.commitTransform(),r.drawImage(l,0,0),this.Vt.push(a)}}class le{dt;bd;constructor(t,e){this.dt=t,this.bd=e}}class he{bi;Kg;constructor(){this.Kg=new A,this.bi=null}Ri(t){null!==t?(this.Kg=t,t.figures.clear()):this.Kg=new A,this.bi=null}hu(t,e,i,n,s,r){if(void 0!==n&&!0===n){const i=new D(1);i.endX=t,i.endY=e,this.bi.segments.add(i)}else this.bi=new P,this.bi.startX=t,this.bi.startY=e,this.bi.isFilled=i,this.bi.isEvenOdd=r||!1,this.Kg.figures.add(this.bi);void 0!==s&&(this.bi.isShadowed=s)}rF(){const t=this.bi.segments.length;t>0&&this.bi.segments.elt(t-1).close()}lF(){this.bi.segments.length>0&&(this.bi.isFilled=!0)}hF(t){this.bi.isShadowed=t}RE(t){this.bi.isEvenOdd=t}sF(t,e,i){void 0===i&&(i=!1);const n=new D(1);n.endX=t,n.endY=e,i&&n.close(),this.bi.segments.add(n)}lr(t,e,i){void 0===i&&(i=!1);const n=new D(2);n.endX=t,n.endY=e,i&&n.close(),this.bi.segments.add(n)}hr(t,e,i,n,s,r,o){void 0===o&&(o=!1);const a=new D(3);a.point1X=t,a.point1Y=e,a.point2X=i,a.point2Y=n,a.endX=s,a.endY=r,o&&a.close(),this.bi.segments.add(a)}Nw(t,e,i,n,s){void 0===s&&(s=!1);const r=new D(4);r.point1X=t,r.point1Y=e,r.endX=i,r.endY=n,s&&r.close(),this.bi.segments.add(r)}nF(t,e,i,n,s,r,o){void 0===r&&(r=0),void 0===o&&(o=!1);const a=new D(5);a.startAngle=t,a.sweepAngle=e,a.centerX=i,a.centerY=n,a.radiusX=s,a.radiusY=0!==r?r:s,o&&a.close(),this.bi.segments.add(a)}oF(t,e,i,n,s,r,o,a){void 0===a&&(a=!1);const l=new D(6,r,o,t,e,i,n,s);a&&l.close(),this.bi.segments.add(l)}static _2=null;static vC(t){const e=he._2;if(null!==e)return he._2=null,e.Ri(t),e;{const e=new he;return e.Ri(t),e}}static OC(t){he._2=t}}{const t=function(t,e){const i=t.toLowerCase(),n=S.In;n[t]=e,n[i]=t};t("Rectangle",((t,e,i)=>{const n="r"+e+","+i;let s=S.or[n];return void 0!==s||(s=new A(2),s.endX=e,s.endY=i,S.rr<S.Vg&&(S.or[n]=s,S.rr++)),s})),t("Square",((t,e,i)=>{const n="s"+e+","+i;let s=S.or[n];return void 0!==s||(s=new A(2),s.endX=e,s.endY=i,s.defaultStretch=6,S.rr<S.Vg&&(S.or[n]=s,S.rr++)),s}));const e=(t,e,i,n,s)=>{(isNaN(n)||n<0)&&(n=5),isNaN(s)&&(s=15);const r="rr"+e+","+i+","+n+","+s;let o=S.or[r];if(void 0!==o)return o;let a=n;1&~s?a=0:(a=Math.min(a,2&~s?e:e/3),a=Math.min(a,8&~s?i:i/3));const l=new P(a,0,!0);o=(new A).add(l);const h=w.TopLeft.copy(),u=w.BottomRight.copy();if(2&~s)l.add(new D(2,e,0));else{let t=n;t=Math.min(t,1&~s?e:e/3),t=Math.min(t,4&~s?i:i/3);const r=t*S.Rn;l.add(new D(2,e-t,0)).add(new D(3,e,t,e-r,0,e,r)),h.offsetY=r,u.offsetX=-r}if(4&~s)l.add(new D(2,e,i));else{let t=n;t=Math.min(t,8&~s?e:e/3),t=Math.min(t,2&~s?i:i/3);const r=t*S.Rn;l.add(new D(2,e,i-t)).add(new D(3,e-t,i,e,i-r,e-r,i)),u.offsetX=-r,u.offsetY=-r}if(8&~s)l.add(new D(2,0,i));else{let t=n;t=Math.min(t,4&~s?e:e/3),t=Math.min(t,1&~s?i:i/3);const r=t*S.Rn;l.add(new D(2,t,i)).add(new D(3,0,i-t,r,i,0,i-r)),h.offsetX=r,u.offsetY=-r}if(1&~s)l.add(new D(2,0,0).close());else{const t=a*S.Rn;l.add(new D(2,0,a)).add(new D(3,a,0,0,t,t,0).close()),h.offsetX=t,h.offsetY=t}return o.spot1=h,o.spot2=u,S.rr<S.Vg&&(S.or[r]=o,S.rr++),o};t("RoundedRectangle",((t,i,n)=>{const s=t?t.parameter1:NaN,r=t?t.parameter2:NaN;return e(t,i,n,s,r)})),t("Border","RoundedRectangle"),t("RoundedTopRectangle",((t,i,n)=>{const s=t?t.parameter1:NaN;return e(t,i,n,s,3)})),t("RoundedBottomRectangle",((t,i,n)=>{const s=t?t.parameter1:NaN;return e(t,i,n,s,12)})),t("RoundedLeftRectangle",((t,i,n)=>{const s=t?t.parameter1:NaN;return e(t,i,n,s,9)})),t("RoundedRightRectangle",((t,i,n)=>{const s=t?t.parameter1:NaN;return e(t,i,n,s,6)})),t("Ellipse",((t,e,i)=>{const n="e"+e+","+i;let s=S.or[n];return void 0!==s||(s=new A(3),s.endX=e,s.endY=i,s.spot1=w.zk,s.spot2=w.Xk,S.rr<S.Vg&&(S.or[n]=s,S.rr++)),s})),t("Circle",((t,e,i)=>{const n="c"+e+","+i;let s=S.or[n];return void 0!==s||(s=new A(3),s.endX=e,s.endY=i,s.spot1=w.zk,s.spot2=w.Xk,s.defaultStretch=6,S.rr<S.Vg&&(S.or[n]=s,S.rr++)),s})),t("TriangleRight",((t,e,i)=>(new A).add(new P(0,0).add(new D(2,e,.5*i)).add(new D(2,0,i).close())).setSpots(0,.25,.5,.75))),t("TriangleDown",((t,e,i)=>(new A).add(new P(0,0).add(new D(2,e,0)).add(new D(2,.5*e,i).close())).setSpots(.25,0,.75,.5))),t("TriangleLeft",((t,e,i)=>(new A).add(new P(e,i).add(new D(2,0,.5*i)).add(new D(2,e,0).close())).setSpots(.5,.25,1,.75))),t("TriangleUp",((t,e,i)=>(new A).add(new P(e,i).add(new D(2,0,i)).add(new D(2,.5*e,0).close())).setSpots(.25,.5,.75,1))),t("Triangle","TriangleUp"),t("Diamond",((t,e,i)=>(new A).add(new P(.5*e,0).add(new D(2,0,.5*i)).add(new D(2,.5*e,i)).add(new D(2,e,.5*i).close())).setSpots(.25,.25,.75,.75))),t("LineH",((t,e,i)=>{const n=new A(1);return n.startX=0,n.startY=i/2,n.endX=e,n.endY=i/2,n})),t("LineV",((t,e,i)=>{const n=new A(1);return n.startX=e/2,n.startY=0,n.endX=e/2,n.endY=i,n})),t("None","Rectangle"),t("BarH","Rectangle"),t("BarV","Rectangle"),t("MinusLine","LineH"),t("PlusLine",((t,e,i)=>(new A).add(new P(0,i/2,!1).add(new D(2,e,i/2)).add(new D(1,e/2,0)).add(new D(2,e/2,i))))),t("XLine",((t,e,i)=>(new A).add(new P(0,i,!1).add(new D(2,e,0)).add(new D(1,0,0)).add(new D(2,e,i))))),t("LineRight",((t,e,i)=>(new A).add(new P(.25*e,0,!1).add(new D(2,.75*e,.5*i)).add(new D(2,.25*e,i))))),t("LineDown",((t,e,i)=>(new A).add(new P(0,.25*i,!1).add(new D(2,.5*e,.75*i)).add(new D(2,e,.25*i))))),t("LineLeft",((t,e,i)=>(new A).add(new P(.75*e,0,!1).add(new D(2,.25*e,.5*i)).add(new D(2,.75*e,i))))),t("LineUp",((t,e,i)=>(new A).add(new P(0,.75*i,!1).add(new D(2,.5*e,.25*i)).add(new D(2,e,.75*i))))),t("Capsule",((t,e,i)=>{const n=new A;if(e<i){const s=e/2,r=new P(0,s,!0);n.add(r),r.add(new D(5,180,180,s,s,s,s)),r.add(new D(2,e,i-s)),r.add(new D(5,0,180,s,i-s,s,s)),r.add(new D(2,0,s));const o=isFinite(t.parameter1)?t.parameter1:.156*e;return n.spot1=new w(0,0,0,o),n.spot2=new w(1,1,0,-o),n}if(e>i){const s=i/2,r=new P(s,0,!0);n.add(r),r.add(new D(2,e-s,0)),r.add(new D(5,270,180,e-s,s,s,s)),r.add(new D(2,s,i)),r.add(new D(5,90,180,s,s,s,s));const o=isFinite(t.parameter1)?t.parameter1:.156*i;return n.spot1=new w(0,0,o,0),n.spot2=new w(1,1,-o,0),n}return n.type=3,n.endX=e,n.endY=i,n.spot1=w.zk,n.spot2=w.Xk,n}));const i=(t,e)=>new P(t,e,!1,!1),n=(t,e,i)=>t.add(new D(2,e,i)),s=(t,e,i)=>t.add(new D(1,e,i));t("Borders",((t,e,r)=>{let o=t?t.parameter1:NaN;isNaN(o)?o=10:o&=15;const a=new A;let l;return 10===o?(l=i(e,0),n(l,e,r),s(l,0,r),n(l,0,0)):5===o?(l=i(0,0),n(l,e,0),s(l,e,r),n(l,0,r)):1===o?(l=i(0,0),n(l,e,0),s(l,e,r)):2===o?(l=i(e,0),n(l,e,r)):4===o?(l=i(e,r),n(l,0,r)):8===o?(l=i(0,r),n(l,0,0),s(l,e,r)):3===o?(l=i(0,0),n(l,e,0),n(l,e,r)):6===o?(l=i(e,0),n(l,e,r),n(l,0,r)):12===o?(l=i(e,r),n(l,0,r),n(l,0,0)):9===o?(l=i(0,r),n(l,0,0),n(l,e,0)):7===o?(l=i(0,0),n(l,e,0),n(l,e,r),n(l,0,r)):14===o?(l=i(e,0),n(l,e,r),n(l,0,r),n(l,0,0)):13===o?(l=i(e,r),n(l,0,r),n(l,0,0),n(l,e,0)):11===o?(l=i(0,r),n(l,0,0),n(l,e,0),n(l,e,r)):15===o?(l=i(0,0),n(l,e,0),n(l,e,r),n(l,0,r),l.add(new D(2,0,0).close())):(l=i(0,0),s(l,e,r)),a.add(l),a}))}S.Bg={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};var ue=(t=>(t[t.None=0]="None",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Shown=4]="Shown",t[t.Hidden=8]="Hidden",t[t.NodeSized=16]="NodeSized",t[t.GroupLayout=32]="GroupLayout",t[t.NodeReplaced=64]="NodeReplaced",t[t.Standard=127]="Standard",t[t.All=16777215]="All",t))(ue||{});class ce extends qt{w;zo;H;sl;nl;Xo;ri;Yo;wh;Gs;Ko;kd;WS;nT;Ip;Ep;constructor(t,e){let i;void 0===t||t instanceof Ut||"string"==typeof t?i=t:t&&(e=t),super(i),this.w=2408959,this.zo="",this.H=null,this.sl="",this.nl=null,this.Xo=null,this.ri="",this.Yo=null,this.wh=null,this.Gs=new y(NaN,NaN).u(),this.Ko=null,this.kd=NaN,this.WS=-1,this.nT=new x,this.Ip=null,this.Ep=NaN,e&&Object.assign(this,e)}cloneProtected(t){super.cloneProtected(t),t.w=49152|-4097&this.w,t.zo=this.zo,null!==this.H&&(this.H.fi?t.H=this.H:t.H=this.H.copy()),t.sl=this.sl,t.Xo=null,t.ri=this.ri,t.Gs.a(this.Gs),t.kd=this.kd}vo(t){super.vo(t),t.uh(),t.nl=null,t.Ko=null,t.Ip=null}toString(){let t=e.Dn(this.constructor)+"#"+u.as(this);return null!==this.data&&(t+="("+e.toString(this.data)+")"),t}static LayoutNone=0;static LayoutAdded=1;static LayoutRemoved=2;static LayoutShown=4;static LayoutHidden=8;static LayoutNodeSized=16;static LayoutGroupLayout=32;static LayoutNodeReplaced=64;static LayoutStandard=127;static LayoutAll=16777215;ji(){return null===this.H?this.H=new de:this.H.fi&&(this.H=this.H.copy()),this.H}ah(){super.ah(),null!==this.H&&(this.H.fi=!0)}qc(t,e,i,n,s,r,o){const a=this.diagram;null!==a&&(3===t&&"elements"===e?s instanceof qt?s.Kr((t=>{a.partManager.IM(t,a)})):s instanceof oe&&a.YM(s):4===t&&"elements"===e&&(s instanceof qt?s.Kr((t=>a.partManager.EM(t,a))):s instanceof oe&&a.KM(s)),a.raiseChangedEvent(t,e,i,n,s,r,o))}updateTargetBindings(t){if(super.updateTargetBindings(t),null===this.data)return;const e=this.C.r,i=e.length;for(let t=0;t<i;t++){const i=e[t];i instanceof qt&&i.Kr((t=>{null!==t.data&&t.updateTargetBindings()}))}const n=this.adornments;for(;n.next();)n.value.updateTargetBindings(t)}Do(){if(super.Do(),this.L2()){const t=this.C.r,e=t.length;for(let i=0;i<e;i++){const e=t[i];e instanceof qt&&e.Kr((t=>t.Do()))}}const t=this.adornments;for(;t.next();)t.value.Do()}updateRelationshipsFromData(){null!==this.data&&this.diagram?.partManager.updateRelationshipsFromData(this)}get key(){const t=this.diagram;if(null!==t)return t.model.getKeyForNodeData(this.data)}get adornments(){return null===this.Xo?s.instance:this.Xo.iteratorValues}findAdornment(t){const e=this.Xo;return null===e?null:e.get(t)}addAdornment(t,e){if(null===e)return;let i=null,n=this.Xo;if(null!==n&&(i=n.get(t)),i!==e){if(null!==i){const t=i.diagram;null!==t&&t.remove(i)}null===n&&(n=new m,this.Xo=n),e.zo!==t&&(e.category=t),n.set(t,e);const s=this.diagram;if(null!==s){s.add(e);const t=e.adornedObject;if(null!==t){const i=t.findBindingPanel();null!==i&&(e.data=i.data)}}}}removeAdornment(t){const e=this.Xo;if(null===e)return;const i=e.get(t);if(null!==i){const t=i.diagram;null!==t&&(t.remove(i),i.data=null)}e.delete(t),0===e.count&&(this.Xo=null)}clearAdornments(){const t=this.Xo;if(null===t)return;const i=e.et(),n=t.iterator;for(;n.next();){const t=n.key;i.push(t)}const s=i.length;for(let t=0;t<s;t++)this.removeAdornment(i[t]);e.J(i)}updateAdornments(){const t=this.diagram;if(null===t)return;this.tO(t),this.iO(t);let e=this.adornments;for(;e.next();){const t=e.value;t.c(),t.hasPlaceholder()&&t.placeholder?.c()}for(e=this.adornments;e.next();)e.value.updateTargetBindings()}invalidateAdornments(){const t=this.diagram;null!==t&&(t.Ql(),!0!==this.oT()&&this.rT(!0))}JS(){!1!==this.oT()&&(this.updateAdornments(),this.rT(!1))}tO(t){const e="Selection";if(this.isSelected&&this.selectionAdorned){const i=this.selectionObject;if(null!==i&&this.actualBounds.isReal()&&this.isVisible()&&i.isVisibleObject()&&i.actualBounds.isReal()){let n=this.findAdornment(e);if(null===n){let e=this.selectionAdornmentTemplate;null===e&&(e=this.Nl()?t.linkSelectionAdornmentTemplate:this instanceof Ae?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),n=e.copy(),null!==n&&(this.Nl()&&this.selectionObject===this.path&&(n.type=qt.Link),n.adornedObject=i)}if(null!==n)return n.type===qt.Link&&n.c(),void this.addAdornment(e,n)}}this.removeAdornment(e)}iO(t){const e=this;t.toolManager.mouseDownTools.each((t=>{t.isEnabled&&t.updateAdornments(e)})),t.toolManager.updateAdornments(e)}jS(t){this.Yo=t,null===t&&this.QR()}get layer(){return this.Yo}get diagram(){const t=this.Yo;return null==t?null:t.diagram}get layerName(){return this.sl}set layerName(t){const e=this.sl;if(e===t)return;let i=this.diagram;if(null!==i&&(null===i.findLayer(t)||i.partManager.addsToTemporaryLayer))return;this.sl=t,null!==i&&i.invalidateDocumentBounds(),this.t("layerName",e,t);const n=this.layer;if(null===n||n.name===t||(i=n.diagram,null===i))return;const s=i.findLayer(t);if(null===s||s===n)return;let r=n.te(-1,this,!0);r>=0&&i.raiseChangedEvent(4,"parts",n,this,null,r,!0),r=s.Wh(99999999,this,!0),n.visible!==s.visible&&this.Ei(s.visible),r>=0&&i.raiseChangedEvent(3,"parts",s,null,this,!0,r);const o=this.layerChanged;if(null===o)return;const a=i.X;i.X=!0,o(this,n,s),i.X=a}get layerChanged(){return null!==this.H?this.H.Up:null}set layerChanged(t){const i=this.layerChanged;i!==t&&(null!==t&&e.k(t,ce,"layerChanged"),this.ji().Up=t,this.t("layerChanged",i,t))}get zOrder(){return this.kd}set zOrder(t){const e=this.kd;if(e===t)return;this.kd=t;const i=this.layer;null!==i&&i.kx(-1,this),this.t("zOrder",e,t);const n=this.diagram;null!==n&&n.S()}eO(){const t=this.layer;null!==t&&t.kx(-1,this)}g1(){if(!1!==this.th())return;this.tN(!0),this.$c();const t=this.diagram;null!==t&&(t._m(this),t.requestUpdate())}lT(){if(this.w|=2097152,!1===this.th())return;const t=this.position,e=this.location;(!e.isReal()||!t.isReal())&&this.hT(t,e);const i=this.Ni,n=x.l().a(i);i.Nt(),i.x=t.x,i.y=t.y,i.u(),this.Ju(n,i),x.e(n),this.tN(!1),this.$c()}Wn(t,e,i,n){const s=this.se;s.i(t,e,i,n),null===this.wi&&(this.wi=new k);const r=this.wi;r.Ri(),this.g0(r,t,e,i,n),this.wi=r,r.Yk()||r.vg(s)}g0(t,e,i,n,s){if(1!==this.tt&&t.tt(this.tt),0===this.Yt)return;let r=w.Center;this.locationSpot.isSpot()&&(r=this.locationSpot);const o=y.l();if(this.locationObject!==this){const t=this.locationObject,e=t.naturalBounds;o.setSpot(e.x,e.y,e.width,e.height,r),null!==t.wi&&t.wi.gt(o),o.offset(-t.measuredBounds.x,-t.measuredBounds.y);let i=t.panel;for(;null!==i&&i!==this;)null!==i.wi&&i.wi.gt(o),o.offset(-i.measuredBounds.x,-i.measuredBounds.y),i=i.panel}else o.setSpot(e,i,n,s,r);t.cs(this.Yt,o.x,o.y),y.e(o)}get locationObject(){if(null===this.Ko)if(this instanceof fe&&this.type!==qt.Link&&this.hasPlaceholder())this.Ko=this.placeholder;else{const t=this.locationObjectName;if(""!==t){const e=this.findObject(t);this.Ko=null!==e?e:this}else this.Ko=this}return this.Ko?.visible?this.Ko:this}get minLocation(){return null!==this.H?this.H.Bp:y.mC}set minLocation(t){const e=this.minLocation;e.equals(t)||(t=t.P(),this.ji().Bp=t,this.t("minLocation",e,t))}get maxLocation(){return null!==this.H?this.H.Vp:y.pC}set maxLocation(t){const e=this.maxLocation;e.equals(t)||(t=t.P(),this.ji().Vp=t,this.t("maxLocation",e,t))}get locationObjectName(){return null!==this.H?this.H.zp:""}set locationObjectName(t){const e=this.locationObjectName;e!==t&&(this.ji().zp=t,this.Ko=null,this.c(),this.t("locationObjectName",e,t))}get locationSpot(){return null!==this.H?this.H.Xp:w.TopLeft}set locationSpot(t){const e=this.locationSpot;e.equals(t)||(t=t.P(),this.ji().Xp=t,this.c(),this.t("locationSpot",e,t))}move(t,e){!0===e?this.location=t:this.position=t}moveTo(t,e,i){const n=y.V(t,e);this.move(n,i),y.e(n)}isVisible(){if(!this.visible)return!1;const t=this.layer;if(null!==t){if(!t.visible)return!1;const e=t.diagram;if(null!==e&&e.animationManager.lx(this))return!0}const e=this.containingGroup;return!!(null===e||e.isSubGraphExpanded&&e.isVisible())}Ei(t){const e=this.diagram;t?(this.invalidateLayout(4),this.invalidateAdornments(),null!==e&&e._m(this)):(this.invalidateLayout(8),this.clearAdornments()),this.uh(),null!==e&&(e.invalidateDocumentBounds(),e.S())}findObject(t){if(this.name===t)return this;let e=this.Ip;if(null===e&&(this.Ip=e=new m),null!==e.get(t))return e.get(t);const i=super.findObject(t);return null!==i?(e.set(t,i),i):(e.set(t,null),null)}L0(){this.Ip=null}getRelativePoint(t,e,i){void 0===i&&(i=new y);const n=e.isNoSpot()?w.Center:e,s=t.naturalBounds;if(i.i(s.width*n.x+n.offsetX,s.height*n.y+n.offsetY),null===t||t===this)return i;t.T.gt(i);let r=t.panel;for(;null!==r&&r!==this;)r.T.gt(i),r=r.panel;return null!==this.wi&&this.wi.gt(i),i.offset(-this.se.x,-this.se.y),i}getDocumentBounds(t){return void 0===t&&(t=new x),t.a(this.actualBounds)}ensureBounds(){this.ht(1/0,1/0),this.Bt()}EA(t){const e=this.locationSpot,i=this.locationObject;let n=i.naturalBounds;n.isReal()||(n=x.Fg);const s=i instanceof Jt?i.strokeWidth:0;if(t.setSpot(0,0,n.width+s,n.height+s,e),i!==this){t.offset(-s/2,-s/2),i.T.gt(t);let e=i.panel;for(;null!==e&&e!==this;)e.T.gt(t),e=e.panel}return null!==this.wi&&this.wi.gt(t),t.offset(-this.se.x,-this.se.y),t}qh(t,e){const i=void 0===e?this.nT:e,n=this.sO(),s=2*n;if(!this.isShadowed)return i.i(t.x-1-n,t.y-1-n,t.width+2+s,t.height+2+s),i;let r=t.x,o=t.y,a=t.width,l=t.height;const h=this.shadowBlur,u=this.shadowOffset;return a+=h,l+=h,r-=h/2,o-=h/2,u.x>0?a+=u.x:(r+=u.x,a-=u.x),u.y>0?l+=u.y:(o+=u.y,l-=u.y),i.i(r-1,o-1,a+2,l+2),i}Vv(){return this.type===qt.Link&&this instanceof fe&&"Selection"===this.category&&this.adornedObject instanceof Jt&&this.adornedPart.findMainElement()===this.adornedObject?this.adornedObject.strokeWidth:0}sO(){return isNaN(this.Ep)&&(this.Ep=this.KA()),this.Ep}cf(){this.Ep=NaN}Bt(){if(!1===this._e())return void this.lT();this.Jn(!1);const t=this.Ni,e=x.l();e.a(t);const i=this.Ml();this.fh(0,0,this.se.width,this.se.height);const n=this.position;this.hT(n,this.location),t.Nt(),t.x=n.x,t.y=n.y,t.u(),this.Ju(e,t),e.equals(t)?this.ps(i):this.ke()&&(!S.f(e.width,t.width)||!S.f(e.height,t.height))&&this.WS>=0&&this.invalidateLayout(16),x.e(e),this.tN(!1)}Ju(t,e){const i=this.diagram;if(null===i)return;let n=!1;if(!1===i._h&&t.isReal()){const s=x.l();s.a(i.documentBounds),s.subtractMargin(i.padding),t.x>s.x&&t.y>s.y&&t.right<s.right&&t.bottom<s.bottom&&e.x>s.x&&e.y>s.y&&e.right<s.right&&e.bottom<s.bottom&&(n=!0),x.e(s)}(!0===this.nO()||!t.equals(e))&&this.HL(n,i),i.S(),(t.isReal()||e.isReal())&&!t.equalsApproxClose(e)&&(this instanceof ge&&!i.undoManager.isUndoingRedoing&&this.invalidateConnectedLinks(),this.uh())}get location(){return this.Gs}set location(t){const e=t.x,i=t.y,n=this.Gs;(n.x!==e&&(!isNaN(n.x)||!isNaN(e))||n.y!==i&&(!isNaN(n.y)||!isNaN(i)))&&(t=t.copy(),this.oO(t,n)&&this.t("location",n,t.copy()))}oO(t,e){if(this.Nl())return!1;if(this.Gs=t,this.w|=2097152,!1===this._e()){this.g1();const i=this.at;if(i.isReal()){const n=this.diagram;if(null===n||n.animationManager.isTicking||!n.undoManager.isUndoingRedoing){const s=i.copy();i.i(i.x+(t.x-e.x),i.y+(t.y-e.y)),this.aT(n,i,s.x,s.y),this.t("position",s,i.copy())}}}return!0}M2(t,e,i){if(this.Nl()||!t.isReal())return!1;const n=this.diagram;if(null!==n&&this.aT(n,t,e,i),this.at=t,this.w&=-2097153,this.Gs.isReal()&&(null===n||n.animationManager.isTicking||!n.undoManager.isUndoingRedoing)){const n=this.Gs;this.Gs=new y(n.x+(t.x-e),n.y+(t.y-i)),this.t("location",n,this.Gs.copy())}return!1===this.th()&&!1===this._e()&&(this.g1(),this.lT()),!0}aT(t,e,i,n){if(null===t||this instanceof fe)return;const s=t.animationManager;s.pi&&s.gL(this,new y(i,n),e,!1)}bc(t,e,i){const n=this.Gs,s=this.at;if(i){if(n.x===t&&n.y===e)return;this.th()||this._e()?s.i(NaN,NaN):s.i(s.x+t-n.x,s.y+e-n.y),n.i(t,e)}else{if(s.x===t&&s.y===e)return;n.i(n.x+t-s.x,n.y+e-s.y),s.i(t,e)}this.g1()}N2(){this.w&=-2097153,this.g1()}hT(t,e){const i=this.EA(y.l()),n=this.diagram,s=e.isReal(),r=t.isReal();s&&r?2097152&this.w?this.cT(t,e,n,i):this.fT(t,e,n,i):s?this.cT(t,e,n,i):r&&this.fT(t,e,n,i),this.w|=2097152,y.e(i),this.$c()}cT(t,e,i,n){const s=t.x,r=t.y;if(t.i(e.x-n.x,e.y-n.y),null!==i){const e=i.animationManager,n=e.defaultAnimation.isAnimating;!n&&e.pi&&!(this instanceof fe)&&e.gL(this,new y(s,r),t,!1),!n&&(t.x!==s||t.y!==r)&&this.t("position",new y(s,r),t.copy())}}fT(t,e,i,n){const s=e.copy();e.i(t.x+n.x,t.y+n.y),!e.equals(s)&&null!==i&&this.t("location",s,e.copy())}HL(t,e){this.w2(!1),this instanceof ge&&e.JM(this),!this.layer.isTemporary&&!t&&e.invalidateDocumentBounds();const i=this.Ni,n=e.viewportBounds;n.isReal()?this.Ml()?(i.intersectsRectPlus(n,10)||this.ps(!1),this.updateAdornments()):this.isVisible()&&i.intersectsRect(n)?(this.ps(!0),this.updateAdornments()):this.invalidateAdornments():e.Ic=!0}Yr(){return!0}ke(){return!0}Nl(){return!1}Xs(){return!0}hasPlaceholder(){return!1}get category(){return this.zo}set category(t){const e=this.zo;if(e===t)return;null!==this.svg&&(this.svg.remove(),this.Ve(!0));const i=this.diagram,n=this.data;let s=null;if(null!==i&&null!==n&&!(this instanceof fe)){const t=i.model.undoManager;t.isEnabled&&!t.isUndoingRedoing&&(s=this.clone(),s.C.addAll(this.C))}if(this.zo=t,this.t("category",e,t),null===i||null===n||this instanceof fe){if(this instanceof fe){const t=this.adornedPart;if(null!==t){const i=t.Xo;null!==i&&i.delete(e),t.addAdornment(this.category,this)}}}else{const r=i.model;if(r.undoManager.isUndoingRedoing)return;if(this.Nl()){i.partManager.setLinkCategoryForData(n,t);const s=i.partManager.findLinkTemplateForCategory(t);if(null!==s){s.Et();const i=s.copy();null!==i&&this.iN(i,e,t)}}else{null!==r&&r.setCategoryForNodeData(n,t);const s=i.partManager.findTemplateForNodeData(n,t);if(null!==s){s.Et();const i=s.copy();if(null!==i&&!(i instanceof be)){const n=this.location.copy();this.iN(i,e,t),this.location.isReal()||(this.location=n)}}}if(null!==s){const t=this.clone();t.C.addAll(this.C),this.t("self",s,t)}}}get self(){return this}set self(t){this.iN(t,this.category,t.category)}static uT=!1;iN(t,i,n){t.constructor!==this.constructor&&(ce.uT||(ce.uT=!0,e.ni('Should not change the class of the Part when changing category from "'+i+'" to "'+n+'"'),e.ni("  Old class: "+e.Dn(this.constructor)+", new class: "+e.Dn(t.constructor)+", part: "+this.toString()))),this.clearAdornments();const s=this.data,r=this.layerName,o=this.isSelected,a=this.isHighlighted;let l=!0,h=!0,u=!1;this instanceof ge&&(l=this.isTreeLeaf,h=this.isTreeExpanded,u=this.wasTreeExpanded),t.vo(this),t.cloneProtected(this),this.zo=n,null!==this.svg&&(this.svg.remove(),this.svg=null,this.Ve(!0)),this.c(),this.S();const c=this.diagram;let d=!0;null!==c&&(d=c.skipsUndoManager,c.skipsUndoManager=!0),this._t=s,this.w=o?4096|this.w:-4097&this.w,this.w=a?524288|this.w:-524289&this.w,this instanceof ge&&(this.v=l?4|this.v:-5&this.v,this.v=h?1|this.v:-2&this.v,this.v=u?2|this.v:-3&this.v),null!==s&&this.updateTargetBindings();const f=this.layerName;f!==r&&(this.sl=r,this.layerName=f),null!==c&&(c.skipsUndoManager=d),this.ke()&&this.invalidateLayout(64)}canCopy(){if(!this.copyable)return!1;const t=this.layer;if(null===t)return!0;if(!t.allowCopy)return!1;const e=t.diagram;return null===e||!!e.allowCopy}canDelete(){if(!this.deletable)return!1;const t=this.layer;if(null===t)return!0;if(!t.allowDelete)return!1;const e=t.diagram;return null===e||!!e.allowDelete}canEdit(){if(!this.textEditable)return!1;const t=this.layer;if(null===t)return!0;if(!t.allowTextEdit)return!1;const e=t.diagram;return null===e||!!e.allowTextEdit}canGroup(){if(!this.groupable)return!1;const t=this.layer;if(null===t)return!0;if(!t.allowGroup)return!1;const e=t.diagram;return null===e||!!e.allowGroup}canMove(){if(!this.movable)return!1;const t=this.layer;if(null===t)return!0;if(!t.allowMove)return!1;const e=t.diagram;return null===e||!!e.allowMove}canReshape(){if(!this.reshapable)return!1;const t=this.layer;if(null===t)return!0;if(!t.allowReshape)return!1;const e=t.diagram;return null===e||!!e.allowReshape}canResize(){if(!this.resizable)return!1;const t=this.layer;if(null===t)return!0;if(!t.allowResize)return!1;const e=t.diagram;return null===e||!!e.allowResize}canRotate(){if(!this.rotatable)return!1;const t=this.layer;if(null===t)return!0;if(!t.allowRotate)return!1;const e=t.diagram;return null===e||!!e.allowRotate}canSelect(){if(!this.selectable)return!1;const t=this.layer;if(null===t)return!0;if(!t.allowSelect)return!1;const e=t.diagram;return null===e||!!e.allowSelect}get copyable(){return!!(1&this.w)}set copyable(t){const e=!!(1&this.w);e!==t&&(this.w=1^this.w,this.t("copyable",e,t))}get deletable(){return!!(2&this.w)}set deletable(t){const e=!!(2&this.w);e!==t&&(this.w=2^this.w,this.t("deletable",e,t))}get textEditable(){return!!(4&this.w)}set textEditable(t){const e=!!(4&this.w);e!==t&&(this.w=4^this.w,this.t("textEditable",e,t),this.invalidateAdornments())}get groupable(){return!!(8&this.w)}set groupable(t){const e=!!(8&this.w);e!==t&&(this.w=8^this.w,this.t("groupable",e,t))}get movable(){return!!(16&this.w)}set movable(t){const e=!!(16&this.w);e!==t&&(this.w=16^this.w,this.t("movable",e,t))}get selectionAdorned(){return!!(32&this.w)}set selectionAdorned(t){const e=!!(32&this.w);e!==t&&(this.w=32^this.w,this.t("selectionAdorned",e,t),this.invalidateAdornments())}get isInDocumentBounds(){return!!(64&this.w)}set isInDocumentBounds(t){const e=!!(64&this.w);if(e!==t){this.w=64^this.w;const i=this.diagram;null!==i&&i.invalidateDocumentBounds(),this.t("isInDocumentBounds",e,t)}}get isLayoutPositioned(){return!!(128&this.w)}set isLayoutPositioned(t){const e=!!(128&this.w);e!==t&&(this.w=128^this.w,this.t("isLayoutPositioned",e,t),this.invalidateLayout(t?4:8))}get selectable(){return!!(256&this.w)}set selectable(t){const e=!!(256&this.w);e!==t&&(this.w=256^this.w,this.t("selectable",e,t),this.invalidateAdornments())}get reshapable(){return!!(512&this.w)}set reshapable(t){const e=!!(512&this.w);e!==t&&(this.w=512^this.w,this.t("reshapable",e,t),this.invalidateAdornments())}get resizable(){return!!(1024&this.w)}set resizable(t){const e=!!(1024&this.w);e!==t&&(this.w=1024^this.w,this.t("resizable",e,t),this.invalidateAdornments())}get rotatable(){return!!(2048&this.w)}set rotatable(t){const e=!!(2048&this.w);e!==t&&(this.w=2048^this.w,this.t("rotatable",e,t),this.invalidateAdornments())}get isSelected(){return!!(4096&this.w)}set isSelected(t){const e=!!(4096&this.w);if(e!==t){const i=this.diagram;if(t){if(!this.canSelect())return;if(null!==i){const t=i.maxSelectionCount;if(i.selection.count>=t)return}}this.w=4096^this.w;let n=!1;if(null!==i){n=i.skipsUndoManager,i.skipsUndoManager=!0;const e=i.selection;e.Nt(),t?e.add(this):e.delete(this),e.u()}this.t("isSelected",e,t),this.invalidateAdornments();const s=this.selectionChanged;null!==s&&s(this),null!==i&&(i.requestUpdate(),i.skipsUndoManager=n)}}get isHighlighted(){return!!(524288&this.w)}set isHighlighted(t){const e=!!(524288&this.w);if(e!==t){this.w=524288^this.w;const i=this.diagram;if(null!==i){const e=i.highlighteds;e.Nt(),t?e.add(this):e.delete(this),e.u()}this.t("isHighlighted",e,t),this.S();const n=this.highlightedChanged;null!==n&&n(this)}}get isShadowed(){return!!(8192&this.w)}set isShadowed(t){const e=!!(8192&this.w);e!==t&&(this.w=8192^this.w,this.Ve(!0),this.t("isShadowed",e,t),this.S())}oT(){return!!(16384&this.w)}rT(t){t?this.w|=16384:this.w&=-16385}th(){return!!(32768&this.w)}tN(t){t?this.w|=32768:this.w&=-32769}nO(){return!!(65536&this.w)}w2(t){t?this.w|=65536:this.w&=-65537}Ml(){return!!(131072&this.w)}ps(t){t?this.w|=131072:this.w&=-131073}dT(){return!!(1048576&this.w)}m1(t){t?this.w|=1048576:this.w&=-1048577}get isAnimated(){return!!(262144&this.w)}set isAnimated(t){const e=!!(262144&this.w);e!==t&&(this.w=262144^this.w,this.t("isAnimated",e,t))}get highlightedChanged(){return null!==this.H?this.H.Yp:null}set highlightedChanged(t){const i=this.highlightedChanged;i!==t&&(null!==t&&e.k(t,ce,"highlightedChanged"),this.ji().Yp=t,this.t("highlightedChanged",i,t))}get selectionObjectName(){return null!==this.H?this.H.Kp:""}set selectionObjectName(t){const e=this.selectionObjectName;e!==t&&(this.ji().Kp=t,this.nl=null,this.t("selectionObjectName",e,t))}get selectionAdornmentTemplate(){return null!==this.H?this.H.Gp:null}set selectionAdornmentTemplate(t){const e=this.selectionAdornmentTemplate;e!==t&&(null!==t&&t.Et(),this.ji().Gp=t,this.t("selectionAdornmentTemplate",e,t))}get selectionObject(){if(null===this.nl){const t=this.selectionObjectName;if(null!==t&&""!==t){const e=this.findObject(t);this.nl=null!==e?e:this}else if(this instanceof be){const t=this.path;this.nl=null!==t?t:this}else this.nl=this}return this.nl}get selectionChanged(){return null!==this.H?this.H.Hp:null}set selectionChanged(t){const i=this.selectionChanged;i!==t&&(null!==t&&e.k(t,ce,"selectionChanged"),this.ji().Hp=t,this.t("selectionChanged",i,t))}get resizeAdornmentTemplate(){return null!==this.H?this.H.jp:null}set resizeAdornmentTemplate(t){const e=this.resizeAdornmentTemplate;e!==t&&(this.ji().jp=null!==t?t.Et():null,this.t("resizeAdornmentTemplate",e,t))}get resizeObjectName(){return null!==this.H?this.H.qp:""}set resizeObjectName(t){const e=this.resizeObjectName;e!==t&&(this.ji().qp=t,this.t("resizeObjectName",e,t))}get resizeObject(){const t=this.resizeObjectName;if(""!==t){const e=this.findObject(t);if(null!==e)return e}return this}get resizeCellSize(){return null!==this.H?this.H.Wp:v.yw}set resizeCellSize(t){const e=this.resizeCellSize;e.equals(t)||(t=t.P(),this.ji().Wp=t,this.t("resizeCellSize",e,t))}get rotateAdornmentTemplate(){return null!==this.H?this.H.Jp:null}set rotateAdornmentTemplate(t){const e=this.rotateAdornmentTemplate;e!==t&&(this.ji().Jp=null!==t?t.Et():null,this.t("rotateAdornmentTemplate",e,t))}get rotateObjectName(){return null!==this.H?this.H.$p:""}set rotateObjectName(t){const e=this.rotateObjectName;e!==t&&(this.ji().$p=t,this.t("rotateObjectName",e,t))}get rotateObject(){const t=this.rotateObjectName;if(""!==t){const e=this.findObject(t);if(null!==e)return e}return this}get rotationSpot(){return null!==this.H?this.H.Zp:w.Default}set rotationSpot(t){const e=this.rotationSpot;e.equals(t)||(t=t.P(),this.ji().Zp=t,this.t("rotationSpot",e,t))}get text(){return this.ri}set text(t){const e=this.ri;e!==t&&(this.ri=t,this.t("text",e,t))}get containingGroup(){return this.wh}set containingGroup(t){if(this.ke()){const i=this.wh;if(i!==t){null!==t&&(this===t||t.isMemberOf(this))&&(this===t&&e.o("Cannot make a Group a member of itself: "+this.toString()),e.o("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.invalidateLayout(2);const n=this.diagram;if(null!==i?i.eN(this):this instanceof Ae&&null!==n&&n.zr.delete(this),this.wh=t,null!==t?t.sN(this):this instanceof Ae&&null!==n&&n.zr.add(this),this.invalidateLayout(1),null!==n&&n.X){const e=this.data,i=n.model;if(null!==e&&i.jc()){const n=null!==t?t.data:null;i.setGroupForData(e,i.getKeyForNodeData(n))}}const s=this.containingGroupChanged;if(null!==s){let e=!0;null!==n&&(e=n.X,n.X=!0),s(this,i,t),null!==n&&(n.X=e)}if(this instanceof Ae){const t=new u;ce.nh(t,this,!0,0,!0);const e=t.iterator;for(;e.next();){const t=e.value;if(t instanceof ge){const e=t.linksConnected;for(;e.next();)e.value.Pd()}}}if(this instanceof ge){const t=this.linksConnected;for(;t.next();)t.value.Pd();const e=this.labeledLink;null!==e&&e.Pd()}this.t("containingGroup",i,t),null!==t&&t.eO()}}else e.o("cannot set the Part.containingGroup of a Link or Adornment")}uh(){const t=this.containingGroup;null!==t&&(t.hasPlaceholder()&&t.placeholder?.c(),t.c(),t.invalidateConnectedLinks())}S(){const t=this.diagram;null!==t&&!this._e()&&!this.th()&&this.isVisible()&&this.Ni.isReal()&&t.S(this.qh(this.Ni))}c(){if(this.To())return;super.c();const t=this.diagram;null!==t&&(t._m(this),this instanceof ge&&null!==this.labeledLink&&this.labeledLink.ef(),t.requestUpdate(!0))}ef(t){if(this._e())return;const e=this.diagram;null!==e&&(e._m(this),this instanceof ge&&this.invalidateConnectedLinks(),e.requestUpdate()),this.Jn(!0)}Rm(t){if(!t){const t=this.wh;null!==t&&t.sN(this)}}vm(t){if(!t){const t=this.wh;null!==t&&t.eN(this)}}Xc(){const t=this.data;if(null!==t){const e=this.diagram;if(null!==e){const i=e.model;null!==i&&i.removeNodeData(t)}}}get containingGroupChanged(){return null!==this.H?this.H.Qp:null}set containingGroupChanged(t){const i=this.containingGroupChanged;i!==t&&(null!==t&&e.k(t,ce,"containingGroupChanged"),this.ji().Qp=t,this.t("containingGroupChanged",i,t))}findSubGraphLevel(){return this.nN(this)}nN(t){const e=t.containingGroup;if(null!==e)return 1+this.nN(e);if(t instanceof ge){const e=t.labeledLink;if(null!==e)return this.nN(e)}return 0}findTopLevelPart(){return this.oN(this)}oN(t){const e=t.containingGroup;if(null!==e)return this.oN(e);if(t instanceof ge){const e=t.labeledLink;if(null!==e)return this.oN(e)}return t}get isTopLevel(){return!(null!==this.containingGroup||this instanceof ge&&null!==this.labeledLink)}isMemberOf(t){return t instanceof Ae&&this.rN(this,t)}rN(t,e){if(t===e||null===e)return!1;const i=t.containingGroup;if(null!==i&&(i===e||this.rN(i,e)))return!0;if(t instanceof ge){const i=t.labeledLink;if(null!==i)return this.rN(i,e)}return!1}findCommonContainingGroup(t){if(null===t)return null;if(this===t)return this.containingGroup;let e=this;for(;null!==e;){if(e instanceof Ae&&e.m1(!0),e instanceof ge){const t=e.labeledLink;null!==t&&(e=t)}e=e.containingGroup}let i=null;for(e=t;null!==e;){if(e.dT()){i=e;break}if(e instanceof ge){const t=e.labeledLink;null!==t&&(e=t)}e=e.containingGroup}for(e=this;null!==e;){if(e instanceof Ae&&e.m1(!1),e instanceof ge){const t=e.labeledLink;null!==t&&(e=t)}e=e.containingGroup}return i}get layoutConditions(){return null!==this.H?this.H._p:127}set layoutConditions(t){const e=this.layoutConditions;e!==t&&(this.ji()._p=t,this.t("layoutConditions",e,t))}canLayout(){if(!this.isLayoutPositioned||!this.isVisible())return!1;const t=this.layer;return!(null!==t&&t.isTemporary||this instanceof ge&&this.isLinkLabel)}rO(t){if(!(this.isLayoutPositioned&&t&this.layoutConditions))return!1;const e=this.layer;if(null!==e&&e.isTemporary||this instanceof ge&&this.isLinkLabel)return!1;const i=this.diagram;return!(null!==i&&i.undoManager.isUndoingRedoing)}invalidateLayout(t){if(void 0===t&&(t=16777215),!this.rO(t))return;const e=this.wh;if(null!==e){const i=e.layout;null!==i?i.invalidateLayout():e.invalidateLayout(t)}else{const t=this.diagram;if(null!==t){const e=t.layout;null!==e&&e.invalidateLayout()}}}jL(){if(!this.isVisible())return!1;const t=this.layer;return!(null!==t&&t.isTemporary)}static nh(t,e,i,n,s,r){if(void 0===r&&(r=null),!t.has(e)&&(null===r||r(e))&&!(e instanceof fe))if(t.add(e),e instanceof ge){if(i&&e instanceof Ae){const o=e.memberParts;for(;o.next();){const e=o.value;ce.nh(t,e,i,n,s,r)}}if(!1!==s){const o=e.linksConnected;for(;o.next();){const e=o.value;if(t.has(e))continue;const a=e.fromNode,l=e.toNode,h=null===a||t.has(a),u=null===l||t.has(l);(s?h&&u:h||u)&&ce.nh(t,e,i,n,s,r)}}if(n>1){const o=e.findTreeChildrenNodes();for(;o.next();){const e=o.value;ce.nh(t,e,i,n-1,s,r)}}}else if(e instanceof be){const o=e.labelNodes;for(;o.next();){const e=o.value;ce.nh(t,e,i,n,s,r)}}}get dragComputation(){return null!==this.H?this.H.ty:null}set dragComputation(t){const i=this.dragComputation;i!==t&&(null!==t&&e.k(t,ce,"dragComputation"),this.ji().ty=t,this.t("dragComputation",i,t))}get shadowOffset(){return null!==this.H?this.H.iy:y.yC}set shadowOffset(t){const e=this.shadowOffset;e.equals(t)||(t=t.P(),this.ji().iy=t,this.S(),this.t("shadowOffset",e,t))}get shadowColor(){return null!==this.H?this.H.ey:"gray"}set shadowColor(t){const e=this.shadowColor;e!==t&&(this.ji().ey=t,this.S(),this.t("shadowColor",e,t))}get shadowBlur(){return null!==this.H?this.H.un:4}set shadowBlur(t){const e=this.shadowBlur;e!==t&&(this.ji().un=t,this.S(),this.t("shadowBlur",e,t))}}class de{fi;Up;Qp;Gp;Kp;Hp;Yp;jp;qp;Wp;Jp;$p;Zp;zp;Xp;Bp;Vp;ty;_p;iy;ey;un;constructor(){this.fi=!1,this.Up=null,this.Qp=null,this.Gp=null,this.Kp="",this.Hp=null,this.Yp=null,this.jp=null,this.qp="",this.Wp=v.yw,this.Jp=null,this.$p="",this.Zp=w.Default,this.zp="",this.Xp=w.TopLeft,this.Bp=y.mC,this.Vp=y.pC,this.ty=null,this._p=127,this.iy=y.yC,this.ey="gray",this.un=4}copy(){const t=new de;return t.Up=this.Up,t.Qp=this.Qp,t.Gp=this.Gp,t.Kp=this.Kp,t.Hp=this.Hp,t.Yp=this.Yp,t.jp=this.jp,t.qp=this.qp,t.Wp=this.Wp.P(),t.Jp=this.Jp,t.$p=this.$p,t.Zp=this.Zp.P(),t.zp=this.zp,t.Xp=this.Xp.P(),t.Bp=this.Bp.P(),t.Vp=this.Vp.P(),t.ty=this.ty,t._p=this._p,t.iy=this.iy.P(),t.ey=this.ey,t.un=this.un,t}}class fe extends ce{us;Ft;nS;oS;hf;constructor(t,e){let i;void 0===t||t instanceof Ut||"string"==typeof t?i=t:t&&(e=t),super(i),this.w&=-257,this.sl="Adornment",this.us=null,this.nS=0,this.oS=!1,this.Ft=null,this.hf=null,e&&Object.assign(this,e)}toString(){const t=this.adornedPart;return"Adornment("+this.category+")"+(null!==t?t.toString():"")}updateRelationshipsFromData(){}sd(t){const e=this.adornedObject;if(!(e instanceof Jt))return;const i=e.part;if(!(i instanceof be))return;const n=i.path;let s=n.geometry;i.sd(t),s=n.geometry;const r=this.C.r,o=r.length;for(let t=0;t<o;t++){const e=r[t];e.isPanelMain&&e instanceof Jt&&(e.ot=s)}}hasPlaceholder(){return null!==this.Ft&&this.Ft.isVisibleObject()}get placeholder(){return this.Ft}get adornedObject(){return this.us}set adornedObject(t){const e=this.adornedPart;let i=null;null!==t&&(i=t.part),null!==e&&(null===t||e!==i)&&e.removeAdornment(this.category),this.us=t,null!==i&&i.addAdornment(this.category,this)}get adornedPart(){const t=this.us;return null!==t?t.part:null}Yr(){const t=this.us;if(null===t)return!0;const e=t.part;return null===e||!e._e()}ke(){return!1}get containingGroup(){return null}qc(t,e,i,n,s,r,o){if(3===t&&"elements"===e){if(s instanceof Pe)null===this.Ft&&(this.Ft=s);else if(s instanceof qt){const t=s.findInVisualTree((t=>t instanceof Pe));t instanceof Pe&&null===this.Ft&&(this.Ft=t)}}else 4===t&&"elements"===e&&null!==this.Ft&&(n===this.Ft||n instanceof qt&&this.Ft.isContainedBy(n))&&(this.Ft=null);super.qc(t,e,i,n,s,r,o)}updateAdornments(){}Xc(){}}var pe=(t=>(t[t.None=0]="None",t[t.Evenly=1]="Evenly",t[t.Packed=2]="Packed",t))(pe||{});class ge extends ce{v;Rt;kf;ol;xh;ne;ti;constructor(t,e){let i;void 0===t||t instanceof Ut||"string"==typeof t?i=t:t&&(e=t),super(i),this.v=13,this.Rt=null,this.ti=new l,this.kf=null,this.ol=null,this.ne=null,this.xh=!1,e&&Object.assign(this,e)}cloneProtected(t){super.cloneProtected(t),t.v=this.v,null!==this.Rt&&(this.Rt.fi?t.Rt=this.Rt:t.Rt=this.Rt.copy())}vo(t){super.vo(t),t.invalidateConnectedLinks(),t.ol=this.ol,t.ne=null}static SpreadingNone=0;static SpreadingEvenly=1;static SpreadingPacked=2;rl(){return null===this.Rt?this.Rt=new me:this.Rt.fi&&(this.Rt=this.Rt.copy()),this.Rt}ah(){super.ah(),null!==this.Rt&&(this.Rt.fi=!0)}gT(t){null!==t&&(null===this.ol&&(this.ol=new u),this.ol.add(t))}mT(t){null!==t&&null!==this.ol&&this.ol.delete(t)}pT(t,e,i){if(null===t||null===this.ol)return null;const n=this.ol.iterator;for(;n.next();){const s=n.value;if(s.ny===this&&s.p1===t&&s.lN===e&&s.hN===i||s.ny===t&&s.p1===this&&s.lN===i&&s.hN===e)return s}return null}invalidateLinkBundle(t,e,i){null==e&&(e=""),null==i&&(i="");const n=this.pT(t,e,i);null!==n&&n.Sd()}qc(t,e,i,n,s,r,o){(3===t&&"elements"===e||4===t&&"elements"===e)&&(this.ne=null),super.qc(t,e,i,n,s,r,o)}invalidateConnectedLinks(t){const e=this.linksConnected;for(;e.next();){const i=e.value;void 0!==t&&t.has(i)||(this.qi(i.fromPort),this.qi(i.toPort),i.invalidateRoute())}}kA(t){const e=this.linksConnected;for(;e.next();){const i=e.value;i.fromPort!==t&&i.toPort!==t||(this.qi(i.fromPort),this.qi(i.toPort),i.invalidateRoute())}}qi(t){if(null===t)return;const e=t.Gu;null!==e&&e.Sd();const i=t.part,n=i.containingGroup;null!==n&&!i.isVisible()&&n.qi(n.port)}Yr(){return!0}get portSpreading(){return null!==this.Rt?this.Rt.ly:1}set portSpreading(t){const e=this.portSpreading;if(e!==t){this.rl().ly=t,this.t("portSpreading",e,t);const i=this.diagram;if(null!==i&&i.undoManager.isUndoingRedoing)return;this.invalidateConnectedLinks()}}get avoidable(){return!!(8&this.v)}set avoidable(t){const e=!!(8&this.v);if(e!==t){this.v=8^this.v;const i=this.diagram;null!==i&&i.JM(this),this.t("avoidable",e,t)}}get avoidableMargin(){return null!==this.Rt?this.Rt.hy:b.SC}set avoidableMargin(t){"number"==typeof t&&(t=new b(t));const e=this.avoidableMargin;if(!e.equals(t)){t=t.P(),this.rl().hy=t;const i=this.diagram;null!==i&&i.JM(this),this.t("avoidableMargin",e,t)}}canAvoid(){return this.avoidable&&!this.isLinkLabel}getAvoidableRect(t){return t.set(this.actualBounds),t.addMargin(this.avoidableMargin),t}findVisibleNode(){let t=this;for(;null!==t&&!t.isVisible();)t=t.containingGroup;return t}isVisible(){if(!super.isVisible())return!1;let t=!0,e=1;const i=this.diagram;if(null!==i){if(i.animationManager.lx(this))return!0;t=i.isTreePathToChildren,e=i.treeCollapsePolicy}if(1===e){const t=this.findTreeParentNode();if(null!==t&&!t.isTreeExpanded)return!1}else if(2===e){const e=t?this.findLinksInto():this.findLinksOutOf();let i=!1,n=!1;for(;e.next();){const s=e.value;if(s.isTreeLink){i=!0;const e=t?s.fromNode:s.toNode;if(e&&e.isTreeExpanded){n=!0;break}}}if(i&&!n)return!1}else if(3===e){const e=t?this.findLinksInto():this.findLinksOutOf();let i=!1,n=!1;for(;e.next();){const s=e.value;if(s.isTreeLink){i=!0;const e=t?s.fromNode:s.toNode;if(e&&!e.isTreeExpanded){n=!0;break}}}if(i&&n)return!1}const n=this.labeledLink;return null===n||n.isVisible()}Ei(t){super.Ei(t);const e=this.linksConnected;for(;e.next();){const i=e.value;if(t&&null!==this.containingGroup){const t=i.getOtherNode(this);null!==t&&!t.isMemberOf(this.containingGroup)&&i.invalidateRoute()}i.Ei(t)}}get linksConnected(){return this.ti.iterator}findExternalTreeLinksConnected(){const t=new u,e=new u;return this.yT(this,t,e),e.iterator}yT(t,e,i){if(null===t||e.has(t))return;e.add(t);let n=!0;const s=this.diagram;null!==s&&(n=s.isTreePathToChildren),t.linksConnected.each((s=>{s.isTreeLink?(n?s.fromNode===t:s.toNode===t)&&this.yT(n?s.toNode:s.fromNode,e,i):i.add(s)}))}findLinksConnected(t){if(void 0===t&&(t=null),null===t)return this.ti.iterator;const e=new o(this.ti),i=this;return e.predicate=e=>e.fromNode===i&&e.fromPortId===t||e.toNode===i&&e.toPortId===t,e}findLinksOutOf(t){void 0===t&&(t=null);const e=new o(this.ti),i=this;return e.predicate=e=>e.fromNode===i&&(null===t||e.fromPortId===t),e}findLinksInto(t){void 0===t&&(t=null);const e=new o(this.ti),i=this;return e.predicate=e=>e.toNode===i&&(null===t||e.toPortId===t),e}findNodesConnected(t){void 0===t&&(t=null);let e=null,i=null;const n=this.ti.iterator;for(;n.next();){const s=n.value;if(s.fromNode===this){if(null===t||s.fromPortId===t){const t=s.toNode;null!==e?e.add(t):null!==i&&i!==t?(e=new u,e.add(i),e.add(t)):i=t}}else if(s.toNode===this&&(null===t||s.toPortId===t)){const t=s.fromNode;null!==e?e.add(t):null!==i&&i!==t?(e=new u,e.add(i),e.add(t)):i=t}}return null!==e?e.iterator:null!==i?new r(i):s.instance}findNodesOutOf(t){void 0===t&&(t=null);let e=null,i=null;const n=this.ti.iterator;for(;n.next();){const s=n.value;if(s.fromNode===this&&(null===t||s.fromPortId===t)){const t=s.toNode;null!==e?e.add(t):null!==i&&i!==t?(e=new u,e.add(i),e.add(t)):i=t}}return null!==e?e.iterator:null!==i?new r(i):s.instance}findNodesInto(t){void 0===t&&(t=null);let e=null,i=null;const n=this.ti.iterator;for(;n.next();){const s=n.value;if(s.toNode===this&&(null===t||s.toPortId===t)){const t=s.fromNode;null!==e?e.add(t):null!==i&&i!==t?(e=new u,e.add(i),e.add(t)):i=t}}return null!==e?e.iterator:null!==i?new r(i):s.instance}findLinksBetween(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);const n=new o(this.ti),s=this;return n.predicate=n=>!((n.fromNode!==s||n.toNode!==t||null!==e&&n.fromPortId!==e||null!==i&&n.toPortId!==i)&&(n.fromNode!==t||n.toNode!==s||null!==i&&n.fromPortId!==i||null!==e&&n.toPortId!==e)),n}findLinksTo(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);const n=new o(this.ti),s=this;return n.predicate=n=>!(n.fromNode!==s||n.toNode!==t||null!==e&&n.fromPortId!==e||null!==i&&n.toPortId!==i),n}get linkConnected(){return null!==this.Rt?this.Rt.ay:null}set linkConnected(t){const i=this.linkConnected;i!==t&&(null!==t&&e.k(t,ge,"linkConnected"),this.rl().ay=t,this.t("linkConnected",i,t))}get linkDisconnected(){return null!==this.Rt?this.Rt.cy:null}set linkDisconnected(t){const i=this.linkDisconnected;i!==t&&(null!==t&&e.k(t,ge,"linkDisconnected"),this.rl().cy=t,this.t("linkDisconnected",i,t))}get linkValidation(){return null!==this.Rt?this.Rt.Sl:null}set linkValidation(t){const i=this.linkValidation;i!==t&&(null!==t&&e.k(t,ge,"linkValidation"),this.rl().Sl=t,this.t("linkValidation",i,t))}w1(t,e){this.qi(e);const i=this.ti.has(t);if(i||this.ti.add(t),!i||t.fromNode===t.toNode){const i=this.linkConnected;if(null!==i){let n=!0;const s=this.diagram;null!==s&&(n=s.X,s.X=!0),i(this,t,e),null!==s&&(s.X=n)}}if(!i){if(!t.isTreeLink)return;const e=t.fromNode,i=t.toNode;if(null!==e&&null!==i&&e!==i){let t=!0;const n=this.diagram;null!==n&&(t=n.isTreePathToChildren);const s=t?i:e,r=t?e:i;if(s.xh||(s.xh=r),r.isTreeLeaf){if(null!==n&&n.undoManager.isUndoingRedoing)return;t?e===r&&(r.isTreeLeaf=!1):i===r&&(r.isTreeLeaf=!1)}}}}b1(t,e){this.qi(e);const i=this.ti.delete(t);let n=null;if(i||t.toNode===t.fromNode){const i=this.linkDisconnected;if(n=this.diagram,null!==i){let s=!0;null!==n&&(s=n.X,n.X=!0),i(this,t,e),null!==n&&(n.X=s)}}if(i){if(!t.isTreeLink)return;let e=!0;null!==n&&(e=n.isTreePathToChildren);const i=e?t.toNode:t.fromNode,s=e?t.fromNode:t.toNode;if(null!==i&&(i.xh=!1),null!==s&&!s.isTreeLeaf)if(0===s.ti.count){if(s.xh=null,null!==n&&n.undoManager.isUndoingRedoing)return;s.isTreeLeaf=!0}else s.r0()}}r0(){if(this.xh=!1,0===this.ti.count)return;let t=!0;const e=this.diagram;if(null!==e&&e.undoManager.isUndoingRedoing)return;null!==e&&(t=e.isTreePathToChildren);const i=this.ti.iterator;for(;i.next();){const e=i.value;if(e.isTreeLink)if(t){if(e.fromNode===this)return void(this.isTreeLeaf=!1)}else if(e.toNode===this)return void(this.isTreeLeaf=!1)}this.isTreeLeaf=!0}updateRelationshipsFromData(){const t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}Rm(t){if(super.Rm(t),!t){this.r0();const t=this.kf;null!==t&&t.wT(this)}}vm(t){if(super.vm(t),!t){const t=this.kf;null!==t&&t.xT(this)}}Xc(){if(this.ti.count>0){const t=this.diagram;if(null!==t){const e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,i=this.ti.copy().iterator;for(;i.next();){const n=i.value;e?t.remove(n):(n.fromNode===this&&(n.fromNode=null),n.toNode===this&&(n.toNode=null))}}}this.labeledLink=null,super.Xc()}get isLinkLabel(){return null!==this.kf}get labeledLink(){return this.kf}set labeledLink(t){const e=this.kf;if(e!==t){const i=this.diagram,n=this.data;if(null!==e){if(e.xT(this),null!==i&&null!==n&&!i.undoManager.isUndoingRedoing){const t=e.data,s=i.model;if(null!==t&&s.Ra()){const e=s.getKeyForNodeData(n);void 0!==e&&s.removeLabelKeyForLinkData(t,e)}}this.containingGroup=null}if(this.kf=t,null!==t){if(t.wT(this),null!==i&&null!==n&&!i.undoManager.isUndoingRedoing){const e=t.data,s=i.model;if(null!==e&&s.Ra()){const t=s.getKeyForNodeData(n);void 0!==t&&s.addLabelKeyForLinkData(e,t)}}this.containingGroup=t.containingGroup}this.ef(),this.t("labeledLink",e,t)}}findVisiblePort(t){let e=t;for(;!(null===e||e.actualBounds.isReal()&&e.isVisibleObject());)e=e.panel;return null===e?this.port:e}findPort(t){if(null===this.ne){if(""===t&&!1===this.fn)return this;this.bT()}let e=this.ne.get(t);return null!==e||""!==t&&(e=this.ne.get(""),null!==e)?e:this}get port(){return this.findPort("")}get ports(){return null===this.ne&&this.bT(),this.ne.iteratorValues}bT(){null===this.ne?this.ne=new m:this.ne.clear(),this.walkVisualTreeFrom(this,((t,e)=>t.AA(e))),0===this.ne.count&&this.ne.set("",this)}AA(t){const e=t.portId;null!==e&&null!==this.ne&&this.ne.set(e,t)}C2(t,i){const n=t.portId;if(null!==n){null!==this.ne&&this.ne.delete(n);const t=this.diagram;if(null!==t&&i){let i=null;const s=this.findLinksConnected(n);for(;s.next();){const t=s.value;null===i&&(i=e.et()),i.push(t)}if(null!==i){for(let e=0;e<i.length;e++){const n=i[e];t.remove(n)}e.J(i)}}}}isInTreeOf(t){if(null===t||t===this)return!1;let e=!0;const i=this.diagram;null!==i&&(e=i.isTreePathToChildren);let n=this;const s=t;let r;if(e)for(;n!==s;){r=null;const t=n.ti.iterator;for(;t.next();){const e=t.value;if(e.isTreeLink&&(r=e.fromNode,r!==n&&r!==this))break}if(r===this||null===r||r===n)return!1;n=r}else for(;n!==s;){r=null;const t=n.ti.iterator;for(;t.next();){const e=t.value;if(e.isTreeLink&&(r=e.toNode,r!==n&&r!==this))break}if(r===this||null===r||r===n)return!1;n=r}return!0}findTreeRoot(){let t=!0;const e=this.diagram;null!==e&&(t=e.isTreePathToChildren);let i,n=this;if(t)for(;;){i=null;const t=n.ti.iterator;for(;t.next();){const e=t.value;if(e.isTreeLink&&(i=e.fromNode,i!==n&&i!==this))break}if(i===this)return this;if(null===i||i===n)return n;n=i}else for(;;){i=null;const t=n.ti.iterator;for(;t.next();){const e=t.value;if(e.isTreeLink&&(i=e.toNode,i!==n&&i!==this))break}if(i===this)return this;if(null===i||i===n)return n;n=i}}findCommonTreeParent(t){if(null===t)return null;if(this===t)return this;let e=this;for(;null!==e;)e.m1(!0),e=e.findTreeParentNode();let i=null;for(e=t;null!==e;){if(e.dT()){i=e;break}e=e.findTreeParentNode()}for(e=this;null!==e;)e.m1(!1),e=e.findTreeParentNode();return i}findTreeParentLink(){let t=!0;const e=this.diagram;null!==e&&(t=e.isTreePathToChildren);const i=this.ti.iterator;if(t)for(;i.next();){const t=i.value;if(t.isTreeLink&&t.fromNode!==this)return t}else for(;i.next();){const t=i.value;if(t.isTreeLink&&t.toNode!==this)return t}return null}findTreeParentNode(){const t=this.xh;if(null===t)return null;if(t instanceof ge)return t;const e=this.diagram,i=null===e||e.isTreePathToChildren,n=this.ti.iterator;for(;n.next();){const t=n.value;if(!t.isTreeLink)continue;const e=i?t.fromNode:t.toNode;if(e!==this)return this.xh=e,e}return this.xh=null,null}findTreeParentChain(){const t=new u;return function t(e,i){i.add(e);const n=e.findTreeParentLink();if(null!==n){i.add(n);const s=e.findTreeParentNode();if(null===s)return;t(s,i)}}(this,t),t}findTreeLevel(){return this.lO(this)}lO(t){let e=0,i=t.findTreeParentNode();for(;null!==i&&i!==t;)i=i.findTreeParentNode(),e++;return e}findTreeChildrenLinks(){let t=!0;const e=this.diagram;null!==e&&(t=e.isTreePathToChildren);const i=new o(this.ti),n=this;return i.predicate=t?t=>!(!t.isTreeLink||t.fromNode!==n):t=>!(!t.isTreeLink||t.toNode!==n),i}findTreeChildrenNodes(){let t=!0;const e=this.diagram;null!==e&&(t=e.isTreePathToChildren);let i=null,n=null;const o=this.ti.iterator;if(t)for(;o.next();){const t=o.value;if(t.isTreeLink&&t.fromNode===this){const e=t.toNode;null!==i?i.add(e):null!==n&&n!==e?(i=new l,i.add(n),i.add(e)):n=e}}else for(;o.next();){const t=o.value;if(t.isTreeLink&&t.toNode===this){const e=t.fromNode;null!==i?i.add(e):null!==n&&n!==e?(i=new l,i.add(n),i.add(e)):n=e}}return null!==i?i.iterator:null!==n?new r(n):s.instance}findTreeParts(t){void 0===t&&(t=1/0),e.s(t,"number",ge,"findTreeParts:level");const i=new u;return ce.nh(i,this,!1,t,!0),i}collapseTree(t){void 0===t&&(t=1),t<1&&(t=1);const e=this.diagram;if(null===e||e.isCollapsingExpanding)return;e.isCollapsingExpanding=!0;const i=new u;i.add(this),this.kT(i,e.isTreePathToChildren,t,e,this,1===e.treeCollapsePolicy),e.isCollapsingExpanding=!1}kT(t,e,i,n,s,r){if(i>1){const o=e?this.findLinksOutOf():this.findLinksInto();for(;o.next();){const a=o.value;if(!a.isTreeLink)continue;const l=a.getOtherNode(this);null!==l&&l!==this&&!t.has(l)&&(t.add(l),l.kT(t,e,i-1,n,s,r))}}else this.PT(t,e,n,s,r)}PT(t,e,i,n,s){const r=n===this||this.isTreeExpanded,o=e?this.findLinksOutOf():this.findLinksInto();for(;o.next();){const a=o.value;if(!a.isTreeLink)continue;const l=a.getOtherNode(this);if(null!==l&&l!==this){const o=t.has(l);if(o||t.add(l),r){const t=e?l.findNodesInto():l.findNodesOutOf(),s=this;t.all((t=>t===s||!t.isTreeExpanded))&&i.Lc(l,n),l.uh(),l.Ei(!1)}l.isTreeExpanded&&(l.wasTreeExpanded=l.isTreeExpanded,o||l.PT(t,e,i,n,s))}}this.isTreeExpanded=!1}expandTree(t){void 0===t&&(t=2),t<2&&(t=2);const e=this.diagram;if(null===e||e.isCollapsingExpanding)return;e.isCollapsingExpanding=!0;const i=new u;i.add(this),this.ST(i,e.isTreePathToChildren,t,e,this,1===e.treeCollapsePolicy),e.isCollapsingExpanding=!1}ST(t,e,i,n,s,r){const o=s!==this&&this.isTreeExpanded,a=e?this.findLinksOutOf():this.findLinksInto();for(;a.next();){const l=a.value;if(!l.isTreeLink)continue;o||l.Se||l.invalidateRoute();const h=l.getOtherNode(this);if(null!==h&&h!==this&&!t.has(h)){if(t.add(h),!o){h.Ei(!0),h.uh();const t=e?h.findNodesInto():h.findNodesOutOf(),i=this;t.all((t=>t===i||!t.isTreeExpanded))&&n.Cc(h,s)}(i>2||h.wasTreeExpanded)&&(h.wasTreeExpanded=!1,h.ST(t,e,i-1,n,s,r))}}this.isTreeExpanded=!0}get isTreeExpanded(){return!!(1&this.v)}set isTreeExpanded(t){const e=!!(1&this.v);if(e!==t){this.v=1^this.v;const i=this.diagram;this.t("isTreeExpanded",e,t);const n=this.treeExpandedChanged;if(null!==n){let t=!0;null!==i&&(t=i.X,i.X=!0),n(this),null!==i&&(i.X=t)}if(null!==i&&i.undoManager.isUndoingRedoing)return void this.Ei(t);t?this.expandTree():this.collapseTree()}}get wasTreeExpanded(){return!!(2&this.v)}set wasTreeExpanded(t){const e=!!(2&this.v);e!==t&&(this.v=2^this.v,this.t("wasTreeExpanded",e,t))}get treeExpandedChanged(){return null!==this.Rt?this.Rt.fy:null}set treeExpandedChanged(t){const i=this.treeExpandedChanged;i!==t&&(null!==t&&e.k(t,ge,"treeExpandedChanged"),this.rl().fy=t,this.t("treeExpandedChanged",i,t))}get isTreeLeaf(){return!!(4&this.v)}set isTreeLeaf(t){const e=!!(4&this.v);e!==t&&(this.v=4^this.v,this.t("isTreeLeaf",e,t))}get isTreeRoot(){return null===this.findTreeParentLink()}}class me{fi;ay;cy;Sl;fy;hy;ly;uy;gy;eh;my;constructor(){this.fi=!1,this.ay=null,this.cy=null,this.Sl=null,this.fy=null,this.hy=b.SC,this.ly=1,this.uy=null,this.gy=null,this.eh=null,this.my=null}copy(){const t=new me;return t.ay=this.ay,t.cy=this.cy,t.Sl=this.Sl,t.fy=this.fy,t.hy=this.hy.P(),t.ly=this.ly,t.uy=this.uy,t.gy=this.gy,t.eh=this.eh,t.my=this.my,t}}var ye=(t=>(t[t.None=0]="None",t[t.End=17]="End",t[t.Scale=18]="Scale",t[t.Stretch=19]="Stretch",t))(ye||{}),ve=(t=>(t[t.Normal=1]="Normal",t[t.Orthogonal=2]="Orthogonal",t[t.AvoidsNodes=6]="AvoidsNodes",t[t.AvoidsNodesStraight=7]="AvoidsNodesStraight",t))(ve||{}),xe=(t=>(t[t.None=0]="None",t[t.Bezier=9]="Bezier",t[t.JumpGap=10]="JumpGap",t[t.JumpOver=11]="JumpOver",t))(xe||{});class be extends ce{Mt;so;no;Md;oo;ro;Nd;Pf;Cd;Ld;Ad;va;Td;Hs;xi;ll;br;Sf;Go;aN;cN;k1;fN;uN;Oa;P1;ot;Ho;static Ia=null;static Ea=null;hf;dN;gN;constructor(t){super(qt.Link),this.Mt=8,this.so=null,this.no="",this.Md=null,this.oo=null,this.ro="",this.Nd=null,this.Pf=0,this.Cd=0,this.Ld=0,this.Ad=NaN,this.va=1,this.Td=.5,this.Hs=null,this.xi=(new l).u(),this.ll=null,this.br=null,this.Sf=new x,this.ot=new A,this.Go=null,this.Ho=null,this.aN=null,this.cN=null,this.dN=0,this.gN=0,this.k1=new y,this.fN=null,this.uN=null,this.Oa=null,this.P1=NaN,this.ct=null,this.hf=[],t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Mt=-113&this.Mt,t.no=this.no,t.Md=this.Md,t.ro=this.ro,t.Nd=this.Nd,t.Pf=this.Pf,t.Cd=this.Cd,t.Ld=this.Ld,t.Ad=this.Ad,t.va=this.va,t.Td=this.Td,null!==this.ct&&(t.ct=this.ct.copy())}vo(t){super.vo(t),this.no=t.no,this.ro=t.ro,t.ll=null,t.invalidateRoute(),t.Ho=this.Ho;const e=t.fromPort;null!==e&&t.fromNode.qi(e);const i=t.toPort;null!==i&&t.toNode.qi(i)}oi(t){t in ve||t in xe||t in ye?be.mN(t)?this.routing=t:9===t||10===t||11===t?this.curve=t:17===t||18===t||19===t?this.adjusting=t:1===t||0===t||e.o("Unknown Link enum value for a Link property: "+t):super.oi(t)}static Normal=1;static Orthogonal=2;static AvoidsNodes=6;static AvoidsNodesStraight=7;static None=0;static Bezier=9;static JumpGap=10;static JumpOver=11;static End=17;static Scale=18;static Stretch=19;static OrientAlong=21;static OrientPlus90=22;static OrientMinus90=23;static OrientOpposite=24;static OrientUpright=25;static OrientPlus90Upright=26;static OrientMinus90Upright=27;static OrientUpright45=28;static hO=8;static aO=16;static cO=14;static Ua=8;Be(){return null===this.ct&&(this.ct=new Me),this.ct}bv(t,i,n){const s=t.segmentIndex,r=t.segmentFraction;let o=t.alignmentFocus;const a=t.segmentOrientation,l=t.segmentOffset;let h=0,u=0,c=0,d=0;if(isNaN(s)){const i=this.ot,n=e.et();i.getPointAndAngleAlongPath(r,n);const s=y.V(n[0],n[1]);if(s.add(this.getPoint(0)),1===i.type)s.offset(-i.startX,-i.startY);else{const t=i.figures.first();s.offset(-t.startX,-t.startY)}d=n[2],0!==a&&(c=this.computeAngle(t,a,d),t.angle=c),h=s.x,u=s.y,y.e(s),e.J(n)}else if(s<-i||s>=i){const e=y.l();this.IA(e),d=this.midAngle,0!==a&&(c=this.computeAngle(t,a,d),t.angle=c),h=e.x,u=e.y,y.e(e)}else{let e,o,l=0;if(s>=0?(e=n.r[s],o=s<i-1?n.r[s+1]:e):(l=i+s,e=n.r[l],o=l>0?n.r[l-1]:e),e.equalsApprox(o)){let t,r;s>=0?(t=s>0?n.r[s-1]:e,r=s<i-2?n.r[s+2]:o):(t=l<i-1?n.r[l+1]:e,r=l>1?n.r[l-2]:o);const a=t.distanceSquaredPoint(e),h=o.distanceSquaredPoint(r);d=a>h+10?s>=0?t.directionPoint(e):e.directionPoint(t):h>a+10?s>=0?o.directionPoint(r):r.directionPoint(o):s>=0?t.directionPoint(r):r.directionPoint(t)}else d=s>=0?e.directionPoint(o):o.directionPoint(e);0!==a&&(c=this.computeAngle(t,a,d),t.angle=c),h=e.x+(o.x-e.x)*r,u=e.y+(o.y-e.y)*r}if(o.isNone())return void(t.location=new y(h,u));o.isNoSpot()&&(o=w.Center);const f=k.l();f.Ri(),f.tt(t.scale,t.scale),f.cs(t.angle,0,0);const p=t.naturalBounds,g=x.V(0,0,p.width,p.height),m=y.l();m.setRectSpot(g,o),f.gt(m);let v=-m.x,b=-m.y;const S=p.width,C=p.height,M=y.l();M.a(l);const T=isNaN(l.x),A=isNaN(l.y);if(T||A){const t=S/2+3,e=C/2+3,i=d>=45&&d<=135,n=d>=225&&d<=315;0===a&&(i||n)?(M.x=A?t:l.y,M.y=T?e:l.x,i?s>=0||isNaN(s)&&r<.5||T&&(M.y=-e):n&&((s>=0||isNaN(s)&&r<.5)&&T&&(M.y=-e),A&&(M.x=-t))):(T&&(s>=0||isNaN(s)&&r<.5?M.x=t:M.x=-t),A&&(M.y=-e),M.rotate(d))}else M.rotate(d);h+=M.x,u+=M.y,f.vg(g),v+=g.x,b+=g.y;const P=y.V(h+v,u+b);t.move(P),y.e(P),y.e(M),y.e(m),x.e(g),k.e(f)}Yr(){let t=this.fromNode;if(null!==t){const e=t.findVisibleNode();if(null!==e&&(t=e),t._e()||t.th())return!1}let e=this.toNode;if(null!==e){const t=e.findVisibleNode();if(null!==t&&(e=t),e._e()||e.th())return!1}return!0}M2(t,e,i){return!1}N2(){}ke(){return!1}computeAngle(t,e,i){return be.computeAngle(e,i)}static computeAngle(t,e){let i=0;switch(t){default:case 0:i=0;break;case 21:i=e;break;case 22:i=e+90;break;case 23:i=e-90;break;case 24:i=e+180;break;case 25:i=S.Ug(e),i>90&&i<270&&(i-=180);break;case 26:i=S.Ug(e+90),i>90&&i<270&&(i-=180);break;case 27:i=S.Ug(e-90),i>90&&i<270&&(i-=180);break;case 28:if(i=S.Ug(e),i>45&&i<135||i>225&&i<315)return 0;i>90&&i<270&&(i-=180)}return S.Ug(i)}get fromNode(){return this.so}set fromNode(t){const e=this.so;if(e!==t){const i=this.fromPort;null!==e&&(this.oo!==e&&e.b1(this,i),this.yy(),this.invalidateLayout(2)),this.so=t,null!==t&&this.Ei(t.isVisible()),this.Go=null,this.invalidateRoute();const n=this.diagram;null!==n&&n.X&&n.partManager.setFromNodeForLink(this,t,e);const s=this.fromPort,r=this.fromPortChanged;if(null!==r){let t=!0;null!==n&&(t=n.X,n.X=!0),r(this,i,s),null!==n&&(n.X=t)}null!==t&&(this.oo!==t&&t.w1(this,s),this.wy(),this.invalidateLayout(1)),this.t("fromNode",e,t),this.Pd()}}get fromPortId(){return this.no}set fromPortId(t){const e=this.no;if(e!==t){const i=this.fromPort;null!==i&&this.fromNode?.qi(i),this.yy(),this.no=t;const n=this.fromPort;null!==n&&this.fromNode?.qi(n);const s=this.diagram;if(null!==s){const e=this.data,i=s.model;null!==e&&i.Ra()&&i.setFromPortIdForLinkData(e,t)}if(i!==n){this.Go=null,this.invalidateRoute();const t=this.fromPortChanged;if(null!==t){let e=!0;null!==s&&(e=s.X,s.X=!0),t(this,i,n),null!==s&&(s.X=e)}}this.wy(),this.t("fromPortId",e,t)}}get fromPort(){const t=this.so;if(null===t)return null;const e=this.no;return t.findPort(e)}get fromPortChanged(){return this.Md}set fromPortChanged(t){const i=this.Md;i!==t&&(null!==t&&e.k(t,be,"fromPortChanged"),this.Md=t,this.t("fromPortChanged",i,t))}get toNode(){return this.oo}set toNode(t){const e=this.oo;if(e!==t){const i=this.toPort;null!==e&&(this.so!==e&&e.b1(this,i),this.yy(),this.invalidateLayout(2)),this.oo=t,null!==t&&this.Ei(t.isVisible()),this.Go=null,this.invalidateRoute();const n=this.diagram;null!==n&&n.X&&n.partManager.setToNodeForLink(this,t,e);const s=this.toPort,r=this.toPortChanged;if(null!==r){let t=!0;null!==n&&(t=n.X,n.X=!0),r(this,i,s),null!==n&&(n.X=t)}null!==t&&(this.so!==t&&t.w1(this,s),this.wy(),this.invalidateLayout(1)),this.t("toNode",e,t),this.Pd()}}get toPortId(){return this.ro}set toPortId(t){const e=this.ro;if(e!==t){const i=this.toPort;null!==i&&this.toNode?.qi(i),this.yy(),this.ro=t;const n=this.toPort;null!==n&&this.toNode?.qi(n);const s=this.diagram;if(null!==s){const e=this.data,i=s.model;null!==e&&i.Ra()&&i.setToPortIdForLinkData(e,t)}if(i!==n){this.Go=null,this.invalidateRoute();const t=this.toPortChanged;if(null!==t){let e=!0;null!==s&&(e=s.X,s.X=!0),t(this,i,n),null!==s&&(s.X=e)}}this.wy(),this.t("toPortId",e,t)}}get toPort(){const t=this.oo;if(null===t)return null;const e=this.ro;return t.findPort(e)}get toPortChanged(){return this.Nd}set toPortChanged(t){const i=this.Nd;i!==t&&(null!==t&&e.k(t,be,"toPortChanged"),this.Nd=t,this.t("toPortChanged",i,t))}get fromSpot(){return null!==this.ct?this.ct.ga:w.Default}set fromSpot(t){const e=this.fromSpot;if(!e.equals(t)){if(t=t.P(),this.Be().ga=t,this.t("fromSpot",e,t),e.isSide()||t.isSide()){const t=this.fromNode;null!==t&&t.qi(this.fromPort)}this.invalidateRoute()}}get fromEndSegmentLength(){return null!==this.ct?this.ct.pa:NaN}set fromEndSegmentLength(t){const i=this.fromEndSegmentLength;if(i!==t){if(t<0&&e.W(t,">= 0",be,"fromEndSegmentLength"),this.Be().pa=t,this.t("fromEndSegmentLength",i,t),this.computeSpot(!0,this.fromPort).isSide()){const t=this.fromNode;null!==t&&t.qi(this.fromPort)}this.invalidateRoute()}}get fromShortLength(){return null!==this.ct?this.ct.wa:NaN}set fromShortLength(t){const e=this.fromShortLength;e!==t&&(this.Be().wa=t,this.ee(),this.t("fromShortLength",e,t))}get toSpot(){return null!==this.ct?this.ct.ma:w.Default}set toSpot(t){const e=this.toSpot;if(!e.equals(t)){if(t=t.P(),this.Be().ma=t,this.t("toSpot",e,t),e.isSide()||t.isSide()){const t=this.toNode;null!==t&&t.qi(this.toPort)}this.invalidateRoute()}}get toEndSegmentLength(){return null!==this.ct?this.ct.ya:NaN}set toEndSegmentLength(t){const i=this.toEndSegmentLength;if(i!==t){if(t<0&&e.W(t,">= 0",be,"toEndSegmentLength"),this.Be().ya=t,this.t("toEndSegmentLength",i,t),this.computeSpot(!1,this.toPort).isSide()){const t=this.toNode;null!==t&&t.qi(this.toPort)}this.invalidateRoute()}}get toShortLength(){return null!==this.ct?this.ct.xa:NaN}set toShortLength(t){const e=this.toShortLength;e!==t&&(this.Be().xa=t,this.ee(),this.t("toShortLength",e,t))}Pd(){const t=this.fromNode,e=this.toNode;let i=null;if(i=null!==t?null!==e?t.findCommonContainingGroup(e):t.containingGroup:null!==e?e.containingGroup:null,this.fO(i),this.isLabeledLink){const t=this.labelNodes;for(;t.next();){t.value.containingGroup=i}}}fO(t){const e=this.wh;if(e!==t){null!==e&&e.eN(this),this.wh=t,null!==t&&t.sN(this);const i=this.containingGroupChanged;if(null!==i){let n=!0;const s=this.diagram;null!==s&&(n=s.X,s.X=!0),i(this,e,t),null!==s&&(s.X=n)}this.Se&&(this.fN===e||this.uN===e)&&this.invalidateRoute()}}uh(){const t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&super.uh()}getOtherNode(t){const e=this.fromNode;return t===e?this.toNode:e}getOtherPort(t){const e=this.fromPort;return t===e?this.toPort:e}get isLabeledLink(){return null!==this.Hs&&this.Hs.count>0}get labelNodes(){return null===this.Hs?s.instance:this.Hs.iterator}wT(t){null===this.Hs&&(this.Hs=new u),this.Hs.add(t),this.c()}xT(t){null!==this.Hs&&(this.Hs.delete(t),this.c())}Rm(t){if(super.Rm(t),this.Ba()&&this.invalidateOtherJumpOvers(this.actualBounds),!t){const t=this.so;let e=null;null!==t&&(e=this.fromPort,t.w1(this,e));const i=this.oo;let n=null;null!==i&&(n=this.toPort,(i!==t||n!==e)&&i.w1(this,n)),this.wy()}}vm(t){if(super.vm(t),this.Ba()&&this.invalidateOtherJumpOvers(this.actualBounds),!t){const t=this.so;let e=null;null!==t&&(e=this.fromPort,t.b1(this,e));const i=this.oo;let n=null;null!==i&&(n=this.toPort,(i!==t||n!==e)&&i.b1(this,n)),this.yy()}}Xc(){if(this.Se=!0,null!==this.Hs){const t=this.diagram;if(null!==t){const e=this.Hs.copy().iterator;for(;e.next();){const i=e.value;t.remove(i)}}}if(null!==this.data){const t=this.diagram;null!==t&&t.partManager.pN(this)}}updateRelationshipsFromData(){if(null===this.data)return;const t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}move(t,e){const i=e?this.location:this.position;let n=i.x;isNaN(n)&&(n=0);let s=i.y;isNaN(s)&&(s=0);const r=t.x-n,o=t.y-s;if(!0===e)super.move(t,!1);else{const t=y.V(i.x+r,i.y+o);super.move(t,!1),y.e(t)}this.fr(r,o);const a=this.labelNodes;for(;a.next();){const t=a.value,e=t.position;t.moveTo(e.x+r,e.y+o)}}get relinkableFrom(){return!!(1&this.Mt)}set relinkableFrom(t){const e=!!(1&this.Mt);e!==t&&(this.Mt=1^this.Mt,this.t("relinkableFrom",e,t),this.invalidateAdornments())}get relinkableTo(){return!!(2&this.Mt)}set relinkableTo(t){const e=!!(2&this.Mt);e!==t&&(this.Mt=2^this.Mt,this.t("relinkableTo",e,t),this.invalidateAdornments())}canRelinkFrom(){if(!this.relinkableFrom)return!1;const t=this.layer;if(null===t)return!0;if(!t.allowRelink)return!1;const e=t.diagram;return!(null!==e&&!e.allowRelink)}canRelinkTo(){if(!this.relinkableTo)return!1;const t=this.layer;if(null===t)return!0;if(!t.allowRelink)return!1;const e=t.diagram;return!(null!==e&&!e.allowRelink)}get resegmentable(){return!!(4&this.Mt)}set resegmentable(t){const e=!!(4&this.Mt);e!==t&&(this.Mt=4^this.Mt,this.t("resegmentable",e,t),this.invalidateAdornments())}get isTreeLink(){return!!(8&this.Mt)}set isTreeLink(t){const e=!!(8&this.Mt);e!==t&&(this.Mt=8^this.Mt,this.t("isTreeLink",e,t),null!==this.fromNode&&this.fromNode.r0(),null!==this.toNode&&this.toNode.r0())}get path(){const t=this.findMainElement();return t instanceof Jt?t:null}get routeBounds(){return this.updateRoute(),this.uO(this.Sf)}uO(t){let e=1/0,i=1/0;const n=this.pointsCount;if(0===n)return t.i(NaN,NaN,0,0),t;if(1===n){const n=this.getPoint(0);e=Math.min(n.x,e),i=Math.min(n.y,i),t.i(n.x,n.y,0,0)}else if(2===n){const n=this.getPoint(0),s=this.getPoint(1);e=Math.min(n.x,s.x),i=Math.min(n.y,s.y),t.i(n.x,n.y,0,0),t.unionPoint(s)}else if(9===this.computeCurve()&&n>=3&&!this.isOrthogonal){let s=this.getPoint(0);if(e=s.x,i=s.y,t.i(e,i,0,0),3===n){const n=this.getPoint(1);e=Math.min(n.x,e),i=Math.min(n.y,i);const r=this.getPoint(2);e=Math.min(r.x,e),i=Math.min(r.y,i),S.ou(s.x,s.y,n.x,n.y,n.x,n.y,r.x,r.y,.5,t)}else for(let r=3;r<n;r+=3){const o=this.getPoint(r-2);r+3>=n&&(r=n-1);const a=this.getPoint(r-1),l=this.getPoint(r);S.ou(s.x,s.y,o.x,o.y,a.x,a.y,l.x,l.y,.5,t),e=Math.min(l.x,e),i=Math.min(l.y,i),s=l}}else{const s=this.getPoint(0),r=this.getPoint(1);e=Math.min(s.x,r.x),i=Math.min(s.y,r.y),t.i(s.x,s.y,0,0),t.unionPoint(r);for(let s=2;s<n;s++){const n=this.getPoint(s);e=Math.min(n.x,e),i=Math.min(n.y,i),t.unionPoint(n)}}return this.k1.i(e-t.x,i-t.y),t}get midPoint(){return this.updateRoute(),this.computeMidPoint(new y)}IA(t){return this.updateRoute(),this.computeMidPoint(t)}computeMidPoint(t){const e=this.pointsCount;if(0===e)return t.a(y.Ik),t;if(1===e)return t.a(this.getPoint(0)),t;if(2===e){const e=this.getPoint(0),i=this.getPoint(1);return t.i((e.x+i.x)/2,(e.y+i.y)/2),t}if(this.isOrthogonal&&(this.computeCorner()>=15||9===this.computeCurve())){this.ot.getPointAlongPath(.5,t),t.add(this.getPoint(0));const e=this.ot.figures.first();return t.offset(-e.startX,-e.startY),t}if(9===this.computeCurve()){if(3===e){const e=this.getPoint(0),i=this.getPoint(1),n=this.getPoint(2);return S.TC(e.x,e.y,i.x,i.y,i.x,i.y,n.x,n.y,t),t}const i=(e-1)/3|0,n=3*(i/2|0);if(i%2==1){const e=this.getPoint(n),i=this.getPoint(n+1),s=this.getPoint(n+2),r=this.getPoint(n+3);return S.TC(e.x,e.y,i.x,i.y,s.x,s.y,r.x,r.y,t),t}return t.a(this.getPoint(n)),t}const i=this.flattenedLengths,n=this.flattenedTotalLength;let s=0,r=0,o=0;for(;s<n/2&&r<e&&(o=i[r],!(s+o>n/2));)s+=o,r++;const a=this.getPoint(r),l=this.getPoint(r+1);if(Math.abs(a.x-l.x)<1)a.y>l.y?t.i(a.x,a.y-(n/2-s)):t.i(a.x,a.y+(n/2-s));else if(Math.abs(a.y-l.y)<1)a.x>l.x?t.i(a.x-(n/2-s),a.y):t.i(a.x+(n/2-s),a.y);else{const e=(n/2-s)/o,i=e*(l.x-a.x),r=e*(l.y-a.y);t.i(a.x+i,a.y+r)}return t}get midAngle(){return this.updateRoute(),this.computeMidAngle()}computeMidAngle(){const t=this.pointsCount;if(t<2)return NaN;if(2===t){const t=this.getPoint(0),e=this.getPoint(1);return t.directionPoint(e)}if(this.isOrthogonal&&(this.computeCorner()>=15||9===this.computeCurve()))return this.ot.getAngleAlongPath(.5);if(9===this.computeCurve()&&t>=4){const e=(t-1)/3|0;let i=3*(e/2|0);if(e%2==1){i=Math.floor(i);const t=this.getPoint(i),e=this.getPoint(i+1),n=this.getPoint(i+2),s=this.getPoint(i+3);return S._D(t.x,t.y,e.x,e.y,n.x,n.y,s.x,s.y)}if(i>0&&i+1<t){const t=this.getPoint(i-1),e=this.getPoint(i+1);return t.directionPoint(e)}}const e=this.flattenedLengths,i=this.flattenedTotalLength;let n=0,s=0,r=0;for(;n<i/2&&s<t&&(r=e[s],!(n+r>i/2));)n+=r,s++;const o=this.getPoint(s),a=this.getPoint(s+1);if(Math.abs(o.x-a.x)<1&&Math.abs(o.y-a.y)<1){if(s>0&&s+2<t){const t=this.getPoint(s-1),e=this.getPoint(s+2);return t.directionPoint(e)}}else{if(Math.abs(o.x-a.x)<1)return o.y>a.y?270:90;if(Math.abs(o.y-a.y)<1)return o.x>a.x?180:0}return o.directionPoint(a)}get flattenedLengths(){return null!==this.Oa?this.Oa:(this.Se||this.S1(),this.dO())}get flattenedTotalLength(){let t=this.P1;if(isNaN(t)){const e=this.flattenedLengths,i=e.length;t=0;for(let n=0;n<i;n++)t+=e[n];this.P1=t}return t}dO(){null===this.Oa?this.Oa=[]:this.Oa.length=0;const t=this.Oa,e=this.pointsCount;for(let i=0;i<e-1;i++){let e=0;const n=this.getPoint(i),s=this.getPoint(i+1);S.z(n.x,s.x)?(e=s.y-n.y,e<0&&(e=-e),t.push(e)):S.z(n.y,s.y)?(e=s.x-n.x,e<0&&(e=-e),t.push(e)):(e=Math.sqrt(n.distanceSquaredPoint(s)),t.push(e))}return t}get points(){return this.xi}set points(t){const i=this.xi;if(i===t)return;let n=null;if(Array.isArray(t)){const i=t;let s=i.length%2==0;if(s)for(let t=0;t<i.length;t++)if("number"!=typeof i[t]||isNaN(i[t])){s=!1;break}if(s){n=new l;for(let t=0;t<i.length/2;t++){const e=new y(i[2*t],i[2*t+1]).u();n.add(e)}}else{let t=!0;for(let n=0;n<i.length;n++){const s=i[n];if(!e.K(s)||"number"!=typeof s.x||isNaN(s.x)||"number"!=typeof s.y||isNaN(s.y)){t=!1;break}}if(t){n=new l;for(let t=0;t<i.length;t++){const e=i[t];n.add(new y(e.x,e.y).u())}}}}else if(t instanceof l){n=t.copy();const e=n.iterator;for(;e.next();)e.value.u()}else e.o("Link.points value is not an instance of List or Array: "+t);if(null===n)return;n.u(),this.xi=n,this.ee(),this.S1();const s=this.diagram;null!==s&&(!s.Bh&&!s.undoManager.isUndoingRedoing&&s.xx.add(this),s.animationManager.pi&&s.animationManager.VS(this,n)),this.t("points",i,n)}get pointsCount(){return this.xi.count}getPoint(t){return this.xi.r[t]}setPoint(t,e){this.xi.setElt(t,e)}setPointAt(t,e,i){this.xi.setElt(t,new y(e,i))}insertPoint(t,e){this.xi.insertAt(t,e)}insertPointAt(t,e,i){this.xi.insertAt(t,new y(e,i))}addPoint(t){this.xi.add(t)}addPointAt(t,e){this.xi.add(new y(t,e))}removePoint(t){this.xi.removeAt(t)}clearPoints(){this.xi.clear()}fr(t,e){if(0===t&&0===e)return;if(0===this.pointsCount)return this.defaultFromPoint&&this.defaultFromPoint.offset(t,e),void(this.defaultToPoint&&this.defaultToPoint.offset(t,e));const i=this.Se,n=new l,s=this.xi.iterator;for(;s.next();){const i=s.value;n.add(new y(i.x+t,i.y+e).u())}n.u();const r=this.xi;this.xi=n;const o=this.diagram;isNaN(t)||isNaN(e)||null!==o&&o.animationManager.pi?this.c():(this.Gs.i(this.Gs.x+t,this.Gs.y+e),this.at.i(this.at.x+t,this.at.y+e),this.ef()),i?this.S1():(this.defaultFromPoint&&(this.defaultFromPoint=this.getPoint(0)),this.defaultToPoint&&(this.defaultToPoint=this.getPoint(this.pointsCount-1))),null!==o&&o.animationManager.pi&&o.animationManager.VS(this,n),this.t("points",r,n)}startRoute(){null===this.ll&&(this.ll=this.xi,this.xi=this.xi.copy())}commitRoute(){if(null===this.ll)return;const t=this.ll,e=this.xi;let i=1/0,n=1/0;const s=t.r,r=s.length;for(let t=0;t<r;t++){const e=s[t];i=Math.min(e.x,i),n=Math.min(e.y,n)}let o=1/0,a=1/0;const l=e.r,h=l.length;for(let t=0;t<h;t++){const e=l[t];o=Math.min(e.x,o),a=Math.min(e.y,a),e.u()}if(e.u(),h===r)for(let t=0;t<h;t++){const e=s[t],r=l[t];if(e.x-i!==r.x-o||e.y-n!==r.y-a){this.ee();break}}else this.ee();this.ll=null;const u=this.diagram;null!==u&&u.animationManager.pi&&u.animationManager.VS(this,e),this.S1(),this.t("points",t,e)}rollbackRoute(){null!==this.ll&&(this.xi=this.ll,this.ll=null)}BF(){null!==this.br&&(this.points=this.br,this.br=null)}S1(){0!==this.xi.count?(this.Se=!0,this.Oa=null,this.P1=NaN,this.defaultFromPoint=this.getPoint(0),this.defaultToPoint=this.getPoint(this.pointsCount-1),this.M1(!1)):this.Se=!1}invalidateRoute(){if(this.suspendsRouting)return;const t=this.path;if(null===t)return;const e=this.diagram;if(e){if(e.xx.has(this)||e.undoManager.isUndoingRedoing)return;const t=e.animationManager;if(t.isTicking&&!t.isAnimating)return;null!==this.br&&!t.isTicking&&(this.br=null)}this.Se=!1,this.c(),t.c()}get Se(){return!!(16&this.Mt)}set Se(t){!!(16&this.Mt)!==t&&(this.Mt=16^this.Mt)}get suspendsRouting(){return!!(32&this.Mt)}set suspendsRouting(t){!!(32&this.Mt)!==t&&(this.Mt=32^this.Mt)}get xy(){return!!(64&this.Mt)}set xy(t){!!(64&this.Mt)!==t&&(this.Mt=64^this.Mt)}get yN(){return!!(512&this.Mt)}set yN(t){!!(512&this.Mt)!==t&&(this.Mt=512^this.Mt)}get defaultFromPoint(){return this.aN}set defaultFromPoint(t){this.aN=null!==t?t.copy():null}get defaultToPoint(){return this.cN}set defaultToPoint(t){this.cN=null!==t?t.copy():null}updateRoute(){if(this.Se||this.xy)return;let t=!0;try{this.xy=!0,this.startRoute(),t=this.computePoints()}catch{this.xy=!1,this.rollbackRoute()}finally{this.xy=!1,t?this.commitRoute():this.rollbackRoute()}}computePoints(){const t=this.diagram;if(null===t)return!1;let e=this.fromNode,i=null;if(null===e?(be.Ia||(be.Ia=new ge,be.Ia.desiredSize=v.sc,be.Ia.ensureBounds()),this.defaultFromPoint&&(be.Ia.location=this.defaultFromPoint,be.Ia.ensureBounds(),e=be.Ia,i=be.Ia)):i=this.fromPort,null!==i&&!e.isVisible()){const t=e.findVisibleNode();null!==t&&t!==e?(e=t,i=t.port):e=t}if(this.fN=e,null===e||!e.location.isReal()||null===i||(i=e.findVisiblePort(i),null===i))return!1;let n=this.toNode,s=null;if(null===n?(be.Ea||(be.Ea=new ge,be.Ea.desiredSize=v.sc,be.Ea.ensureBounds()),this.defaultToPoint&&(be.Ea.location=this.defaultToPoint,be.Ea.ensureBounds(),n=be.Ea,s=be.Ea)):s=this.toPort,null!==s&&!n.isVisible()){const t=n.findVisibleNode();null!==t&&t!==n?(n=t,s=t.port):n=t}if(this.uN=n,null===n||!n.location.isReal()||null===s||(s=n.findVisiblePort(s),null===s))return!1;const r=this.pointsCount,o=this.computeSpot(!0,i),a=this.computeSpot(!1,s),l=this.Dd(o),h=this.Dd(a),u=i===s&&null!==i,c=this.isOrthogonal;let d=9===this.curve;u&&!c?(d=!0,this.Go=!0):this.Go=!1;const f=0===this.computeAdjusting()||u;if(!c&&!u&&l&&h){let t=!1;if(!f&&r>=3){let l=this.getLinkPoint(e,i,o,!0,!1,n,s),h=this.getLinkPoint(n,s,a,!1,!1,e,i);t=this.adjustPoints(0,l,r-1,h),t&&(l=this.getLinkPoint(e,i,o,!0,!1,n,s),h=this.getLinkPoint(n,s,a,!1,!1,e,i),this.adjustPoints(0,l,r-1,h))}t||(this.clearPoints(),d?this.gO(e,i,o,n,s,a):this.mO(e,i,o,n,s,a))}else{const t=this.isAvoiding;f&&(c&&t||u)&&this.clearPoints();const d=u?this.computeCurviness():0,p=this.getLinkPoint(e,i,o,!0,c,n,s);let g=0,m=0,v=0;if(c||!l||u){let t=this.computeEndSegmentLength(e,i,o,!0);if(v=this.getLinkDirection(e,i,p,o,!0,c,n,s),u&&(l||o.equals(a)||!c&&o.x+a.x===1&&o.y+a.y===1)&&(v-=c?90:30,d<0&&(v-=180)),v<0?v+=360:v>=360&&(v-=360),u&&(t+=Math.abs(d)*(c?1:2)),0===v?g=t:90===v?m=t:180===v?g=-t:270===v?m=-t:(g=t*Math.cos(v*Math.PI/180),m=t*Math.sin(v*Math.PI/180)),o.isNoSpot()&&u){const t=i.getDocumentPoint(w.Center,y.l()),n=y.V(t.x+1e3*g,t.y+1e3*m);this.getLinkPointFromPoint(e,i,t,n,!0,p),y.e(t),y.e(n)}}const x=this.getLinkPoint(n,s,a,!1,c,e,i);let b=0,k=0,S=0;if(c||!h||u){let t=this.computeEndSegmentLength(n,s,a,!1);if(S=this.getLinkDirection(n,s,x,a,!1,c,e,i),u&&(h||o.equals(a)||!c&&o.x+a.x===1&&o.y+a.y===1)&&(S+=c?0:30,d<0&&(S+=180)),S<0?S+=360:S>=360&&(S-=360),u&&(t+=Math.abs(d)*(c?1:2)),0===S?b=t:90===S?k=t:180===S?b=-t:270===S?k=-t:(b=t*Math.cos(S*Math.PI/180),k=t*Math.sin(S*Math.PI/180)),a.isNoSpot()&&u){const t=s.getDocumentPoint(w.Center,y.l()),e=y.V(t.x+1e3*b,t.y+1e3*k);this.getLinkPointFromPoint(n,s,t,e,!1,x),y.e(t),y.e(e)}}let C=p;(c||!l||u)&&(C=new y(p.x+g,p.y+m));let M=x;(c||!h||u)&&(M=new y(x.x+b,x.y+k)),!f&&!c&&l&&r>3&&this.adjustPoints(0,p,r-2,M)?this.setPoint(r-1,x):!f&&!c&&h&&r>3&&this.adjustPoints(1,C,r-1,x)?this.setPoint(0,p):!f&&(c?r>=6:r>4)&&this.adjustPoints(1,C,r-2,M)?(this.setPoint(0,p),this.setPoint(r-1,x)):(this.clearPoints(),this.addPoint(p),(c||!l||u)&&this.addPoint(C),c&&this.addOrthoPoints(C,v,M,S,e,n),(c||!h||u)&&this.addPoint(M),this.addPoint(x))}return t.addInvalidRoute(this),!0}wN(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x>=t.x?e.x=t.x+9e9:e.x=t.x-9e9,e.y=t.y):(e.y>=t.y?e.y=t.y+9e9:e.y=t.y-9e9,e.x=t.x),e}getLinkPointFromPoint(t,e,i,n,s,r){if(void 0===r&&(r=new y),null===t||null===e)return r.a(i),r;if(!t.isVisible()){const i=t.findVisibleNode();null!==i&&i!==t&&(e=(t=i).port)}let o=0,a=0,l=0,h=0,u=null,c=e.panel;if(null!==c&&!c.an()&&(c=c.panel),null===c)o=n.x,a=n.y,l=i.x,h=i.y;else{u=c.Us;const t=1/(u.m11*u.m22-u.m12*u.m21),e=u.m22*t,s=-u.m12*t,r=-u.m21*t,d=u.m11*t,f=t*(u.m21*u.dy-u.m22*u.dx),p=t*(u.m12*u.dx-u.m11*u.dy);o=n.x*e+n.y*r+f,a=n.x*s+n.y*d+p,l=i.x*e+i.y*r+f,h=i.x*s+i.y*d+p}return e.Jc(o,a,l,h,r),null!==u&&r.T(u),r}pO(t,e){const i=t.Gu;return null!==i?i.MT(e):null}N1(t){if(null===t)return null;let e=t.Gu;return null===e&&(e=new Se(t.part,t),t.Gu=e),e.MT(this)}getLinkPoint(t,e,i,n,s,r,o,a){if(void 0===a&&(a=new y),i.isSpot()&&!this.Dd(i))return e.getDocumentPoint(i,a),a;if(i.isSide()){const l=this.N1(e);if(null!==l){const h=l.Fd;if(a.a(h),s&&7===this.routing){const h=this.N1(o);if(null!==h&&l.Mf<h.Mf){const l=y.l(),h=y.l(),u=new x(e.getDocumentPoint(w.TopLeft,l),e.getDocumentPoint(w.BottomRight,h)),c=this.computeSpot(!n,o),d=this.getLinkPoint(r,o,c,!n,s,t,e,h);(i.includesSide(w.LeftSide)||i.includesSide(w.RightSide))&&d.y>=u.y&&d.y<=u.y+u.height?a.y=d.y:(i.includesSide(w.TopSide)||i.includesSide(w.BottomSide))&&d.x>=u.x&&d.x<=u.x+u.width&&(a.x=d.x),y.e(l),y.e(h)}}return a}}const l=e.getDocumentPoint(this.C1(i,n),y.l());let h=null;if(this.pointsCount>(s?6:2))h=n?this.getPoint(1):this.getPoint(this.pointsCount-2),s&&(h=this.wN(l,h.copy()));else{const t=this.computeSpot(!n,o),e=y.l();h=o.getDocumentPoint(this.C1(t,!n),e),s&&(h=this.wN(l,h)),y.e(e)}return this.getLinkPointFromPoint(t,e,l,h,n,a),y.e(l),a}getLinkDirection(t,e,i,n,s,r,o,a){let l=this.yO(t,e,i,n,s,r,o,a);if(o&&n.isNoSpot()&&o.isMemberOf(t)&&(l+=180,l>=360&&(l-=360)),this.Dd(n)||null===e)return l;const h=e.getDocumentAngle();return 0===h||(45<=h&&h<135?l+=90:135<=h&&h<225?l+=180:225<=h&&h<315&&(l+=270),l>=360&&(l-=360)),l}yO(t,e,i,n,s,r,o,a){if(n.isSpot())return n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:n.x<.5?225:n.x>.5?45:0;if(n.isSide()){const t=this.N1(e);if(null===t)return n.includesSide(w.TopSide)?270:n.includesSide(w.BottomSide)?90:n.includesSide(w.LeftSide)?180:0;switch(t.me){case 1:return 270;case 2:return 180;default:case 4:return 0;case 8:return 90}}if(null===e||null===a)return 0;const l=e.getDocumentPoint(w.Center,y.l());let h=null;if(this.pointsCount>(r?6:2))h=s?this.getPoint(1):this.getPoint(this.pointsCount-2),h=r?this.wN(l,h.copy()):i;else{const t=y.l();h=a.getDocumentPoint(w.Center,t),y.e(t)}let u=0;return u=Math.abs(h.x-l.x)>Math.abs(h.y-l.y)?h.x>=l.x?0:180:h.y>=l.y?90:270,y.e(l),u}computeEndSegmentLength(t,e,i,n){if(null!==e&&i.isSide()){const t=this.N1(e);if(null!==t)return t.L1}let s=NaN;return s=n?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(s)&&(s=n?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(s)&&(s=10),s}computeSpot(t,e){return void 0===e&&(e=null),t?this.wO(e||this.fromPort):this.xO(e||this.toPort)}wO(t){if(null===t)return w.Center;let e=this.fromSpot;return e.isDefault()&&(e=t.fromSpot),e===w.Default?w.None:e}xO(t){if(null===t)return w.Center;let e=this.toSpot;return e.isDefault()&&(e=t.toSpot),e===w.Default?w.None:e}Dd(t){return t===w.None||.5===t.x&&.5===t.y}C1(t,e){return.5===t.x&&.5===t.y?t:w.Center}computeOtherPoint(t,e){if(0!==this.computeAdjusting()&&this.pointsCount>4)return this.computeMidPoint(new y);{const t=this.pO(e,this);return null!==t?t.Fd:e.getDocumentPoint(w.Center)}}computeShortLength(t){if(t){let t=this.fromShortLength;if(isNaN(t)){const e=this.fromPort;null!==e&&(t=e.fromShortLength)}return isNaN(t)?0:t}{let t=this.toShortLength;if(isNaN(t)){const e=this.toPort;null!==e&&(t=e.toShortLength)}return isNaN(t)?0:t}}Tm(t,e,i,n,s,r){if(!1===this.pickable)return!1;let o;if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===r?(o=k.l(),o.Ri()):o=r,o.nc(this.T),this.containedInRect(t,o))return this.Y2(e,i,s),void 0===r&&k.e(o),!0;if(this.intersectsRect(t,o)){let a=!1;if(!this.af){const r=this.C.r;for(let l=r.length;l--;){const h=r[l];if(!h.visible&&h!==this.locationObject)continue;const u=h.actualBounds,c=this.naturalBounds;if(u.x>c.width||u.y>c.height||u.x+u.width<0||u.y+u.height<0)continue;const d=h,f=k.l();if(f.set(o),d instanceof qt?a=d.Tm(t,e,i,n,s,f):this.path===d?d instanceof Jt&&(a=d.Yv(t,n,f)):a=d.xA(t,n,f),a){let t=d;null!==e&&(t=e(d)),t&&(null===i||i(t))&&s.add(t)}k.e(f)}}return void 0===r&&k.e(o),a||null!==this.background}return void 0===r&&k.e(o),!1}get isOrthogonal(){return!(2&~this.va)}static mN(t){return!(2&~t)}get isAvoiding(){return!(4&~this.va)}computeCurve(){if(null===this.Go){const t=this.fromPort,e=null!==t&&t===this.toPort,i=this.isOrthogonal;this.Go=e&&!i}return this.Go?9:this.curve}computeCorner(){if(9===this.curve)return 0;let t=this.corner;return(isNaN(t)||t<0)&&(t=10),t}findMidLabel(){const t=this.path,e=this.C.r,i=e.length;for(let n=0;n<i;n++){const i=e[n];if(i!==t&&!i.isPanelMain&&(i.segmentIndex===-1/0||isNaN(i.segmentIndex)))return i}const n=this.labelNodes;for(;n.next();){const t=n.value;if(t.segmentIndex===-1/0||isNaN(t.segmentIndex))return t}return null}computeSpacing(){if(!this.isVisible())return 0;let t=be.cO;t=Math.max(t,this.computeThickness());const e=this.fromPort,i=this.toPort;if(null!==e&&null!==i){const n=this.findMidLabel();if(null!==n){const s=n.naturalBounds,r=n.margin,o=isNaN(s.width)?30:s.width*n.scale+r.left+r.right,a=isNaN(s.height)?14:s.height*n.scale+r.top+r.bottom,l=n.segmentOrientation;if(21===l||25===l||24===l)t=Math.max(t,a);else if(23===l||27===l||22===l||26===l)t=Math.max(t,o);else{const n=e.getDocumentPoint(w.Center).directionPoint(i.getDocumentPoint(w.Center))/180*Math.PI;t=Math.max(t,Math.abs(Math.sin(n)*o)+Math.abs(Math.cos(n)*a)+1)}9===this.curve&&(t*=1.333)}}return t}arrangeBundledLinks(t,e){if(e)for(let e=0;e<t.length;e++){const i=t[e];0===i.computeAdjusting()&&i.invalidateRoute()}}computeCurviness(){let t=this.curviness;if(isNaN(t)){t=be.aO;const i=this.Ho;if(null!==i){const n=e.et();let s=0;const r=i.js;for(let t=0;t<r.length;t++){const e=r[t].computeSpacing();n.push(e),s+=e}let o=-s/2;for(let e=0;e<r.length;e++){if(r[e]===this){t=o+n[e]/2;break}o+=n[e]}i.ny===this.fromNode&&(t=-t),e.J(n)}}return t}computeThickness(){if(!this.isVisible())return 0;const t=this.path;return null!==t?Math.max(t.strokeWidth,1):1}hasCurviness(){return!isNaN(this.curviness)||null!==this.Ho}mO(t,e,i,n,s,r){const o=this.getLinkPoint(t,e,i,!0,!1,n,s),a=this.getLinkPoint(n,s,r,!1,!1,t,e);if(this.hasCurviness()){const t=a.x-o.x,e=a.y-o.y,i=this.computeCurviness(),n=i,s=o.x+t/2,r=o.y+e/2;let l=s,h=r;if(S.f(e,0))t>0?h-=n:h+=n;else{const o=-t/e;let a=Math.sqrt(n*n/(o*o+1));i<0&&(a=-a),l=(e<0?-1:1)*a+s,h=o*(l-s)+r}this.addPoint(o),this.addPointAt(l,h),this.addPoint(a)}else{this.addPoint(o),this.addPoint(a);const l=x.l();e.getDocumentBounds(l);const h=l.containsPoint(a);s.getDocumentBounds(l);const u=l.containsPoint(o);if(h||u){const l=e.getDocumentPoint(this.C1(i,!0),new y);this.setPoint(0,this.getLinkPointFromPoint(t,e,l,a,!0,l));const h=s.getDocumentPoint(this.C1(r,!1),new y);this.setPoint(1,this.getLinkPointFromPoint(n,s,h,o,!1,h))}x.e(l)}}gO(t,e,i,n,s,r){const o=this.getLinkPoint(t,e,i,!0,!1,n,s),a=this.getLinkPoint(n,s,r,!1,!1,t,e),l=a.x-o.x,h=a.y-o.y,u=this.computeCurviness();let c=0,d=0,f=o.x+l/3,p=o.y+h/3,g=f,m=p;S.f(h,0)?l>0?m-=u:m+=u:(c=-l/h,d=Math.sqrt(u*u/(c*c+1)),u<0&&(d=-d),g=(h<0?-1:1)*d+f,m=c*(g-f)+p),f=o.x+2*l/3,p=o.y+2*h/3;let y=f,v=p;S.f(h,0)?l>0?v-=u:v+=u:(y=(h<0?-1:1)*d+f,v=c*(y-f)+p),this.clearPoints(),this.addPoint(o),this.addPointAt(g,m),this.addPointAt(y,v),this.addPoint(a),this.setPoint(0,this.getLinkPoint(t,e,i,!0,!1,n,s)),this.setPoint(3,this.getLinkPoint(n,s,r,!1,!1,t,e))}adjustPoints(t,e,i,n){let s=this.computeAdjusting();if(this.isOrthogonal){if(18===s)return!1;19===s&&(s=17)}switch(s){case 18:return this.bO(t,e,i,n);case 19:return this.kO(t,e,i,n);case 17:return this.PO(t,e,i,n);default:return!1}}bO(t,e,i,n){const s=this.getPoint(t),r=this.getPoint(i);if(s.equalsApprox(e)&&r.equalsApprox(n))return!0;const o=s.x,a=s.y;let l=r.x-o,h=r.y-a;const u=Math.sqrt(l*l+h*h);if(S.z(u,0))return!0;let c=0;S.z(l,0)?c=h<0?-Math.PI/2:Math.PI/2:(c=Math.atan(h/Math.abs(l)),l<0&&(c=Math.PI-c));const d=e.x,f=e.y,p=n.x-d,g=n.y-f,m=Math.sqrt(p*p+g*g);let y=0;S.z(p,0)?y=g<0?-Math.PI/2:Math.PI/2:(y=Math.atan(g/Math.abs(p)),p<0&&(y=Math.PI-y));const v=m/u,x=y-c;this.setPoint(t,e);for(let e=t+1;e<i;e++){const t=this.getPoint(e);l=t.x-o,h=t.y-a;const i=Math.sqrt(l*l+h*h);if(S.z(i,0))continue;let n=0;S.z(l,0)?n=h<0?-Math.PI/2:Math.PI/2:(n=Math.atan(h/Math.abs(l)),l<0&&(n=Math.PI-n));const s=n+x,r=i*v,u=d+r*Math.cos(s),c=f+r*Math.sin(s);this.setPointAt(e,u,c)}return this.setPoint(i,n),!0}kO(t,e,i,n){const s=this.getPoint(t),r=this.getPoint(i);if(s.equalsApprox(e)&&r.equalsApprox(n))return!0;const o=s.x,a=s.y,l=r.x,h=r.y,u=(l-o)**2+(h-a)**2,c=e.x,d=e.y,f=n.x,p=n.y;let g=0,m=1;f-c!==0?(g=(p-d)/(f-c),m=Math.sqrt(1+1/(g*g))):g=9e9,this.setPoint(t,e);for(let e=t+1;e<i;e++){const t=this.getPoint(e),i=t.x,n=t.y;let s=.5;0!==u&&(s=((o-i)*(o-l)+(a-n)*(a-h))/u);const r=o+s*(l-o),y=a+s*(h-a);let v=Math.sqrt((i-r)**2+(n-y)**2);n<g*(i-r)+y&&(v=-v),g>0&&(v=-v);const x=c+s*(f-c),b=d+s*(p-d);if(0!==g){const t=x+v/m,i=b-(t-x)/g;this.setPointAt(e,t,i)}else this.setPointAt(e,x,b+v)}return this.setPoint(i,n),!0}PO(t,e,i,n){if(this.isOrthogonal){let s=this.getPoint(t),r=this.getPoint(t+1),o=this.getPoint(t+2),a=r.x,l=r.y;const h=a,u=l;S.f(s.y,r.y)?S.f(r.x,o.x)?l=e.y:S.f(r.y,o.y)&&(a=e.x):S.f(s.x,r.x)&&(S.f(r.y,o.y)?a=e.x:S.f(r.x,o.x)&&(l=e.y)),this.setPointAt(t+1,a,l),s=this.getPoint(i),r=this.getPoint(i-1),o=this.getPoint(i-2);let c=r.x,d=r.y;const f=c,p=d;if(S.f(s.y,r.y)?S.f(r.x,o.x)?d=n.y:S.f(r.y,o.y)&&(c=n.x):S.f(s.x,r.x)&&(S.f(r.y,o.y)?c=n.x:S.f(r.x,o.x)&&(d=n.y)),this.setPointAt(i-1,c,d),this.JL())return this.setPointAt(t+1,h,u),this.setPointAt(i-1,f,p),!1}return this.setPoint(t,e),this.setPoint(i,n),!0}addOrthoPoints(t,e,i,n,s,r){e<0?e+=360:e>=360&&(e-=360),n<0?n+=360:n>=360&&(n-=360);const o=n;e=e>=315||e<45?0:45<=e&&e<135?90:135<=e&&e<225?180:270,n=n>=315||n<45?0:45<=n&&n<135?90:135<=n&&n<225?180:270;const a=t,l=i,h=s.actualBounds.copy(),u=r.actualBounds.copy();if(!h.isReal()||!u.isReal())return;h.inflate(be.Ua,be.Ua),u.inflate(be.Ua,be.Ua),h.unionPoint(t),u.unionPoint(i);const c=y.l(),d=y.l();0===e?l.x>a.x||270===n&&l.y<a.y&&u.right>a.x||90===n&&l.y>a.y&&u.right>a.x?(c.i(l.x,a.y),d.i(l.x,(a.y+l.y)/2),180===n?(c.x=this.computeMidOrthoPosition(a.x,a.y,l.x,l.y,!1),d.x=c.x,d.y=l.y):270===n&&l.y<a.y||90===n&&l.y>a.y?(a.x<u.left?c.x=this.computeMidOrthoPosition(a.x,a.y,u.left,l.y,!1):a.x<u.right&&(270===n&&a.y<u.top||90===n&&a.y>u.bottom)?c.x=this.computeMidOrthoPosition(a.x,a.y,l.x,l.y,!1):c.x=u.right,d.x=c.x,d.y=l.y):0===n&&a.x<u.left&&a.y>u.top&&a.y<u.bottom&&(c.x=a.x,a.y<l.y?c.y=Math.min(l.y,u.top):c.y=Math.max(l.y,u.bottom),d.y=c.y)):(c.i(a.x,l.y),d.i((a.x+l.x)/2,l.y),(180===n||90===n&&l.y<h.top||270===n&&l.y>h.bottom)&&(180===n&&(u.containsPoint(a)||h.containsPoint(l))?c.y=this.computeMidOrthoPosition(a.x,a.y,l.x,l.y,!0):l.y<a.y&&(180===n||90===n)?c.y=this.computeMidOrthoPosition(a.x,h.top,l.x,Math.max(l.y,u.bottom),!0):l.y>a.y&&(180===n||270===n)&&(c.y=this.computeMidOrthoPosition(a.x,h.bottom,l.x,Math.min(l.y,u.top),!0)),d.x=l.x,d.y=c.y),c.y>h.top&&c.y<h.bottom&&(l.x>=h.left&&l.x<=a.x||a.x<=u.right&&a.x>=l.x?(90===n||270===n)&&(c.i(Math.max((a.x+l.x)/2,a.x),a.y),d.i(c.x,l.y)):(270===n||(0===n||180===n)&&l.y<a.y?c.y=Math.min(l.y,0===n?h.top:Math.min(h.top,u.top)):c.y=Math.max(l.y,0===n?h.bottom:Math.max(h.bottom,u.bottom)),d.x=l.x,d.y=c.y))):180===e?l.x<a.x||270===n&&l.y<a.y&&u.left<a.x||90===n&&l.y>a.y&&u.left<a.x?(c.i(l.x,a.y),d.i(l.x,(a.y+l.y)/2),0===n?(c.x=this.computeMidOrthoPosition(a.x,a.y,l.x,l.y,!1),d.x=c.x,d.y=l.y):270===n&&l.y<a.y||90===n&&l.y>a.y?(a.x>u.right?c.x=this.computeMidOrthoPosition(a.x,a.y,u.right,l.y,!1):a.x>u.left&&(270===n&&a.y<u.top||90===n&&a.y>u.bottom)?c.x=this.computeMidOrthoPosition(a.x,a.y,l.x,l.y,!1):c.x=u.left,d.x=c.x,d.y=l.y):180===n&&a.x>u.right&&a.y>u.top&&a.y<u.bottom&&(c.x=a.x,a.y<l.y?c.y=Math.min(l.y,u.top):c.y=Math.max(l.y,u.bottom),d.y=c.y)):(c.i(a.x,l.y),d.i((a.x+l.x)/2,l.y),(0===n||90===n&&l.y<h.top||270===n&&l.y>h.bottom)&&(0===n&&(u.containsPoint(a)||h.containsPoint(l))?c.y=this.computeMidOrthoPosition(a.x,a.y,l.x,l.y,!0):l.y<a.y&&(0===n||90===n)?c.y=this.computeMidOrthoPosition(a.x,h.top,l.x,Math.max(l.y,u.bottom),!0):l.y>a.y&&(0===n||270===n)&&(c.y=this.computeMidOrthoPosition(a.x,h.bottom,l.x,Math.min(l.y,u.top),!0)),d.x=l.x,d.y=c.y),c.y>h.top&&c.y<h.bottom&&(l.x<=h.right&&l.x>=a.x||a.x>=u.left&&a.x<=l.x?(90===n||270===n)&&(c.i(Math.min((a.x+l.x)/2,a.x),a.y),d.i(c.x,l.y)):(270===n||(0===n||180===n)&&l.y<a.y?c.y=Math.min(l.y,180===n?h.top:Math.min(h.top,u.top)):c.y=Math.max(l.y,180===n?h.bottom:Math.max(h.bottom,u.bottom)),d.x=l.x,d.y=c.y))):90===e?l.y>a.y||180===n&&l.x<a.x&&u.bottom>a.y||0===n&&l.x>a.x&&u.bottom>a.y?(c.i(a.x,l.y),d.i((a.x+l.x)/2,l.y),270===n?(c.y=this.computeMidOrthoPosition(a.x,a.y,l.x,l.y,!0),d.x=l.x,d.y=c.y):180===n&&l.x<a.x||0===n&&l.x>a.x?(a.y<u.top?c.y=this.computeMidOrthoPosition(a.x,a.y,l.x,u.top,!0):a.y<u.bottom&&(180===n&&a.x<u.left||0===n&&a.x>u.right)?c.y=this.computeMidOrthoPosition(a.x,a.y,l.x,l.y,!0):c.y=u.bottom,d.x=l.x,d.y=c.y):90===n&&a.y<u.top&&a.x>u.left&&a.x<u.right&&(a.x<l.x?c.x=Math.min(l.x,u.left):c.x=Math.max(l.x,u.right),c.y=a.y,d.x=c.x)):(c.i(l.x,a.y),d.i(l.x,(a.y+l.y)/2),(270===n||0===n&&l.x<h.left||180===n&&l.x>h.right)&&(270===n&&(u.containsPoint(a)||h.containsPoint(l))?c.x=this.computeMidOrthoPosition(a.x,a.y,l.x,l.y,!1):l.x<a.x&&(270===n||0===n)?c.x=this.computeMidOrthoPosition(h.left,a.y,Math.max(l.x,u.right),l.y,!1):l.x>a.x&&(270===n||180===n)&&(c.x=this.computeMidOrthoPosition(h.right,a.y,Math.min(l.x,u.left),l.y,!1)),d.x=c.x,d.y=l.y),c.x>h.left&&c.x<h.right&&(l.y>=h.top&&l.y<=a.y||a.y<=u.bottom&&a.y>=l.y?(0===n||180===n)&&(c.i(a.x,Math.max((a.y+l.y)/2,a.y)),d.i(l.x,c.y)):(180===n||(90===n||270===n)&&l.x<a.x?c.x=Math.min(l.x,90===n?h.left:Math.min(h.left,u.left)):c.x=Math.max(l.x,90===n?h.right:Math.max(h.right,u.right)),d.x=c.x,d.y=l.y))):l.y<a.y||180===n&&l.x<a.x&&u.top<a.y||0===n&&l.x>a.x&&u.top<a.y?(c.i(a.x,l.y),d.i((a.x+l.x)/2,l.y),90===n?(c.y=this.computeMidOrthoPosition(a.x,a.y,l.x,l.y,!0),d.x=l.x,d.y=c.y):180===n&&l.x<a.x||0===n&&l.x>=a.x?(a.y>u.bottom?c.y=this.computeMidOrthoPosition(a.x,a.y,l.x,u.bottom,!0):a.y>u.top&&(180===n&&a.x<u.left||0===n&&a.x>u.right)?c.y=this.computeMidOrthoPosition(a.x,a.y,l.x,l.y,!0):c.y=u.top,d.x=l.x,d.y=c.y):270===n&&a.y>u.bottom&&a.x>u.left&&a.x<u.right&&(a.x<l.x?c.x=Math.min(l.x,u.left):c.x=Math.max(l.x,u.right),c.y=a.y,d.x=c.x)):(c.i(l.x,a.y),d.i(l.x,(a.y+l.y)/2),(90===n||0===n&&l.x<h.left||180===n&&l.x>h.right)&&(90===n&&(u.containsPoint(a)||h.containsPoint(l))?c.x=this.computeMidOrthoPosition(a.x,a.y,l.x,l.y,!1):l.x<a.x&&(90===n||0===n)?c.x=this.computeMidOrthoPosition(h.left,a.y,Math.max(l.x,u.right),l.y,!1):l.x>a.x&&(90===n||180===n)&&(c.x=this.computeMidOrthoPosition(h.right,a.y,Math.min(l.x,u.left),l.y,!1)),d.x=c.x,d.y=l.y),c.x>h.left&&c.x<h.right&&(l.y<=h.bottom&&l.y>=a.y||a.y>=u.top&&a.y<=l.y?(0===n||180===n)&&(c.i(a.x,Math.min((a.y+l.y)/2,a.y)),d.i(l.x,c.y)):(180===n||(90===n||270===n)&&l.x<a.x?c.x=Math.min(l.x,270===n?h.left:Math.min(h.left,u.left)):c.x=Math.max(l.x,270===n?h.right:Math.max(h.right,u.right)),d.x=c.x,d.y=l.y))),this.yN=n!==o,this.dN=e,this.gN=n,this.addPoint(c.copy()),this.addPoint(d.copy()),y.e(c),y.e(d)}computeMidOrthoPosition(t,e,i,n,s){let r=0;return this.hasCurviness()&&!this.computeSpot(!0,this.fromPort).isSide()&&!this.computeSpot(!1,this.toPort).isSide()&&(r=this.computeCurviness()),s?(e+n)/2+r:(t+i)/2+r}JL(){if(null===this.diagram||!this.isAvoiding||this.diagram.animationManager.isTicking)return!1;const t=this.points.r,e=t.length;if(e<4)return!1;const i=this.diagram.getPositions(!1,this.containingGroup,null);for(let n=1;n<e-2;n++){const e=t[n],s=t[n+1];if(!i.isUnoccupied(Math.min(e.x,s.x),Math.min(e.y,s.y),Math.abs(e.x-s.x),Math.abs(e.y-s.y)))return!0}return!1}findClosestSegment(t){const e=t.x,i=t.y;let n=this.getPoint(0),s=this.getPoint(1),r=y.distanceLineSegmentSquared(e,i,n.x,n.y,s.x,s.y),o=0;for(let t=1;t<this.pointsCount-1;t++){n=this.getPoint(t+1);const a=y.distanceLineSegmentSquared(e,i,s.x,s.y,n.x,n.y);s=n,a<r&&(o=t,r=a)}return o}ee(){this.bh=!1,this.c()}get bh(){return!!(128&this.Mt)}set bh(t){!!(128&this.Mt)!==t&&(this.Mt=128^this.Mt)}get geometry(){if(!this.bh){if(this.updateRoute(),this.pointsCount<2)return this.bh=!0,this.ot;this.ot=this.makeGeometry()}return this.ot}sd(t){if(!t){if(!1===this.Se)return;const t=this.findMainElement();if(this.bh&&(null===t||null!==t.geometry))return}this.pointsCount<2?this.bh=!0:this.ot=this.makeGeometry();const e=this.path;if(null===e)return;e.ot=this.ot;const i=this.C.r,n=i.length;for(let t=0;t<n;t++){const n=i[t];n!==e&&n.isPanelMain&&n instanceof Jt&&(n.ot=this.ot)}}SO(t){return this.Ba()&&t.Jl.has(this)&&(0!==this.Sf.width||0!==this.Sf.height)&&(t.animationManager.isAnimating||t.currentTool!==t.toolManager)}makeGeometry(){const t=this.ot,e=this.pointsCount;let i=!1;const n=this.diagram;null!==n&&this.SO(n)&&(i=!0);let s=0,r=0,o=this.getPoint(0).copy();const a=o.copy(),l=this.xi.r,h=this.computeCurve();if(9===h&&e>=3&&!S.z(this.smoothness,0))if(3===e){let t=this.getPoint(1);s=Math.min(o.x,t.x),r=Math.min(o.y,t.y),t=this.getPoint(2),s=Math.min(s,t.x),r=Math.min(r,t.y)}else if(this.isOrthogonal){for(let t=0;t<e;t++){const e=l[t];a.x=Math.min(e.x,a.x),a.y=Math.min(e.y,a.y)}s=a.x,r=a.y}else{for(let t=3;t<e;t+=3){t+3>=e&&(t=e-1);const i=this.getPoint(t);a.x=Math.min(i.x,a.x),a.y=Math.min(i.y,a.y)}s=a.x,r=a.y}else{for(let t=0;t<e;t++){const e=l[t];a.x=Math.min(e.x,a.x),a.y=Math.min(e.y,a.y)}s=a.x,r=a.y}if(s-=this.k1.x,r-=this.k1.y,o.x-=s,o.y-=r,2!==e||this.Ba()){t.type=4;const n=he.vC(t);if(0!==this.computeShortLength(!0)&&(o=this.Nf(o,!0,a)),n.hu(o.x,o.y,!1,!1),9===h&&e>=3&&!S.z(this.smoothness,0))if(3===e){const t=this.getPoint(1),e=t.x-s,i=t.y-r;let o=this.getPoint(2).copy();o.x-=s,o.y-=r,0!==this.computeShortLength(!1)&&(o=this.Nf(o,!1,a)),n.hr(e,i,e,i,o.x,o.y)}else if(this.isOrthogonal){const t=y.V(s,r),e=y.l();e.a(this.getPoint(1));const i=y.V(s,r),o=y.V(s,r);let a=this.getPoint(0),l=null;const h=this.smoothness/3;for(let u=1;u<this.pointsCount-1;u++){l=this.getPoint(u);const c=a,d=l,f=this.getPoint(this.xN(l,u,!1));S.z(c.x,d.x)&&S.z(d.x,f.x)||S.z(c.y,d.y)&&S.z(d.y,f.y)||(this.MO(c,d,f,h,i,o),(1===u||2===u&&S.z(a.x,this.getPoint(0).x)&&S.z(a.y,this.getPoint(0).y))&&(e.x=.5*(a.x+l.x),e.y=.5*(a.y+l.y)),n.hr(e.x-s,e.y-r,i.x-s,i.y-r,l.x-s,l.y-r),t.set(i),e.set(o),a=l)}let u=a.x,c=a.y,d=this.getPoint(this.pointsCount-1);0!==this.computeShortLength(!1)&&(d=this.Nf(d.copy(),!1,y.xo)),u=.5*(u+d.x),c=.5*(c+d.y),n.hr(o.x-s,o.y-r,u-s,c-r,d.x-s,d.y-r),y.e(t),y.e(e),y.e(i),y.e(o)}else for(let t=3;t<e;t+=3){const i=this.getPoint(t-2);t+3>=e&&(t=e-1);const o=this.getPoint(t-1);let a=this.getPoint(t);t===e-1&&0!==this.computeShortLength(!1)&&(a=this.Nf(a.copy(),!1,y.xo)),n.hr(i.x-s,i.y-r,o.x-s,o.y-r,a.x-s,a.y-r)}else{const t=y.l();t.a(this.getPoint(0));const o=y.l();o.a(t);const a=this.computeCorner();let l=1,h=0;for(;l<e;){l=this.xN(t,l,l>1);let u=this.getPoint(l);if(l>=e-1){if(t.equals(u)){if(0===h)for(l=1;l<e;)o.a(t),u=this.getPoint(l++),this.xn(n,-s,-r,t,u,i),t.a(u)}else 0!==this.computeShortLength(!1)&&(u=this.Nf(u.copy(),!1,y.xo)),this.xn(n,-s,-r,t,u,i);break}h=this.xN(u,l+1,l<e-3);const c=this.getPoint(h);this.NO(n,-s,-r,t,u,c,t,o,a,i),o.a(u),l=h}y.e(t)}return he.OC(n),this.bh=!0,t}{let e=this.getPoint(1).copy();return e.x-=s,e.y-=r,0!==this.computeShortLength(!0)&&(o=this.Nf(o,!0,a)),0!==this.computeShortLength(!1)&&(e=this.Nf(e,!1,a)),t.type=1,t.startX=o.x,t.startY=o.y,t.endX=e.x,t.endY=e.y,this.bh=!0,t}}A1(t,e,i,n){let s=i-t;if(isNaN(s)||s===1/0||s===-1/0)return NaN;s<0&&(s=-s);let r=n-e;return isNaN(r)||r===1/0||r===-1/0?NaN:(r<0&&(r=-r),S.z(s,0)?r:S.z(r,0)?s:Math.sqrt(s*s+r*r))}MO(t,e,i,n,s,r){isNaN(n)&&(n=this.smoothness/3);const o=t.x,a=t.y,l=e.x,h=e.y,u=i.x,c=i.y,d=n*this.A1(o,a,l,h),f=n*this.A1(l,h,u,c);if(S.z(a,h)&&S.z(l,u)&&(l>o?c>h?(s.x=l-d,s.y=h-d,r.x=l+f,r.y=h+f):(s.x=l-d,s.y=h+d,r.x=l+f,r.y=h-f):c>h?(s.x=l+d,s.y=h-d,r.x=l-f,r.y=h+f):(s.x=l+d,s.y=h+d,r.x=l-f,r.y=h-f)),S.z(o,l)&&S.z(h,c)&&(h>a?u>l?(s.x=l-d,s.y=h-d,r.x=l+f,r.y=h+f):(s.x=l+d,s.y=h-d,r.x=l-f,r.y=h+f):u>l?(s.x=l-d,s.y=h+d,r.x=l+f,r.y=h-f):(s.x=l+d,s.y=h+d,r.x=l-f,r.y=h-f)),S.z(o,l)&&S.z(l,u)||S.z(a,h)&&S.z(h,c)){const t=.5*(o+u),e=.5*(a+c);s.x=t,s.y=e,r.x=t,r.y=e}}Nf(t,e,i){const n=this.pointsCount;if(n<2)return t;if(e){const e=this.getPoint(1),s=e.x-i.x,r=e.y-i.y,o=this.A1(t.x,t.y,s,r);if(0===o)return t;const a=2===n?.5*o:o;let l=this.computeShortLength(!0);l>a&&(l=a);const h=l*(s-t.x)/o,u=l*(r-t.y)/o;t.x+=h,t.y+=u}else{const e=this.getPoint(n-2),s=e.x-i.x,r=e.y-i.y,o=this.A1(t.x,t.y,s,r);if(0===o)return t;const a=2===n?.5*o:o;let l=this.computeShortLength(!1);l>a&&(l=a);const h=l*(t.x-s)/o,u=l*(t.y-r)/o;t.x-=h,t.y-=u}return t}xN(t,e,i){const n=this.pointsCount;let s=t;for(;S.z(t.x,s.x)&&S.z(t.y,s.y);){if(e>=n)return n-1;s=this.getPoint(e++)}if(!S.z(t.x,s.x)&&!S.z(t.y,s.y))return e-1;let r=s;for(;S.z(t.x,s.x)&&S.z(s.x,r.x)&&(!i||(t.y>=s.y?s.y>=r.y:s.y<=r.y))||S.z(t.y,s.y)&&S.z(s.y,r.y)&&(!i||(t.x>=s.x?s.x>=r.x:s.x<=r.x));){if(e>=n)return n-1;r=this.getPoint(e++)}return e-2}NO(t,e,i,n,s,r,o,a,l,h){if(S.f(n.y,s.y)&&S.f(s.x,r.x)){let u=Math.min(l,Math.abs(s.x-a.x)/2);const c=Math.min(u,Math.abs(r.y-s.y)/2);if(u=c,S.f(u,0))return this.xn(t,e,i,n,s,h),void o.a(s);let d=s.x;const f=s.y,p=d;let g=f;s.x>n.x?(d=s.x-u,g=r.y>s.y?s.y+c:s.y-c):(d=s.x+u,g=r.y>s.y?s.y+c:s.y-c);const m=y.V(d,f);this.xn(t,e,i,n,m,h),y.e(m),t.Nw(s.x+e,s.y+i,p+e,g+i),o.i(p,g)}else if(S.f(n.x,s.x)&&S.f(s.y,r.y)){let u=Math.min(l,Math.abs(s.y-a.y)/2);const c=Math.min(u,Math.abs(r.x-s.x)/2);if(u=c,S.f(c,0))return this.xn(t,e,i,n,s,h),void o.a(s);const d=s.x;let f=s.y,p=d;const g=f;s.y>n.y?(f=s.y-u,p=r.x>s.x?s.x+c:s.x-c):(f=s.y+u,p=r.x>s.x?s.x+c:s.x-c);const m=y.V(d,f);this.xn(t,e,i,n,m,h),y.e(m),t.Nw(s.x+e,s.y+i,p+e,g+i),o.i(p,g)}else this.xn(t,e,i,n,s,h),o.a(s)}computeJumpLength(){return 10}xn(t,e,i,n,s,r){if(r||!this.Ba())t.lr(s.x+e,s.y+i);else{const r=this.computeJumpLength(),o=r/2,a=[];let l=0;this.isVisible()&&(l=this.CO(n,s,a));let h=n.x,u=n.y;if(l>0)if(S.f(n.y,s.y))if(n.x<s.x){let c=0;for(;c<l;){const d=Math.max(n.x,Math.min(a[c++]-o,s.x-r));t.lr(d+e,s.y+i),h=d+e,u=s.y+i;let f=Math.min(d+r,s.x);for(;c<l;){const t=a[c];if(!(t<f+r))break;c++,f=Math.min(t+o,s.x)}const p=s.y-r+i,g=f+e,m=s.y+i;10===this.curve?t.hu(g,m,!1,!1):t.hr(h,p,g,p,g,m),h=g,u=m}}else{let c=l-1;for(;c>=0;){const l=Math.min(n.x,Math.max(a[c--]+o,s.x+r));t.lr(l+e,s.y+i),h=l+e,u=s.y+i;let d=Math.max(l-r,s.x);for(;c>=0;){const t=a[c];if(!(t>d-r))break;c--,d=Math.max(t-o,s.x)}const f=s.y-r+i,p=d+e,g=s.y+i;10===this.curve?t.hu(p,g,!1,!1):t.hr(h,f,p,f,p,g),h=p,u=g}}else if(S.f(n.x,s.x))if(n.y<s.y){let c=0;for(;c<l;){const d=Math.max(n.y,Math.min(a[c++]-o,s.y-r));t.lr(s.x+e,d+i),h=s.x+e,u=d+i;let f=Math.min(d+r,s.y);for(;c<l;){const t=a[c];if(!(t<f+r))break;c++,f=Math.min(t+o,s.y)}const p=s.x-r+e,g=s.x+e,m=f+i;10===this.curve?t.hu(g,m,!1,!1):t.hr(p,u,p,m,g,m),h=g,u=m}}else{let c=l-1;for(;c>=0;){const l=Math.min(n.y,Math.max(a[c--]+o,s.y+r));t.lr(s.x+e,l+i),h=s.x+e,u=l+i;let d=Math.max(l-r,s.y);for(;c>=0;){const t=a[c];if(!(t>d-r))break;c--,d=Math.max(t-o,s.y)}const f=s.x-r+e,p=s.x+e,g=d+i;10===this.curve?t.hu(p,g,!1,!1):t.hr(f,u,f,g,p,g),h=p,u=g}}t.lr(s.x+e,s.y+i)}}CO(t,e,i){const n=this.diagram;if(null===n||t.equals(e))return 0;const s=n.layers;for(;s.next();){const n=s.value;if(null!==n&&n.visible){const s=n.qS(),r=s.length;for(let n=0;n<r;n++){const r=s[n];if(!(r instanceof be))continue;if(r===this)return i.length>0&&i.sort(((t,e)=>t-e)),i.length;if(!r.isVisible()||!r.Ba())continue;const o=r.routeBounds;if(!o.isReal()||!this.routeBounds.intersectsRect(o)||this.usesSamePort(r))continue;const a=r.path;null!==a&&a.isVisibleObject()&&this.LO(t,e,i,r)}}}return i.length>0&&i.sort(((t,e)=>t-e)),i.length}LO(t,e,i,n){const s=S.f(t.y,e.y),r=n.pointsCount;let o=n.getPoint(0);const a=y.l();for(let l=1;l<r;l++){const h=n.getPoint(l);if(l<r-1){const t=n.getPoint(l+1);if(o.y===h.y&&h.y===t.y){if(h.x>o.x&&t.x>=h.x||h.x<o.x&&t.x<=h.x)continue}else if(o.x===h.x&&h.x===t.x&&(h.y>o.y&&t.y>=h.y||h.y<o.y&&t.y<=h.y))continue}this.AO(t,e,o,h,a)&&(s?i.push(a.x):i.push(a.y)),o=h}y.e(a)}AO(t,e,i,n,s){const r=t.x,o=t.y,a=e.x,l=e.y,h=i.x,u=i.y,c=n.x,d=n.y;if(S.f(r,a)){if(!S.f(o,l)&&S.f(u,d)&&Math.min(o,l)<u&&Math.max(o,l)>u&&Math.min(h,c)<r&&Math.max(h,c)>r&&!S.f(h,c))return s.x=r,s.y=u,!0}else if(S.f(o,l)&&S.f(h,c)&&Math.min(r,a)<h&&Math.max(r,a)>h&&Math.min(u,d)<o&&Math.max(u,d)>o&&!S.f(u,d))return s.x=h,s.y=o,!0;return s.x=0,s.y=0,!1}get firstPickIndex(){return this.pointsCount<=2?0:this.isOrthogonal||!this.Dd(this.computeSpot(!0))?1:0}get lastPickIndex(){const t=this.pointsCount;return 0===t?0:t<=2?t-1:this.isOrthogonal||!this.Dd(this.computeSpot(!1))?t-2:t-1}Ba(){const t=this.curve;return 11===t||10===t}M1(t){if(t||this.Ba()){const t=this.diagram;null!==t&&!t.animationManager.isTicking&&!t.Jl.has(this)&&(0!==this.Sf.width||0!==this.Sf.height)&&t.Jl.set(this,this.Sf.copy())}}invalidateOtherJumpOvers(t){const e=this.layer;if(null===e||!e.visible||e.isTemporary)return;const i=e.diagram;if(null===i||i.animationManager.isTicking)return;let n=!1;const s=i.layers;for(;s.next();){const i=s.value;if(i.visible)if(i===e){n=!0;let e=!1;const s=i.qS(),r=s.length;for(let i=0;i<r;i++){const n=s[i];n instanceof be&&(n===this?e=!0:e&&this.NT(n,t))}}else if(n){const e=i.qS(),n=e.length;for(let i=0;i<n;i++){const n=e[i];n instanceof be&&this.NT(n,t)}}}}NT(t,e){if(null===t||!t.bh||!t.Se||!t.Ba())return;const i=t.routeBounds;i.isReal()&&(!this.routeBounds.intersectsRect(i)&&!e.intersectsRect(i)||this.usesSamePort(t)||t.ee())}usesSamePort(t){const e=this.pointsCount,i=t.pointsCount;if(e>0&&i>0){const n=this.getPoint(0),s=t.getPoint(0);if(n.equalsApprox(s))return!0;const r=this.getPoint(e-1),o=t.getPoint(i-1);if(r.equalsApprox(o)||n.equalsApprox(o)||r.equalsApprox(s))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1}isVisible(){if(!super.isVisible())return!1;const t=this.containingGroup;let e=!0;const i=this.diagram;null!==i&&(e=i.isTreePathToChildren);const n=this.fromNode;if(null!==n){if(this.isTreeLink&&e&&!n.isTreeExpanded)return!1;if(n===t)return!0;let i=n;for(;null!==i;){if(i.labeledLink===this)return!0;i=i.containingGroup}const s=n.findVisibleNode();if(null===s||s===t)return!1}const s=this.toNode;if(null!==s){if(this.isTreeLink&&!e&&!s.isTreeExpanded)return!1;if(s===t)return!0;let i=s;for(;null!==i;){if(i.labeledLink===this)return!0;i=i.containingGroup}const n=s.findVisibleNode();if(null===n||n===t)return!1}return!0}Ei(t){if(super.Ei(t),t&&this.M1(!1),null!==this.Ho&&this.Ho.Sd(),null!==this.Hs){const e=this.Hs.iterator;for(;e.next();)e.value.Ei(t)}}get adjusting(){return this.Pf}set adjusting(t){const e=this.Pf;e!==t&&(this.Pf=t,this.t("adjusting",e,t))}computeAdjusting(){return this.isAvoiding&&null!==this.diagram&&this.diagram.animationManager.defaultAnimation.isAnimating?17:this.Pf}get corner(){return this.Cd}set corner(t){const e=this.Cd;e!==t&&(this.Cd=t,this.ee(),this.t("corner",e,t))}get curve(){return this.Ld}set curve(t){const e=this.Ld;e!==t&&(this.Ld=t,this.invalidateRoute(),this.ee(),this.M1(10===e||11===e||10===t||11===t),this.t("curve",e,t))}get curviness(){return this.Ad}set curviness(t){const e=this.Ad;e!==t&&(this.Ad=t,this.invalidateRoute(),this.ee(),this.t("curviness",e,t))}get routing(){return this.va}set routing(t){const e=this.va;e!==t&&(this.va=t,this.isAvoiding&&null!==this.diagram&&(this.diagram.Vm=!0),this.Go=null,this.invalidateRoute(),this.M1(be.mN(e)||be.mN(t)),this.t("routing",e,t))}get smoothness(){return this.Td}set smoothness(t){const e=this.Td;e!==t&&(this.Td=t,this.ee(),this.t("smoothness",e,t))}wy(){const t=this.so;if(null===t)return;const e=this.oo;if(null===e||!isNaN(this.curviness))return;const i=this.no,n=this.ro;let s=null,r=null;const o=t.ti.r,a=o.length;for(let l=0;l<a;l++){const a=o[l];(a.so!==t||a.no!==i||a.oo!==e||a.ro!==n)&&(a.so!==e||a.no!==n||a.oo!==t||a.ro!==i)||(null===r?r=a:(null===s&&(s=[],s.push(r)),s.push(a)))}if(null!==s){let r=t.pT(e,i,n);null===r&&(r=new we(t,i,e,n),t.gT(r),e.gT(r)),r.js=s;for(let t=0;t<s.length;t++){s[t].Ho=r}r.Sd()}}yy(){const t=this.Ho;if(null!==t){if(!isNaN(this.curviness))return;this.Ho=null;const e=t.js.indexOf(this);e>=0&&(t.js.splice(e,1),t.Sd())}}Nl(){return!0}get key(){const t=this.diagram;if(null!==t&&t.model.Ra())return t.model.getKeyForLinkData(this.data)}}class we{Fo;Is;ny;lN;p1;hN;js;constructor(t,e,i,n){u.Gi(this),this.Fo=!1,this.Is=!1,this.ny=t,this.lN=e,this.p1=i,this.hN=n,this.js=[]}Sd(){if(!this.Fo){const t=this.js;if(t.length>0){const e=t[0].diagram;null!==e&&(e.wM.add(this),this.Is=e.undoManager.isUndoingRedoing)}}this.Fo=!0}RM(){if(this.Fo){this.Fo=!1;const t=this.js;if(t.length>0){const e=t[0],i=e.diagram,n=null===i||i.Bh&&!this.Is;this.Is=!1,e.arrangeBundledLinks(t,n),1===t.length&&(e.Ho=null,t.length=0)}0===t.length&&(this.ny.mT(this),this.p1.mT(this))}}}class ke{oe;re;Va;za;di;gi;Vt;kh;Ph;fa;HM;Fo;by;Kc;jM;qM;constructor(t){u.Gi(this),this.fa=null,this.HM=null,this.Fo=!0,this.by=!1,this.oe=1,this.re=1,this.Va=-1,this.za=-1,this.di=t.width,this.gi=t.height,this.Vt=[],this.kh=0,this.Ph=0,this.Kc=11,this.jM=2*this.Kc,this.qM=2*this.Kc}static qs=0;static Xa=1;static Rd=999999;static bN=ke.Rd+1;static kN=ke.Rd+2;Lb(t){if(t.width<=0||t.height<=0)return;const e=t.x,i=t.y,n=t.x+t.width,s=t.y+t.height;this.oe=Math.floor((e-this.di)/this.di)*this.di,this.re=Math.floor((i-this.gi)/this.gi)*this.gi,this.Va=Math.ceil((n+2*this.di)/this.di)*this.di,this.za=Math.ceil((s+2*this.gi)/this.gi)*this.gi;const r=1+(0|Math.ceil((this.Va-this.oe)/this.di)),o=1+(0|Math.ceil((this.za-this.re)/this.gi));if(0===this.Vt.length||this.kh<r-1||this.Ph<o-1){const t=[];for(let e=0;e<=r;e++)t[e]=new Uint32Array(o);this.Vt=t,this.kh=r-1,this.Ph=o-1}this.TO(ke.bN)}get bounds(){return new x(this.oe,this.re,this.Va-this.oe,this.za-this.re)}get cellWidth(){return this.di}set cellWidth(t){t>0&&t!==this.di&&(this.di=t,this.Lb(this.bounds))}get cellHeight(){return this.gi}set cellHeight(t){t>0&&t!==this.gi&&(this.gi=t,this.Lb(this.bounds))}vd(t,e){return this.oe<=t&&t<=this.Va&&this.re<=e&&e<=this.za}lo(t,e){if(!this.vd(t,e))return ke.bN;t-=this.oe,t/=this.di,e-=this.re;const i=0|t,n=0|(e/=this.gi);return this.Vt[i][n]}VR(t,e,i,n){if(!this.vd(t,e))return;const s=(t-this.oe)/this.di|0,r=(e-this.re)/this.gi|0,o=(t+i-this.oe)/this.di|0,a=(e+n-this.re)/this.gi|0,l=Math.min(o,this.kh),h=Math.min(a,this.Ph);for(let t=s;t<=l;t++){const e=this.Vt[t];if(e.fill)e.fill(ke.qs,r,h+1);else for(let t=r;t<=h;t++)e[t]=ke.qs}}TO(t){for(let e=0;e<=this.kh;e++){const i=this.Vt[e];if(i.fill)i.fill(t);else for(let e=0;e<=this.Ph;e++)i[e]=t}}lA(){for(let t=0;t<=this.kh;t++){const e=this.Vt[t];for(let t=0;t<=this.Ph;t++)e[t]>=ke.Xa&&(e[t]=ke.bN)}}DO(t,e){return this.lo(t,e)===ke.qs}isUnoccupied(t,e,i,n){if(t>this.Va||t+i<this.oe||e>this.za||e+n<this.re)return!0;let s=(t-this.oe)/this.di|0,r=(e-this.re)/this.gi|0,o=Math.max(0,i)/this.di+1|0,a=Math.max(0,n)/this.gi+1|0;if(s<0&&(o+=s,s=0),r<0&&(a+=r,r=0),o<0||a<0)return!0;const l=0|Math.min(s+o-1,this.kh),h=0|Math.min(r+a-1,this.Ph);for(let t=s;t<=l;t++){const e=this.Vt[t];for(let t=r;t<=h;t++)if(e[t]===ke.qs)return!1}return!0}maxAvoidsLinksSpaceH(t,e,i,n){if(t>this.Va||e<this.oe||i>this.za||i<this.re)return 0;const s=(t-this.oe)/this.di|0,r=(e-this.oe)/this.di|0,o=(i-this.re)/this.gi|0,a=n/this.gi+1|0;let l;for(l=0;l<a/2;l++){let t=!1;for(let e=s;e<=r;e++)if(this.Vt[e][o+l]===ke.qs||this.Vt[e][o-l]===ke.qs){t=!0;break}if(t)return Math.max(0,(2*l-1)*this.gi)}return n}maxAvoidsLinksSpaceV(t,e,i,n){if(t>this.za||e<this.re||i>this.Va||i<this.oe)return 0;const s=(t-this.re)/this.gi|0,r=(e-this.re)/this.gi|0,o=(i-this.oe)/this.di|0,a=n/this.di+1|0;let l;for(l=0;l<a/2;l++){let t=!1;for(let e=s;e<=r;e++)if(this.Vt[o+l][e]===ke.qs||this.Vt[o-l][e]===ke.qs){t=!0;break}if(t)return Math.max(0,(2*l-1)*this.di)}return n}FO(t,e,i,n,s,r,o,a){t|=0,e|=0;let l=this.Vt[t][e];if(l>=ke.Xa&&l<ke.Rd)for(n?e+=i:t+=i,l+=1;s<=t&&t<=r&&o<=e&&e<=a;){if(l>=this.Vt[t][e])break;this.Vt[t][e]=l,l+=1,n?e+=i:t+=i}return n?e:t}ho(t,e,i,n,s,r,o,a){if(t<s||t>r||e<o||e>a)return;const l=this.FO(t,e,i,n,s,r,o,a);if(n)if(i>0)for(let h=e+i;h<l;h+=i)this.ho(t,h,1,!n,s,r,o,a),this.ho(t,h,-1,!n,s,r,o,a);else for(let h=e+i;h>l;h+=i)this.ho(t,h,1,!n,s,r,o,a),this.ho(t,h,-1,!n,s,r,o,a);else if(i>0)for(let h=t+i;h<l;h+=i)this.ho(h,e,1,!n,s,r,o,a),this.ho(h,e,-1,!n,s,r,o,a);else for(let h=t+i;h>l;h+=i)this.ho(h,e,1,!n,s,r,o,a),this.ho(h,e,-1,!n,s,r,o,a)}T1(t,e,i,n,s,r,o,a,l,h){let u=0|t,c=0|e,d=ke.qs,f=ke.Xa;for(this.Vt[u][c]=f;d===ke.qs&&u>o&&u<a&&c>l&&c<h;)f+=1,this.Vt[u][c]=f,r?c+=s:u+=s,d=this.Vt[u][c];return r?c:u}D1(t,e,i,n,s,r,o,a,l,h){let u=0|i,c=0|n,d=ke.qs;const f=ke.Rd;for(this.Vt[u][c]=f;d===ke.qs&&u>o&&u<a&&c>l&&c<h;)this.Vt[u][c]=f,r?c+=s:u+=s,d=this.Vt[u][c]}CT(t,i,n,s,r,o){this.by=!1;let a=t.x,l=t.y;if(!this.vd(a,l))return;a-=this.oe,a/=this.di,l-=this.re,l/=this.gi;let h=n.x,u=n.y;if(!this.vd(h,u))return;if(h-=this.oe,h/=this.di,u-=this.re,u/=this.gi,Math.abs(a-h)<=1&&Math.abs(l-u)<=1)return void(this.by=!0);let c=r.x,d=r.y,f=r.x+r.width,p=r.y+r.height;c-=this.oe,c/=this.di,d-=this.re,d/=this.gi,f-=this.oe,f/=this.di,p-=this.re,p/=this.gi;const g=Math.max(0,Math.min(this.kh,0|c)),m=Math.min(this.kh,Math.max(0,0|f)),y=Math.max(0,Math.min(this.Ph,0|d)),v=Math.min(this.Ph,Math.max(0,0|p)),x=90,b=270,w=this.Vt,k=0|a,S=0|l,C=0|h,M=0|u,T=0===i||i===x?1:-1,A=i===x||i===b;w[k][S]===ke.qs?(this.T1(k,S,C,M,T,A,g,m,y,v),this.T1(k,S,C,M,1,!A,g,m,y,v),this.T1(k,S,C,M,-1,!A,g,m,y,v)):this.T1(k,S,C,M,T,A,k,S,k,S),w[C][M]===ke.qs?(this.D1(k,S,C,M,0===s||s===x?1:-1,s===x||s===b,g,m,y,v),this.D1(k,S,C,M,1,!(s===x||s===b),g,m,y,v),this.D1(k,S,C,M,-1,!(s===x||s===b),g,m,y,v)):this.D1(k,S,C,M,T,A,C,M,C,M);const P=e.et();if(o&&this.LT(C,M,s,k,S,P)){(P[0]!==C||P[1]!==M)&&(P.unshift(M),P.unshift(C)),(P[P.length-2]!==k||P[P.length-1]!==S)&&(P.push(k),P.push(S));let t=ke.Xa,e=P[P.length-2],i=P[P.length-1];w[e][i]=t++;for(let n=P.length-4;n>=0;n-=2){e=P[n+2],i=P[n+3];const s=P[n],r=P[n+1];for(;s>e?e++:s<e?e--:r>i?i++:r<i&&i--,w[e][i]=t++,e!==s||i!==r;);}}else this.ho(k,S,1,!1,g,m,y,v),this.ho(k,S,-1,!1,g,m,y,v),this.ho(k,S,1,!0,g,m,y,v),this.ho(k,S,-1,!0,g,m,y,v);e.J(P)}LT(t,e,i,n,s,r){const o=this.Vt;let a=t,l=e;for(;;){if(a===n&&l===s)return!0;let t=a,e=l;if(0===i){if(!(t<n))break;t++}else if(90===i){if(!(e<s))break;e++}else if(180===i){if(!(t>n))break;t--}else{if(!(e>s))break;e--}const r=o[t][e];if(0===r||r===ke.kN)break;a=t,l=e}for(;;){let h=i,u=a,c=l;0===i?c<s?(h=90,c++):c>s&&(h=270,c--):90===i?u<n?(h=0,u++):u>n&&(h=180,u--):180===i?c<s?(h=90,c++):c>s&&(h=270,c--):u<n?(h=0,u++):u>n&&(h=180,u--);const d=o[u][c];if(h!==i&&0!==d&&d!==ke.kN){if(r.push(a),r.push(l),this.LT(a,l,h,n,s,r))return!0;r.pop(),r.pop()}if(o[a][l]=ke.kN,0===i){if(a===t)return!1;a--}else if(90===i){if(l===e)return!1;l--}else if(180===i){if(a===t)return!1;a++}else{if(l===e)return!1;l++}}}}class Se{Me;hl;os;Od;constructor(t,e){u.Gi(this),this.Me=t,this.hl=e,this.os=[],this.Od=!1}toString(){const t=this.os;let e=this.Me.toString()+" "+t.length.toString()+":";for(let i=0;i<t.length;i++){const n=t[i];null!==n&&(e+="\n  "+n.toString())}return e}RO(t,e,i,n){const s=e.offsetY;switch(s){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}let r=i;switch(s){case 9:return r>180?270:90;case 6:return r>90&&r<=270?180:0}const o=180*Math.atan2(t.height,t.width)/Math.PI;switch(s){case 3:return r>o&&r<=180+o?180:270;case 5:return r>180-o&&r<=360-o?270:0;case 12:return r>o&&r<=180+o?90:0;case 10:return r>180-o&&r<=360-o?180:90;case 7:return r>90&&r<=180+o?180:r>180+o&&r<=360-o?270:0;case 13:return r>180&&r<=360-o?270:r>o&&r<=180?90:0;case 14:return r>o&&r<=180-o?90:r>180-o&&r<=270?180:0;case 11:return r>180-o&&r<=180+o?180:r>180+o?270:90}return n&&15!==s&&(r-=15,r<0&&(r+=360)),r>o&&r<180-o?90:r>=180-o&&r<=180+o?180:r>180+o&&r<360-o?270:0}Sd(){this.os.length=0}MT(t){let e=this.os;0===e.length&&(this.vO(),e=this.os);for(let i=0;i<e.length;i++){const n=e[i];if(null!==n&&n.Ge===t)return n}return null}vO(){if(!this.Od){const t=this.Od;this.Od=!0;let e,i=null;const n=this.Me,s=n instanceof Ae?n:null;if(null===s||s.isSubGraphExpanded)e=n.isTreeExpanded?n.findLinksConnected(this.hl.portId):n.findExternalTreeLinksConnected();else{if(!s.actualBounds.isReal())return this.Od=t,this.os;i=s,e=i.findExternalLinksConnected()}this.os.length=0;let r=0;const o=this.hl.getDocumentPoint(w.TopLeft,y.l()),a=this.hl.getDocumentPoint(w.BottomRight,y.l()),l=x.V(o.x,o.y,0,0);l.unionPoint(a),y.e(o),y.e(a);const h=y.V(l.x+l.width/2,l.y+l.height/2),u=this.hl.getDocumentAngle(),c=e.iterator;for(;c.next();){const t=c.value;if(!t.isVisible()||t.fromPort===t.toPort)continue;const e=t.fromPort===this.hl||null!==t.fromNode&&null!==i&&t.fromNode.isMemberOf(i),n=t.computeSpot(e,this.hl);if(!n.isSide())continue;let s;if(s=e?t.toPort:t.fromPort,null===s)continue;let o=s.part;if(null===o)continue;const a=o.findVisibleNode();null!==a&&a!==o&&(o=a,s=o.port);const d=t.computeOtherPoint(o,s);let f=h.directionPoint(d);f-=u,f<0?f+=360:f>=360&&(f-=360);const p=this.RO(l,n,f,t.isOrthogonal);let g=0;0===p?(g=4,f>180&&(f-=360)):90===p?(g=8,f>270&&(f-=360)):180===p?g=2:(g=1,f<90&&(f+=360));let m=this.os[r];void 0===m?(m=new Ce(t,f,g),this.os[r]=m):(m.Ge=t,m.Yt=f,m.me=g),m.F1.set(d),r++}y.e(h),this.OO();const d=this.os.length;let f=-1,p=0;for(r=0;r<d;r++){const t=this.os[r];void 0!==t&&(t.me!==f&&(f=t.me,p=0),t.Id=p,p++)}for(f=-1,p=0,r=d-1;r>=0;r--){const t=this.os[r];void 0!==t&&(t.me!==f&&(f=t.me,p=t.Id+1),t.Mf=p)}this.IO(this.os),this.EO(this.os),this.Od=t,x.e(l)}return this.os}UO(t,e){return t===e?0:null===t?-1:null===e?1:t.me<e.me?-1:t.me>e.me?1:t.Yt<e.Yt?-1:t.Yt>e.Yt?1:0}OO(){this.os.sort(Se.prototype.UO)}IO(t){const e=this.hl,i=this.Me.portSpreading,n=y.l(),s=y.l(),r=y.l(),o=y.l();e.getDocumentPoint(w.TopLeft,n),e.getDocumentPoint(w.TopRight,s),e.getDocumentPoint(w.BottomRight,r),e.getDocumentPoint(w.BottomLeft,o);let a=0,l=0,h=0,u=0;if(2===i)for(let e=0;e<t.length;e++){const i=t[e];if(null===i)continue;const n=i.Ge.computeThickness();switch(i.me){case 8:h+=n;break;case 2:u+=n;break;case 1:a+=n;break;default:l+=n}}let c=0,d=0,f=1,p=s,g=r,m=0,v=0;for(let e=0;e<t.length;e++){const y=t[e];if(null===y)continue;if(c!==y.me){switch(c=y.me,c){case 8:p=r,g=o;break;case 2:p=o,g=n;break;case 1:p=n,g=s;break;default:p=s,g=r}switch(m=g.x-p.x,v=g.y-p.y,c){case 8:h>Math.abs(m)?(f=Math.abs(m)/h,h=Math.abs(m)):f=1;break;case 2:u>Math.abs(v)?(f=Math.abs(v)/u,u=Math.abs(v)):f=1;break;case 1:a>Math.abs(m)?(f=Math.abs(m)/a,a=Math.abs(m)):f=1;break;default:l>Math.abs(v)?(f=Math.abs(v)/l,l=Math.abs(v)):f=1}d=0}const x=y.Fd;if(2===i){let t=y.Ge.computeThickness();switch(t*=f,x.set(p),c){case 8:x.x=p.x+m/2+h/2-d-t/2;break;case 2:x.y=p.y+v/2+u/2-d-t/2;break;case 1:x.x=p.x+m/2-a/2+d+t/2;break;default:x.y=p.y+v/2-l/2+d+t/2}d+=t}else{let t=.5;1===i&&(t=(y.Id+1)/(y.Mf+1)),x.x=p.x+m*t,x.y=p.y+v*t}}y.e(n),y.e(s),y.e(r),y.e(o)}EO(t){for(let e=0;e<t.length;e++){const i=t[e];null!==i&&(i.L1=this.BO(i))}}BO(t){const e=t.Ge,i=e.fromPort===this.hl,n=e.computeEndSegmentLength(this.Me,this.hl,w.None,i);let s=t.Id;if(s<0)return n;const r=t.Mf;if(r<=1||!e.isOrthogonal)return n;const o=t.F1,a=t.Fd;(2===t.me||8===t.me)&&(s=r-1-s);const l=be.hO,h=2===t.me||4===t.me;return(h?o.y<a.y:o.x<a.x)?n+s*l:(h?o.y===a.y:o.x===a.x)?n:n+(r-1-s)*l}}class Ce{Ge;Yt;me;F1;Id;Mf;Fd;L1;constructor(t,e,i){this.Ge=t,this.Yt=e,this.me=i,this.F1=new y,this.Id=0,this.Mf=0,this.Fd=new y,this.L1=0}toString(){return this.Ge.toString()+" "+this.Yt.toString()+" "+this.me.toString()+":"+this.Id.toString()+"/"+this.Mf.toString()+" "+this.Fd.toString()+" "+this.L1.toString()+" "+this.F1.toString()}}class Me{ga;ma;pa;ya;wa;xa;v0;F0;O0;R0;constructor(){this.ga=w.Default,this.ma=w.Default,this.pa=NaN,this.ya=NaN,this.wa=NaN,this.xa=NaN,this.v0=null,this.F0=null,this.O0=1/0,this.R0=1/0}copy(){const t=new Me;return t.ga=this.ga.P(),t.ma=this.ma.P(),t.pa=this.pa,t.ya=this.ya,t.wa=this.wa,t.xa=this.xa,t.v0=this.v0,t.F0=this.F0,t.O0=this.O0,t.R0=this.R0,t}}class Te{M0;N0;C0;S0;pp;yp;constructor(){this.M0=-1/0,this.N0=0,this.C0=y.xo,this.S0=0,this.pp="None",this.yp="None"}copy(){const t=new Te;return t.M0=this.M0,t.N0=this.N0,t.C0=this.C0.P(),t.S0=this.S0,t.pp=this.pp,t.yp=this.yp,t}}class Ae extends ge{Ed;Ft;aa;l0;si;ie;constructor(t,e){let i;void 0===t||t instanceof Ut||"string"==typeof t?i=t:t&&(e=t),super(i),this.v=4608|this.v,this.Ed=new u,this.Ft=null,this.ie=new Ne,this.ie.group=this,this.aa=new u,this.l0=null,this.si=null,e&&Object.assign(this,e)}cloneProtected(t){super.cloneProtected(t),this.v=-32769&this.v;const e=t.findInVisualTree((t=>t instanceof Pe));t.Ft=e instanceof Pe?e:null,null!==this.ie?(t.ie=this.ie.copy(),t.ie.group=t):(null!==t.ie&&(t.ie.group=null),t.ie=null),null!==this.si&&(t.si=this.si.copy())}vo(t){super.vo(t);const e=t.findSubGraphParts(),i=t.memberParts;for(;i.next();){const t=i.value;if(t.c(),t.invalidateLayout(8),t.clearAdornments(),t instanceof ge)t.invalidateConnectedLinks(e);else if(t instanceof be){const i=t.labelNodes;for(;i.next();)i.value.invalidateConnectedLinks(e)}}}qc(t,i,n,s,r,o,a){if(3===t&&"elements"===i){if(r instanceof Pe)null===this.Ft?this.Ft=r:this.Ft!==r&&e.o("Cannot insert a second Placeholder into the visual tree of a Group.");else if(r instanceof qt){const t=r.findInVisualTree((t=>t instanceof Pe));t instanceof Pe&&(null===this.Ft?this.Ft=t:this.Ft!==t&&e.o("Cannot insert a second Placeholder into the visual tree of a Group."))}}else 4===t&&"elements"===i&&null!==this.Ft&&(s===this.Ft||s instanceof qt&&this.Ft.isContainedBy(s))&&(this.Ft=null);super.qc(t,i,n,s,r,o,a)}Ju(t,e){if(super.Ju(t,e),this.isClipping&&this.type!==qt.Spot&&this.isSubGraphExpanded){let t=this.resizeObject;t instanceof qt&&(t=t.findMainElement()),null===this.si&&(this.si=new x),t.getDocumentBounds(this.si),t instanceof Jt&&this.si.inflate(-t.strokeWidth,-t.strokeWidth)}}fh(t,e,i,n){this.hasPlaceholder()&&(this.Ko=this.placeholder),super.fh(t,e,i,n)}ensureBounds(){this.isSubGraphExpanded&&this.memberParts.each((t=>{t.ensureBounds()})),super.ensureBounds()}Yr(){if(!super.Yr())return!1;const t=this.memberParts;for(;t.next();){const e=t.value;if(e instanceof ge){if(!e.isVisible())continue;if(e._e())return!1}else if(e instanceof be){if(!e.isVisible())continue;if(e._e()&&e.fromNode!==this&&e.toNode!==this)return!1}}return!0}hasPlaceholder(){return null!==this.Ft&&this.Ft.isVisibleObject()&&this.isSubGraphExpanded}get placeholder(){return this.Ft}get computesBoundsAfterDrag(){return!!(2048&this.v)}set computesBoundsAfterDrag(t){const e=!!(2048&this.v);e!==t&&(this.v=2048^this.v,this.t("computesBoundsAfterDrag",e,t))}get computesBoundsIncludingLinks(){return!!(4096&this.v)}set computesBoundsIncludingLinks(t){const e=!!(4096&this.v);e!==t&&(this.v=4096^this.v,this.t("computesBoundsIncludingLinks",e,t))}get computesBoundsIncludingLocation(){return!!(8192&this.v)}set computesBoundsIncludingLocation(t){const e=!!(8192&this.v);e!==t&&(this.v=8192^this.v,this.t("computesBoundsIncludingLocation",e,t))}get handlesDragDropForMembers(){return!!(16384&this.v)}set handlesDragDropForMembers(t){const e=!!(16384&this.v);e!==t&&(this.v=16384^this.v,this.t("handlesDragDropForMembers",e,t))}get avoidableMembers(){return!!(131072&this.v)}set avoidableMembers(t){const e=!!(131072&this.v);e!==t&&(this.v=131072^this.v,this.t("avoidableMembers",e,t))}get memberParts(){return this.Ed.iterator}sN(t){if(this.Ed.add(t)){t instanceof Ae&&this.aa.add(t);const e=this.memberAdded;if(null!==e){let i=!0;const n=this.diagram;null!==n&&(i=n.X,n.X=!0),e(this,t),null!==n&&(n.X=i)}(!this.isVisible()||!this.isSubGraphExpanded)&&t.Ei(!1)}if(t instanceof be&&!this.computesBoundsIncludingLinks)return;let e=this.Ft;null===e&&(e=this),e.c()}eN(t){if(this.Ed.delete(t)){t instanceof Ae&&this.aa.delete(t);const e=this.memberRemoved;if(null!==e){let i=!0;const n=this.diagram;null!==n&&(i=n.X,n.X=!0),e(this,t),null!==n&&(n.X=i)}(!this.isVisible()||!this.isSubGraphExpanded)&&t.Ei(!0)}if(t instanceof be&&!this.computesBoundsIncludingLinks)return;let e=this.Ft;null===e&&(e=this),e.c()}Xc(){if(this.Ed.count>0){const t=this.diagram;if(null!==t){const e=this.Ed.copy().iterator;for(;e.next();){const i=e.value;t.remove(i)}}}super.Xc()}get layout(){return this.ie}set layout(t){const i=this.ie;if(i!==t){null!==t&&null!==t.diagram&&t.diagram.layout===t&&e.o("A layout cannot be both the Diagram.layout and a Group.layout: "+t),null!==i&&(i.diagram=null,i.group=null),this.ie=t;const n=this.diagram;null!==t&&(t.diagram=n,t.group=this),null!==n&&(n.Vr=!0),this.t("layout",i,t),null!==n&&n.requestUpdate()}}get memberAdded(){return null!==this.Rt?this.Rt.uy:null}set memberAdded(t){const i=this.memberAdded;i!==t&&(null!==t&&e.k(t,Ae,"memberAdded"),this.rl().uy=t,this.t("memberAdded",i,t))}get memberRemoved(){return null!==this.Rt?this.Rt.gy:null}set memberRemoved(t){const i=this.memberRemoved;i!==t&&(null!==t&&e.k(t,Ae,"memberRemoved"),this.rl().gy=t,this.t("memberRemoved",i,t))}get memberValidation(){return null!==this.Rt?this.Rt.eh:null}set memberValidation(t){const i=this.memberValidation;i!==t&&(null!==t&&e.k(t,Ae,"memberValidation"),this.rl().eh=t,this.t("memberValidation",i,t))}canAddMembers(t){const e=this.diagram;if(null===e)return!1;const i=e.commandHandler,n=i.m2(t).iterator;for(;n.next();){const t=n.value;if(!i.isValidMember(this,t))return!1}return!0}addMembers(t,e){const i=this.diagram;if(null===i)return!1;const n=i.commandHandler;let s=!0;const r=n.m2(t).iterator;for(;r.next();){const t=r.value;!e||n.isValidMember(this,t)?t.containingGroup=this:s=!1}return s}get ungroupable(){return!!(256&this.v)}set ungroupable(t){const e=!!(256&this.v);e!==t&&(this.v=256^this.v,this.t("ungroupable",e,t))}canUngroup(){if(!this.ungroupable)return!1;const t=this.layer;if(null===t||!t.allowUngroup)return!1;const e=t.diagram;return!(null!==e&&!e.allowUngroup)}invalidateConnectedLinks(t){const e=this.VO();if(super.invalidateConnectedLinks(t),e)return;this.YL(!0);const i=this.findExternalLinksConnected();for(;i.next();){const e=i.value;if(void 0!==t&&t.has(e))continue;const n=e.fromNode;if(null!==n&&n!==this&&n.isMemberOf(this)&&!n.isVisible())n.qi(e.fromPort),n.qi(e.toPort),e.invalidateRoute();else{const t=e.toNode;null!==t&&t!==this&&t.isMemberOf(this)&&!t.isVisible()&&(t.qi(e.fromPort),t.qi(e.toPort),e.invalidateRoute())}}}findExternalLinksConnected(){const t=null!==this.diagram&&this.diagram.MM;if(t&&null!==this.l0)return this.l0.iterator;const e=this.findSubGraphParts();e.add(this);const i=new u,n=e.iterator;for(;n.next();){const t=n.value;if(!(t instanceof ge))continue;const s=t.linksConnected;for(;s.next();){const t=s.value;e.has(t)||i.add(t)}}return t&&(this.l0=i),i.iterator}findExternalNodesConnected(){const t=this.findSubGraphParts();t.add(this);const e=new u,i=t.iterator;for(;i.next();){const n=i.value;if(!(n instanceof ge))continue;const s=n.linksConnected;for(;s.next();){const i=s.value,n=i.fromNode;null!==n&&(!t.has(n)||n===this)&&e.add(n);const r=i.toNode;null!==r&&(!t.has(r)||r===this)&&e.add(r)}}return e.iterator}vE(){const t=new u;return function t(e,i){null!==e&&(i.add(e),t(e.containingGroup,i))}(this,t),t}findSubGraphParts(){const t=new u;return ce.nh(t,this,!0,0,!0),t.delete(this),t}Ei(t){super.Ei(t);const e=this.memberParts;for(;e.next();)e.value.Ei(t)}collapseSubGraph(){const t=this.diagram;if(null===t||t.isCollapsingExpanding)return;t.isCollapsingExpanding=!0;const e=this.findSubGraphParts();this.AT(e,t,this),t.isCollapsingExpanding=!1}AT(t,e,i){const n=this.memberParts;for(;n.next();){const s=n.value;if(s.Ei(!1),s instanceof Ae&&s.isSubGraphExpanded&&(s.wasSubGraphExpanded=s.isSubGraphExpanded,s.AT(t,e,i)),s instanceof ge)s.invalidateConnectedLinks(t),e.Lc(s,i);else if(s instanceof be){const e=s.labelNodes;for(;e.next();)e.value.invalidateConnectedLinks(t)}}this.isSubGraphExpanded=!1}expandSubGraph(){const t=this.diagram;if(null===t||t.isCollapsingExpanding)return;t.isCollapsingExpanding=!0;const e=this.findSubGraphParts();this.TT(e,t,this),t.isCollapsingExpanding=!1}TT(t,e,i){const n=this.memberParts;for(;n.next();){const s=n.value;if(s.Ei(!0),s instanceof Ae&&s.wasSubGraphExpanded&&(s.wasSubGraphExpanded=!1,s.TT(t,e,i)),s instanceof ge)s.invalidateConnectedLinks(t);else if(s instanceof be){const e=s.labelNodes;for(;e.next();)e.value.invalidateConnectedLinks(t)}}this.isSubGraphExpanded=!0}get isSubGraphExpanded(){return!!(512&this.v)}set isSubGraphExpanded(t){const e=!!(512&this.v);if(e!==t){this.v=512^this.v;const i=this.diagram;this.t("isSubGraphExpanded",e,t);const n=this.subGraphExpandedChanged;if(null!==n){let t=!0;null!==i&&(t=i.X,i.X=!0),n(this),null!==i&&(i.X=t)}if(null!==i&&i.undoManager.isUndoingRedoing)return null!==this.Ft&&this.Ft.c(),void this.memberParts.each((t=>t.updateAdornments()));t?this.expandSubGraph():this.collapseSubGraph()}}get wasSubGraphExpanded(){return!!(1024&this.v)}set wasSubGraphExpanded(t){const e=!!(1024&this.v);e!==t&&(this.v=1024^this.v,this.t("wasSubGraphExpanded",e,t))}get subGraphExpandedChanged(){return null!==this.Rt?this.Rt.my:null}set subGraphExpandedChanged(t){const i=this.subGraphExpandedChanged;i!==t&&(null!==t&&e.k(t,Ae,"subGraphExpandedChanged"),this.rl().my=t,this.t("subGraphExpandedChanged",i,t))}move(t,e){void 0===e&&(e=!1);const i=e?this.location:this.position,n=i.x,s=i.y,r=t.x,o=t.y;if((n===r||isNaN(n)&&isNaN(r))&&(s===o||isNaN(s)&&isNaN(o)))return;const a=r-(isNaN(n)?0:n),l=o-(isNaN(s)?0:s),h=y.l();super.move(t,e);const c=new u,d=this.findSubGraphParts().iterator;for(;d.next();){const t=d.value;t instanceof be&&(t.suspendsRouting&&c.add(t),(t.Se||t.fromNode!==this&&t.toNode!==this)&&(t.suspendsRouting=!0))}for(d.reset();d.next();){const t=d.value;if(t.Nl()||t instanceof ge&&t.isLinkLabel)continue;const e=t.position,i=t.location;e.isReal()?(h.x=e.x+a,h.y=e.y+l,t.position=h):i.isReal()&&(h.x=i.x+a,h.y=i.y+l,t.location=h)}for(d.reset();d.next();){const t=d.value;if(!(t instanceof be&&(t.suspendsRouting=c.has(t),t.Se||t.fromNode!==this&&t.toNode!==this)))continue;const e=t.position;h.x=e.x+a,h.y=e.y+l,h.isReal()?t.move(h):t.invalidateRoute()}y.e(h)}VO(){return!!(65536&this.v)}YL(t){!!(65536&this.v)!==t&&(this.v=65536^this.v)}get ca(){return!!(32768&this.v)}set ca(t){!!(32768&this.v)!==t&&(this.v=32768^this.v)}}class Pe extends Dt{Zt;Ud;constructor(t){super(),this.Zt=b.Rg,this.Ud=new x(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Zt=this.Zt.P(),t.Ud=this.Ud.copy()}ch(t){if(null===this.background)return!1;const e=this.naturalBounds;return x.contains(0,0,e.width,e.height,t.x,t.y)}Wu(t,i,n,s){const r=this.part;if((null===r||!(r instanceof Ae)&&!(r instanceof fe))&&e.o("Placeholder is not inside a Group or Adornment."),r instanceof Ae){const t=this.computeBorder(this.Ud),e=this.minSize,i=isFinite(e.width)?Math.max(e.width,t.width):t.width,n=isFinite(e.height)?Math.max(e.height,t.height):t.height,s=this.zi;s.Fn(i||0,n||0),this.Wn(0,0,s.width,s.height);const o=r.memberParts;let a=!1;for(;o.next();)if(o.value.isVisible()){a=!0;break}const l=r.diagram;if(a&&null!==l&&!l.animationManager.US(r)&&!isNaN(t.x)&&!isNaN(t.y)){const e=y.l();e.setRectSpot(t,r.locationSpot),r.location=e,y.e(e)}}else{const t=r,e=this.zi,i=this.Zt,n=i.left+i.right,s=i.top+i.bottom,o=t.adornedObject,a=o.getDocumentAngle();t.angle=a;let l=0;o instanceof Jt&&(l=o.strokeWidth);const h=o.getDocumentScale(),u=o.naturalBounds,c=(u.width+l)*h,d=(u.height+l)*h;if(t.type!==qt.Link){const e="Selection"===t.category?w.TopLeft:t.locationSpot,i=o.getDocumentPoint(e,y.l());t.location=i,y.e(i)}if(isNaN(c)||isNaN(d)){const t=o.getDocumentPoint(w.TopLeft,y.l()),r=x.V(t.x,t.y,0,0);r.unionPoint(o.getDocumentPoint(w.BottomRight,t)),r.unionPoint(o.getDocumentPoint(w.TopRight,t)),r.unionPoint(o.getDocumentPoint(w.BottomLeft,t)),e.Fn(r.width+n||0,r.height+s||0),this.Wn(-i.left,-i.top,e.width,e.height),y.e(t),x.e(r)}else e.Fn(c+n||0,d+s||0),this.Wn(-i.left,-i.top,e.width,e.height)}}fh(t,e,i,n){this.actualBounds.i(t,e,i,n)}computeBorder(t){const e=this.part,i=e.diagram,n=null===i||!i.animationManager.isAnimating;if(null!==i&&e instanceof Ae&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.Ud.isReal()){const n=i.toolManager.findTool("Dragging");if(n===i.currentTool){const i=n.computeBorder(e,this.Ud,t);if(null!==i)return i}}const s=x.l(),r=this.computeMemberBounds(s),o=this.Zt;return e instanceof Ae&&!e.isSubGraphExpanded?t.i(r.x-o.left,r.y-o.top,0,0):t.i(r.x-o.left,r.y-o.top,Math.max(r.width+o.left+o.right,0),Math.max(r.height+o.top+o.bottom,0)),x.e(s),n&&e instanceof Ae&&e.computesBoundsIncludingLocation&&e.location.isReal()&&t.unionPoint(e.location),t}computeMemberBounds(t){if(!(this.part instanceof Ae))return t.i(0,0,0,0),t;const e=this.part;let i=1/0,n=1/0,s=-1/0,r=-1/0;const o=e.memberParts;for(;o.next();){const t=o.value;if(!t.isVisible()||t instanceof be&&(!e.computesBoundsIncludingLinks||t.To()||t.fromNode===e||t.toNode===e))continue;const a=t.actualBounds;a.left<i&&(i=a.left),a.top<n&&(n=a.top),a.right>s&&(s=a.right),a.bottom>r&&(r=a.bottom)}if(isFinite(i)&&isFinite(n))t.i(i,n,s-i,r-n);else{const i=e.location;t.i(i.x,i.y,0,0)}return t}get padding(){return this.Zt}set padding(t){"number"==typeof t&&(t=new b(t));const e=this.Zt;e.equals(t)||(t=t.P(),this.Zt=t,this.t("padding",e,t),this.c())}}class Ne{N;fa;Bd;wr;Vd;zd;Co;al;Xd;Yd;ao;constructor(t){u.Gi(this),this.N=null,this.fa=null,this.Bd=!0,this.wr=!0,this.Vd=!1,this.zd=new y(0,0).u(),this.Co=!0,this.al=null,this.Xd=null,this.Yd=!1,this.ao=null,t&&Object.assign(this,t)}cloneProtected(t){t.Bd=this.Bd,t.wr=this.wr,t.Vd=this.Vd,t.zd.a(this.zd),t.Co=this.Co,t.al=this.al,t.Xd=this.Xd,t.Yd=!0}copy(){const t=new this.constructor;return this.cloneProtected(t),t}oi(t){e.er(this,t)}toString(){let t=e.Dn(this.constructor);return t+="(",null!==this.group&&(t+=" in "+this.group),null!==this.diagram&&(t+=" for "+this.diagram),t+=")",t}get diagram(){return this.N}set diagram(t){this.N=t}get group(){return this.fa}set group(t){this.fa!==t&&(this.fa=t,null!==t&&(this.N=t.diagram))}get isOngoing(){return this.Bd}set isOngoing(t){this.Bd!==t&&(e.s(t,"boolean",Ne,"isOngoing"),this.Bd=t)}get isInitial(){return this.wr}set isInitial(t){e.s(t,"boolean",Ne,"isInitial"),this.wr=t,t||(this.Yd=!0)}get isViewportSized(){return this.Vd}set isViewportSized(t){this.Vd!==t&&(e.s(t,"boolean",Ne,"isViewportSized"),this.Vd=t,t&&this.invalidateLayout())}get isRouting(){return this.Co}set isRouting(t){this.Co!==t&&(e.s(t,"boolean",Ne,"isRouting"),this.Co=t)}get isRealtime(){return this.al}set isRealtime(t){this.al!==t&&(null!==t&&e.s(t,"boolean",Ne,"isRealtime"),this.al=t)}get isValidLayout(){return this.Yd}set isValidLayout(t){if(this.Yd!==t&&(e.s(t,"boolean",Ne,"isValidLayout"),this.Yd=t,!t)){const t=this.diagram;null!==t&&(t.Vr=!0)}}invalidateLayout(){if(this.isValidLayout){const t=this.diagram;if(null===t||t.undoManager.isUndoingRedoing)return;const e=t.animationManager;if(e.isTicking)return;e.defaultAnimation.isAnimating&&e.stopAnimation(),(this.isOngoing&&t.Bh||this.isInitial&&!t.Bh)&&(this.isValidLayout=!1,t.requestUpdate())}}get network(){return this.ao}set network(t){this.ao!==t&&(this.ao=t,null!==t&&(t.layout=this))}createNetwork(){return new De(this)}makeNetwork(t){const e=this.createNetwork();return t instanceof xt?(e.addParts(t.nodes,!0),e.addParts(t.links,!0)):t instanceof Ae?e.addParts(t.memberParts):e.addParts(t.iterator),e}updateParts(){this.isValidLayout=!0;let t=this.diagram;if(null===t&&null!==this.network){const e=this.network.vertexes.iterator;for(;e.next();){const i=e.value.node;if(null!==i&&(t=i.diagram,null!==t))break}}try{null!==t&&t.startTransaction("Layout"),this.commitLayout()}finally{null!==t&&t.commitTransaction("Layout")}}commitLayout(){if(null===this.network)return;const t=this.network.vertexes.iterator;for(;t.next();)t.value.commit();if(this.isRouting){const t=this.network.edges.iterator;for(;t.next();)t.value.commit()}}doLayout(t){const e=new u;if(t instanceof xt?(this.Sh(e,t.nodes,!0,this.ca,!0,!1,!0),this.Sh(e,t.parts,!0,this.ca,!0,!1,!0)):t instanceof Ae?this.Sh(e,t.memberParts,!1,this.ca,!0,!1,!0):e.addAll(t.iterator),e.count>0){const t=this.diagram;null!==t&&t.startTransaction("Layout"),this.doMinimalNoNetworkLayout(e),null!==t&&t.commitTransaction("Layout")}this.isValidLayout=!0}doMinimalNoNetworkLayout(t){const e=t.count,i=Math.ceil(Math.sqrt(e));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);const n=this.arrangementOrigin.x;let s=n,r=this.arrangementOrigin.y,o=0,a=0;const l=t.iterator;for(;l.next();){const t=l.value;t.ensureBounds();const e=t.measuredBounds,h=e.width,u=e.height;t.moveTo(s,r),t instanceof Ae&&(t.ca=!1),s+=Math.max(h,50)+20,a=Math.max(a,Math.max(u,50)),o>=i-1?(o=0,s=n,r+=a+20,a=0):o++}}ca(t){return!!(!t.location.isReal()&&!t.position.isReal()||t instanceof Ae&&t.ca)}Sh(t,e,i,n,s,r,o){const a=e.iterator;for(;a.next();){const e=a.value;if((!i||e.isTopLevel)&&(null===n||n(e))&&e.canLayout())if(s&&e instanceof ge){if(e.isLinkLabel)continue;e instanceof Ae&&null===e.layout?this.Sh(t,e.memberParts,!1,n,s,r,o):(e.ensureBounds(),t.add(e))}else r&&e instanceof be?t.add(e):o&&e.ke()&&!(e instanceof ge)&&(e.ensureBounds(),t.add(e))}}getLayoutBounds(t,e){const i=this.boundsComputation;return null!==i?(e||(e=new x),i(t,this,e)):!e&&t.margin.equalTo(0,0,0,0)?t.actualBounds:(e||(e=new x),e.set(t.actualBounds),e.addMargin(t.margin),e)}get boundsComputation(){return this.Xd}set boundsComputation(t){this.Xd!==t&&(null!==t&&e.k(t,Ne,"boundsComputation"),this.Xd=t,this.invalidateLayout())}collectParts(t){const e=new u;return t instanceof xt?(this.Sh(e,t.nodes,!0,null,!0,!0,!0),this.Sh(e,t.links,!0,null,!0,!0,!0),this.Sh(e,t.parts,!0,null,!0,!0,!0)):t instanceof Ae?this.Sh(e,t.memberParts,!1,null,!0,!0,!0):this.Sh(e,t.iterator,!1,null,!0,!0,!0),e}get arrangementOrigin(){return this.zd}set arrangementOrigin(t){this.zd.equals(t)||(this.zd.a(t),this.invalidateLayout())}initialOrigin(t){const e=this.group;if(null!==e){if(e.hasPlaceholder()){const i=e.placeholder,n=i.getDocumentPoint(w.TopLeft);(isNaN(n.x)||isNaN(n.y))&&n.set(t);const s=i.padding;return n.x+=s.left,n.y+=s.top,n}{const i=e.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),i}}return t}}class De{ie;co;bn;ky;Py;constructor(t){u.Gi(this),this.ie=t,this.co=new u,this.bn=new u,this.ky=new m,this.Py=new m}clear(){if(this.co){const t=this.co.iterator;for(;t.next();)t.value.clear()}if(this.bn){const t=this.bn.iterator;for(;t.next();)t.value.clear()}this.co=new u,this.bn=new u,this.ky=new m,this.Py=new m}toString(t){void 0===t&&(t=0);let e="LayoutNetwork"+(null!==this.layout?"("+this.layout.toString()+")":"");if(t<=0)return e;if(e+=" vertexes: "+this.co.count+" edges: "+this.bn.count,t>1){const i=this.co.iterator;for(;i.next();){e+="\n    "+i.value.toString(t-1)}const n=this.bn.iterator;for(;n.next();){e+="\n    "+n.value.toString(t-1)}}return e}get layout(){return this.ie}set layout(t){null!==t&&(this.ie=t)}get vertexes(){return this.co}get edges(){return this.bn}createVertex(){return new Le(this)}createEdge(){return new Ee(this)}addParts(t,i,n){if(null===t)return;void 0===i&&(i=!1),e.s(i,"boolean",De,"addParts:toplevelonly"),void 0===n&&(n=null),null===n&&(n=t=>{if(t instanceof ge)return!t.isLinkLabel;if(t instanceof be){const e=t.fromNode;if(null===e||e.isLinkLabel)return!1;const i=t.toNode;return!(null===i||i.isLinkLabel)}return!1});const s=t.iterator;for(;s.next();){const t=s.value;if(t instanceof ge&&(!i||t.isTopLevel)&&t.canLayout()&&n(t))if(t instanceof Ae&&null===t.layout)this.addParts(t.memberParts,!1);else{if(null!==this.findVertex(t))continue;const e=this.createVertex();e.node=t,this.addVertex(e)}}for(s.reset();s.next();){const t=s.value;if(!(t instanceof be)||i&&!t.isTopLevel||!t.canLayout()||!n(t)||null!==this.findEdge(t))continue;const e=t.fromNode,r=t.toNode;if(null===e||null===r||e===r)continue;const o=this.findGroupVertex(e),a=this.findGroupVertex(r);this.linkVertexes(o,a,t)}}findGroupVertex(t){const e=t.findVisibleNode();if(null===e)return null;let i=this.findVertex(e);if(null!==i)return i;let n=e.containingGroup;for(;null!==n;){if(i=this.findVertex(n),null!==i)return i;n=n.containingGroup}return null}addVertex(t){this.co.add(t);const e=t.node;null!==e&&this.ky.set(e,t),t.network=this}addNode(t){let e=this.findVertex(t);return null===e&&(e=this.createVertex(),e.node=t,this.addVertex(e)),e}deleteVertex(t){if(this.DT(t)){let e=t.jo;for(let t=e.count-1;t>=0;t--){const i=e.elt(t);this.deleteEdge(i)}e=t.qo;for(let t=e.count-1;t>=0;t--){const i=e.elt(t);this.deleteEdge(i)}}}DT(t){const e=this.co.delete(t);if(e){const e=t.node;null!==e&&this.ky.delete(e)}return e}deleteNode(t){const e=this.findVertex(t);null!==e&&this.deleteVertex(e)}findVertex(t){return this.ky.get(t)}addEdge(t){this.PN(t);const e=t.toVertex;null!==e&&e.addSourceEdge(t);const i=t.fromVertex;null!==i&&i.addDestinationEdge(t)}PN(t){this.bn.add(t);const e=t.link;null!==e&&null===this.findEdge(e)&&this.Py.set(e,t),t.network=this}addLink(t){const e=t.fromNode,i=t.toNode;let n=this.findEdge(t);return null===n?(n=this.createEdge(),n.link=t,null!==e&&(n.fromVertex=this.addNode(e)),null!==i&&(n.toVertex=this.addNode(i)),this.addEdge(n)):(n.fromVertex=null!==e?this.addNode(e):null,n.toVertex=null!==i?this.addNode(i):null),n}deleteEdge(t){const e=t.toVertex;null!==e&&e.deleteSourceEdge(t);const i=t.fromVertex;null!==i&&i.deleteDestinationEdge(t),this.SN(t)}SN(t){const e=this.bn.delete(t);if(e){const e=t.link;null!==e&&this.Py.delete(e)}return e}deleteLink(t){const e=this.findEdge(t);null!==e&&this.deleteEdge(e)}findEdge(t){return this.Py.get(t)}linkVertexes(t,e,i){if(null===t||null===e)return null;if(t.network===this&&e.network===this){const n=this.createEdge();return n.link=i,n.fromVertex=t,n.toVertex=e,this.addEdge(n),n}return null}reverseEdge(t){const e=t.fromVertex,i=t.toVertex;null===e||null===i||(e.deleteDestinationEdge(t),i.deleteSourceEdge(t),t.reverseEdge(),e.addSourceEdge(t),i.addDestinationEdge(t))}deleteSelfEdges(){const t=e.et(),i=this.bn.iterator;for(;i.next();){const e=i.value;e.fromVertex===e.toVertex&&t.push(e)}const n=t.length;for(let e=0;e<n;e++)this.deleteEdge(t[e]);e.J(t)}deleteArtificialVertexes(){const t=e.et(),i=this.co.iterator;for(;i.next();){const e=i.value;null===e.node&&null===e.data&&t.push(e)}let n=t.length;for(let e=0;e<n;e++)this.deleteVertex(t[e]);const s=e.et(),r=this.bn.iterator;for(;r.next();){const t=r.value;null===t.link&&null===t.data&&s.push(t)}n=s.length;for(let t=0;t<n;t++)this.deleteEdge(s[t]);e.J(t),e.J(s)}deleteUselessEdges(){const t=e.et(),i=this.bn.iterator;for(;i.next();){const e=i.value;(null===e.fromVertex||null===e.toVertex)&&t.push(e)}const n=t.length;for(let e=0;e<n;e++)this.deleteEdge(t[e]);e.J(t)}isSingleton(t){return!(t.jo.count>0||t.qo.count>0)}splitIntoSubNetworks(t){void 0===t&&(t=!0),t&&(this.deleteArtificialVertexes(),this.deleteUselessEdges(),this.deleteSelfEdges());const e=new l;let i=!0;for(;i;){i=!1;const t=this.co.iterator;for(;t.next();){const n=t.value;if(this.isSingleton(n))continue;const s=this.layout.createNetwork();e.add(s),this.zO(s,n),i=!0;break}}return e.sort(((t,e)=>null===t||null===e||t===e?0:e.vertexes.count-t.vertexes.count)),e}zO(t,e){if(null===e)return;const i=new l;for(i.add(e);i.count>0;){const e=i.first();if(i.removeAt(0),!e||e.network===t)continue;this.DT(e),t.addVertex(e);let n=e.sourceEdges;for(;n.next();){const e=n.value;e.network!==t&&(this.SN(e),t.PN(e),e.fromVertex&&i.add(e.fromVertex))}for(n=e.destinationEdges;n.next();){const e=n.value;e.network!==t&&(this.SN(e),t.PN(e),e.toVertex&&i.add(e.toVertex))}}}findAllParts(){const t=new u,e=this.co.iterator;for(;e.next();){const i=e.value;i.node&&t.add(i.node)}const i=this.bn.iterator;for(;i.next();){const e=i.value;e.link&&t.add(e.link)}return t}}class Le{ao;_t;Me;Le;He;jo;qo;constructor(t){u.Gi(this),this.ao=t,this.Le=new x(0,0,10,10).u(),this.He=new y(5,5).u(),this._t=null,this.Me=null,this.jo=new l,this.qo=new l}clear(){this._t=null,this.Me=null,this.jo=new l,this.qo=new l}toString(t){void 0===t&&(t=0);let e="LayoutVertex#"+u.as(this);if(t>0&&(e+=null!==this.node?"("+this.node.toString()+")":"",t>1)){let t="",i=!0,n=this.jo.iterator;for(;n.next();){i?i=!1:t+=",",t+=n.value.toString(0)}let s="";for(i=!0,n=this.qo.iterator;n.next();){i?i=!1:s+=",",s+=n.value.toString(0)}e+=" sources: "+t+" destinations: "+s}return e}get fo(){return this.jo.dC}get Wo(){return this.qo.dC}get data(){return this._t}set data(t){if(this._t=t,null!==t&&t.bounds){const e=t.bounds,i=e.x,n=e.y,s=e.width,r=e.height;this.He.i(s/2,r/2),this.Le.i(i,n,s,r)}}get node(){return this.Me}set node(t){if(this.Me!==t){if(this.Me=t,null===t)return;t.ensureBounds();const e=this.network.layout,i=x.l(),n=e.getLayoutBounds(t,i);let s=n.x,r=n.y;const o=n.width,a=n.height;if(isNaN(s)&&(s=0),isNaN(r)&&(r=0),this.Le.i(s,r,o,a),x.e(i),!(t instanceof Ae)){const e=t.locationObject.getDocumentPoint(w.Center);if(e.isReal())return void this.He.i(e.x-s,e.y-r)}this.He.i(o/2,a/2)}}get bounds(){return this.Le}set bounds(t){this.Le.equals(t)||this.Le.a(t)}get focus(){return this.He}set focus(t){this.He.equals(t)||this.He.a(t)}get centerX(){return this.Le.x+this.He.x}set centerX(t){const e=this.Le;e.x+this.He.x!==t&&(e.Nt(),e.x=t-this.He.x,e.u())}get centerY(){return this.Le.y+this.He.y}set centerY(t){const e=this.Le;e.y+this.He.y!==t&&(e.Nt(),e.y=t-this.He.y,e.u())}get focusX(){return this.He.x}set focusX(t){const e=this.He;e.x!==t&&(e.Nt(),e.x=t,e.u())}get focusY(){return this.He.y}set focusY(t){const e=this.He;e.y!==t&&(e.Nt(),e.y=t,e.u())}get x(){return this.Le.x}set x(t){const e=this.Le;e.x!==t&&(e.Nt(),e.x=t,e.u())}get y(){return this.Le.y}set y(t){const e=this.Le;e.y!==t&&(e.Nt(),e.y=t,e.u())}get width(){return this.Le.width}set width(t){const e=this.Le;e.width!==t&&(e.Nt(),e.width=t,e.u())}get height(){return this.Le.height}set height(t){const e=this.Le;e.height!==t&&(e.Nt(),e.height=t,e.u())}commit(){const t=this._t;if(null!==t){const i=this.bounds,n=t.bounds;return void(e.K(n)?(n.x=i.x,n.y=i.y,n.width=i.width,n.height=i.height):t.bounds=i.copy())}const i=this.node;if(null!==i){const t=this.bounds;if(!(i instanceof Ae)){const e=x.l();i.ensureBounds();const n=this.network.layout.getLayoutBounds(i,e),s=i.locationObject.getDocumentPoint(w.Center);if(n.isReal()&&s.isReal())return i.moveTo(t.x+this.focusX-(s.x-n.x)+i.margin.left,t.y+this.focusY-(s.y-n.y+i.margin.top)),void x.e(e);x.e(e)}i.moveTo(t.x+i.margin.left,t.y+i.margin.top)}}addSourceEdge(t){null!==t&&(this.jo.has(t)||this.jo.add(t))}deleteSourceEdge(t){null!==t&&this.jo.delete(t)}addDestinationEdge(t){null!==t&&(this.qo.has(t)||this.qo.add(t))}deleteDestinationEdge(t){null!==t&&this.qo.delete(t)}get network(){return this.ao}set network(t){this.ao=t}get sourceVertexes(){const t=new u,e=this.sourceEdges;for(;e.next();){const i=e.value;i.fromVertex&&t.add(i.fromVertex)}return t.iterator}get destinationVertexes(){const t=new u,e=this.destinationEdges;for(;e.next();){const i=e.value;i.toVertex&&t.add(i.toVertex)}return t.iterator}get vertexes(){const t=new u;let e=this.sourceEdges;for(;e.next();){const i=e.value;i.fromVertex&&t.add(i.fromVertex)}for(e=this.destinationEdges;e.next();){const i=e.value;i.toVertex&&t.add(i.toVertex)}return t.iterator}get sourceEdges(){return this.jo.iterator}get destinationEdges(){return this.qo.iterator}get edges(){const t=new l;let e=this.sourceEdges;for(;e.next();){const i=e.value;t.add(i)}for(e=this.destinationEdges;e.next();){const i=e.value;t.add(i)}return t.iterator}get edgesCount(){return this.jo.count+this.qo.count}static standardComparer(t,e){const i=t.Me,n=e.Me;if(i){if(n){const t=i.text,e=n.text;return t<e?-1:t>e?1:0}return 1}return null!==n?-1:0}static smartComparer(t,e){if(null!==t){if(null!==e){const i=t.Me,n=e.Me;if(null!==i){if(null!==n){const t=i.text.toLocaleLowerCase(),e=n.text.toLocaleLowerCase(),s=t.split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),r=e.split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);let o=0;for(;o<s.length;o++){if(""!==r[o]&&void 0!==r[o]){const t=parseFloat(s[o]),e=parseFloat(r[o]);if(isNaN(t)){if(isNaN(e)){if(0!==s[o].localeCompare(r[o]))return s[o].localeCompare(r[o]);continue}return 1}if(isNaN(e))return-1;if(t-e!==0)return t-e;continue}if(""===s[o])continue;return 1}return""!==r[o]&&void 0!==r[o]?-1:0}return 1}return null!==n?-1:0}return 1}return null!==e?-1:0}}class Ee{ao;_t;Ge;je;qe;constructor(t){u.Gi(this),this.ao=t,this._t=null,this.Ge=null,this.je=null,this.qe=null}clear(){this._t=null,this.Ge=null,this.je=null,this.qe=null}toString(t){void 0===t&&(t=0);let e="LayoutEdge#"+u.as(this);return t>0&&(e+=null!==this.Ge?"("+this.Ge.toString()+")":"",t>1&&(e+=" "+(this.je?this.je.toString():"null")+" --\x3e "+(this.qe?this.qe.toString():"null"))),e}reverseEdge(){const t=this.je;this.je=this.qe,this.qe=t}commit(){}getOtherVertex(t){return this.qe===t?this.je:this.je===t?this.qe:null}get network(){return this.ao}set network(t){this.ao=t}get data(){return this._t}set data(t){this._t!==t&&(this._t=t)}get link(){return this.Ge}set link(t){this.Ge!==t&&(this.Ge=t)}get fromVertex(){return this.je}set fromVertex(t){this.je!==t&&(this.je=t)}get toVertex(){return this.qe}set toVertex(t){this.qe!==t&&(this.qe=t)}}var _e=(t=>(t[t.Position=0]="Position",t[t.Location=1]="Location",t))(_e||{}),Oe=(t=>(t[t.LeftToRight=10]="LeftToRight",t[t.RightToLeft=11]="RightToLeft",t))(Oe||{}),Fe=(t=>(t[t.Forwards=20]="Forwards",t[t.Reverse=21]="Reverse",t[t.Ascending=22]="Ascending",t[t.Descending=23]="Descending",t))(Fe||{});class Re extends Ne{Kd;Gd;Po;kn;hi;Xi;pe;ye;constructor(t){super(),this.isViewportSized=!0,this.Kd=NaN,this.Gd=NaN,this.Po=new v(NaN,NaN).u(),this.kn=new v(10,10).u(),this.hi=1,this.Xi=10,this.pe=22,this.ye=Re.standardComparer,t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Kd=this.Kd,t.Gd=this.Gd,t.Po.a(this.Po),t.kn.a(this.kn),t.hi=this.hi,t.Xi=this.Xi,t.pe=this.pe,t.ye=this.ye}oi(t){t in Fe?this.sorting=t:t in Oe?this.arrangement=t:t in _e?this.alignment=t:super.oi(t)}doLayout(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);const e=this.collectParts(t),i=this.diagram,n=e.copy().iterator;for(;n.next();){const t=n.value;if(!t.Nl()||null===t.fromNode&&null===t.toNode){if(t.ensureBounds(),t instanceof Ae){const i=t.memberParts;for(;i.next();){const t=i.value;e.delete(t)}}}else e.delete(t)}const s=e.toArray();if(0===s.length)return;switch(this.sorting){case 20:break;case 21:s.reverse();break;case 22:s.sort(this.comparer);break;case 23:s.sort(this.comparer),s.reverse()}let r=this.wrappingColumn;isNaN(r)&&(r=0);let o=this.wrappingWidth;if(isNaN(o)&&null!==i){const t=i.viewportBounds,e=i.padding;o=Math.max(t.width-e.left-e.right,0)}else o=Math.max(this.wrappingWidth,0);r<=0&&o<=0&&(r=1);let a=this.spacing.width;isFinite(a)||(a=0);let l=this.spacing.height;isFinite(l)||(l=0),null!==i&&i.startTransaction("Layout");const h=[];switch(this.alignment){case 0:this.XO(s,o,r,a,l,h);break;case 1:this.YO(s,o,r,a,l,h)}let u=0,c=0,d=0;for(let t=0;t<h.length;t++){const e=h[t];u=Math.min(u,e.x),c=Math.min(c,e.y),d=Math.max(d,e.x+e.width)}11===this.arrangement?this.commitLayers(h,new y(u+a/2-(d+u),c-l/2)):this.commitLayers(h,new y(u-a/2,c-l/2)),null!==i&&i.commitTransaction("Layout"),this.isValidLayout=!0}XO(t,e,i,n,s,r){const o=x.l();let a=Math.max(this.cellSize.width,1);if(!isFinite(a)){a=0;for(let e=0;e<t.length;e++){const i=t[e],n=this.getLayoutBounds(i,o);a=Math.max(a,n.width)}}a+=n,a=Math.max(a,1);let l=Math.max(this.cellSize.height,1);if(!isFinite(l)){l=0;for(let e=0;e<t.length;e++){const i=t[e],n=this.getLayoutBounds(i,o);l=Math.max(l,n.height)}}l+=s,l=Math.max(l,1);const h=this.arrangement,u=this.arrangementOrigin.x;let c=u,d=this.arrangementOrigin.y,f=0,p=0;for(let g=0;g<t.length;g++){const m=t[g],y=this.getLayoutBounds(m,o),v=Math.ceil((y.width+n)/a)*a,b=Math.ceil((y.height+s)/l)*l;let w=0;if(11===h)w=Math.abs(c-y.width);else w=c+y.width;(i>0&&f>i-1||e>0&&f>0&&w-u>e)&&(r.push(new x(0,d,e+n,p)),f=0,c=u,d+=p,p=0),p=Math.max(p,b);let k=0;if(11===h)k=-y.width;else k=0;if(11===(m.moveTo(c+k+m.margin.left,d+m.margin.top),h))c-=v;else c+=v;f++}r.push(new x(0,d,e+n,p)),x.e(o)}YO(t,e,i,n,s,r){const o=x.l();let a=Math.max(this.cellSize.width,1),l=0,h=0,u=0;const c=y.l();for(let e=0;e<t.length;e++){const i=t[e],n=this.getLayoutBounds(i,o),s=i.getRelativePoint(i.locationObject,i.locationSpot,c);l=Math.max(l,s.x),h=Math.max(h,n.width-s.x),u=Math.max(u,s.y)}const d=this.arrangement;if(11===d)l+=n;else h+=n;a=isFinite(a)?Math.max(a+n,1):Math.max(l+h,1);const f=this.arrangementOrigin.x;let p=f,g=this.arrangementOrigin.y,m=0;e>=l&&(e-=l);let v=0,b=0;const w=Math.max(this.cellSize.height,1);u=0;let k=0,C=!0;const M=y.l();for(let l=0;l<t.length;l++){const h=t[l],y=this.getLayoutBounds(h,o),T=h.getRelativePoint(h.locationObject,h.locationSpot,c);if(m>0)switch(d){case 11:{let t=(p-f-(y.width-T.x))/a;t=S.z(Math.round(t),t)?Math.round(t):Math.floor(t),p=t*a+f;break}default:{let t=(p-f+T.x)/a;t=S.z(Math.round(t),t)?Math.round(t):Math.ceil(t),p=t*a+f;break}}else if(11===d)v=p+T.x+y.width;else v=p-T.x;let A=0;if(11===d)A=-(p+T.x)+v;else A=p+y.width-T.x-v;if(i>0&&m>i-1||e>0&&m>0&&A>e){r.push(new x(0,C?g-u:g,e+n,k+u+s));for(let e=0;e<m&&l!==m;e++){const i=t[l-m+e],n=i.getRelativePoint(i.locationObject,i.locationSpot,M);i.moveTo(i.position.x,i.position.y+u-n.y)}k+=s,g+=C?k:k+u,u=0,k=0,m=0,p=f,C=!1}if(11===(p===f&&(b=11===d?Math.max(b,y.width-T.x):Math.min(b,-T.x)),u=Math.max(u,T.y),k=Math.max(k,y.height-T.y),isFinite(w)&&(k=Math.max(k,Math.max(y.height,w)-T.y)),C?h.moveTo(p-T.x,g-T.y):h.moveTo(p-T.x,g),d))p-=T.x+n;else p+=y.width-T.x+n;m++}if(r.push(new x(0,g,e+n,(C?k:k+u)+s)),t.length!==m)for(let e=0;e<m;e++){const i=t[t.length-m+e],n=i.getRelativePoint(i.locationObject,i.locationSpot,c);i.moveTo(i.position.x,i.position.y+u-n.y)}if(y.e(c),y.e(M),11===d)for(let t=0;t<r.length;t++){const e=r[t];e.width+=b,e.x-=b}else for(let t=0;t<r.length;t++){const e=r[t];e.x>b&&(e.width+=e.x-b,e.x=b)}x.e(o)}commitLayers(t,e){}get wrappingWidth(){return this.Kd}set wrappingWidth(t){this.Kd!==t&&(e.s(t,"number",Re,"wrappingWidth"),(t>0||isNaN(t))&&(this.Kd=t,this.isViewportSized=isNaN(t),this.invalidateLayout()))}get wrappingColumn(){return this.Gd}set wrappingColumn(t){this.Gd!==t&&(e.s(t,"number",Re,"wrappingColumn"),(t>0||isNaN(t))&&(this.Gd=t,this.invalidateLayout()))}get cellSize(){return this.Po}set cellSize(t){this.Po.equals(t)||(this.Po.a(t),this.invalidateLayout())}get spacing(){return this.kn}set spacing(t){this.kn.equals(t)||(this.kn.a(t),this.invalidateLayout())}get alignment(){return this.hi}set alignment(t){this.hi!==t&&(1===t||0===t)&&(this.hi=t,this.invalidateLayout())}get arrangement(){return this.Xi}set arrangement(t){this.Xi!==t&&(10===t||11===t)&&(this.Xi=t,this.invalidateLayout())}get sorting(){return this.pe}set sorting(t){this.pe!==t&&(20===t||21===t||22===t||23===t)&&(this.pe=t,this.invalidateLayout())}get comparer(){return this.ye}set comparer(t){this.ye!==t&&(e.k(t,Re,"comparer"),this.ye=t,this.invalidateLayout())}static standardComparer(t,e){const i=t.text,n=e.text;return i<n?-1:i>n?1:0}static smartComparer(t,e){if(null!==t){if(null!==e){const i=t.text.toLocaleLowerCase(),n=e.text.toLocaleLowerCase(),s=i.split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),r=n.split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);let o=0;for(;o<s.length;o++){if(""!==r[o]&&void 0!==r[o]){const t=parseFloat(s[o]),e=parseFloat(r[o]);if(isNaN(t)){if(isNaN(e)){if(0!==s[o].localeCompare(r[o]))return s[o].localeCompare(r[o]);continue}return 1}if(isNaN(e))return-1;if(t-e!==0)return t-e;continue}if(""===s[o])continue;return 1}return""!==r[o]&&void 0!==r[o]?-1:0}return 1}return null!==e?-1:0}static Position=0;static Location=1;static LeftToRight=10;static RightToLeft=11;static Forward=20;static Reverse=21;static Ascending=22;static Descending=23}class Ie{Hd;js;Ct;uo;jd;qd;N;MN;constructor(){this.Hd=new u,this.js=new u,this.Ct=new u,this.uo=new m,this.jd=new m,this.qd=new m,this.N=null,this.MN=!1}clear(){this.Hd.clear(),this.js.clear(),this.Ct.clear(),this.uo.clear(),this.jd.clear(),this.qd.clear()}Mo(t){this.N=t}Wh(t){if(t instanceof ge){if(this.Hd.add(t),t instanceof Ae){const e=t.containingGroup;null===e?this.diagram.zr.add(t):e.aa.add(t);const i=t.layout;null!==i&&(i.diagram=this.diagram)}}else t instanceof be?(this.js.add(t),t.isAvoiding&&(this.diagram.Vm=!0)):t instanceof fe||this.Ct.add(t);const e=t.data;null!==e&&(t instanceof fe||(t instanceof be?this.FT(e,t):this.uo.set(e,t)))}te(t){if(t.clearAdornments(),t instanceof ge){if(this.Hd.delete(t),t instanceof Ae){const e=t.containingGroup;null===e?this.diagram.zr.delete(t):e.aa.delete(t);const i=t.layout;null!==i&&(i.diagram=null)}}else t instanceof be?this.js.delete(t):t instanceof fe||this.Ct.delete(t);const e=t.data;null!==e&&(t instanceof fe||(t instanceof be?this.RT(e,t):this.uo.delete(e)))}FT(t,e){this.jd.set(t,e)}RT(t,e){this.jd.delete(t)}rebuildParts(){const t=this.diagram;if(null===t)return;const i=t.nodeTemplateMap.iterator;for(;i.next();){const t=i.value,n=i.key;(!t.ke()||t instanceof Ae)&&e.o(`Invalid node template in Diagram.nodeTemplateMap: template for "${n}" must be a Node or a simple Part, not a Group or Link: ${t}`)}const n=t.groupTemplateMap.iterator;for(;n.next();){const t=n.value,i=n.key;t instanceof Ae||e.o(`Invalid group template in Diagram.groupTemplateMap: template for "${i}" must be a Group, not a normal Node or Link: ${t}`)}const s=t.linkTemplateMap.iterator;for(;s.next();){const t=s.value,i=s.key;t instanceof be||e.o(`Invalid link template in Diagram.linkTemplateMap: template for "${i}" must be a Link, not a normal Node or simple Part: ${t}`)}const r=e.et(),o=t.selection.iterator;for(;o.next();){const t=o.value.data;t&&r.push(t)}const a=e.et(),l=t.highlighteds.iterator;for(;l.next();){const t=l.value.data;t&&a.push(t)}const h=e.et(),u=this.nodes.iterator;for(;u.next();){const t=u.value;null!==t.data&&(h.push(t.data),h.push(t.location))}const c=this.links.iterator;for(;c.next();){const t=c.value;null!==t.data&&(h.push(t.data),h.push(t.location))}const d=this.parts.iterator;for(;d.next();){const t=d.value;null!==t.data&&(h.push(t.data),h.push(t.location))}this.vT(),this.zM();for(let t=0;t<r.length;t++){const e=this.findPartForData(r[t]);null!==e&&(e.isSelected=!0)}for(let t=0;t<a.length;t++){const e=this.findPartForData(a[t]);null!==e&&(e.isHighlighted=!0)}for(let t=0;t<h.length;t+=2){const e=this.findPartForData(h[t]);null!==e&&(e.location=h[t+1])}e.J(r),e.J(a),e.J(h)}zM(){const t=this.diagram.model;this.Sy(t.nodeDataArray)}Sy(t,e){const i=this.diagram.model;t.forEach((t=>{i.containsNodeData(t)&&this.OT(t,!1)})),t.forEach((t=>{i.containsNodeData(t)&&this.R1(t)})),!1!==e&&this.diagram.Cb(!1)}OT(t,e){if(null==t||this.diagram.undoManager.isUndoingRedoing||this.uo.has(t))return null;void 0===e&&(e=!0);const i=this.KO(t);return null!==i&&e&&this.R1(t),i}KO(t){if(null==t||this.diagram.undoManager.isUndoingRedoing||this.uo.has(t))return null;const e=this.GO(t),i=this.findTemplateForNodeData(t,e);if(null!==i){i.Et();const n=i.copy();if(null!==n){const i=this.diagram.fe;return this.diagram.fe=!0,n.zo=e,n._t=t,this.addsToTemporaryLayer&&(n.sl="Tool"),this.diagram.add(n),n._t=null,n.data=t,this.diagram.fe=i,n}}return null}insertLink(t,e,i,n){return null}R1(t){}GO(t){return this.diagram.model.getCategoryForNodeData(t)}static IT=!1;static ET=!1;findTemplateForNodeData(t,i){const n=this.diagram,s=n.model;let r=null;return s.jc()&&s.isGroupForData(t)?(r=n.groupTemplateMap.get(i),null===r&&(r=n.groupTemplateMap.get(""),null===r&&(Ie.ET||(Ie.ET=!0,e.ni('No Group template found for category "'+i+'"'),e.ni("  Using default group template")),r=n.yM))):(r=n.nodeTemplateMap.get(i),null===r&&(r=n.nodeTemplateMap.get(""),null===r&&(Ie.IT||(Ie.IT=!0,e.ni('No Node template found for category "'+i+'"'),e.ni("  Using default node template")),r=n.gM))),r}getLinkCategoryForData(t){return""}setLinkCategoryForData(t,e){}setFromNodeForLink(t,e,i){}setToNodeForLink(t,e,i){}static UT=!1;findLinkTemplateForCategory(t){const i=this.diagram;let n=i.linkTemplateMap.get(t);return null===n&&(n=i.linkTemplateMap.get(""),null===n&&(Ie.UT||(Ie.UT=!0,e.ni('No Link template found for category "'+t+'"'),e.ni("  Using default link template")),n=i.mM)),n}vv(t,e,i){t instanceof be?(null!==e&&this.RT(e,t),null!==i&&this.FT(i,t)):t instanceof ce&&(null!==e&&this.uo.delete(e),null!==i&&this.uo.set(i,t))}vT(){const t=this.diagram.model;this.NN(t.nodeDataArray)}NN(t){t.forEach((t=>{this.v1(t)}))}v1(t){const e=this.findPartForData(t);null!==e&&(this.diagram.UM(e,!1),this.CN(e))}CN(t){}pN(t){}findPartForKey(t){if(null==t)return null;const e=this.diagram.model.findNodeDataForKey(t);return null!==e?this.uo.get(e):null}findNodeForKey(t){if(null==t)return null;const e=this.diagram.model.findNodeDataForKey(t);if(null===e)return null;const i=this.uo.get(e);return i instanceof ge?i:null}findLinkForKey(t){return null}findPartForData(t){if(null===t)return null;let e=this.uo.get(t);return null!==e||(e=this.jd.get(t)),e}findNodeForData(t){if(null===t)return null;const e=this.uo.get(t);return e instanceof ge?e:null}findLinkForData(t,e){return null===t?null:this.jd.get(t)}findNodesByExample(...t){const i=new u,n=this.Hd.iterator;for(;n.next();){const t=n.value,s=t.data;if(null!==s)for(let n=0;n<arguments.length;n++){const r=arguments[n];if(e.K(r)&&this.LN(s,r)){i.add(t);break}}}return i.iterator}findLinksByExample(...t){const i=new u,n=this.js.iterator;for(;n.next();){const t=n.value,s=t.data;if(null!==s)for(let n=0;n<arguments.length;n++){const r=arguments[n];if(e.K(r)&&this.LN(s,r)){i.add(t);break}}}return i.iterator}LN(t,e){for(const i in e){const n=t[i],s=e[i];if(Array.isArray(s)){if(!Array.isArray(n))return!1;const t=n,e=s;if(t.length<e.length)return!1;for(let i=0;i<t.length;i++){const n=t[i],s=e[i];if(void 0!==s&&!this.BT(n,s))return!1}}else if(!this.BT(n,s))return!1}return!0}BT(t,i){if(e.it(i)){if(!i(t))return!1}else if(i instanceof RegExp){if(!t||!i.test(t.toString()))return!1}else if(e.K(t)&&e.K(i)){if(!this.LN(t,i))return!1}else if(t!==i)return!1;return!0}doModelDataChanged(t){if(t.model===this.diagram.model&&this.diagram.X){this.diagram.X=!1;try{const e=t.change;""===t.modelChange&&null!==t.object&&2===e&&this.My(t.object,t.propertyName)}finally{this.diagram.X=!0}}}doModelChanged(t){const i=this.diagram;if(!i||t.model!==i.model)return;const n=t.change;if(i.IR(t),i.X){i.X=!1;try{const s=t.modelChange;if(""!==s)if(2===n){if("nodeCategory"===s){const e=t.object;if(null!==e){const i=this.findPartForData(e),n=t.newValue;null!==i&&"string"==typeof n&&(i.category=n)}}else if("nodeDataArray"===s){const e=t.oldValue;this.NN(e);const i=t.newValue;this.Sy(i)}i.isModified=!0}else if(3===n){const n=t.newValue;"nodeDataArray"===s&&e.K(n)&&this.OT(n),i.isModified=!0}else if(4===n){const n=t.oldValue;"nodeDataArray"===s&&e.K(n)&&this.v1(n),i.isModified=!0}else 1===n&&("SourceChanged"===s?null!==t.object?this.My(t.object,t.propertyName):(this.updateAllRelationshipsFromData(),this.updateAllTargetBindings()):"ModelDisplaced"===s&&this.rebuildParts());else if(2===n){const e=t.propertyName,n=t.object;n===i.model?("nodeKeyProperty"===e||"nodeCategoryProperty"===e)&&(i.undoManager.isUndoingRedoing||this.rebuildParts()):null!==n&&this.My(n,e),i.isModified=!0}else(3===n||4===n)&&(this.HO(t,i.model),i.isModified=!0)}finally{i.X=!0}}}updateAllTargetBindings(t){void 0===t&&(t="");let e=this.parts.iterator;for(;e.next();)e.value.updateTargetBindings(t);for(e=this.nodes.iterator;e.next();)e.value.updateTargetBindings(t);for(e=this.links.iterator;e.next();)e.value.updateTargetBindings(t)}updateAllThemeBindings(){let t=this.parts.iterator;for(;t.next();)t.value.Do();for(t=this.nodes.iterator;t.next();)t.value.Do();for(t=this.links.iterator;t.next();)t.value.Do()}updateAllRelationshipsFromData(){const t=this.diagram.model,e=new u,i=t.nodeDataArray;for(let t=0;t<i.length;t++){const n=i[t];e.add(n)}const n=[];this.nodes.each((t=>{null!==t.data&&!e.has(t.data)&&n.push(t.data)})),this.parts.each((t=>{null!==t.data&&!e.has(t.data)&&n.push(t.data)})),n.forEach((e=>t.VT(e,!1)));for(let e=0;e<i.length;e++){const n=i[e];null===this.findPartForData(n)&&t.zT(n,!1)}this.XT();let s=this.parts.iterator;for(;s.next();)s.value.updateRelationshipsFromData();for(s=this.nodes.iterator;s.next();)s.value.updateRelationshipsFromData();for(s=this.links.iterator;s.next();)s.value.updateRelationshipsFromData()}XT(){}updateRelationshipsFromData(t){}My(t,i){if("string"==typeof i){const n=this.findPartForData(t);if(null!==n)n.updateTargetBindings(i);else{const n=this.jO(t);if(null!==n&&n.length>0){for(let t=0;t<n.length;t++)n[t].updateTargetBindings(i);const t=n[0].part;if(null!==t){const e=t.adornments;for(;e.next();)e.value.updateTargetBindings(i)}e.J(n)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(i)}}jO(t){let i=null;const n=this.qd.iterator;for(;n.next();){const s=n.value;for(let n=0;n<s.length;n++){const r=s[n].findItemPanelForData(t);null!==r&&(null===i&&(i=e.et()),i.push(r))}if(null!==i)break}return i}AN(t){return this.qd.get(t)}HO(t,e){const i=t.object;if(!Array.isArray(i))return;const n=3===t.change,s=n?t.newParam:t.oldParam,r=n?t.newValue:t.oldValue,o=this.AN(i);if(Array.isArray(o))for(let t=0;t<o.length;t++){const e=o[t];n?e.e1(r,s,!0):e.Iv(s)}}IM(t,e){null!==e&&t.Kr((t=>e.GL(t)));const i=t.yh;if(Array.isArray(i)){const e=this.AN(i);if(null===e)this.qd.set(i,[t]);else{for(let i=0;i<e.length;i++)if(e[i]===t)return;e.push(t)}}}EM(t,e){t.Kr((t=>e.UR(t)));const i=t.yh;if(Array.isArray(i)){const e=this.AN(i);if(null!==e)for(let n=0;n<e.length;n++)if(e[n]===t)return e.splice(n,1),void(0===e.length&&this.qd.delete(i))}}copyParts(t,e,i){void 0===i&&(i=!1);const n=new m;if(Array.isArray(t))for(let s=0;s<t.length;s++)this.O1(t[s],e,n,i);else{const s=t.iterator;for(;s.next();)this.O1(s.value,e,n,i)}if(null!==e){const t=e.model,i=e.s0().dragsLink,s=new u,r=new m,o=n.iterator;for(;o.next();){const a=o.value;if(a instanceof be)!i&&(null===a.fromNode||null===a.toNode)&&s.add(a);else if(a instanceof ge&&null!==a.data)if(t.pm()){const i=a,s=o.key,l=s.findTreeParentNode();if(null!==l){const o=n.get(l);if(null!==o){t.setParentKeyForNodeData(i.data,t.getKeyForNodeData(o.data));const n=e.findLinkForData(i.data),a=s.findTreeParentLink();null!==a&&null!==n&&r.set(a,n)}}}else if(t.Mb()){const i=a,s=o.key,l=t.isRelatedKeysPathTo?s.findNodesOutOf():s.findNodesInto();for(;l.next();){const o=l.value,a=n.get(o);if(null!==a){t.addRelatedKeyForNodeData(i.data,a.key);const n=e.partManager.findLinkForData(i.data,a.key),l=this.findLinkForData(s.data,o.key);null!==l&&null!==n&&r.set(l,n)}else t.removeRelatedKeyForNodeData(i.data,o.key)}}}if(s.count>0&&e.removeParts(s,!1),r.count>0){const t=r.iterator;for(;t.next();){const e=t.key,i=t.value;n.set(e,i)}}}if(null!==e&&null!==this.diagram){const t=e.model,i=t.afterCopyFunction;if(null!==i){const e=new m;n.each((t=>{null!==t.key.data&&e.set(t.key.data,t.value.data)}));const s=this.diagram.model;i(e,t,s)}}const s=n.iterator;for(;s.next();)s.value.updateTargetBindings();return n}O1(t,e,i,n){if(null===t||n&&!t.canCopy())return null;if(i.has(t))return i.get(t);const s=this.TN(t,e);if(!(s instanceof ce))return null;if(s.isSelected=!1,s.isHighlighted=!1,i.set(t,s),t instanceof ge){const r=t.linksConnected;for(;r.next();){const e=r.value;if(e.fromNode===t){const t=i.get(e);null!==t&&(t.fromNode=s)}if(e.toNode===t){const t=i.get(e);null!==t&&(t.toNode=s)}}if(t instanceof Ae&&s instanceof Ae){const r=t.memberParts;for(;r.next();){const t=r.value,o=this.O1(t,e,i,n);o instanceof be||null!==o&&(o.containingGroup=s)}}}else if(t instanceof be&&s instanceof be){const r=t.fromNode;if(null!==r){const t=i.get(r);null!==t&&(s.fromNode=t)}const o=t.toNode;if(null!==o){const t=i.get(o);null!==t&&(s.toNode=t)}const a=t.labelNodes;for(;a.next();){const t=a.value,r=this.O1(t,e,i,n);null!==r&&r instanceof ge&&(r.labeledLink=s)}}return s}TN(t,i){let n=null;const s=t.data;if(null!==s&&null!==i){const r=i.model;if(!(t instanceof be)){const t=r.copyNodeData(s);e.K(t)&&(r.addNodeData(t),n=i.findPartForData(t))}}else if(t.Et(),n=t.copy(),null!==n){const t=this.diagram;if(null!==i)i.add(n);else if(null!==s&&null!==t&&null!==t.commandHandler&&t.commandHandler.copiesClipboardData){const i=t.model;let r=null;n instanceof be||(r=i.copyNodeData(s)),e.K(r)&&(n.data=r)}}return n}get nodes(){return this.Hd}get links(){return this.js}get parts(){return this.Ct}get diagram(){return this.N}get addsToTemporaryLayer(){return this.MN}set addsToTemporaryLayer(t){this.MN=t}}var Be=(t=>(t[t.OneWay=1]="OneWay",t[t.TwoWay=2]="TwoWay",t))(Be||{});class je{n;DN;Ya;Cf;Nh;Lf;Af;Tf;U1;be;ad;ff;constructor(t,i,n,s){u.Gi(this),void 0===t?t="":e.s(t,"string",je,"constructor:targetprop"),void 0===i?i=t:e.s(i,"string",je,"constructor:sourceprop"),void 0===n?n=null:null!==n&&e.k(n,je,"constructor:conv"),this.DN=-1,this.be=null,this.Ya=t,this.ad=0,this.ff=0,this.Cf=null,this.Nh=i,this.Lf=n,void 0===s?(this.Af=1,this.Tf=null):(this.Af=2,this.Tf=s),this.U1=new u,this.n=2}copy(){const t=new this.constructor;return this.cloneProtected(t),t}cloneProtected(t){t.Ya=this.Ya,t.ad=this.ad,t.ff=this.ff,t.Cf=this.Cf,t.Nh=this.Nh,t.Lf=this.Lf,t.Af=this.Af,t.Tf=this.Tf,t.n=-2&this.n}static OneWay=1;static TwoWay=2;static parseEnum(t,i){return e.k(t,je,"parseEnum:ctor"),n=>{let s=parseInt(n);return isNaN(s)&&(s=e.Eh(t,n),null===s)?i:s}}oi(t){t in Be?this.mode=t:e.er(this,t)}static toString(t){return e.toString(t)}toString(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(-1!==this.targetId?" "+this.targetId:"")+" "+Be[this.mode]+")"}u(){return this.n=1|this.n,this}get targetId(){return this.DN}set targetId(t){this.h&&e.L(this),this.DN=t}get targetProperty(){return this.Ya}set targetProperty(t){this.h&&e.L(this),e.s(t,"string",je,"targetProperty"),this.Ya=t}get sourceProperty(){return this.Nh}set sourceProperty(t){this.h&&e.L(this),e.s(t,"string",je,"sourceProperty"),this.Nh=t}get h(){return!!(1&this.n)}get isToData(){return!!(2&this.n)}get isToObject(){return!!(4&this.n)}get isToModel(){return!!(8&this.n)}get isToTheme(){return!!(16&this.n)}get FN(){return this.isToTheme&&!(this.isToData||this.isToObject||this.isToModel)}qu(){return!1}get sourceName(){return this.Cf}set sourceName(t){this.h&&e.L(this),null!==t&&e.s(t,"string",je,"sourceName"),this.Cf=t,this.n=null!==t?-3&this.n|4:2|this.n}get converter(){return this.Lf}set converter(t){this.h&&e.L(this),null!==t&&e.k(t,je,"converter"),this.Lf=t}get backConverter(){return this.Tf}set backConverter(t){this.h&&e.L(this),null!==t&&e.k(t,je,"backConverter"),this.Tf=t}get mode(){return this.Af}set mode(t){this.h&&e.L(this),this.isToTheme&&2===t&&e.o("Theme Bindings cannot be TwoWay."),this.Af=t}makeTwoWay(t){return this.isToTheme&&e.o("Theme Bindings cannot be TwoWay."),this.mode=2,t&&(e.k(t,je,"makeTwoWay"),this.backConverter=t),this}ofObject(t){return this.h&&e.L(this),void 0===t&&(t=""),this.sourceName=t,this}ofModel(){return this.h&&e.L(this),this.n=-3&this.n&-5|8,this.Cf=null,this}wA(t,e){const i=this.sourceName;let n=null;return n=null===i||""===i?t:"/"===i?e.part:"."===i?e:".."===i?e.panel:t.findObject(i),n}check(t){const i=this.Ya,n=this.Nh,s=this.Lf;(this.qu()&&null===s&&null===this.Ch&&""===i||null===s&&""===i)&&e.ni("Binding error: target property is the empty string: "+this.toString()),this.qu()&&this.FN&&""===n&&null===s&&null===this.Ch&&e.ni("Binding error: theme bindings require a source property when not using a converter: "+this.toString()),t&&"string"==typeof i&&(!e.it(["setAttribute"])&&i.length>0&&"_"!==i[0]&&!e.dw(t,i)?e.ni("Binding error: undefined target property: "+i+" on "+t.toString()):"name"===i&&t instanceof Dt&&e.ni("Binding error: cannot modify GraphObject.name on "+t.toString()))}updateTarget(t,e,i,n){const s=this.Nh;if(void 0!==i&&""!==s&&s!==i)return;const r=this.Ya,o=this.Lf;let a=e;if(""!==s&&!this.FN&&(a=n?n.yt(e,s):He.yt(e,s)),void 0===a)return;const l=t.diagram?.themeManager;if(null===o){if(""!==r){if(this.qu()&&(a=this.qT(l,a,t,r),void 0===a))return;n?n.Z(t,r,a):(e instanceof Dt||e instanceof Kt)&&He.Z(t,r,a)}}else try{if(""!==r){let i=o(a,t);if(this.qu()&&(i=this.qT(l,i,t,r),void 0===i))return;n?n.Z(t,r,i):(e instanceof Dt||e instanceof Kt)&&He.Z(t,r,i)}else o(a,t)}catch{}}updateSource(t,e,i,n){if(2!==this.Af)return;const s=this.Ya;if(void 0!==i&&s!==i)return;const r=this.Nh,o=this.Tf,a=null!==n?n.diagram:null,l=null!==a?a.model:null;let h=t;if(""!==s&&(h=l?l.yt(t,s):He.yt(t,s)),void 0!==h&&!this.U1.has(t))try{if(this.U1.add(t),null===o){if(""!==r)null!==l?l.setDataProperty(e,r,h):(e instanceof Dt||e instanceof Kt)&&(e[r]=h);else if(null!==l&&null!==n&&n.itemIndex>=0&&null!==n.panel&&Array.isArray(n.panel.itemArray)){const t=n.itemIndex,e=n.panel.itemArray;l.removeArrayItem(e,t),l.insertArrayItem(e,t,h)}}else try{if(""!==r){const t=o(h,e,l);null!==l?l.setDataProperty(e,r,t):(e instanceof Dt||e instanceof Kt)&&(e[r]=t)}else{const t=o(h,e,l);if(void 0!==t&&null!==l&&null!==n&&n.itemIndex>=0&&null!==n.panel&&Array.isArray(n.panel.itemArray)){const e=n.itemIndex,i=n.panel.itemArray;l.removeArrayItem(i,e),l.insertArrayItem(i,e,t)}}}catch{}}finally{this.U1.delete(t)}}}class ze extends je{Cy;Ch;Ka;constructor(t,e,i,n,s){super(t,e,n),null==i&&(i=""),void 0===s&&(s=null),this.Cy=i,this.Ch=s,this.Ka=null,this.n=16}cloneProtected(t){super.cloneProtected(t),t.Cy=this.Cy,t.Ch=this.Ch,t.Ka=this.Ka}qu(){return!0}get themeSource(){return this.Cy}set themeSource(t){this.h&&e.L(this),null!==t&&e.s(t,"string",ze,"themeSource"),this.Cy=t,this.Ka=null,this.n=null!==t?16|this.n:-17&this.n}get themeConverter(){return this.Ch}set themeConverter(t){this.h&&e.L(this),null!==t&&e.k(t,ze,"themeConverter"),this.Ch=t}ofData(){return this.h&&e.L(this),this.n=2|this.n,this.Cf=null,this}qT(t,i,n,s){if(!t||(this.FN&&(i=this.Nh),!i&&0!==i))return;let r=this.themeSource;null!==this.Ka?r=this.Ka:"string"==typeof r&&r.includes(".")&&(this.Ka=r.split("."),r=this.Ka);let o=t.findValue(i,r,s);return void 0===o&&e.ni(`Theme warning: ${i} could not be found when setting target property ${s}.`),e.it(this.Ch)&&(o=this.Ch(o,n)),o}}class He{Pt;$d;Ao;RN;Te;mi;Lh;Df;Ff;Zd;Qd;_d;tg;Ly;Ga;Jo;Ay;Lo;B1;constructor(t,e){if(u.Gi(this),this.Pt="",this.$d="",this.Ao=!1,this.RN={},this.Te=[],this.mi=new m,this.Lh="key",this.Df=null,this.Ff=null,this.Zd=!1,this.Qd=!1,this._d=!1,this.tg=null,this.Ly=100,this.Ga="category",this.Jo=new m,this.Ay=[],this.Lo=!1,this.B1=null,this.undoManager=new R,void 0!==t&&(Array.isArray(t)?this.nodeDataArray=t:e=t),e){Object.assign(this,e);const t=e.Changed;t&&(delete this.Changed,this.addChangedListener(t))}}cloneProtected(t){t.Pt=this.Pt,t.$d=this.$d,t.Ao=this.Ao,t.Lh=this.Lh,t.Df=this.Df,t.Ff=this.Ff,t.Zd=this.Zd,t.Qd=this.Qd,t._d=this._d,t.tg=this.tg,t.Ly=this.Ly,t.Ga=this.Ga}copy(){const t=new this.constructor;return this.cloneProtected(t),t}clear(){this.Te=[],this.mi.clear(),this.Jo.clear(),this.undoManager.clear()}toString(t){if(void 0===t&&(t=0),t>1)return this.toJson();{let i=(""!==this.name?this.name:"")+" Model";if(t>0){i+="\n node data:";const t=this.nodeDataArray,n=t.length;for(let s=0;s<n;s++){const n=t[s];i+=" "+this.getKeyForNodeData(n)+":"+e.toString(n)}}return i}}toIncrementalData(t){1!==t.change&&e.o("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());const i=t.object;if(!(t.isTransactionFinished&&i instanceof F))return null;const n=this.WT(i);return this.vN(i,"FinishedUndo"===t.propertyName,n)}vN(t,e,i){const n=this;let s=!1;const r=new u,o=new u,a=new u;t.changes.each((t=>{if(t.model===n)if("nodeDataArray"===t.modelChange)3===t.change?r.add(t.newValue):4===t.change&&a.add(t.oldValue);else if(n.containsNodeData(t.object))o.add(t.object);else if(2!==t.change||n.modelData!==t.object&&"modelData"!==t.propertyName){if(null!==t.object)if(i.has(t.object))i.get(t.object).each((t=>{n.containsNodeData(t)&&o.add(t)}));else{if(t.object instanceof He||n.Ra()&&n.containsLinkData(t.object))return;n.JT(t.object).each((t=>{o.add(t)}))}}else s=!0}));const l=new u;r.each((t=>{l.add(n.getKeyForNodeData(t)),e||o.add(t)}));const h=new u;a.each((t=>{h.add(n.getKeyForNodeData(t)),e&&o.add(t)}));const c=n.cloneDeep(o.toArray());let d=null;return s&&(null===d&&(d={}),d.modelData=this.cloneDeep(this.modelData)),l.count>0&&(null===d&&(d={}),e?d.removedNodeKeys=l.toArray():d.insertedNodeKeys=l.toArray()),c.length>0&&(null===d&&(d={}),d.modifiedNodeData=c),h.count>0&&(null===d&&(d={}),e?d.insertedNodeKeys=h.toArray():d.removedNodeKeys=h.toArray()),d}cloneDeep(t){return this.ig(t,!0)}ig(t,i,n,s){if(!e.K(t))return t;n||(n=new m);const r=n.get(t);if(r)return r;let o;if(Array.isArray(t)){o=[],n.set(t,o);for(let e=0;e<t.length;e++){const i=t[e];o.push(this.ig(i,!1,n,s))}}else if(t instanceof y||t instanceof v||t instanceof x||t instanceof b||t instanceof w)o=t.copy(),n.set(t,o);else{if(t instanceof Ht||t instanceof A)return t;if(t instanceof l)o=(new l).addAll(this.ig(t.toArray(),!1,n,s)),n.set(t,o);else if(t instanceof u)o=(new u).addAll(this.ig(t.toArray(),!1,n,s)),n.set(t,o);else if(t instanceof m)o=(new m).addAll(this.ig(t.toArray(),!1,n,s)),n.set(t,o);else if(t instanceof Date)o=new Date(t),n.set(t,o);else if(t instanceof RegExp)o=new RegExp(t),n.set(t,o),o.lastIndex=t.lastIndex;else if(He.ON(null,"",t))o=t;else if(e.it(t.copy))o=t.copy(),n.set(t,o);else{o={},n.set(t,o);for(const e in t){if("__gohashid"===e)continue;const i=t[e];o[e]=this.ig(i,!1,n,s)}}}return o}De(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,(t=>{const e="0000"+t.charCodeAt(0).toString(16);return"\\u"+e.substring(e.length-4)}))}eg(){let t="";return""!==this.name&&(t+=',\n  "name": '+this.De(this.name)),""!==this.dataFormat&&(t+=',\n  "dataFormat": '+this.De(this.dataFormat)),this.isReadOnly&&(t+=',\n  "isReadOnly": '+this.isReadOnly),"key"!==this.nodeKeyProperty&&"string"==typeof this.nodeKeyProperty&&(t+=',\n  "nodeKeyProperty": '+this.De(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\n  "copiesArrays": true'),this.copiesArrayObjects&&(t+=',\n  "copiesArrayObjects": true'),this.copiesKey&&(t+=',\n  "copiesKey": true'),100!==this.pointsDigits&&(t+=',\n  "pointsDigits": '+this.pointsDigits.toString()),"category"!==this.nodeCategoryProperty&&"string"==typeof this.nodeCategoryProperty&&(t+=',\n  "nodeCategoryProperty": '+this.De(this.nodeCategoryProperty)),t}Ty(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),void 0!==t.copiesKey&&(this.copiesKey=t.copiesKey),void 0!==t.pointsDigits&&(this.pointsDigits=parseInt(t.pointsDigits)),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)}$T(){const t=this.modelData;return',\n  "modelData": '+this.ZT(t)}QT(t){const i=t.modelData;e.K(i)&&(this.replaceJsonObjects(i),this.modelData=i)}IN(){const t=this.modelData;let e=!1;for(const i in t)if(!this.V1(t,i,t[i])){e=!0;break}let i="";return e&&(i=this.$T()),i+',\n  "nodeDataArray": '+this.Ah(this.nodeDataArray,!0)}EN(t){this.QT(t);const e=t.nodeDataArray;Array.isArray(e)&&(this.replaceJsonObjects(e),this.nodeDataArray=e)}UN(t,i,n){if(t===i)return!0;if(typeof t!=typeof i||e.it(t)||e.it(i))return!1;if(Array.isArray(t)&&Array.isArray(i)){if(n.get(t)===i)return!0;if(n.set(t,i),t.length!==i.length)return!1;for(let e=0;e<t.length;e++)if(!this.UN(t[e],i[e],n))return!1;return!0}if(e.K(t)&&e.K(i)){if(n.get(t)===i)return!0;n.set(t,i);for(const e in t){const s=t[e];if(this.V1(t,e,s))continue;const r=i[e];if(void 0===r||!this.UN(s,r,n))return!1}for(const e in i){const s=i[e];if(this.V1(i,e,s))continue;const r=t[e];if(void 0===r||!this.UN(r,s,n))return!1}return!0}return!1}static _T=',\n  "insertedNodeKeys": ';static qO=',\n  "modifiedNodeData": ';static tD=',\n  "removedNodeKeys": ';WT(t){let e=new m;const i=(t,i)=>{const n=i.part;if(!n)return;const s=n.data;if(t===s)return;let r=e.get(t);null===r?(r=new u,r.add(s),e.set(t,r)):r.add(s)};return t.changes.each((t=>{if(null!==t.diagram){const e=t.change;if(2===e){const e=t.object.panel;if(e){const t=e.data;t&&i(t,e)}}else if(3===e||4===e){const e=t.object,n=e.itemArray;n&&i(n,e)}}})),e}JT(t){const e=new u;for(let i=0;i<this.nodeDataArray.length;i++){const n=this.nodeDataArray[i];this.z1(t,n,n,e)}return e}z1(t,i,n,s){if(Array.isArray(i))for(let e=0;e<i.length;e++){const r=i[e];if(r===t)return s.add(n),!0;if(this.z1(t,r,n,s))return!0}else if(e.K(i)&&Object.getPrototypeOf(i)===Object.prototype)for(const e in i){const r=i[e];if(r===t)return s.add(n),!0;if(this.z1(t,r,n,s))return!0}return!1}BN(t,e,i){const n=this;let s=!1;const r=new u,o=new u,a=new u;t.changes.each((t=>{if(t.model===n)if("nodeDataArray"===t.modelChange)3===t.change?r.add(t.newValue):4===t.change&&a.add(t.oldValue);else if(n.containsNodeData(t.object))o.add(t.object);else if(2!==t.change||n.modelData!==t.object&&"modelData"!==t.propertyName){if(null!==t.object)if(i.has(t.object))i.get(t.object).each((t=>{n.containsNodeData(t)&&o.add(t)}));else{if(t.object instanceof He||n.Ra()&&n.containsLinkData(t.object))return;n.JT(t.object).each((t=>{o.add(t)}))}}else s=!0}));const l=new u;r.each((t=>{l.add(n.getKeyForNodeData(t)),e||o.add(t)}));const h=new u;a.each((t=>{h.add(n.getKeyForNodeData(t)),e&&o.add(t)}));let c="";return s&&(c+=this.$T()),l.count>0&&(c+=(e?He.tD:He._T)+this.Ah(l.toArray(),!0)),o.count>0&&(c+=He.qO+this.Ah(o.toArray(),!0)),h.count>0&&(c+=(e?He._T:He.tD)+this.Ah(h.toArray(),!0)),c}Dy(t){(void 0!==t.name&&t.name!==this.name||void 0!==t.dataFormat&&t.dataFormat!==this.dataFormat||void 0!==t.isReadOnly&&t.isReadOnly!==this.isReadOnly||void 0!==t.nodeKeyProperty&&t.nodeKeyProperty!==this.nodeKeyProperty||void 0!==t.copiesArrays&&t.copiesArrays!==this.copiesArrays||void 0!==t.copiesArrayObjects&&t.copiesArrayObjects!==this.copiesArrayObjects||void 0!==t.copiesKey&&t.copiesKey!==this.copiesKey||void 0!==t.nodeCategoryProperty&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&e.o("applyIncrementalJson cannot change Model properties"),this.QT(t);const i=t.insertedNodeKeys,n=t.modifiedNodeData,s=new m;if(Array.isArray(n))for(let t=0;t<n.length;t++){const e=n[t],i=this.getKeyForNodeData(e);null!=i&&s.set(i,e)}if(Array.isArray(i)){const t=i.length;for(let e=0;e<t;e++){const t=i[e];let n=this.findNodeDataForKey(t);if(null===n){n=s.get(t)||this.copyNodeData({}),this.setKeyForNodeData(n,t),this.addNodeData(n)}}}if(Array.isArray(n)){const t=n.length;for(let e=0;e<t;e++){const t=n[e],i=this.getKeyForNodeData(t),s=this.findNodeDataForKey(i);if(null!==s){for(const e in t)"__gohashid"===e||e===this.nodeKeyProperty||(this.mm()||this.Mb())&&e===this.nodeIsGroupProperty||this.setDataProperty(s,e,t[e]);this.sg(t,s)}}}const r=t.removedNodeKeys;if(Array.isArray(r)){const t=r.length;for(let e=0;e<t;e++){const t=r[e],i=this.findNodeDataForKey(t);null!==i&&this.removeNodeData(i)}}}toIncrementalJson(t,i){1!==t.change&&e.o("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());const n=t.object;if(!(t.isTransactionFinished&&n instanceof F))return'{ "incremental": 0 }';void 0===i&&(i=e.Dn(this));const s=this.WT(n),r=this.BN(n,"FinishedUndo"===t.propertyName,s);return'{ "class": '+this.De(i)+', "incremental": 1'+this.eg()+r+"}"}toIncrementalJSON(t,e){return this.toIncrementalJson(t,e)}toJson(t){return void 0===t&&(t=e.Dn(this)),'{ "class": '+this.De(t)+this.eg()+this.IN()+"}"}toJSON(t){return this.toJson(t)}applyIncrementalJson(i){let n=null;if("string"==typeof i)try{n=t.JSON.parse(i)}catch{}else e.K(i)?n=i:e.o("Unable to modify a Model from: "+i);const s=n.incremental;"number"!=typeof s&&e.o("Unable to apply non-incremental changes to Model: "+i),0!==s&&(this.startTransaction("applyIncrementalJson"),this.Dy(n),this.commitTransaction("applyIncrementalJson"))}applyIncrementalJSON(t){return this.applyIncrementalJson(t)}static fromJson(i,n){void 0===n&&(n=null);let s=null;if("string"==typeof i)try{s=t.JSON.parse(i)}catch{}else e.K(i)?s=i:e.o("Unable to construct a Model from: "+i);if(null===n){const t=He.WO(s);null===t||t instanceof He?n=t:e.o("Unable to construct a Model of declared class: "+s.class)}return null===n&&(n=He.iD()),n.Ty(s),n.EN(s),n}static fromJSON(t,e){return this.fromJson(t,e)}static iD(){return new He}static WO(i){let n=null,s=i.class;if("string"==typeof s)try{let i=null;0===s.indexOf("go.")?i=He.VN(s.substring(3)):(i=He.VN(s),null===i&&(i=t[s])),e.it(i)&&(n=new i)}catch{}return n}replaceJsonObjects(t){if(Array.isArray(t)){const i=t.length;for(let n=0;n<i;n++){const i=t[n];e.K(i)&&this.eD(t,n,this.replaceJsonObjects(i))}}else if(e.K(t)){for(const i in t){const n=t[i];if(e.K(n)){const e=this.replaceJsonObjects(n);if(t[i]=e,"points"===i&&Array.isArray(e)){let n=e.length%2==0;for(let t=0;t<e.length;t++)if("number"!=typeof e[t]){n=!1;break}if(n){const n=new l;for(let t=0;t<e.length/2;t++)n.add(new y(e[2*t],e[2*t+1]));n.u(),t[i]=n}}}}return this.JO(t)}return t}writeJsonValue(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.De(t):"number"==typeof t?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Boolean||t instanceof String||t instanceof Number?this.writeJsonValue(t.valueOf()):t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':Array.isArray(t)?this.Ah(t):e.K(t)?this.ZT(t):e.it(t)?"null":'"'+t.toString()+'"'}Ah(t,e){void 0===e&&(e=!1);const n=t.length;if(n<=0)return"[]";const s=new i;s.add("["),e&&n>1&&s.add("\n");for(let i=0;i<n;i++){const n=t[i];void 0!==n&&(i>0&&(s.add(","),e&&s.add("\n")),s.add(this.writeJsonValue(n)))}return e&&n>1&&s.add("\n"),s.add("]"),s.toString()}V1(t,i,n){return!(void 0!==n&&"__gohashid"!==i&&"_"!==i[0]&&!e.it(n))}Yi(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}ZT(t){const e=t;if(e instanceof y)t={class:"go.Point",x:this.Yi(e.x),y:this.Yi(e.y)};else if(e instanceof v)t={class:"go.Size",width:this.Yi(e.width),height:this.Yi(e.height)};else if(e instanceof x)t={class:"go.Rect",x:this.Yi(e.x),y:this.Yi(e.y),width:this.Yi(e.width),height:this.Yi(e.height)};else if(e instanceof b)t={class:"go.Margin",top:this.Yi(e.top),right:this.Yi(e.right),bottom:this.Yi(e.bottom),left:this.Yi(e.left)};else if(e instanceof w)t=e.isSpot()?{class:"go.Spot",x:this.Yi(e.x),y:this.Yi(e.y),offsetX:this.Yi(e.offsetX),offsetY:this.Yi(e.offsetY)}:{class:"go.Spot",enum:e.toString()};else if(e instanceof Ht){if(t={class:"go.Brush",type:Bt[e.type]},1===e.type?t.color=e.color:(2===e.type||3===e.type)&&(t.start=e.start,t.end=e.end,3===e.type&&(0!==e.startRadius&&(t.startRadius=this.Yi(e.startRadius)),isNaN(e.endRadius)||(t.endRadius=this.Yi(e.endRadius)))),null!==e.colorStops){const i={},n=e.colorStops.iterator;for(;n.next();){const t=n.key,e=n.value;i[t]=e}t.colorStops=i}}else if(e instanceof A)t={class:"go.Geometry",type:M[e.type]},0!==e.startX&&(t.startX=this.Yi(e.startX)),0!==e.startY&&(t.startY=this.Yi(e.startY)),0!==e.endX&&(t.endX=this.Yi(e.endX)),0!==e.endY&&(t.endY=this.Yi(e.endY)),e.spot1.equals(w.TopLeft)||(t.spot1=e.spot1),e.spot2.equals(w.BottomRight)||(t.spot2=e.spot2),4===e.type&&(t.path=A.stringify(e));else if(He.ON(null,"",e))return"{}";let i="{",n=!0;for(const e in t){const s=this.yt(t,e);if(!this.V1(t,e,s))if(n?n=!1:i+=",",i+=this.De(e)+":","points"===e&&s instanceof l){let t="[";const e=s.iterator;for(;e.next();){const i=e.value;t.length>1&&(t+=","),t+=this.sD(i.x),t+=",",t+=this.sD(i.y)}t+="]",i+=t}else i+=this.writeJsonValue(s)}return i+="}",i}sD(t){if(t===1/0)return"9e9999";if(t===-1/0)return"-9e9999";if(isNaN(t))return"0";const e=this.pointsDigits;return e>16?t.toString():t.toFixed(e)}get pointsDigits(){return this.Ly}set pointsDigits(t){t<0?t=0:t>100&&(t=100),this.Ly=t}Ki(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}JO(t){if(!e.K(t))return t;let i=t.class||"";if("string"!=typeof i||""===i)return t;if("NaN"===i)return NaN;if("Date"===i)return new Date(t.value);if(0!==i.indexOf("go."))return t;i=i.substring(3);let n=t;if("Point"===i)n=new y(this.Ki(t.x),this.Ki(t.y));else if("Size"===i)n=new v(this.Ki(t.width),this.Ki(t.height));else if("Rect"===i)n=new x(this.Ki(t.x),this.Ki(t.y),this.Ki(t.width),this.Ki(t.height));else if("Margin"===i)n=new b(this.Ki(t.top),this.Ki(t.right),this.Ki(t.bottom),this.Ki(t.left));else if("Spot"===i)n="string"==typeof t.enum?w.parse(t.enum):new w(this.Ki(t.x),this.Ki(t.y),this.Ki(t.offsetX),this.Ki(t.offsetY));else if("Brush"===i){const i=new Ht;i.type=e.Eh(Bt,t.type)??1,"string"==typeof t.color&&(i.color=t.color),t.start instanceof w&&(i.start=t.start),t.end instanceof w&&(i.end=t.end),"number"==typeof t.startRadius&&(i.startRadius=this.Ki(t.startRadius)),"number"==typeof t.endRadius&&(i.endRadius=this.Ki(t.endRadius));const s=t.colorStops;if(e.K(s))for(const t in s){const e=parseFloat(t);i.addColorStop(e,s[t])}n=i}else if("Geometry"===i){let i=null;i="string"==typeof t.path?A.parse(t.path):new A,i.type=e.Eh(M,t.type)??1,"number"==typeof t.startX&&(i.startX=this.Ki(t.startX)),"number"==typeof t.startY&&(i.startY=this.Ki(t.startY)),"number"==typeof t.endX&&(i.endX=this.Ki(t.endX)),"number"==typeof t.endY&&(i.endY=this.Ki(t.endY)),t.spot1 instanceof w&&(i.spot1=t.spot1),t.spot2 instanceof w&&(i.spot2=t.spot2),n=i}else if("EnumValue"===i){let i=t.classType;0===i.indexOf("go.")&&(i=i.substring(3));const s=He.VN(i);e.it(s)&&(n=e.Eh(s,t.name))}return n}get name(){return this.Pt}set name(t){const i=this.Pt;i!==t&&(e.s(t,"string",He,"name"),this.Pt=t,this.t("name",i,t))}get dataFormat(){return this.$d}set dataFormat(t){const i=this.$d;i!==t&&(e.s(t,"string",He,"dataFormat"),this.$d=t,this.t("dataFormat",i,t))}get isReadOnly(){return this.Ao}set isReadOnly(t){const i=this.Ao;i!==t&&(e.s(t,"boolean",He,"isReadOnly"),this.Ao=t,this.t("isReadOnly",i,t))}get modelData(){return this.RN}set modelData(t){const i=this.modelData;i!==t&&(e.ec(t,He,"modelData"),this.containsNodeData(t)&&e.o("Model.modelData Object must not be used by the rest of the model: "+t),this.RN=t,this.t("modelData",i,t),this.updateTargetBindings(t))}addChangedListener(t){return e.k(t,He,"addChangedListener:listener"),this.Ay.push(t),this}removeChangedListener(t){e.k(t,He,"removeChangedListener:listener");const i=this.Ay.indexOf(t);i>=0&&this.Ay.splice(i,1)}VM(t){this.skipsUndoManager||this.undoManager.handleChanged(t),this.nD(t)}nD(t){this.Ay.forEach((e=>e(t)))}dF(t){this.nD(t)}raiseChangedEvent(t,e,i,n,s,r,o){this.vt("",t,e,i,n,s,r,o)}raiseChanged(t,e,i,n,s){this.vt("",2,t,this,e,i,n,s)}t(t,e,i,n,s){this.vt("",2,t,this,e,i,n,s)}raiseDataChanged(t,e,i,n,s,r){this.vt("",2,e,t,i,n,s,r)}vt(t,e,i,n,s,r,o,a){void 0===o&&(o=null),void 0===a&&(a=null);const l=new O;l.model=this,l.change=e,l.modelChange=t,l.propertyName=i,l.object=n,l.oldValue=s,l.oldParam=o,l.newValue=r,l.newParam=a,this.VM(l)}get undoManager(){return this.B1}set undoManager(t){const e=this.B1;e!==t&&(null!==e&&e.removeModel(this),this.B1=t,null!==t&&t.addModel(this))}get skipsUndoManager(){return this.Lo}set skipsUndoManager(t){e.s(t,"boolean",He,"skipsUndoManager"),this.Lo=t}changeState(t,i){if(null!==t&&t.model===this)if(2===t.change){const e=t.object,n=t.propertyName,s=t.getValue(i);if(n===this.nodeKeyProperty&&this.containsNodeData(e)){const n=t.getValue(!i);void 0!==n&&this.mi.delete(n),void 0!==s&&this.mi.set(s,e)}this.Z(e,n,s)}else if(3===t.change){const n=t.newParam;if("nodeDataArray"===t.modelChange){const s=t.newValue;if(e.K(s)&&"number"==typeof n){const t=this.getKeyForNodeData(s);i?(this.Te[n]===s&&this.go(this.Te,n),void 0!==t&&this.mi.delete(t)):(this.Te[n]!==s&&this.$o(this.Te,n,s),void 0!==t&&this.mi.set(t,s))}}else if(""===t.modelChange){let e=t.object;if(e&&!Array.isArray(e)&&t.propertyName&&(e=this.yt(e,t.propertyName)),Array.isArray(e)&&"number"==typeof n){const s=t.newValue;i?this.go(e,n):this.$o(e,n,s)}}else e.o("unknown ChangeType.Insert modelChange: "+t.toString())}else if(4===t.change){const n=t.oldParam;if("nodeDataArray"===t.modelChange){const s=t.oldValue;if(e.K(s)&&"number"==typeof n){const t=this.getKeyForNodeData(s);i?(this.Te[n]!==s&&this.$o(this.Te,n,s),void 0!==t&&this.mi.set(t,s)):(this.Te[n]===s&&this.go(this.Te,n),void 0!==t&&this.mi.delete(t))}}else if(""===t.modelChange){let e=t.object;if(e&&!Array.isArray(e)&&t.propertyName&&(e=this.yt(e,t.propertyName)),Array.isArray(e)&&"number"==typeof n){const s=t.oldValue;i?this.$o(e,n,s):this.go(e,n)}}else e.o("unknown ChangeType.Remove modelChange: "+t.toString())}else 1===t.change||e.o("unknown ChangedEvent: "+t.toString())}startTransaction(t){return this.undoManager.startTransaction(t)}commitTransaction(t){return this.undoManager.commitTransaction(t)}rollbackTransaction(){return this.undoManager.rollbackTransaction()}commit(t,e){let i=e;void 0===i&&(i="");const n=this.skipsUndoManager;null===i&&(this.skipsUndoManager=!0,i=""),this.undoManager.startTransaction(i);let s=!1;try{t(this),s=!0}finally{s?this.undoManager.commitTransaction(i):this.undoManager.rollbackTransaction(),this.skipsUndoManager=n}}updateTargetBindings(t,e){void 0===e&&(e=""),this.vt("SourceChanged",1,e,t,null,null)}get nodeKeyProperty(){return this.Lh}set nodeKeyProperty(t){const i=this.Lh;i!==t&&(this.Pn(t,He,"nodeKeyProperty"),""===t&&e.o("Model.nodeKeyProperty may not be the empty string"),this.mi.count>0&&e.o("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Lh=t,this.t("nodeKeyProperty",i,t))}Pn(t,i,n){"string"!=typeof t&&!e.it(t)&&e.Zi(t,"string or function",i,n)}getKeyForNodeData(t){if(null===t)return;const i=this.Lh;if(""===i)return;const n=this.yt(t,i);if(void 0!==n){if(this.isKeyType(n))return n;e.o("Key value for node data "+t+" is not a number or a string: "+n)}}setKeyForNodeData(t,i){if((null==i||!this.isKeyType(i))&&e.Zi(i,"number or string",He,"setKeyForNodeData:key"),null===t)return;const n=this.Lh;if(""===n)return;if(!this.containsNodeData(t))return void this.Z(t,n,i);const s=this.yt(t,n);if(s!==i){if(null!==this.findNodeDataForKey(i))return;this.Z(t,n,i),void 0!==s&&this.mi.delete(s),this.mi.set(i,t),this.vt("nodeKey",2,n,t,s,i),"string"==typeof n&&this.updateTargetBindings(t,n),this.Fy(s,i)}}get makeUniqueKeyFunction(){return this.Df}set makeUniqueKeyFunction(t){const i=this.Df;i!==t&&(null!==t&&e.k(t,He,"makeUniqueKeyFunction"),this.Df=t,this.t("makeUniqueKeyFunction",i,t))}isKeyType(t){return"number"==typeof t||"string"==typeof t}containsNodeData(t){if(null===t)return!1;const e=this.getKeyForNodeData(t);return void 0!==e&&this.mi.get(e)===t}findNodeDataForKey(t){return null===t&&e.o("Model.findNodeDataForKey:key must not be null"),void 0!==t&&this.isKeyType(t)?this.mi.get(t):null}get nodeDataArray(){return this.Te}set nodeDataArray(t){const i=this.Te;if(i!==t){this.zN(t,He,"nodeDataArray"),this.mi.clear(),this.XN();const n=t.length;for(let i=0;i<n;i++){const n=t[i];e.K(n)||e.o("Model.nodeDataArray must only contain Objects, not: "+n),n===this.modelData&&e.o("nodeDataArray Objects must not be the shared Model.modelData")}this.Te=t;const s=new l;for(let e=0;e<n;e++){const i=t[e],n=this.getKeyForNodeData(i);void 0===n||null!==this.mi.get(n)?s.add(i):this.mi.set(n,i)}const r=s.iterator;for(;r.next();){const t=r.value;this.makeNodeDataKeyUnique(t);const e=this.getKeyForNodeData(t);void 0!==e&&this.mi.set(e,t)}this.vt("nodeDataArray",2,"nodeDataArray",this,i,t);for(let e=0;e<n;e++){const i=t[e];this.ng(i),this.og(i)}}}X1(t){return void 0!==t&&this.mi.has(t)}makeNodeDataKeyUnique(t){if(null===t)return;const e=this.Lh;if(""===e)return;let i=this.getKeyForNodeData(t);if(void 0!==i&&!this.X1(i))return;const n=this.Df;if(null===n||(i=n(this,t),null==i||this.X1(i))){if("string"==typeof i){let n=2;for(;this.X1(i+n);)n++;this.Z(t,e,i+n)}else if(void 0===i||"number"==typeof i){let i=-this.mi.count-1;for(;this.X1(i);)i--;this.Z(t,e,i)}}else this.Z(t,e,i)}addNodeData(t){null!==t&&(t===this.modelData&&e.o("Model.addNodeData cannot add the shared Model.modelData Object"),this.containsNodeData(t)||this.zT(t,!0))}zT(t,i){let n=this.getKeyForNodeData(t);if(void 0===n)this.makeNodeDataKeyUnique(t),n=this.getKeyForNodeData(t);else{if(this.mi.get(n)===t)return;this.makeNodeDataKeyUnique(t),n=this.getKeyForNodeData(t)}void 0===n&&e.o("Model.makeNodeDataKeyUnique failed on "+t+".  Data not added to Model."),this.mi.set(n,t);let s=null;i&&(s=this.Te.length,this.$o(this.Te,s,t)),this.vt("nodeDataArray",3,"nodeDataArray",this,null,t,null,s),this.ng(t),this.og(t)}addNodeDataCollection(t){if(Array.isArray(t)){const e=t.length;for(let i=0;i<e;i++)this.addNodeData(t[i])}else{const e=t.iterator;for(;e.next();){const t=e.value;this.addNodeData(t)}}}removeNodeData(t){null!==t&&this.VT(t,!0)}VT(t,e){const i=this.getKeyForNodeData(t);void 0!==i&&this.mi.delete(i);let n=null;if(e){if(n=this.Te.indexOf(t),n<0)return;this.go(this.Te,n)}this.vt("nodeDataArray",4,"nodeDataArray",this,t,null,n,null),this.Ry(t)}removeNodeDataCollection(t){if(Array.isArray(t)){const e=t.length;for(let i=0;i<e;i++)this.removeNodeData(t[i])}else{const e=t.iterator;for(;e.next();){const t=e.value;this.removeNodeData(t)}}}mergeNodeDataArray(t){if(t===this.nodeDataArray||!Array.isArray(t))return;const e=new u;e.addAll(this.mi.iteratorKeys);const i=new u,n=t.length;for(let e=0;e<n;e++){const n=t[e],s=this.getKeyForNodeData(n);if(void 0!==s){i.add(s);const t=this.findNodeDataForKey(s);if(t===n)continue;if(null!==t)this.assignAllDataProperties(t,n),this.sg(n,t);else{const t=this.cloneDeep(n);this.setKeyForNodeData(t,s),this.addNodeData(t)}}else{const t=this.cloneDeep(n);this.addNodeData(t),i.add(this.getKeyForNodeData(t))}}const s=e.iterator;for(;s.next();){const t=s.value;if(!i.has(t)){const e=this.findNodeDataForKey(t);e&&this.removeNodeData(e)}}}Fy(t,e){if(void 0===e)return;const i=this.Ny(t);i instanceof u&&this.Jo.set(e,i)}XN(){}ng(t){}og(t){}Ry(t){}Js(t,e){if(void 0===t)return;let i=this.Jo.get(t);null===i&&(i=new u,this.Jo.set(t,i)),i.add(e)}Ws(t,e){if(void 0===t)return;const i=this.Jo.get(t);i instanceof u&&(null==e?this.Jo.delete(t):(i.delete(e),0===i.count&&this.Jo.delete(t)))}Ny(t){if(void 0===t)return null;const e=this.Jo.get(t);return e instanceof u?e:null}OE(t){void 0===t?this.Jo.clear():this.Jo.delete(t)}get copyNodeDataFunction(){return this.Ff}set copyNodeDataFunction(t){const i=this.Ff;i!==t&&(null!==t&&e.k(t,He,"copyNodeDataFunction"),this.Ff=t,this.t("copyNodeDataFunction",i,t))}get copiesArrays(){return this.Zd}set copiesArrays(t){const i=this.Zd;i!==t&&(null!==t&&e.s(t,"boolean",He,"copiesArrays"),this.Zd=t,this.t("copiesArrays",i,t))}get copiesArrayObjects(){return this.Qd}set copiesArrayObjects(t){const i=this.Qd;i!==t&&(null!==t&&e.s(t,"boolean",He,"copiesArrayObjects"),this.Qd=t,this.t("copiesArrayObjects",i,t))}get copiesKey(){return this._d}set copiesKey(t){const i=this._d;i!==t&&(null!==t&&e.s(t,"boolean",He,"copiesKey"),this._d=t,this.t("copiesKey",i,t))}copyNodeData(t){if(null===t)return null;let i=null;const n=this.Ff;return i=null!==n?n(t,this):this.Y1(t,!0),e.K(i),i}Y1(t,i){if(e.K(t)){if(Array.isArray(t)){if(this.copiesArrays){const e=t,i=[];for(let t=0;t<e.length;t++){const n=e[t],s=this.Y1(n,this.copiesArrayObjects);i.push(s)}return i}return t}if(t instanceof y||t instanceof v||t instanceof x||t instanceof b||t instanceof w)return t.copy();if(i){const i=t,n=i.constructor,s=n?new n:{},r=this.copiesKey||"string"!=typeof this.nodeKeyProperty?null:this.nodeKeyProperty;for(const t in i){if("__gohashid"===t){s.__gohashid=void 0;continue}if(t===r){s[r]=void 0;continue}const n=this.yt(i,t);if(e.K(n))if(He.ON(i,t,n))this.Z(s,t,n);else{const e=this.Y1(n,!1);this.Z(s,t,e)}else s[t]=n}return s}return t}return t}get afterCopyFunction(){return this.tg}set afterCopyFunction(t){const i=this.tg;i!==t&&(null!==t&&e.k(t,He,"afterCopyFunction"),this.tg=t,this.t("afterCopyFunction",i,t))}static ON(t,i,n){const s=e.Dn(n);return n instanceof He||n instanceof R||n instanceof F||n instanceof O||n instanceof Dt||n instanceof Kt||n instanceof xt||n instanceof EventTarget||"Layer"===s||"RowColumnDefinition"===s||s.indexOf("Animation")>=0||s.indexOf("Tool")>=0||s.indexOf("CommandHandler")>=0||s.indexOf("Layout")>=0}static oD=!1;setDataProperty(t,i,n){if(this.containsNodeData(t)){if(i===this.nodeKeyProperty)return void this.setKeyForNodeData(t,n);if(i===this.nodeCategoryProperty)return void this.setCategoryForNodeData(t,n)}else!He.oD&&t instanceof Dt&&(He.oD=!0,e.ni('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),e.ni("  Is that really your intent?"));const s=this.yt(t,i);s!==n&&(this.Z(t,i,n),this.raiseDataChanged(t,i,s,n))}set(t,e,i){this.setDataProperty(t,e,i)}assignAllDataProperties(t,e){if(!e)return;const i=this.containsNodeData(t);for(const n in e)"__gohashid"!==n&&(i&&n===this.nodeKeyProperty||this.setDataProperty(t,n,e[n]))}addArrayItem(t,e){this.insertArrayItem(t,-1,e)}insertArrayItem(t,e,i){e<0&&(e=t.length),t=this.$o(t,e,i),this.vt("",3,"",t,null,i,null,e)}removeArrayItem(t,i){void 0===i&&(i=-1),t===this.Te&&e.o("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===i&&(i=t.length-1);const n=t[i];t=this.go(t,i),this.vt("",4,"",t,n,null,i,null)}get nodeCategoryProperty(){return this.Ga}set nodeCategoryProperty(t){const e=this.Ga;e!==t&&(this.Pn(t,He,"nodeCategoryProperty"),this.Ga=t,this.t("nodeCategoryProperty",e,t))}getCategoryForNodeData(t){if(null===t)return"";const i=this.Ga;if(""===i)return"";const n=this.yt(t,i);return void 0===n?"":"string"==typeof n?n:void e.o("getCategoryForNodeData found a non-string category for "+t+": "+n)}setCategoryForNodeData(t,i){if(e.s(i,"string",He,"setCategoryForNodeData:cat"),null===t)return;const n=this.Ga;if(""===n)return;if(!this.containsNodeData(t))return void this.Z(t,n,i);let s=this.yt(t,n);void 0===s&&(s=""),s!==i&&(this.Z(t,n,i),this.vt("nodeCategory",2,n,t,s,i))}sg(t,e){this.setCategoryForNodeData(e,this.getCategoryForNodeData(t))}get type(){return"Model"}pm(){return!1}mm(){return!1}Mb(){return!1}Ra(){return!1}zw(){return!1}jc(){return!1}static LM(){return new He}yt(t,e){return He.yt(t,e)}static yt(t,i){if(!t||!i)return null;let n;try{e.it(i)?n=i(t):e.it(t.getAttribute)?(n=t.getAttribute(i),null===n&&(n=void 0)):n=t[i]}catch{}return n}Z(t,e,i){He.Z(t,e,i)}static Z(t,i,n){if(t&&i){try{e.it(i)?i(t,n):e.it(t.setAttribute)?t.setAttribute(i,n):t[i]=n}catch{}return t}}zN(t,i,n){Array.isArray(t)||e.Zi(t,"Array",i,n)}eD(t,e,i){return t[e]=i,t}$o(t,e,i){return e>=t.length?t.push(i):t.splice(e,0,i),t}go(t,e){return e>=t.length?t.pop():t.splice(e,1),t}static VN(e){return He.YN[e]?He.YN[e]:void 0!==t.go&&t.go[e]?t.go[e]:null}static cl(t,e){He.YN[e]=t}static YN={};static{He.cl(Ht,"Brush"),He.cl(A,"Geometry"),He.cl(b,"Margin"),He.cl(y,"Point"),He.cl(x,"Rect"),He.cl(v,"Size"),He.cl(w,"Spot"),He.cl(He,"Model")}}He.fromJSON=He.fromJson=He.fromJson;class Ue extends He{Ps;Zo;Di;Th;Rf;vf;Cl;mo;po;Ha;ja;qa;$s;Of;Sn;rg;constructor(t,e,i){if(super(),this.Ps=[],this.Zo=new u,this.Di=new m,this.Th="",this.Rf=null,this.vf=null,this.Cl=null,this.mo="from",this.po="to",this.Ha="",this.ja="",this.qa="category",this.$s="",this.Of="isGroup",this.Sn="group",this.rg=!1,void 0!==e&&(this.linkDataArray=e),void 0!==t&&(Array.isArray(t)?this.nodeDataArray=t:i=t),i){Object.assign(this,i);const t=i.Changed;t&&(delete this.Changed,this.addChangedListener(t))}}cloneProtected(t){super.cloneProtected(t),t.Th=this.Th,t.Rf=this.Rf,t.vf=this.vf,t.mo=this.mo,t.po=this.po,t.Ha=this.Ha,t.ja=this.ja,t.qa=this.qa,t.$s=this.$s,t.Of=this.Of,t.Sn=this.Sn,t.rg=this.rg}clear(){this.Ps=[],this.Di.clear(),this.Zo.clear(),super.clear()}toString(t){if(void 0===t&&(t=0),t>=2)return this.toJson();{let e=(""!==this.name?this.name:"")+" GraphLinksModel";if(t>0){e+="\n node data:";let t=this.nodeDataArray,i=t.length,n=0;for(n=0;n<i;n++){const i=t[n];e+=" "+this.getKeyForNodeData(i)+":"+je.toString(i)}for(e+="\n link data:",t=this.linkDataArray,i=t.length,n=0;n<i;n++){const i=t[n];e+=" "+this.Ae(i,!0)+"--\x3e"+this.Ae(i,!1)}}return e}}vN(t,e,i){if(""===this.linkKeyProperty){const t=this.skipsUndoManager;this.skipsUndoManager=!0,this.linkKeyProperty="key",this.skipsUndoManager=t}let n=super.vN(t,e,i);const s=this,r=new u,o=new u,a=new u;t.changes.each((t=>{if(t.model===s)if("linkDataArray"===t.modelChange)3===t.change?r.add(t.newValue):4===t.change&&a.add(t.oldValue);else if(s.containsLinkData(t.object))o.add(t.object);else if(null!==t.object)if(null!==t.object&&i.has(t.object))i.get(t.object).each((t=>{s.containsLinkData(t)&&o.add(t)}));else{if(t.object instanceof He||s.containsNodeData(t.object))return;s.rD(t.object).each((t=>o.add(t)))}}));const l=new u;r.each((t=>{l.add(s.getKeyForLinkData(t)),e||o.add(t)}));const h=new u;a.each((t=>{h.add(s.getKeyForLinkData(t)),e&&o.add(t)}));const c=s.cloneDeep(o.toArray());return l.count>0&&(null===n&&(n={}),e?n.removedLinkKeys=l.toArray():n.insertedLinkKeys=l.toArray()),c.length>0&&(null===n&&(n={}),n.modifiedLinkData=c),h.count>0&&(null===n&&(n={}),e?n.insertedLinkKeys=h.toArray():n.removedLinkKeys=h.toArray()),n}eg(){const t=super.eg();let e="";return"category"!==this.linkCategoryProperty&&"string"==typeof this.linkCategoryProperty&&(e+=',\n  "linkCategoryProperty": '+this.De(this.linkCategoryProperty)),""!==this.linkKeyProperty&&"string"==typeof this.linkKeyProperty&&(e+=',\n  "linkKeyProperty": '+this.De(this.linkKeyProperty)),"from"!==this.linkFromKeyProperty&&"string"==typeof this.linkFromKeyProperty&&(e+=',\n  "linkFromKeyProperty": '+this.De(this.linkFromKeyProperty)),"to"!==this.linkToKeyProperty&&"string"==typeof this.linkToKeyProperty&&(e+=',\n  "linkToKeyProperty": '+this.De(this.linkToKeyProperty)),""!==this.linkFromPortIdProperty&&"string"==typeof this.linkFromPortIdProperty&&(e+=',\n  "linkFromPortIdProperty": '+this.De(this.linkFromPortIdProperty)),""!==this.linkToPortIdProperty&&"string"==typeof this.linkToPortIdProperty&&(e+=',\n  "linkToPortIdProperty": '+this.De(this.linkToPortIdProperty)),""!==this.linkLabelKeysProperty&&"string"==typeof this.linkLabelKeysProperty&&(e+=',\n  "linkLabelKeysProperty": '+this.De(this.linkLabelKeysProperty)),"isGroup"!==this.nodeIsGroupProperty&&"string"==typeof this.nodeIsGroupProperty&&(e+=',\n  "nodeIsGroupProperty": '+this.De(this.nodeIsGroupProperty)),"group"!==this.nodeGroupKeyProperty&&"string"==typeof this.nodeGroupKeyProperty&&(e+=',\n  "nodeGroupKeyProperty": '+this.De(this.nodeGroupKeyProperty)),t+e}Ty(t){super.Ty(t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)}IN(){return super.IN()+(',\n  "linkDataArray": '+this.Ah(this.linkDataArray,!0))}EN(t){super.EN(t);const e=t.linkDataArray;Array.isArray(e)&&(this.replaceJsonObjects(e),this.linkDataArray=e)}lD=',\n  "insertedLinkKeys": ';$O=',\n  "modifiedLinkData": ';hD=',\n  "removedLinkKeys": ';rD(t){const e=new u;for(let i=0;i<this.linkDataArray.length;i++){const n=this.linkDataArray[i];this.z1(t,n,n,e)}return e}BN(t,e,i){if(""===this.linkKeyProperty){const t=this.skipsUndoManager;this.skipsUndoManager=!0,this.linkKeyProperty="key",this.skipsUndoManager=t}const n=super.BN(t,e,i),s=this,r=new u,o=new u,a=new u;t.changes.each((t=>{if(t.model===s)if("linkDataArray"===t.modelChange)3===t.change?r.add(t.newValue):4===t.change&&a.add(t.oldValue);else if(s.containsLinkData(t.object))o.add(t.object);else if(null!==t.object)if(null!==t.object&&i.has(t.object))i.get(t.object).each((t=>{s.containsLinkData(t)&&o.add(t)}));else{if(t.object instanceof He||s.containsNodeData(t.object))return;s.rD(t.object).each((t=>o.add(t)))}}));const l=new u;r.each((t=>{l.add(s.getKeyForLinkData(t)),e||o.add(t)}));const h=new u;a.each((t=>{h.add(s.getKeyForLinkData(t)),e&&o.add(t)}));let c=n;return l.count>0&&(c+=(e?this.hD:this.lD)+this.Ah(l.toArray(),!0)),o.count>0&&(c+=this.$O+this.Ah(o.toArray(),!0)),h.count>0&&(c+=(e?this.lD:this.hD)+this.Ah(h.toArray(),!0)),c}Dy(t){(void 0!==t.linkCategoryProperty&&t.linkCategoryProperty!==this.linkCategoryProperty||void 0!==t.linkKeyProperty&&t.linkKeyProperty!==this.linkKeyProperty||void 0!==t.linkFromKeyProperty&&t.linkFromKeyProperty!==this.linkFromKeyProperty||void 0!==t.linkToKeyProperty&&t.linkToKeyProperty!==this.linkToKeyProperty||void 0!==t.linkFromPortIdProperty&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||void 0!==t.linkToPortIdProperty&&t.linkToPortIdProperty!==this.linkToPortIdProperty||void 0!==t.linkLabelKeysProperty&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||void 0!==t.nodeIsGroupProperty&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||void 0!==t.nodeGroupKeyProperty&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&e.o("applyIncrementalJson cannot change Model properties"),super.Dy(t);const i=t.insertedLinkKeys;if(Array.isArray(i)){const t=i.length;for(let e=0;e<t;e++){const t=i[e];let n=this.findLinkDataForKey(t);null===n&&(n=this.copyLinkData({}),this.setKeyForLinkData(n,t),this.addLinkData(n))}}const n=t.modifiedLinkData;if(Array.isArray(n)){const t=n.length;for(let e=0;e<t;e++){const t=n[e],i=this.getKeyForLinkData(t),s=this.findLinkDataForKey(i);if(null!==s){for(const e in t)"__gohashid"===e||e===this.linkKeyProperty||this.setDataProperty(s,e,t[e]);this.aD(t,s)}}}const s=t.removedLinkKeys;if(Array.isArray(s)){const t=s.length;for(let e=0;e<t;e++){const t=s[e],i=this.findLinkDataForKey(t);null!==i&&this.removeLinkData(i)}}}changeState(t,i){if(null!==t&&t.model===this){if(2===t.change){const e=t.object,n=t.propertyName;if(n===this.linkKeyProperty&&this.containsLinkData(e)){const s=t.getValue(i),r=t.getValue(!i);return void 0!==r&&this.Di.delete(r),void 0!==s&&this.Di.set(s,e),void this.Z(e,n,s)}}else if(3===t.change){let n=t.newParam;if("linkDataArray"===t.modelChange){const s=t.newValue;if(e.K(s)&&"number"==typeof n){const t=this.getKeyForLinkData(s);i?(this.Zo.delete(s),this.Ps[n]===s&&this.go(this.linkDataArray,n),void 0!==t&&this.Di.delete(t)):(this.Zo.add(s),this.Ps[n]!==s&&this.$o(this.Ps,n,s),void 0!==t&&this.Di.set(t,s))}return}if("linkLabelKeys"===t.modelChange){const e=t.object,s=this.getLabelKeysForLinkData(e);return void(Array.isArray(s)&&"number"==typeof n&&(i?(n=s.indexOf(t.newValue),n>=0&&this.go(s,n)):s.indexOf(t.newValue)<0&&this.$o(s,n,t.newValue)))}}else if(4===t.change){let n=t.oldParam;if("linkDataArray"===t.modelChange){const s=t.oldValue;if(e.K(s)&&"number"==typeof n){const t=this.getKeyForLinkData(s);i?(this.Zo.add(s),this.Ps[n]!==s&&this.$o(this.Ps,n,s),void 0!==t&&this.Di.set(t,s)):(this.Zo.delete(s),this.Ps[n]===s&&this.go(this.linkDataArray,n),void 0!==t&&this.Di.delete(t))}return}if("linkLabelKeys"===t.modelChange){const e=t.object,s=this.getLabelKeysForLinkData(e);return void(Array.isArray(s)&&"number"==typeof n&&(i?s.indexOf(t.oldValue)<0&&this.$o(s,n,t.oldValue):(n=s.indexOf(t.oldValue),n>=0&&this.go(s,n))))}}super.changeState(t,i)}}get archetypeNodeData(){return this.Cl}set archetypeNodeData(t){const i=this.Cl;i!==t&&(null!==t&&e.ec(t,Ue,"archetypeNodeData"),this.Cl=t,this.t("archetypeNodeData",i,t))}KN(t){if(void 0===t)return;const e=this.Cl;if(null!==e){let i=this.findNodeDataForKey(t);null===i&&(i=this.copyNodeData(e),this.Z(i,this.nodeKeyProperty,t),this.addNodeData(i))}return t}get linkFromKeyProperty(){return this.mo}set linkFromKeyProperty(t){const e=this.mo;e!==t&&(this.Pn(t,Ue,"linkFromKeyProperty"),this.mo=t,this.t("linkFromKeyProperty",e,t))}getFromKeyForLinkData(t){return this.Ae(t,!0)}setFromKeyForLinkData(t,e){this.Wd(t,e,!0)}get linkToKeyProperty(){return this.po}set linkToKeyProperty(t){const e=this.po;e!==t&&(this.Pn(t,Ue,"linkToKeyProperty"),this.po=t,this.t("linkToKeyProperty",e,t))}getToKeyForLinkData(t){return this.Ae(t,!1)}setToKeyForLinkData(t,e){this.Wd(t,e,!1)}Ae(t,i){if(null===t)return;const n=i?this.mo:this.po;if(""===n)return;const s=this.yt(t,n);if(void 0!==s){if(this.isKeyType(s))return s;e.o((i?"FromKey":"ToKey")+" value for link data "+t+" is not a number or a string: "+s)}}Wd(t,i,n){if(null===i&&(i=void 0),void 0!==i&&!this.isKeyType(i)&&e.Zi(i,"number or string",Ue,n?"setFromKeyForLinkData:key":"setToKeyForLinkData:key"),null===t)return;const s=n?this.mo:this.po;if(""===s)return;if(i=this.KN(i),!this.containsLinkData(t))return void this.Z(t,s,i);const r=this.yt(t,s);r!==i&&(this.Ws(r,t),this.Z(t,s,i),null===this.findNodeDataForKey(i)&&this.Js(i,t),this.vt(n?"linkFromKey":"linkToKey",2,s,t,r,i),"string"==typeof s&&this.updateTargetBindings(t,s))}get linkFromPortIdProperty(){return this.Ha}set linkFromPortIdProperty(t){const e=this.Ha;e!==t&&(this.Pn(t,Ue,"linkFromPortIdProperty"),this.Ha=t,this.t("linkFromPortIdProperty",e,t))}getFromPortIdForLinkData(t){return this.I1(t,!0)}setFromPortIdForLinkData(t,e){this.Jd(t,e,!0)}get linkToPortIdProperty(){return this.ja}set linkToPortIdProperty(t){const e=this.ja;e!==t&&(this.Pn(t,Ue,"linkToPortIdProperty"),this.ja=t,this.t("linkToPortIdProperty",e,t))}getToPortIdForLinkData(t){return this.I1(t,!1)}setToPortIdForLinkData(t,e){this.Jd(t,e,!1)}I1(t,e){if(null===t)return"";const i=e?this.Ha:this.ja;if(""===i)return"";const n=this.yt(t,i);return void 0===n?"":n}Jd(t,i,n){if(e.s(i,"string",Ue,n?"setFromPortIdForLinkData:portname":"setToPortIdForLinkData:portname"),null===t)return;const s=n?this.Ha:this.ja;if(""===s)return;if(!this.containsLinkData(t))return void this.Z(t,s,i);let r=this.yt(t,s);void 0===r&&(r=""),r!==i&&(this.Z(t,s,i),this.vt(n?"linkFromPortId":"linkToPortId",2,s,t,r,i),"string"==typeof s&&this.updateTargetBindings(t,s))}get linkLabelKeysProperty(){return this.$s}set linkLabelKeysProperty(t){const e=this.$s;e!==t&&(this.Pn(t,Ue,"linkLabelKeysProperty"),this.$s=t,this.t("linkLabelKeysProperty",e,t))}getLabelKeysForLinkData(t){if(null===t)return Ue.EmptyArray;const e=this.$s;if(""===e)return Ue.EmptyArray;const i=this.yt(t,e);return void 0===i?Ue.EmptyArray:i}setLabelKeysForLinkData(t,e){if(this.zN(e,Ue,"setLabelKeysForLinkData:arr"),null===t)return;const i=this.$s;if(""===i)return;if(!this.containsLinkData(t))return void this.Z(t,i,e);let n=this.yt(t,i);if(void 0===n&&(n=Ue.EmptyArray),n!==e){if(Array.isArray(n)){const e=n.length;for(let i=0;i<e;i++){const e=n[i];this.Ws(e,t)}}this.Z(t,i,e);const s=e.length;for(let i=0;i<s;i++){const n=e[i];null===this.findNodeDataForKey(n)&&this.Js(n,t)}this.vt("linkLabelKeys",2,i,t,n,e),"string"==typeof i&&this.updateTargetBindings(t,i)}}addLabelKeyForLinkData(t,i){if(null==i||(this.isKeyType(i)||e.Zi(i,"number or string",Ue,"addLabelKeyForLinkData:key"),null===t))return;const n=this.$s;if(""===n)return;const s=this.yt(t,n);if(void 0===s){const e=[];e.push(i),this.setLabelKeysForLinkData(t,e)}else if(Array.isArray(s)){let e=s.indexOf(i);if(e>=0)return;e=s.length,s.push(i),this.containsLinkData(t)&&(null===this.findNodeDataForKey(i)&&this.Js(i,t),this.vt("linkLabelKeys",3,n,t,null,i,null,e))}else e.o(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}removeLabelKeyForLinkData(t,i){if(null==i||(this.isKeyType(i)||e.Zi(i,"number or string",Ue,"removeLabelKeyForLinkData:key"),null===t))return;const n=this.$s;if(""===n)return;const s=this.yt(t,n);if(Array.isArray(s)){const e=s.indexOf(i);if(e<0)return;this.go(s,e),this.containsLinkData(t)&&(this.Ws(i,t),this.vt("linkLabelKeys",4,n,t,i,null,e,null))}else void 0!==s&&e.o(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}get linkDataArray(){return this.Ps}set linkDataArray(t){const i=this.Ps;if(i!==t){this.zN(t,Ue,"linkDataArray"),this.Di.clear();const n=t.length;for(let i=0;i<n;i++){const n=t[i];e.K(n)||e.o("GraphLinksModel.linkDataArray must only contain Objects, not: "+n)}if(this.Ps=t,""!==this.linkKeyProperty){const e=new l;for(let i=0;i<n;i++){const n=t[i],s=this.getKeyForLinkData(n);void 0===s||null!==this.Di.get(s)?e.add(n):this.Di.set(s,n)}const i=e.iterator;for(;i.next();){const t=i.value;this.makeLinkDataKeyUnique(t);const e=this.getKeyForLinkData(t);void 0!==e&&this.Di.set(e,t)}}const s=new u;for(let e=0;e<n;e++){const i=t[e];s.add(i)}this.Zo=s,this.vt("linkDataArray",2,"linkDataArray",this,i,t);for(let e=0;e<n;e++){const i=t[e];this.GN(i)}}}get linkKeyProperty(){return this.Th}set linkKeyProperty(t){const e=this.Th;if(e!==t){this.Pn(t,Ue,"linkKeyProperty"),this.Th=t,this.Di.clear();const i=this.linkDataArray.length;for(let t=0;t<i;t++){const e=this.linkDataArray[t];let i=this.getKeyForLinkData(e);void 0===i&&(this.makeLinkDataKeyUnique(e),i=this.getKeyForLinkData(e)),void 0!==i&&this.Di.set(i,e)}this.t("linkKeyProperty",e,t)}}getKeyForLinkData(t){if(null===t)return;const i=this.Th;if(""===i)return;const n=this.yt(t,i);if(void 0!==n){if(this.isKeyType(n))return n;e.o("Key value for link data "+t+" is not a number or a string: "+n)}}setKeyForLinkData(t,i){if((null==i||!this.isKeyType(i))&&e.Zi(i,"number or string",Ue,"setKeyForLinkData:key"),null===t)return;const n=this.Th;if(""===n)return;if(!this.containsLinkData(t))return void this.Z(t,n,i);const s=this.yt(t,n);if(s!==i){if(null!==this.findLinkDataForKey(i))return;this.Z(t,n,i),void 0!==s&&this.Di.delete(s),this.Di.set(i,t),this.vt("linkKey",2,n,t,s,i),"string"==typeof n&&this.updateTargetBindings(t,n)}}get makeUniqueLinkKeyFunction(){return this.Rf}set makeUniqueLinkKeyFunction(t){const i=this.Rf;i!==t&&(null!==t&&e.k(t,Ue,"makeUniqueLinkKeyFunction"),this.Rf=t,this.t("makeUniqueLinkKeyFunction",i,t))}findLinkDataForKey(t){return null===t&&e.o("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&this.isKeyType(t)?this.Di.get(t):null}K1(t){return void 0!==t&&this.Di.has(t)}makeLinkDataKeyUnique(t){if(null===t)return;const e=this.Th;if(""===e)return;let i=this.getKeyForLinkData(t);if(void 0!==i&&!this.K1(i))return;const n=this.Rf;if(null===n||(i=n(this,t),null==i||this.K1(i))){if("string"==typeof i){let n=2;for(;this.K1(i+n);)n++;this.Z(t,e,i+n)}else if(void 0===i||"number"==typeof i){let i=-this.Di.count-1;for(;this.K1(i);)i--;this.Z(t,e,i)}}else this.Z(t,e,i)}containsLinkData(t){return null!==t&&this.Zo.has(t)}addLinkData(t){null!==t&&(this.containsLinkData(t)||this.jT(t,!0))}jT(t,i){if(""!==this.linkKeyProperty){let i=this.getKeyForLinkData(t);if(void 0===i)this.makeLinkDataKeyUnique(t),i=this.getKeyForLinkData(t);else{if(this.Di.get(i)===t)return;this.makeLinkDataKeyUnique(t),i=this.getKeyForLinkData(t)}void 0===i&&e.o("GraphLinksModel.makeLinkDataKeyUnique failed on "+t+". Data not added to model."),this.Di.set(i,t)}this.Zo.add(t);let n=null;i&&(n=this.Ps.length,this.$o(this.Ps,n,t)),this.vt("linkDataArray",3,"linkDataArray",this,null,t,null,n),this.GN(t)}addLinkDataCollection(t){if(Array.isArray(t)){const e=t.length;for(let i=0;i<e;i++)this.addLinkData(t[i])}else{const e=t.iterator;for(;e.next();){const t=e.value;this.addLinkData(t)}}}removeLinkData(t){null!==t&&this.HT(t,!0)}HT(t,e){this.Zo.delete(t);const i=this.getKeyForLinkData(t);void 0!==i&&this.Di.delete(i);let n=null;if(e){if(n=this.Ps.indexOf(t),n<0)return;this.go(this.Ps,n)}this.vt("linkDataArray",4,"linkDataArray",this,t,null,n,null),this.ZO(t)}removeLinkDataCollection(t){if(Array.isArray(t)){const e=t.length;for(let i=0;i<e;i++)this.removeLinkData(t[i])}else{const e=t.iterator;for(;e.next();){const t=e.value;this.removeLinkData(t)}}}mergeLinkDataArray(t){if(""===this.linkKeyProperty&&e.o("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t===this.linkDataArray||!Array.isArray(t))return;const i=new u;i.addAll(this.Di.iteratorKeys);const n=new u,s=t.length;for(let e=0;e<s;e++){const i=t[e],s=this.getKeyForLinkData(i);if(void 0!==s){n.add(s);const t=this.findLinkDataForKey(s);if(t===i)continue;if(null!==t)this.assignAllDataProperties(t,i),this.aD(i,t);else{const t=this.cloneDeep(i);this.setKeyForLinkData(t,s),this.addLinkData(t)}}else{const t=this.cloneDeep(i);this.addLinkData(t),n.add(this.getKeyForLinkData(t))}}const r=i.iterator;for(;r.next();){const t=r.value;if(!n.has(t)){const e=this.findLinkDataForKey(t);e&&this.removeLinkData(e)}}}GN(t){let e=this.Ae(t,!0);e=this.KN(e),null===this.findNodeDataForKey(e)&&this.Js(e,t),e=this.Ae(t,!1),e=this.KN(e),null===this.findNodeDataForKey(e)&&this.Js(e,t);const i=this.getLabelKeysForLinkData(t);if(Array.isArray(i)){const n=i.length;for(let s=0;s<n;s++)e=i[s],null===this.findNodeDataForKey(e)&&this.Js(e,t)}}ZO(t){let e=this.Ae(t,!0);this.Ws(e,t),e=this.Ae(t,!1),this.Ws(e,t);const i=this.getLabelKeysForLinkData(t);if(Array.isArray(i)){const n=i.length;for(let s=0;s<n;s++)e=i[s],this.Ws(e,t)}}get copyLinkDataFunction(){return this.vf}set copyLinkDataFunction(t){const i=this.vf;i!==t&&(null!==t&&e.k(t,Ue,"copyLinkDataFunction"),this.vf=t,this.t("copyLinkDataFunction",i,t))}copyLinkData(t){if(null===t)return null;let i=null;const n=this.vf;return i=null!==n?n(t,this):this.Y1(t,!0),e.K(i)&&(""!==this.mo&&this.Z(i,this.mo,void 0),""!==this.po&&this.Z(i,this.po,void 0),""!==this.$s&&this.Z(i,this.$s,[])),i}get nodeIsGroupProperty(){return this.Of}set nodeIsGroupProperty(t){const e=this.Of;e!==t&&(this.Pn(t,Ue,"nodeIsGroupProperty"),this.Of=t,this.t("nodeIsGroupProperty",e,t))}isGroupForNodeData(t){if(null===t)return!1;const e=this.Of;return""!==e&&!!this.yt(t,e)}isGroupForData(t){return this.isGroupForNodeData(t)}get nodeGroupKeyProperty(){return this.Sn}set nodeGroupKeyProperty(t){const e=this.Sn;e!==t&&(this.Pn(t,Ue,"nodeGroupKeyProperty"),this.Sn=t,this.t("nodeGroupKeyProperty",e,t))}get copiesGroupKeyOfNodeData(){return this.rg}set copiesGroupKeyOfNodeData(t){this.rg!==t&&(e.s(t,"boolean",Ue,"copiesGroupKeyOfNodeData"),this.rg=t)}getGroupKeyForNodeData(t){if(null===t)return;const i=this.Sn;if(""===i)return;const n=this.yt(t,i);if(void 0!==n){if(this.isKeyType(n))return n;e.o("GroupKey value for node data "+t+" is not a number or a string: "+n)}}getGroupForData(t){return this.getGroupKeyForNodeData(t)}setGroupKeyForNodeData(t,i){if(null===i&&(i=void 0),void 0!==i&&!this.isKeyType(i)&&e.Zi(i,"number or string",Ue,"setGroupKeyForNodeData:key"),null===t)return;const n=this.Sn;if(""===n)return;if(!this.containsNodeData(t))return void this.Z(t,n,i);const s=this.yt(t,n);s!==i&&(this.Ws(s,t),this.Z(t,n,i),null===this.findNodeDataForKey(i)&&this.Js(i,t),this.vt("nodeGroupKey",2,n,t,s,i),"string"==typeof n&&this.updateTargetBindings(t,n))}setGroupForData(t,e){this.setGroupKeyForNodeData(t,e)}copyNodeData(t){if(null===t)return null;const e=super.copyNodeData(t);return!this.copiesGroupKeyOfNodeData&&""!==this.Sn&&void 0!==this.yt(e,this.Sn)&&this.Z(e,this.Sn,void 0),e}setDataProperty(t,e,i){if(this.containsNodeData(t)){if(e===this.nodeKeyProperty)return void this.setKeyForNodeData(t,i);if(e===this.nodeCategoryProperty)return void this.setCategoryForNodeData(t,i);if(e===this.nodeGroupKeyProperty)return void this.setGroupKeyForNodeData(t,i)}else if(this.containsLinkData(t)){if(e===this.linkFromKeyProperty)return void this.Wd(t,i,!0);if(e===this.linkToKeyProperty)return void this.Wd(t,i,!1);if(e===this.linkFromPortIdProperty)return void this.Jd(t,i,!0);if(e===this.linkToPortIdProperty)return void this.Jd(t,i,!1);if(e===this.linkKeyProperty)return void this.setKeyForLinkData(t,i);if(e===this.linkCategoryProperty)return void this.setCategoryForLinkData(t,i);if(e===this.linkLabelKeysProperty)return void this.setLabelKeysForLinkData(t,i)}const n=this.yt(t,e);n!==i&&(this.Z(t,e,i),this.raiseDataChanged(t,e,n,i))}assignAllDataProperties(t,e){if(!e)return;const i=this.containsNodeData(t),n=this.containsLinkData(t);for(const s in e)if("__gohashid"!==s&&(!i||s!==this.nodeKeyProperty)){if(i&&s===this.nodeIsGroupProperty&&this.yt(t,s)===e[s])continue;if(n&&s===this.linkKeyProperty)continue;this.setDataProperty(t,s,e[s])}}Fy(t,e){super.Fy(t,e);const i=this.mi.iterator;for(;i.next();){const n=i.value;this.HN(n,t,e)}const n=this.Zo.iterator;for(;n.next();){const i=n.value;this.QO(i,t,e)}}HN(t,e,i){if(this.getGroupKeyForNodeData(t)===e){const n=this.Sn;this.Z(t,n,i),this.vt("nodeGroupKey",2,n,t,e,i),"string"==typeof n&&this.updateTargetBindings(t,n)}}QO(t,e,i){if(this.Ae(t,!0)===e){const n=this.mo;this.Z(t,n,i),this.vt("linkFromKey",2,n,t,e,i),"string"==typeof n&&this.updateTargetBindings(t,n)}if(this.Ae(t,!1)===e){const n=this.po;this.Z(t,n,i),this.vt("linkToKey",2,n,t,e,i),"string"==typeof n&&this.updateTargetBindings(t,n)}const n=this.getLabelKeysForLinkData(t);if(Array.isArray(n)){const s=n.length,r=this.$s;for(let o=0;o<s;o++)n[o]===e&&(this.eD(n,o,i),this.vt("linkLabelKeys",3,r,t,e,i,o,o))}}XN(){super.XN();const t=this.linkDataArray,e=t.length;for(let i=0;i<e;i++){const e=t[i];this.GN(e)}}ng(t){super.ng(t);const i=this.getKeyForNodeData(t),n=this.Ny(i);if(null!==n){const t=e.et(),s=n.iterator;for(;s.next();){const e=s.value;if(this.containsNodeData(e)){if(this.getGroupKeyForNodeData(e)===i){const n=this.Sn;this.vt("nodeGroupKey",2,n,e,i,i),"string"==typeof n&&this.updateTargetBindings(e,n),t.push(e)}}else{if(this.Ae(e,!0)===i){const n=this.mo;this.vt("linkFromKey",2,n,e,i,i),"string"==typeof n&&this.updateTargetBindings(e,n),t.push(e)}if(this.Ae(e,!1)===i){const n=this.po;this.vt("linkToKey",2,n,e,i,i),"string"==typeof n&&this.updateTargetBindings(e,n),t.push(e)}const n=this.getLabelKeysForLinkData(e);if(Array.isArray(n)){const s=n.length,r=this.$s;for(let o=0;o<s;o++)n[o]===i&&(this.vt("linkLabelKeys",3,r,e,i,i,o,o),t.push(e))}}}for(let e=0;e<t.length;e++)this.Ws(i,t[e]);e.J(t)}}og(t){super.og(t);const e=this.getGroupKeyForNodeData(t);null===this.findNodeDataForKey(e)&&this.Js(e,t)}Ry(t){super.Ry(t);const e=this.getGroupKeyForNodeData(t);this.Ws(e,t)}get linkCategoryProperty(){return this.qa}set linkCategoryProperty(t){const e=this.qa;e!==t&&(this.Pn(t,Ue,"linkCategoryProperty"),this.qa=t,this.t("linkCategoryProperty",e,t))}getCategoryForLinkData(t){if(null===t)return"";const i=this.qa;if(""===i)return"";const n=this.yt(t,i);return void 0===n?"":"string"==typeof n?n:void e.o("getCategoryForLinkData found a non-string category for "+t+": "+n)}getLinkCategoryForData(t){return this.getCategoryForLinkData(t)}setCategoryForLinkData(t,i){if(e.s(i,"string",Ue,"setCategoryForLinkData:cat"),null===t)return;const n=this.qa;if(""===n)return;if(!this.containsLinkData(t))return void this.Z(t,n,i);let s=this.yt(t,n);void 0===s&&(s=""),s!==i&&(this.Z(t,n,i),this.vt("linkCategory",2,n,t,s,i),"string"==typeof n&&this.updateTargetBindings(t,n))}setLinkCategoryForData(t,e){this.setCategoryForLinkData(t,e)}sg(t,e){super.sg(t,e),this.setGroupKeyForNodeData(e,this.getGroupKeyForNodeData(t))}aD(t,e){this.setCategoryForLinkData(e,this.getCategoryForLinkData(t)),this.setFromKeyForLinkData(e,this.getFromKeyForLinkData(t)),this.setToKeyForLinkData(e,this.getToKeyForLinkData(t)),this.setLabelKeysForLinkData(e,this.getLabelKeysForLinkData(t)),this.setFromPortIdForLinkData(e,this.getFromPortIdForLinkData(t)),this.setToPortIdForLinkData(e,this.getToPortIdForLinkData(t))}get type(){return"GraphLinksModel"}mm(){return!0}Ra(){return!0}zw(){return!0}jc(){return!0}static EmptyArray=Object.freeze([])}He.cl(Ue,"GraphLinksModel"),He.iD=()=>new Ue,He.LM=()=>new Ue;class Ve extends He{Mn;lg;Wa;constructor(t,e){if(super(),this.Mn="parent",this.lg=!1,this.Wa="parentLinkCategory",void 0!==t&&(Array.isArray(t)?this.nodeDataArray=t:e=t),e){Object.assign(this,e);const t=e.Changed;t&&(delete this.Changed,this.addChangedListener(t))}}cloneProtected(t){super.cloneProtected(t),t.Mn=this.Mn,t.lg=this.lg,t.Wa=this.Wa}toString(t){if(void 0===t&&(t=0),t>=2)return this.toJson();{let e=(""!==this.name?this.name:"")+" TreeModel";if(t>0){e+="\n node data:";const t=this.nodeDataArray,i=t.length;for(let n=0;n<i;n++){const i=t[n];e+=" "+this.getKeyForNodeData(i)+":"+je.toString(i)}}return e}}eg(){const t=super.eg();let e="";return"parent"!==this.nodeParentKeyProperty&&"string"==typeof this.nodeParentKeyProperty&&(e+=',\n  "nodeParentKeyProperty": '+this.De(this.nodeParentKeyProperty)),t+e}Ty(t){super.Ty(t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)}Dy(t){void 0!==t.nodeParentKeyProperty&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&e.o("applyIncrementalJson cannot change Model properties"),super.Dy(t)}maybeEnsureLinkReference(t){return t}get nodeParentKeyProperty(){return this.Mn}set nodeParentKeyProperty(t){const e=this.Mn;e!==t&&(this.Pn(t,Ve,"nodeParentKeyProperty"),this.Mn=t,this.t("nodeParentKeyProperty",e,t))}get copiesParentKeyOfNodeData(){return this.lg}set copiesParentKeyOfNodeData(t){this.lg!==t&&(e.s(t,"boolean",Ve,"copiesParentKeyOfNodeData"),this.lg=t)}getParentKeyForNodeData(t){if(null===t)return;const i=this.Mn;if(""===i)return;const n=this.yt(t,i);if(void 0!==n){if(this.isKeyType(n))return n;e.o("ParentKey value for node data "+t+" is not a number or a string: "+n)}}setParentKeyForNodeData(t,i){if(null===i&&(i=void 0),void 0!==i&&!this.isKeyType(i)&&e.Zi(i,"number or string",Ve,"setParentKeyForNodeData:key"),null===t)return;const n=this.Mn;if(""===n)return;if(i=this.maybeEnsureLinkReference(i),!this.containsNodeData(t))return void this.Z(t,n,i);const s=this.yt(t,n);s!==i&&(this.Ws(s,t),this.Z(t,n,i),null===this.findNodeDataForKey(i)&&this.Js(i,t),this.vt("nodeParentKey",2,n,t,s,i),"string"==typeof n&&this.updateTargetBindings(t,n))}get parentLinkCategoryProperty(){return this.Wa}set parentLinkCategoryProperty(t){const e=this.Wa;e!==t&&(this.Pn(t,Ve,"parentLinkCategoryProperty"),this.Wa=t,this.t("parentLinkCategoryProperty",e,t))}get linkCategoryProperty(){return this.parentLinkCategoryProperty}set linkCategoryProperty(t){this.parentLinkCategoryProperty=t}getParentLinkCategoryForNodeData(t){if(null===t)return"";const i=this.Wa;if(""===i)return"";const n=this.yt(t,i);return void 0===n?"":"string"==typeof n?n:void e.o("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+n)}getLinkCategoryForData(t){return this.getParentLinkCategoryForNodeData(t)}setParentLinkCategoryForNodeData(t,i){if(e.s(i,"string",Ve,"setParentLinkCategoryForNodeData:cat"),null===t)return;const n=this.Wa;if(""===n)return;if(!this.containsNodeData(t))return void this.Z(t,n,i);let s=this.yt(t,n);void 0===s&&(s=""),s!==i&&(this.Z(t,n,i),this.vt("parentLinkCategory",2,n,t,s,i),"string"==typeof n&&this.updateTargetBindings(t,n))}setLinkCategoryForData(t,e){this.setParentLinkCategoryForNodeData(t,e)}copyNodeData(t){if(null===t)return null;const e=super.copyNodeData(t);return!this.copiesParentKeyOfNodeData&&""!==this.Mn&&void 0!==this.yt(e,this.Mn)&&this.Z(e,this.Mn,void 0),e}setDataProperty(t,e,i){if(this.containsNodeData(t)){if(e===this.nodeKeyProperty)return void this.setKeyForNodeData(t,i);if(e===this.nodeCategoryProperty)return void this.setCategoryForNodeData(t,i);if(e===this.nodeParentKeyProperty)return void this.setParentKeyForNodeData(t,i);if(e===this.parentLinkCategoryProperty)return void this.setParentLinkCategoryForNodeData(t,i)}const n=this.yt(t,e);n!==i&&(this.Z(t,e,i),this.raiseDataChanged(t,e,n,i))}Fy(t,e){super.Fy(t,e);const i=this.mi.iterator;for(;i.next();){const n=i.value;this.HN(n,t,e)}}HN(t,e,i){if(this.getParentKeyForNodeData(t)===e){const n=this.Mn;this.Z(t,n,i),this.vt("nodeParentKey",2,n,t,e,i),"string"==typeof n&&this.updateTargetBindings(t,n)}}ng(t){super.ng(t);const i=this.getKeyForNodeData(t),n=this.Ny(i);if(null!==n){const t=e.et(),s=n.iterator;for(;s.next();){const e=s.value;if(this.containsNodeData(e)&&this.getParentKeyForNodeData(e)===i){const n=this.Mn;this.vt("nodeParentKey",2,n,e,i,i),"string"==typeof n&&this.updateTargetBindings(e,n),t.push(e)}}for(let e=0;e<t.length;e++)this.Ws(i,t[e]);e.J(t)}}og(t){super.og(t);let e=this.getParentKeyForNodeData(t);e=this.maybeEnsureLinkReference(e),null===this.findNodeDataForKey(e)&&this.Js(e,t)}Ry(t){super.Ry(t);const e=this.getParentKeyForNodeData(t);this.Ws(e,t)}sg(t,e){super.sg(t,e),this.setParentLinkCategoryForNodeData(e,this.getParentLinkCategoryForNodeData(t)),this.setParentKeyForNodeData(e,this.getParentKeyForNodeData(t))}get type(){return"TreeModel"}pm(){return!0}zw(){return!0}}He.cl(Ve,"TreeModel");var Ye=(t=>(t[t.ConstantSpacing=0]="ConstantSpacing",t[t.ConstantDistance=1]="ConstantDistance",t[t.ConstantAngle=2]="ConstantAngle",t[t.Packed=3]="Packed",t))(Ye||{}),qe=(t=>(t[t.Clockwise=10]="Clockwise",t[t.Counterclockwise=11]="Counterclockwise",t[t.BidirectionalLeft=12]="BidirectionalLeft",t[t.BidirectionalRight=13]="BidirectionalRight",t))(qe||{}),$e=(t=>(t[t.Forwards=20]="Forwards",t[t.Reverse=21]="Reverse",t[t.Ascending=22]="Ascending",t[t.Descending=23]="Descending",t[t.Optimized=24]="Optimized",t))($e||{}),We=(t=>(t[t.Pythagorean=30]="Pythagorean",t[t.Circular=31]="Circular",t))(We||{});class Ge extends Ne{le;If;G1;hg;H1;Dh;jN;qN;WN;Ss;vy;Oy;Ja;Iy;cD;ag;cg;fg;Ef;Xi;b;pe;ye;kn;ug;constructor(t){super(),this.le=0,this.If=0,this.G1=0,this.hg=360,this.H1=0,this.Dh=0,this.jN=new y,this.qN=30,this.WN=0,this.Ss=0,this.vy=0,this.Oy=new Xe,this.Ja=0,this.Iy=0,this.cD=600,this.ag=NaN,this.cg=1,this.fg=0,this.Ef=360,this.Xi=0,this.b=10,this.pe=24,this.ye=Le.standardComparer,this.kn=6,this.ug=30,t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.ag=this.ag,t.cg=this.cg,t.fg=this.fg,t.Ef=this.Ef,t.Xi=this.Xi,t.b=this.b,t.pe=this.pe,t.ye=this.ye,t.kn=this.kn,t.ug=this.ug}oi(t){t in $e?this.sorting=t:t in qe?this.direction=t:t in Ye?this.arrangement=t:t in We?this.nodeDiameterFormula=t:super.oi(t)}createNetwork(){return new Ke(this)}_O(t,e,i){t=this.tI(t);let n=this.H1,s=this.qN,r=this.le,o=this.If,a=this.G1,h=this.hg,u=this.Dh,c=this.WN,d=this.Ss,f=this.vy;if(n=this.arrangement,s=this.nodeDiameterFormula,r=this.radius,(!isFinite(r)||r<=0)&&(r=NaN),o=this.aspectRatio,(!isFinite(o)||o<=0)&&(o=1),a=this.startAngle,isFinite(a)||(a=0),h=this.sweepAngle,(!isFinite(h)||h>360||h<1)&&(h=360),u=this.spacing,isFinite(u)||(u=NaN),3===n&&31===s?n=0:3===n&&31!==s&&(s=31,n=this.arrangement),(12===this.direction||13===this.direction)&&24!==this.sorting){for(let n=0;!(n>=t.length||(e.add(t.elt(n)),n+1>=t.length));n+=2)i.add(t.elt(n+1));12===this.direction?(3===this.arrangement&&e.reverse(),(t=new l).addAll(e),t.addAll(i)):(3===this.arrangement&&i.reverse(),(t=new l).addAll(i),t.addAll(e))}const p=t.length;c=0;let g=0;for(let e=0;e<t.length;e++){const i=a+h*g*(10===this.direction?1:-1)/p;let n=t.elt(e).diameter;isNaN(n)&&(n=t.elt(e).Fh(i)),h<360&&(0===e||e===t.length-1)&&(n/=2),c+=n,g++}if(isNaN(r)||3===n){if(isNaN(u)&&(u=6),0!==n&&3!==n){let e=-1/0;for(let i=0;i<p;i++){const n=t.elt(i),s=t.elt(i===p-1?0:i+1);isNaN(n.diameter)&&n.Fh(0),isNaN(s.diameter)&&s.Fh(0),e=Math.max(e,(n.diameter+s.diameter)/2)}if(f=e+u,2===n){const t=(e+u)/(2*Math.PI/p);o>1?(r=t,d=r*o):(d=t,r=d)}else r=this.j1(f*(h>=360?p:p-1),o,a*Math.PI/180,h*Math.PI/180)}else r=this.j1(c+(h>=360?p:p-1)*(3!==n?u:1.6*u),o,a*Math.PI/180,h*Math.PI/180);d=r*o}else{d=r*o;const e=this.JN(r,d,a*Math.PI/180,h*Math.PI/180);if(isNaN(u))0===n&&(u=(e-c)/(h>=360?p:p-1));else if(0===n){const t=(e-c)/(h>=360?p:p-1);t<u?(r=this.j1(c+u*(h>=360?p:p-1),o,a*Math.PI/180,h*Math.PI/180),d=r*o):u=t}else{let i=-1/0;for(let e=0;e<p;e++){const n=t.elt(e),s=t.elt(e===p-1?0:e+1);isNaN(n.diameter)&&n.Fh(0),isNaN(s.diameter)&&s.Fh(0),i=Math.max(i,(n.diameter+s.diameter)/2)}const n=i+u,s=this.j1(n*(h>=360?p:p-1),o,a*Math.PI/180,h*Math.PI/180);s>r?(r=s,d=r*o,f=n):f=e/(h>=360?p:p-1)}}return this.H1=n,this.qN=s,this.le=r,this.If=o,this.G1=a,this.hg=h,this.Dh=u,this.WN=c,this.Ss=d,this.vy=f,t}doLayout(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);const e=this.network.vertexes;if(e.count<=1){if(1===e.count){const t=e.first();t.centerX=0,t.centerY=0}return this.updateParts(),this.network=null,void(this.isValidLayout=!0)}let i=new l;i.addAll(e.iterator);const n=new l,s=new l;i=this._O(i,n,s);const r=this.H1,o=this.le,a=this.G1,h=this.hg,u=this.Dh,c=this.Ss,d=this.vy;if(12!==this.direction&&13!==this.direction||3!==r)if(12===this.direction||13===this.direction){let t=0;switch(r){case 1:t=180*this.q1(o,c,a,d)/Math.PI;break;case 0:{let e=0,i=0;const r=n.first();null!==r&&(e=r.Fh(Math.PI/2));const l=s.first();null!==l&&(i=l.Fh(Math.PI/2)),t=180*this.q1(o,c,a,u+(e+i)/2)/Math.PI;break}case 2:t=h/i.length}if(12===this.direction){switch(r){case 1:this.Ey(n,h/2,a,11);break;case 0:this.Uy(n,h/2,a,11);break;case 2:this.By(n,h/2,a,11)}switch(r){case 1:this.Ey(s,h/2,a+t,10);break;case 0:this.Uy(s,h/2,a+t,10);break;case 2:this.By(s,h/2,a+t,10)}}else{switch(r){case 1:this.Ey(s,h/2,a,11);break;case 0:this.Uy(s,h/2,a,11);break;case 2:this.By(s,h/2,a,11)}switch(r){case 1:this.Ey(n,h/2,a+t,10);break;case 0:this.Uy(n,h/2,a+t,10);break;case 2:this.By(n,h/2,a+t,10)}}}else switch(r){case 1:this.Ey(i,h,a,this.direction);break;case 0:this.Uy(i,h,a,this.direction);break;case 2:this.By(i,h,a,this.direction);break;case 3:this.fD(i,h,a,this.direction)}else this.fD(i,h,a-h/2,10);this.updateParts(),this.network=null,this.isValidLayout=!0}By(t,e,i,n){const s=this.hg,r=this.le,o=this.Ss,a=i*Math.PI/180,l=e*Math.PI/180,h=t.length;for(let e=0;e<h;e++){const i=a+(10===n?e*l/(s>=360?h:h-1):-e*l/h),u=t.elt(e),c=r*Math.tan(i)/o,d=Math.sqrt((r*r+o*o*c*c)/(1+c*c));u.centerX=d*Math.cos(i),u.centerY=d*Math.sin(i),u.actualAngle=180*i/Math.PI}}Uy(t,e,i,n){const s=this.le,r=this.Ss,o=this.Dh;let a=i*Math.PI/180;const l=t.length;for(let e=0;e<l;e++){const i=t.elt(e),h=t.elt(e===l-1?0:e+1),u=s*Math.cos(a),c=r*Math.sin(a);i.centerX=u,i.centerY=c,i.actualAngle=180*a/Math.PI,isNaN(i.diameter)&&i.Fh(0),isNaN(h.diameter)&&h.Fh(0);const d=(i.diameter+h.diameter)/2,f=this.q1(s,r,10===n?a:-a,d+o);a+=10===n?f:-f}}Ey(t,e,i,n){const s=this.le,r=this.Ss,o=this.vy;let a=i*Math.PI/180;const l=t.length;for(let e=0;e<l;e++){const i=t.elt(e);i.centerX=s*Math.cos(a),i.centerY=r*Math.sin(a),i.actualAngle=180*a/Math.PI;const l=this.q1(s,r,10===n?a:-a,o);a+=10===n?l:-l}}fD(t,e,i,n){let s=this.Iy;const r=this.hg;if(this.Ja=0,this.Oy=new Xe,e<360){for(s=i+(10===n?r:-r);s<0;)s+=360;s%=360,s>180&&(s-=360),s*=Math.PI/180,this.Iy=s,this.uD(t,e,i,n)}else this.dD(t,e,i,n);this.Oy.commit(t)}dD(t,e,i,n){const s=this.le,r=this.Ss,o=this.Dh,a=this.If;let l=s*Math.cos(i*Math.PI/180),h=r*Math.sin(i*Math.PI/180);const u=t.toArray();if(3===u.length)return u[0].centerX=s,u[0].centerY=0,u[1].centerX=u[0].centerX-u[0].width/2-u[1].width/2-o,u[1].y=u[0].y,u[2].centerX=(u[0].centerX+u[1].centerX)/2,void(u[2].y=u[0].y-u[2].height-o);if(4===u.length)return u[0].centerX=s,u[0].centerY=0,u[2].centerX=-u[0].centerX,u[2].centerY=u[0].centerY,u[1].centerX=0,u[1].y=Math.min(u[0].y,u[2].y)-u[1].height-o,u[3].centerX=0,void(u[3].y=Math.max(u[0].y+u[0].height+o,u[2].y+u[2].height+o));const c=y.l();for(let t=0;t<u.length&&(u[t].centerX=l,u[t].centerY=h,!(t>=u.length-1));t++)this.gD(l,h,u,t,n,c)||this.mD(l,h,u,t,n,c),l=c.x,h=c.y;if(y.e(c),this.Ja++,this.Ja>23)return;const d=u[0].centerX,f=u[0].centerY,p=u[u.length-1].centerX,g=u[u.length-1].centerY;let m=Math.abs(d-p)-((u[0].width+u[u.length-1].width)/2+o);const v=Math.abs(f-g)-((u[0].height+u[u.length-1].height)/2+o);let x=0;if(Math.abs(v)<1){const t=Math.abs(d-p),e=(u[0].width+u[u.length-1].width)/2;t<e&&(x=0),m=t-e}else x=v>0?v:Math.abs(m)<1?0:m;let b=!1;b=Math.abs(p)>Math.abs(g)?p>0!=f>g:g>0!=d<p,b=10===n?b:!b,b&&(x=-Math.abs(x),x=Math.min(x,-u[u.length-1].width),x=Math.min(x,-u[u.length-1].height)),this.Oy.iI(x,u),Math.abs(x)>1&&(this.Ja<8?this.le-=x/(2*Math.PI):u.length<5&&x>10?this.le/=2:this.le-=x>0?1.7:-2.3,this.Ss=this.le*a,this.dD(t,e,i,n))}uD(t,e,i,n){const s=this.le,r=this.Ss,o=this.If;let a=s*Math.cos(i*Math.PI/180),l=r*Math.sin(i*Math.PI/180);const h=y.l(),u=t.toArray();for(let t=0;t<u.length&&(u[t].centerX=a,u[t].centerY=l,!(t>=u.length-1));t++)this.gD(a,l,u,t,n,h)||this.mD(a,l,u,t,n,h),a=h.x,l=h.y;if(y.e(h),this.Ja++,this.Ja>23)return;const c=Math.atan2(l,a);let d=10===n?this.Iy-c:c-this.Iy;d=Math.abs(d)<Math.abs(d-2*Math.PI)?d:d-2*Math.PI;const f=d*(s+r)/2;this.Oy.eI(f,u),Math.abs(f)>1&&(this.Ja<8?this.le-=f/(2*Math.PI):this.le-=f>0?1.7:-2.3,this.Ss=this.le*o,this.uD(t,e,i,n))}gD(t,e,i,n,s,r){const o=this.Dh,a=this.le,l=this.Ss;let h=0,u=0;const c=(i[n].width+i[n+1].width)/2+o;let d=!1;if(e>=0!=(10===s)){if(h=t+c,h>a){if(h=t-c,h<-a)return r.x=h,r.y=u,!1;d=!0}}else if(h=t-c,h<-a){if(h=t+c,h>a)return r.x=h,r.y=u,!1;d=!0}return u=Math.sqrt(1-Math.min(1,h*h/(a*a)))*l,e<0!==d&&(u=-u),Math.abs(e-u)>(i[n].height+i[n+1].height)/2?(r.x=h,r.y=u,!1):(r.x=h,r.y=u,!0)}mD(t,e,i,n,s,r){const o=this.Dh,a=this.le,l=this.Ss;let h=0,u=0;const c=(i[n].height+i[n+1].height)/2+o;let d=!1;if(t>=0!=(10===s)){if(u=e-c,u<-l){if(u=e+c,u>l)return r.x=h,r.y=u,!1;d=!0}}else if(u=e+c,u>l){if(u=e-c,u<-l)return r.x=h,r.y=u,!1;d=!0}return h=Math.sqrt(1-Math.min(1,u*u/(l*l)))*a,t<0!==d&&(h=-h),Math.abs(t-h)>(i[n].width+i[n+1].width)/2?(r.x=h,r.y=u,!1):(r.x=h,r.y=u,!0)}commitLayout(){this.commitNodes(),this.isRouting&&this.commitLinks()}commitNodes(){const t=null!==this.group&&this.group.hasPlaceholder(),e=t?this.group.location.copy():null;let i=this.actualCenter;t?i=new y(0,0):(i.x=this.arrangementOrigin.x+this.le,i.y=this.arrangementOrigin.y+this.Ss);const n=this.network.vertexes.iterator;for(;n.next();){const t=n.value;t.x+=i.x,t.y+=i.y,t.commit()}if(t){this.group.ensureBounds();const t=this.group.position.copy(),i=this.group.location.copy(),n=e.subtract(i.subtract(t));this.group.move(n),this.jN=n.subtract(t)}}commitLinks(){const t=this.network.edges.iterator;for(;t.next();)t.value.commit()}JN(t,e,i,n){const s=this.cD;if(Math.abs(this.If-1)<.001)return void 0!==i&&void 0!==n?n*t:2*Math.PI*t;const r=t>e?Math.sqrt(t*t-e*e)/t:Math.sqrt(e*e-t*t)/e;let o=0,a=0;a=void 0!==i&&void 0!==n?n/(s+1):Math.PI/(2*(s+1));let l=0;for(let t=0;t<=s;t++){l=void 0!==i&&void 0!==n?i+t*n/s:t*Math.PI/(2*s);const e=Math.sin(l);o+=Math.sqrt(1-r*r*e*e)*a}return void 0!==i&&void 0!==n?(t>e?t:e)*o:4*(t>e?t:e)*o}j1(t,e,i,n){let s=0;return s=void 0!==i&&void 0!==n?this.JN(1,e,i,n):this.JN(1,e),t/s}q1(t,e,i,n){if(Math.abs(this.If-1)<.001)return n/t;const s=t>e?Math.sqrt(t*t-e*e)/t:Math.sqrt(e*e-t*t)/e;let r=0;const o=2*Math.PI/(700*this.network.vertexes.count);t>e&&(i+=Math.PI/2);for(let a=0;;a++){const l=i+a*o,h=Math.sin(l);if(r+=(t>e?t:e)*Math.sqrt(1-s*s*h*h)*o,r>=n)return a*o}}tI(t){switch(this.sorting){case 20:break;case 21:t.reverse();break;case 22:t.sort(this.comparer);break;case 23:t.sort(this.comparer),t.reverse();break;case 24:return this.sI(this.nI(t));default:e.o("Invalid sorting type.")}return t}nI(t){const e=[];for(let i=0;i<t.length;i++)e.push(0);const i=new l;for(let n=0;n<t.length;n++){let s=-1,r=-1;if(0===n)for(let e=0;e<t.length;e++){const i=t.elt(e).edgesCount;i>s&&(s=i,r=e)}else for(let i=0;i<t.length;i++){const t=e[i];t>s&&(s=t,r=i)}i.add(t.elt(r)),e[r]=-1;const o=t.elt(r);let a=0;const l=o.sourceEdges;for(;l.next();){const i=l.value.fromVertex;a=t.indexOf(i),!(a<0)&&e[a]>=0&&e[a]++}const h=o.destinationEdges;for(;h.next();){const i=h.value.toVertex;a=t.indexOf(i),!(a<0)&&e[a]>=0&&e[a]++}}return i}sI(t){const e=[];for(let i=0;i<t.length;i++){const n=t.elt(i);e[i]=[];let s=0;const r=n.destinationEdges;for(;r.next();){const n=r.value.toVertex;s=t.indexOf(n),s!==i&&e[i].indexOf(s)<0&&e[i].push(s)}const o=n.sourceEdges;for(;o.next();){const n=o.value.fromVertex;s=t.indexOf(n),s!==i&&e[i].indexOf(s)<0&&e[i].push(s)}}const i=[];for(let t=0;t<e.length;t++)i[t]=0;const n=[],s=[],r=[],o=[],a=new l;let h=0;for(let l=0;l<e.length;l++){const u=e[l].length;if(1===u){o.push(l);continue}if(0===u){a.add(t.elt(l));continue}if(0===h){n.push(l),h++;continue}let c=1/0,d=1/0,f=-1;const p=[];for(let t=0;t<n.length;t++)e[n[t]].indexOf(n[t===n.length-1?0:t+1])<0&&p.push(t===n.length-1?0:t+1);if(0===p.length)for(let t=0;t<n.length;t++)p.push(t);for(let t=0;t<p.length;t++){const o=p[t],a=this.oI(e[l],s,r,i,o,n);let h=0;for(let t=0;t<e[l].length;t++){const i=e[l][t],s=n.indexOf(i);if(s>=0){const t=Math.abs(o-(s>=o?s+1:s));h+=t<n.length+1-t?t:n.length+1-t}}for(let t=0;t<s.length;t++){let e=i[s[t]],a=i[r[t]];if(e>=o&&e++,a>=o&&a++,e>a){const t=a;a=e,e=t}a-e<(n.length+2)/2==(e<o&&o<=a)&&h++}(a<c||a===c&&h<d)&&(c=a,d=h,f=o)}n.splice(f,0,l);for(let t=0;t<n.length;t++)i[n[t]]=t;for(let t=0;t<e[l].length;t++){const i=e[l][t];n.indexOf(i)>=0&&(s.push(l),r.push(i))}h++}let u=!1;const c=n.length;for(;;){u=!0;for(let t=0;t<o.length;t++){const i=o[t],s=e[i][0],r=n.indexOf(s);if(r>=0){let a=0;for(let t=0;t<e[s].length;t++){const i=e[s][t],o=n.indexOf(i);if(o<0||o===r)continue;const l=o>r?o-r:r-o;a+=o<r!=l>c-l?1:-1}n.splice(a<0?r:r+1,0,i),o.splice(t,1),t--}else u=!1}if(u)break;n.push(o[0]),o.splice(0,1)}for(let e=0;e<n.length;e++){const i=n[e];a.add(t.elt(i))}return a}oI(t,e,i,n,s,r){let o=0;for(let a=0;a<e.length;a++){const l=e[a],h=i[a],u=n[l],c=n[h];let d=0,f=0;if(u<c?(d=u,f=c):(d=c,f=u),d<s&&s<=f)for(let e=0;e<t.length;e++){const i=t[e];r.indexOf(i)<0||d<n[i]&&n[i]<f||d===n[i]||f===n[i]||o++}else for(let e=0;e<t.length;e++){const i=t[e];r.indexOf(i)<0||!(d<n[i]&&n[i]<f)||d===n[i]||f===n[i]||o++}}return o}get radius(){return this.ag}set radius(t){this.ag!==t&&(e.s(t,"number",Ge,"radius"),(t>0||isNaN(t))&&(this.ag=t,this.invalidateLayout()))}get aspectRatio(){return this.cg}set aspectRatio(t){this.cg!==t&&(e.s(t,"number",Ge,"aspectRatio"),t>0&&(this.cg=t,this.invalidateLayout()))}get startAngle(){return this.fg}set startAngle(t){this.fg!==t&&(e.s(t,"number",Ge,"startAngle"),this.fg=t,this.invalidateLayout())}get sweepAngle(){return this.Ef}set sweepAngle(t){this.Ef!==t&&(e.s(t,"number",Ge,"sweepAngle"),this.Ef=t>0&&t<=360?t:360,this.invalidateLayout())}get arrangement(){return this.Xi}set arrangement(t){this.Xi!==t&&(3===t||0===t||1===t||2===t)&&(this.Xi=t,this.invalidateLayout())}get direction(){return this.b}set direction(t){this.b!==t&&(10===t||11===t||12===t||13===t)&&(this.b=t,this.invalidateLayout())}get sorting(){return this.pe}set sorting(t){this.pe!==t&&(this.pe=t,this.invalidateLayout())}get comparer(){return this.ye}set comparer(t){this.ye!==t&&(e.k(t,Ge,"comparer"),this.ye=t,this.invalidateLayout())}get spacing(){return this.kn}set spacing(t){this.kn!==t&&(e.s(t,"number",Ge,"spacing"),this.kn=t,this.invalidateLayout())}get nodeDiameterFormula(){return this.ug}set nodeDiameterFormula(t){this.ug!==t&&(30===t||31===t)&&(this.ug=t,this.invalidateLayout())}get actualXRadius(){return this.le}get actualYRadius(){return this.Ss}get actualSpacing(){return this.Dh}get actualCenter(){return this.jN}static ConstantSpacing=0;static ConstantDistance=1;static ConstantAngle=2;static Packed=3;static Clockwise=10;static Counterclockwise=11;static BidirectionalLeft=12;static BidirectionalRight=13;static Forwards=20;static Reverse=21;static Ascending=22;static Descending=23;static Optimized=24;static Pythagorean=30;static Circular=31}class Xe{Uf;$a;Bf;constructor(){this.Uf=-1/0,this.$a=null,this.Bf=null}iI(t,e){if(t>0&&this.Uf<0||Math.abs(t)<Math.abs(this.Uf)&&!(t<0&&this.Uf>0)){this.Uf=t,this.$a=[],this.Bf=[];for(let t=0;t<e.length;t++)this.$a[t]=e[t].bounds.x,this.Bf[t]=e[t].bounds.y}}eI(t,e){if(Math.abs(t)<Math.abs(this.Uf)){this.Uf=t,this.$a=[],this.Bf=[];for(let t=0;t<e.length;t++)this.$a[t]=e[t].bounds.x,this.Bf[t]=e[t].bounds.y}}commit(t){if(null!==this.$a&&null!==this.Bf)for(let e=0;e<this.$a.length;e++){const i=t.elt(e);i.x=this.$a[e],i.y=this.Bf[e]}}}class Ke extends De{constructor(t){super(t)}createVertex(){return new Je(this)}createEdge(){return new Ze(this)}}class Je extends Le{yo;W1;constructor(t){super(t),this.yo=NaN,this.W1=NaN}Fh(t){const e=this.network;if(null===e)return NaN;const i=e.layout;if(null===i)return NaN;if(3===i.arrangement){if(31===i.nodeDiameterFormula)return this.yo=Math.max(this.width,this.height),this.yo;{const e=Math.abs(Math.sin(t)),i=Math.abs(Math.cos(t));return 0===e?this.width:0===i?this.height:(this.yo=Math.min(this.height/e,this.width/i),this.yo)}}return 31===i.nodeDiameterFormula?(this.yo=Math.max(this.width,this.height),this.yo):(this.yo=Math.sqrt(this.width*this.width+this.height*this.height),this.yo)}get diameter(){return this.yo}set diameter(t){this.yo!==t&&(e.s(t,"number",Je,"diameter"),this.yo=t)}get actualAngle(){return this.W1}set actualAngle(t){this.W1!==t&&(e.s(t,"number",Je,"actualAngle"),this.W1=t)}}class Ze extends Ee{constructor(t){super(t)}}class Qe extends Ne{Vy;Rh;Ms;dg;Nn;Fe;gg;mg;pg;Vf;yg;wg;zf;Xf;Yf;Kf;xg;bg;Gf;Za;constructor(t){super(),this.Vy=0,this.Rh=0,this.Ms=new v(100,100).u(),this.dg=!1,this.Nn=!0,this.Fe=!1,this.gg=100,this.mg=300,this.pg=1,this.Vf=1e3,this.yg=10,this.wg=Math,this.zf=.05,this.Xf=50,this.Yf=150,this.Kf=0,this.xg=10,this.bg=5,this.Gf=NaN,this.Za=10,t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Ms.a(this.Ms),t.dg=this.dg,t.Nn=this.Nn,t.Fe=this.Fe,t.gg=this.gg,t.mg=this.mg,t.pg=this.pg,t.Vf=this.Vf,t.yg=this.yg,t.wg=this.wg,t.zf=this.zf,t.Xf=this.Xf,t.Yf=this.Yf,t.Kf=this.Kf,t.xg=this.xg,t.bg=this.bg,t.Gf=this.Gf,t.Za=this.Za}createNetwork(){return new ti(this)}doLayout(t){this.network=this.makeNetwork(t);let e=this.network.vertexes.iterator;const i=this.maxIterations;if(this.network.vertexes.count>0){for(this.network.deleteSelfEdges(),e=this.network.vertexes.iterator;e.next();){const t=e.value;t.charge=this.electricalCharge(t),t.mass=this.gravitationalMass(t)}const t=this.network.edges.iterator;for(;t.next();){const e=t.value;e.stiffness=this.springStiffness(e),e.length=this.springLength(e)}if(this.$N(),this.Rh=0,this.needsPrelayout()){const t=this.network,e=t.splitIntoSubNetworks(!1);let i=e.iterator;for(;i.next();){const t=i.value;this.doConnectedSubnetLayout(t)}for(i=e.iterator,this.rI(i,t),i=e.iterator;i.next();){const e=i.value,n=e.vertexes.iterator;for(;n.next();){const e=n.value;t.addVertex(e)}const s=e.edges.iterator;for(;s.next();){const e=s.value;t.addEdge(e)}}}else this.pD(this.network,this.maxIterations);this.updateParts()}this.maxIterations=i,this.isValidLayout=!0}needsPrelayout(){if(null===this.network||this.network.vertexes.count<3)return!1;let t=0,e=0;const i=this.network.vertexes.first().bounds,n=this.network.vertexes.iterator;for(;n.next();){const s=n.value,r=s.bounds;if(isNaN(s.x)||isNaN(s.y)||r.intersectsRect(i)&&(t++,t>2))return!0;if(e>10)return!1;e++}return!1}doConnectedSubnetLayout(t){let e=t.vertexes.iterator;for(;e.next();){const t=e.value;t.hierarchicalVertexes.add(t)}let i=t,n=this.Gf;if(isNaN(n)&&(n=t.edges.count/t.vertexes.count),n<t.vertexes.count)for(;i.vertexes.count>Math.max(100,Math.sqrt(n*t.vertexes.count));)i=this.coarsenNetwork(i);let s=0;e=i.vertexes.iterator;let r=this.randomNumberGenerator;for(null===r&&(this.randomNumberGenerator=r=new ni(0));e.next();){e.value.idInCluster=s++;const t=10*(r.random()-.5),i=10*(r.random()-.5);this.isFixed(e.value)||(e.value.x=t,e.value.y=i);const n=e.value.hierarchicalVertexes.iterator;for(;n.next();)this.isFixed(n.value)||(n.value.x=t,n.value.y=i)}const o=this.computePairwiseDistances(i);this.lI(i,o,this.maxPrelayoutIterations,t.vertexes.count),this.pD(t,this.maxIterations)}computePairwiseDistances(t){const e=t.vertexes.count,i=new Array(e);for(let t=0;t<e;t++)i[t]=new Array(e).fill(-1),i[t][t]=0;const n=t.vertexes.iterator;let s=new Map,r=[];for(;n.next();){const t=n.value;for(r=[t],s=new Map,s.set(t.idInCluster,0);r.length>0;){const t=r.shift(),e=t.vertexes.iterator;for(;e.next();){const i=e.value;s.has(i.idInCluster)||(s.set(i.idInCluster,s.get(t.idInCluster)+1),r.push(i))}}for(let n=0;n<e;n++){const e=Math.min(i[t.idInCluster][n],i[n][t.idInCluster]),r=s.get(n);(e<0||r<e)&&(i[t.idInCluster][n]=r,i[n][t.idInCluster]=r)}}return i}coarsenNetwork(t){const e=this.createNetwork(),i=new Map;let n=0,s=t.vertexes.iterator;for(;s.next();)s.value.idInCluster=n++;for(s=t.vertexes.iterator;s.next();){const t=s.value;if(i.has(t.idInCluster))continue;let n=Number.MAX_SAFE_INTEGER,r=null;const o=t.vertexes.iterator;for(;o.next();){const t=o.value;i.has(t.idInCluster)||t.hierarchicalVertexes.length<n&&(n=t.hierarchicalVertexes.length,r=t)}const a=e.createVertex();a.hierarchicalVertexes.addAll(t.hierarchicalVertexes),null!=r&&a.hierarchicalVertexes.addAll(r.hierarchicalVertexes),i.set(t.idInCluster,a),null!=r&&i.set(r.idInCluster,a),e.addVertex(a)}const r=t.edges.iterator;for(;r.next();){const t=r.value,n=i.get(t.fromVertex.idInCluster),s=i.get(t.toVertex.idInCluster);if(n===s)continue;const o=e.createEdge();o.fromVertex=n||null,o.toVertex=s||null,e.addEdge(o)}return e}Cw(t,e){let i=!0;const n=t.vertexes.iterator;for(;n.next();){const t=n.value;i?(i=!1,e.set(t.bounds)):e.unionRect(t.bounds)}return e}rI(t,i){const n=this.arrangementSpacing,s=t.count;let r=!0,o=0,a=0;const l=e.et();for(let t=0;t<s+i.vertexes.count+2;t++)l[t]=null;let h=0;t.reset();const u=x.l();let c;for(;t.next();){const e=t.value;if(this.Cw(e,u),r)r=!1,o=u.x+u.width/2,a=u.y+u.height/2,l[0]=new y(u.x+u.width+n.width,u.y),l[1]=new y(u.x,u.y+u.height+n.height),h=2;else{const t=this.yD(l,h,o,a,u.width,u.height,n),i=l[t],s=new y(i.x+u.width+n.width,i.y),r=new y(i.x,i.y+u.height+n.height);t+1<h&&l.splice(t+1,0,null),l[t]=s,l[t+1]=r,h++;const d=i.x-u.x,f=i.y-u.y;for(c=e.vertexes.iterator;c.next();){const t=c.value;this.isFixed(t)||(t.centerX+=d,t.centerY+=f)}}}for(x.e(u),c=i.vertexes.iterator;c.next();){const t=c.value,e=t.bounds;if(h<2){o=e.x+e.width/2,a=e.y+e.height/2,l[0]=new y(e.x+e.width+n.width,e.y),l[1]=new y(e.x,e.y+e.height+n.height),h=2;continue}const i=this.yD(l,h,o,a,e.width,e.height,n),s=l[i],r=new y(s.x+e.width+n.width,s.y),u=new y(s.x,s.y+e.height+n.height);i+1<h&&l.splice(i+1,0,null),l[i]=r,l[i+1]=u,h++,this.isFixed(t)||(t.centerX=s.x+t.width/2,t.centerY=s.y+t.height/2)}e.J(l)}yD(t,e,i,n,s,r,o){let a=9e19,l=-1;t:for(let h=0;h<e;h++){const u=t[h],c=u.x-i,d=u.y-n,f=c*c+d*d;if(f<a){for(let e=h-1;e>=0;e--)if(t[e].y>u.y&&t[e].x-u.x<s+o.width)continue t;for(let i=h+1;i<e;i++)if(t[i].x>u.x&&t[i].y-u.y<r+o.height)continue t;l=h,a=f}}return l}$N(){if(!this.comments)return;const t=this.network.vertexes.iterator;for(;t.next();){const e=t.value;this.addComments(e)}}addComments(t){const e=t.node;if(null!==e){const i=e.findNodesConnected();for(;i.next();){const e=i.value;if("Comment"!==e.category||!e.isVisible())continue;let n=this.network.findVertex(e);null===n&&(n=this.network.addNode(e)),n.charge=this.defaultCommentElectricalCharge;let s=null;const r=n.destinationEdges;for(;r.next();){const e=r.value;if(e.toVertex===t){s=e;break}}if(null===s){const e=n.sourceEdges;for(;e.next();){const i=e.value;if(i.fromVertex===t){s=i;break}}}null===s&&(s=this.network.linkVertexes(t,n,null)),s.length=this.defaultCommentSpringLength}}}ZN(t,e){const i=t.bounds,n=i.x,s=i.y,r=i.width,o=i.height,a=e.bounds,l=a.x,h=a.y,u=a.width,c=a.height;if(n+r<l){if(s>h+c){const t=n+r-l,e=s-h-c;return S.kw(t*t+e*e)}if(s+o<h){const t=n+r-l,e=s+o-h;return S.kw(t*t+e*e)}return l-(n+r)}if(n>l+u){if(s>h+c){const t=n-l-u,e=s-h-c;return S.kw(t*t+e*e)}if(s+o<h){const t=n-l-u,e=s+o-h;return S.kw(t*t+e*e)}return n-(l+u)}return s>h+c?s-(h+c):s+o<h?h-(s+o):.1}pD(t,e){const i=this.Rh+e;for(;this.Rh<i&&(this.Rh++,this.hI(t)););}hI(t){const e=t.vertexes.toArray();if(e.length<=0)return!1;const i=e[0];i.forceX=0,i.forceY=0;let n=i.centerX,s=n,r=i.centerY,o=r;for(let t=1;t<e.length;t++){const i=e[t];i.forceX=0,i.forceY=0;const a=i.centerX,l=i.centerY;n=Math.min(n,a),s=Math.max(s,a),r=Math.min(r,l),o=Math.max(o,l)}const a=s-n>o-r;a?e.sort(((t,e)=>null===t||null===e||t===e?0:t.centerX-e.centerX)):e.sort(((t,e)=>null===t||null===e||t===e?0:t.centerY-e.centerY));const l=this.Vf;let h=0,u=0,c=0;for(let t=0;t<e.length;t++){const i=e[t],n=i.bounds,s=i.focus,r=n.x+s.x,o=n.y+s.y;u=i.charge*this.electricalFieldX(r,o),c=i.charge*this.electricalFieldY(r,o),u+=i.mass*this.gravitationalFieldX(r,o),c+=i.mass*this.gravitationalFieldY(r,o),i.forceX+=u,i.forceY+=c;for(let n=t+1;n<e.length;n++){const s=e[n];if(!this.shouldInteract(i,s)||n===t)continue;const d=s.bounds,f=s.focus,p=d.x+f.x,g=d.y+f.y;if(r-p>l||p-r>l){if(a)break;continue}if(o-g>l||g-o>l){if(!a)break;continue}const m=this.ZN(i,s),y=2*i.charge,v=2*s.charge;if(m>1)h=y*v/(m*m),u=h*(r-p)/m,c=h*(o-g)/m;else{let t=this.randomNumberGenerator;null===t&&(this.randomNumberGenerator=t=new ni(0));const e=t.random(),n=t.random();if(r>p)u=Math.abs(s.bounds.right-i.bounds.x),u=y*v*(1+u)*e;else if(r<p)u=Math.abs(s.bounds.x-i.bounds.right),u=-y*v*(1+u)*e;else{const t=Math.max(s.width,i.width);u=y*v*((1+t)*e-t/2)}if(o>g)c=Math.abs(s.bounds.bottom-i.bounds.y),c=y*v*(1+c)*n;else if(r<p)c=Math.abs(s.bounds.y-i.bounds.bottom),c=-y*v*(1+c)*n;else{const t=Math.max(s.height,i.height);c=y*v*((1+t)*n-t/2)}}i.forceX+=u,i.forceY+=c,s.forceX-=u,s.forceY-=c}}const d=t.edges.iterator;for(;d.next();){const t=d.value,e=t.fromVertex,i=t.toVertex,n=e.bounds,s=e.focus,r=n.x+s.x,o=n.y+s.y,a=i.bounds,l=i.focus,f=a.x+l.x,p=a.y+l.y,g=this.ZN(e,i);g>1&&(h=.1*t.stiffness*(g-t.length),u=.5*h*(e.width+i.height)*(r-f)/g,c=.5*h*(e.width+i.height)*(o-p)/g),e.forceX-=u,e.forceY-=c,i.forceX+=u,i.forceY+=c}let f=0;for(let t=0;t<e.length;t++){const i=e[t];this.isFixed(i)?this.moveFixedVertex(i):f=Math.max(f,this.moveVertex(i)||0)}return f>this.epsilonDistance*this.epsilonDistance}lI(t,e,i,n){const s=this.Rh+i,r=Math.sqrt(n);this.Vy=this.Za*t.vertexes.count;const o=t.vertexes.toArray();let a=0,l=0,h=0;for(;this.Rh<s;){this.Rh++,l=a,a=0;for(let t=0;t<o.length;t++){o[t].forceX=0,o[t].forceY=0;for(let i=0;i<o.length;i++){if(t===i)continue;const n=this.ZN(o[t],o[i]),s=e[o[t].idInCluster][o[i].idInCluster],a=(n-this.Za*r*s)/n;o[t].forceX+=a*(o[i].x-o[t].x),o[t].forceY+=a*(o[i].y-o[t].y)}const i=Math.sqrt(o[t].forceX*o[t].forceX+o[t].forceY*o[t].forceY);if(i>0){o[t].forceX=this.Vy*o[t].forceX/i,o[t].forceY=this.Vy*o[t].forceY/i,this.isFixed(o[t])||(o[t].x+=o[t].forceX,o[t].y+=o[t].forceY);const e=o[t].hierarchicalVertexes.iterator;for(;e.next();){const i=e.value;this.isFixed(i)||(i.centerX+=o[t].forceX,i.centerY+=o[t].forceY)}}a+=i*i}if(a>=l){if(h++,h>=5)break}else h=0;this.Vy*=.95}}moveVertex(t){let e=t.forceX,i=t.forceY;const n=this.moveLimit;return e<-n?e=-n:e>n&&(e=n),i<-n?i=-n:i>n&&(i=n),t.centerX+=e,t.centerY+=i,e*e+i*i}shouldInteract(t,e){return!0}moveFixedVertex(t){}commitLayout(){this.zy(),this.commitNodes(),this.isRouting&&this.commitLinks()}zy(){if(!this.setsPortSpots)return;const t=this.network.edges.iterator;for(;t.next();){const e=t.value.link;null!==e&&(e.fromSpot=w.Default,e.toSpot=w.Default)}}commitNodes(){let t=0,e=0;if(this.arrangesToOrigin){const i=x.l();this.Cw(this.network,i);const n=this.arrangementOrigin;t=n.x-i.x,e=n.y-i.y,x.e(i)}const i=x.l(),n=this.network.vertexes.iterator;for(;n.next();){const s=n.value;(0!==t||0!==e)&&(i.a(s.bounds),i.x+=t,i.y+=e,s.bounds=i),s.commit()}x.e(i)}commitLinks(){const t=this.network.edges.iterator;for(;t.next();)t.value.commit()}springStiffness(t){const e=t.stiffness;return isNaN(e)?this.zf:e}springLength(t){const e=t.length;return isNaN(e)?this.Xf:e}electricalCharge(t){const e=t.charge;return isNaN(e)?this.Yf:e}electricalFieldX(t,e){return 0}electricalFieldY(t,e){return 0}gravitationalMass(t){const e=t.mass;return isNaN(e)?this.Kf:e}gravitationalFieldX(t,e){return 0}gravitationalFieldY(t,e){return 0}isFixed(t){return t.isFixed}get currentIteration(){return this.Rh}get arrangementSpacing(){return this.Ms}set arrangementSpacing(t){this.Ms.equals(t)||(this.Ms.a(t),this.invalidateLayout())}get arrangesToOrigin(){return this.dg}set arrangesToOrigin(t){this.dg!==t&&(e.s(t,"boolean",Qe,"arrangesToOrigin"),this.dg=t,this.invalidateLayout())}get setsPortSpots(){return this.Nn}set setsPortSpots(t){this.Nn!==t&&(e.s(t,"boolean",Qe,"setsPortSpots"),this.Nn=t,this.invalidateLayout())}get comments(){return this.Fe}set comments(t){this.Fe!==t&&(e.s(t,"boolean",Qe,"comments"),this.Fe=t,this.invalidateLayout())}get maxPrelayoutIterations(){return this.gg}set maxPrelayoutIterations(t){this.gg!==t&&(e.s(t,"number",Qe,"maxPrelayoutIterations"),t>=0&&(this.gg=t,this.invalidateLayout()))}get maxIterations(){return this.mg}set maxIterations(t){this.mg!==t&&(e.s(t,"number",Qe,"maxIterations"),t>=0&&(this.mg=t,this.invalidateLayout()))}get epsilonDistance(){return this.pg}set epsilonDistance(t){this.pg!==t&&(e.s(t,"number",Qe,"epsilonDistance"),t>0&&(this.pg=t,this.invalidateLayout()))}get infinityDistance(){return this.Vf}set infinityDistance(t){this.Vf!==t&&(e.s(t,"number",Qe,"infinityDistance"),t>1&&(this.Vf=t,this.invalidateLayout()))}get moveLimit(){return this.yg}set moveLimit(t){this.yg!==t&&(e.s(t,"number",Qe,"moveLimit"),this.yg=t,this.invalidateLayout())}get randomNumberGenerator(){return this.wg}set randomNumberGenerator(t){this.wg!==t&&(null!==t&&!e.it(t.random)&&e.o('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.wg=t)}get defaultSpringStiffness(){return this.zf}set defaultSpringStiffness(t){this.zf!==t&&(e.s(t,"number",Qe,"defaultSpringStiffness"),this.zf=t,this.invalidateLayout())}get defaultSpringLength(){return this.Xf}set defaultSpringLength(t){this.Xf!==t&&(e.s(t,"number",Qe,"defaultSpringLength"),this.Xf=t,this.invalidateLayout())}get defaultElectricalCharge(){return this.Yf}set defaultElectricalCharge(t){this.Yf!==t&&(e.s(t,"number",Qe,"defaultElectricalCharge"),this.Yf=t,this.invalidateLayout())}get defaultGravitationalMass(){return this.Kf}set defaultGravitationalMass(t){this.Kf!==t&&(e.s(t,"number",Qe,"defaultGravitationalMass"),this.Kf=t,this.invalidateLayout())}get defaultCommentSpringLength(){return this.xg}set defaultCommentSpringLength(t){this.xg!==t&&(e.s(t,"number",Qe,"defaultCommentSpringLength"),this.xg=t,this.invalidateLayout())}get defaultCommentElectricalCharge(){return this.bg}set defaultCommentElectricalCharge(t){this.bg!==t&&(e.s(t,"number",Qe,"defaultCommentElectricalCharge"),this.bg=t,this.invalidateLayout())}get prelayoutQuality(){return this.Gf}set prelayoutQuality(t){this.Gf!==t&&(e.s(t,"number",Qe,"prelayoutQuality"),this.Gf=t,this.invalidateLayout())}get prelayoutSpread(){return this.Za}set prelayoutSpread(t){this.Za!==t&&(e.s(t,"number",Qe,"prelayoutSpread"),this.Za=t,this.invalidateLayout())}}class ti extends De{constructor(t){super(t)}createVertex(){return new ei(this)}createEdge(){return new ii(this)}}class ei extends Le{J1;$1;Z1;Q1;_1;hierarchicalVertexes;idInCluster;constructor(t){super(t),this.J1=!1,this.$1=NaN,this.Z1=NaN,this.Q1=0,this._1=0,this.hierarchicalVertexes=new l,this.idInCluster=-1}get isFixed(){return this.J1}set isFixed(t){this.J1!==t&&(e.s(t,"boolean",ei,"isFixed"),this.J1=t)}get charge(){return this.$1}set charge(t){this.$1!==t&&(e.s(t,"number",ei,"charge"),this.$1=t)}get mass(){return this.Z1}set mass(t){this.Z1!==t&&(e.s(t,"number",ei,"mass"),this.Z1=t)}get forceX(){return this.Q1}set forceX(t){this.Q1!==t&&(e.s(t,"number",ei,"forceX"),this.Q1=t)}get forceY(){return this._1}set forceY(t){this._1!==t&&(e.s(t,"number",ei,"forceY"),this._1=t)}}class ii extends Ee{tk;ik;constructor(t){super(t),this.tk=NaN,this.ik=NaN}get stiffness(){return this.tk}set stiffness(t){this.tk!==t&&(e.s(t,"number",ii,"stiffness"),this.tk=t)}get length(){return this.ik}set length(t){this.ik!==t&&(e.s(t,"number",ii,"length"),this.ik=t)}}class ni{I;R;Q;M;A;seed;constructor(t){void 0===t&&(t=42),this.seed=t,this.A=48271,this.M=2147483647,this.Q=this.M/this.A,this.R=this.M%this.A,this.I=1/this.M,this.random()}random(){const t=this.seed/this.Q,e=this.seed%this.Q,i=this.A*e-this.R*t;return this.seed=i>0?i:i+this.M,this.seed*this.I}}var si=(t=>(t[t.DepthFirst=0]="DepthFirst",t[t.Greedy=1]="Greedy",t[t.FromLayers=2]="FromLayers",t))(si||{}),ri=(t=>(t[t.OptimalLinkLength=10]="OptimalLinkLength",t[t.LongestPathSink=11]="LongestPathSink",t[t.LongestPathSource=12]="LongestPathSource",t))(ri||{}),oi=(t=>(t[t.DepthFirstOut=20]="DepthFirstOut",t[t.DepthFirstIn=21]="DepthFirstIn",t[t.Naive=22]="Naive",t))(oi||{}),ai=(t=>(t[t.None=30]="None",t[t.Less=31]="Less",t[t.More=32]="More",t))(ai||{}),li=(t=>(t[t.None=0]="None",t[t.Expand=1]="Expand",t[t.Straighten=2]="Straighten",t[t.Median=4]="Median",t[t.MaybeExpand=8]="MaybeExpand",t[t.All=15]="All",t))(li||{}),hi=(t=>(t[t.None=0]="None",t[t.UpperLeft=1]="UpperLeft",t[t.UpperRight=2]="UpperRight",t[t.LowerLeft=4]="LowerLeft",t[t.LowerRight=8]="LowerRight",t[t.All=15]="All",t))(hi||{});class ui extends Ne{Ns;Wi;b;Hf;jf;qf;Qa;Wf;Qo;Jf;Nn;kt;Xy;zt;kg;Cs;ci;Zs;Ls;As;It;Pg;_a;Sg;Qs;$f;_o;Cn;Ln;QN;constructor(t){super(),this.Ns=25,this.Wi=25,this.b=0,this.Hf=0,this.jf=10,this.qf=20,this.Qa=4,this.Wf=31,this.Qo=15,this.Jf=10,this.Nn=!0,this.kt=-1,this.Xy=-1,this.zt=-1,this.kg=0,this.Cs=0,this.ci=null,this.Zs=null,this.Ls=null,this.As=null,this.It=null,this.Pg=0,this._a=null,this.Sg=null,this.Qs=0,this.$f=null,this._o=new y,this.Cn=[],this.Cn.length=100,this.Ln=15,this.QN=0,t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Ns=this.Ns,t.Wi=this.Wi,t.b=this.b,t.Hf=this.Hf,t.jf=this.jf,t.qf=this.qf,t.Qa=this.Qa,t.Wf=this.Wf,t.Qo=this.Qo,t.Jf=this.Jf,t.Nn=this.Nn,t.Ln=this.Ln}oi(t){t in ai?this.aggressiveOption=t:t in si?this.cycleRemoveOption=t:t in oi?this.initializeOption=t:t in ri?this.layeringOption=t:super.oi(t)}createNetwork(){return new ci(this)}doLayout(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.aI(),this.network.vertexes.count>0&&(this.network.deleteSelfEdges(),2!==this.cycleRemoveOption&&this.removeCycles(),this.cI(),2===this.cycleRemoveOption&&this.removeCycles(),this.fI(),this.uI(),this.dI(),this.reduceCrossings(),this.straightenAndPack(),this.updateParts()),this.network=null,this.isValidLayout=!0}linkMinLength(t){return 1}linkLengthWeight(t){return 1}linkStraightenWeight(t){const e=t.fromVertex.node||t.fromVertex.data,i=t.toVertex.node||t.toVertex.data;return null===e&&null===i?8:null===e||null===i?4:1}nodeMinLayerSpace(t,e){return null===t.node&&null===t.data?0:90===this.b||270===this.b?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10}nodeMinColumnSpace(t,e){if(null===t.node&&null===t.data)return 0;const i=e?t.ek:t.sk;if(null!==i)return i;const n=this.b;return 90===n||270===n?e?t.ek=t.focus.x/this.Wi+1|0:t.sk=(t.bounds.width-t.focus.x)/this.Wi+1|0:e?t.ek=t.focus.y/this.Wi+1|0:t.sk=(t.bounds.height-t.focus.y)/this.Wi+1|0}Ji(){null===this._a&&(this._a=[]);let t=0;const e=this.network.vertexes.iterator;for(;e.next();){const i=e.value;this._a[t]=i.layer,t++,this._a[t]=i.column,t++,this._a[t]=i.index,t++}return this._a}We(t){let e=0;const i=this.network.vertexes.iterator;for(;i.next();){const n=i.value;n.layer=t[e],e++,n.column=t[e],e++,n.index=t[e],e++}}wD(t,e){const i=this.vh(t),n=this.ci[t];(null===this.Sg||this.Sg.length<n*n)&&(this.Sg=[]);const s=this.Sg;for(let r=0;r<n;r++){let o=0;const a=i[r],l=a.near;let h=0;null!==l&&l!==a&&l.layer===a.layer&&(o+=Math.max(0,Math.abs(l.index-a.index)-1));let u,c,d,f,p,g=0,m=0,y=0,v=0,x=0,b=0,w=0,k=0;if(e>=0)for(u=i[r].fo,g=0;g<u.length;g++)if(c=u[g],c.valid&&c.fromVertex.layer!==t)for(m=c.fromVertex.index,y=c.portToPos,v=c.portFromPos,x=g+1;x<u.length;x++)f=u[x],f.valid&&f.fromVertex.layer!==t&&(b=f.fromVertex.index,w=f.portToPos,k=f.portFromPos,y<w&&(m>b||m===b&&v>k)&&o++,w<y&&(b>m||b===m&&k>v)&&o++);if(e<=0)for(u=i[r].Wo,g=0;g<u.length;g++)if(c=u[g],c.valid&&c.toVertex.layer!==t)for(m=c.toVertex.index,y=c.portToPos,v=c.portFromPos,x=g+1;x<u.length;x++)f=u[x],f.valid&&f.toVertex.layer!==t&&(b=f.toVertex.index,w=f.portToPos,k=f.portFromPos,v<k&&(m>b||m===b&&y>w)&&o++,k<v&&(b>m||b===m&&w>y)&&o++);for(s[r*n+r]=o,h=r+1;h<n;h++){let o=0,a=0;if(e>=0)for(d=i[r].fo,p=i[h].fo,g=0;g<d.length;g++)if(c=d[g],c.valid&&c.fromVertex.layer!==t)for(m=c.fromVertex.index,y=c.portToPos,v=c.portFromPos,x=0;x<p.length;x++)f=p[x],f.valid&&f.fromVertex.layer!==t&&(b=f.fromVertex.index,w=f.portToPos,k=f.portFromPos,(m<b||m===b&&v<k)&&a++,(b<m||b===m&&k<v)&&o++);if(e<=0)for(d=i[r].Wo,p=i[h].Wo,g=0;g<d.length;g++)if(c=d[g],c.valid&&c.toVertex.layer!==t)for(m=c.toVertex.index,y=c.portToPos,v=c.portFromPos,x=0;x<p.length;x++)f=p[x],f.valid&&f.toVertex.layer!==t&&(b=f.toVertex.index,w=f.portToPos,k=f.portFromPos,(m<b||m===b&&y<w)&&a++,(b<m||b===m&&w<y)&&o++);s[r*n+h]=o,s[h*n+r]=a}}return this.Oh(t,i),s}countCrossings(){let t=0;for(let e=0;e<=this.kt;e++){const i=this.wD(e,1),n=this.ci[e];for(let e=0;e<n;e++)for(let s=e;s<n;s++)t+=i[e*n+s]}return t}gI(t,e,i){const n=this.vh(t),s=this.ci[t];let r=0;for(let o=0;o<s;o++){let s=null;e<=0&&(s=n[o].fo);let a=null;e>=0&&(a=n[o].Wo);let l,h=0,u=0;if(null!==s)for(let e=0;e<s.length;e++)l=s[e],l.valid&&l.fromVertex.layer!==t&&(h=l.fromVertex.column+l.portFromColOffset,u=l.toVertex.column+l.portToColOffset,r+=i?Math.abs(h-u)*this.linkStraightenWeight(l):Math.abs(h-u));if(null!==a)for(let e=0;e<a.length;e++)l=a[e],l.valid&&l.toVertex.layer!==t&&(h=l.fromVertex.column+l.portFromColOffset,u=l.toVertex.column+l.portToColOffset,r+=i?(Math.abs(h-u)+1)*this.linkStraightenWeight(l):Math.abs(h-u))}return this.Oh(t,n),r}nk(t){let e=0;for(let i=0;i<=this.kt;i++)e+=this.gI(i,1,t);return e}Yy(){let t=1/0;this.zt=-1;const e=this.network.vertexes.iterator;for(;e.next();){const i=e.value;t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0)),this.zt=Math.max(this.zt,i.column+this.nodeMinColumnSpace(i,!1))}for(e.reset();e.next();){e.value.column-=t}this.zt-=t}Ky(t,e){const i=this.vh(t),n=this.ci[t],s=[];for(let r=0;r<n;r++){const n=i[r];let o=null;e<=0&&(o=n.fo);let a=null;e>=0&&(a=n.Wo);let l=0,h=0;const u=n.near;let c;if(null!==u&&u.layer===n.layer&&(l+=u.column-1,h++),null!==o)for(let e=0;e<o.length;e++){c=o[e];const i=c.fromVertex;c.valid&&!c.rev&&i.layer!==t&&(l+=i.column,h++)}if(null!==a)for(let e=0;e<a.length;e++){c=a[e];const i=c.toVertex;c.valid&&!c.rev&&i.layer!==t&&(l+=i.column,h++)}s[r]=0===h?-1:l/h}return this.Oh(t,i),s}xD(t,e){const i=this.vh(t),n=this.ci[t],s=[];for(let r=0;r<n;r++){const n=i[r];let o=null;e<=0&&(o=n.fo);let a=null;e>=0&&(a=n.Wo);let l=0;const h=[],u=n.near;let c;if(null!==u&&u.layer===n.layer&&(h[l]=u.column-1,l++),null!==o)for(let e=0;e<o.length;e++){c=o[e];const i=c.fromVertex;c.valid&&!c.rev&&i.layer!==t&&(h[l]=i.column+c.portFromColOffset,l++)}if(null!==a)for(let e=0;e<a.length;e++){c=a[e];const i=c.toVertex;c.valid&&!c.rev&&i.layer!==t&&(h[l]=i.column+c.portToColOffset,l++)}if(0===l)s[r]=-1;else{h.sort(((t,e)=>t-e));const t=l>>1;s[r]=1&l?h[t]:h[t-1]+h[t]>>1}}return this.Oh(t,i),s}Gy(t,e,i,n,s){if(t.component===i){t.component=e;let r=0,o=0;if(n){const a=t.destinationEdges;for(;a.next();){const l=a.value,h=l.toVertex;r=t.layer-h.layer,o=this.linkMinLength(l),r===o&&this.Gy(h,e,i,n,s)}}if(s){const a=t.sourceEdges;for(;a.next();){const l=a.value,h=l.fromVertex;r=h.layer-t.layer,o=this.linkMinLength(l),r===o&&this.Gy(h,e,i,n,s)}}}}_N(t,e,i,n,s){if(t.component===i){if(t.component=e,n){const r=t.destinationEdges;for(;r.next();){const t=r.value.toVertex;this._N(t,e,i,n,s)}}if(s){const r=t.sourceEdges;for(;r.next();){const t=r.value.fromVertex;this._N(t,e,i,n,s)}}}}removeCycles(){const t=this.network.edges.iterator;for(;t.next();){t.value.rev=!1}switch(this.Hf){default:case 1:this.mI();break;case 0:this.pI();break;case 2:this.yI()}}yI(){const t=this.network,e=t.vertexes.iterator;let i=1/0;for(;e.next();){const t=e.value;i=Math.min(i,t.layer)}if(i<1/0){if(i<0)for(e.reset();e.next();){e.value.layer-=i}const n=[];for(e.reset();e.next();){const t=e.value,i=n[t.layer];void 0===i?n[t.layer]=[t]:i.push(t)}let s=0;for(let t=0;t<n.length;t++){const e=n[t];if(e&&0!==e.length){if(t>0)for(let t=0;t<e.length;t++){e[t].layer-=s}}else s++}const r=t.edges.iterator;for(;r.next();){const e=r.value,i=e.fromVertex,n=e.toVertex;i.layer<n.layer&&(t.reverseEdge(e),e.rev=!0)}}}mI(){const t=this.network;let e=0,i=t.vertexes.count-1;const n=[];n.length=i+1;const s=t.vertexes.iterator;for(;s.next();){s.value.$i=!0}for(;null!==this.wI(t);){let s;for(s=this.bD(t);null!==s;)n[i]=s,i--,s.$i=!1,s=this.bD(t);for(s=this.kD(t);null!==s;)n[e]=s,e++,s.$i=!1,s=this.kD(t);s=this.xI(t),null!==s&&(n[e]=s,e++,s.$i=!1)}for(let e=0;e<t.vertexes.count;e++)n[e].index=e;const r=t.edges.iterator;for(;r.next();){const e=r.value,i=e.fromVertex,n=e.toVertex;i.index>n.index&&(t.reverseEdge(e),e.rev=!0)}}wI(t){const e=t.vertexes.iterator;for(;e.next();){const t=e.value;if(t.$i)return t}return null}bD(t){const e=t.vertexes.iterator;for(;e.next();){const t=e.value;if(t.$i){let e=!0;const i=t.destinationEdges;for(;i.next();)if(i.value.toVertex.$i){e=!1;break}if(e)return t}}return null}kD(t){const e=t.vertexes.iterator;for(;e.next();){const t=e.value;if(t.$i){let e=!0;const i=t.sourceEdges;for(;i.next();)if(i.value.fromVertex.$i){e=!1;break}if(e)return t}}return null}xI(t){let e=null,i=0;const n=this.network.vertexes.iterator;for(;n.next();){const t=n.value;if(t.$i){let n=0;const s=t.destinationEdges;for(;s.next();)s.value.toVertex.$i&&n++;let r=0;const o=t.sourceEdges;for(;o.next();)o.value.fromVertex.$i&&r++;(null===e||i<n-r)&&(e=t,i=n-r)}}return e}pI(){const t=this.network.vertexes.iterator;for(;t.next();){const e=t.value;e.Zf=-1,e.Xn=-1}const e=this.network.edges.iterator;for(;e.next();){e.value.forest=!1}for(this.Pg=0,t.reset();t.next();){const e=t.value;0===e.sourceEdges.count&&this.tC(e)}for(t.reset();t.next();){const e=t.value;-1===e.Zf&&this.tC(e)}for(e.reset();e.next();){const t=e.value;if(!t.forest){const e=t.fromVertex,i=e.Zf,n=e.Xn,s=t.toVertex,r=s.Zf,o=s.Xn;r<i&&n<o&&(this.network.reverseEdge(t),t.rev=!0)}}}tC(t){t.Zf=this.Pg,this.Pg++;const e=t.destinationEdges;for(;e.next();){const t=e.value,i=t.toVertex;-1===i.Zf&&(t.forest=!0,this.tC(i))}t.Xn=this.Pg,this.Pg++}cI(){const t=this.network.vertexes.iterator;for(;t.next();){t.value.layer=-1}for(this.kt=-1,this.assignLayers(),t.reset();t.next();){const e=t.value;this.kt=Math.max(this.kt,e.layer)}}assignLayers(){switch(this.jf){case 11:this.PD();break;case 12:this.bI();break;default:this.kI()}}PD(){const t=this.network.vertexes.iterator;for(;t.next();){const e=t.value,i=this.SD(e);this.kt=Math.max(i,this.kt)}}SD(t){let e=0;if(-1===t.layer){const i=t.destinationEdges;for(;i.next();){const t=i.value,n=t.toVertex,s=this.linkMinLength(t);e=Math.max(e,this.SD(n)+s)}t.layer=e}else e=t.layer;return e}bI(){let t=0;const e=this.network.vertexes.iterator;for(;e.next();){const i=e.value;t=this.MD(i),this.kt=Math.max(t,this.kt)}for(e.reset();e.next();){const t=e.value;t.layer=this.kt-t.layer}}MD(t){let e=0;if(-1===t.layer){const i=t.sourceEdges;for(;i.next();){const t=i.value,n=t.fromVertex,s=this.linkMinLength(t);e=Math.max(e,this.MD(n)+s)}t.layer=e}else e=t.layer;return e}kI(){this.PD();const t=this.network.vertexes.iterator;for(;t.next();){t.value.$i=!1}for(t.reset();t.next();){const e=t.value;0===e.sourceEdges.count&&this.ND(e)}let e=1/0;for(t.reset();t.next();){const i=t.value;e=Math.min(e,i.layer)}for(this.kt=-1,t.reset();t.next();){const i=t.value;i.layer-=e,this.kt=Math.max(this.kt,i.layer)}}ND(t){if(!t.$i){t.$i=!0;const e=t.destinationEdges;for(;e.next();){const t=e.value.toVertex;this.ND(t)}this.SI(t),this.MI(t)}}SI(t){const e=this.network.vertexes.iterator;for(;e.next();){e.value.component=-1}const i=t.fo;let n=i.length;for(let t=0;t<n;t++){const e=i[t],n=e.fromVertex,s=e.toVertex,r=this.linkMinLength(e);n.layer-s.layer>r&&this.Gy(n,0,-1,!0,!1)}for(this.Gy(t,1,-1,!0,!0);0!==t.component;){let i=0,s=1/0,r=0,o=null;const a=this.network.vertexes.iterator;for(;a.next();){const t=a.value;if(1===t.component){let e=0,a=!1;const l=t.fo;n=l.length;for(let r=0;r<n;r++){const n=l[r],o=n.fromVertex;if(e+=this.linkLengthWeight(n),1!==o.component){i+=this.linkLengthWeight(n);const e=o.layer-t.layer,r=this.linkMinLength(n);s=Math.min(s,e-r)}}const h=t.Wo;n=h.length;for(let t=0;t<n;t++){const n=h[t],s=n.toVertex;e-=this.linkLengthWeight(n),1!==s.component?i-=this.linkLengthWeight(n):a=!0}(null===o||e<r)&&!a&&(o=t,r=e)}}if(i>0){for(e.reset();e.next();){const t=e.value;1===t.component&&(t.layer+=s)}t.component=0}else o.component=0}}MI(t){const e=this.network.vertexes.iterator;for(;e.next();){e.value.component=-1}for(this.Gy(t,1,-1,!0,!1);0!==t.component;){let i=0,n=1/0,s=0,r=null;const o=this.network.vertexes.iterator;for(;o.next();){const t=o.value;if(1===t.component){let e=0,o=!1;const a=t.fo;let l=a.length;for(let t=0;t<l;t++){const n=a[t],s=n.fromVertex;e+=this.linkLengthWeight(n),1!==s.component?i+=this.linkLengthWeight(n):o=!0}const h=t.Wo;l=h.length;for(let s=0;s<l;s++){const r=h[s],o=r.toVertex;if(e-=this.linkLengthWeight(r),1!==o.component){i-=this.linkLengthWeight(r);const e=t.layer-o.layer,s=this.linkMinLength(r);n=Math.min(n,e-s)}}(null===r||e>s)&&!o&&(r=t,s=e)}}if(i<0){for(e.reset();e.next();){const t=e.value;1===t.component&&(t.layer-=n)}t.component=0}else r.component=0}}fI(){const t=this.network,e=[],i=t.edges.iterator;for(;i.next();){const t=i.value;t.valid=!1,e.push(t)}for(let i=0;i<e.length;i++){const n=e[i];let s=n.fromVertex;const r=n.toVertex;if(n.valid||(null===s.node&&null===s.data||null===r.node&&null===r.data)&&s.layer===r.layer)continue;let o=0,a=0,l=0,h=0;if(null!==n.link){const t=n.link;if(null===t)continue;const e=s.node,i=r.node;if(null===e||null===i)continue;let u=t.fromNode,c=t.toNode,d=t.fromPort;for(;null!==d&&!d.isVisibleObject();)d=d.panel;let f=t.toPort;for(;null!==f&&!f.isVisibleObject();)f=f.panel;if(n.rev){const t=u,e=d;u=c,d=f,c=t,f=e}const p=s.focus,g=r.focus,m=n.rev?r.bounds:s.bounds,v=y.l();e!==u?m.isReal()&&u.isVisible()?u.actualBounds.isReal()?(u.getRelativePoint(d,w.Center,v),v.x+=u.actualBounds.x-m.x,v.y+=u.actualBounds.y-m.y):(u.getRelativePoint(d,w.Center,v),v.isReal()||v.a(p)):v.a(p):m.isReal()?(u.getRelativePoint(d,w.Center,v),v.isReal()||v.a(p)):v.a(p);const x=n.rev?s.bounds:r.bounds,b=y.l();i!==c?x.isReal()&&c.isVisible()?c.actualBounds.isReal()?(c.getRelativePoint(f,w.Center,b),b.x+=c.actualBounds.x-x.x,b.y+=c.actualBounds.y-x.y):(c.getRelativePoint(f,w.Center,b),b.isReal()||b.a(g)):b.a(g):x.isReal()?(c.getRelativePoint(f,w.Center,b),b.isReal()||b.a(g)):b.a(g),90===this.b||270===this.b?(o=Math.round((v.x-p.x)/this.Wi),l=v.x,a=Math.round((b.x-g.x)/this.Wi),h=b.x):(o=Math.round((v.y-p.y)/this.Wi),l=v.y,a=Math.round((b.y-g.y)/this.Wi),h=b.y),y.e(v),y.e(b),n.portFromColOffset=o,n.portFromPos=l,n.portToColOffset=a,n.portToPos=h}else n.portFromColOffset=0,n.portFromPos=0,n.portToColOffset=0,n.portToPos=0;let u=s.layer;const c=r.layer,d=this.NI(n),f=1===d||3===d,p=2===d||3===d;let g,m,v,x=null;p&&(x=this.CI(s,r),v=1,m=t.createVertex(),m.node=null,m.ok=1,m.layer=u,m.near=s,t.addVertex(m),g=t.linkVertexes(s,m,n.link),g.valid=!1,g.rev=n.rev,g.portFromColOffset=o,g.portToColOffset=0,g.portFromPos=l,g.portToPos=0,s=m);let b=1;if(f&&b--,u-c>b&&u>0){for(n.valid=!1,m=t.createVertex(),m.node=null,m.ok=2,m.layer=u-1,x&&v<x.length&&m.layer===x[v].layer&&(m.near=x[v++]),t.addVertex(m),g=t.linkVertexes(s,m,n.link),g.valid=!0,g.rev=n.rev,g.portFromColOffset=p?0:o,g.portToColOffset=0,g.portFromPos=p?0:l,g.portToPos=0,s=m,u--;u-c>b&&u>0;)m=t.createVertex(),m.node=null,m.ok=3,m.layer=u-1,x&&v<x.length&&m.layer===x[v].layer&&(m.near=x[v++]),t.addVertex(m),g=t.linkVertexes(s,m,n.link),g.valid=!0,g.rev=n.rev,g.portFromColOffset=0,g.portToColOffset=0,g.portFromPos=0,g.portToPos=0,s=m,u--;g=t.linkVertexes(m,r,n.link),g.valid=!f,f&&(m.near=r),g.rev=n.rev,g.portFromColOffset=0,g.portToColOffset=a,g.portFromPos=0,g.portToPos=h}else n.valid=!0}}NI(t){let e=0;const i=t.link;if(null!==i){const n=i.fromPort,s=i.toPort;if(null!==n&&null!==s){const r=i.fromNode,o=i.toNode;if(null!==r&&null!==o){const a=this.rk(!0),l=this.rk(!1),h=this.setsPortSpots?a:i.computeSpot(!0,n),u=this.setsPortSpots?l:i.computeSpot(!1,s),c=i.isOrthogonal;if(h.isSide()&&h.includesSide(l)&&u.isSide()&&u.includesSide(a))return 0;const d=i.getLinkPoint(r,n,h,!0,c,o,s,y.l()),f=i.getLinkDirection(r,n,d,h,!0,c,o,s);y.e(d),(!h.isNone()&&f===this.CD(t,!0)||this.setsPortSpots&&null!==r&&1===r.ports.count&&t.rev)&&(e+=1);const p=i.getLinkPoint(o,s,u,!1,c,r,n,y.l()),g=i.getLinkDirection(o,s,p,u,!1,c,r,n);y.e(p),(!u.isNone()&&g===this.CD(t,!1)||this.setsPortSpots&&null!==o&&1===o.ports.count&&t.rev)&&(e+=2)}}}return e}CD(t,e){return 90===this.b?e&&!t.rev||!e&&t.rev?270:90:180===this.b?e&&!t.rev||!e&&t.rev?0:180:270===this.b?e&&!t.rev||!e&&t.rev?90:270:e&&!t.rev||!e&&t.rev?180:0}CI(t,e){const i=[];return i.push(e),this.LD(t,i)?i.reverse():[]}LD(t,e){const i=e[e.length-1].sourceEdges.iterator;for(;i.next();){const n=i.value;if(n.rev||!n.valid)continue;const s=n.fromVertex;if(e.push(s),s===t||this.LD(t,e))return!0;e.pop()}return!1}uI(){const t=this.ci=[];for(let e=0;e<=this.kt;e++)t[e]=0;const e=this.network.vertexes.iterator;for(;e.next();){e.value.index=-1}this.initializeIndices(),this.Xy=-1,this.kg=0,this.Cs=0;for(let e=0;e<=this.kt;e++)t[e]>t[this.Cs]&&(this.Xy=t[e]-1,this.Cs=e),t[e]<t[this.kg]&&(this.kg=e);this.$f=[];for(let e=0;e<t.length;e++)this.$f[e]=[];for(e.reset();e.next();){const t=e.value,i=t.layer;this.$f[i][t.index]=t}}initializeIndices(){switch(this.qf){default:case 22:this.LI();break;case 20:this.AI();break;case 21:this.TI()}}LI(){let t=null;const e=this.network.vertexes.iterator;for(;e.next();){const i=e.value;if(i.near&&(null===t&&(t=new Map),i.layer===i.near.layer)){const e=t.get(i.near)||[];e.push(i),t.set(i.near,e)}}for(e.reset();e.next();){const i=e.value;if(i.near)continue;const n=i.layer;if(i.index=this.ci[n],this.ci[n]++,!t)continue;const s=t.get(i);Array.isArray(s)&&s.forEach((t=>{t.index=this.ci[n],this.ci[n]++}))}}AI(){let t=null;const e=this.network.vertexes.iterator;for(;e.next();){const i=e.value;if(i.near&&(null===t&&(t=new Map),i.layer===i.near.layer)){const e=t.get(i.near)||[];e.push(i),t.set(i.near,e)}}for(let i=this.kt;i>=0;i--)for(e.reset();e.next();){const n=e.value;n.layer===i&&-1===n.index&&this.AD(n,t)}}AD(t,e){if(t.near)return;const i=t.layer;if(t.index=this.ci[i],this.ci[i]++,e){const n=e.get(t);Array.isArray(n)&&n.forEach((t=>{t.index=this.ci[i],this.ci[i]++}))}const n=t.Wo;let s=!0;for(;s;){s=!1;for(let t=0;t<n.length-1;t++){const e=n[t],i=n[t+1];e.portFromColOffset>i.portFromColOffset&&(s=!0,n[t]=i,n[t+1]=e)}}for(let t=0;t<n.length;t++){const i=n[t];if(i.valid){const t=i.toVertex;-1===t.index&&this.AD(t,e)}}}TI(){let t=null;const e=this.network.vertexes.iterator;for(;e.next();){const i=e.value;if(i.near&&(null===t&&(t=new Map),i.layer===i.near.layer)){const e=t.get(i.near)||[];e.push(i),t.set(i.near,e)}}for(let i=0;i<=this.kt;i++)for(e.reset();e.next();){const n=e.value;n.layer===i&&-1===n.index&&this.TD(n,t)}}TD(t,e){if(t.near)return;const i=t.layer;if(t.index=this.ci[i],this.ci[i]++,e){const n=e.get(t);Array.isArray(n)&&n.forEach((t=>{t.index=this.ci[i],this.ci[i]++}))}const n=t.fo;let s,r,o=!0,a=0;for(;o;)for(o=!1,a=0;a<n.length-1;a++){const t=n[a],e=n[a+1];t.portToColOffset>e.portToColOffset&&(o=!0,n[a]=e,n[a+1]=t)}for(a=0;a<n.length;a++)r=n[a],r.valid&&(s=r.fromVertex,-1===s.index&&this.TD(s,e))}dI(){this.zt=-1;for(let t=0;t<=this.kt;t++){const e=this.vh(t);let i=0;const n=this.ci[t];for(let t=0;t<n;t++){const n=e[t];i+=this.nodeMinColumnSpace(n,!0),n.column=i,i+=1,i+=this.nodeMinColumnSpace(n,!1)}this.zt=Math.max(this.zt,i-1),this.Oh(t,e)}}reduceCrossings(){let t=this.countCrossings(),e=this.Ji(),i=0,n=0,s=0;for(i=0;i<this.Qa;i++){for(n=0;n<=this.kt;n++)this.lk(n,1),this.rs(n,1,!1,1);for(s=this.countCrossings(),s<t&&(t=s,e=this.Ji()),n=this.kt;n>=0;n--)this.lk(n,-1),this.rs(n,-1,!1,-1);s=this.countCrossings(),s<t&&(t=s,e=this.Ji())}for(this.We(e),i=0;i<this.Qa;i++){for(n=0;n<=this.kt;n++)this.lk(n,0),this.rs(n,0,!1,0);for(s=this.countCrossings(),s<t&&(t=s,e=this.Ji()),n=this.kt;n>=0;n--)this.lk(n,0),this.rs(n,0,!1,0);s=this.countCrossings(),s<t&&(t=s,e=this.Ji())}this.We(e);let r=!1,o=0,a=0,l=0,h=0;switch(this.Wf){case 30:break;case 32:for(l=t+1;(h=this.countCrossings())<l;)for(l=h,o=this.kt;o>=0;o--)for(a=0;a<=o;a++){for(r=!0;r;)for(r=!1,n=o;n>=a;n--)r=this.rs(n,-1,!1,-1)||r;for(s=this.countCrossings(),s>=t?this.We(e):(t=s,e=this.Ji()),r=!0;r;)for(r=!1,n=o;n>=a;n--)r=this.rs(n,1,!1,1)||r;for(s=this.countCrossings(),s>=t?this.We(e):(t=s,e=this.Ji()),r=!0;r;)for(r=!1,n=a;n<=o;n++)r=this.rs(n,1,!1,1)||r;for(s>=t?this.We(e):(t=s,e=this.Ji()),r=!0;r;)for(r=!1,n=a;n<=o;n++)r=this.rs(n,-1,!1,-1)||r;for(s>=t?this.We(e):(t=s,e=this.Ji()),r=!0;r;)for(r=!1,n=o;n>=a;n--)r=this.rs(n,0,!1,0)||r;for(s>=t?this.We(e):(t=s,e=this.Ji()),r=!0;r;)for(r=!1,n=a;n<=o;n++)r=this.rs(n,0,!1,0)||r;s>=t?this.We(e):(t=s,e=this.Ji())}break;default:for(o=this.kt,a=0,l=t+1;(h=this.countCrossings())<l;){for(l=h,r=!0;r;)for(r=!1,n=o;n>=a;n--)r=this.rs(n,-1,!1,-1)||r;for(s=this.countCrossings(),s>=t?this.We(e):(t=s,e=this.Ji()),r=!0;r;)for(r=!1,n=o;n>=a;n--)r=this.rs(n,1,!1,1)||r;for(s=this.countCrossings(),s>=t?this.We(e):(t=s,e=this.Ji()),r=!0;r;)for(r=!1,n=a;n<=o;n++)r=this.rs(n,1,!1,1)||r;for(s>=t?this.We(e):(t=s,e=this.Ji()),r=!0;r;)for(r=!1,n=a;n<=o;n++)r=this.rs(n,-1,!1,-1)||r;for(s>=t?this.We(e):(t=s,e=this.Ji()),r=!0;r;)for(r=!1,n=o;n>=a;n--)r=this.rs(n,0,!1,0)||r;for(s>=t?this.We(e):(t=s,e=this.Ji()),r=!0;r;)for(r=!1,n=a;n<=o;n++)r=this.rs(n,0,!1,0)||r;s>=t?this.We(e):(t=s,e=this.Ji())}}this.We(e)}lk(t,e){let i=0,n=!1;const s=this.vh(t),r=this.ci[t],o=this.xD(t,e),a=this.Ky(t,e);for(i=0;i<r;i++)-1===a[i]&&(a[i]=s[i].column),-1===o[i]&&(o[i]=s[i].column);let l,h=!0;for(;h;)for(h=!1,i=0;i<r-1;i++)if(o[i+1]<o[i]||o[i+1]===o[i]&&a[i+1]<a[i]){n=!0,h=!0;const t=o[i];o[i]=o[i+1],o[i+1]=t;const e=a[i];a[i]=a[i+1],a[i+1]=e,l=s[i],s[i]=s[i+1],s[i+1]=l}let u=0;for(i=0;i<r;i++)l=s[i],l.index=i,u+=this.nodeMinColumnSpace(l,!0),l.column=u,u+=1,u+=this.nodeMinColumnSpace(l,!1);return this.Oh(t,s),n}rs(t,e,i,n){const s=this.vh(t),r=this.ci[t],o=this.wD(t,e);let a,l,h=0;if(!i||n>0)for(a=[],h=0;h<r;h++)a[h]=-1;else a=this.Ky(t,-1);if(!i||n<0)for(l=[],h=0;h<r;h++)l[h]=-1;else l=this.Ky(t,1);let u=!1,c=!0;for(;c;)for(c=!1,h=0;h<r-1;h++){const e=o[s[h].index*r+s[h+1].index],d=o[s[h+1].index*r+s[h].index];let f=0,p=0;const g=s[h].column,m=s[h+1].column,y=this.nodeMinColumnSpace(s[h],!0),v=this.nodeMinColumnSpace(s[h],!1),x=g-y+this.nodeMinColumnSpace(s[h+1],!0),b=m-v+this.nodeMinColumnSpace(s[h+1],!1);let w,k,S=0,C=0,M=0,T=0,A=0,P=0,N=0,D=0,L=0;const E=s[h].sourceEdges.iterator;if(i&&n<=0)for(;E.next();){const e=E.value;w=e.fromVertex,e.valid&&w.layer!==t&&(M=this.linkStraightenWeight(e),T=e.portFromColOffset,A=e.portToColOffset,P=w.column,S+=(Math.abs(g+A-(P+T))+1)*M,C+=(Math.abs(b+A-(P+T))+1)*M)}for(E.reset();E.next();){const e=E.value;if(w=e.fromVertex,e.valid&&w.layer===t){for(D=0;D<s.length&&s[D]!==w;)D++;D<h&&(f+=2*(h-D),p+=2*(h+1-D)),D===h+1&&(f+=1),D>h+1&&(f+=4*(D-h),p+=4*(D-(h+1)))}}const _=s[h].destinationEdges.iterator;if(i&&n>=0)for(;_.next();){const e=_.value;k=e.toVertex,e.valid&&k.layer!==t&&(M=this.linkStraightenWeight(e),T=e.portFromColOffset,A=e.portToColOffset,N=k.column,S+=(Math.abs(g+T-(N+A))+1)*M,C+=(Math.abs(b+T-(N+A))+1)*M)}for(_.reset();_.next();){const e=_.value;if(k=e.toVertex,e.valid&&k.layer===t){for(L=0;L<s.length&&s[L]!==k;)L++;L===h+1&&(p+=1)}}const O=s[h+1].sourceEdges.iterator;if(i&&n<=0)for(;O.next();){const e=O.value;w=e.fromVertex,e.valid&&w.layer!==t&&(M=this.linkStraightenWeight(e),T=e.portFromColOffset,A=e.portToColOffset,P=w.column,S+=(Math.abs(m+A-(P+T))+1)*M,C+=(Math.abs(x+A-(P+T))+1)*M)}for(O.reset();O.next();){const e=O.value;if(w=e.fromVertex,e.valid&&w.layer===t){for(D=0;D<s.length&&s[D]!==w;)D++;D<h&&(f+=2*(h+1-D),p+=2*(h-D)),D===h&&(p+=1),D>h+1&&(f+=4*(D-(h+1)),p+=4*(D-h))}}const F=s[h+1].destinationEdges.iterator;if(i&&n>=0)for(;F.next();){const e=F.value;k=e.toVertex,e.valid&&k.layer!==t&&(M=this.linkStraightenWeight(e),T=e.portFromColOffset,A=e.portToColOffset,N=k.column,S+=(Math.abs(m+T-(N+A))+1)*M,C+=(Math.abs(x+T-(N+A))+1)*M)}for(F.reset();F.next();){const e=F.value;if(k=e.toVertex,e.valid&&k.layer===t){for(L=0;L<s.length&&s[L]!==k;)L++;L===h&&(f+=1)}}let R=0,I=0;const B=a[s[h].index],j=l[s[h].index],z=a[s[h+1].index],H=l[s[h+1].index];if(-1!==B&&(R+=Math.abs(B-g),I+=Math.abs(B-b)),-1!==j&&(R+=Math.abs(j-g),I+=Math.abs(j-b)),-1!==z&&(R+=Math.abs(z-m),I+=Math.abs(z-x)),-1!==H&&(R+=Math.abs(H-m),I+=Math.abs(H-x)),p<f-.5||p===f&&d<e-.5||p===f&&d===e&&C<S-.5||p===f&&d===e&&C===S&&I<R-.5){u=!0,c=!0,s[h].column=b,s[h+1].column=x;const t=s[h];s[h]=s[h+1],s[h+1]=t}}for(h=0;h<r;h++)s[h].index=h;return this.Oh(t,s),u}straightenAndPack(){if(0!==this.Ln)return void this.DI();let t=0,e=!1,i=!!(1&this.Qo);const n=!!(8&this.Qo);if(this.network.edges.count>1e3&&n&&(i=!1),i){const e=[];let i=0;for(i=0;i<=this.kt;i++)e[i]=0;let n=0;const s=this.network.vertexes.iterator;for(;s.next();){const i=s.value;t=i.layer,n=i.column;const r=this.nodeMinColumnSpace(i,!1);e[t]=Math.max(e[t],n+r)}const r=8;for(s.reset();s.next();){const i=s.value;t=i.layer,n=i.column,i.column=((this.zt-e[t])*r>>1)+n*r}this.zt*=r}if(2&this.Qo){e=!0;let i=0;for(;e&&i<this.Jf;){for(e=!1,t=this.Cs+1;t<=this.kt;t++)e=this.Mg(t,1)||e;for(t=this.Cs-1;t>=0;t--)e=this.Mg(t,-1)||e;e=this.Mg(this.Cs,0)||e,i++}}if(4&this.Qo){for(t=this.Cs+1;t<=this.kt;t++)this.iC(t,1);for(t=this.Cs-1;t>=0;t--)this.iC(t,-1);this.iC(this.Cs,0)}if(i&&(this.DD(-1),this.DD(1)),2&this.Qo){e=!0;let i=0;for(;e&&i<this.Jf;){for(e=!1,e=this.Mg(this.Cs,0)||e,t=this.Cs+1;t<=this.kt;t++)e=this.Mg(t,0)||e;for(t=this.Cs-1;t>=0;t--)e=this.Mg(t,0)||e;i++}}}Mg(t,e){let i=!1;for(;this.FI(t,e);)i=!0;return i}FI(t,e){let i=0;const n=this.vh(t),s=this.ci[t],r=this.Ky(t,-1);if(e>0)for(i=0;i<s;i++)r[i]=-1;const o=this.Ky(t,1);if(e<0)for(i=0;i<s;i++)o[i]=-1;let a=!1,l=!0;for(;l;)for(l=!1,i=0;i<s;i++){const h=n[i].column,u=this.nodeMinColumnSpace(n[i],!0),c=this.nodeMinColumnSpace(n[i],!1);let d=0;d=i-1<0||h-n[i-1].column-1>u+this.nodeMinColumnSpace(n[i-1],!1)?h-1:h;let f=0;f=i+1>=s||n[i+1].column-h-1>c+this.nodeMinColumnSpace(n[i+1],!0)?h+1:h;let p=0,g=0,m=0,y=0,v=0,x=0;if(e<=0){const e=n[i].sourceEdges.iterator;for(;e.next();){const i=e.value,n=i.fromVertex;if(i.valid&&n.layer!==t){y=this.linkStraightenWeight(i),v=i.portFromColOffset,x=i.portToColOffset;const t=n.column;p+=(Math.abs(h+x-(t+v))+1)*y,g+=(Math.abs(d+x-(t+v))+1)*y,m+=(Math.abs(f+x-(t+v))+1)*y}}}if(e>=0){const e=n[i].destinationEdges.iterator;for(;e.next();){const i=e.value,n=i.toVertex;if(i.valid&&n.layer!==t){y=this.linkStraightenWeight(i),v=i.portFromColOffset,x=i.portToColOffset;const t=n.column;p+=(Math.abs(h+v-(t+x))+1)*y,g+=(Math.abs(d+v-(t+x))+1)*y,m+=(Math.abs(f+v-(t+x))+1)*y}}}let b=0,w=0,k=0;const S=r[n[i].index],C=o[n[i].index];-1!==S&&(b+=Math.abs(S-h),w+=Math.abs(S-d),k+=Math.abs(S-f)),-1!==C&&(b+=Math.abs(C-h),w+=Math.abs(C-d),k+=Math.abs(C-f)),g<p||g===p&&w<b?(a=!0,l=!0,n[i].column=d):(m<p||m===p&&k<b)&&(a=!0,l=!0,n[i].column=f)}return this.Oh(t,n),this.Yy(),a}iC(t,e){let i=0;const n=this.vh(t),s=this.ci[t],r=this.xD(t,e),o=[];for(i=0;i<s;i++)o[i]=r[i];let a=!1,l=!0;for(;l;)for(l=!1,i=0;i<s;i++){const t=n[i].column,e=this.nodeMinColumnSpace(n[i],!0),r=this.nodeMinColumnSpace(n[i],!1);let h=0,u=0,c=0,d=0,f=0;-1===o[i]?0===i&&i===s-1?h=t:0===i?(u=n[i+1].column,h=u-t===r+this.nodeMinColumnSpace(n[i+1],!0)?t-1:t):i===s-1?(c=n[i-1].column,h=t-c===e+this.nodeMinColumnSpace(n[i-1],!1)?t+1:t):(c=n[i-1].column,f=c+this.nodeMinColumnSpace(n[i-1],!1)+e+1,u=n[i+1].column,d=u-this.nodeMinColumnSpace(n[i+1],!0)-r-1,h=(f+d)/2|0):0===i&&i===s-1?h=o[i]:0===i?(u=n[i+1].column,d=u-this.nodeMinColumnSpace(n[i+1],!0)-r-1,h=Math.min(o[i],d)):i===s-1?(c=n[i-1].column,f=c+this.nodeMinColumnSpace(n[i-1],!1)+e+1,h=Math.max(o[i],f)):(c=n[i-1].column,f=c+this.nodeMinColumnSpace(n[i-1],!1)+e+1,u=n[i+1].column,d=u-this.nodeMinColumnSpace(n[i+1],!0)-r-1,f<o[i]&&o[i]<d?h=o[i]:f>=o[i]?h=f:d<=o[i]&&(h=d)),h!==t&&(a=!0,l=!0,n[i].column=h)}return this.Oh(t,n),this.Yy(),a}RI(){for(let t=0;t<=this.zt;t++)for(;this.vI(t,1););this.Yy()}vI(t,e){let i=!0;const n=this.network.vertexes.iterator;for(;n.next();){const e=n.value,s=this.nodeMinColumnSpace(e,!0),r=this.nodeMinColumnSpace(e,!1);if(e.column-s<=t&&e.column+r>=t){i=!1;break}}let s=!1;if(i){if(e>0)for(n.reset();n.next();){const e=n.value;e.column>t&&(e.column-=1,s=!0)}if(e<0)for(n.reset();n.next();){const e=n.value;e.column<t&&(e.column+=1,s=!0)}}return s}OI(){this.RI();for(let t=0;t<this.zt;t++)for(;this.II(t,1););this.Yy()}II(t,e){let i=t;e>0&&(i=t+1),e<0&&(i=t-1);let n=0;const s=[],r=[];for(n=0;n<=this.kt;n++)s[n]=!1,r[n]=!1;const o=this.network.vertexes.iterator;for(;o.next();){const e=o.value,n=e.column-this.nodeMinColumnSpace(e,!0),a=e.column+this.nodeMinColumnSpace(e,!1);n<=t&&a>=t&&(s[e.layer]=!0),n<=i&&a>=i&&(r[e.layer]=!0)}let a=!0,l=!1;for(n=0;n<=this.kt;n++)a=a&&!(s[n]&&r[n]);if(a){if(e>0)for(o.reset();o.next();){const e=o.value;e.column>t&&(e.column-=1,l=!0)}if(e<0)for(o.reset();o.next();){const e=o.value;e.column<t&&(e.column+=1,l=!0)}}return l}DD(t){this.OI();let e,i=0,n=0,s=0,r=0;if(t>0)for(i=0;i<=this.zt;i++)for(e=this.Ji(),n=this.nk(!0),s=n+1;n<s;)s=n,this.FD(i,1),r=this.nk(!0),r>n?this.We(e):r<n&&(n=r,e=this.Ji());if(t<0)for(i=this.zt;i>=0;i--)for(e=this.Ji(),n=this.nk(!0),s=n+1;n<s;)s=n,this.FD(i,-1),r=this.nk(!0),r>n?this.We(e):r<n&&(n=r,e=this.Ji());this.Yy()}FD(t,e){this.Qs=0;const i=this.network.vertexes.iterator;for(;i.next();){i.value.component=-1}if(e>0)for(i.reset();i.next();){const e=i.value;e.column-this.nodeMinColumnSpace(e,!0)<=t&&(e.component=this.Qs)}if(e<0)for(i.reset();i.next();){const e=i.value;e.column+this.nodeMinColumnSpace(e,!1)>=t&&(e.component=this.Qs)}for(this.Qs++,i.reset();i.next();){const t=i.value;-1===t.component&&(this._N(t,this.Qs,-1,!0,!0),this.Qs++)}let n=0;const s=[];for(n=0;n<this.Qs*this.Qs;n++)s[n]=!1;const r=[];for(n=0;n<(this.kt+1)*(this.zt+1);n++)r[n]=-1;for(i.reset();i.next();){const t=i.value,e=t.layer,n=Math.max(0,t.column-this.nodeMinColumnSpace(t,!0)),s=Math.min(this.zt,t.column+this.nodeMinColumnSpace(t,!1));for(let i=n;i<=s;i++)r[e*(this.zt+1)+i]=t.component}for(let t=0;t<=this.kt;t++){if(e>0)for(let e=0;e<this.zt;e++)-1!==r[t*(this.zt+1)+e]&&-1!==r[t*(this.zt+1)+e+1]&&r[t*(this.zt+1)+e]!==r[t*(this.zt+1)+e+1]&&(s[r[t*(this.zt+1)+e]*this.Qs+r[t*(this.zt+1)+e+1]]=!0);if(e<0)for(let e=this.zt;e>0;e--)-1!==r[t*(this.zt+1)+e]&&-1!==r[t*(this.zt+1)+e-1]&&r[t*(this.zt+1)+e]!==r[t*(this.zt+1)+e-1]&&(s[r[t*(this.zt+1)+e]*this.Qs+r[t*(this.zt+1)+e-1]]=!0)}const o=[];for(n=0;n<this.Qs;n++)o[n]=!0;const a=[];a.push(0);let l=0;for(;0!==a.length;)if(l=a[a.length-1],a.pop(),o[l])for(o[l]=!1,n=0;n<this.Qs;n++)s[l*this.Qs+n]&&a.splice(0,0,n);let h=!1;if(e>0)for(i.reset();i.next();){const t=i.value;o[t.component]&&(t.column-=1,h=!0)}if(e<0)for(i.reset();i.next();){const t=i.value;o[t.component]&&(t.column+=1,h=!0)}return h}DI(){const t=e.et(),i=this.$f.length;for(let e=0;e<=i;e++)t[e]=[];const n=this.network.vertexes.iterator;for(;n.next();){const e=n.value;t[i-e.layer][e.index]=e}const s=new u;this.EI(t,s);let r=null,o=null,a=null,l=null;const h=!!(1&this.Ln),c=!!(2&this.Ln),d=!!(4&this.Ln),f=!!(8&this.Ln);h&&(this._r(t,s,!0),r=this.hk(t,!0,!1)),t.reverse(),d&&(this._r(t,s,!1),a=this.hk(t,!1,!1));for(const e of t)e.reverse();f&&(this._r(t,s,!1),l=this.hk(t,!1,!0)),t.reverse(),c&&(this._r(t,s,!0),o=this.hk(t,!0,!0)),e.J(t),this.UI(r,o,a,l),this.network.vertexes.each((t=>{const i=t,n=e.et();h&&n.push(r.get(i)),c&&n.push(o.get(i)),d&&n.push(a.get(i)),f&&n.push(l.get(i)),n.sort(((t,e)=>t-e));const s=n.length,u=Math.floor((s-1)/2),p=Math.ceil((s-1)/2),g=(n[u]+n[p])/2;e.J(n),i.he=g}))}EI(t,e){const i=t.length;for(let n=1;n<i-1;n++){let i=0,s=0;const r=t[n],o=t[n+1];for(let t=0;s<o.length;t++){const n=o[t],a=this.BI(n);if(t===o.length-1||a){let l=r.length-1;for(a&&(l=n.getProperSourceVertexes()[0].index);s<=t;){const t=o[s].getProperSourceEdges();for(const n of t){const t=n.fromVertex.index;(t<i||t>l)&&e.add(n)}s++}i=l}}}}BI(t){if(null===t.node){const e=t.getProperSourceVertexes();if(e.length>0)return null===e[0].node}return!1}_r(t,e,i){this.VI(t);for(const n of t){let t=-1;for(const s of n){const n=i?s.getProperSourceVertexes():s.getProperDestinationVertexes(),r=n.length;if(r>0){n.sort(((t,e)=>t.Ih-e.Ih));const o=(r-1)/2;for(let r=Math.floor(o),a=Math.ceil(o);r<=a;r++)if(s.An===s){const o=n[r];let a;a=i?o.getDestinationEdge(s):s.getDestinationEdge(o),!e.has(a)&&t<o.Ih&&(o.An=s,s.tc=o.tc,s.An=o.tc,t=o.Ih)}}}}}VI(t){for(let e=0;e<t.length;e++){const i=t[e];for(let t=0;t<i.length;t++){const n=i[t];n.tc=n,n.An=n,n.RD=e,n.Ih=t}}}hk(t,e,i){const n=90===this.b||270===this.b;for(const e of t)for(const t of e)t.Je=t,t.Qf=1/0,t.he=NaN,t.Tn=0;this.zI(t,e,i);for(const e of t)for(const i of e)i.tc===i&&this.vD(i,t);for(let e=0;e<t.length;e++){if(t[e].length<=0)continue;const i=t[e][0];if(i.Je===i){i.Je.Qf===1/0&&(i.Je.Qf=0);let s,r=e,o=0;do{for(s=t[r][o];s.An!==s.tc;)if(s=s.An,r++,s.Ih>0){const e=this.OD(s,t),i=n?e.width:e.height,r=s.Je.Qf+s.he+s.Tn-(e.he+e.Tn+i+this.columnSpacing);e.Je.Qf=Math.min(e.Je.Qf,r)}o=s.Ih+1}while(r<t.length&&o<t[r].length&&s.Je===t[r][o].Je)}}const s=new m;for(const e of t)for(const t of e){t.he=t.he+t.Je.Qf+t.Tn;const e=n?t.width:t.height;s.set(t,i?-t.he-e:t.he)}return s}zI(t,e,i){const n=90===this.b||270===this.b;for(const s of t)for(const t of s)if(t.tc===t){let s=0,r=t;for(;r.An!==t;){const t=r.An,o=n?r.width:r.height,a=n?t.width:t.height;let l,h,u,c;e?(u=r.getDestinationEdge(t),l=u.portFromPos,h=u.portToPos,null!==u.link&&(r.node&&r.node!==u.link.fromNode&&(l=n?r.focusX:r.focusY),t.node&&t.node!==u.link.toNode&&(h=n?t.focusX:t.focusY)),c=i?r.Tn+(o-l)-(a-h):r.Tn+l-h):(u=t.getDestinationEdge(r),l=u.portToPos,h=u.portFromPos,null!==u.link&&(r.node&&r.node!==u.link.toNode&&(l=n?r.focusX:r.focusY),t.node&&t.node!==u.link.fromNode&&(h=n?t.focusX:t.focusY)),c=i?r.Tn+(o-l)-(a-h):r.Tn+l-h),t.Tn=c,s=Math.min(s,c),r=r.An}r=t;do{r.Tn=r.Tn-s,r=r.An}while(r!==t)}}vD(t,e){if(!isNaN(t.he))return;t.he=0;let i=t;do{if(i.Ih>0){const n=this.OD(i,e),s=n.tc;this.vD(s,e),t.Je===t&&(t.Je=s.Je);const r=90===this.b||270===this.b?n.width:n.height;if(t.Je===s.Je){const e=s.he+n.Tn+r-i.Tn+this.columnSpacing;t.he=Math.max(t.he,e)}}i=i.An}while(i!==t);for(;i.An!==t;)i=i.An,i.he=t.he,i.Je=t.Je}OD(t,i){const n=t.RD,s=t.Ih;return s<1&&e.o("Could not determine previous vertex in layer"),i[n][s-1]}UI(...t){let i=-1;const n=e.et(),s=e.et();let r=1/0;for(let e=0;e<4;e++){if(!t[e])continue;const o=this.XI(t[e],n,s,e);o<r&&(i=e,r=o)}for(let e=0;e<4;e++){const r=t[e];if(!r)continue;const o=0===e||2===e?n[i]-n[e]:s[i]-s[e];0!==o&&r.each((t=>{r.set(t.key,t.value+o)}))}e.J(n),e.J(s)}XI(t,e,i,n){if(!t||0===t.count)return e[n]=0,i[n]=0,1/0;let s=1/0,r=-1/0;return t.each((t=>{const e=t.key,i=t.value,n=90===this.b||270===this.b?e.width:e.height;i<s&&(s=i),i+n>r&&(r=i+n)})),e[n]=s,i[n]=r,r-s}commitLayout(){this.zy(),this.commitNodes(),this.eC(),this.isRouting&&this.commitLinks()}zy(){if(!this.setsPortSpots)return;const t=this.rk(!0),e=this.rk(!1),i=this.network.edges.iterator;for(;i.next();){const n=i.value.link;null!==n&&(n.fromSpot=t,n.toSpot=e)}}rk(t){return 270===this.b?t?w.MiddleTop:w.MiddleBottom:90===this.b?t?w.MiddleBottom:w.MiddleTop:180===this.b?t?w.MiddleLeft:w.MiddleRight:t?w.MiddleRight:w.MiddleLeft}commitNodes(){this.Zs=[],this.Ls=[],this.As=[],this.It=[];for(let t=0;t<=this.kt;t++)this.Zs[t]=0,this.Ls[t]=0,this.As[t]=0,this.It[t]=0;const t=this.network.vertexes.iterator;for(;t.next();){const e=t.value,i=e.layer;this.Zs[i]=Math.max(this.Zs[i],this.nodeMinLayerSpace(e,!0)),this.Ls[i]=Math.max(this.Ls[i],this.nodeMinLayerSpace(e,!1))}let e=0;const i=this.Ns;for(let t=0;t<=this.kt;t++){let n=i;this.Zs[t]+this.Ls[t]<=0&&(n=0),t>0&&(e+=n/2),90===this.b||0===this.b?(e+=this.Ls[t],this.As[t]=e,e+=this.Zs[t]):(e+=this.Zs[t],this.As[t]=e,e+=this.Ls[t]),t<this.kt&&(e+=n/2),this.It[t]=e}const n=e,s=this.arrangementOrigin;for(let t=0;t<=this.kt;t++)270===this.b?this.As[t]=s.y+this.As[t]:90===this.b?(this.As[t]=s.y+n-this.As[t],this.It[t]=n-this.It[t]):180===this.b?this.As[t]=s.x+this.As[t]:(this.As[t]=s.x+n-this.As[t],this.It[t]=n-this.It[t]);const r=0!==this.Ln;t.reset();const o=270===this.b||90===this.b;let a=1/0,l=1/0,h=1/0,u=-1/0;for(;t.next();){const e=t.value,i=e.layer,n=0|e.column;let c=0,d=0;o?(c=s.x+this.Wi*n,d=this.As[i]):(c=this.As[i],d=s.y+this.Wi*n),e.centerX=c,e.centerY=d,r&&isFinite(e.he)&&(o?e.node?e.x=s.x+e.he:e.centerX=s.x+e.he:e.node?e.y=s.y+e.he:e.centerY=s.y+e.he),a=Math.min(e.x,a),l=Math.min(e.y,l),o?(h=a,u=Math.max(u,e.bounds.right)):(h=l,u=Math.max(u,e.bounds.bottom))}this.QN=u-h;const c=s.x-a,d=s.y-l;for(this._o=new y(r&&o?0:c,r&&!o?0:d),t.reset();t.next();){const e=t.value;e.x+=c,e.y+=d,e.commit()}}eC(){let t=0;const e=this.Ns;for(let e=0;e<=this.kt;e++)t+=this.Zs[e],t+=this.Ls[e];t+=this.kt*e;const i=[],n=0!==this.Ln?this.QN:this.Wi*this.zt;for(let e=this.maxLayer;e>=0;e--)270===this.b?0===e?i.push(new x(0,0,n,Math.abs(this.It[0]))):i.push(new x(0,this.It[e-1],n,Math.abs(this.It[e-1]-this.It[e]))):90===this.b?0===e?i.push(new x(0,this.It[0],n,Math.abs(this.It[0]-t))):i.push(new x(0,this.It[e],n,Math.abs(this.It[e-1]-this.It[e]))):180===this.b?0===e?i.push(new x(0,0,Math.abs(this.It[0]),n)):i.push(new x(this.It[e-1],0,Math.abs(this.It[e-1]-this.It[e]),n)):0===e?i.push(new x(this.It[0],0,Math.abs(this.It[0]-t),n)):i.push(new x(this.It[e],0,Math.abs(this.It[e-1]-this.It[e]),n));this.commitLayers(i,this._o)}commitLayers(t,e){}commitLinks(){const t=this.network.edges.iterator;let e;for(;t.next();)e=t.value.link,null!==e&&(e.startRoute(),e.clearPoints(),e.commitRoute());for(t.reset();t.next();)e=t.value.link,null!==e&&e.updateRoute();for(t.reset();t.next();){const i=t.value;if(e=i.link,null===e||0===e.pointsCount)continue;e.startRoute();const n=e;let s=n.fromNode,r=n.toNode,o=n.fromPort,a=n.toPort;if(null!==s){const t=s.findVisibleNode();null!==t&&t!==s&&(s=t,o=t.port)}if(null!==r){const t=r.findVisibleNode();null!==t&&t!==r&&(r=t,a=t.port)}const l=e.computeSpot(!0,o),h=e.computeSpot(!1,a);let u=i.fromVertex,c=i.toVertex;if(i.valid){if(9===e.curve&&4===e.pointsCount)if(u.column===c.column&&0===this.alignOption){const t=e.getLinkPoint(s,o,l,!0,!1,r,a),i=e.getLinkPoint(r,a,h,!1,!1,s,o);t.isReal()||t.set(s.actualBounds.center),i.isReal()||i.set(r.actualBounds.center),e.clearPoints(),e.addPointAt(t.x,t.y),e.addPointAt((2*t.x+i.x)/3,(2*t.y+i.y)/3),e.addPointAt((t.x+2*i.x)/3,(t.y+2*i.y)/3),e.addPointAt(i.x,i.y)}else{let t=!1,i=!1;if(null!==o&&l===w.None&&(t=!0),null!==a&&h===w.None&&(i=!0),t||i){let n=null;t&&(n=e.getLinkPointFromPoint(s,o,o.getDocumentPoint(w.Center),e.getPoint(3),!0),n.isReal()||n.set(s.actualBounds.center),e.setPointAt(0,n.x,n.y));let l=null;if(i&&(l=e.getLinkPointFromPoint(r,a,a.getDocumentPoint(w.Center),e.getPoint(0),!1),l.isReal()||l.set(r.actualBounds.center),e.setPointAt(3,l.x,l.y)),n){const t=e.getPoint(2);e.setPointAt(1,(2*n.x+t.x)/3,(2*n.y+t.y)/3)}if(l){const t=e.getPoint(1);e.setPointAt(2,(2*l.x+t.x)/3,(2*l.y+t.y)/3)}}}e.commitRoute();continue}if(u.layer===c.layer){e.commitRoute();continue}let d=!1,f=!1;const p=this.Ns;let g=0,m=e.firstPickIndex+1;if(e.isOrthogonal)f=!0,g=e.pointsCount,g>4&&e.points.removeRange(2,g-3);else if(9===e.curve)d=!0,g=e.pointsCount,g>4&&e.points.removeRange(2,g-3),4===g&&(m=2);else{g=e.pointsCount;const t=l===w.None,i=h===w.None;g>2&&t&&i?e.points.removeRange(1,g-2):g>3&&t&&!i?e.points.removeRange(1,g-3):g>3&&!t&&i?e.points.removeRange(2,g-2):g>4&&!t&&!i&&e.points.removeRange(2,g-3)}let y,v,x=0,b=0,k=0,S=0,C=0,M=0,T=0;if(i.rev){let t=0;for(;null!==c&&u!==c;){y=null,v=null;const n=c.sourceEdges.iterator;for(;n.next();){const t=n.value;if(t.link===i.link&&(y=t.fromVertex,v=t.toVertex,null===y.node))break}if(null===y)break;if(y!==u)if(x=e.getPoint(m-1).x,b=e.getPoint(m-1).y,k=y.centerX,S=y.centerY,f)180===this.b||0===this.b?m===e.firstPickIndex+1?(e.insertPointAt(m++,x,b),e.insertPointAt(m++,x,S)):(null!==v?v.centerY:b)!==S&&(C=this.It[y.layer-1]+this._o.x,e.insertPointAt(m++,C,b),e.insertPointAt(m++,C,S)):m===e.firstPickIndex+1?(e.insertPointAt(m++,x,b),e.insertPointAt(m++,k,b)):(null!==v?v.centerX:x)!==k&&(C=this.It[y.layer-1]+this._o.y,e.insertPointAt(m++,x,C),e.insertPointAt(m++,k,C));else if(m===e.firstPickIndex+1)if(M=Math.max(10,this.Zs[c.layer]),T=Math.max(10,this.Ls[c.layer]),d)180===this.b?k<=c.bounds.x?(t=c.bounds.x,e.insertPointAt(m++,t-M,S),e.insertPointAt(m++,t,S),e.insertPointAt(m++,t+T,S)):(e.insertPointAt(m++,k-M,S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k+T,S)):90===this.b?S>=c.bounds.bottom?(t=c.bounds.y+c.bounds.height,e.insertPointAt(m++,k,t+T),e.insertPointAt(m++,k,t),e.insertPointAt(m++,k,t-M)):(e.insertPointAt(m++,k,S+T),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,S-M)):270===this.b?S<=c.bounds.y?(t=c.bounds.y,e.insertPointAt(m++,k,t-M),e.insertPointAt(m++,k,t),e.insertPointAt(m++,k,t+T)):(e.insertPointAt(m++,k,S-M),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,S+T)):0===this.b&&(k>=c.bounds.right?(t=c.bounds.x+c.bounds.width,e.insertPointAt(m++,t+T,S),e.insertPointAt(m++,t,S),e.insertPointAt(m++,t-M,S)):(e.insertPointAt(m++,k+T,S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k-M,S)));else{e.insertPointAt(m++,x,b);let t=0;180===this.b||0===this.b?((180===this.b?k>=c.bounds.right:k<=c.bounds.x)&&(t=(0===this.b?-M:T)/2),e.insertPointAt(m++,x+t,S)):((270===this.b?S>=c.bounds.bottom:S<=c.bounds.y)&&(t=(90===this.b?-M:T)/2),e.insertPointAt(m++,k,b+t)),e.insertPointAt(m++,k,S)}else M=Math.max(10,this.Zs[y.layer]),T=Math.max(10,this.Ls[y.layer]),d?180===this.b?(e.insertPointAt(m++,k-M-p,S),e.insertPointAt(m++,Math.min(k-M+p/2,k),S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,Math.max(k+T-p/2,k),S),e.insertPointAt(m++,k+T+p,S)):90===this.b?(e.insertPointAt(m++,k,S+T+p),e.insertPointAt(m++,k,Math.max(S+T-p/2,S)),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,Math.min(S-M+p/2,S)),e.insertPointAt(m++,k,S-M-p)):270===this.b?(e.insertPointAt(m++,k,S-M-p),e.insertPointAt(m++,k,Math.min(S-M+p/2,S)),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,Math.max(S+T-p/2,S)),e.insertPointAt(m++,k,S+T+p)):(e.insertPointAt(m++,k+T+p,S),e.insertPointAt(m++,Math.max(k+T-p/2,k),S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,Math.min(k-M+p/2,k),S),e.insertPointAt(m++,k-M-p,S)):(180===this.b||90===this.b||this.b,e.insertPointAt(m++,k,S));c=y}if(null===a||l!==w.None||f)if(x=e.getPoint(m-1).x,b=e.getPoint(m-1).y,k=e.getPoint(m).x,S=e.getPoint(m).y,f){const i=this.Ls[u.layer];let n=0;180===this.b||0===this.b?(n=b,n>=u.bounds.y&&n<=u.bounds.bottom&&(180===this.b?k>=u.bounds.x:k<=u.bounds.right)&&(t=u.centerX+(180===this.b?-i:i),n=n<u.bounds.y+u.bounds.height/2?u.bounds.y-this.Wi/2:u.bounds.bottom+this.Wi/2,e.insertPointAt(m++,t,b),e.insertPointAt(m++,t,n)),e.insertPointAt(m++,k,n),e.insertPointAt(m++,k,S)):(n=x,n>=u.bounds.x&&n<=u.bounds.right&&(270===this.b?S>=u.bounds.y:S<=u.bounds.bottom)&&(t=u.centerY+(270===this.b?-i:i),n=n<u.bounds.x+u.bounds.width/2?u.bounds.x-this.Wi/2:u.bounds.right+this.Wi/2,e.insertPointAt(m++,x,t),e.insertPointAt(m++,n,t)),e.insertPointAt(m++,n,S),e.insertPointAt(m++,k,S))}else if(d)M=Math.max(10,this.Zs[u.layer]),T=Math.max(10,this.Ls[u.layer]),180===this.b&&k>=u.bounds.x?(t=u.bounds.x+u.bounds.width,e.setPointAt(m-2,t,b),e.setPointAt(m-1,t+T,b)):90===this.b&&S<=u.bounds.bottom?(t=u.bounds.y,e.setPointAt(m-2,x,t),e.setPointAt(m-1,x,t-M)):270===this.b&&S>=u.bounds.y?(t=u.bounds.y+u.bounds.height,e.setPointAt(m-2,x,t),e.setPointAt(m-1,x,t+T)):0===this.b&&k<=u.bounds.right&&(t=u.bounds.x,e.setPointAt(m-2,t,b),e.setPointAt(m-1,t-M,b));else{M=Math.max(10,this.Zs[u.layer]),T=Math.max(10,this.Ls[u.layer]);let t=0;180===this.b||0===this.b?((180===this.b?k<=u.bounds.x:k>=u.bounds.right)&&(t=(0===this.b?T:-M)/2),e.insertPointAt(m++,k+t,b)):((270===this.b?S<=u.bounds.y:S>=u.bounds.bottom)&&(t=(90===this.b?T:-M)/2),e.insertPointAt(m++,x,S+t)),e.insertPointAt(m++,k,S)}}else{for(;null!==u&&u!==c;){y=null,v=null;const t=u.destinationEdges.iterator;for(;t.next();){const e=t.value;if(e.link===i.link&&(y=e.toVertex,v=e.fromVertex,null!==v.node&&(v=null),null===y.node))break}if(null===y)break;y!==c&&(x=e.getPoint(m-1).x,b=e.getPoint(m-1).y,k=y.centerX,S=y.centerY,f?180===this.b||0===this.b?(null!==v?v.centerY:b)!==S&&(C=this.It[y.layer]+this._o.x,m===e.firstPickIndex+1&&(C=0===this.b?Math.max(C,x):Math.min(C,x)),e.insertPointAt(m++,C,b),e.insertPointAt(m++,C,S)):(null!==v?v.centerX:x)!==k&&(C=this.It[y.layer]+this._o.y,m===e.firstPickIndex+1&&(C=90===this.b?Math.max(C,b):Math.min(C,b)),e.insertPointAt(m++,x,C),e.insertPointAt(m++,k,C)):(M=Math.max(10,this.Zs[y.layer]),T=Math.max(10,this.Ls[y.layer]),d?180===this.b?(e.insertPointAt(m++,k+T+p,S),e.insertPointAt(m++,Math.max(k+T-p/2,k),S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,Math.min(k-M+p/2,k),S),e.insertPointAt(m++,k-M-p,S)):90===this.b?(e.insertPointAt(m++,k,S-M-p),e.insertPointAt(m++,k,Math.min(S-M+p/2,S)),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,Math.max(S+T-p/2,S)),e.insertPointAt(m++,k,S+T+p)):270===this.b?(e.insertPointAt(m++,k,S+T+p),e.insertPointAt(m++,k,Math.max(S+T-p/2,S)),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,Math.min(S-M+p/2,S)),e.insertPointAt(m++,k,S-M-p)):(e.insertPointAt(m++,k-M-p,S),e.insertPointAt(m++,Math.min(k-M+p/2,k),S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,k,S),e.insertPointAt(m++,Math.max(k+T-p/2,k),S),e.insertPointAt(m++,k+T+p,S)):180===this.b?(e.insertPointAt(m++,k+T,S),e.insertPointAt(m++,k-M,S)):90===this.b?(e.insertPointAt(m++,k,S-M),e.insertPointAt(m++,k,S+T)):270===this.b?(e.insertPointAt(m++,k,S+T),e.insertPointAt(m++,k,S-M)):(e.insertPointAt(m++,k-M,S),e.insertPointAt(m++,k+T,S)))),u=y}f&&(x=e.getPoint(m-1).x,b=e.getPoint(m-1).y,k=e.getPoint(m).x,S=e.getPoint(m).y,180===this.b||0===this.b?b!==S&&(C=0===this.b?Math.min(Math.max((k+x)/2,this.It[c.layer]+this._o.x),k):Math.max(Math.min((k+x)/2,this.It[c.layer]+this._o.x),k),e.insertPointAt(m++,C,b),e.insertPointAt(m++,C,S)):x!==k&&(C=90===this.b?Math.min(Math.max((S+b)/2,this.It[c.layer]+this._o.y),S):Math.max(Math.min((S+b)/2,this.It[c.layer]+this._o.y),S),e.insertPointAt(m++,x,C),e.insertPointAt(m++,k,C)))}if(null!==n&&d&&e.pointsCount>=4){if(null!==o){const t=l===w.None?e.getLinkPointFromPoint(s,o,o.getDocumentPoint(w.Center),e.getPoint(3),!0):e.getPoint(0);if(l===w.None){const i=e.getPoint(2),n=e.getPoint(3);90===this.direction||270===this.direction?(e.setPointAt(1,(t.x+i.x)/2,i.y),e.setPointAt(2,n.x,(i.y+n.y)/2)):(e.setPointAt(1,i.x,(t.y+i.y)/2),e.setPointAt(2,(i.x+n.x)/2,n.y))}t.isReal()||t.set(s.actualBounds.center),e.setPointAt(0,t.x,t.y)}if(null!==a){const t=h===w.None?e.getLinkPointFromPoint(r,a,a.getDocumentPoint(w.Center),e.getPoint(e.pointsCount-4),!1):e.getPoint(e.pointsCount-1);if(h===w.None){const i=e.getPoint(e.pointsCount-3),n=e.getPoint(e.pointsCount-4);90===this.direction||270===this.direction?(e.setPointAt(e.pointsCount-2,(t.x+i.x)/2,i.y),e.setPointAt(e.pointsCount-2,n.x,(i.y+n.y)/2)):(e.setPointAt(e.pointsCount-2,i.x,(t.y+i.y)/2),e.setPointAt(e.pointsCount-3,(i.x+n.x)/2,n.y))}t.isReal()||t.set(r.actualBounds.center),e.setPointAt(e.pointsCount-1,t.x,t.y)}}e.commitRoute(),i.commit()}}aI(){this.Xy=-1,this.kg=0,this.Cs=0,this._a=null,this.Sg=null,this.$f=null;for(let t=0;t<this.Cn.length;t++)this.Cn[t]=null}vh(t){let e;const i=this.ci[t];if(i>=this.Cn.length){const t=[];for(let e=0;e<this.Cn.length;e++)t[e]=this.Cn[e];this.Cn=t}void 0===this.Cn[i]||null===this.Cn[i]?e=[]:(e=this.Cn[i],this.Cn[i]=null);const n=this.$f[t];for(let t=0;t<n.length;t++){const i=n[t];e[i.index]=i}return e}Oh(t,e){this.Cn[this.ci[t]]=e}get layerSpacing(){return this.Ns}set layerSpacing(t){this.Ns!==t&&(e.s(t,"number",ui,"layerSpacing"),t>=0&&(this.Ns=t,this.invalidateLayout()))}get columnSpacing(){return this.Wi}set columnSpacing(t){this.Wi!==t&&(e.s(t,"number",ui,"columnSpacing"),t>0&&(this.Wi=t,this.invalidateLayout()))}get direction(){return this.b}set direction(t){this.b!==t&&(e.s(t,"number",ui,"direction"),0===t||90===t||180===t||270===t?(this.b=t,this.invalidateLayout()):e.o("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}get cycleRemoveOption(){return this.Hf}set cycleRemoveOption(t){this.Hf!==t&&(1===t||0===t||2===t)&&(this.Hf=t,this.invalidateLayout())}get layeringOption(){return this.jf}set layeringOption(t){this.jf!==t&&(10===t||11===t||12===t)&&(this.jf=t,this.invalidateLayout())}get initializeOption(){return this.qf}set initializeOption(t){this.qf!==t&&(20===t||21===t||22===t)&&(this.qf=t,this.invalidateLayout())}get iterations(){return this.Qa}set iterations(t){this.Qa!==t&&t>=0&&(this.Qa=t,this.invalidateLayout())}get aggressiveOption(){return this.Wf}set aggressiveOption(t){this.Wf!==t&&(30===t||31===t||32===t)&&(this.Wf=t,this.invalidateLayout())}get packOption(){return this.Qo}set packOption(t){this.Qo!==t&&(e.s(t,"number",ui,"packOption"),t>=0&&t<8&&(this.Qo=t,this.invalidateLayout()))}get packIterations(){return this.Jf}set packIterations(t){this.Jf=t}get alignOption(){return this.Ln}set alignOption(t){this.Ln!==t&&(e.s(t,"number",ui,"align"),t>=0&&t<16&&(this.Ln=t,this.invalidateLayout()))}get setsPortSpots(){return this.Nn}set setsPortSpots(t){this.Nn!==t&&(e.s(t,"boolean",ui,"setsPortSpots"),this.Nn=t,this.invalidateLayout())}get maxLayer(){return this.kt}get maxIndex(){return this.Xy}get maxColumn(){return this.zt}get minIndexLayer(){return this.kg}get maxIndexLayer(){return this.Cs}static CycleDepthFirst=0;static CycleGreedy=1;static CycleFromLayers=2;static LayerOptimalLinkLength=10;static LayerLongestPathSink=11;static LayerLongestPathSource=12;static InitDepthFirstOut=20;static InitDepthFirstIn=21;static InitNaive=22;static AggressiveNone=30;static AggressiveLess=31;static AggressiveMore=32;static PackNone=0;static PackExpand=1;static PackStraighten=2;static PackMedian=4;static PackAll=15;static AlignNone=0;static AlignUpperLeft=1;static AlignUpperRight=2;static AlignLowerLeft=4;static AlignLowerRight=8;static AlignAll=15}class ci extends De{constructor(t){super(t)}createVertex(){return new di(this)}createEdge(){return new fi(this)}}class di extends Le{Yo;Hr;At;ak;ck;$i;Zf;Xn;ok;ek;sk;tc;An;RD;Ih;Je;Qf;he;Tn;Hy=null;jy=null;qy=null;Wy=null;constructor(t){super(t),this.Yo=-1,this.Hr=-1,this.At=-1,this.ak=NaN,this.ck=null,this.$i=!1,this.Zf=NaN,this.Xn=NaN,this.ok=0,this.ek=null,this.sk=null}static ID(t,e){return t.index-e.index}getProperSourceEdges(){if(!this.qy){const t=[];for(const e of this.fo){const i=e;i.valid&&t.push(i)}this.qy=t}return this.qy}getProperDestinationEdges(){if(!this.Wy){const t=[];for(const e of this.Wo){const i=e;i.valid&&t.push(i)}this.Wy=t}return this.Wy}getDestinationEdge(t){const i=this.getProperDestinationEdges();for(const e of i)if(e.toVertex===t)return e;e.o("Unable to find destination edge to given vertex")}getProperSourceVertexes(){if(!this.Hy){const t=[];for(const e of this.fo){const i=e;!i.valid||i.fromVertex.layer<=i.toVertex.layer||t.push(i.fromVertex)}t.sort(di.ID),this.Hy=t}return this.Hy}getProperDestinationVertexes(){if(!this.jy){const t=[];for(const e of this.Wo){const i=e;!i.valid||i.fromVertex.layer<=i.toVertex.layer||t.push(i.toVertex)}t.sort(di.ID),this.jy=t}return this.jy}addSourceEdge(t){super.addSourceEdge(t),this.Hy=null,this.qy=null}deleteSourceEdge(t){super.deleteSourceEdge(t),this.Hy=null,this.qy=null}addDestinationEdge(t){super.addDestinationEdge(t),this.jy=null,this.Wy=null}deleteDestinationEdge(t){super.deleteDestinationEdge(t),this.jy=null,this.Wy=null}get layer(){return this.Yo}set layer(t){this.Yo!==t&&(e.s(t,"number",di,"layer"),this.Yo=t)}get column(){return this.Hr}set column(t){this.Hr!==t&&(e.s(t,"number",di,"column"),this.Hr=t)}get index(){return this.At}set index(t){this.At!==t&&(e.s(t,"number",di,"index"),this.At=t)}get component(){return this.ak}set component(t){this.ak!==t&&(e.s(t,"number",di,"component"),this.ak=t)}get near(){return this.ck}set near(t){this.ck!==t&&(this.ck=t)}}class fi extends Ee{$i;fk;uk;dk;gk;mk;pk;constructor(t){super(t),this.$i=!1,this.fk=!1,this.uk=!1,this.dk=NaN,this.gk=NaN,this.mk=0,this.pk=0}get fromVertex(){return this.je}set fromVertex(t){this.je!==t&&(this.je=t)}get toVertex(){return this.qe}set toVertex(t){this.qe!==t&&(this.qe=t)}get valid(){return this.$i}set valid(t){this.$i!==t&&(e.s(t,"boolean",fi,"valid"),this.$i=t)}get rev(){return this.fk}set rev(t){this.fk!==t&&(e.s(t,"boolean",fi,"rev"),this.fk=t)}get forest(){return this.uk}set forest(t){this.uk!==t&&(e.s(t,"boolean",fi,"forest"),this.uk=t)}get portFromPos(){return this.dk}set portFromPos(t){this.dk!==t&&(e.s(t,"number",fi,"portFromPos"),this.dk=t)}get portToPos(){return this.gk}set portToPos(t){this.gk!==t&&(e.s(t,"number",fi,"portToPos"),this.gk=t)}get portFromColOffset(){return this.mk}set portFromColOffset(t){this.mk!==t&&(e.s(t,"number",fi,"portFromColOffset"),this.mk=t)}get portToColOffset(){return this.pk}set portToColOffset(t){this.pk!==t&&(e.s(t,"number",fi,"portToColOffset"),this.pk=t)}}var pi=(t=>(t[t.Default=0]="Default",t[t.Destination=1]="Destination",t[t.Source=2]="Source",t))(pi||{}),gi=(t=>(t[t.Forwards=10]="Forwards",t[t.Reverse=11]="Reverse",t[t.Ascending=12]="Ascending",t[t.Descending=13]="Descending",t))(gi||{}),mi=(t=>(t[t.CenterSubtrees=20]="CenterSubtrees",t[t.CenterChildren=21]="CenterChildren",t[t.Start=22]="Start",t[t.End=23]="End",t[t.Bus=24]="Bus",t[t.BusBranching=25]="BusBranching",t[t.TopLeftBus=26]="TopLeftBus",t[t.BottomRightBus=27]="BottomRightBus",t[t.Custom=28]="Custom",t))(mi||{}),yi=(t=>(t[t.None=30]="None",t[t.Block=31]="Block",t))(yi||{}),vi=(t=>(t[t.Layered=40]="Layered",t[t.LastParents=41]="LastParents",t[t.Alternating=42]="Alternating",t[t.RootOnly=43]="RootOnly",t))(vi||{}),xi=(t=>(t[t.Vertical=50]="Vertical",t[t.Horizontal=51]="Horizontal",t[t.FixedRoots=52]="FixedRoots",t))(xi||{}),bi=(t=>(t[t.Individual=60]="Individual",t[t.Siblings=61]="Siblings",t[t.Uniform=62]="Uniform",t))(bi||{});class wi extends Ne{Fi;Li;_f;Ng;sC;Fe;Xi;Ms;U;B;yk;ls;constructor(t){super(),this.Fi=new u,this.Li=0,this.ls=1,this._f=40,this.Ng=60,this.sC=[],this.Fe=!0,this.Xi=50,this.Ms=new v(10,10).u();const e=new ki(this);this.U=new Si(e),this.B=new Si(e),this.yk=[],t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Li=this.Li,t._f=this._f,t.Ng=this.Ng,t.Fe=this.Fe,t.Xi=this.Xi,t.Ms.a(this.Ms),t.U.copyInheritedPropertiesFrom(this.U),t.B.copyInheritedPropertiesFrom(this.B)}oi(t){t in mi?this.alignment=t:t in xi?this.arrangement=t:t in yi?this.compaction=t:t in pi?this.path=t:t in gi?this.sorting=t:t in vi?this.treeStyle=t:super.oi(t)}createNetwork(){return new ki(this)}makeNetwork(t){const e=this.createNetwork(),i=t=>{if(t instanceof ge)return!t.isLinkLabel&&"Comment"!==t.category;if(t instanceof be){const e=t.fromNode;if(null===e||e.isLinkLabel||"Comment"===e.category)return!1;const i=t.toNode;return!(null===i||i.isLinkLabel||"Comment"===i.category)}return!1};return t instanceof xt?(e.addParts(t.nodes,!0,i),e.addParts(t.links,!0,i)):t instanceof Ae?e.addParts(t.memberParts,!1,i):e.addParts(t.iterator,!1,i),e}doLayout(t){null===this.network&&(this.network=this.makeNetwork(t)),52!==this.arrangement&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));let e=this.diagram;null===e&&t instanceof xt&&(e=t),0===this.path&&null!==e?this.ls=e.isTreePathToChildren?1:2:this.ls=0===this.path?1:this.path,this.network.vertexes.count>0&&(this.jI(),this.qI(),this.WI(),this.JI(),this.$N(),this.$I(),this.arrangeTrees(),this.updateParts()),this.network=null,this.Fi=new u,this.isValidLayout=!0}jI(){this.network.deleteSelfEdges();const t=this.network.vertexes.iterator;for(;t.next();){const e=t.value;e.initialized=!1,e.level=0,e.parent=null,e.children=[]}if(this.Fi.count>0){const t=new u,e=this.Fi.iterator;for(;e.next();){const i=e.value;if(i instanceof ge){const e=this.network.findVertex(i);null!==e&&t.add(e)}else i instanceof Si&&t.add(i)}this.Fi=t}0===this.Fi.count&&this.findRoots();const e=this.Fi.copy().iterator;for(;e.next();){const t=e.value;t.initialized||(t.initialized=!0,this.nC(t))}let i=this.network.vertexes,n=null;for(;n=this.ZI(i),n.count>0;){const t=this.ED(n);null!==t&&this.Fi.add(t),t.initialized=!0,this.nC(t),i=n}}ZI(t){const e=new u,i=t.iterator;for(;i.next();){const t=i.value;t.initialized||e.add(t)}return e}findRoots(){const t=this.network.vertexes,i=t.iterator;for(;i.next();){const t=i.value;switch(this.ls){case 1:0===t.sourceEdges.count&&this.Fi.add(t);break;case 2:0===t.destinationEdges.count&&this.Fi.add(t);break;default:e.o("Unhandled path value "+this.ls.toString())}}if(0===this.Fi.count){const e=this.ED(t);null!==e&&this.Fi.add(e)}}ED(t){let i=999999,n=null;const s=t.iterator;for(;s.next();){const t=s.value;switch(this.ls){case 1:t.sourceEdges.count<i&&(i=t.sourceEdges.count,n=t);break;case 2:t.destinationEdges.count<i&&(i=t.destinationEdges.count,n=t);break;default:e.o("Unhandled path value "+this.ls.toString())}}return n}nC(t){if(null===t)return;switch(this.ls){case 1:if(t.destinationEdges.count>0){const e=new l,i=t.destinationVertexes;for(;i.next();){const n=i.value;this.UD(t,n)&&e.add(n)}e.count>0&&(t.children=e.toArray())}break;case 2:if(t.sourceEdges.count>0){const e=new l,i=t.sourceVertexes;for(;i.next();){const n=i.value;this.UD(t,n)&&e.add(n)}e.count>0&&(t.children=e.toArray())}break;default:e.o("Unhandled path value"+this.ls.toString())}const i=t.children,n=i.length;for(let e=0;e<n;e++){const n=i[e];n.initialized=!0,n.level=t.level+1,n.parent=t,this.Fi.delete(n)}for(let t=0;t<n;t++){const e=i[t];this.nC(e)}}UD(t,e){return!e.initialized||!(this.QI(e,t)||e.level>t.level)&&(this._I(e.parent,e),!0)}QI(t,e){if(null===e)return!1;let i=e.parent;for(;null!==i&&i!==t;)i=i.parent;return i===t}_I(t,e){if(null===t||null===e)return;const i=t.children;let n=0;for(let t=0;t<i.length;t++)i[t]===e&&n++;if(n>0){const s=new Array(i.length-n);let r=0;for(let t=0;t<i.length;t++)i[t]!==e&&(s[r++]=i[t]);t.children=s}}qI(){const t=this.Fi.iterator;for(;t.next();){const e=t.value;e instanceof Si&&this.BD(e)}}BD(t){if(null===t)return;this.initializeTreeVertexValues(t),25===t.alignment&&this.sortTreeVertexChildren(t);let e=0,i=t.childrenCount,n=0;const s=t.children,r=s.length;for(let t=0;t<r;t++){const r=s[t];this.BD(r),e+=r.descendantCount+1,i=Math.max(i,r.maxChildrenCount),n=Math.max(n,r.maxGenerationCount)}t.descendantCount=e,t.maxChildrenCount=i,t.maxGenerationCount=i>0?n+1:0}tE(t){switch(this._f){default:case 40:return null!==t.parent?t.parent:this.U;case 43:return null===t.parent?this.U:null===t.parent.parent?this.B:t.parent;case 42:return null!==t.parent?null!==t.parent.parent?t.parent.parent:this.B:this.U;case 41:{let e=!0;if(0===t.childrenCount)e=!1;else{const i=t.children,n=i.length;for(let t=0;t<n;t++)if(i[t].childrenCount>0){e=!1;break}}return e&&null!==t.parent?this.B:null!==t.parent?t.parent:this.U}}}initializeTreeVertexValues(t){const e=this.tE(t);if(t.copyInheritedPropertiesFrom(e),null!==t.parent&&25===t.parent.alignment){let e=t.angle;const i=t.parent.children;let n=0;for(;n<i.length&&t!==i[n];)n++;n%2==0?n!==i.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0}WI(){const t=this.Fi.iterator;for(;t.next();){const e=t.value;e instanceof Si&&this.VD(e)}}VD(t){if(null===t)return;this.assignTreeVertexValues(t);const e=t.children,i=e.length;for(let t=0;t<i;t++){const i=e[t];this.VD(i)}}assignTreeVertexValues(t){}JI(){const t=this.Fi.iterator;for(;t.next();){const e=t.value;e instanceof Si&&this.zD(e)}}zD(t){if(null===t)return;25!==t.alignment&&this.sortTreeVertexChildren(t);const e=t.children,i=e.length;for(let t=0;t<i;t++){const i=e[t];this.zD(i)}}sortTreeVertexChildren(t){switch(t.sorting){default:case 10:break;case 11:t.children.reverse();break;case 12:t.children.sort(t.comparer);break;case 13:t.children.sort(t.comparer),t.children.reverse()}}$N(){if(!this.comments)return;const t=this.network.vertexes.iterator;for(;t.next();){const e=t.value;this.addComments(e)}}addComments(t){const e=t.angle,i=t.parent;let n=0,s=21,r=!1;null!==i&&(n=i.angle,s=i.alignment,r=this.isBusAlignment(s));const o=90===e||270===e,a=90===n||270===n,l=0===t.childrenCount;let h=0,u=0,c=0;const d=t.commentSpacing;if(null!==t.node){const e=t.node.findNodesConnected();for(;e.next();){const i=e.value;if("Comment"!==i.category||!i.canLayout())continue;null===t.comments&&(t.comments=[]),t.comments.push(i),i.ensureBounds();const n=i.measuredBounds;o&&!l||!r&&!a&&l||r&&a&&l?(h=Math.max(h,n.width),u+=n.height+Math.abs(c)):(h+=n.width+Math.abs(c),u=Math.max(u,n.height)),c=d}}if(null!==t.comments){o&&!l||!r&&!a&&l||r&&a&&l?(h+=Math.abs(t.commentMargin),u=Math.max(0,u-t.height)):(u+=Math.abs(t.commentMargin),h=Math.max(0,h-t.width));const e=x.V(0,0,t.bounds.width+h,t.bounds.height+u);t.bounds=e,x.e(e)}}isBusAlignment(t){return 24===t||25===t||26===t||27===t}Jy(t){return 24===t||25===t}oC(t){const e=t.parent;if(null!==e){const i=e.alignment;if(this.isBusAlignment(i)){if(this.Jy(i)){const i=e.children;let n=0;for(;n<i.length&&t!==i[n];)n++;return n%2==0}return 26===i}}return!1}layoutComments(t){if(null!==t.comments){const e=t.node.measuredBounds,i=t.parent,n=t.angle;let s=0,r=21,o=!1;null!==i&&(s=i.angle,r=i.alignment,o=this.isBusAlignment(r));const a=90===n||270===n,l=90===s||270===s,h=0===t.childrenCount,u=this.oC(t);let c=0;const d=t.comments,f=d.length,p=y.l();for(let e=0;e<f;e++){const i=d[e],n=i.measuredBounds;if(a&&!h||!o&&!l&&h||o&&l&&h){if(s>135&&!o||l&&u)if(t.commentMargin>=0){p.i(t.bounds.x-t.commentMargin-n.width,t.bounds.y+c),i.move(p);const e=i.findLinksInto();for(;e.next();){const t=e.value;t.fromSpot=w.MiddleLeft,t.toSpot=w.MiddleRight}}else{p.i(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+c),i.move(p);const e=i.findLinksInto();for(;e.next();){const t=e.value;t.fromSpot=w.MiddleRight,t.toSpot=w.MiddleLeft}}else if(t.commentMargin>=0){p.i(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+c),i.move(p);const e=i.findLinksInto();for(;e.next();){const t=e.value;t.fromSpot=w.MiddleRight,t.toSpot=w.MiddleLeft}}else{p.i(t.bounds.x+t.commentMargin-n.width,t.bounds.y+c),i.move(p);const e=i.findLinksInto();for(;e.next();){const t=e.value;t.fromSpot=w.MiddleLeft,t.toSpot=w.MiddleRight}}t.commentSpacing>=0?c+=n.height+t.commentSpacing:c+=t.commentSpacing-n.height}else{if(s>135&&!o||!l&&u)if(t.commentMargin>=0){p.i(t.bounds.x+c,t.bounds.y-t.commentMargin-n.height),i.move(p);const e=i.findLinksInto();for(;e.next();){const t=e.value;t.fromSpot=w.MiddleTop,t.toSpot=w.MiddleBottom}}else{p.i(t.bounds.x+c,t.bounds.y+2*t.focus.y-t.commentMargin),i.move(p);const e=i.findLinksInto();for(;e.next();){const t=e.value;t.fromSpot=w.MiddleBottom,t.toSpot=w.MiddleTop}}else if(t.commentMargin>=0){p.i(t.bounds.x+c,t.bounds.y+2*t.focus.y+t.commentMargin),i.move(p);const e=i.findLinksInto();for(;e.next();){const t=e.value;t.fromSpot=w.MiddleBottom,t.toSpot=w.MiddleTop}}else{p.i(t.bounds.x+c,t.bounds.y+t.commentMargin-n.height),i.move(p);const e=i.findLinksInto();for(;e.next();){const t=e.value;t.fromSpot=w.MiddleTop,t.toSpot=w.MiddleBottom}}t.commentSpacing>=0?c+=n.width+t.commentSpacing:c+=t.commentSpacing-n.width}}y.e(p);const g=c-t.commentSpacing-(a?e.height:e.width);if(1===this.ls){const e=t.destinationEdges;for(;e.next();){const t=e.value.link;null!==t&&!t.isAvoiding&&(t.fromEndSegmentLength=g>0?g:NaN)}}else{const e=t.sourceEdges;for(;e.next();){const t=e.value.link;null!==t&&!t.isAvoiding&&(t.toEndSegmentLength=g>0?g:NaN)}}}}$I(){if(62===this.layerStyle){const t=[];let e=this.network.vertexes.iterator;for(;e.next();){const i=e.value;let n=i.parent;null===n&&(n=i);const s=0===n.angle||180===n.angle;let r=t[i.level];void 0===r&&(r=0),t[i.level]=Math.max(r,s?i.width:i.height)}for(let e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.sC=t,e=this.network.vertexes.iterator;e.next();){const i=e.value;let n=i.parent;null===n&&(n=i),0===n.angle||180===n.angle?(180===n.angle&&(i.focusX+=t[i.level]-i.width),i.width=t[i.level]):(270===n.angle&&(i.focusY+=t[i.level]-i.height),i.height=t[i.level])}}else if(61===this.layerStyle){const t=this.network.vertexes.iterator;for(;t.next();){const e=t.value,i=0===e.angle||180===e.angle;let n=-1;for(let t=0;t<e.children.length;t++){const s=e.children[t];n=Math.max(n,i?s.width:s.height)}if(n>=0)for(let t=0;t<e.children.length;t++){const s=e.children[t];i?(180===e.angle&&(s.focusX+=n-s.width),s.width=n):(270===e.angle&&(s.focusY+=n-s.height),s.height=n)}}}const t=this.Fi.iterator;for(;t.next();){const e=t.value;e instanceof Si&&this.layoutTree(e)}}layoutTree(t){if(null===t)return;const e=t.children,i=e.length;for(let t=0;t<i;t++){const i=e[t];this.layoutTree(i)}if(30===t.compaction)this.XD(t);else 25===t.alignment?this.XD(t):this.iE(t)}XD(t){if(0===t.childrenCount){let e=!1,i=0,n=21;null!==t.parent&&(i=t.parent.angle,n=t.parent.alignment,e=this.isBusAlignment(n));const s=this.oC(t);return t.O.i(0,0),t.ut.i(t.width,t.height),void(null===t.parent||null===t.comments||(180!==i&&270!==i||e)&&!s?t.lt.i(0,0):180===i&&!e||(90===i||270===i)&&s?t.lt.i(t.width-2*t.focus.x,0):t.lt.i(0,t.height-2*t.focus.y))}const e=this.orthoAngle(t),i=90===e||270===e;let n=0;const s=t.children,r=s.length;for(let t=0;t<r;t++){const e=s[t];n=Math.max(n,i?e.ut.width:e.ut.height)}const o=t.alignment,a=22===o,l=23===o,h=this.isBusAlignment(o),u=Math.max(0,t.breadthLimit),c=this.computeLayerSpacing(t),d=t.nodeSpacing,f=this.computeNodeIndent(t),p=a||l?0:f/2,g=t.rowSpacing;let m=0;(a||l)&&(m=Math.max(0,t.rowIndent));const y=t.width,v=t.height;let x=0,b=0,w=0,k=0,S=0,C=0,M=0,T=0,A=0,P=0;if(h&&!this.Jy(o)&&e>135&&s.reverse(),this.Jy(o))if(r>1)for(let t=0;t<r;t++){const e=s[t],n=e.ut;t%2==0&&t!==r-1?A=Math.max(A,(i?n.width:n.height)+this.computeBusNodeSpacing(e)-d):t%2!=0&&(P=Math.max(P,(i?n.width:n.height)+this.computeBusNodeSpacing(e)-d))}else 1===r&&(A=i?s[0].ut.width:s[0].ut.height);if(h)switch(o){case 24:case 25:let o;o=e<135?this.YD(t,s,A,P,x,b):this.KD(t,s,A,P,x,b),A=o.x,x=o.width,b=o.height;break;case 26:for(let t=0;t<r;t++){const e=s[t],r=e.ut,o=0===M?0:g;i?(e.O.i(n-r.width,S+o),x=Math.max(x,r.width),b=Math.max(b,S+o+r.height),S+=o+r.height):(e.O.i(k+o,n-r.height),x=Math.max(x,k+o+r.width),b=Math.max(b,r.height),k+=o+r.width),M++}break;case 27:for(let e=0;e<r;e++){const n=s[e],r=n.ut,o=0===M?0:g;i?(n.O.i(d/2+t.focus.x,S+o),x=Math.max(x,r.width),b=Math.max(b,S+o+r.height),S+=o+r.height):(n.O.i(k+o,d/2+t.focus.y),x=Math.max(x,k+o+r.width),b=Math.max(b,r.height),k+=o+r.width),M++}}else for(let a=0;a<r;a++){const r=s[a],l=r.ut;if(i){u>0&&M>0&&k+d+l.width>u&&(k<n&&this.ic(t,o,n-k,0,T,a-1),C++,M=0,T=a,w=b,k=0,S=e>135?-b-g:b+g);const i=0===M?p:d;this.wk(r,0,S),r.O.i(k+i,S),x=Math.max(x,k+i+l.width),b=Math.max(b,w+(0===C?0:g)+l.height),k+=i+l.width}else{u>0&&M>0&&S+d+l.height>u&&(S<n&&this.ic(t,o,0,n-S,T,a-1),C++,M=0,T=a,w=x,S=0,k=e>135?-x-g:x+g);const i=0===M?p:d;this.wk(r,k,0),r.O.i(k,S+i),b=Math.max(b,S+i+l.height),x=Math.max(x,w+(0===C?0:g)+l.width),S+=i+l.height}M++}C>0&&(i?(b+=Math.max(0,c),k<x&&this.ic(t,o,x-k,0,T,r-1),m>0&&(l||this.tu(t,m,0,0,r-1),x+=m)):(x+=Math.max(0,c),S<b&&this.ic(t,o,0,b-S,T,r-1),m>0&&(l||this.tu(t,0,m,0,r-1),b+=m)));let N=0,D=0;switch(o){case 20:i?N+=x/2-t.focus.x-f/2:D+=b/2-t.focus.y-f/2;break;default:case 21:if(C>0)i?N+=x/2-t.focus.x-f/2:D+=b/2-t.focus.y-f/2;else{const e=r;if(i){const i=s[0].O.x+s[0].lt.x;N+=i+(s[e-1].O.x+s[e-1].lt.x+2*s[e-1].focus.x-i)/2-t.focus.x-f/2}else{const i=s[0].O.y+s[0].lt.y;D+=i+(s[e-1].O.y+s[e-1].lt.y+2*s[e-1].focus.y-i)/2-t.focus.y-f/2}}break;case 22:i?(N-=f,x+=f):(D-=f,b+=f);break;case 23:i?(N+=x-t.width+f,x+=f):(D+=b-t.height+f,b+=f);break;case 24:case 25:i?N+=r>1?A+d/2-t.focus.x:s[0].focus.x-t.focus.x+s[0].lt.x:D+=r>1?A+d/2-t.focus.y:s[0].focus.y-t.focus.y+s[0].lt.y;break;case 26:i?N+=x+d/2-t.focus.x:D+=b+d/2-t.focus.y;break;case 27:break;case 28:const e=this.customAlignment(t,N,D,x,b);N=e[0],D=e[1],x=e[2],b=e[3]}for(let t=0;t<r;t++){const n=s[t];i?n.O.i(n.O.x+n.lt.x-N,n.O.y+(e>135?(h?-b:-n.ut.height)+n.lt.y-c:v+c+n.lt.y)):n.O.i(n.O.x+(e>135?(h?-x:-n.ut.width)+n.lt.x-c:y+c+n.lt.x),n.O.y+n.lt.y-D)}i?(x=this.rC(t,x,N),N<0&&(N=0),e>135&&(D+=b+c),b=Math.max(Math.max(b,v),b+v+c)):(e>135&&(N+=x+c),x=Math.max(Math.max(x,y),x+y+c),b=this.lC(t,b,D),D<0&&(D=0)),t.lt.i(N,D),t.ut.i(x,b)}customAlignment(t,e,i,n,s){return[e,i,n,s]}YD(t,e,i,n,s,r){const o=e.length;if(0===o)return new x(i,0,s,r);if(1===o){const t=e[0];return s=t.ut.width,r=t.ut.height,new x(i,0,s,r)}const a=t.nodeSpacing,l=t.rowSpacing,h=90===this.orthoAngle(t);let u=0,c=0,d=0;for(let t=0;t<o;t++){if(t%2!=0||o>1&&t===o-1)continue;const n=e[t],f=n.ut,p=0===u?0:l;if(h){const t=this.computeBusNodeSpacing(n)-a;n.O.i(i-(f.width+t),d+p),s=Math.max(s,f.width+t),r=Math.max(r,d+p+f.height),d+=p+f.height}else{const t=this.computeBusNodeSpacing(n)-a;n.O.i(c+p,i-(f.height+t)),r=Math.max(r,f.height+t),s=Math.max(s,c+p+f.width),c+=p+f.width}u++}u=0;const f=c,p=d;h?(c=i+a,d=0):(c=0,d=i+a);for(let t=0;t<o;t++){if(t%2==0)continue;const i=e[t],n=i.ut,o=0===u?0:l;if(h){const t=this.computeBusNodeSpacing(i)-a;i.O.i(c+t,d+o),s=Math.max(s,c+n.width+t),r=Math.max(r,d+o+n.height),d+=o+n.height}else{const t=this.computeBusNodeSpacing(i)-a;i.O.i(c+o,d+t),s=Math.max(s,c+o+n.width),r=Math.max(r,d+n.height+t),c+=o+n.width}u++}if(o>1&&o%2==1){const n=e[o-1],l=n.ut,u=this.computeBusLastRowSpacing(n,h?Math.max(Math.abs(p),Math.abs(d)):Math.max(Math.abs(f),Math.abs(c)));if(h){n.O.i(i+a/2-n.focus.x-n.lt.x,r+u);const e=i+a/2-n.focus.x-n.lt.x;s=Math.max(s,e+l.width),e<0&&(s-=e),r=Math.max(r,Math.max(p,d)+u+l.height),n.O.x<0&&(i=this.xk(t,n.O.x,!1,i,a))}else{n.O.i(s+u,i+a/2-n.focus.y-n.lt.y),s=Math.max(s,Math.max(f,c)+u+l.width);const e=i+a/2-n.focus.y-n.lt.y;r=Math.max(r,e+l.height),e<0&&(r-=e),n.O.y<0&&(i=this.xk(t,n.O.y,!0,i,a))}}return new x(i,0,s,r)}KD(t,e,i,n,s,r){const o=e.length;if(0===o)return new x(i,0,s,r);if(1===o){const t=e[0];return s=t.ut.width,r=t.ut.height,new x(i,0,s,r)}const a=t.nodeSpacing,l=t.rowSpacing,h=270===this.orthoAngle(t);let u=0,c=0,d=0;for(let t=0;t<o;t++){if(t%2!=0||o>1&&t===o-1)continue;const n=e[t],f=n.ut,p=0===u?0:l;if(h){const t=this.computeBusNodeSpacing(n)-a;d-=p+f.height,n.O.i(i-(f.width+t),d),s=Math.max(s,f.width+t),r=Math.max(r,Math.abs(d))}else{const t=this.computeBusNodeSpacing(n)-a;c-=p+f.width,n.O.i(c,i-(f.height+t)),r=Math.max(r,f.height+t),s=Math.max(s,Math.abs(c))}u++}u=0;const f=c,p=d;h?(c=i+a,d=0):(c=0,d=i+a);for(let t=0;t<o;t++){if(t%2==0)continue;const i=e[t],n=i.ut,o=0===u?0:l;if(h){const t=this.computeBusNodeSpacing(i)-a;d-=o+n.height,i.O.i(c+t,d),s=Math.max(s,c+n.width+t),r=Math.max(r,Math.abs(d))}else{const t=this.computeBusNodeSpacing(i)-a;c-=o+n.width,i.O.i(c,d+t),r=Math.max(r,d+n.height+t),s=Math.max(s,Math.abs(c))}u++}if(o>1&&o%2==1){const n=e[o-1],l=n.ut,u=this.computeBusLastRowSpacing(n,h?Math.max(Math.abs(p),Math.abs(d)):Math.max(Math.abs(f),Math.abs(c)));if(h){n.O.i(i+a/2-n.focus.x-n.lt.x,-r-l.height-u);const e=i+a/2-n.focus.x-n.lt.x;s=Math.max(s,e+l.width),e<0&&(s-=e),r=Math.max(r,Math.abs(Math.min(p,d))+u+l.height),n.O.x<0&&(i=this.xk(t,n.O.x,!1,i,a))}else{n.O.i(-s-l.width-u,i+a/2-n.focus.y-n.lt.y),s=Math.max(s,Math.abs(Math.min(f,c))+u+l.width);const e=i+a/2-n.focus.y-n.lt.y;r=Math.max(r,e+l.height),e<0&&(r-=e),n.O.y<0&&(i=this.xk(t,n.O.y,!0,i,a))}}for(let t=0;t<o;t++){const i=e[t];h?i.O.i(i.O.x,i.O.y+r):i.O.i(i.O.x+s,i.O.y)}return new x(i,0,s,r)}computeBusNodeSpacing(t){return null===t.parent?0:t.parent.nodeSpacing}computeBusLastRowSpacing(t,e){return null===t.parent?0:t.parent.rowSpacing}xk(t,e,i,n,s){const r=t.children,o=r.length;for(let t=0;t<o;t++)i?r[t].O.i(r[t].O.x,r[t].O.y-e):r[t].O.i(r[t].O.x-e,r[t].O.y);const a=r[o-1];return Math.max(n,i?a.lt.y+a.focus.y-s/2:a.lt.x+a.focus.x-s/2)}rC(t,e,i){switch(t.alignment){case 21:case 20:let n=e;return i+t.width>n&&(n=i+t.width),i<0&&(n-=i),n;case 22:return t.width>e?t.width:e;case 23:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case 24:case 25:const s=Math.min(0,i),r=Math.max(e,i+t.width);return Math.max(t.width,r-s);case 26:return t.width-t.focus.x+t.nodeSpacing/2+e;case 27:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}lC(t,e,i){switch(t.alignment){case 21:case 20:let n=e;return i+t.height>n&&(n=i+t.height),i<0&&(n-=i),n;case 22:return t.height>e?t.height:e;case 23:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case 24:case 25:const s=Math.min(0,i),r=Math.max(e,i+t.height);return Math.max(t.height,r-s);case 26:return t.height-t.focus.y+t.nodeSpacing/2+e;case 27:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}hC(t,i,n){switch(t){case 20:case 21:i/=2,n/=2;break;case 22:i=0,n=0;break;case 23:break;default:e.o("Unhandled alignment value "+t.toString())}return new y(i,n)}ic(t,e,i,n,s,r){const o=this.hC(e,i,n);this.tu(t,o.x,o.y,s,r)}tu(t,e,i,n,s){if(0===e&&0===i)return;const r=t.children;for(let t=n;t<=s;t++){const n=r[t].O;n.x+=e,n.y+=i}}wk(t,i,n){const s=t.parent;switch(this.ls){case 1:{const e=t.sourceEdges;for(;e.next();){const t=e.value;t.fromVertex===s&&t.relativePoint.i(i,n)}break}case 2:{const e=t.destinationEdges;for(;e.next();){const t=e.value;t.toVertex===s&&t.relativePoint.i(i,n)}break}default:e.o("Unhandled path value "+this.ls.toString())}}iE(t){if(0===t.childrenCount){const e=t.parent;let i=!1,n=0,s=21;null!==e&&(n=e.angle,s=e.alignment,i=this.isBusAlignment(s));const r=this.oC(t);return t.O.i(0,0),t.ut.i(t.width,t.height),null===t.parent||null===t.comments||(180!==n&&270!==n||i)&&!r?t.lt.i(0,0):180===n&&!i||(90===n||270===n)&&r?t.lt.i(t.width-2*t.focus.x,0):t.lt.i(0,t.height-2*t.focus.y),t.Cg=null,void(t.Lg=null)}const i=this.orthoAngle(t),n=90===i||270===i;let s=0;const r=t.children,o=r.length;for(let t=0;t<o;t++){const e=r[t];s=Math.max(s,n?e.ut.width:e.ut.height)}const a=t.alignment,l=22===a,h=23===a,u=this.isBusAlignment(a),c=Math.max(0,t.breadthLimit),d=this.computeLayerSpacing(t),f=t.nodeSpacing,p=this.computeNodeIndent(t),g=t.rowSpacing;let m=0;(l||h)&&(m=Math.max(0,t.rowIndent));const y=t.width,v=t.height;let x=0,b=0,w=0,k=null,S=null,C=0,M=0,T=0,A=0,P=0,N=0,D=0,L=0,E=0;if(u&&!this.Jy(a)&&i>135&&r.reverse(),this.Jy(a))if(o>1)for(let t=0;t<o;t++)t%2==0&&t!==o-1?L=Math.max(L,n?r[t].ut.width:r[t].ut.height):t%2!=0&&(E=Math.max(E,n?r[t].ut.width:r[t].ut.height));else 1===o&&(L=n?r[0].ut.width:r[0].ut.height);if(u){switch(a){case 24:let e;e=i<135?this.YD(t,r,L,E,x,b):this.KD(t,r,L,E,x,b),L=e.x,x=e.width,b=e.height;break;case 26:for(let t=0;t<o;t++){const e=r[t],i=e.ut,o=0===N?0:g;n?(e.O.i(s-i.width,A+o),x=Math.max(x,i.width),b=Math.max(b,A+o+i.height),A+=o+i.height):(e.O.i(T+o,s-i.height),x=Math.max(x,T+o+i.width),b=Math.max(b,i.height),T+=o+i.width),N++}break;case 27:for(let e=0;e<o;e++){const i=r[e],s=i.ut,o=0===N?0:g;n?(i.O.i(f/2+t.focus.x,A+o),x=Math.max(x,s.width),b=Math.max(b,A+o+s.height),A+=o+s.height):(i.O.i(T+o,f/2+t.focus.y),x=Math.max(x,T+o+s.width),b=Math.max(b,s.height),T+=o+s.width),N++}}k=this.ae(2),S=this.ae(2),n?(k[0].i(0,0),k[1].i(0,b),S[0].i(x,0),S[1].i(x,b)):(k[0].i(0,0),k[1].i(x,0),S[0].i(0,b),S[1].i(x,b))}else for(let l=0;l<o;l++){const o=r[l],h=o.ut;if(n){c>0&&N>0&&T+f+h.width>c&&(T<s&&this.ic(t,a,s-T,0,D,l-1),P++,N=0,D=l,w=b,T=0,A=i>135?-b-g:b+g),this.wk(o,0,A);let n=0;if(0===N)k=o.Cg,S=o.Lg,C=h.width,M=h.height,(null===k||null===S||i!==this.orthoAngle(o))&&(k=this.ae(2),S=this.ae(2),k[0].i(0,0),k[1].i(0,M),S[0].i(C,0),S[1].i(C,M));else{const i=e.et(),s=this.GD(t,o,k,S,C,M,i);n=s.x,k=i[0],S=i[1],C=s.width,M=s.height,e.J(i),T<h.width&&n<0&&(this.tu(t,-n,0,D,l-1),this.bk(k,-n,0),this.bk(S,-n,0),n=0)}o.O.i(n,A),x=Math.max(x,C),b=Math.max(b,w+(0===P?0:g)+h.height),T=C}else{c>0&&N>0&&A+f+h.height>c&&(A<s&&this.ic(t,a,0,s-A,D,l-1),P++,N=0,D=l,w=x,A=0,T=i>135?-x-g:x+g),this.wk(o,T,0);let n=0;if(0===N)k=o.Cg,S=o.Lg,C=h.width,M=h.height,(null===k||null===S||i!==this.orthoAngle(o))&&(k=this.ae(2),S=this.ae(2),k[0].i(0,0),k[1].i(C,0),S[0].i(0,M),S[1].i(C,M));else{const i=e.et(),s=this.GD(t,o,k,S,C,M,i);n=s.x,k=i[0],S=i[1],C=s.width,M=s.height,e.J(i),A<h.height&&n<0&&(this.tu(t,0,-n,D,l-1),this.bk(k,0,-n),this.bk(S,0,-n),n=0)}o.O.i(T,n),b=Math.max(b,M),x=Math.max(x,w+(0===P?0:g)+h.width),A=M}N++}P>0&&(n?(b+=Math.max(0,d),T<x&&this.ic(t,a,x-T,0,D,o-1),m>0&&(h||this.tu(t,m,0,0,o-1),x+=m)):(x+=Math.max(0,d),A<b&&this.ic(t,a,0,b-A,D,o-1),m>0&&(h||this.tu(t,0,m,0,o-1),b+=m)));let _=0,O=0;switch(a){case 20:n?_+=x/2-t.focus.x-p/2:O+=b/2-t.focus.y-p/2;break;default:case 21:if(P>0)n?_+=x/2-t.focus.x-p/2:O+=b/2-t.focus.y-p/2;else{const e=o;if(n){const i=r[0].O.x+r[0].lt.x;_+=i+(r[e-1].O.x+r[e-1].lt.x+2*r[e-1].focus.x-i)/2-t.focus.x-p/2}else{const i=r[0].O.y+r[0].lt.y;O+=i+(r[e-1].O.y+r[e-1].lt.y+2*r[e-1].focus.y-i)/2-t.focus.y-p/2}}break;case 22:n?(_-=p,x+=p):(O-=p,b+=p);break;case 23:n?(_+=x-t.width+p,x+=p):(O+=b-t.height+p,b+=p);break;case 24:n?_+=o>1?L+f/2-t.focus.x:r[0].focus.x-t.focus.x+r[0].lt.x:O+=o>1?L+f/2-t.focus.y:r[0].focus.y-t.focus.y+r[0].lt.y;break;case 26:n?_+=x+f/2-t.focus.x:O+=b+f/2-t.focus.y;break;case 27:break;case 28:const e=this.customAlignment(t,_,O,x,b);_=e[0],O=e[1],x=e[2],b=e[3]}for(let t=0;t<o;t++){const e=r[t];n?e.O.i(e.O.x+e.lt.x-_,e.O.y+(i>135?(u?-b:-e.ut.height)+e.lt.y-d:v+d+e.lt.y)):e.O.i(e.O.x+(i>135?(u?-x:-e.ut.width)+e.lt.x-d:y+d+e.lt.x),e.O.y+e.lt.y-O)}let F,R,I=0,B=0;if(u)n?(x=this.rC(t,x,_),_<0&&(_=0),i>135&&(O+=b+d),b+=v+d,27===a&&(I+=f/2+t.focus.x),B+=v+d):(i>135&&(_+=x+d),x+=y+d,b=this.lC(t,b,O),O<0&&(O=0),27===a&&(B+=f/2+t.focus.y),I+=y+d);else if(n){if(null===t.comments){if(y>x){const t=this.hC(a,y-x,0);I=t.x,B=t.y,x=y,_=0}}else x=this.rC(t,x,_);_<0&&(I-=_,_=0),i>135&&(O+=b+d),b=Math.max(Math.max(b,v),b+v+d),B+=v+d}else{if(i>135&&(_+=x+d),x=Math.max(Math.max(x,y),x+y+d),null===t.comments){if(v>b){const t=this.hC(a,0,v-b);I=t.x,B=t.y,b=v,O=0}}else b=this.lC(t,b,O);O<0&&(B-=O,O=0),I+=y+d}if(P>0)F=this.ae(4),R=this.ae(4),n?(F[2].i(0,v+d),F[3].i(F[2].x,b),R[2].i(x,F[2].y),R[3].i(R[2].x,F[3].y)):(F[2].i(y+d,0),F[3].i(x,F[2].y),R[2].i(F[2].x,b),R[3].i(F[3].x,R[2].y));else{F=this.ae(k.length+2),R=this.ae(S.length+2);for(let t=0;t<k.length;t++){const e=k[t];F[t+2].i(e.x+I,e.y+B)}for(let t=0;t<S.length;t++){const e=S[t];R[t+2].i(e.x+I,e.y+B)}}n?(F[0].i(_,0),F[1].i(F[0].x,v),F[2].y<F[1].y&&(F[2].x>F[0].x?F[2].a(F[1]):F[1].a(F[2])),F[3].y<F[2].y&&(F[3].x>F[0].x?F[3].a(F[2]):F[2].a(F[3])),R[0].i(_+y,0),R[1].i(R[0].x,v),R[2].y<R[1].y&&(R[2].x<R[0].x?R[2].a(R[1]):R[1].a(R[2])),R[3].y<R[2].y&&(R[3].x<R[0].x?R[3].a(R[2]):R[2].a(R[3])),F[2].y-=d/2,R[2].y-=d/2):(F[0].i(0,O),F[1].i(y,F[0].y),F[2].x<F[1].x&&(F[2].y>F[0].y?F[2].a(F[1]):F[1].a(F[2])),F[3].x<F[2].x&&(F[3].y>F[0].y?F[3].a(F[2]):F[2].a(F[3])),R[0].i(0,O+v),R[1].i(y,R[0].y),R[2].x<R[1].x&&(R[2].y<R[0].y?R[2].a(R[1]):R[1].a(R[2])),R[3].x<R[2].x&&(R[3].y<R[0].y?R[3].a(R[2]):R[2].a(R[3])),F[2].x-=d/2,R[2].x-=d/2),this._s(k),this._s(S),t.Cg=F,t.Lg=R,t.lt.i(_,O),t.ut.i(x,b)}bk(t,e,i){for(let n=0;n<t.length;n++){const s=t[n];s.x+=e,s.y+=i}}GD(t,e,i,n,s,r,o){const a=this.orthoAngle(t),l=90===a||270===a,h=t.nodeSpacing,u=i,c=n,d=s,f=r;let p=e.Cg,g=e.Lg;const m=e.ut,y=l?Math.max(f,m.height):Math.max(d,m.width);if((null===p||a!==this.orthoAngle(e))&&(p=this.ae(2),g=this.ae(2),l?(p[0].i(0,0),p[1].i(0,m.height),g[0].i(m.width,0),g[1].i(g[0].x,p[1].y)):(p[0].i(0,0),p[1].i(m.width,0),g[0].i(0,m.height),g[1].i(p[1].x,g[0].y))),l){const t=d;let e=t-this.eE(c,p,t);return e+=h,i=this.sE(u,p,e),n=this.nE(c,g,e),s=Math.max(0,e)+m.width,r=y,this._s(u),this._s(p),this._s(c),this._s(g),o[0]=i,o[1]=n,new x(e,0,s,r)}{const t=f;let e=t-this.oE(c,p,t);return e+=h,i=this.rE(u,p,e),n=this.lE(c,g,e),s=y,r=Math.max(0,e)+m.height,this._s(u),this._s(p),this._s(c),this._s(g),o[0]=i,o[1]=n,new x(e,0,s,r)}}rE(t,e,i){if(null===t||t.length<2||null===e||e.length<2)return null;const n=this.ae(t.length+e.length);let s=0,r=0,o=0;for(;r<e.length&&e[r].x<t[0].x;){const t=e[r++];n[o++].i(t.x,t.y+i)}for(;s<t.length;){const e=t[s++];n[o++].i(e.x,e.y)}const a=t[t.length-1].x;for(;r<e.length&&e[r].x<=a;)r++;for(;r<e.length&&e[r].x>a;){const t=e[r++];n[o++].i(t.x,t.y+i)}const l=this.ae(o);for(s=0;s<o;s++)l[s].a(n[s]);return this._s(n),l}sE(t,e,i){if(null===t||t.length<2||null===e||e.length<2)return null;const n=this.ae(t.length+e.length);let s=0,r=0,o=0;for(;r<e.length&&e[r].y<t[0].y;){const t=e[r++];n[o++].i(t.x+i,t.y)}for(;s<t.length;){const e=t[s++];n[o++].i(e.x,e.y)}const a=t[t.length-1].y;for(;r<e.length&&e[r].y<=a;)r++;for(;r<e.length&&e[r].y>a;){const t=e[r++];n[o++].i(t.x+i,t.y)}const l=this.ae(o);for(s=0;s<o;s++)l[s].a(n[s]);return this._s(n),l}lE(t,e,i){if(null===t||t.length<2||null===e||e.length<2)return null;const n=this.ae(t.length+e.length);let s=0,r=0,o=0;for(;s<t.length&&t[s].x<e[0].x;){const e=t[s++];n[o++].i(e.x,e.y)}for(;r<e.length;){const t=e[r++];n[o++].i(t.x,t.y+i)}const a=e[e.length-1].x;for(;s<t.length&&t[s].x<=a;)s++;for(;s<t.length&&t[s].x>a;){const e=t[s++];n[o++].i(e.x,e.y)}const l=this.ae(o);for(s=0;s<o;s++)l[s].a(n[s]);return this._s(n),l}nE(t,e,i){if(null===t||t.length<2||null===e||e.length<2)return null;const n=this.ae(t.length+e.length);let s=0,r=0,o=0;for(;s<t.length&&t[s].y<e[0].y;){const e=t[s++];n[o++].i(e.x,e.y)}for(;r<e.length;){const t=e[r++];n[o++].i(t.x+i,t.y)}const a=e[e.length-1].y;for(;s<t.length&&t[s].y<=a;)s++;for(;s<t.length&&t[s].y>a;){const e=t[s++];n[o++].i(e.x,e.y)}const l=this.ae(o);for(s=0;s<o;s++)l[s].a(n[s]);return this._s(n),l}oE(t,e,i){let n=9999999;if(null===t||t.length<2||null===e||e.length<2)return n;let s=0,r=0;for(;s<t.length&&r<e.length;){const o=t[s],a=e[r],l=a.x;let h=a.y;h+=i;let u=o;s+1<t.length&&(u=t[s+1]);let c=a,d=c.x,f=c.y;r+1<e.length&&(c=e[r+1],d=c.x,f=c.y,f+=i);let p=n;o.x===l?p=h-o.y:o.x>l&&o.x<d?p=h+(o.x-l)/(d-l)*(f-h)-o.y:l>o.x&&l<u.x&&(p=h-(o.y+(l-o.x)/(u.x-o.x)*(u.y-o.y))),p<n&&(n=p),u.x<=o.x?s++:d<=l?r++:(u.x<=d&&s++,d<=u.x&&r++)}return n}eE(t,e,i){let n=9999999;if(null===t||t.length<2||null===e||e.length<2)return n;let s=0,r=0;for(;s<t.length&&r<e.length;){const o=t[s],a=e[r];let l=a.x;const h=a.y;l+=i;let u=o;s+1<t.length&&(u=t[s+1]);let c=a,d=c.x,f=c.y;r+1<e.length&&(c=e[r+1],d=c.x,f=c.y,d+=i);let p=n;o.y===h?p=l-o.x:o.y>h&&o.y<f?p=l+(o.y-h)/(f-h)*(d-l)-o.x:h>o.y&&h<u.y&&(p=l-(o.x+(h-o.y)/(u.y-o.y)*(u.x-o.x))),p<n&&(n=p),u.y<=o.y?s++:f<=h?r++:(u.y<=f&&s++,f<=u.y&&r++)}return n}ae(t){const e=this.yk[t];if(void 0!==e){const t=e.pop();if(void 0!==t)return t}const i=[];for(let e=0;e<t;e++)i[e]=new y;return i}_s(t){if(!t)return;const e=t.length;let i=this.yk[e];void 0===i&&(i=[],this.yk[e]=i),i.push(t)}arrangeTrees(){if(52===this.Xi){const t=this.Fi.iterator;for(;t.next();){const e=t.value;if(!(e instanceof Si))continue;const i=e.node;if(null===i)continue;const n=i.position;let s=n.x,r=n.y;isFinite(s)||(s=0),isFinite(r)||(r=0),this.aC(e,s,r)}}else{const t=[],e=this.Fi.iterator;for(;e.next();){const i=e.value;i instanceof Si&&t.push(i)}switch(this.sorting){default:case 10:break;case 11:t.reverse();break;case 12:t.sort(this.comparer);break;case 13:t.sort(this.comparer),t.reverse()}const i=this.arrangementOrigin;let n=i.x,s=i.y;for(let e=0;e<t.length;e++){const i=t[e];if(50===(this.aC(i,n+i.lt.x,s+i.lt.y),this.Xi))s+=i.ut.height+this.Ms.height;else n+=i.ut.width+this.Ms.width}}}aC(t,e,i){if(null===t)return;t.x=e,t.y=i;const n=t.children,s=n.length;for(let t=0;t<s;t++){const s=n[t];this.aC(s,e+s.O.x,i+s.O.y)}}commitLayout(){this.zy(),this.commitNodes(),this.eC(),this.isRouting&&this.commitLinks()}commitNodes(){const t=this.network.vertexes.iterator;for(;t.next();)t.value.commit();for(t.reset();t.next();){const e=t.value;this.layoutComments(e)}}eC(){if(62!==this.layerStyle)return;const t=this.sC,e=[];let i=null;const n=this.network.vertexes.iterator;for(;n.next();){const t=n.value;null===i?i=t.bounds.copy():i.unionRect(t.bounds);let s=e[t.level];s=void 0===s?this.computeLayerSpacing(t):Math.max(s,this.computeLayerSpacing(t)),e[t.level]=s}for(let t=0;t<e.length;t++)void 0===e[t]&&(e[t]=0);let s;90===this.angle||270===this.angle?(i.inflate(this.nodeSpacing/2,this.layerSpacing),s=new y(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.inflate(this.layerSpacing,this.nodeSpacing/2),s=new y(-this.layerSpacing/2,-this.nodeSpacing/2));const r=[],o=90===this.angle||270===this.angle?i.width:i.height;let a=0;if(180===this.angle||270===this.angle)for(let i=0;i<t.length;i++)a+=t[i]+e[i];for(let i=0;i<t.length;i++){const n=t[i]+e[i];270===this.angle?(a-=n,r.push(new x(0,a,o,n))):90===this.angle?(r.push(new x(0,a,o,n)),a+=n):180===this.angle?(a-=n,r.push(new x(a,0,n,o))):(r.push(new x(a,0,n,o)),a+=n)}this.commitLayers(r,s)}commitLayers(t,e){}commitLinks(){const t=this.network.edges.iterator;for(;t.next();)t.value.commit()}zy(){const t=this.Fi.iterator;for(;t.next();){const e=t.value;e instanceof Si&&this.HD(e)}}HD(t){if(null===t)return;this.setPortSpots(t);const e=t.children,i=e.length;for(let t=0;t<i;t++){const i=e[t];this.HD(i)}}setPortSpots(t){const e=t.alignment;if(this.isBusAlignment(e))this.hE(t,e);else{const e=this.orthoAngle(t);if(1===this.ls){const i=t.destinationEdges;for(;i.next();){const n=i.value.link;if(null!==n){if(t.setsPortSpot)if(t.portSpot.isDefault())switch(e){case 0:n.fromSpot=w.MiddleRight;break;case 90:n.fromSpot=w.MiddleBottom;break;case 180:n.fromSpot=w.MiddleLeft;break;default:n.fromSpot=w.MiddleTop}else n.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.isDefault())switch(e){case 0:n.toSpot=w.MiddleLeft;break;case 90:n.toSpot=w.MiddleTop;break;case 180:n.toSpot=w.MiddleRight;break;default:n.toSpot=w.MiddleBottom}else n.toSpot=t.childPortSpot}}}else{const i=t.sourceEdges;for(;i.next();){const n=i.value.link;if(null!==n){if(t.setsPortSpot)if(t.portSpot.isDefault())switch(e){case 0:n.toSpot=w.MiddleRight;break;case 90:n.toSpot=w.MiddleBottom;break;case 180:n.toSpot=w.MiddleLeft;break;default:n.toSpot=w.MiddleTop}else n.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.isDefault())switch(e){case 0:n.fromSpot=w.MiddleLeft;break;case 90:n.fromSpot=w.MiddleTop;break;case 180:n.fromSpot=w.MiddleRight;break;default:n.fromSpot=w.MiddleBottom}else n.fromSpot=t.childPortSpot}}}}}hE(t,e){const i=1===this.ls,n=this.orthoAngle(t);let s;switch(n){case 0:s=w.MiddleRight;break;case 90:s=w.MiddleBottom;break;case 180:s=w.MiddleLeft;break;default:s=w.MiddleTop}const r=t.children,o=r.length;switch(e){case 24:case 25:for(let e=0;e<o;e++){const a=r[e],l=(i?a.sourceEdges:a.destinationEdges).first();if(null===l)continue;const h=l.link;if(null!==h){let r=90===n||270===n?w.MiddleLeft:w.MiddleTop;if(1===o||e===o-1&&o%2==1)switch(n){case 0:r=w.MiddleLeft;break;case 90:r=w.MiddleTop;break;case 180:r=w.MiddleRight;break;default:r=w.MiddleBottom}else e%2==0&&(r=90===n||270===n?w.MiddleRight:w.MiddleBottom);i?(t.setsPortSpot&&(h.fromSpot=s),t.setsChildPortSpot&&(h.toSpot=r)):(t.setsPortSpot&&(h.fromSpot=r),t.setsChildPortSpot&&(h.toSpot=s))}}break;case 26:{const e=90===n||270===n?w.MiddleRight:w.MiddleBottom,r=i?t.destinationEdges:t.sourceEdges;for(;r.next();){const n=r.value.link;null!==n&&(i?(t.setsPortSpot&&(n.fromSpot=s),t.setsChildPortSpot&&(n.toSpot=e)):(t.setsPortSpot&&(n.fromSpot=e),t.setsChildPortSpot&&(n.toSpot=s)))}break}case 27:{const e=90===n||270===n?w.MiddleLeft:w.MiddleTop,r=i?t.destinationEdges:t.sourceEdges;for(;r.next();){const n=r.value.link;null!==n&&(i?(t.setsPortSpot&&(n.fromSpot=s),t.setsChildPortSpot&&(n.toSpot=e)):(t.setsPortSpot&&(n.fromSpot=e),t.setsChildPortSpot&&(n.toSpot=s)))}break}}}orthoAngle(t){const e=t.angle;return e<=45?0:e<=135?90:e<=225?180:e<=315?270:0}computeLayerSpacing(t){const e=this.orthoAngle(t),i=90===e||270===e;let n=t.layerSpacing;if(t.layerSpacingParentOverlap>0){const e=Math.min(1,t.layerSpacingParentOverlap);n-=i?t.height*e:t.width*e}return n<(i?-t.height:-t.width)&&(n=i?-t.height:-t.width),n}computeNodeIndent(t){const e=this.orthoAngle(t),i=90===e||270===e;let n=t.nodeIndent;if(t.nodeIndentPastParent>0){const e=Math.min(1,t.nodeIndentPastParent);n+=i?t.width*e:t.height*e}return n=Math.max(0,n),n}get roots(){return this.Fi}set roots(t){this.Fi!==t&&(this.Fi=t,this.invalidateLayout())}get path(){return this.Li}set path(t){this.Li!==t&&(this.Li=t,this.invalidateLayout())}get treeStyle(){return this._f}set treeStyle(t){this._f!==t&&(40===t||42===t||41===t||43===t)&&(this._f=t,this.invalidateLayout())}get layerStyle(){return this.Ng}set layerStyle(t){this.Ng!==t&&(60===t||61===t||62===t)&&(this.Ng=t,this.invalidateLayout())}get comments(){return this.Fe}set comments(t){this.Fe!==t&&(e.s(t,"boolean",wi,"comments"),this.Fe=t,this.invalidateLayout())}get arrangement(){return this.Xi}set arrangement(t){this.Xi!==t&&(50===t||51===t||52===t)&&(this.Xi=t,this.invalidateLayout())}get arrangementSpacing(){return this.Ms}set arrangementSpacing(t){this.Ms.equals(t)||(this.Ms.a(t),this.invalidateLayout())}get rootDefaults(){return this.U}set rootDefaults(t){this.U!==t&&(this.U=t,this.invalidateLayout())}get alternateDefaults(){return this.B}set alternateDefaults(t){this.B!==t&&(this.B=t,this.invalidateLayout())}get sorting(){return this.U.sorting}set sorting(t){this.U.sorting!==t&&(this.U.sorting=t,this.invalidateLayout())}get comparer(){return this.U.comparer}set comparer(t){this.U.comparer!==t&&(e.k(t,wi,"comparer"),this.U.comparer=t,this.invalidateLayout())}get angle(){return this.U.angle}set angle(t){this.U.angle!==t&&(e.s(t,"number",wi,"angle"),0===t||90===t||180===t||270===t?(this.U.angle=t,this.invalidateLayout()):e.o("TreeLayout.angle must be 0, 90, 180, or 270"))}get alignment(){return this.U.alignment}set alignment(t){this.U.alignment!==t&&(this.U.alignment=t,this.invalidateLayout())}get nodeIndent(){return this.U.nodeIndent}set nodeIndent(t){this.U.nodeIndent!==t&&(e.s(t,"number",wi,"nodeIndent"),t>=0&&(this.U.nodeIndent=t,this.invalidateLayout()))}get nodeIndentPastParent(){return this.U.nodeIndentPastParent}set nodeIndentPastParent(t){this.U.nodeIndentPastParent!==t&&(e.s(t,"number",wi,"nodeIndentPastParent"),t>=0&&t<=1&&(this.U.nodeIndentPastParent=t,this.invalidateLayout()))}get nodeSpacing(){return this.U.nodeSpacing}set nodeSpacing(t){this.U.nodeSpacing!==t&&(e.s(t,"number",wi,"nodeSpacing"),this.U.nodeSpacing=t,this.invalidateLayout())}get layerSpacing(){return this.U.layerSpacing}set layerSpacing(t){this.U.layerSpacing!==t&&(e.s(t,"number",wi,"layerSpacing"),this.U.layerSpacing=t,this.invalidateLayout())}get layerSpacingParentOverlap(){return this.U.layerSpacingParentOverlap}set layerSpacingParentOverlap(t){this.U.layerSpacingParentOverlap!==t&&(e.s(t,"number",wi,"layerSpacingParentOverlap"),t>=0&&t<=1&&(this.U.layerSpacingParentOverlap=t,this.invalidateLayout()))}get compaction(){return this.U.compaction}set compaction(t){this.U.compaction!==t&&(30===t||31===t)&&(this.U.compaction=t,this.invalidateLayout())}get breadthLimit(){return this.U.breadthLimit}set breadthLimit(t){this.U.breadthLimit!==t&&(e.s(t,"number",wi,"breadthLimit"),t>=0&&(this.U.breadthLimit=t,this.invalidateLayout()))}get rowSpacing(){return this.U.rowSpacing}set rowSpacing(t){this.U.rowSpacing!==t&&(e.s(t,"number",wi,"rowSpacing"),this.U.rowSpacing=t,this.invalidateLayout())}get rowIndent(){return this.U.rowIndent}set rowIndent(t){this.U.rowIndent!==t&&(e.s(t,"number",wi,"rowIndent"),t>=0&&(this.U.rowIndent=t,this.invalidateLayout()))}get commentSpacing(){return this.U.commentSpacing}set commentSpacing(t){this.U.commentSpacing!==t&&(e.s(t,"number",wi,"commentSpacing"),this.U.commentSpacing=t,this.invalidateLayout())}get commentMargin(){return this.U.commentMargin}set commentMargin(t){this.U.commentMargin!==t&&(e.s(t,"number",wi,"commentMargin"),this.U.commentMargin=t,this.invalidateLayout())}get setsPortSpot(){return this.U.setsPortSpot}set setsPortSpot(t){this.U.setsPortSpot!==t&&(e.s(t,"boolean",wi,"setsPortSpot"),this.U.setsPortSpot=t,this.invalidateLayout())}get portSpot(){return this.U.portSpot}set portSpot(t){this.U.portSpot.equals(t)||(this.U.portSpot=t,this.invalidateLayout())}get setsChildPortSpot(){return this.U.setsChildPortSpot}set setsChildPortSpot(t){this.U.setsChildPortSpot!==t&&(e.s(t,"boolean",wi,"setsChildPortSpot"),this.U.setsChildPortSpot=t,this.invalidateLayout())}get childPortSpot(){return this.U.childPortSpot}set childPortSpot(t){this.U.childPortSpot.equals(t)||(this.U.childPortSpot=t,this.invalidateLayout())}get alternateSorting(){return this.B.sorting}set alternateSorting(t){this.B.sorting!==t&&(this.B.sorting=t,this.invalidateLayout())}get alternateComparer(){return this.B.comparer}set alternateComparer(t){this.B.comparer!==t&&(e.k(t,wi,"alternateComparer"),this.B.comparer=t,this.invalidateLayout())}get alternateAngle(){return this.B.angle}set alternateAngle(t){this.B.angle!==t&&(e.s(t,"number",wi,"alternateAngle"),(0===t||90===t||180===t||270===t)&&(this.B.angle=t,this.invalidateLayout()))}get alternateAlignment(){return this.B.alignment}set alternateAlignment(t){this.B.alignment!==t&&(this.B.alignment=t,this.invalidateLayout())}get alternateNodeIndent(){return this.B.nodeIndent}set alternateNodeIndent(t){this.B.nodeIndent!==t&&(e.s(t,"number",wi,"alternateNodeIndent"),t>=0&&(this.B.nodeIndent=t,this.invalidateLayout()))}get alternateNodeIndentPastParent(){return this.B.nodeIndentPastParent}set alternateNodeIndentPastParent(t){this.B.nodeIndentPastParent!==t&&(e.s(t,"number",wi,"alternateNodeIndentPastParent"),t>=0&&t<=1&&(this.B.nodeIndentPastParent=t,this.invalidateLayout()))}get alternateNodeSpacing(){return this.B.nodeSpacing}set alternateNodeSpacing(t){this.B.nodeSpacing!==t&&(e.s(t,"number",wi,"alternateNodeSpacing"),this.B.nodeSpacing=t,this.invalidateLayout())}get alternateLayerSpacing(){return this.B.layerSpacing}set alternateLayerSpacing(t){this.B.layerSpacing!==t&&(e.s(t,"number",wi,"alternateLayerSpacing"),this.B.layerSpacing=t,this.invalidateLayout())}get alternateLayerSpacingParentOverlap(){return this.B.layerSpacingParentOverlap}set alternateLayerSpacingParentOverlap(t){this.B.layerSpacingParentOverlap!==t&&(e.s(t,"number",wi,"alternateLayerSpacingParentOverlap"),t>=0&&t<=1&&(this.B.layerSpacingParentOverlap=t,this.invalidateLayout()))}get alternateCompaction(){return this.B.compaction}set alternateCompaction(t){this.B.compaction!==t&&(30===t||31===t)&&(this.B.compaction=t,this.invalidateLayout())}get alternateBreadthLimit(){return this.B.breadthLimit}set alternateBreadthLimit(t){this.B.breadthLimit!==t&&(e.s(t,"number",wi,"alternateBreadthLimit"),t>=0&&(this.B.breadthLimit=t,this.invalidateLayout()))}get alternateRowSpacing(){return this.B.rowSpacing}set alternateRowSpacing(t){this.B.rowSpacing!==t&&(e.s(t,"number",wi,"alternateRowSpacing"),this.B.rowSpacing=t,this.invalidateLayout())}get alternateRowIndent(){return this.B.rowIndent}set alternateRowIndent(t){this.B.rowIndent!==t&&(e.s(t,"number",wi,"alternateRowIndent"),t>=0&&(this.B.rowIndent=t,this.invalidateLayout()))}get alternateCommentSpacing(){return this.B.commentSpacing}set alternateCommentSpacing(t){this.B.commentSpacing!==t&&(e.s(t,"number",wi,"alternateCommentSpacing"),this.B.commentSpacing=t,this.invalidateLayout())}get alternateCommentMargin(){return this.B.commentMargin}set alternateCommentMargin(t){this.B.commentMargin!==t&&(e.s(t,"number",wi,"alternateCommentMargin"),this.B.commentMargin=t,this.invalidateLayout())}get alternateSetsPortSpot(){return this.B.setsPortSpot}set alternateSetsPortSpot(t){this.B.setsPortSpot!==t&&(e.s(t,"boolean",wi,"alternateSetsPortSpot"),this.B.setsPortSpot=t,this.invalidateLayout())}get alternatePortSpot(){return this.B.portSpot}set alternatePortSpot(t){this.B.portSpot.equals(t)||(this.B.portSpot=t,this.invalidateLayout())}get alternateSetsChildPortSpot(){return this.B.setsChildPortSpot}set alternateSetsChildPortSpot(t){this.B.setsChildPortSpot!==t&&(e.s(t,"boolean",wi,"alternateSetsChildPortSpot"),this.B.setsChildPortSpot=t,this.invalidateLayout())}get alternateChildPortSpot(){return this.B.childPortSpot}set alternateChildPortSpot(t){this.B.childPortSpot.equals(t)||(this.B.childPortSpot=t,this.invalidateLayout())}static PathDefault=0;static PathDestination=1;static PathSource=2;static SortingForwards=10;static SortingReverse=11;static SortingAscending=12;static SortingDescending=13;static AlignmentCenterSubtrees=20;static AlignmentCenterChildren=21;static AlignmentStart=22;static AlignmentEnd=23;static AlignmentBus=24;static AlignmentBusBranching=25;static AlignmentTopLeftBus=26;static AlignmentBottomRightBus=27;static CompactionNone=30;static CompactionBlock=31;static StyleLayered=40;static StyleLastParents=41;static StyleAlternating=42;static StyleRootOnly=43;static ArrangementVertical=50;static ArrangementHorizontal=51;static ArrangementFixedRoots=52;static LayerIndividual=60;static LayerSiblings=61;static LayerUniform=62}class ki extends De{constructor(t){super(t)}createVertex(){return new Si(this)}createEdge(){return new Ci(this)}}class Si extends Le{O;ut;lt;kk;Pk;Sk;Mk;Nk;Ck;Lk;Fe;Cg;Lg;pe;ye;Yt;hi;$y;Zy;Qy;Ns;_y;tw;iw;ew;nw;ow;lw;hw;aw;cw;fw;constructor(t){super(t),this.kk=!1,this.Pk=null,this.Sk=[],this.Mk=0,this.Nk=0,this.Ck=0,this.Lk=0,this.Fe=null,this.O=new y(0,0),this.ut=new v(0,0),this.lt=new y(0,0),this.Cg=null,this.Lg=null,this.pe=10,this.ye=Le.standardComparer,this.Yt=0,this.hi=21,this.$y=0,this.Zy=0,this.Qy=20,this.Ns=50,this._y=0,this.tw=31,this.iw=0,this.ew=25,this.nw=10,this.ow=10,this.lw=20,this.hw=!0,this.aw=w.Default,this.cw=!0,this.fw=w.Default}copyInheritedPropertiesFrom(t){null!==t&&(this.pe=t.sorting,this.ye=t.comparer,this.Yt=t.angle,this.hi=t.alignment,this.$y=t.nodeIndent,this.Zy=t.nodeIndentPastParent,this.Qy=t.nodeSpacing,this.Ns=t.layerSpacing,this._y=t.layerSpacingParentOverlap,this.tw=t.compaction,this.iw=t.breadthLimit,this.ew=t.rowSpacing,this.nw=t.rowIndent,this.ow=t.commentSpacing,this.lw=t.commentMargin,this.hw=t.setsPortSpot,this.aw=t.portSpot,this.cw=t.setsChildPortSpot,this.fw=t.childPortSpot)}get initialized(){return this.kk}set initialized(t){this.kk!==t&&(e.s(t,"boolean",Si,"initialized"),this.kk=t)}get parent(){return this.Pk}set parent(t){this.Pk!==t&&(this.Pk=t)}get children(){return this.Sk}set children(t){if(this.Sk!==t){if(null!==t&&!Array.isArray(t)&&e.Zi(t,"Array",Si,"children:value"),null!==t){const e=t.length;for(let i=0;i<e;i++){t[i]}}this.Sk=t}}get level(){return this.Mk}set level(t){this.Mk!==t&&(e.s(t,"number",Si,"level"),this.Mk=t)}get descendantCount(){return this.Nk}set descendantCount(t){this.Nk!==t&&(e.s(t,"number",Si,"descendantCount"),this.Nk=t)}get maxChildrenCount(){return this.Ck}set maxChildrenCount(t){this.Ck!==t&&(e.s(t,"number",Si,"maxChildrenCount"),this.Ck=t)}get maxGenerationCount(){return this.Lk}set maxGenerationCount(t){this.Lk!==t&&(e.s(t,"number",Si,"maxGenerationCount"),this.Lk=t)}get comments(){return this.Fe}set comments(t){if(this.Fe!==t){if(null!==t&&!Array.isArray(t)&&e.Zi(t,"Array",Si,"comments:value"),null!==t){const e=t.length;for(let i=0;i<e;i++){t[i]}}this.Fe=t}}get sorting(){return this.pe}set sorting(t){this.pe!==t&&(this.pe=t)}get comparer(){return this.ye}set comparer(t){this.ye!==t&&(e.k(t,Si,"comparer"),this.ye=t)}get angle(){return this.Yt}set angle(t){this.Yt!==t&&(e.s(t,"number",Si,"angle"),this.Yt=t)}get alignment(){return this.hi}set alignment(t){this.hi!==t&&(this.hi=t)}get nodeIndent(){return this.$y}set nodeIndent(t){this.$y!==t&&(e.s(t,"number",Si,"nodeIndent"),this.$y=t)}get nodeIndentPastParent(){return this.Zy}set nodeIndentPastParent(t){this.Zy!==t&&(e.s(t,"number",Si,"nodeIndentPastParent"),this.Zy=t)}get nodeSpacing(){return this.Qy}set nodeSpacing(t){this.Qy!==t&&(e.s(t,"number",Si,"nodeSpacing"),this.Qy=t)}get layerSpacing(){return this.Ns}set layerSpacing(t){this.Ns!==t&&(e.s(t,"number",Si,"layerSpacing"),this.Ns=t)}get layerSpacingParentOverlap(){return this._y}set layerSpacingParentOverlap(t){this._y!==t&&(e.s(t,"number",Si,"layerSpacingParentOverlap"),this._y=t)}get compaction(){return this.tw}set compaction(t){this.tw!==t&&(this.tw=t)}get breadthLimit(){return this.iw}set breadthLimit(t){this.iw!==t&&(e.s(t,"number",Si,"breadthLimit"),this.iw=t)}get rowSpacing(){return this.ew}set rowSpacing(t){this.ew!==t&&(e.s(t,"number",Si,"rowSpacing"),this.ew=t)}get rowIndent(){return this.nw}set rowIndent(t){this.nw!==t&&(e.s(t,"number",Si,"rowIndent"),this.nw=t)}get commentSpacing(){return this.ow}set commentSpacing(t){this.ow!==t&&(e.s(t,"number",Si,"commentSpacing"),this.ow=t)}get commentMargin(){return this.lw}set commentMargin(t){this.lw!==t&&(e.s(t,"number",Si,"commentMargin"),this.lw=t)}get setsPortSpot(){return this.hw}set setsPortSpot(t){this.hw!==t&&(e.s(t,"boolean",Si,"setsPortSpot"),this.hw=t)}get portSpot(){return this.aw}set portSpot(t){this.aw.equals(t)||(this.aw=t)}get setsChildPortSpot(){return this.cw}set setsChildPortSpot(t){this.cw!==t&&(e.s(t,"boolean",Si,"setsChildPortSpot"),this.cw=t)}get childPortSpot(){return this.fw}set childPortSpot(t){this.fw.equals(t)||(this.fw=t)}get childrenCount(){return this.children.length}get relativePosition(){return this.O}set relativePosition(t){this.O.set(t)}get subtreeSize(){return this.ut}set subtreeSize(t){this.ut.set(t)}get subtreeOffset(){return this.lt}set subtreeOffset(t){this.lt.set(t)}}class Ci extends Ee{Ak;constructor(t){super(t),this.Ak=new y(0,0)}commit(){const t=this.link;if(null===t||t.isAvoiding)return;const i=this.network.layout;let n=null,s=null;switch(i.ls){case 1:n=this.fromVertex,s=this.toVertex;break;case 2:n=this.toVertex,s=this.fromVertex;break;default:e.o("Unhandled path value "+i.ls.toString())}if(null===n||null===s)return;const r=this.Ak;if(0===r.x&&0===r.y)return void this.aE(n,s);const o=n.bounds,a=i.orthoAngle(n),l=i.computeLayerSpacing(n),h=n.rowSpacing;t.updateRoute();const u=9===t.curve,c=t.isOrthogonal;let d,f,p=0;if(t.startRoute(),c||u){for(p=2;t.pointsCount>4;)t.removePoint(2);d=t.getPoint(1),f=t.getPoint(2)}else{for(p=1;t.pointsCount>3;)t.removePoint(1);d=t.getPoint(0),f=t.getPoint(t.pointsCount-1)}const g=t.getPoint(t.pointsCount-1);let m=0;0===a?(23===n.alignment?(m=o.bottom+r.y,0===r.y&&d.y>g.y+n.rowIndent&&(m=Math.min(m,Math.max(d.y,m-i.computeNodeIndent(n))))):22===n.alignment?(m=o.top+r.y,0===r.y&&d.y<g.y-n.rowIndent&&(m=Math.max(m,Math.min(d.y,m+i.computeNodeIndent(n))))):m=o.y+o.height/2+r.y,u?(t.insertPointAt(p,d.x,m),p++,t.insertPointAt(p,o.right+l,m),p++,t.insertPointAt(p,o.right+l+(r.x-h)/3,m),p++,t.insertPointAt(p,o.right+l+2*(r.x-h)/3,m),p++,t.insertPointAt(p,o.right+l+(r.x-h),m),p++,t.insertPointAt(p,f.x,m),p++):(c&&(t.insertPointAt(p,o.right+l/2,d.y),p++),t.insertPointAt(p,o.right+l/2,m),p++,t.insertPointAt(p,o.right+l+r.x-(c?h/2:h),m),p++,c&&(t.insertPointAt(p,t.getPoint(p-1).x,f.y),p++))):90===a?(23===n.alignment?(m=o.right+r.x,0===r.x&&d.x>g.x+n.rowIndent&&(m=Math.min(m,Math.max(d.x,m-i.computeNodeIndent(n))))):22===n.alignment?(m=o.left+r.x,0===r.x&&d.x<g.x-n.rowIndent&&(m=Math.max(m,Math.min(d.x,m+i.computeNodeIndent(n))))):m=o.x+o.width/2+r.x,u?(t.insertPointAt(p,m,d.y),p++,t.insertPointAt(p,m,o.bottom+l),p++,t.insertPointAt(p,m,o.bottom+l+(r.y-h)/3),p++,t.insertPointAt(p,m,o.bottom+l+2*(r.y-h)/3),p++,t.insertPointAt(p,m,o.bottom+l+(r.y-h)),p++,t.insertPointAt(p,m,f.y),p++):(c&&(t.insertPointAt(p,d.x,o.bottom+l/2),p++),t.insertPointAt(p,m,o.bottom+l/2),p++,t.insertPointAt(p,m,o.bottom+l+r.y-(c?h/2:h)),p++,c&&(t.insertPointAt(p,f.x,t.getPoint(p-1).y),p++))):180===a?(23===n.alignment?(m=o.bottom+r.y,0===r.y&&d.y>g.y+n.rowIndent&&(m=Math.min(m,Math.max(d.y,m-i.computeNodeIndent(n))))):22===n.alignment?(m=o.top+r.y,0===r.y&&d.y<g.y-n.rowIndent&&(m=Math.max(m,Math.min(d.y,m+i.computeNodeIndent(n))))):m=o.y+o.height/2+r.y,u?(t.insertPointAt(p,d.x,m),p++,t.insertPointAt(p,o.left-l,m),p++,t.insertPointAt(p,o.left-l+(r.x+h)/3,m),p++,t.insertPointAt(p,o.left-l+2*(r.x+h)/3,m),p++,t.insertPointAt(p,o.left-l+(r.x+h),m),p++,t.insertPointAt(p,f.x,m),p++):(c&&(t.insertPointAt(p,o.left-l/2,d.y),p++),t.insertPointAt(p,o.left-l/2,m),p++,t.insertPointAt(p,o.left-l+r.x+(c?h/2:h),m),p++,c&&(t.insertPointAt(p,t.getPoint(p-1).x,f.y),p++))):270===a?(23===n.alignment?(m=o.right+r.x,0===r.x&&d.x>g.x+n.rowIndent&&(m=Math.min(m,Math.max(d.x,m-i.computeNodeIndent(n))))):22===n.alignment?(m=o.left+r.x,0===r.x&&d.x<g.x-n.rowIndent&&(m=Math.max(m,Math.min(d.x,m+i.computeNodeIndent(n))))):m=o.x+o.width/2+r.x,u?(t.insertPointAt(p,m,d.y),p++,t.insertPointAt(p,m,o.top-l),p++,t.insertPointAt(p,m,o.top-l+(r.y+h)/3),p++,t.insertPointAt(p,m,o.top-l+2*(r.y+h)/3),p++,t.insertPointAt(p,m,o.top-l+(r.y+h)),p++,t.insertPointAt(p,m,f.y),p++):(c&&(t.insertPointAt(p,d.x,o.top-l/2),p++),t.insertPointAt(p,m,o.top-l/2),p++,t.insertPointAt(p,m,o.top-l+r.y+(c?h/2:h)),p++,c&&(t.insertPointAt(p,f.x,t.getPoint(p-1).y),p++))):e.o("Invalid angle "+a),t.commitRoute()}aE(t,e){const i=this.link;if(null===i)return;const n=this.network.layout,s=n.orthoAngle(t);if(s===n.orthoAngle(e))return;const r=n.computeLayerSpacing(t),o=t.bounds,a=e.bounds;if(0===s&&a.left-o.right<r+1||90===s&&a.top-o.bottom<r+1||180===s&&o.left-a.right<r+1||270===s&&o.top-a.bottom<r+1)return;i.updateRoute();const l=9===i.curve,h=i.isOrthogonal,u=this.fromVertex,c=n.isBusAlignment(u.alignment);if(i.startRoute(),0===s){const t=o.right+r/2;if(l){if(4===i.pointsCount){const e=i.getPoint(3).y;i.setPointAt(1,t-20,i.getPoint(1).y),i.insertPointAt(2,t-20,e),i.insertPointAt(3,t,e),i.insertPointAt(4,t+20,e),i.setPointAt(5,i.getPoint(5).x,e)}}else h?c?i.setPointAt(3,i.getPoint(2).x,i.getPoint(4).y):6===i.pointsCount&&(i.setPointAt(2,t,i.getPoint(2).y),i.setPointAt(3,t,i.getPoint(3).y)):4===i.pointsCount?i.insertPointAt(2,t,i.getPoint(2).y):3===i.pointsCount?i.setPointAt(1,t,i.getPoint(2).y):2===i.pointsCount&&i.insertPointAt(1,t,i.getPoint(1).y)}else if(90===s){const t=o.bottom+r/2;if(l){if(4===i.pointsCount){const e=i.getPoint(3).x;i.setPointAt(1,i.getPoint(1).x,t-20),i.insertPointAt(2,e,t-20),i.insertPointAt(3,e,t),i.insertPointAt(4,e,t+20),i.setPointAt(5,e,i.getPoint(5).y)}}else h?c?i.setPointAt(3,i.getPoint(2).x,i.getPoint(4).y):6===i.pointsCount&&(i.setPointAt(2,i.getPoint(2).x,t),i.setPointAt(3,i.getPoint(3).x,t)):4===i.pointsCount?i.insertPointAt(2,i.getPoint(2).x,t):3===i.pointsCount?i.setPointAt(1,i.getPoint(2).x,t):2===i.pointsCount&&i.insertPointAt(1,i.getPoint(1).x,t)}else if(180===s){const t=o.left-r/2;if(l){if(4===i.pointsCount){const e=i.getPoint(3).y;i.setPointAt(1,t+20,i.getPoint(1).y),i.insertPointAt(2,t+20,e),i.insertPointAt(3,t,e),i.insertPointAt(4,t-20,e),i.setPointAt(5,i.getPoint(5).x,e)}}else h?c?i.setPointAt(3,i.getPoint(2).x,i.getPoint(4).y):6===i.pointsCount&&(i.setPointAt(2,t,i.getPoint(2).y),i.setPointAt(3,t,i.getPoint(3).y)):4===i.pointsCount?i.insertPointAt(2,t,i.getPoint(2).y):3===i.pointsCount?i.setPointAt(1,t,i.getPoint(2).y):2===i.pointsCount&&i.insertPointAt(1,t,i.getPoint(1).y)}else if(270===s){const t=o.top-r/2;if(l){if(4===i.pointsCount){const e=i.getPoint(3).x;i.setPointAt(1,i.getPoint(1).x,t+20),i.insertPointAt(2,e,t+20),i.insertPointAt(3,e,t),i.insertPointAt(4,e,t-20),i.setPointAt(5,e,i.getPoint(5).y)}}else h?c?i.setPointAt(3,i.getPoint(2).x,i.getPoint(4).y):6===i.pointsCount&&(i.setPointAt(2,i.getPoint(2).x,t),i.setPointAt(3,i.getPoint(3).x,t)):4===i.pointsCount?i.insertPointAt(2,i.getPoint(2).x,t):3===i.pointsCount?i.setPointAt(1,i.getPoint(2).x,t):2===i.pointsCount&&i.insertPointAt(1,i.getPoint(1).x,t)}i.commitRoute()}get fromVertex(){return this.je}set fromVertex(t){this.je!==t&&(this.je=t)}get toVertex(){return this.qe}set toVertex(t){this.qe!==t&&(this.qe=t)}get relativePoint(){return this.Ak}set relativePoint(t){this.Ak.set(t)}}class Mi{constructor(){}static Light={colors:{text:"#0a0a0a",comment:"#ca8a04",link:"#0a0a0a",group:"#a3a3a344",outline:"#a3a3a3",selection:"#0ea5e9",div:"#fff",gridMinor:"#e5e5e5",gridMajor:"#a3a3a3",overviewBox:"#c026d3",tempLink:"#2563eb",tempPort:"#c026d3",adornmentFill:"#0ea5e9",adornmentStroke:"#1e40af",dragSelect:"#c026d3"},fonts:{normal:"10pt sans-serif",bold:"bold 12pt sans-serif"},numbers:{group:1,selection:3},margins:{group:new b(5)},arrowheads:{toArrow:"Standard"}};static Dark={colors:{text:"#f5f5f5",comment:"#facc15",link:"#f5f5f5",group:"#a3a3a388",outline:"#a3a3a3",selection:"#38bdf8",div:"#171717",gridMinor:"#262626",gridMajor:"#404040",overviewBox:"#e879f9",tempLink:"#60a5fa",tempPort:"#e879f9",adornmentFill:"#38bdf8",adornmentStroke:"#2563eb",dragSelect:"#e879f9"},fonts:{normal:"10pt sans-serif",bold:"bold 12pt sans-serif"},numbers:{group:1,selection:3},margins:{group:new b(5)},arrowheads:{toArrow:"Standard"}}}class Ti{ts=new Set;iu=new m;Tk="light";Dk="light";Fk=!1;Ag="light";jD=t=>{const e=t.matches?"dark":"light";e!==this.Ag&&(this.Ag=e,"system"===this.Dk&&this.uw())};constructor(e){e&&Object.assign(this,e),e?.themeMap||(this.iu.set("light",{colors:{...Mi.Light.colors},fonts:{...Mi.Light.fonts},numbers:{...Mi.Light.numbers},margins:{...Mi.Light.margins},arrowheads:{...Mi.Light.arrowheads}}),this.iu.set("dark",{colors:{...Mi.Dark.colors},fonts:{...Mi.Dark.fonts},numbers:{...Mi.Dark.numbers},margins:{...Mi.Dark.margins},arrowheads:{...Mi.Dark.arrowheads}})),t.matchMedia&&(this.Ag=t.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}get themeMap(){return this.iu}set themeMap(t){this.iu!==t&&(this.iu=t,this.uw())}get defaultTheme(){return this.Tk}set defaultTheme(t){this.Tk!==t&&(e.s(t,"string",Ti,"defaultTheme"),this.Tk=t,this.uw())}get currentTheme(){return this.Dk}set currentTheme(t){this.Dk!==t&&(e.s(t,"string",Ti,"currentTheme"),this.Dk=t,this.uw())}get changesDivBackground(){return this.Fk}set changesDivBackground(t){if(this.Fk!==t&&(this.Fk=t,t))for(const t of this.ts)t.setDivBackground(this.findValue("div","","fill")),t.D("ThemeChanged",this)}get preferredColorScheme(){return this.Ag}addDiagram(t){return this.ts.add(t),this.cC(t),this}removeDiagram(t){return this.ts.delete(t),this.cC(t),this}hR(){0===this.ts.size&&t.matchMedia&&t.matchMedia("(prefers-color-scheme: dark)")?.addEventListener("change",this.jD)}aR(){0===this.ts.size&&t.matchMedia&&t.matchMedia("(prefers-color-scheme: dark)")?.removeEventListener("change",this.jD)}set(t,e){""===t&&(t=this.Tk),"system"===t&&(t=this.Ag);let i=this.iu.get(t);return i=i?this.qD(i,e):e,this.iu.set(t,i),this.uw(),this}findValue(t,e,i){return this.getValue(this.findTheme(this.currentTheme),t,e,i)||this.getValue(this.findTheme(this.defaultTheme),t,e,i)}getValue(t,e,i,n){if(!t)return;null==i&&(i="");let s=t;const r=t=>{if(void 0===s||""===t)return;if("number"==typeof t||!Array.isArray(t)&&!t.includes("."))return s[t];const e=Array.isArray(t)?t:t.split(".");for(let t=0;t<e.length;t++){const i=e[t];if(""!==i&&(s=s[i],void 0===s))return}return s},o=()=>{if(""===i||(s=r(i),void 0!==s))return s=Array.isArray(s)&&"number"==typeof e?s[e%s.length]:r(e),s};if(s=o(),void 0===s&&"string"==typeof n&&n.length>0){let e=t.targetPropertyMap?.get(n);if(e?s=t[e]:(e=Ti.cE.get(n),s=e?t[e]:t.colors),s=o(),void 0!==s)return s}return s}findTheme(t){return this.themeMap.get("system"===t?this.Ag:t)}cC(t){const e=t.skipsUndoManager;t.skipsUndoManager=!0,t.updateAllThemeBindings(),this.Fk&&t.setDivBackground(this.findValue("div","","fill")),t.skipsUndoManager=e,t.D("ThemeChanged",this)}uw(){for(const t of this.ts)this.cC(t)}qD(t,i){for(const n in i)if(e.dw(i,n))try{i[n].constructor===Object?t[n]=this.qD(t[n]??{},i[n]):t[n]=i[n]}catch{delete t[n]}return t}static cE=new Map([["background","colors"],["defaultColumnSeparatorStroke","colors"],["defaultRowSeparatorStroke","colors"],["shadowColor","colors"],["fill","colors"],["stroke","colors"],["font","fonts"],["angle","numbers"],["fromEndSegmentLength","numbers"],["fromShortLength","numbers"],["height","numbers"],["opacity","numbers"],["scale","numbers"],["toEndSegmentLength","numbers"],["toShortLength","numbers"],["width","numbers"],["defaultColumnSeparatorStrokeWidth","numbers"],["defaultRowSeparatorStrokeWidth","numbers"],["shadowBlur","numbers"],["corner","numbers"],["curviness","numbers"],["smoothness","numbers"],["parameter1","numbers"],["parameter2","numbers"],["strokeWidth","numbers"],["strokeDashOffset","numbers"],["maxLines","numbers"],["spacingAbove","numbers"],["spacingBelow","numbers"],["position","points"],["shadowOffset","points"],["desiredSize","sizes"],["maxSize","sizes"],["minSize","sizes"],["margin","margins"],["defaultSeparatorPadding","margins"],["padding","margins"],["alignment","spots"],["alignmentFocus","spots"],["fromSpot","spots"],["toSpot","spots"],["defaultAlignment","spots"],["spot1","spots"],["spot2","spots"],["verticalAlignment","spots"],["imageAlignment","spots"],["fromArrow","arrowheads"],["toArrow","arrowheads"]])}class Ai{Pt;N;Oi;al;constructor(){this.N=xt.um(),this.Pt="",this.Oi=!0,this.al=!0}get name(){return this.Pt}set name(t){this.Pt=t}get isEnabled(){return this.Oi}set isEnabled(t){this.Oi=t}get isRealtime(){return this.al}set isRealtime(t){this.al=t}get diagram(){return this.N}set diagram(t){this.N!==t&&(this.N=t,t.xl=!0,t.requestUpdate())}invalidateRouter(){null!==this.N&&(this.N.xl=!0,this.N.requestUpdate())}canRoute(t){if(!this.isEnabled)return!1;const e=this.diagram;return!(e&&(!this.isRealtime&&e.gu||e.animationManager.isTicking))}routeLinks(t,e){}toString(){return""!==this.name?this.name+" Router":e.Dn(this.constructor)}}class Pi extends Ai{constructor(t){super(),this.name="AvoidsNodes",t&&Object.assign(this,t)}canRoute(t){return!!(t instanceof xt?t.Vm:t.diagram.Vm)&&super.canRoute(t)}routeLinks(t,e){const i=e instanceof xt?null:e,n=t.iterator,s=this.diagram.getPositions(!0,i,null);for(;n.next();){const t=n.value;if(!t.isAvoiding||t.containingGroup!==i||null===t.toNode||null===t.fromNode||t.pointsCount<4)continue;t.startRoute();const e=t.pointsCount,r=t.getPoint(1),o=t.getPoint(e-2),a=t.fromNode.actualBounds.copy();a.inflate(be.Ua,be.Ua),a.unionPoint(t.getPoint(0));const l=t.toNode.actualBounds.copy();l.inflate(be.Ua,be.Ua),l.unionPoint(t.getPoint(e-1)),this.fE(t,a,l,s)&&this.uE(t,r,t.dN,o,t.gN,a,l,s),t.commitRoute()}}fE(t,e,i,n){const s=t.diagram,r=t.pointsCount;if(null===s||t.fromNode===t.toNode||t.layer.isTemporary||e.containsPoint(t.getPoint(r-1))&&!t.toNode.isMemberOf(t.fromNode)||i.containsPoint(t.getPoint(0))&&!t.fromNode.isMemberOf(t.toNode)||!t.isOrthogonal)return!1;if(17===t.segmentIndex)return!0;const o=t.getPoint(1),a=t.getPoint(r-2),l=t.getPoint(2);if(!n.isUnoccupied(Math.min(o.x,l.x),Math.min(o.y,l.y),Math.abs(o.x-l.x),Math.abs(o.y-l.y)))return!0;for(let e=2;e<r-3;e++){const i=t.getPoint(e),s=t.getPoint(e+1);if(!n.isUnoccupied(Math.min(i.x,s.x),Math.min(i.y,s.y),Math.abs(i.x-s.x),Math.abs(i.y-s.y)))return!0}const h=t.getPoint(r-3);return!n.isUnoccupied(Math.min(h.x,a.x),Math.min(h.y,a.y),Math.abs(h.x-a.x),Math.abs(h.y-a.y))}uE(t,e,i,n,s,r,o,a){const l=e,h=n;let u=null,c=null;if(t.diagram.isVirtualized){const r=a.bounds.copy(),o=t.getPoint(2),l=t.getPoint(t.pointsCount-3);r.inflate(-a.cellWidth,-a.cellHeight);const h=y.l();a.vd(e.x,e.y)||(S.dl(r.x,r.y,r.x+r.width,r.y+r.height,e.x,e.y,o.x,o.y,h)?(u=e=h.copy(),i=h.directionPoint(o)):S.dl(r.x,r.y,r.x+r.width,r.y+r.height,o.x,o.y,l.x,l.y,h)?(u=e=h.copy(),i=h.directionPoint(l)):S.dl(r.x,r.y,r.x+r.width,r.y+r.height,l.x,l.y,n.x,n.y,h)&&(u=e=h.copy(),i=h.directionPoint(n))),a.vd(n.x,n.y)||(S.dl(r.x,r.y,r.x+r.width,r.y+r.height,n.x,n.y,l.x,l.y,h)?(c=n=h.copy(),s=l.directionPoint(h)):S.dl(r.x,r.y,r.x+r.width,r.y+r.height,l.x,l.y,o.x,o.y,h)?(c=n=h.copy(),s=o.directionPoint(h)):S.dl(r.x,r.y,r.x+r.width,r.y+r.height,o.x,o.y,e.x,e.y,h)&&(c=n=h.copy(),s=e.directionPoint(h))),y.e(h)}const d=r.copy().unionRect(o);d.inflate(a.cellWidth*a.Kc,a.cellHeight*a.Kc),a.CT(e,i,n,s,d,!0);let f=a.lo(n.x,n.y);if(!a.by&&f>=ke.Rd&&(a.lA(),d.inflate(a.cellWidth*a.jM,a.cellHeight*a.qM),a.CT(e,i,n,s,d,!1),f=a.lo(n.x,n.y)),!a.by&&f<ke.Rd&&!a.DO(n.x,n.y)){t.points.removeRange(2,t.pointsCount-3),this.fC(t,a,n.x,n.y,s,!0);const r=0,o=90,d=180,f=270,p=t.getPoint(2);if(t.pointsCount<4)i===r||i===d?(p.x=e.x,p.y=n.y):(p.x=n.x,p.y=e.y),t.setPointAt(2,p.x,p.y),t.insertPointAt(3,p.x,p.y);else{const n=t.getPoint(3);if(i===r||i===d)if(S.f(p.x,n.x)){const s=i===r?Math.max(p.x,e.x):Math.min(p.x,e.x);t.setPointAt(2,s,e.y),t.setPointAt(3,s,n.y)}else S.f(p.y,n.y)?(Math.abs(e.y-p.y)<=a.cellHeight/2&&(t.setPointAt(2,p.x,e.y),t.setPointAt(3,n.x,e.y)),t.insertPointAt(2,p.x,e.y)):t.setPointAt(2,e.x,p.y);else if(i===o||i===f)if(S.f(p.y,n.y)){const s=i===o?Math.max(p.y,e.y):Math.min(p.y,e.y);t.setPointAt(2,e.x,s),t.setPointAt(3,n.x,s)}else S.f(p.x,n.x)?(Math.abs(e.x-p.x)<=a.cellWidth/2&&(t.setPointAt(2,e.x,p.y),t.setPointAt(3,e.x,n.y)),t.insertPointAt(2,e.x,p.y)):t.setPointAt(2,p.x,e.y)}if(null!==u){const e=t.getPoint(1),n=t.getPoint(2);e.x!==n.x&&e.y!==n.y?i===r||i===d?t.insertPointAt(2,e.x,n.y):t.insertPointAt(2,n.x,e.y):i===r||i===d?t.insertPointAt(2,l.x,u.y):t.insertPointAt(2,u.x,l.y)}null!==c&&(s===r||s===d?t.insertPointAt(t.pointsCount-2,h.x,c.y):t.insertPointAt(t.pointsCount-2,c.x,h.y))}}fC(t,e,i,n,s,r){const o=e.cellWidth,a=e.cellHeight;let l=e.lo(i,n),h=i,u=n,c=h,d=u;for(0===s?c+=o:90===s?d+=a:180===s?c-=o:d-=a,t.yN&&l>ke.Xa&&e.lo(c,d)!==l-1&&(e.lo(h-o,u)===l-1?(s=180,c=h-o,d=u):e.lo(h+o,u)===l-1?(s=0,c=h+o,d=u):e.lo(h,u-a)===l-1?(s=270,c=h,d=u-a):e.lo(h,u+a)===l-1&&(s=90,c=h,d=u+a));l>ke.Xa&&e.lo(c,d)===l-1;)h=c,u=d,0===s?c+=o:90===s?d+=a:180===s?c-=o:d-=a,l-=1;if(r?l>ke.Xa&&(180===s||0===s?h=Math.floor(h/o)*o+o/2:(90===s||270===s)&&(u=Math.floor(u/a)*a+a/2)):(h=Math.floor(h/o)*o+o/2,u=Math.floor(u/a)*a+a/2),l>ke.Xa){let i=s,n=h,r=u;if(0===s?(i=90,r+=a):90===s?(i=180,n-=o):180===s?(i=270,r-=a):270===s&&(i=0,n+=o),e.lo(n,r)===l-1)this.fC(t,e,n,r,i,!1);else{let n=h,r=u;0===s?(i=270,r-=a):90===s?(i=0,n+=o):180===s?(i=90,r+=a):270===s&&(i=180,n-=o),e.lo(n,r)===l-1&&this.fC(t,e,n,r,i,!1)}}t.insertPointAt(t.pointsCount-2,h,u)}}z.prototype.initializeStandardTools=function(){this.Jt("Action",new J,this.mouseDownTools),this.Jt("Relinking",new q,this.mouseDownTools),this.Jt("LinkReshaping",new W,this.mouseDownTools),this.Jt("Rotating",new X,this.mouseDownTools),this.Jt("Resizing",new G,this.mouseDownTools),this.Jt("Linking",new Y,this.mouseMoveTools),this.Jt("Dragging",new H,this.mouseMoveTools),this.Jt("DragSelecting",new Q,this.mouseMoveTools),this.Jt("Panning",new tt,this.mouseMoveTools),this.Jt("ContextMenu",new nt,this.mouseUpTools),this.Jt("TextEditing",new at,this.mouseUpTools),this.Jt("ClickCreating",new Z,this.mouseUpTools),this.Jt("ClickSelecting",new K,this.mouseUpTools)},xt.CM("GraphLinksModel",class extends Ie{zM(){const t=this.diagram.model;this.Sy(t.nodeDataArray),this.YT(t.linkDataArray)}Sy(t){super.Sy(t,!1);const e=this.links.iterator;for(;e.next();)e.value.Pd();this.diagram.Cb(!1)}YT(t){t.forEach((t=>{this.KT(t)})),this.diagram.Cb(!1)}KT(t){if(null==t||this.diagram.undoManager.isUndoingRedoing||this.findLinkForData(t))return null;const e=this.getLinkCategoryForData(t),i=this.findLinkTemplateForCategory(e);if(null!==i){i.Et();const n=i.copy();if(null!==n){const i=this.diagram.fe;this.diagram.fe=!0,n.zo=e,n._t=t;const s=this.diagram.model,r=s.I1(t,!0);""!==r&&(n.fromPortId=r);const o=s.Ae(t,!0);if(void 0!==o){const t=this.findNodeForKey(o);t instanceof ge&&(n.fromNode=t)}const a=s.I1(t,!1);""!==a&&(n.toPortId=a);const l=s.Ae(t,!1);if(void 0!==l){const t=this.findNodeForKey(l);t instanceof ge&&(n.toNode=t)}const h=s.getLabelKeysForLinkData(t);return Array.isArray(h)&&h.forEach((t=>{const e=this.findNodeForKey(t);null!==e&&(e.labeledLink=n)})),this.addsToTemporaryLayer&&(n.sl="Tool"),this.diagram.add(n),n._t=null,n.data=t,this.diagram.fe=i,n}}return null}vT(){const t=this.diagram.model;this.GT(t.linkDataArray),this.NN(t.nodeDataArray)}GT(t){t.forEach((t=>{this.v1(t)}))}getLinkCategoryForData(t){return this.diagram.model.getCategoryForLinkData(t)}setLinkCategoryForData(t,e){return this.diagram.model.setCategoryForLinkData(t,e)}setFromNodeForLink(t,e){const i=this.diagram.model,n=null!==e?e.data:null;i.setFromKeyForLinkData(t.data,i.getKeyForNodeData(n))}setToNodeForLink(t,e){const i=this.diagram.model,n=null!==e?e.data:null;i.setToKeyForLinkData(t.data,i.getKeyForNodeData(n))}pN(t){this.diagram.model.removeLinkData(t.data)}findPartForKey(t){const e=super.findPartForKey(t);if(null===e){const e=this.diagram.model.findLinkDataForKey(t);if(null!==e)return this.findLinkForData(e)}return e}findLinkForKey(t){if(null==t)return null;const e=this.diagram.model.findLinkDataForKey(t);return null!==e?this.findLinkForData(e):null}doModelChanged(t){if(super.doModelChanged(t),!this.diagram)return;const i=this.diagram;if(t.model!==i.model)return;const n=t.change;if(i.X){i.X=!1;try{const s=t.modelChange;if(""!==s){if(2===n){if("linkFromKey"===s){const e=t.object,i=this.findLinkForData(e);if(null!==i){const e=t.newValue,n=this.findNodeForKey(e);i.fromNode=n}}else if("linkToKey"===s){const e=t.object,i=this.findLinkForData(e);if(null!==i){const e=t.newValue,n=this.findNodeForKey(e);i.toNode=n}}else if("linkFromPortId"===s){const e=t.object,i=this.findLinkForData(e);if(null!==i){const e=t.newValue;"string"==typeof e&&(i.fromPortId=e)}}else if("linkToPortId"===s){const e=t.object,i=this.findLinkForData(e);if(null!==i){const e=t.newValue;"string"==typeof e&&(i.toPortId=e)}}else if("nodeGroupKey"===s){const e=t.object,i=this.findPartForData(e);if(null!==i){const e=t.newValue;if(void 0!==e){const t=this.findNodeForKey(e);i.containingGroup=t instanceof Ae?t:null}else i.containingGroup=null}}else if("linkLabelKeys"===s){const e=t.object,i=this.findLinkForData(e);if(null!==i){const e=t.oldValue,n=t.newValue;Array.isArray(e)&&e.forEach((t=>{if(n.indexOf(t)>=0)return;const e=this.findNodeForKey(t);null!==e&&(e.labeledLink=null)})),Array.isArray(n)&&n.forEach((t=>{const e=this.findNodeForKey(t);null!==e&&(e.labeledLink=i)}))}}else if("linkCategory"===s){const e=t.object,i=this.findLinkForData(e),n=t.newValue;null!==i&&"string"==typeof n&&(i.category=n)}else if("linkDataArray"===s){const e=t.oldValue;this.GT(e);const i=t.newValue;this.YT(i)}i.isModified=!0}else if(3===n){const n=t.newValue;if("linkDataArray"===s&&e.K(n))this.KT(n);else if("linkLabelKeys"===s&&t.model.isKeyType(n)){const e=t.object,i=this.findLinkForData(e),s=this.findNodeForKey(n);null!==i&&null!==s&&(s.labeledLink=i)}i.isModified=!0}else if(4===n){const n=t.oldValue;if("linkDataArray"===s&&e.K(n))this.v1(n);else if("linkLabelKeys"===s&&t.model.isKeyType(n)){const t=this.findNodeForKey(n);null!==t&&(t.labeledLink=null)}i.isModified=!0}}else if(2===n){const e=t.propertyName,n=t.object;n===i.model&&("linkFromKeyProperty"===e||"linkToKeyProperty"===e||"linkFromPortIdProperty"===e||"linkToPortIdProperty"===e||"linkLabelKeysProperty"===e||"nodeIsGroupProperty"===e||"nodeGroupKeyProperty"===e||"linkCategoryProperty"===e)&&(i.undoManager.isUndoingRedoing||this.rebuildParts()),i.isModified=!0}}finally{i.X=!0}}}XT(){const t=this.diagram.model,e=new u,i=t.linkDataArray;i.forEach((t=>{e.add(t)}));const n=[];this.links.each((t=>{null!==t.data&&!e.has(t.data)&&n.push(t.data)})),n.forEach((e=>{t.HT(e,!1)})),i.forEach((e=>{null===this.findLinkForData(e)&&t.jT(e,!1)}))}updateRelationshipsFromData(t){const e=t.data;if(null===e)return;const i=t.diagram;if(null===i)return;const n=i.model;if(t instanceof be){let s=n.Ae(e,!0),r=i.findNodeForKey(s);t.fromNode=r,s=n.Ae(e,!1),r=i.findNodeForKey(s),t.toNode=r;const o=n.getLabelKeysForLinkData(e);if(o.length>0||t.labelNodes.count>0){if(1===o.length&&1===t.labelNodes.count){const e=o[0],i=t.labelNodes.first();if(n.getKeyForNodeData(i.data)===e)return}const e=(new u).addAll(o),s=new u;t.labelNodes.each((t=>{if(null!==t.data){const e=n.getKeyForNodeData(t.data);void 0!==e&&s.add(e)}}));const r=s.copy();r.removeAll(e);const a=e.copy();if(a.removeAll(s),r.count>0||a.count>0){const e=t;r.each((t=>{const n=i.findNodeForKey(t);null!==n&&n.labeledLink===e&&(n.labeledLink=null)})),a.each((t=>{const n=i.findNodeForKey(t);null!==n&&n.labeledLink!==e&&(n.labeledLink=e)}))}}}else if(!(t instanceof fe)){const s=n.getGroupKeyForNodeData(e),r=i.findPartForKey(s);(null===r||r instanceof Ae)&&(t.containingGroup=r)}}R1(t){const e=this.diagram.model,i=e.getKeyForNodeData(t);if(void 0!==i){const n=e.Ny(i),s=this.findPartForData(t);if(null!==n&&null!==s){const t=n.iterator;for(;t.next();){const n=t.value;if(e.containsNodeData(n)){if(s instanceof Ae&&e.getGroupKeyForNodeData(n)===i){const t=this.findPartForData(n);null!==t&&(t.containingGroup=s)}}else{const t=this.findLinkForData(n);if(null!==t&&s instanceof ge){e.Ae(n,!0)===i&&(t.fromNode=s),e.Ae(n,!1)===i&&(t.toNode=s);const r=e.getLabelKeysForLinkData(n);Array.isArray(r)&&r.some((e=>e===i&&(s.labeledLink=t,!0)))}}}e.Ws(i)}const r=e.getGroupKeyForNodeData(t);if(void 0!==r){const t=this.findNodeForKey(r);t instanceof Ae&&(s.containingGroup=t)}}}CN(t){const e=this.diagram.model;if(t instanceof ge){const i=e.getKeyForNodeData(t.data);if(void 0!==i){const n=t.linksConnected;for(;n.next();){const t=n.value;e.Js(i,t.data)}if(t.isLinkLabel){const n=t.labeledLink;null!==n&&e.Js(i,n.data)}if(t instanceof Ae){const n=t.memberParts;for(;n.next();){const t=n.value.data;e.containsNodeData(t)&&e.Js(i,t)}}}}}TN(t,i){let n=super.TN(t,i);if(t instanceof be){const s=t.data;if(null!==s&&null!==i){const t=i.model,r=t.copyLinkData(s);e.K(r)&&(t.addLinkData(r),n=i.findLinkForData(r))}else if(null!==n){const t=this.diagram;if(null!==s&&null!==t&&null!==t.commandHandler&&t.commandHandler.copiesClipboardData){const i=t.model.copyLinkData(s);e.K(i)&&(n.data=i)}}}return n}insertLink(t,i,n,s){const r=this.diagram,o=r.model,a=r.toolManager.findTool("Linking");let l="";null!==t&&(null===i&&(i=t),l=i.portId,null===l&&(l=""));let h="";null!==n&&(null===s&&(s=n),h=s.portId,null===h&&(h=""));const u=a.archetypeLinkData;if(u instanceof be){u.Et();const e=u.copy();if(null!==e){e.fromNode=t,e.fromPortId=l,e.toNode=n,e.toPortId=h,r.add(e);const i=a.archetypeLabelNodeData;if(i instanceof ge){i.Et();const t=i.copy();null!==t&&(t.labeledLink=e,r.add(t))}return e}}else if(null!==u){const i=o.copyLinkData(u);if(e.K(i)){null!==t&&o.Wd(i,o.getKeyForNodeData(t.data),!0),o.Jd(i,l,!0),null!==n&&o.Wd(i,o.getKeyForNodeData(n.data),!1),o.Jd(i,h,!1),o.addLinkData(i);const s=a.archetypeLabelNodeData;if(null!==s&&!(s instanceof ge)){const t=o.copyNodeData(s);if(e.K(t)){o.addNodeData(t);const e=o.getKeyForNodeData(t);void 0!==e&&o.addLabelKeyForLinkData(i,e)}}return r.findLinkForData(i)}}return null}}),xt.CM("TreeModel",class extends Ie{Mh=null;E1(t,e){if(null===t||null===e||null!==e.findTreeParentLink())return null;const i=this.diagram.toolManager.findTool("Linking");let n=t,s=e;if(this.diagram.isTreePathToChildren){if(null!==i&&i.yu(n,s,null,!0))return null}else if(n=e,s=t,null!==i&&i.yu(n,s,null,!0))return null;const r=this.getLinkCategoryForData(e.data),o=this.findLinkTemplateForCategory(r);if(null!==o){o.Et();const t=o.copy();if(null!==t){const i=this.diagram.fe;return this.diagram.fe=!0,t.zo=r,t._t=e.data,t.fromNode=n,t.toNode=s,this.diagram.add(t),t._t=null,t.data=e.data,this.diagram.fe=i,t}}return null}getLinkCategoryForData(t){return this.diagram.model.getParentLinkCategoryForNodeData(t)}setLinkCategoryForData(t,e){this.diagram.model.setParentLinkCategoryForNodeData(t,e)}setFromNodeForLink(t,e,i){const n=this.diagram.model;void 0===i&&(i=null);const s=null!==e?e.data:null;if(this.diagram.isTreePathToChildren)n.setParentKeyForNodeData(t.data,n.getKeyForNodeData(s));else{const e=this.Mh;this.Mh=t,null!==i&&n.setParentKeyForNodeData(i.data,void 0);const r=null!==t.toNode?t.toNode.data:null;n.setParentKeyForNodeData(s,n.getKeyForNodeData(r)),this.Mh=e}}setToNodeForLink(t,e,i){const n=this.diagram.model;void 0===i&&(i=null);const s=null!==e?e.data:null;if(this.diagram.isTreePathToChildren){const e=this.Mh;this.Mh=t,null!==i&&n.setParentKeyForNodeData(i.data,void 0);const r=null!==t.fromNode?t.fromNode.data:null;n.setParentKeyForNodeData(s,n.getKeyForNodeData(r)),this.Mh=e}else n.setParentKeyForNodeData(t.data,n.getKeyForNodeData(s))}pN(t){this.diagram.model.setParentKeyForNodeData(t.data,void 0)}findLinkForKey(t){if(null==t)return null;const e=this.diagram.model.findNodeDataForKey(t);return null!==e?this.findLinkForData(e):null}doModelChanged(t){if(super.doModelChanged(t),!this.diagram)return;const e=this.diagram;if(t.model!==e.model)return;const i=t.change;if(e.X){e.X=!1;try{const n=t.modelChange;if(""!==n){if(2===i){if("nodeParentKey"===n){const i=t.object,n=t.newValue,s=this.findNodeForKey(n),r=this.findNodeForData(i);if(null!==this.Mh)null!==s&&(this.Mh.data=i,this.Mh.category=this.getLinkCategoryForData(i));else if(null!==r){const t=r.findTreeParentLink();null!==t?null===s?e.remove(t):e.isTreePathToChildren?t.fromNode=s:t.toNode=s:this.E1(s,r)}}else if("parentLinkCategory"===n){const e=t.object,i=this.findNodeForData(e),n=t.newValue;if(null!==i&&"string"==typeof n){const t=i.findTreeParentLink();null!==t&&(t.category=n)}}e.isModified=!0}}else if(2===i){const i=t.propertyName,n=t.object;n===e.model&&"nodeParentKeyProperty"===i&&(e.undoManager.isUndoingRedoing||this.rebuildParts()),e.isModified=!0}}finally{e.X=!0}}}updateRelationshipsFromData(t){const e=t.data;if(null===e)return;const i=t.diagram;if(null===i)return;const n=i.model;if(t instanceof ge){const s=n.getParentKeyForNodeData(e),r=i.findNodeForKey(s);if(r!==t.findTreeParentNode()){const e=t.findTreeParentLink();null!==r?null!==e?i.isTreePathToChildren?e.fromNode=r:e.toNode=r:this.E1(r,t):null!==e&&i.UM(e,!1)}}}My(t,e){if(super.My(t,e),"string"==typeof e&&null!==this.findPartForData(t)){const i=this.findLinkForData(t);null!==i&&i.updateTargetBindings(e)}}R1(t){const e=this.diagram.model,i=e.getKeyForNodeData(t);if(void 0!==i){const n=e.Ny(i),s=this.findPartForData(t);if(null!==n&&null!==s){const t=n.iterator;for(;t.next();){const n=t.value;if(e.containsNodeData(n)&&s instanceof ge&&e.getParentKeyForNodeData(n)===i){const t=this.findNodeForData(n);this.E1(s,t)}}e.Ws(i)}const r=e.getParentKeyForNodeData(t);if(void 0!==r&&s instanceof ge){const t=this.findNodeForKey(r);this.E1(t,s)}}}CN(t){const e=this.diagram.model;if(t instanceof ge){const i=e.getKeyForNodeData(t.data),n=this.findLinkForData(t.data);if(null!==n){n.isSelected=!1,n.isHighlighted=!1;const t=n.layer;if(null!==t){const e=t.te(-1,n,!1);e>=0&&this.diagram.raiseChangedEvent(4,"parts",t,n,null,e,null);const i=n.layerChanged;null!==i&&i(n,t,null)}}const s=this.diagram.isTreePathToChildren,r=t.linksConnected;for(;r.next();){const t=r.value,n=(s?t.toNode:t.fromNode).data;e.containsNodeData(n)&&e.Js(i,n)}}}insertLink(t,e,i,n){const s=this.diagram.model;let r=t,o=i;if(this.diagram.isTreePathToChildren||(r=i,o=t),null!==r&&null!==o){const t=r.data,e=o.data;return s.setParentKeyForNodeData(e,s.getKeyForNodeData(t)),o.findTreeParentLink()}return null}});const Ni=t.go,Di={get version(){return xt.version},Group:Ae,List:l,Set:u,Map:m,Point:y,Size:v,Rect:x,Margin:b,Spot:w,Geometry:A,PathFigure:P,PathSegment:D,InputEvent:L,DiagramEvent:E,ChangedEvent:O,Model:He,GraphLinksModel:Ue,TreeModel:Ve,Binding:je,ThemeBinding:ze,Transaction:F,UndoManager:R,CommandHandler:Tt,Tool:I,DraggingTool:H,DraggingInfo:wt,DraggingOptions:St,LinkingBaseTool:U,LinkingTool:Y,RelinkingTool:q,LinkReshapingTool:W,ResizingTool:G,RotatingTool:X,ClickSelectingTool:K,ActionTool:J,ClickCreatingTool:Z,HTMLInfo:et,ContextMenuTool:nt,DragSelectingTool:Q,PanningTool:tt,TextEditingTool:at,ToolManager:z,Animation:ut,AnimationManager:ht,AnimationTrigger:ft,Layer:pt,Diagram:xt,Palette:class extends xt{constructor(i,n){let s;return void 0===i||"string"==typeof i||t.Element&&i instanceof Element?s=i:e.K(i)&&(n=i),super(s),this.gA(),n&&this.setProperties(n),this}gA(){this.allowDragOut=!0,this.allowMove=!1,this.isReadOnly=!0,this.contentAlignment=w.TopCenter,this.layout=new Re}setupRouters(){}reset(){super.reset(),this.gA()}},Overview:Ct,Brush:Ht,GraphObject:Dt,Panel:qt,RowColumnDefinition:Kt,Shape:Jt,TextBlock:ie,Picture:oe,Part:ce,Adornment:fe,Node:ge,Link:be,Placeholder:Pe,Layout:Ne,LayoutNetwork:De,LayoutVertex:Le,LayoutEdge:Ee,GridLayout:Re,PanelLayout:Ut,CircularLayout:Ge,CircularNetwork:Ke,CircularVertex:Je,CircularEdge:Ze,ForceDirectedLayout:Qe,ForceDirectedNetwork:ti,ForceDirectedVertex:ei,ForceDirectedEdge:ii,LayeredDigraphLayout:ui,LayeredDigraphNetwork:ci,LayeredDigraphVertex:di,LayeredDigraphEdge:fi,TreeLayout:wi,TreeNetwork:ki,TreeVertex:Si,TreeEdge:Ci,Themes:Mi,ThemeManager:Ti,Router:Ai,AnimationStyle:lt,AutoScale:gt,CycleMode:mt,Flip:Nt,TextFormat:ee,ImageStretch:re,LayoutConditions:ue,LinkAdjusting:ye,Curve:xe,Routing:ve,Orientation:Pt,TextOverflow:te,PortSpreading:pe,ScrollMode:yt,CollapsePolicy:vt,Sizing:Xt,TriggerStart:dt,Stretch:At,ViewboxStretch:Yt,Wrap:Qt,BrushType:Bt,ColorSpace:jt,GeometryStretch:T,GeometryType:M,SegmentType:N,BindingMode:Be,ChangeType:_,CircularArrangement:Ye,CircularDirection:qe,CircularNodeDiameterFormula:We,CircularSorting:$e,GridAlignment:_e,GridArrangement:Oe,GridSorting:Fe,LayeredDigraphAggressive:ai,LayeredDigraphAlign:hi,LayeredDigraphCycleRemove:si,LayeredDigraphInit:oi,LayeredDigraphLayering:ri,LayeredDigraphPack:li,TreeAlignment:mi,TreeArrangement:xi,TreeCompaction:yi,TreeLayerStyle:bi,TreePath:pi,TreeSorting:gi,TreeStyle:vi,GestureMode:j,LinkingDirection:V,ReshapingBehavior:$,TextEditingAccept:st,TextEditingStarting:rt,TextEditingState:ot,WheelMode:B};for(const t in Di){const i=Di[t];e.it(i)&&i!==ee&&(i.className=t)}e.K(Ni)&&Ni.version&&e.ni("WARNING: a `go` object on the root object is already defined.  "+("Debug"in Ni?"debug ":"")+"version: "+Ni.version+", replaced with version: "+Di.version),xt.prototype.go=Di,t.go=Di}(),"function"==typeof define&&define.amd&&define("undefined"!=typeof global?global.go:self.go),"undefined"!=typeof module&&"object"==typeof module.exports&&(module.exports="undefined"!=typeof global?global.go:self.go);